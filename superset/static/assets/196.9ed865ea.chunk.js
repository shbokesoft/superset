(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[196],{

/***/ "./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx":
/*!************************************************************************************!*\
  !*** ./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AnnotationLayer; });
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/for-each.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_entries__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/entries */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/entries.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_entries__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_entries__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/bind */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/bind.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/includes.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var react_color__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-color */ "./node_modules/react-color/lib/index.js");
/* harmony import */ var react_color__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_color__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var src_components_Button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! src/components/Button */ "./src/components/Button/index.tsx");
/* harmony import */ var mathjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! mathjs */ "./node_modules/mathjs/lib/esm/entry/impureFunctionsAny.generated.js");
/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @superset-ui/core */ "./node_modules/@superset-ui/core/esm/chart/registries/ChartMetadataRegistrySingleton.js");
/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @superset-ui/core */ "./node_modules/@superset-ui/core/esm/validator/validateNonEmpty.js");
/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @superset-ui/core */ "./node_modules/@superset-ui/core/esm/connection/SupersetClient.js");
/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @superset-ui/core */ "./node_modules/@superset-ui/core/esm/translation/TranslatorSingleton.js");
/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @superset-ui/core */ "./node_modules/@superset-ui/core/esm/color/CategoricalSchemeRegistrySingleton.js");
/* harmony import */ var src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! src/explore/components/controls/SelectControl */ "./src/explore/components/controls/SelectControl.jsx");
/* harmony import */ var src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! src/explore/components/controls/TextControl */ "./src/explore/components/controls/TextControl/index.tsx");
/* harmony import */ var src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! src/explore/components/controls/CheckboxControl */ "./src/explore/components/controls/CheckboxControl.jsx");
/* harmony import */ var src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! src/modules/AnnotationTypes */ "./src/modules/AnnotationTypes.js");
/* harmony import */ var src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! src/components/PopoverSection */ "./src/components/PopoverSection/index.tsx");
/* harmony import */ var src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! src/explore/components/ControlHeader */ "./src/explore/components/ControlHeader.jsx");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @emotion/react */ "./node_modules/@emotion/react/dist/emotion-react.browser.esm.js");
(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */














const AUTOMATIC_COLOR = '';

const propTypes = {
  name: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  annotationType: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  sourceType: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  color: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  opacity: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  style: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  width: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number,
  showMarkers: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.bool,
  hideLine: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.bool,
  value: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string, prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number]),
  overrides: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.object,
  show: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.bool,
  titleColumn: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  descriptionColumns: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string),
  timeColumn: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  intervalEndColumn: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  vizType: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,

  error: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  colorScheme: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,

  addAnnotationLayer: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  removeAnnotationLayer: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  close: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,

  onPopoverClear: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func };


const defaultProps = {
  name: '',
  annotationType: src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["DEFAULT_ANNOTATION_TYPE"],
  sourceType: '',
  color: AUTOMATIC_COLOR,
  opacity: '',
  style: 'solid',
  width: 1,
  showMarkers: false,
  hideLine: false,
  overrides: {},
  colorScheme: 'd3Category10',
  show: true,
  titleColumn: '',
  descriptionColumns: [],
  timeColumn: '',
  intervalEndColumn: '',

  addAnnotationLayer: () => {},
  removeAnnotationLayer: () => {},
  close: () => {},
  onPopoverClear: () => {} };var _ref =  false ? undefined : { name: "1jn9azd-AnnotationLayer", styles: "overflow:hidden;text-overflow:ellipsis;white-space:nowrap;label:AnnotationLayer;", map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkc6XFx3b3Jrc3BhY2VcXGJva2UtcHJvXFxzdXBlcnNldC1hbGxcXHN1cGVyc2V0XFxzdXBlcnNldC1mcm9udGVuZFxcc3JjXFxleHBsb3JlXFxjb21wb25lbnRzXFxjb250cm9sc1xcQW5ub3RhdGlvbkxheWVyQ29udHJvbFxcQW5ub3RhdGlvbkxheWVyLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFvWFEiLCJmaWxlIjoiRzpcXHdvcmtzcGFjZVxcYm9rZS1wcm9cXHN1cGVyc2V0LWFsbFxcc3VwZXJzZXRcXHN1cGVyc2V0LWZyb250ZW5kXFxzcmNcXGV4cGxvcmVcXGNvbXBvbmVudHNcXGNvbnRyb2xzXFxBbm5vdGF0aW9uTGF5ZXJDb250cm9sXFxBbm5vdGF0aW9uTGF5ZXIuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0IHsgQ29tcGFjdFBpY2tlciB9IGZyb20gJ3JlYWN0LWNvbG9yJztcclxuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xyXG5pbXBvcnQgeyBwYXJzZSBhcyBtYXRoanNQYXJzZSB9IGZyb20gJ21hdGhqcyc7XHJcbmltcG9ydCB7XHJcbiAgdCxcclxuICBTdXBlcnNldENsaWVudCxcclxuICBnZXRDYXRlZ29yaWNhbFNjaGVtZVJlZ2lzdHJ5LFxyXG4gIGdldENoYXJ0TWV0YWRhdGFSZWdpc3RyeSxcclxuICB2YWxpZGF0ZU5vbkVtcHR5LFxyXG59IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcclxuXHJcbmltcG9ydCBTZWxlY3RDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvU2VsZWN0Q29udHJvbCc7XHJcbmltcG9ydCBUZXh0Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1RleHRDb250cm9sJztcclxuaW1wb3J0IENoZWNrYm94Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0NoZWNrYm94Q29udHJvbCc7XHJcbmltcG9ydCB7XHJcbiAgQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMsXHJcbiAgQU5OT1RBVElPTl9UWVBFUyxcclxuICBBTk5PVEFUSU9OX1RZUEVTX01FVEFEQVRBLFxyXG4gIERFRkFVTFRfQU5OT1RBVElPTl9UWVBFLFxyXG4gIHJlcXVpcmVzUXVlcnksXHJcbiAgQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVNfTUVUQURBVEEsXHJcbn0gZnJvbSAnc3JjL21vZHVsZXMvQW5ub3RhdGlvblR5cGVzJztcclxuaW1wb3J0IFBvcG92ZXJTZWN0aW9uIGZyb20gJ3NyYy9jb21wb25lbnRzL1BvcG92ZXJTZWN0aW9uJztcclxuaW1wb3J0IENvbnRyb2xIZWFkZXIgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Db250cm9sSGVhZGVyJztcclxuXHJcbmNvbnN0IEFVVE9NQVRJQ19DT0xPUiA9ICcnO1xyXG5cclxuY29uc3QgcHJvcFR5cGVzID0ge1xyXG4gIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgYW5ub3RhdGlvblR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgc291cmNlVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICBjb2xvcjogUHJvcFR5cGVzLnN0cmluZyxcclxuICBvcGFjaXR5OiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHN0eWxlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHdpZHRoOiBQcm9wVHlwZXMubnVtYmVyLFxyXG4gIHNob3dNYXJrZXJzOiBQcm9wVHlwZXMuYm9vbCxcclxuICBoaWRlTGluZTogUHJvcFR5cGVzLmJvb2wsXHJcbiAgdmFsdWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcclxuICBvdmVycmlkZXM6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgc2hvdzogUHJvcFR5cGVzLmJvb2wsXHJcbiAgdGl0bGVDb2x1bW46IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgZGVzY3JpcHRpb25Db2x1bW5zOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcclxuICB0aW1lQ29sdW1uOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGludGVydmFsRW5kQ29sdW1uOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHZpelR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcblxyXG4gIGVycm9yOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGNvbG9yU2NoZW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG5cclxuICBhZGRBbm5vdGF0aW9uTGF5ZXI6IFByb3BUeXBlcy5mdW5jLFxyXG4gIHJlbW92ZUFubm90YXRpb25MYXllcjogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgY2xvc2U6IFByb3BUeXBlcy5mdW5jLFxyXG5cclxuICBvblBvcG92ZXJDbGVhcjogUHJvcFR5cGVzLmZ1bmMsXHJcbn07XHJcblxyXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgbmFtZTogJycsXHJcbiAgYW5ub3RhdGlvblR5cGU6IERFRkFVTFRfQU5OT1RBVElPTl9UWVBFLFxyXG4gIHNvdXJjZVR5cGU6ICcnLFxyXG4gIGNvbG9yOiBBVVRPTUFUSUNfQ09MT1IsXHJcbiAgb3BhY2l0eTogJycsXHJcbiAgc3R5bGU6ICdzb2xpZCcsXHJcbiAgd2lkdGg6IDEsXHJcbiAgc2hvd01hcmtlcnM6IGZhbHNlLFxyXG4gIGhpZGVMaW5lOiBmYWxzZSxcclxuICBvdmVycmlkZXM6IHt9LFxyXG4gIGNvbG9yU2NoZW1lOiAnZDNDYXRlZ29yeTEwJyxcclxuICBzaG93OiB0cnVlLFxyXG4gIHRpdGxlQ29sdW1uOiAnJyxcclxuICBkZXNjcmlwdGlvbkNvbHVtbnM6IFtdLFxyXG4gIHRpbWVDb2x1bW46ICcnLFxyXG4gIGludGVydmFsRW5kQ29sdW1uOiAnJyxcclxuXHJcbiAgYWRkQW5ub3RhdGlvbkxheWVyOiAoKSA9PiB7fSxcclxuICByZW1vdmVBbm5vdGF0aW9uTGF5ZXI6ICgpID0+IHt9LFxyXG4gIGNsb3NlOiAoKSA9PiB7fSxcclxuICBvblBvcG92ZXJDbGVhcjogKCkgPT4ge30sXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbm5vdGF0aW9uTGF5ZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBuYW1lLFxyXG4gICAgICBhbm5vdGF0aW9uVHlwZSxcclxuICAgICAgc291cmNlVHlwZSxcclxuICAgICAgY29sb3IsXHJcbiAgICAgIG9wYWNpdHksXHJcbiAgICAgIHN0eWxlLFxyXG4gICAgICB3aWR0aCxcclxuICAgICAgc2hvd01hcmtlcnMsXHJcbiAgICAgIGhpZGVMaW5lLFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgb3ZlcnJpZGVzLFxyXG4gICAgICBzaG93LFxyXG4gICAgICB0aXRsZUNvbHVtbixcclxuICAgICAgZGVzY3JpcHRpb25Db2x1bW5zLFxyXG4gICAgICB0aW1lQ29sdW1uLFxyXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbixcclxuICAgICAgdml6VHlwZSxcclxuICAgIH0gPSBwcm9wcztcclxuXHJcbiAgICAvLyBPbmx5IGFsbG93IG92ZXJyaWRlIHdob2xlIHRpbWVfcmFuZ2VcclxuICAgIGlmICgnc2luY2UnIGluIG92ZXJyaWRlcyB8fCAndW50aWwnIGluIG92ZXJyaWRlcykge1xyXG4gICAgICBvdmVycmlkZXMudGltZV9yYW5nZSA9IG51bGw7XHJcbiAgICAgIGRlbGV0ZSBvdmVycmlkZXMuc2luY2U7XHJcbiAgICAgIGRlbGV0ZSBvdmVycmlkZXMudW50aWw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgYW5ub3RhdGlvblR5cGUgaXMgc3VwcG9ydGVkIGJ5IHRoaXMgY2hhcnRcclxuICAgIGNvbnN0IG1ldGFkYXRhID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCkuZ2V0KHZpelR5cGUpO1xyXG4gICAgY29uc3Qgc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzID0gbWV0YWRhdGE/LnN1cHBvcnRlZEFubm90YXRpb25UeXBlcyB8fCBbXTtcclxuICAgIGNvbnN0IHZhbGlkQW5ub3RhdGlvblR5cGUgPSBzdXBwb3J0ZWRBbm5vdGF0aW9uVHlwZXMuaW5jbHVkZXMoXHJcbiAgICAgIGFubm90YXRpb25UeXBlLFxyXG4gICAgKVxyXG4gICAgICA/IGFubm90YXRpb25UeXBlXHJcbiAgICAgIDogc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzWzBdO1xyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIC8vIGJhc2VcclxuICAgICAgbmFtZSxcclxuICAgICAgYW5ub3RhdGlvblR5cGU6IHZhbGlkQW5ub3RhdGlvblR5cGUsXHJcbiAgICAgIHNvdXJjZVR5cGUsXHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICBvdmVycmlkZXMsXHJcbiAgICAgIHNob3csXHJcbiAgICAgIC8vIHNsaWNlXHJcbiAgICAgIHRpdGxlQ29sdW1uLFxyXG4gICAgICBkZXNjcmlwdGlvbkNvbHVtbnMsXHJcbiAgICAgIHRpbWVDb2x1bW4sXHJcbiAgICAgIGludGVydmFsRW5kQ29sdW1uLFxyXG4gICAgICAvLyBkaXNwbGF5XHJcbiAgICAgIGNvbG9yOiBjb2xvciB8fCBBVVRPTUFUSUNfQ09MT1IsXHJcbiAgICAgIG9wYWNpdHksXHJcbiAgICAgIHN0eWxlLFxyXG4gICAgICB3aWR0aCxcclxuICAgICAgc2hvd01hcmtlcnMsXHJcbiAgICAgIGhpZGVMaW5lLFxyXG4gICAgICAvLyByZWZEYXRhXHJcbiAgICAgIGlzTmV3OiAhbmFtZSxcclxuICAgICAgaXNMb2FkaW5nT3B0aW9uczogdHJ1ZSxcclxuICAgICAgdmFsdWVPcHRpb25zOiBbXSxcclxuICAgIH07XHJcbiAgICB0aGlzLnN1Ym1pdEFubm90YXRpb24gPSB0aGlzLnN1Ym1pdEFubm90YXRpb24uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZGVsZXRlQW5ub3RhdGlvbiA9IHRoaXMuZGVsZXRlQW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5hcHBseUFubm90YXRpb24gPSB0aGlzLmFwcGx5QW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5mZXRjaE9wdGlvbnMgPSB0aGlzLmZldGNoT3B0aW9ucy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVBbm5vdGF0aW9uVHlwZSA9IHRoaXMuaGFuZGxlQW5ub3RhdGlvblR5cGUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaGFuZGxlQW5ub3RhdGlvblNvdXJjZVR5cGUgPSB0aGlzLmhhbmRsZUFubm90YXRpb25Tb3VyY2VUeXBlLmJpbmQoXHJcbiAgICAgIHRoaXMsXHJcbiAgICApO1xyXG4gICAgdGhpcy5oYW5kbGVWYWx1ZSA9IHRoaXMuaGFuZGxlVmFsdWUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaXNWYWxpZEZvcm0gPSB0aGlzLmlzVmFsaWRGb3JtLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnBvcG92ZXJDbGVhcldyYXBwZXIgPSB0aGlzLnBvcG92ZXJDbGVhcldyYXBwZXIuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgY29uc3QgeyBhbm5vdGF0aW9uVHlwZSwgc291cmNlVHlwZSwgaXNMb2FkaW5nT3B0aW9ucyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIHRoaXMuZmV0Y2hPcHRpb25zKGFubm90YXRpb25UeXBlLCBzb3VyY2VUeXBlLCBpc0xvYWRpbmdPcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xyXG4gICAgaWYgKHByZXZTdGF0ZS5zb3VyY2VUeXBlICE9PSB0aGlzLnN0YXRlLnNvdXJjZVR5cGUpIHtcclxuICAgICAgdGhpcy5mZXRjaE9wdGlvbnModGhpcy5zdGF0ZS5hbm5vdGF0aW9uVHlwZSwgdGhpcy5zdGF0ZS5zb3VyY2VUeXBlLCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFN1cHBvcnRlZFNvdXJjZVR5cGVzKGFubm90YXRpb25UeXBlKSB7XHJcbiAgICAvLyBHZXQgdmlzIHR5cGVzIHRoYXQgY2FuIGJlIHNvdXJjZS5cclxuICAgIGNvbnN0IHNvdXJjZXMgPSBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnkoKVxyXG4gICAgICAuZW50cmllcygpXHJcbiAgICAgIC5maWx0ZXIoKHsgdmFsdWU6IGNoYXJ0TWV0YWRhdGEgfSkgPT5cclxuICAgICAgICBjaGFydE1ldGFkYXRhLmNhbkJlQW5ub3RhdGlvblR5cGUoYW5ub3RhdGlvblR5cGUpLFxyXG4gICAgICApXHJcbiAgICAgIC5tYXAoKHsga2V5LCB2YWx1ZTogY2hhcnRNZXRhZGF0YSB9KSA9PiAoe1xyXG4gICAgICAgIHZhbHVlOiBrZXksXHJcbiAgICAgICAgbGFiZWw6IGNoYXJ0TWV0YWRhdGEubmFtZSxcclxuICAgICAgfSkpO1xyXG4gICAgLy8gUHJlcGVuZCBuYXRpdmUgc291cmNlIGlmIGFwcGxpY2FibGVcclxuICAgIGlmIChBTk5PVEFUSU9OX1RZUEVTX01FVEFEQVRBW2Fubm90YXRpb25UeXBlXT8uc3VwcG9ydE5hdGl2ZVNvdXJjZSkge1xyXG4gICAgICBzb3VyY2VzLnVuc2hpZnQoQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVNfTUVUQURBVEEuTkFUSVZFKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzb3VyY2VzO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZEZvcm11bGEodmFsdWUsIGFubm90YXRpb25UeXBlKSB7XHJcbiAgICBpZiAoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIG1hdGhqc1BhcnNlKHZhbHVlKS5jb21waWxlKCkuZXZhbHVhdGUoeyB4OiAwIH0pO1xyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZEZvcm0oKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGFubm90YXRpb25UeXBlLFxyXG4gICAgICBzb3VyY2VUeXBlLFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgdGltZUNvbHVtbixcclxuICAgICAgaW50ZXJ2YWxFbmRDb2x1bW4sXHJcbiAgICB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IGVycm9ycyA9IFtcclxuICAgICAgdmFsaWRhdGVOb25FbXB0eShuYW1lKSxcclxuICAgICAgdmFsaWRhdGVOb25FbXB0eShhbm5vdGF0aW9uVHlwZSksXHJcbiAgICAgIHZhbGlkYXRlTm9uRW1wdHkodmFsdWUpLFxyXG4gICAgXTtcclxuICAgIGlmIChzb3VyY2VUeXBlICE9PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUpIHtcclxuICAgICAgaWYgKGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLkVWRU5UKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2godmFsaWRhdGVOb25FbXB0eSh0aW1lQ29sdW1uKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLklOVEVSVkFMKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2godmFsaWRhdGVOb25FbXB0eSh0aW1lQ29sdW1uKSk7XHJcbiAgICAgICAgZXJyb3JzLnB1c2godmFsaWRhdGVOb25FbXB0eShpbnRlcnZhbEVuZENvbHVtbikpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlcnJvcnMucHVzaCh0aGlzLmlzVmFsaWRGb3JtdWxhKHZhbHVlLCBhbm5vdGF0aW9uVHlwZSkpO1xyXG4gICAgcmV0dXJuICFlcnJvcnMuZmlsdGVyKHggPT4geCkubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcG9wb3ZlckNsZWFyV3JhcHBlcih2YWx1ZSwgYWN0aW9uTWV0YSwgY2FsbGJhY2spIHtcclxuICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICBjYWxsYmFjayh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aW9uTWV0YT8uYWN0aW9uID09PSAnY2xlYXInKSB7XHJcbiAgICAgIHRoaXMucHJvcHMub25Qb3BvdmVyQ2xlYXIodHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVBbm5vdGF0aW9uVHlwZShhbm5vdGF0aW9uVHlwZSkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGFubm90YXRpb25UeXBlLFxyXG4gICAgICBzb3VyY2VUeXBlOiBudWxsLFxyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQW5ub3RhdGlvblNvdXJjZVR5cGUoc291cmNlVHlwZSkge1xyXG4gICAgY29uc3QgeyBzb3VyY2VUeXBlOiBwcmV2U291cmNlVHlwZSB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICBpZiAocHJldlNvdXJjZVR5cGUgIT09IHNvdXJjZVR5cGUpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNvdXJjZVR5cGUsIHZhbHVlOiBudWxsLCBpc0xvYWRpbmdPcHRpb25zOiB0cnVlIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlVmFsdWUodmFsdWUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICB2YWx1ZSxcclxuICAgICAgZGVzY3JpcHRpb25Db2x1bW5zOiBudWxsLFxyXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbjogbnVsbCxcclxuICAgICAgdGltZUNvbHVtbjogbnVsbCxcclxuICAgICAgdGl0bGVDb2x1bW46IG51bGwsXHJcbiAgICAgIG92ZXJyaWRlczogeyB0aW1lX3JhbmdlOiBudWxsIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZldGNoT3B0aW9ucyhhbm5vdGF0aW9uVHlwZSwgc291cmNlVHlwZSwgaXNMb2FkaW5nT3B0aW9ucykge1xyXG4gICAgaWYgKGlzTG9hZGluZ09wdGlvbnMpIHtcclxuICAgICAgaWYgKHNvdXJjZVR5cGUgPT09IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTLk5BVElWRSkge1xyXG4gICAgICAgIFN1cGVyc2V0Q2xpZW50LmdldCh7XHJcbiAgICAgICAgICBlbmRwb2ludDogJy9hbm5vdGF0aW9ubGF5ZXJtb2RlbHZpZXcvYXBpL3JlYWQ/JyxcclxuICAgICAgICB9KS50aGVuKCh7IGpzb24gfSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgbGF5ZXJzID0ganNvblxyXG4gICAgICAgICAgICA/IGpzb24ucmVzdWx0Lm1hcChsYXllciA9PiAoe1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGxheWVyLmlkLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGxheWVyLm5hbWUsXHJcbiAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIDogW107XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNMb2FkaW5nT3B0aW9uczogZmFsc2UsXHJcbiAgICAgICAgICAgIHZhbHVlT3B0aW9uczogbGF5ZXJzLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAocmVxdWlyZXNRdWVyeShzb3VyY2VUeXBlKSkge1xyXG4gICAgICAgIFN1cGVyc2V0Q2xpZW50LmdldCh7IGVuZHBvaW50OiAnL3N1cGVyc2V0L3VzZXJfc2xpY2VzJyB9KS50aGVuKFxyXG4gICAgICAgICAgKHsganNvbiB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJ5ID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgIGlzTG9hZGluZ09wdGlvbnM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgIHZhbHVlT3B0aW9uczoganNvblxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSByZWdpc3RyeS5nZXQoeC52aXpfdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEgJiYgbWV0YWRhdGEuY2FuQmVBbm5vdGF0aW9uVHlwZShhbm5vdGF0aW9uVHlwZSlcclxuICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubWFwKHggPT4gKHsgdmFsdWU6IHguaWQsIGxhYmVsOiB4LnRpdGxlLCBzbGljZTogeCB9KSksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgaXNMb2FkaW5nT3B0aW9uczogZmFsc2UsXHJcbiAgICAgICAgICB2YWx1ZU9wdGlvbnM6IFtdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVBbm5vdGF0aW9uKCkge1xyXG4gICAgdGhpcy5wcm9wcy5yZW1vdmVBbm5vdGF0aW9uTGF5ZXIoKTtcclxuICAgIHRoaXMucHJvcHMuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIGFwcGx5QW5ub3RhdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmlzVmFsaWRGb3JtKCkpIHtcclxuICAgICAgY29uc3QgYW5ub3RhdGlvbkZpZWxkcyA9IFtcclxuICAgICAgICAnbmFtZScsXHJcbiAgICAgICAgJ2Fubm90YXRpb25UeXBlJyxcclxuICAgICAgICAnc291cmNlVHlwZScsXHJcbiAgICAgICAgJ2NvbG9yJyxcclxuICAgICAgICAnb3BhY2l0eScsXHJcbiAgICAgICAgJ3N0eWxlJyxcclxuICAgICAgICAnd2lkdGgnLFxyXG4gICAgICAgICdzaG93TWFya2VycycsXHJcbiAgICAgICAgJ2hpZGVMaW5lJyxcclxuICAgICAgICAndmFsdWUnLFxyXG4gICAgICAgICdvdmVycmlkZXMnLFxyXG4gICAgICAgICdzaG93JyxcclxuICAgICAgICAndGl0bGVDb2x1bW4nLFxyXG4gICAgICAgICdkZXNjcmlwdGlvbkNvbHVtbnMnLFxyXG4gICAgICAgICd0aW1lQ29sdW1uJyxcclxuICAgICAgICAnaW50ZXJ2YWxFbmRDb2x1bW4nLFxyXG4gICAgICBdO1xyXG4gICAgICBjb25zdCBuZXdBbm5vdGF0aW9uID0ge307XHJcbiAgICAgIGFubm90YXRpb25GaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVbZmllbGRdICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBuZXdBbm5vdGF0aW9uW2ZpZWxkXSA9IHRoaXMuc3RhdGVbZmllbGRdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAobmV3QW5ub3RhdGlvbi5jb2xvciA9PT0gQVVUT01BVElDX0NPTE9SKSB7XHJcbiAgICAgICAgbmV3QW5ub3RhdGlvbi5jb2xvciA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucHJvcHMuYWRkQW5ub3RhdGlvbkxheWVyKG5ld0Fubm90YXRpb24pO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNOZXc6IGZhbHNlIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3VibWl0QW5ub3RhdGlvbigpIHtcclxuICAgIHRoaXMuYXBwbHlBbm5vdGF0aW9uKCk7XHJcbiAgICB0aGlzLnByb3BzLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJPcHRpb24ob3B0aW9uKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8c3BhblxyXG4gICAgICAgIGNzcz17e1xyXG4gICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgdGV4dE92ZXJmbG93OiAnZWxsaXBzaXMnLFxyXG4gICAgICAgICAgd2hpdGVTcGFjZTogJ25vd3JhcCcsXHJcbiAgICAgICAgfX1cclxuICAgICAgICB0aXRsZT17b3B0aW9uLmxhYmVsfVxyXG4gICAgICA+XHJcbiAgICAgICAge29wdGlvbi5sYWJlbH1cclxuICAgICAgPC9zcGFuPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJlbmRlclZhbHVlQ29uZmlndXJhdGlvbigpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgYW5ub3RhdGlvblR5cGUsXHJcbiAgICAgIHNvdXJjZVR5cGUsXHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICB2YWx1ZU9wdGlvbnMsXHJcbiAgICAgIGlzTG9hZGluZ09wdGlvbnMsXHJcbiAgICB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGxldCBsYWJlbCA9ICcnO1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcbiAgICBpZiAocmVxdWlyZXNRdWVyeShzb3VyY2VUeXBlKSkge1xyXG4gICAgICBpZiAoc291cmNlVHlwZSA9PT0gQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMuTkFUSVZFKSB7XHJcbiAgICAgICAgbGFiZWwgPSAnQW5ub3RhdGlvbiBsYXllcic7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gPSAnU2VsZWN0IHRoZSBBbm5vdGF0aW9uIExheWVyIHlvdSB3b3VsZCBsaWtlIHRvIHVzZS4nO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxhYmVsID0gdCgnQ2hhcnQnKTtcclxuICAgICAgICBkZXNjcmlwdGlvbiA9IGBVc2UgYSBwcmUgZGVmaW5lZCBTdXBlcnNldCBDaGFydCBhcyBhIHNvdXJjZSBmb3IgYW5ub3RhdGlvbnMgYW5kIG92ZXJsYXlzLlxyXG4gICAgICAgIHlvdXIgY2hhcnQgbXVzdCBiZSBvbmUgb2YgdGhlc2UgdmlzdWFsaXphdGlvbiB0eXBlczpcclxuICAgICAgICBbJHt0aGlzLmdldFN1cHBvcnRlZFNvdXJjZVR5cGVzKGFubm90YXRpb25UeXBlKVxyXG4gICAgICAgICAgLm1hcCh4ID0+IHgubGFiZWwpXHJcbiAgICAgICAgICAuam9pbignLCAnKX1dYDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5GT1JNVUxBKSB7XHJcbiAgICAgIGxhYmVsID0gJ0Zvcm11bGEnO1xyXG4gICAgICBkZXNjcmlwdGlvbiA9IGBFeHBlY3RzIGEgZm9ybXVsYSB3aXRoIGRlcGVuZGluZyB0aW1lIHBhcmFtZXRlciAneCdcclxuICAgICAgICBpbiBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2guIG1hdGhqcyBpcyB1c2VkIHRvIGV2YWx1YXRlIHRoZSBmb3JtdWxhcy5cclxuICAgICAgICBFeGFtcGxlOiAnMngrNSdgO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVpcmVzUXVlcnkoc291cmNlVHlwZSkpIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8U2VsZWN0Q29udHJvbFxyXG4gICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdmFsdWVcIlxyXG4gICAgICAgICAgc2hvd0hlYWRlclxyXG4gICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgbGFiZWw9e2xhYmVsfVxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxyXG4gICAgICAgICAgb3B0aW9ucz17dmFsdWVPcHRpb25zfVxyXG4gICAgICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmdPcHRpb25zfVxyXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlfVxyXG4gICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgXywgYWN0aW9uTWV0YSkgPT5cclxuICAgICAgICAgICAgdGhpcy5wb3BvdmVyQ2xlYXJXcmFwcGVyKHZhbHVlLCBhY3Rpb25NZXRhLCB0aGlzLmhhbmRsZVZhbHVlKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFsaWRhdGlvbkVycm9ycz17IXZhbHVlID8gWydNYW5kYXRvcnknXSA6IFtdfVxyXG4gICAgICAgICAgb3B0aW9uUmVuZGVyZXI9e3RoaXMucmVuZGVyT3B0aW9ufVxyXG4gICAgICAgIC8+XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQSkge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxUZXh0Q29udHJvbFxyXG4gICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdmFsdWVcIlxyXG4gICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgc2hvd0hlYWRlclxyXG4gICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgbGFiZWw9e2xhYmVsfVxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxyXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVmFsdWV9XHJcbiAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXtcclxuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkRm9ybXVsYSh2YWx1ZSwgYW5ub3RhdGlvblR5cGUpID8gWydCYWQgZm9ybXVsYS4nXSA6IFtdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgLz5cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiAnJztcclxuICB9XHJcblxyXG4gIHJlbmRlclNsaWNlQ29uZmlndXJhdGlvbigpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgYW5ub3RhdGlvblR5cGUsXHJcbiAgICAgIHNvdXJjZVR5cGUsXHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICB2YWx1ZU9wdGlvbnMsXHJcbiAgICAgIG92ZXJyaWRlcyxcclxuICAgICAgdGl0bGVDb2x1bW4sXHJcbiAgICAgIHRpbWVDb2x1bW4sXHJcbiAgICAgIGludGVydmFsRW5kQ29sdW1uLFxyXG4gICAgICBkZXNjcmlwdGlvbkNvbHVtbnMsXHJcbiAgICB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHsgc2xpY2UgfSA9IHZhbHVlT3B0aW9ucy5maW5kKHggPT4geC52YWx1ZSA9PT0gdmFsdWUpIHx8IHt9O1xyXG4gICAgaWYgKHNvdXJjZVR5cGUgIT09IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTLk5BVElWRSAmJiBzbGljZSkge1xyXG4gICAgICBjb25zdCBjb2x1bW5zID0gKHNsaWNlLmRhdGEuZ3JvdXBieSB8fCBbXSlcclxuICAgICAgICAuY29uY2F0KHNsaWNlLmRhdGEuYWxsX2NvbHVtbnMgfHwgW10pXHJcbiAgICAgICAgLm1hcCh4ID0+ICh7IHZhbHVlOiB4LCBsYWJlbDogeCB9KSk7XHJcbiAgICAgIGNvbnN0IHRpbWVDb2x1bW5PcHRpb25zID0gc2xpY2UuZGF0YS5pbmNsdWRlX3RpbWVcclxuICAgICAgICA/IFt7IHZhbHVlOiAnX190aW1lc3RhbXAnLCBsYWJlbDogJ19fdGltZXN0YW1wJyB9XS5jb25jYXQoY29sdW1ucylcclxuICAgICAgICA6IGNvbHVtbnM7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5SaWdodDogJzJyZW0nIH19PlxyXG4gICAgICAgICAgPFBvcG92ZXJTZWN0aW9uXHJcbiAgICAgICAgICAgIGlzU2VsZWN0ZWRcclxuICAgICAgICAgICAgdGl0bGU9e3QoJ0Fubm90YXRpb24gU2xpY2UgQ29uZmlndXJhdGlvbicpfVxyXG4gICAgICAgICAgICBpbmZvPXt0KGBUaGlzIHNlY3Rpb24gYWxsb3dzIHlvdSB0byBjb25maWd1cmUgaG93IHRvIHVzZSB0aGUgc2xpY2VcclxuICAgICAgICAgICAgICAgdG8gZ2VuZXJhdGUgYW5ub3RhdGlvbnMuYCl9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHsoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRVZFTlQgfHxcclxuICAgICAgICAgICAgICBhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5JTlRFUlZBTCkgJiYgKFxyXG4gICAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXHJcbiAgICAgICAgICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci10aW1lLWNvbHVtblwiXHJcbiAgICAgICAgICAgICAgICBsYWJlbD17XHJcbiAgICAgICAgICAgICAgICAgIGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLklOVEVSVkFMXHJcbiAgICAgICAgICAgICAgICAgICAgPyAnSW50ZXJ2YWwgc3RhcnQgY29sdW1uJ1xyXG4gICAgICAgICAgICAgICAgICAgIDogJ0V2ZW50IHRpbWUgY29sdW1uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249XCJUaGlzIGNvbHVtbiBtdXN0IGNvbnRhaW4gZGF0ZS90aW1lIGluZm9ybWF0aW9uLlwiXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXshdGltZUNvbHVtbiA/IFsnTWFuZGF0b3J5J10gOiBbXX1cclxuICAgICAgICAgICAgICAgIGNsZWFyYWJsZT17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPXt0aW1lQ29sdW1uT3B0aW9uc31cclxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aW1lQ29sdW1ufVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHRpbWVDb2x1bW46IHYgfSl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAge2Fubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLklOVEVSVkFMICYmIChcclxuICAgICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItaW50ZXJ2YWxFbmRcIlxyXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJJbnRlcnZhbCBFbmQgY29sdW1uXCJcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPVwiVGhpcyBjb2x1bW4gbXVzdCBjb250YWluIGRhdGUvdGltZSBpbmZvcm1hdGlvbi5cIlxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9ycz17IWludGVydmFsRW5kQ29sdW1uID8gWydNYW5kYXRvcnknXSA6IFtdfVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucz17Y29sdW1uc31cclxuICAgICAgICAgICAgICAgIHZhbHVlPXtpbnRlcnZhbEVuZENvbHVtbn1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIF8sIGFjdGlvbk1ldGEpID0+XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucG9wb3ZlckNsZWFyV3JhcHBlcih2YWx1ZSwgYWN0aW9uTWV0YSwgdiA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbnRlcnZhbEVuZENvbHVtbjogdiB9KSxcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXHJcbiAgICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXRpdGxlXCJcclxuICAgICAgICAgICAgICBsYWJlbD1cIlRpdGxlIENvbHVtblwiXHJcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249XCJQaWNrIGEgdGl0bGUgZm9yIHlvdSBhbm5vdGF0aW9uLlwiXHJcbiAgICAgICAgICAgICAgb3B0aW9ucz17W3sgdmFsdWU6ICcnLCBsYWJlbDogJ05vbmUnIH1dLmNvbmNhdChjb2x1bW5zKX1cclxuICAgICAgICAgICAgICB2YWx1ZT17dGl0bGVDb2x1bW59XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgXywgYWN0aW9uTWV0YSkgPT5cclxuICAgICAgICAgICAgICAgIHRoaXMucG9wb3ZlckNsZWFyV3JhcHBlcih2YWx1ZSwgYWN0aW9uTWV0YSwgdiA9PlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgdGl0bGVDb2x1bW46IHYgfSksXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICB7YW5ub3RhdGlvblR5cGUgIT09IEFOTk9UQVRJT05fVFlQRVMuVElNRV9TRVJJRVMgJiYgKFxyXG4gICAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXHJcbiAgICAgICAgICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci10aXRsZVwiXHJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIkRlc2NyaXB0aW9uIENvbHVtbnNcIlxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e2BQaWNrIG9uZSBvciBtb3JlIGNvbHVtbnMgdGhhdCBzaG91bGQgYmUgc2hvd24gaW4gdGhlXHJcbiAgICAgICAgICAgICAgICAgIGFubm90YXRpb24uIElmIHlvdSBkb24ndCBzZWxlY3QgYSBjb2x1bW4gYWxsIG9mIHRoZW0gd2lsbCBiZSBzaG93bi5gfVxyXG4gICAgICAgICAgICAgICAgbXVsdGlcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e2NvbHVtbnN9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17ZGVzY3JpcHRpb25Db2x1bW5zfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgXywgYWN0aW9uTWV0YSkgPT5cclxuICAgICAgICAgICAgICAgICAgdGhpcy5wb3BvdmVyQ2xlYXJXcmFwcGVyKHZhbHVlLCBhY3Rpb25NZXRhLCB2ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRlc2NyaXB0aW9uQ29sdW1uczogdiB9KSxcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMXJlbScgfX0+XHJcbiAgICAgICAgICAgICAgPENoZWNrYm94Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tb3ZlcnJpZGUtdGltZV9yYW5nZVwiXHJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk92ZXJyaWRlIHRpbWUgcmFuZ2VcIlxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e2BUaGlzIGNvbnRyb2xzIHdoZXRoZXIgdGhlIFwidGltZV9yYW5nZVwiIGZpZWxkIGZyb20gdGhlIGN1cnJlbnRcclxuICAgICAgICAgICAgICAgICAgdmlldyBzaG91bGQgYmUgcGFzc2VkIGRvd24gdG8gdGhlIGNoYXJ0IGNvbnRhaW5pbmcgdGhlIGFubm90YXRpb24gZGF0YS5gfVxyXG4gICAgICAgICAgICAgICAgdmFsdWU9eyd0aW1lX3JhbmdlJyBpbiBvdmVycmlkZXN9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvdmVycmlkZXMudGltZV9yYW5nZTtcclxuICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlczogeyAuLi5vdmVycmlkZXMsIHRpbWVfcmFuZ2U6IG51bGwgfSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3ZlcnJpZGVzOiB7IC4uLm92ZXJyaWRlcyB9IH0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPENoZWNrYm94Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tb3ZlcnJpZGUtdGltZWdyYWluXCJcclxuICAgICAgICAgICAgICAgIGxhYmVsPVwiT3ZlcnJpZGUgdGltZSBncmFpblwiXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17YFRoaXMgY29udHJvbHMgd2hldGhlciB0aGUgdGltZSBncmFpbiBmaWVsZCBmcm9tIHRoZSBjdXJyZW50XHJcbiAgICAgICAgICAgICAgICAgIHZpZXcgc2hvdWxkIGJlIHBhc3NlZCBkb3duIHRvIHRoZSBjaGFydCBjb250YWluaW5nIHRoZSBhbm5vdGF0aW9uIGRhdGEuYH1cclxuICAgICAgICAgICAgICAgIHZhbHVlPXsndGltZV9ncmFpbl9zcWxhJyBpbiBvdmVycmlkZXN9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvdmVycmlkZXMudGltZV9ncmFpbl9zcWxhO1xyXG4gICAgICAgICAgICAgICAgICBkZWxldGUgb3ZlcnJpZGVzLmdyYW51bGFyaXR5O1xyXG4gICAgICAgICAgICAgICAgICBpZiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm92ZXJyaWRlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZV9ncmFpbl9zcWxhOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmFudWxhcml0eTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG92ZXJyaWRlczogeyAuLi5vdmVycmlkZXMgfSB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdGltZXNoaWZ0XCJcclxuICAgICAgICAgICAgICAgIGxhYmVsPVwiVGltZSBTaGlmdFwiXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17YFRpbWUgZGVsdGEgaW4gbmF0dXJhbCBsYW5ndWFnZVxyXG4gICAgICAgICAgICAgICAgICAoZXhhbXBsZTogIDI0IGhvdXJzLCA3IGRheXMsIDU2IHdlZWtzLCAzNjUgZGF5cylgfVxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e292ZXJyaWRlcy50aW1lX3NoaWZ0fVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT5cclxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG92ZXJyaWRlczogeyAuLi5vdmVycmlkZXMsIHRpbWVfc2hpZnQ6IHYgfSB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiAnJztcclxuICB9XHJcblxyXG4gIHJlbmRlckRpc3BsYXlDb25maWd1cmF0aW9uKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb2xvcixcclxuICAgICAgb3BhY2l0eSxcclxuICAgICAgc3R5bGUsXHJcbiAgICAgIHdpZHRoLFxyXG4gICAgICBzaG93TWFya2VycyxcclxuICAgICAgaGlkZUxpbmUsXHJcbiAgICAgIGFubm90YXRpb25UeXBlLFxyXG4gICAgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBjb2xvclNjaGVtZSA9IGdldENhdGVnb3JpY2FsU2NoZW1lUmVnaXN0cnkoKVxyXG4gICAgICAuZ2V0KHRoaXMucHJvcHMuY29sb3JTY2hlbWUpXHJcbiAgICAgIC5jb2xvcnMuY29uY2F0KCk7XHJcbiAgICBpZiAoXHJcbiAgICAgIGNvbG9yICYmXHJcbiAgICAgIGNvbG9yICE9PSBBVVRPTUFUSUNfQ09MT1IgJiZcclxuICAgICAgIWNvbG9yU2NoZW1lLmZpbmQoeCA9PiB4LnRvTG93ZXJDYXNlKCkgPT09IGNvbG9yLnRvTG93ZXJDYXNlKCkpXHJcbiAgICApIHtcclxuICAgICAgY29sb3JTY2hlbWUucHVzaChjb2xvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8UG9wb3ZlclNlY3Rpb25cclxuICAgICAgICBpc1NlbGVjdGVkXHJcbiAgICAgICAgdGl0bGU9e3QoJ0Rpc3BsYXkgY29uZmlndXJhdGlvbicpfVxyXG4gICAgICAgIGluZm89e3QoJ0NvbmZpZ3VyZSB5b3VyIGhvdyB5b3Ugb3ZlcmxheSBpcyBkaXNwbGF5ZWQgaGVyZS4nKX1cclxuICAgICAgPlxyXG4gICAgICAgIDxTZWxlY3RDb250cm9sXHJcbiAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1zdHJva2VcIlxyXG4gICAgICAgICAgbGFiZWw9e3QoJ1N0eWxlJyl9XHJcbiAgICAgICAgICAvLyBzZWUgJy4uLy4uLy4uL3Zpc3VhbGl6YXRpb25zL252ZDNfdmlzLmNzcydcclxuICAgICAgICAgIG9wdGlvbnM9e1tcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ3NvbGlkJywgbGFiZWw6ICdTb2xpZCcgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ2Rhc2hlZCcsIGxhYmVsOiAnRGFzaGVkJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnbG9uZ0Rhc2hlZCcsIGxhYmVsOiAnTG9uZyBkYXNoZWQnIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdkb3R0ZWQnLCBsYWJlbDogJ0RvdHRlZCcgfSxcclxuICAgICAgICAgIF19XHJcbiAgICAgICAgICB2YWx1ZT17c3R5bGV9XHJcbiAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHN0eWxlOiB2IH0pfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPFNlbGVjdENvbnRyb2xcclxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLW9wYWNpdHlcIlxyXG4gICAgICAgICAgbGFiZWw9e3QoJ09wYWNpdHknKX1cclxuICAgICAgICAgIC8vIHNlZSAnLi4vLi4vLi4vdmlzdWFsaXphdGlvbnMvbnZkM192aXMuY3NzJ1xyXG4gICAgICAgICAgb3B0aW9ucz17W1xyXG4gICAgICAgICAgICB7IHZhbHVlOiAnJywgbGFiZWw6ICdTb2xpZCcgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ29wYWNpdHlMb3cnLCBsYWJlbDogJzAuMicgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ29wYWNpdHlNZWRpdW0nLCBsYWJlbDogJzAuNScgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ29wYWNpdHlIaWdoJywgbGFiZWw6ICcwLjgnIH0sXHJcbiAgICAgICAgICBdfVxyXG4gICAgICAgICAgdmFsdWU9e29wYWNpdHl9XHJcbiAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBfLCBhY3Rpb25NZXRhKSA9PlxyXG4gICAgICAgICAgICB0aGlzLnBvcG92ZXJDbGVhcldyYXBwZXIodmFsdWUsIGFjdGlvbk1ldGEsIHYgPT5cclxuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3BhY2l0eTogdiB9KSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxDb250cm9sSGVhZGVyIGxhYmVsPXt0KCdDb2xvcicpfSAvPlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIH19PlxyXG4gICAgICAgICAgICA8Q29tcGFjdFBpY2tlclxyXG4gICAgICAgICAgICAgIGNvbG9yPXtjb2xvcn1cclxuICAgICAgICAgICAgICBjb2xvcnM9e2NvbG9yU2NoZW1lfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlQ29tcGxldGU9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IGNvbG9yOiB2LmhleCB9KX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblRvcDogJzAuNXJlbScsIG1hcmdpbkJvdHRvbTogJzAuNXJlbScgfX1cclxuICAgICAgICAgICAgICBidXR0b25TdHlsZT17Y29sb3IgPT09IEFVVE9NQVRJQ19DT0xPUiA/ICdzdWNjZXNzJyA6ICdkZWZhdWx0J31cclxuICAgICAgICAgICAgICBidXR0b25TaXplPVwieHNtYWxsXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgY29sb3I6IEFVVE9NQVRJQ19DT0xPUiB9KX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIEF1dG9tYXRpYyBDb2xvclxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxUZXh0Q29udHJvbFxyXG4gICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItc3Ryb2tlLXdpZHRoXCJcclxuICAgICAgICAgIGxhYmVsPXt0KCdMaW5lIHdpZHRoJyl9XHJcbiAgICAgICAgICBpc0ludFxyXG4gICAgICAgICAgdmFsdWU9e3dpZHRofVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHdpZHRoOiB2IH0pfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAge2Fubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLlRJTUVfU0VSSUVTICYmIChcclxuICAgICAgICAgIDxDaGVja2JveENvbnRyb2xcclxuICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1zaG93LW1hcmtlcnNcIlxyXG4gICAgICAgICAgICBsYWJlbD1cIlNob3cgTWFya2Vyc1wiXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPVwiU2hvd3Mgb3IgaGlkZXMgbWFya2VycyBmb3IgdGhlIHRpbWUgc2VyaWVzXCJcclxuICAgICAgICAgICAgdmFsdWU9e3Nob3dNYXJrZXJzfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgc2hvd01hcmtlcnM6IHYgfSl9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAge2Fubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLlRJTUVfU0VSSUVTICYmIChcclxuICAgICAgICAgIDxDaGVja2JveENvbnRyb2xcclxuICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1oaWRlLWxpbmVcIlxyXG4gICAgICAgICAgICBsYWJlbD1cIkhpZGUgTGluZVwiXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPVwiSGlkZXMgdGhlIExpbmUgZm9yIHRoZSB0aW1lIHNlcmllc1wiXHJcbiAgICAgICAgICAgIHZhbHVlPXtoaWRlTGluZX1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IGhpZGVMaW5lOiB2IH0pfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApfVxyXG4gICAgICA8L1BvcG92ZXJTZWN0aW9uPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgaXNOZXcsIG5hbWUsIGFubm90YXRpb25UeXBlLCBzb3VyY2VUeXBlLCBzaG93IH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3QgaXNWYWxpZCA9IHRoaXMuaXNWYWxpZEZvcm0oKTtcclxuICAgIGNvbnN0IG1ldGFkYXRhID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCkuZ2V0KHRoaXMucHJvcHMudml6VHlwZSk7XHJcbiAgICBjb25zdCBzdXBwb3J0ZWRBbm5vdGF0aW9uVHlwZXMgPSBtZXRhZGF0YVxyXG4gICAgICA/IG1ldGFkYXRhLnN1cHBvcnRlZEFubm90YXRpb25UeXBlcy5tYXAoXHJcbiAgICAgICAgICB0eXBlID0+IEFOTk9UQVRJT05fVFlQRVNfTUVUQURBVEFbdHlwZV0sXHJcbiAgICAgICAgKVxyXG4gICAgICA6IFtdO1xyXG4gICAgY29uc3Qgc3VwcG9ydGVkU291cmNlVHlwZXMgPSB0aGlzLmdldFN1cHBvcnRlZFNvdXJjZVR5cGVzKGFubm90YXRpb25UeXBlKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICAgIHt0aGlzLnByb3BzLmVycm9yICYmIChcclxuICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGNvbG9yOiAncmVkJyB9fT5FUlJPUjoge3RoaXMucHJvcHMuZXJyb3J9PC9zcGFuPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdyb3cnIH19PlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5SaWdodDogJzJyZW0nIH19PlxyXG4gICAgICAgICAgICA8UG9wb3ZlclNlY3Rpb25cclxuICAgICAgICAgICAgICBpc1NlbGVjdGVkXHJcbiAgICAgICAgICAgICAgdGl0bGU9e3QoJ0xheWVyIGNvbmZpZ3VyYXRpb24nKX1cclxuICAgICAgICAgICAgICBpbmZvPXt0KCdDb25maWd1cmUgdGhlIGJhc2ljcyBvZiB5b3VyIEFubm90YXRpb24gTGF5ZXIuJyl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcclxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLW5hbWVcIlxyXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ05hbWUnKX1cclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiXCJcclxuICAgICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IG5hbWU6IHYgfSl9XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXshbmFtZSA/IFt0KCdNYW5kYXRvcnknKV0gOiBbXX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDxDaGVja2JveENvbnRyb2xcclxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLWhpZGVcIlxyXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0hpZGUgbGF5ZXInKX1cclxuICAgICAgICAgICAgICAgIHZhbHVlPXshc2hvd31cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyBzaG93OiAhdiB9KX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXHJcbiAgICAgICAgICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnQ2hvb3NlIHRoZSBhbm5vdGF0aW9uIGxheWVyIHR5cGUnKX1cclxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIHR5cGUnKX1cclxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXR5cGVcIlxyXG4gICAgICAgICAgICAgICAgY2xlYXJhYmxlPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e3N1cHBvcnRlZEFubm90YXRpb25UeXBlc31cclxuICAgICAgICAgICAgICAgIHZhbHVlPXthbm5vdGF0aW9uVHlwZX1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUFubm90YXRpb25UeXBlfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAge3N1cHBvcnRlZFNvdXJjZVR5cGVzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgICAgPFNlbGVjdENvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj1cIkNob29zZSB0aGUgc291cmNlIG9mIHlvdXIgYW5ub3RhdGlvbnNcIlxyXG4gICAgICAgICAgICAgICAgICBsYWJlbD1cIkFubm90YXRpb24gU291cmNlXCJcclxuICAgICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tc291cmNlLXR5cGVcIlxyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zPXtzdXBwb3J0ZWRTb3VyY2VUeXBlc31cclxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3NvdXJjZVR5cGV9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIF8sIGFjdGlvbk1ldGEpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BvdmVyQ2xlYXJXcmFwcGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25NZXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBbm5vdGF0aW9uU291cmNlVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9ycz17IXNvdXJjZVR5cGUgPyBbdCgnTWFuZGF0b3J5JyldIDogW119XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAge3RoaXMucmVuZGVyVmFsdWVDb25maWd1cmF0aW9uKCl9XHJcbiAgICAgICAgICAgIDwvUG9wb3ZlclNlY3Rpb24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIHt0aGlzLnJlbmRlclNsaWNlQ29uZmlndXJhdGlvbigpfVxyXG4gICAgICAgICAge3RoaXMucmVuZGVyRGlzcGxheUNvbmZpZ3VyYXRpb24oKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyB9fT5cclxuICAgICAgICAgIHtpc05ldyA/IChcclxuICAgICAgICAgICAgPEJ1dHRvbiBidXR0b25TaXplPVwic21hbGxcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmNsb3NlKCl9PlxyXG4gICAgICAgICAgICAgIHt0KCdDYW5jZWwnKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICA8QnV0dG9uIGJ1dHRvblNpemU9XCJzbWFsbFwiIG9uQ2xpY2s9e3RoaXMuZGVsZXRlQW5ub3RhdGlvbn0+XHJcbiAgICAgICAgICAgICAge3QoJ1JlbW92ZScpfVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcclxuICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzVmFsaWR9XHJcbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5hcHBseUFubm90YXRpb259XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7dCgnQXBwbHknKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcblxyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcclxuICAgICAgICAgICAgICBidXR0b25TdHlsZT1cInByaW1hcnlcIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshaXNWYWxpZH1cclxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnN1Ym1pdEFubm90YXRpb259XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7dCgnT0snKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC8+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuQW5ub3RhdGlvbkxheWVyLnByb3BUeXBlcyA9IHByb3BUeXBlcztcclxuQW5ub3RhdGlvbkxheWVyLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcclxuIl19 */", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };


class AnnotationLayer extends react__WEBPACK_IMPORTED_MODULE_8___default.a.PureComponent {
  constructor(props) {var _context, _context2, _context3, _context4, _context5, _context6, _context7, _context8, _context9;
    super(props);
    const {
      name,
      annotationType,
      sourceType,
      color,
      opacity,
      style,
      width,
      showMarkers,
      hideLine,
      value,
      overrides,
      show,
      titleColumn,
      descriptionColumns,
      timeColumn,
      intervalEndColumn,
      vizType } =
    props;

    // Only allow override whole time_range
    if ('since' in overrides || 'until' in overrides) {
      overrides.time_range = null;
      delete overrides.since;
      delete overrides.until;
    }

    // Check if annotationType is supported by this chart
    const metadata = Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_13__["default"])().get(vizType);
    const supportedAnnotationTypes = (metadata == null ? void 0 : metadata.supportedAnnotationTypes) || [];
    const validAnnotationType = _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_7___default()(supportedAnnotationTypes).call(supportedAnnotationTypes,
    annotationType) ?

    annotationType :
    supportedAnnotationTypes[0];

    this.state = {
      // base
      name,
      annotationType: validAnnotationType,
      sourceType,
      value,
      overrides,
      show,
      // slice
      titleColumn,
      descriptionColumns,
      timeColumn,
      intervalEndColumn,
      // display
      color: color || AUTOMATIC_COLOR,
      opacity,
      style,
      width,
      showMarkers,
      hideLine,
      // refData
      isNew: !name,
      isLoadingOptions: true,
      valueOptions: [] };

    this.submitAnnotation = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context = this.submitAnnotation).call(_context, this);
    this.deleteAnnotation = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context2 = this.deleteAnnotation).call(_context2, this);
    this.applyAnnotation = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context3 = this.applyAnnotation).call(_context3, this);
    this.fetchOptions = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context4 = this.fetchOptions).call(_context4, this);
    this.handleAnnotationType = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context5 = this.handleAnnotationType).call(_context5, this);
    this.handleAnnotationSourceType = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context6 = this.handleAnnotationSourceType).call(_context6,
    this);

    this.handleValue = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context7 = this.handleValue).call(_context7, this);
    this.isValidForm = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context8 = this.isValidForm).call(_context8, this);
    this.popoverClearWrapper = _babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_6___default()(_context9 = this.popoverClearWrapper).call(_context9, this);
  }

  componentDidMount() {
    const { annotationType, sourceType, isLoadingOptions } = this.state;
    this.fetchOptions(annotationType, sourceType, isLoadingOptions);
  }

  componentDidUpdate(prevProps, prevState) {
    if (prevState.sourceType !== this.state.sourceType) {
      this.fetchOptions(this.state.annotationType, this.state.sourceType, true);
    }
  }

  getSupportedSourceTypes(annotationType) {var _context10, _context11, _context12, _ANNOTATION_TYPES_MET;
    // Get vis types that can be source.
    const sources = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(_context10 = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default()(_context11 = _babel_runtime_corejs3_core_js_stable_instance_entries__WEBPACK_IMPORTED_MODULE_3___default()(_context12 = Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_13__["default"])()).call(_context12)).call(_context11,

    ({ value: chartMetadata }) =>
    chartMetadata.canBeAnnotationType(annotationType))).call(_context10,

    ({ key, value: chartMetadata }) => ({
      value: key,
      label: chartMetadata.name }));

    // Prepend native source if applicable
    if ((_ANNOTATION_TYPES_MET = src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES_METADATA"][annotationType]) != null && _ANNOTATION_TYPES_MET.supportNativeSource) {
      sources.unshift(src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_SOURCE_TYPES_METADATA"].NATIVE);
    }
    return sources;
  }

  isValidFormula(value, annotationType) {
    if (annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].FORMULA) {
      try {
        Object(mathjs__WEBPACK_IMPORTED_MODULE_12__["parse"])(value).compile().evaluate({ x: 0 });
      } catch (err) {
        return true;
      }
    }
    return false;
  }

  isValidForm() {
    const {
      name,
      annotationType,
      sourceType,
      value,
      timeColumn,
      intervalEndColumn } =
    this.state;
    const errors = [
    Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_14__["default"])(name),
    Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_14__["default"])(annotationType),
    Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_14__["default"])(value)];

    if (sourceType !== src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_SOURCE_TYPES"].NATIVE) {
      if (annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].EVENT) {
        errors.push(Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_14__["default"])(timeColumn));
      }
      if (annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].INTERVAL) {
        errors.push(Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_14__["default"])(timeColumn));
        errors.push(Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_14__["default"])(intervalEndColumn));
      }
    }
    errors.push(this.isValidFormula(value, annotationType));
    return !_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default()(errors).call(errors, x => x).length;
  }

  popoverClearWrapper(value, actionMeta, callback) {
    if (callback) {
      callback(value);
    }
    if ((actionMeta == null ? void 0 : actionMeta.action) === 'clear') {
      this.props.onPopoverClear(true);
    }
  }

  handleAnnotationType(annotationType) {
    this.setState({
      annotationType,
      sourceType: null,
      value: null });

  }

  handleAnnotationSourceType(sourceType) {
    const { sourceType: prevSourceType } = this.state;

    if (prevSourceType !== sourceType) {
      this.setState({ sourceType, value: null, isLoadingOptions: true });
    }
  }

  handleValue(value) {
    this.setState({
      value,
      descriptionColumns: null,
      intervalEndColumn: null,
      timeColumn: null,
      titleColumn: null,
      overrides: { time_range: null } });

  }

  fetchOptions(annotationType, sourceType, isLoadingOptions) {
    if (isLoadingOptions) {
      if (sourceType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_SOURCE_TYPES"].NATIVE) {
        _superset_ui_core__WEBPACK_IMPORTED_MODULE_15__["default"].get({
          endpoint: '/annotationlayermodelview/api/read?' }).
        then(({ json }) => {var _context13;
          const layers = json ?
          _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(_context13 = json.result).call(_context13, layer => ({
            value: layer.id,
            label: layer.name })) :

          [];
          this.setState({
            isLoadingOptions: false,
            valueOptions: layers });

        });
      } else if (Object(src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["requiresQuery"])(sourceType)) {
        _superset_ui_core__WEBPACK_IMPORTED_MODULE_15__["default"].get({ endpoint: '/superset/user_slices' }).then(
        ({ json }) => {var _context14;
          const registry = Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_13__["default"])();
          this.setState({
            isLoadingOptions: false,
            valueOptions: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(_context14 = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default()(json).call(json,
            x => {
              const metadata = registry.get(x.viz_type);
              return (
                metadata && metadata.canBeAnnotationType(annotationType));

            })).call(_context14,
            x => ({ value: x.id, label: x.title, slice: x })) });

        });

      } else {
        this.setState({
          isLoadingOptions: false,
          valueOptions: [] });

      }
    }
  }

  deleteAnnotation() {
    this.props.removeAnnotationLayer();
    this.props.close();
  }

  applyAnnotation() {
    if (this.isValidForm()) {
      const annotationFields = [
      'name',
      'annotationType',
      'sourceType',
      'color',
      'opacity',
      'style',
      'width',
      'showMarkers',
      'hideLine',
      'value',
      'overrides',
      'show',
      'titleColumn',
      'descriptionColumns',
      'timeColumn',
      'intervalEndColumn'];

      const newAnnotation = {};
      _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_2___default()(annotationFields).call(annotationFields, field => {
        if (this.state[field] !== null) {
          newAnnotation[field] = this.state[field];
        }
      });

      if (newAnnotation.color === AUTOMATIC_COLOR) {
        newAnnotation.color = null;
      }

      this.props.addAnnotationLayer(newAnnotation);
      this.setState({ isNew: false });
    }
  }

  submitAnnotation() {
    this.applyAnnotation();
    this.props.close();
  }

  renderOption(option) {
    return (
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("span", {
        css: _ref,




        title: option.label },

      option.label));


  }

  renderValueConfiguration() {
    const {
      annotationType,
      sourceType,
      value,
      valueOptions,
      isLoadingOptions } =
    this.state;
    let label = '';
    let description = '';
    if (Object(src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["requiresQuery"])(sourceType)) {
      if (sourceType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_SOURCE_TYPES"].NATIVE) {
        label = 'Annotation layer';
        description = 'Select the Annotation Layer you would like to use.';
      } else {var _context15;
        label = Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Chart');
        description = `Use a pre defined Superset Chart as a source for annotations and overlays.
        your chart must be one of these visualization types:
        [${_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(_context15 = this.getSupportedSourceTypes(annotationType)).call(_context15,
        x => x.label).
        join(', ')}]`;
      }
    } else if (annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].FORMULA) {
      label = 'Formula';
      description = `Expects a formula with depending time parameter 'x'
        in milliseconds since epoch. mathjs is used to evaluate the formulas.
        Example: '2x+5'`;
    }
    if (Object(src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["requiresQuery"])(sourceType)) {
      return (
        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
          name: "annotation-layer-value",
          showHeader: true,
          hovered: true,
          description: description,
          label: label,
          placeholder: "",
          options: valueOptions,
          isLoading: isLoadingOptions,
          value: value,
          onChange: (value, _, actionMeta) =>
          this.popoverClearWrapper(value, actionMeta, this.handleValue),

          validationErrors: !value ? ['Mandatory'] : [],
          optionRenderer: this.renderOption }));


    }
    if (annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].FORMULA) {
      return (
        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_19__["default"], {
          name: "annotation-layer-value",
          hovered: true,
          showHeader: true,
          description: description,
          label: label,
          placeholder: "",
          value: value,
          onChange: this.handleValue,
          validationErrors:
          this.isValidFormula(value, annotationType) ? ['Bad formula.'] : [] }));



    }
    return '';
  }

  renderSliceConfiguration() {
    const {
      annotationType,
      sourceType,
      value,
      valueOptions,
      overrides,
      titleColumn,
      timeColumn,
      intervalEndColumn,
      descriptionColumns } =
    this.state;
    const { slice } = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(valueOptions).call(valueOptions, x => x.value === value) || {};
    if (sourceType !== src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_SOURCE_TYPES"].NATIVE && slice) {var _context16, _context17, _context18, _context19;
      const columns = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(_context16 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0___default()(_context17 = slice.data.groupby || []).call(_context17,
      slice.data.all_columns || [])).call(_context16,
      x => ({ value: x, label: x }));
      const timeColumnOptions = slice.data.include_time ?
      _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0___default()(_context18 = [{ value: '__timestamp', label: '__timestamp' }]).call(_context18, columns) :
      columns;
      return (
        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("div", { style: { marginRight: '2rem' } },
        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_22__["default"], {
          isSelected: true,
          title: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Annotation Slice Configuration'),
          info: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])(`This section allows you to configure how to use the slice
               to generate annotations.`) },

        (annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].EVENT ||
        annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].INTERVAL) &&
        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
          hovered: true,
          name: "annotation-layer-time-column",
          label:
          annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].INTERVAL ?
          'Interval start column' :
          'Event time column',

          description: "This column must contain date/time information.",
          validationErrors: !timeColumn ? ['Mandatory'] : [],
          clearable: false,
          options: timeColumnOptions,
          value: timeColumn,
          onChange: v => this.setState({ timeColumn: v }) }),


        annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].INTERVAL &&
        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
          hovered: true,
          name: "annotation-layer-intervalEnd",
          label: "Interval End column",
          description: "This column must contain date/time information.",
          validationErrors: !intervalEndColumn ? ['Mandatory'] : [],
          options: columns,
          value: intervalEndColumn,
          onChange: (value, _, actionMeta) =>
          this.popoverClearWrapper(value, actionMeta, (v) =>
          this.setState({ intervalEndColumn: v })) }),




        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
          hovered: true,
          name: "annotation-layer-title",
          label: "Title Column",
          description: "Pick a title for you annotation.",
          options: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0___default()(_context19 = [{ value: '', label: 'None' }]).call(_context19, columns),
          value: titleColumn,
          onChange: (value, _, actionMeta) =>
          this.popoverClearWrapper(value, actionMeta, (v) =>
          this.setState({ titleColumn: v })) }),



        annotationType !== src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].TIME_SERIES &&
        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
          hovered: true,
          name: "annotation-layer-title",
          label: "Description Columns",
          description: `Pick one or more columns that should be shown in the
                  annotation. If you don't select a column all of them will be shown.`,
          multi: true,
          options: columns,
          value: descriptionColumns,
          onChange: (value, _, actionMeta) =>
          this.popoverClearWrapper(value, actionMeta, (v) =>
          this.setState({ descriptionColumns: v })) }),




        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("div", { style: { marginTop: '1rem' } },
        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_20__["default"], {
          hovered: true,
          name: "annotation-override-time_range",
          label: "Override time range",
          description: `This controls whether the "time_range" field from the current
                  view should be passed down to the chart containing the annotation data.`,
          value: 'time_range' in overrides,
          onChange: v => {
            delete overrides.time_range;
            if (v) {
              this.setState({
                overrides: { ...overrides, time_range: null } });

            } else {
              this.setState({ overrides: { ...overrides } });
            }
          } }),

        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_20__["default"], {
          hovered: true,
          name: "annotation-override-timegrain",
          label: "Override time grain",
          description: `This controls whether the time grain field from the current
                  view should be passed down to the chart containing the annotation data.`,
          value: 'time_grain_sqla' in overrides,
          onChange: v => {
            delete overrides.time_grain_sqla;
            delete overrides.granularity;
            if (v) {
              this.setState({
                overrides: {
                  ...overrides,
                  time_grain_sqla: null,
                  granularity: null } });


            } else {
              this.setState({ overrides: { ...overrides } });
            }
          } }),

        Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_19__["default"], {
          hovered: true,
          name: "annotation-layer-timeshift",
          label: "Time Shift",
          description: `Time delta in natural language
                  (example:  24 hours, 7 days, 56 weeks, 365 days)`,
          placeholder: "",
          value: overrides.time_shift,
          onChange: (v) =>
          this.setState({ overrides: { ...overrides, time_shift: v } }) })))));






    }
    return '';
  }

  renderDisplayConfiguration() {var _context20;
    const {
      color,
      opacity,
      style,
      width,
      showMarkers,
      hideLine,
      annotationType } =
    this.state;
    const colorScheme = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0___default()(_context20 = Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__["default"])().
    get(this.props.colorScheme).
    colors).call(_context20);
    if (
    color &&
    color !== AUTOMATIC_COLOR &&
    !_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(colorScheme).call(colorScheme, x => x.toLowerCase() === color.toLowerCase()))
    {
      colorScheme.push(color);
    }
    return (
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_22__["default"], {
        isSelected: true,
        title: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Display configuration'),
        info: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Configure your how you overlay is displayed here.') },

      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
        name: "annotation-layer-stroke",
        label: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Style')
        // see '../../../visualizations/nvd3_vis.css'
        , options: [
        { value: 'solid', label: 'Solid' },
        { value: 'dashed', label: 'Dashed' },
        { value: 'longDashed', label: 'Long dashed' },
        { value: 'dotted', label: 'Dotted' }],

        value: style,
        clearable: false,
        onChange: v => this.setState({ style: v }) }),

      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
        name: "annotation-layer-opacity",
        label: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Opacity')
        // see '../../../visualizations/nvd3_vis.css'
        , options: [
        { value: '', label: 'Solid' },
        { value: 'opacityLow', label: '0.2' },
        { value: 'opacityMedium', label: '0.5' },
        { value: 'opacityHigh', label: '0.8' }],

        value: opacity,
        onChange: (value, _, actionMeta) =>
        this.popoverClearWrapper(value, actionMeta, (v) =>
        this.setState({ opacity: v })) }),



      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("div", null,
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_23__["default"], { label: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Color') }),
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("div", { style: { display: 'flex', flexDirection: 'column' } },
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(react_color__WEBPACK_IMPORTED_MODULE_10__["CompactPicker"], {
        color: color,
        colors: colorScheme,
        onChangeComplete: v => this.setState({ color: v.hex }) }),

      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_components_Button__WEBPACK_IMPORTED_MODULE_11__["default"], {
        style: { marginTop: '0.5rem', marginBottom: '0.5rem' },
        buttonStyle: color === AUTOMATIC_COLOR ? 'success' : 'default',
        buttonSize: "xsmall",
        onClick: () => this.setState({ color: AUTOMATIC_COLOR }) }, "Automatic Color"))),





      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_19__["default"], {
        name: "annotation-layer-stroke-width",
        label: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Line width'),
        isInt: true,
        value: width,
        onChange: v => this.setState({ width: v }) }),

      annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].TIME_SERIES &&
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_20__["default"], {
        hovered: true,
        name: "annotation-layer-show-markers",
        label: "Show Markers",
        description: "Shows or hides markers for the time series",
        value: showMarkers,
        onChange: v => this.setState({ showMarkers: v }) }),


      annotationType === src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES"].TIME_SERIES &&
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_20__["default"], {
        hovered: true,
        name: "annotation-layer-hide-line",
        label: "Hide Line",
        description: "Hides the Line for the time series",
        value: hideLine,
        onChange: v => this.setState({ hideLine: v }) })));




  }

  render() {var _context21;
    const { isNew, name, annotationType, sourceType, show } = this.state;
    const isValid = this.isValidForm();
    const metadata = Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_13__["default"])().get(this.props.vizType);
    const supportedAnnotationTypes = metadata ?
    _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(_context21 = metadata.supportedAnnotationTypes).call(_context21,
    type => src_modules_AnnotationTypes__WEBPACK_IMPORTED_MODULE_21__["ANNOTATION_TYPES_METADATA"][type]) :

    [];
    const supportedSourceTypes = this.getSupportedSourceTypes(annotationType);

    return (
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(react__WEBPACK_IMPORTED_MODULE_8___default.a.Fragment, null,
      this.props.error &&
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("span", { style: { color: 'red' } }, "ERROR: ", this.props.error),

      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("div", { style: { display: 'flex', flexDirection: 'row' } },
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("div", { style: { marginRight: '2rem' } },
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_22__["default"], {
        isSelected: true,
        title: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Layer configuration'),
        info: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Configure the basics of your Annotation Layer.') },

      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_19__["default"], {
        name: "annotation-layer-name",
        label: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Name'),
        placeholder: "",
        value: name,
        onChange: v => this.setState({ name: v }),
        validationErrors: !name ? [Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Mandatory')] : [] }),

      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_20__["default"], {
        name: "annotation-layer-hide",
        label: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Hide layer'),
        value: !show,
        onChange: v => this.setState({ show: !v }) }),

      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
        hovered: true,
        description: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Choose the annotation layer type'),
        label: Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Annotation layer type'),
        name: "annotation-layer-type",
        clearable: false,
        options: supportedAnnotationTypes,
        value: annotationType,
        onChange: this.handleAnnotationType }),

      supportedSourceTypes.length > 0 &&
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_18__["default"], {
        hovered: true,
        description: "Choose the source of your annotations",
        label: "Annotation Source",
        name: "annotation-source-type",
        options: supportedSourceTypes,
        value: sourceType,
        onChange: (value, _, actionMeta) =>
        this.popoverClearWrapper(
        value,
        actionMeta,
        this.handleAnnotationSourceType),


        validationErrors: !sourceType ? [Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Mandatory')] : [] }),


      this.renderValueConfiguration())),


      this.renderSliceConfiguration(),
      this.renderDisplayConfiguration()),

      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("div", { style: { display: 'flex', justifyContent: 'space-between' } },
      isNew ?
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_components_Button__WEBPACK_IMPORTED_MODULE_11__["default"], { buttonSize: "small", onClick: () => this.props.close() },
      Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Cancel')) :


      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_components_Button__WEBPACK_IMPORTED_MODULE_11__["default"], { buttonSize: "small", onClick: this.deleteAnnotation },
      Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Remove')),


      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])("div", null,
      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_components_Button__WEBPACK_IMPORTED_MODULE_11__["default"], {
        buttonSize: "small",
        disabled: !isValid,
        onClick: this.applyAnnotation },

      Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('Apply')),


      Object(_emotion_react__WEBPACK_IMPORTED_MODULE_24__["jsx"])(src_components_Button__WEBPACK_IMPORTED_MODULE_11__["default"], {
        buttonSize: "small",
        buttonStyle: "primary",
        disabled: !isValid,
        onClick: this.submitAnnotation },

      Object(_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__["t"])('OK'))))));





  } // @ts-ignore
  __reactstandin__regenerateByEval(key, code) {// @ts-ignore
    this[key] = eval(code);}}
AnnotationLayer.propTypes = propTypes;
AnnotationLayer.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AUTOMATIC_COLOR, "AUTOMATIC_COLOR", "G:\\workspace\\boke-pro\\superset-all\\superset\\superset-frontend\\src\\explore\\components\\controls\\AnnotationLayerControl\\AnnotationLayer.jsx");reactHotLoader.register(propTypes, "propTypes", "G:\\workspace\\boke-pro\\superset-all\\superset\\superset-frontend\\src\\explore\\components\\controls\\AnnotationLayerControl\\AnnotationLayer.jsx");reactHotLoader.register(defaultProps, "defaultProps", "G:\\workspace\\boke-pro\\superset-all\\superset\\superset-frontend\\src\\explore\\components\\controls\\AnnotationLayerControl\\AnnotationLayer.jsx");reactHotLoader.register(AnnotationLayer, "AnnotationLayer", "G:\\workspace\\boke-pro\\superset-all\\superset\\superset-frontend\\src\\explore\\components\\controls\\AnnotationLayerControl\\AnnotationLayer.jsx");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../node_modules/webpack/buildin/harmony-module.js */ "./node_modules/webpack/buildin/harmony-module.js")(module)))

/***/ })

}]);
//# sourceMappingURL=196.9ed865ea.chunk.js.map