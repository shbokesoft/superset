{"version":3,"sources":["webpack:///./node_modules/@superset-ui/legacy-plugin-chart-heatmap/esm/Heatmap.css?0648","webpack:///./node_modules/@superset-ui/legacy-plugin-chart-heatmap/esm/Heatmap.js","webpack:///./node_modules/@superset-ui/legacy-plugin-chart-heatmap/esm/ReactHeatmap.js","webpack:///./node_modules/@superset-ui/legacy-plugin-chart-heatmap/esm/vendor/d3tip.css?4364","webpack:///./node_modules/@superset-ui/legacy-plugin-chart-heatmap/esm/Heatmap.css","webpack:///./node_modules/@superset-ui/legacy-plugin-chart-heatmap/esm/vendor/d3tip.css","webpack:///./node_modules/d3-svg-legend/index.js","webpack:///./node_modules/d3-svg-legend/no-extend.js","webpack:///./node_modules/d3-svg-legend/src/color.js","webpack:///./node_modules/d3-svg-legend/src/legend.js","webpack:///./node_modules/d3-svg-legend/src/size.js","webpack:///./node_modules/d3-svg-legend/src/symbol.js"],"names":[],"mappings":";;;;;;;;;AAAA,cAAc,mBAAO,CAAC,iKAAwD;;AAE9E;AACA,cAAc,QAAS;AACvB;;AAEA;;AAEA;AACA;;AAEA,aAAa,mBAAO,CAAC,4IAAiE;;AAEtF;AACA;AACA;;;;;;;;;;;;;ACfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACoB;AACe;AACZ;AACI;AACwE;AACvE;AACL;AACvB;AACA,QAAQ,iDAAS;AACjB,aAAa,iDAAS,SAAS,iDAAS;AACxC,SAAS,iDAAS;AAClB,SAAS,iDAAS;AAClB,SAAS,iDAAS;AAClB,YAAY,iDAAS;AACrB,YAAY,iDAAS;AACrB,KAAK;AACL,aAAa,iDAAS,SAAS,iDAAS;AACxC,GAAG;AACH,SAAS,iDAAS;AAClB,UAAU,iDAAS;AACnB,gBAAgB,iDAAS,YAAY,iDAAS,SAAS,iDAAS;AAChE,eAAe,iDAAS;AACxB,WAAW,iDAAS;AACpB,WAAW,iDAAS;AACpB,cAAc,iDAAS,YAAY,iDAAS,SAAS,iDAAS;AAC9D,UAAU,iDAAS,YAAY,iDAAS,SAAS,iDAAS;AAC1D,cAAc,iDAAS;AACvB,gBAAgB,iDAAS;AACzB,cAAc,iDAAS;AACvB,kBAAkB,iDAAS;AAC3B,cAAc,iDAAS;AACvB,aAAa,iDAAS;AACtB,aAAa,iDAAS;AACtB,kBAAkB,iDAAS;AAC3B,kBAAkB,iDAAS;AAC3B,eAAe,iDAAS,SAAS,iDAAS;AAC1C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B,2BAA2B;;AAE3B,yBAAyB,4EAAkB,eAAe;;AAE1D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;;AAGH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;;AAE1B;AACA;AACA;AACA,KAAK,EAAE;;AAEP;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,yCAAE;AACf;;AAEA,WAAW,yCAAE,sCAAsC,yCAAE;AACrD,GAAG;;;AAGH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA,GAAG;;;AAGH;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,4EAAkB,CAAC,yDAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iEAA2B;AAChD,iBAAiB,yCAAE,gEAAgE,yCAAE;AACrF,oBAAoB,yCAAE;AACtB;AACA,yHAAyH,QAAQ,wBAAwB,SAAS,qEAAqE,YAAY,qBAAqB,WAAW;AACnR;;AAEA;AACA,yGAAyG,YAAY,IAAI,WAAW;AACpI,6DAA6D,cAAc,IAAI,cAAc,kLAAkL,yDAAyD;AACxU;;AAEA;AACA,wBAAwB,yCAAE;AAC1B,mDAAmD,WAAW,IAAI,WAAW;AAC7E;;AAEA,cAAc,sDAAK;AACnB,cAAc,yCAAE;AAChB;AACA;AACA,GAAG;AACH;AACA,cAAc,yCAAE;AAChB;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,QAAQ,QAAQ,MAAM;AAC5C,sBAAsB,QAAQ,QAAQ,MAAM;AAC5C,sBAAsB,YAAY,QAAQ,sBAAsB;;AAEhE;AACA,+BAA+B,qCAAqC;AACpE;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH,8DAA8D,YAAY,IAAI,WAAW;AACzF;;AAEA;AACA,kBAAkB,yCAAE;AACpB,2EAA2E,YAAY,GAAG,sBAAsB;AAChH;;AAEA;AACA,kBAAkB,yCAAE;AACpB,2EAA2E,YAAY,GAAG,WAAW;AACrG;;AAEA;AACA;AACA,wCAAwC,6BAA6B;;AAErE;AACA;AACA;AACA;AACA;AACA,gBAAgB,yCAAE;AAClB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA,mBAAmB,mCAAmC;AACtD;AACA;;AAEA;AACA,YAAY,yCAAE;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACe,sEAAO,E;;;;;;;;;;;;AC3UtB;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC6C;AACX;AACnB,gIAAQ,CAAC,gDAAS,CAAC,E;;;;;;;;;;;ACpBlC,cAAc,mBAAO,CAAC,uKAAyD;;AAE/E;AACA,cAAc,QAAS;AACvB;;AAEA;;AAEA;AACA;;AAEA,aAAa,mBAAO,CAAC,+IAAoE;;AAEzF;AACA;AACA;;;;;;;;;;;;ACfA,2BAA2B,mBAAO,CAAC,sFAAqC;AACxE;;;AAGA;AACA,cAAc,QAAS,uUAAuU,6hBAA6hB,uBAAuB,WAAW,YAAY,iBAAiB,GAAG,+CAA+C,0BAA0B,uCAAuC,eAAe,GAAG,qDAAqD,iBAAiB,oBAAoB,wBAAwB,GAAG,2FAA2F,eAAe,iBAAiB,gCAAgC,GAAG,gFAAgF,mCAAmC,0EAA0E,mFAAmF,wEAAwE,mEAAmE,iFAAiF,uCAAuC,sDAAsD,oBAAoB,wBAAwB,eAAe,GAAG,wEAAwE,eAAe,GAAG,qEAAqE,eAAe,GAAG,0DAA0D,oBAAoB,kBAAkB,GAAG,UAAU,0MAA0M,OAAO,KAAK,YAAY,WAAW,UAAU,UAAU,MAAM,KAAK,YAAY,aAAa,WAAW,MAAM,KAAK,UAAU,YAAY,aAAa,OAAO,MAAM,UAAU,UAAU,YAAY,OAAO,MAAM,wBAAwB,yBAAyB,yBAAyB,yBAAyB,yBAAyB,yBAAyB,OAAO,KAAK,YAAY,aAAa,WAAW,MAAM,KAAK,UAAU,KAAK,KAAK,UAAU,MAAM,KAAK,YAAY,WAAW,kXAAkX,6hBAA6hB,uBAAuB,WAAW,YAAY,iBAAiB,GAAG,+CAA+C,0BAA0B,uCAAuC,eAAe,GAAG,qDAAqD,iBAAiB,oBAAoB,wBAAwB,GAAG,2FAA2F,eAAe,iBAAiB,gCAAgC,GAAG,gFAAgF,mCAAmC,0EAA0E,mFAAmF,wEAAwE,mEAAmE,iFAAiF,uCAAuC,sDAAsD,oBAAoB,wBAAwB,eAAe,GAAG,wEAAwE,eAAe,GAAG,qEAAqE,eAAe,GAAG,0DAA0D,oBAAoB,kBAAkB,GAAG,qBAAqB;;AAErrK;;;;;;;;;;;;ACPA,2BAA2B,mBAAO,CAAC,yFAAwC;AAC3E;;;AAGA;AACA,cAAc,QAAS,uUAAuU,uhBAAuhB,mBAAmB,kBAAkB,mCAAmC,gBAAgB,uBAAuB,yBAAyB,kBAAkB,GAAG,4EAA4E,2BAA2B,oBAAoB,oBAAoB,gBAAgB,mBAAmB,8BAA8B,uBAAuB,yBAAyB,GAAG,+CAA+C,sBAAsB,uBAAuB,cAAc,YAAY,uBAAuB,GAAG,8CAA8C,sBAAsB,uBAAuB,aAAa,eAAe,GAAG,+CAA+C,sBAAsB,sBAAsB,cAAc,YAAY,uBAAuB,GAAG,8CAA8C,sBAAsB,0BAA0B,aAAa,eAAe,GAAG,UAAU,+MAA+M,MAAM,YAAY,MAAM,UAAU,UAAU,YAAY,WAAW,YAAY,aAAa,WAAW,MAAM,YAAY,MAAM,YAAY,aAAa,aAAa,WAAW,UAAU,YAAY,aAAa,aAAa,OAAO,YAAY,MAAM,YAAY,aAAa,WAAW,UAAU,YAAY,OAAO,YAAY,MAAM,YAAY,aAAa,WAAW,UAAU,MAAM,YAAY,MAAM,YAAY,aAAa,WAAW,UAAU,YAAY,OAAO,YAAY,MAAM,YAAY,aAAa,WAAW,UAAU,gXAAgX,uhBAAuhB,mBAAmB,kBAAkB,mCAAmC,gBAAgB,uBAAuB,yBAAyB,kBAAkB,GAAG,4EAA4E,2BAA2B,oBAAoB,oBAAoB,gBAAgB,mBAAmB,8BAA8B,uBAAuB,yBAAyB,GAAG,+CAA+C,sBAAsB,uBAAuB,cAAc,YAAY,uBAAuB,GAAG,8CAA8C,sBAAsB,uBAAuB,aAAa,eAAe,GAAG,+CAA+C,sBAAsB,sBAAsB,cAAc,YAAY,uBAAuB,GAAG,8CAA8C,sBAAsB,0BAA0B,aAAa,eAAe,GAAG,qBAAqB;;AAEz2I;;;;;;;;;;;;ACPA,SAAS,mBAAO,CAAC,mCAAI;;AAErB,YAAY,mBAAO,CAAC,8DAAa;;AAEjC;;;;;;;;;;;;ACJA;AACA,SAAS,mBAAO,CAAC,8DAAa;AAC9B,QAAQ,mBAAO,CAAC,4DAAY;AAC5B,UAAU,mBAAO,CAAC,gEAAc;AAChC;;;;;;;;;;;;ACJA,aAAa,mBAAO,CAAC,4DAAU;;AAE/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,+CAA+C,oBAAoB,EAAE;;AAErE;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,yCAAyC,kDAAkD,EAAE;AAC7F;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,2EAA2E;AAC9G,mCAAmC;AACnC,kFAAkF;;AAElF,OAAO;AACP,mCAAmC,yEAAyE;AAC5G,mCAAmC;AACnC,+EAA+E;AAC/E;;AAEA;AACA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;;;;;;AC7MA;;AAEA;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA,YAAY,WAAW;AACvB;AACA;AACA;;AAEA;;AAEA,YAAY;AACZ;AACA,iCAAiC,iBAAiB;AAClD,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA,KAAK;;AAEL,YAAY;AACZ;AACA;AACA;AACA,GAAG;;AAEH;AACA,YAAY;AACZ;AACA,iCAAiC,iBAAiB;AAClD,GAAG;;AAEH;AACA;AACA;;AAEA,KAAK;AACL;;AAEA,KAAK;AACL;;AAEA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,iDAAiD,oCAAoC,EAAE;AACvF,+CAA+C,mCAAmC,EAAE;AACpF,4CAA4C,qCAAqC,EAAE;AACnF,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4BAA4B,8BAA8B;AAC1D,2CAA2C,yBAAyB;;AAEpE;;AAEA;AACA;AACA;;;;;;;;;;;;ACnKA,aAAa,mBAAO,CAAC,4DAAU;;AAE/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA,SAAS;;AAET,+CAA+C,uBAAuB,EAAE;AACxE,2CAA2C,sBAAsB,EAAE;;AAEnE;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wEAAwE,iBAAiB,EAAE;AAC3F,qEAAqE;;AAErE,mCAAmC;AACnC,6DAA6D;;AAE7D,OAAO;AACP;AACA,uEAAuE,gBAAgB,EAAE;AACzF,mEAAmE;;AAEnE,mCAAmC;AACnC,0CAA0C;AAC1C;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;;;;;;ACtMA,aAAa,mBAAO,CAAC,4DAAU;;AAE/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,+CAA+C,oBAAoB,EAAE;;AAErE,+CAA+C,iBAAiB,EAAE;AAClE,2CAA2C,gBAAgB,EAAE;;AAE7D;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,4DAA4D;AAC/F,mCAAmC;AACnC,iEAAiE;;AAEjE,OAAO;AACP,mCAAmC,2DAA2D;AAC9F,mCAAmC;AACnC,0CAA0C;AAC1C;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA","file":"31.9ed865ea.chunk.js","sourcesContent":["var content = require(\"!!../../../css-loader/index.js??ref--7-1!./Heatmap.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable func-names, react/sort-prop-types */\nimport d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport 'd3-svg-legend';\nimport d3tip from 'd3-tip';\nimport { getNumberFormatter, NumberFormats, getSequentialSchemeRegistry } from '@superset-ui/core';\nimport './vendor/d3tip.css';\nimport './Heatmap.css';\nconst propTypes = {\n  data: PropTypes.shape({\n    records: PropTypes.arrayOf(PropTypes.shape({\n      x: PropTypes.string,\n      y: PropTypes.string,\n      v: PropTypes.number,\n      perc: PropTypes.number,\n      rank: PropTypes.number\n    })),\n    extents: PropTypes.arrayOf(PropTypes.number)\n  }),\n  width: PropTypes.number,\n  height: PropTypes.number,\n  bottomMargin: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  colorScheme: PropTypes.string,\n  columnX: PropTypes.string,\n  columnY: PropTypes.string,\n  leftMargin: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  metric: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  normalized: PropTypes.bool,\n  numberFormat: PropTypes.string,\n  showLegend: PropTypes.bool,\n  showPercentage: PropTypes.bool,\n  showValues: PropTypes.bool,\n  sortXAxis: PropTypes.string,\n  sortYAxis: PropTypes.string,\n  xScaleInterval: PropTypes.number,\n  yScaleInterval: PropTypes.number,\n  yAxisBounds: PropTypes.arrayOf(PropTypes.number)\n};\n\nfunction cmp(a, b) {\n  return a > b ? 1 : -1;\n}\n\nconst DEFAULT_PROPERTIES = {\n  minChartWidth: 150,\n  minChartHeight: 150,\n  marginLeft: 35,\n  marginBottom: 35,\n  marginTop: 10,\n  marginRight: 10\n}; // Inspired from http://bl.ocks.org/mbostock/3074470\n// https://jsfiddle.net/cyril123/h0reyumq/\n\nfunction Heatmap(element, props) {\n  const {\n    data,\n    width,\n    height,\n    bottomMargin,\n    canvasImageRendering,\n    colorScheme,\n    columnX,\n    columnY,\n    leftMargin,\n    metric,\n    normalized,\n    numberFormat,\n    showLegend,\n    showPercentage,\n    showValues,\n    sortXAxis,\n    sortYAxis,\n    xScaleInterval,\n    yScaleInterval,\n    yAxisBounds\n  } = props;\n  const {\n    records,\n    extents\n  } = data;\n  const margin = {\n    top: 10,\n    right: 10,\n    bottom: 35,\n    left: 35\n  };\n  let showY = true;\n  let showX = true;\n  const pixelsPerCharX = 4.5; // approx, depends on font size\n\n  const pixelsPerCharY = 6; // approx, depends on font size\n\n  const valueFormatter = getNumberFormatter(numberFormat); // Dynamically adjusts  based on max x / y category lengths\n\n  function adjustMargins() {\n    let longestX = 1;\n    let longestY = 1;\n    records.forEach(datum => {\n      longestX = Math.max(longestX, datum.x && datum.x.toString().length || 1);\n      longestY = Math.max(longestY, datum.y && datum.y.toString().length || 1);\n    });\n\n    if (leftMargin === 'auto') {\n      margin.left = Math.ceil(Math.max(margin.left, pixelsPerCharY * longestY));\n    } else {\n      margin.left = leftMargin;\n    }\n\n    if (showLegend) {\n      margin.right += 40;\n    }\n\n    margin.bottom = bottomMargin === 'auto' ? Math.ceil(Math.max(margin.bottom, pixelsPerCharX * longestX)) : bottomMargin;\n  } // Check if x axis \"x\" position is outside of the container and rotate labels 90deg\n\n\n  function checkLabelPosition(container) {\n    const xAxisNode = container.select('.x.axis').node();\n\n    if (!xAxisNode) {\n      return;\n    }\n\n    if (xAxisNode.getBoundingClientRect().x + 4 < container.node().getBoundingClientRect().x) {\n      container.selectAll('.x.axis').selectAll('text').attr('transform', 'rotate(-90)').attr('x', -6).attr('y', 0).attr('dy', '0.3em');\n    }\n  }\n\n  function ordScale(k, rangeBands, sortMethod) {\n    let domain = {};\n    const actualKeys = {}; // hack to preserve type of keys when number\n\n    records.forEach(d => {\n      domain[d[k]] = (domain[d[k]] || 0) + d.v;\n      actualKeys[d[k]] = d[k];\n    }); // Not usgin object.keys() as it converts to strings\n\n    const keys = Object.keys(actualKeys).map(s => actualKeys[s]);\n\n    if (sortMethod === 'alpha_asc') {\n      domain = keys.sort(cmp);\n    } else if (sortMethod === 'alpha_desc') {\n      domain = keys.sort(cmp).reverse();\n    } else if (sortMethod === 'value_desc') {\n      domain = Object.keys(domain).sort((a, b) => domain[a] > domain[b] ? -1 : 1);\n    } else if (sortMethod === 'value_asc') {\n      domain = Object.keys(domain).sort((a, b) => domain[b] > domain[a] ? -1 : 1);\n    }\n\n    if (k === 'y' && rangeBands) {\n      domain.reverse();\n    }\n\n    if (rangeBands) {\n      return d3.scale.ordinal().domain(domain).rangeBands(rangeBands);\n    }\n\n    return d3.scale.ordinal().domain(domain).range(d3.range(domain.length));\n  } // eslint-disable-next-line no-param-reassign\n\n\n  element.innerHTML = '';\n  const matrix = {};\n  adjustMargins();\n  let hmWidth = width - (margin.left + margin.right);\n  let hmHeight = height - (margin.bottom + margin.top);\n\n  const hideYLabel = () => {\n    margin.left = leftMargin === 'auto' ? DEFAULT_PROPERTIES.marginLeft : leftMargin;\n    hmWidth = width - (margin.left + margin.right);\n    showY = false;\n  };\n\n  const hideXLabel = () => {\n    margin.bottom = bottomMargin === 'auto' ? DEFAULT_PROPERTIES.marginBottom : bottomMargin;\n    hmHeight = height - (margin.bottom + margin.top);\n    showX = false;\n  }; // Hide Y Labels\n\n\n  if (hmWidth < DEFAULT_PROPERTIES.minChartWidth) {\n    hideYLabel();\n  } // Hide X Labels\n\n\n  if (hmHeight < DEFAULT_PROPERTIES.minChartHeight || hmWidth < DEFAULT_PROPERTIES.minChartWidth) {\n    hideXLabel();\n  }\n\n  if (showY && hmHeight < DEFAULT_PROPERTIES.minChartHeight) {\n    hideYLabel();\n  }\n\n  const fp = getNumberFormatter(NumberFormats.PERCENT);\n  const xScale = ordScale('x', null, sortXAxis);\n  const yScale = ordScale('y', null, sortYAxis);\n  const xRbScale = ordScale('x', [0, hmWidth], sortXAxis);\n  const yRbScale = ordScale('y', [hmHeight, 0], sortYAxis);\n  const X = 0;\n  const Y = 1;\n  const heatmapDim = [xRbScale.domain().length, yRbScale.domain().length];\n  const minBound = yAxisBounds[0] || 0;\n  const maxBound = yAxisBounds[1] || 1;\n  const colorScale = getSequentialSchemeRegistry().get(colorScheme).createLinearScale([minBound, maxBound]);\n  const scale = [d3.scale.linear().domain([0, heatmapDim[X]]).range([0, hmWidth]), d3.scale.linear().domain([0, heatmapDim[Y]]).range([0, hmHeight])];\n  const container = d3.select(element);\n  container.classed('superset-legacy-chart-heatmap', true);\n  const canvas = container.append('canvas').attr('width', heatmapDim[X]).attr('height', heatmapDim[Y]).style('width', `${hmWidth}px`).style('height', `${hmHeight}px`).style('image-rendering', canvasImageRendering).style('left', `${margin.left}px`).style('top', `${margin.top}px`).style('position', 'absolute');\n  const svg = container.append('svg').attr('width', width).attr('height', height).attr('class', 'heatmap-container').style('position', 'relative');\n\n  if (showValues) {\n    const cells = svg.selectAll('rect').data(records).enter().append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);\n    cells.append('text').attr('transform', d => `translate(${xRbScale(d.x)}, ${yRbScale(d.y)})`).attr('y', yRbScale.rangeBand() / 2).attr('x', xRbScale.rangeBand() / 2).attr('text-anchor', 'middle').attr('dy', '.35em').text(d => valueFormatter(d.v)).attr('font-size', `${Math.min(yRbScale.rangeBand(), xRbScale.rangeBand()) / 3}px`).attr('fill', d => d.v >= extents[1] / 2 ? 'white' : 'black');\n  }\n\n  if (showLegend) {\n    const colorLegend = d3.legend.color().labelFormat(valueFormatter).scale(colorScale).shapePadding(0).cells(10).shapeWidth(10).shapeHeight(10).labelOffset(3);\n    svg.append('g').attr('transform', `translate(${width - 40}, ${margin.top})`).call(colorLegend);\n  }\n\n  const tip = d3tip().attr('class', 'd3-tip').offset(function () {\n    const k = d3.mouse(this);\n    const x = k[0] - hmWidth / 2;\n    return [k[1] - 20, x];\n  }).html(function () {\n    let s = '';\n    const k = d3.mouse(this);\n    const m = Math.floor(scale[0].invert(k[0]));\n    const n = Math.floor(scale[1].invert(k[1]));\n    const metricLabel = typeof metric === 'object' ? metric.label : metric;\n\n    if (m in matrix && n in matrix[m]) {\n      const obj = matrix[m][n];\n      s += `<div><b>${columnX}: </b>${obj.x}<div>`;\n      s += `<div><b>${columnY}: </b>${obj.y}<div>`;\n      s += `<div><b>${metricLabel}: </b>${valueFormatter(obj.v)}<div>`;\n\n      if (showPercentage) {\n        s += `<div><b>%: </b>${fp(normalized ? obj.rank : obj.perc)}<div>`;\n      }\n\n      tip.style('display', null);\n    } else {\n      // this is a hack to hide the tooltip because we have map it to a single <rect>\n      // d3-tip toggles opacity and calling hide here is undone by the lib after this call\n      tip.style('display', 'none');\n    }\n\n    return s;\n  });\n  const rect = svg.append('g').attr('transform', `translate(${margin.left}, ${margin.top})`).append('rect').classed('background-rect', true).on('mousemove', tip.show).on('mouseout', tip.hide).attr('width', hmWidth).attr('height', hmHeight);\n  rect.call(tip);\n\n  if (showX) {\n    const xAxis = d3.svg.axis().scale(xRbScale).outerTickSize(0).tickValues(xRbScale.domain().filter((d, i) => !(i % xScaleInterval))).orient('bottom');\n    svg.append('g').attr('class', 'x axis').attr('transform', `translate(${margin.left},${margin.top + hmHeight})`).call(xAxis).selectAll('text').attr('x', -4).attr('y', 10).attr('dy', '0.3em').style('text-anchor', 'end').attr('transform', 'rotate(-45)');\n  }\n\n  if (showY) {\n    const yAxis = d3.svg.axis().scale(yRbScale).outerTickSize(0).tickValues(yRbScale.domain().filter((d, i) => !(i % yScaleInterval))).orient('left');\n    svg.append('g').attr('class', 'y axis').attr('transform', `translate(${margin.left},${margin.top})`).call(yAxis);\n  }\n\n  checkLabelPosition(container);\n  const context = canvas.node().getContext('2d');\n  context.imageSmoothingEnabled = false; // Compute the pixel colors; scaled by CSS.\n\n  function createImageObj() {\n    const imageObj = new Image();\n    const image = context.createImageData(heatmapDim[0], heatmapDim[1]);\n    const pixs = {};\n    records.forEach(d => {\n      const c = d3.rgb(colorScale(normalized ? d.rank : d.perc));\n      const x = xScale(d.x);\n      const y = yScale(d.y);\n      pixs[x + y * xScale.domain().length] = c;\n\n      if (matrix[x] === undefined) {\n        matrix[x] = {};\n      }\n\n      if (matrix[x][y] === undefined) {\n        matrix[x][y] = d;\n      }\n    });\n    let p = 0;\n\n    for (let i = 0; i < heatmapDim[0] * heatmapDim[1]; i += 1) {\n      let c = pixs[i];\n      let alpha = 255;\n\n      if (c === undefined) {\n        c = d3.rgb('#F00');\n        alpha = 0;\n      }\n\n      image.data[p + 0] = c.r;\n      image.data[p + 1] = c.g;\n      image.data[p + 2] = c.b;\n      image.data[p + 3] = alpha;\n      p += 4;\n    }\n\n    context.putImageData(image, 0, 0);\n    imageObj.src = canvas.node().toDataURL();\n  }\n\n  createImageObj();\n}\n\nHeatmap.displayName = 'Heatmap';\nHeatmap.propTypes = propTypes;\nexport default Heatmap;","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { reactify } from '@superset-ui/core';\nimport Component from './Heatmap';\nexport default reactify(Component);","var content = require(\"!!../../../../css-loader/index.js??ref--7-1!./d3tip.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n\\n.superset-legacy-chart-heatmap {\\n  position: relative;\\n  top: 0;\\n  left: 0;\\n  height: 100%;\\n}\\n\\n.superset-legacy-chart-heatmap .axis text {\\n  font: 10px sans-serif;\\n  text-rendering: optimizeLegibility;\\n  fill: #555;\\n}\\n\\n.superset-legacy-chart-heatmap .background-rect {\\n  stroke: #ddd;\\n  fill-opacity: 0;\\n  pointer-events: all;\\n}\\n\\n.superset-legacy-chart-heatmap .axis path,\\n.superset-legacy-chart-heatmap .axis line {\\n  fill: none;\\n  stroke: #ddd;\\n  shape-rendering: crispEdges;\\n}\\n\\n.superset-legacy-chart-heatmap canvas,\\n.superset-legacy-chart-heatmap img {\\n  image-rendering: optimizeSpeed; /* Older versions of FF          */\\n  image-rendering: -moz-crisp-edges; /* FF 6.0+                       */\\n  image-rendering: -webkit-optimize-contrast; /* Safari                        */\\n  image-rendering: -o-crisp-edges; /* OS X & Windows Opera (12.02+) */\\n  image-rendering: pixelated; /* Awesome future-browsers       */\\n  -ms-interpolation-mode: nearest-neighbor; /* IE                            */\\n}\\n\\n.superset-legacy-chart-heatmap .legendCells text {\\n  font-size: 10px;\\n  font-weight: normal;\\n  opacity: 0;\\n}\\n\\n.superset-legacy-chart-heatmap .legendCells .cell:first-child text {\\n  opacity: 1;\\n}\\n.superset-legacy-chart-heatmap .legendCells .cell:last-child text {\\n  opacity: 1;\\n}\\n\\n.dashboard .superset-legacy-chart-heatmap .axis text {\\n  font-size: 10px;\\n  opacity: 0.75;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"G:/workspace/boke-pro/superset-all/superset/superset-frontend/node_modules/@superset-ui/legacy-plugin-chart-heatmap/esm/Heatmap.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;;;;GAiBG;;AAEH;EACE,mBAAmB;EACnB,OAAO;EACP,QAAQ;EACR,aAAa;CACd;;AAED;EACE,sBAAsB;EACtB,mCAAmC;EACnC,WAAW;CACZ;;AAED;EACE,aAAa;EACb,gBAAgB;EAChB,oBAAoB;CACrB;;AAED;;EAEE,WAAW;EACX,aAAa;EACb,4BAA4B;CAC7B;;AAED;;EAEE,+BAA+B,CAAC,mCAAmC;EACnE,kCAAkC,CAAC,mCAAmC;EACtE,2CAA2C,CAAC,mCAAmC;EAC/E,gCAAgC,CAAC,mCAAmC;EACpE,2BAA2B,CAAC,mCAAmC;EAC/D,yCAAyC,CAAC,mCAAmC;CAC9E;;AAED;EACE,gBAAgB;EAChB,oBAAoB;EACpB,WAAW;CACZ;;AAED;EACE,WAAW;CACZ;AACD;EACE,WAAW;CACZ;;AAED;EACE,gBAAgB;EAChB,cAAc;CACf\",\"file\":\"Heatmap.css\",\"sourcesContent\":[\"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n\\n.superset-legacy-chart-heatmap {\\n  position: relative;\\n  top: 0;\\n  left: 0;\\n  height: 100%;\\n}\\n\\n.superset-legacy-chart-heatmap .axis text {\\n  font: 10px sans-serif;\\n  text-rendering: optimizeLegibility;\\n  fill: #555;\\n}\\n\\n.superset-legacy-chart-heatmap .background-rect {\\n  stroke: #ddd;\\n  fill-opacity: 0;\\n  pointer-events: all;\\n}\\n\\n.superset-legacy-chart-heatmap .axis path,\\n.superset-legacy-chart-heatmap .axis line {\\n  fill: none;\\n  stroke: #ddd;\\n  shape-rendering: crispEdges;\\n}\\n\\n.superset-legacy-chart-heatmap canvas,\\n.superset-legacy-chart-heatmap img {\\n  image-rendering: optimizeSpeed; /* Older versions of FF          */\\n  image-rendering: -moz-crisp-edges; /* FF 6.0+                       */\\n  image-rendering: -webkit-optimize-contrast; /* Safari                        */\\n  image-rendering: -o-crisp-edges; /* OS X & Windows Opera (12.02+) */\\n  image-rendering: pixelated; /* Awesome future-browsers       */\\n  -ms-interpolation-mode: nearest-neighbor; /* IE                            */\\n}\\n\\n.superset-legacy-chart-heatmap .legendCells text {\\n  font-size: 10px;\\n  font-weight: normal;\\n  opacity: 0;\\n}\\n\\n.superset-legacy-chart-heatmap .legendCells .cell:first-child text {\\n  opacity: 1;\\n}\\n.superset-legacy-chart-heatmap .legendCells .cell:last-child text {\\n  opacity: 1;\\n}\\n\\n.dashboard .superset-legacy-chart-heatmap .axis text {\\n  font-size: 10px;\\n  opacity: 0.75;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n","exports = module.exports = require(\"../../../../css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n/* from d3-tip */\\n.d3-tip {\\n  line-height: 1;\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.8);\\n  color: #fff;\\n  border-radius: 2px;\\n  pointer-events: none;\\n  z-index: 1000;\\n}\\n\\n/* Creates a small triangle extender for the tooltip */\\n.d3-tip:after {\\n  box-sizing: border-box;\\n  display: inline;\\n  font-size: 10px;\\n  width: 100%;\\n  line-height: 1;\\n  color: rgba(0, 0, 0, 0.8);\\n  position: absolute;\\n  pointer-events: none;\\n}\\n\\n/* Northward tooltips */\\n.d3-tip.n:after {\\n  content: '\\\\25BC';\\n  margin: -1px 0 0 0;\\n  top: 100%;\\n  left: 0;\\n  text-align: center;\\n}\\n\\n/* Eastward tooltips */\\n.d3-tip.e:after {\\n  content: '\\\\25C0';\\n  margin: -4px 0 0 0;\\n  top: 50%;\\n  left: -8px;\\n}\\n\\n/* Southward tooltips */\\n.d3-tip.s:after {\\n  content: '\\\\25B2';\\n  margin: 0 0 1px 0;\\n  top: -8px;\\n  left: 0;\\n  text-align: center;\\n}\\n\\n/* Westward tooltips */\\n.d3-tip.w:after {\\n  content: '\\\\25B6';\\n  margin: -4px 0 0 -1px;\\n  top: 50%;\\n  left: 100%;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"G:/workspace/boke-pro/superset-all/superset/superset-frontend/node_modules/@superset-ui/legacy-plugin-chart-heatmap/esm/vendor/d3tip.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;;;;GAiBG;AACH,iBAAiB;AACjB;EACE,eAAe;EACf,cAAc;EACd,+BAA+B;EAC/B,YAAY;EACZ,mBAAmB;EACnB,qBAAqB;EACrB,cAAc;CACf;;AAED,uDAAuD;AACvD;EACE,uBAAuB;EACvB,gBAAgB;EAChB,gBAAgB;EAChB,YAAY;EACZ,eAAe;EACf,0BAA0B;EAC1B,mBAAmB;EACnB,qBAAqB;CACtB;;AAED,wBAAwB;AACxB;EACE,iBAAiB;EACjB,mBAAmB;EACnB,UAAU;EACV,QAAQ;EACR,mBAAmB;CACpB;;AAED,uBAAuB;AACvB;EACE,iBAAiB;EACjB,mBAAmB;EACnB,SAAS;EACT,WAAW;CACZ;;AAED,wBAAwB;AACxB;EACE,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,QAAQ;EACR,mBAAmB;CACpB;;AAED,uBAAuB;AACvB;EACE,iBAAiB;EACjB,sBAAsB;EACtB,SAAS;EACT,WAAW;CACZ\",\"file\":\"d3tip.css\",\"sourcesContent\":[\"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n/* from d3-tip */\\n.d3-tip {\\n  line-height: 1;\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.8);\\n  color: #fff;\\n  border-radius: 2px;\\n  pointer-events: none;\\n  z-index: 1000;\\n}\\n\\n/* Creates a small triangle extender for the tooltip */\\n.d3-tip:after {\\n  box-sizing: border-box;\\n  display: inline;\\n  font-size: 10px;\\n  width: 100%;\\n  line-height: 1;\\n  color: rgba(0, 0, 0, 0.8);\\n  position: absolute;\\n  pointer-events: none;\\n}\\n\\n/* Northward tooltips */\\n.d3-tip.n:after {\\n  content: '\\\\25BC';\\n  margin: -1px 0 0 0;\\n  top: 100%;\\n  left: 0;\\n  text-align: center;\\n}\\n\\n/* Eastward tooltips */\\n.d3-tip.e:after {\\n  content: '\\\\25C0';\\n  margin: -4px 0 0 0;\\n  top: 50%;\\n  left: -8px;\\n}\\n\\n/* Southward tooltips */\\n.d3-tip.s:after {\\n  content: '\\\\25B2';\\n  margin: 0 0 1px 0;\\n  top: -8px;\\n  left: 0;\\n  text-align: center;\\n}\\n\\n/* Westward tooltips */\\n.d3-tip.w:after {\\n  content: '\\\\25B6';\\n  margin: -4px 0 0 -1px;\\n  top: 50%;\\n  left: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n","var d3 = require('d3');\n\nd3.legend = require('./no-extend');\n\nmodule.exports = d3;\n","module.exports = {\n  color: require('./src/color'),\n  size: require('./src/size'),\n  symbol: require('./src/symbol')\n};\n","var helper = require('./legend');\n\nmodule.exports = function(){\n\n  var scale = d3.scale.linear(),\n    shape = \"rect\",\n    shapeWidth = 15,\n    shapeHeight = 15,\n    shapeRadius = 10,\n    shapePadding = 2,\n    cells = [5],\n    labels = [],\n    classPrefix = \"\",\n    useClass = false,\n    title = \"\",\n    labelFormat = d3.format(\".01f\"),\n    labelOffset = 10,\n    labelAlign = \"middle\",\n    labelDelimiter = \"to\",\n    orient = \"vertical\",\n    ascending = false,\n    path,\n    legendDispatcher = d3.dispatch(\"cellover\", \"cellout\", \"cellclick\");\n\n    function legend(svg){\n\n      var type = helper.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\n        legendG = svg.selectAll('g').data([scale]);\n\n      legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\n\n\n      var cell = legendG.selectAll(\".\" + classPrefix + \"cell\").data(type.data),\n        cellEnter = cell.enter().append(\"g\", \".cell\").attr(\"class\", classPrefix + \"cell\").style(\"opacity\", 1e-6),\n        shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\n        shapes = cell.select(\"g.\" + classPrefix + \"cell \" + shape);\n\n      //add event handlers\n      helper.d3_addEvents(cellEnter, legendDispatcher);\n\n      cell.exit().transition().style(\"opacity\", 0).remove();\n\n      helper.d3_drawShapes(shape, shapes, shapeHeight, shapeWidth, shapeRadius, path);\n\n      helper.d3_addText(legendG, cellEnter, type.labels, classPrefix)\n\n      // sets placement\n      var text = cell.select(\"text\"),\n        shapeSize = shapes[0].map( function(d){ return d.getBBox(); });\n\n      //sets scale\n      //everything is fill except for line which is stroke,\n      if (!useClass){\n        if (shape == \"line\"){\n          shapes.style(\"stroke\", type.feature);\n        } else {\n          shapes.style(\"fill\", type.feature);\n        }\n      } else {\n        shapes.attr(\"class\", function(d){ return classPrefix + \"swatch \" + type.feature(d); });\n      }\n\n      var cellTrans,\n      textTrans,\n      textAlign = (labelAlign == \"start\") ? 0 : (labelAlign == \"middle\") ? 0.5 : 1;\n\n      //positions cells and text\n      if (orient === \"vertical\"){\n        cellTrans = function(d,i) { return \"translate(0, \" + (i * (shapeSize[i].height + shapePadding)) + \")\"; };\n        textTrans = function(d,i) { return \"translate(\" + (shapeSize[i].width + shapeSize[i].x +\n          labelOffset) + \",\" + (shapeSize[i].y + shapeSize[i].height/2 + 5) + \")\"; };\n\n      } else if (orient === \"horizontal\"){\n        cellTrans = function(d,i) { return \"translate(\" + (i * (shapeSize[i].width + shapePadding)) + \",0)\"; }\n        textTrans = function(d,i) { return \"translate(\" + (shapeSize[i].width*textAlign  + shapeSize[i].x) +\n          \",\" + (shapeSize[i].height + shapeSize[i].y + labelOffset + 8) + \")\"; };\n      }\n\n      helper.d3_placement(orient, cell, cellTrans, text, textTrans, labelAlign);\n      helper.d3_title(svg, legendG, title, classPrefix);\n\n      cell.transition().style(\"opacity\", 1);\n\n    }\n\n\n\n  legend.scale = function(_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return legend;\n  };\n\n  legend.cells = function(_) {\n    if (!arguments.length) return cells;\n    if (_.length > 1 || _ >= 2 ){\n      cells = _;\n    }\n    return legend;\n  };\n\n  legend.shape = function(_, d) {\n    if (!arguments.length) return shape;\n    if (_ == \"rect\" || _ == \"circle\" || _ == \"line\" || (_ == \"path\" && (typeof d === 'string')) ){\n      shape = _;\n      path = d;\n    }\n    return legend;\n  };\n\n  legend.shapeWidth = function(_) {\n    if (!arguments.length) return shapeWidth;\n    shapeWidth = +_;\n    return legend;\n  };\n\n  legend.shapeHeight = function(_) {\n    if (!arguments.length) return shapeHeight;\n    shapeHeight = +_;\n    return legend;\n  };\n\n  legend.shapeRadius = function(_) {\n    if (!arguments.length) return shapeRadius;\n    shapeRadius = +_;\n    return legend;\n  };\n\n  legend.shapePadding = function(_) {\n    if (!arguments.length) return shapePadding;\n    shapePadding = +_;\n    return legend;\n  };\n\n  legend.labels = function(_) {\n    if (!arguments.length) return labels;\n    labels = _;\n    return legend;\n  };\n\n  legend.labelAlign = function(_) {\n    if (!arguments.length) return labelAlign;\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _;\n    }\n    return legend;\n  };\n\n  legend.labelFormat = function(_) {\n    if (!arguments.length) return labelFormat;\n    labelFormat = _;\n    return legend;\n  };\n\n  legend.labelOffset = function(_) {\n    if (!arguments.length) return labelOffset;\n    labelOffset = +_;\n    return legend;\n  };\n\n  legend.labelDelimiter = function(_) {\n    if (!arguments.length) return labelDelimiter;\n    labelDelimiter = _;\n    return legend;\n  };\n\n  legend.useClass = function(_) {\n    if (!arguments.length) return useClass;\n    if (_ === true || _ === false){\n      useClass = _;\n    }\n    return legend;\n  };\n\n  legend.orient = function(_){\n    if (!arguments.length) return orient;\n    _ = _.toLowerCase();\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _;\n    }\n    return legend;\n  };\n\n  legend.ascending = function(_) {\n    if (!arguments.length) return ascending;\n    ascending = !!_;\n    return legend;\n  };\n\n  legend.classPrefix = function(_) {\n    if (!arguments.length) return classPrefix;\n    classPrefix = _;\n    return legend;\n  };\n\n  legend.title = function(_) {\n    if (!arguments.length) return title;\n    title = _;\n    return legend;\n  };\n\n  d3.rebind(legend, legendDispatcher, \"on\");\n\n  return legend;\n\n};\n","module.exports = {\n\n  d3_identity: function (d) {\n    return d;\n  },\n\n  d3_mergeLabels: function (gen, labels) {\n\n      if(labels.length === 0) return gen;\n\n      gen = (gen) ? gen : [];\n\n      var i = labels.length;\n      for (; i < gen.length; i++) {\n        labels.push(gen[i]);\n      }\n      return labels;\n    },\n\n  d3_linearLegend: function (scale, cells, labelFormat) {\n    var data = [];\n\n    if (cells.length > 1){\n      data = cells;\n\n    } else {\n      var domain = scale.domain(),\n      increment = (domain[domain.length - 1] - domain[0])/(cells - 1),\n      i = 0;\n\n      for (; i < cells; i++){\n        data.push(domain[0] + i*increment);\n      }\n    }\n\n    var labels = data.map(labelFormat);\n\n    return {data: data,\n            labels: labels,\n            feature: function(d){ return scale(d); }};\n  },\n\n  d3_quantLegend: function (scale, labelFormat, labelDelimiter) {\n    var labels = scale.range().map(function(d){\n      var invert = scale.invertExtent(d),\n      a = labelFormat(invert[0]),\n      b = labelFormat(invert[1]);\n\n      // if (( (a) && (a.isNan()) && b){\n      //   console.log(\"in initial statement\")\n        return labelFormat(invert[0]) + \" \" + labelDelimiter + \" \" + labelFormat(invert[1]);\n      // } else if (a || b) {\n      //   console.log('in else statement')\n      //   return (a) ? a : b;\n      // }\n\n    });\n\n    return {data: scale.range(),\n            labels: labels,\n            feature: this.d3_identity\n          };\n  },\n\n  d3_ordinalLegend: function (scale) {\n    return {data: scale.domain(),\n            labels: scale.domain(),\n            feature: function(d){ return scale(d); }};\n  },\n\n  d3_drawShapes: function (shape, shapes, shapeHeight, shapeWidth, shapeRadius, path) {\n    if (shape === \"rect\"){\n        shapes.attr(\"height\", shapeHeight).attr(\"width\", shapeWidth);\n\n    } else if (shape === \"circle\") {\n        shapes.attr(\"r\", shapeRadius)//.attr(\"cx\", shapeRadius).attr(\"cy\", shapeRadius);\n\n    } else if (shape === \"line\") {\n        shapes.attr(\"x1\", 0).attr(\"x2\", shapeWidth).attr(\"y1\", 0).attr(\"y2\", 0);\n\n    } else if (shape === \"path\") {\n      shapes.attr(\"d\", path);\n    }\n  },\n\n  d3_addText: function (svg, enter, labels, classPrefix){\n    enter.append(\"text\").attr(\"class\", classPrefix + \"label\");\n    svg.selectAll(\"g.\" + classPrefix + \"cell text.\" + classPrefix + \"label\")\n      .data(labels).text(this.d3_identity);\n  },\n\n  d3_calcType: function (scale, ascending, cells, labels, labelFormat, labelDelimiter){\n    var type = scale.ticks ?\n            this.d3_linearLegend(scale, cells, labelFormat) : scale.invertExtent ?\n            this.d3_quantLegend(scale, labelFormat, labelDelimiter) : this.d3_ordinalLegend(scale);\n\n    type.labels = this.d3_mergeLabels(type.labels, labels);\n\n    if (ascending) {\n      type.labels = this.d3_reverse(type.labels);\n      type.data = this.d3_reverse(type.data);\n    }\n\n    return type;\n  },\n\n  d3_reverse: function(arr) {\n    var mirror = [];\n    for (var i = 0, l = arr.length; i < l; i++) {\n      mirror[i] = arr[l-i-1];\n    }\n    return mirror;\n  },\n\n  d3_placement: function (orient, cell, cellTrans, text, textTrans, labelAlign) {\n    cell.attr(\"transform\", cellTrans);\n    text.attr(\"transform\", textTrans);\n    if (orient === \"horizontal\"){\n      text.style(\"text-anchor\", labelAlign);\n    }\n  },\n\n  d3_addEvents: function(cells, dispatcher){\n    var _ = this;\n\n      cells.on(\"mouseover.legend\", function (d) { _.d3_cellOver(dispatcher, d, this); })\n          .on(\"mouseout.legend\", function (d) { _.d3_cellOut(dispatcher, d, this); })\n          .on(\"click.legend\", function (d) { _.d3_cellClick(dispatcher, d, this); });\n  },\n\n  d3_cellOver: function(cellDispatcher, d, obj){\n    cellDispatcher.cellover.call(obj, d);\n  },\n\n  d3_cellOut: function(cellDispatcher, d, obj){\n    cellDispatcher.cellout.call(obj, d);\n  },\n\n  d3_cellClick: function(cellDispatcher, d, obj){\n    cellDispatcher.cellclick.call(obj, d);\n  },\n\n  d3_title: function(svg, cellsSvg, title, classPrefix){\n    if (title !== \"\"){\n\n      var titleText = svg.selectAll('text.' + classPrefix + 'legendTitle');\n\n      titleText.data([title])\n        .enter()\n        .append('text')\n        .attr('class', classPrefix + 'legendTitle');\n\n        svg.selectAll('text.' + classPrefix + 'legendTitle')\n            .text(title)\n\n      var yOffset = svg.select('.' + classPrefix + 'legendTitle')\n          .map(function(d) { return d[0].getBBox().height})[0],\n      xOffset = -cellsSvg.map(function(d) { return d[0].getBBox().x})[0];\n\n      cellsSvg.attr('transform', 'translate(' + xOffset + ',' + (yOffset + 10) + ')');\n\n    }\n  }\n}\n","var helper = require('./legend');\n\nmodule.exports =  function(){\n\n  var scale = d3.scale.linear(),\n    shape = \"rect\",\n    shapeWidth = 15,\n    shapePadding = 2,\n    cells = [5],\n    labels = [],\n    useStroke = false,\n    classPrefix = \"\",\n    title = \"\",\n    labelFormat = d3.format(\".01f\"),\n    labelOffset = 10,\n    labelAlign = \"middle\",\n    labelDelimiter = \"to\",\n    orient = \"vertical\",\n    ascending = false,\n    path,\n    legendDispatcher = d3.dispatch(\"cellover\", \"cellout\", \"cellclick\");\n\n    function legend(svg){\n\n      var type = helper.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\n        legendG = svg.selectAll('g').data([scale]);\n\n      legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\n\n\n      var cell = legendG.selectAll(\".\" + classPrefix + \"cell\").data(type.data),\n        cellEnter = cell.enter().append(\"g\", \".cell\").attr(\"class\", classPrefix + \"cell\").style(\"opacity\", 1e-6),\n        shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\n        shapes = cell.select(\"g.\" + classPrefix + \"cell \" + shape);\n\n      //add event handlers\n      helper.d3_addEvents(cellEnter, legendDispatcher);\n\n      cell.exit().transition().style(\"opacity\", 0).remove();\n\n      //creates shape\n      if (shape === \"line\"){\n        helper.d3_drawShapes(shape, shapes, 0, shapeWidth);\n        shapes.attr(\"stroke-width\", type.feature);\n      } else {\n        helper.d3_drawShapes(shape, shapes, type.feature, type.feature, type.feature, path);\n      }\n\n      helper.d3_addText(legendG, cellEnter, type.labels, classPrefix)\n\n      //sets placement\n      var text = cell.select(\"text\"),\n        shapeSize = shapes[0].map(\n          function(d, i){\n            var bbox = d.getBBox()\n            var stroke = scale(type.data[i]);\n\n            if (shape === \"line\" && orient === \"horizontal\") {\n              bbox.height = bbox.height + stroke;\n            } else if (shape === \"line\" && orient === \"vertical\"){\n              bbox.width = bbox.width;\n            }\n\n            return bbox;\n        });\n\n      var maxH = d3.max(shapeSize, function(d){ return d.height + d.y; }),\n      maxW = d3.max(shapeSize, function(d){ return d.width + d.x; });\n\n      var cellTrans,\n      textTrans,\n      textAlign = (labelAlign == \"start\") ? 0 : (labelAlign == \"middle\") ? 0.5 : 1;\n\n      //positions cells and text\n      if (orient === \"vertical\"){\n\n        cellTrans = function(d,i) {\n            var height = d3.sum(shapeSize.slice(0, i + 1 ), function(d){ return d.height; });\n            return \"translate(0, \" + (height + i*shapePadding) + \")\"; };\n\n        textTrans = function(d,i) { return \"translate(\" + (maxW + labelOffset) + \",\" +\n          (shapeSize[i].y + shapeSize[i].height/2 + 5) + \")\"; };\n\n      } else if (orient === \"horizontal\"){\n        cellTrans = function(d,i) {\n            var width = d3.sum(shapeSize.slice(0, i + 1 ), function(d){ return d.width; });\n            return \"translate(\" + (width + i*shapePadding) + \",0)\"; };\n\n        textTrans = function(d,i) { return \"translate(\" + (shapeSize[i].width*textAlign  + shapeSize[i].x) + \",\" +\n              (maxH + labelOffset ) + \")\"; };\n      }\n\n      helper.d3_placement(orient, cell, cellTrans, text, textTrans, labelAlign);\n      helper.d3_title(svg, legendG, title, classPrefix);\n\n      cell.transition().style(\"opacity\", 1);\n\n    }\n\n  legend.scale = function(_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return legend;\n  };\n\n  legend.cells = function(_) {\n    if (!arguments.length) return cells;\n    if (_.length > 1 || _ >= 2 ){\n      cells = _;\n    }\n    return legend;\n  };\n\n\n  legend.shape = function(_, d) {\n    if (!arguments.length) return shape;\n    if (_ == \"rect\" || _ == \"circle\" || _ == \"line\" ){\n      shape = _;\n      path = d;\n    }\n    return legend;\n  };\n\n  legend.shapeWidth = function(_) {\n    if (!arguments.length) return shapeWidth;\n    shapeWidth = +_;\n    return legend;\n  };\n\n  legend.shapePadding = function(_) {\n    if (!arguments.length) return shapePadding;\n    shapePadding = +_;\n    return legend;\n  };\n\n  legend.labels = function(_) {\n    if (!arguments.length) return labels;\n    labels = _;\n    return legend;\n  };\n\n  legend.labelAlign = function(_) {\n    if (!arguments.length) return labelAlign;\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _;\n    }\n    return legend;\n  };\n\n  legend.labelFormat = function(_) {\n    if (!arguments.length) return labelFormat;\n    labelFormat = _;\n    return legend;\n  };\n\n  legend.labelOffset = function(_) {\n    if (!arguments.length) return labelOffset;\n    labelOffset = +_;\n    return legend;\n  };\n\n  legend.labelDelimiter = function(_) {\n    if (!arguments.length) return labelDelimiter;\n    labelDelimiter = _;\n    return legend;\n  };\n\n  legend.orient = function(_){\n    if (!arguments.length) return orient;\n    _ = _.toLowerCase();\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _;\n    }\n    return legend;\n  };\n\n  legend.ascending = function(_) {\n    if (!arguments.length) return ascending;\n    ascending = !!_;\n    return legend;\n  };\n\n  legend.classPrefix = function(_) {\n    if (!arguments.length) return classPrefix;\n    classPrefix = _;\n    return legend;\n  };\n\n  legend.title = function(_) {\n    if (!arguments.length) return title;\n    title = _;\n    return legend;\n  };\n\n  d3.rebind(legend, legendDispatcher, \"on\");\n\n  return legend;\n\n};\n","var helper = require('./legend');\n\nmodule.exports = function(){\n\n  var scale = d3.scale.linear(),\n    shape = \"path\",\n    shapeWidth = 15,\n    shapeHeight = 15,\n    shapeRadius = 10,\n    shapePadding = 5,\n    cells = [5],\n    labels = [],\n    classPrefix = \"\",\n    useClass = false,\n    title = \"\",\n    labelFormat = d3.format(\".01f\"),\n    labelAlign = \"middle\",\n    labelOffset = 10,\n    labelDelimiter = \"to\",\n    orient = \"vertical\",\n    ascending = false,\n    legendDispatcher = d3.dispatch(\"cellover\", \"cellout\", \"cellclick\");\n\n    function legend(svg){\n\n      var type = helper.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\n        legendG = svg.selectAll('g').data([scale]);\n\n      legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\n\n      var cell = legendG.selectAll(\".\" + classPrefix + \"cell\").data(type.data),\n        cellEnter = cell.enter().append(\"g\", \".cell\").attr(\"class\", classPrefix + \"cell\").style(\"opacity\", 1e-6),\n        shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\n        shapes = cell.select(\"g.\" + classPrefix + \"cell \" + shape);\n\n      //add event handlers\n      helper.d3_addEvents(cellEnter, legendDispatcher);\n\n      //remove old shapes\n      cell.exit().transition().style(\"opacity\", 0).remove();\n\n      helper.d3_drawShapes(shape, shapes, shapeHeight, shapeWidth, shapeRadius, type.feature);\n      helper.d3_addText(legendG, cellEnter, type.labels, classPrefix)\n\n      // sets placement\n      var text = cell.select(\"text\"),\n        shapeSize = shapes[0].map( function(d){ return d.getBBox(); });\n\n      var maxH = d3.max(shapeSize, function(d){ return d.height; }),\n      maxW = d3.max(shapeSize, function(d){ return d.width; });\n\n      var cellTrans,\n      textTrans,\n      textAlign = (labelAlign == \"start\") ? 0 : (labelAlign == \"middle\") ? 0.5 : 1;\n\n      //positions cells and text\n      if (orient === \"vertical\"){\n        cellTrans = function(d,i) { return \"translate(0, \" + (i * (maxH + shapePadding)) + \")\"; };\n        textTrans = function(d,i) { return \"translate(\" + (maxW + labelOffset) + \",\" +\n              (shapeSize[i].y + shapeSize[i].height/2 + 5) + \")\"; };\n\n      } else if (orient === \"horizontal\"){\n        cellTrans = function(d,i) { return \"translate(\" + (i * (maxW + shapePadding)) + \",0)\"; };\n        textTrans = function(d,i) { return \"translate(\" + (shapeSize[i].width*textAlign  + shapeSize[i].x) + \",\" +\n              (maxH + labelOffset ) + \")\"; };\n      }\n\n      helper.d3_placement(orient, cell, cellTrans, text, textTrans, labelAlign);\n      helper.d3_title(svg, legendG, title, classPrefix);\n      cell.transition().style(\"opacity\", 1);\n\n    }\n\n\n  legend.scale = function(_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return legend;\n  };\n\n  legend.cells = function(_) {\n    if (!arguments.length) return cells;\n    if (_.length > 1 || _ >= 2 ){\n      cells = _;\n    }\n    return legend;\n  };\n\n  legend.shapePadding = function(_) {\n    if (!arguments.length) return shapePadding;\n    shapePadding = +_;\n    return legend;\n  };\n\n  legend.labels = function(_) {\n    if (!arguments.length) return labels;\n    labels = _;\n    return legend;\n  };\n\n  legend.labelAlign = function(_) {\n    if (!arguments.length) return labelAlign;\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _;\n    }\n    return legend;\n  };\n\n  legend.labelFormat = function(_) {\n    if (!arguments.length) return labelFormat;\n    labelFormat = _;\n    return legend;\n  };\n\n  legend.labelOffset = function(_) {\n    if (!arguments.length) return labelOffset;\n    labelOffset = +_;\n    return legend;\n  };\n\n  legend.labelDelimiter = function(_) {\n    if (!arguments.length) return labelDelimiter;\n    labelDelimiter = _;\n    return legend;\n  };\n\n  legend.orient = function(_){\n    if (!arguments.length) return orient;\n    _ = _.toLowerCase();\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _;\n    }\n    return legend;\n  };\n\n  legend.ascending = function(_) {\n    if (!arguments.length) return ascending;\n    ascending = !!_;\n    return legend;\n  };\n\n  legend.classPrefix = function(_) {\n    if (!arguments.length) return classPrefix;\n    classPrefix = _;\n    return legend;\n  };\n\n  legend.title = function(_) {\n    if (!arguments.length) return title;\n    title = _;\n    return legend;\n  };\n\n  d3.rebind(legend, legendDispatcher, \"on\");\n\n  return legend;\n\n};\n"],"sourceRoot":""}