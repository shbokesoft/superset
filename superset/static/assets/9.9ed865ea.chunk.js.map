{"version":3,"sources":["webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/array/from.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/instance/ends-with.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/instance/flat.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/instance/last-index-of.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/instance/sort.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/instance/splice.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/instance/starts-with.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/instance/values.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/object/is.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/parse-float.js","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/string/raw.js","webpack:///./node_modules/@react-dnd/asap/dist/esm/browser/asap.js","webpack:///./node_modules/@react-dnd/asap/dist/esm/browser/index.js","webpack:///./node_modules/@react-dnd/asap/dist/esm/browser/raw.js","webpack:///./node_modules/@react-dnd/invariant/dist/invariant.esm.js","webpack:///./node_modules/@react-dnd/shallowequal/dist/shallowequal.esm.js","webpack:///./node_modules/antd/es/radio/context.js","webpack:///./node_modules/antd/es/radio/group.js","webpack:///./node_modules/antd/es/radio/index.js","webpack:///./node_modules/antd/es/radio/radio.js","webpack:///./node_modules/antd/es/radio/radioButton.js","webpack:///./node_modules/antd/lib/slider/SliderTooltip.js","webpack:///./node_modules/antd/lib/slider/index.js","webpack:///./node_modules/core-js-pure/es/array/from.js","webpack:///./node_modules/core-js-pure/es/array/virtual/flat.js","webpack:///./node_modules/core-js-pure/es/array/virtual/last-index-of.js","webpack:///./node_modules/core-js-pure/es/array/virtual/sort.js","webpack:///./node_modules/core-js-pure/es/array/virtual/splice.js","webpack:///./node_modules/core-js-pure/es/array/virtual/values.js","webpack:///./node_modules/core-js-pure/es/instance/ends-with.js","webpack:///./node_modules/core-js-pure/es/instance/flat.js","webpack:///./node_modules/core-js-pure/es/instance/last-index-of.js","webpack:///./node_modules/core-js-pure/es/instance/sort.js","webpack:///./node_modules/core-js-pure/es/instance/splice.js","webpack:///./node_modules/core-js-pure/es/instance/starts-with.js","webpack:///./node_modules/core-js-pure/es/object/is.js","webpack:///./node_modules/core-js-pure/es/parse-float.js","webpack:///./node_modules/core-js-pure/es/string/raw.js","webpack:///./node_modules/core-js-pure/es/string/virtual/ends-with.js","webpack:///./node_modules/core-js-pure/es/string/virtual/starts-with.js","webpack:///./node_modules/core-js-pure/internals/array-from.js","webpack:///./node_modules/core-js-pure/internals/array-last-index-of.js","webpack:///./node_modules/core-js-pure/internals/number-parse-float.js","webpack:///./node_modules/core-js-pure/internals/same-value.js","webpack:///./node_modules/core-js-pure/modules/es.array.flat.js","webpack:///./node_modules/core-js-pure/modules/es.array.from.js","webpack:///./node_modules/core-js-pure/modules/es.array.last-index-of.js","webpack:///./node_modules/core-js-pure/modules/es.array.sort.js","webpack:///./node_modules/core-js-pure/modules/es.array.splice.js","webpack:///./node_modules/core-js-pure/modules/es.array.unscopables.flat.js","webpack:///./node_modules/core-js-pure/modules/es.object.is.js","webpack:///./node_modules/core-js-pure/modules/es.parse-float.js","webpack:///./node_modules/core-js-pure/modules/es.string.ends-with.js","webpack:///./node_modules/core-js-pure/modules/es.string.raw.js","webpack:///./node_modules/core-js-pure/modules/es.string.starts-with.js","webpack:///./node_modules/core-js-pure/stable/array/from.js","webpack:///./node_modules/core-js-pure/stable/array/virtual/values.js","webpack:///./node_modules/core-js-pure/stable/instance/ends-with.js","webpack:///./node_modules/core-js-pure/stable/instance/flat.js","webpack:///./node_modules/core-js-pure/stable/instance/last-index-of.js","webpack:///./node_modules/core-js-pure/stable/instance/sort.js","webpack:///./node_modules/core-js-pure/stable/instance/splice.js","webpack:///./node_modules/core-js-pure/stable/instance/starts-with.js","webpack:///./node_modules/core-js-pure/stable/instance/values.js","webpack:///./node_modules/core-js-pure/stable/object/is.js","webpack:///./node_modules/core-js-pure/stable/parse-float.js","webpack:///./node_modules/core-js-pure/stable/string/raw.js","webpack:///./src/explore/components/Control.less","webpack:///./src/visualizations/FilterBox/FilterBox.less","webpack:///./node_modules/geolib/dist/geolib.js","webpack:///./node_modules/lodash/_arrayEach.js","webpack:///./node_modules/lodash/_baseAssign.js","webpack:///./node_modules/lodash/_baseAssignIn.js","webpack:///./node_modules/lodash/_baseClone.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lodash/_baseIsMap.js","webpack:///./node_modules/lodash/_baseIsSet.js","webpack:///./node_modules/lodash/_baseMap.js","webpack:///./node_modules/lodash/_castFunction.js","webpack:///./node_modules/lodash/_cloneDataView.js","webpack:///./node_modules/lodash/_cloneRegExp.js","webpack:///./node_modules/lodash/_cloneSymbol.js","webpack:///./node_modules/lodash/_copySymbols.js","webpack:///./node_modules/lodash/_copySymbolsIn.js","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./node_modules/lodash/_getAllKeysIn.js","webpack:///./node_modules/lodash/_getSymbolsIn.js","webpack:///./node_modules/lodash/_initCloneArray.js","webpack:///./node_modules/lodash/_initCloneByTag.js","webpack:///./node_modules/lodash/cloneDeep.js","webpack:///./node_modules/lodash/each.js","webpack:///./node_modules/lodash/forEach.js","webpack:///./node_modules/lodash/forOwn.js","webpack:///./node_modules/lodash/isEmpty.js","webpack:///./node_modules/lodash/isInteger.js","webpack:///./node_modules/lodash/isMap.js","webpack:///./node_modules/lodash/isSet.js","webpack:///./node_modules/lodash/isString.js","webpack:///./node_modules/lodash/map.js","webpack:///./node_modules/lodash/throttle.js","webpack:///./node_modules/lodash/toInteger.js","webpack:///./node_modules/material-colors/dist/colors.es2015.js","webpack:///./node_modules/react-color/lib/components/alpha/Alpha.js","webpack:///./node_modules/react-color/lib/components/alpha/AlphaPointer.js","webpack:///./node_modules/react-color/lib/components/block/Block.js","webpack:///./node_modules/react-color/lib/components/block/BlockSwatches.js","webpack:///./node_modules/react-color/lib/components/chrome/Chrome.js","webpack:///./node_modules/react-color/lib/components/chrome/ChromeFields.js","webpack:///./node_modules/react-color/lib/components/chrome/ChromePointer.js","webpack:///./node_modules/react-color/lib/components/chrome/ChromePointerCircle.js","webpack:///./node_modules/react-color/lib/components/circle/Circle.js","webpack:///./node_modules/react-color/lib/components/circle/CircleSwatch.js","webpack:///./node_modules/react-color/lib/components/common/Alpha.js","webpack:///./node_modules/react-color/lib/components/common/Checkboard.js","webpack:///./node_modules/react-color/lib/components/common/ColorWrap.js","webpack:///./node_modules/react-color/lib/components/common/EditableInput.js","webpack:///./node_modules/react-color/lib/components/common/Hue.js","webpack:///./node_modules/react-color/lib/components/common/Raised.js","webpack:///./node_modules/react-color/lib/components/common/Saturation.js","webpack:///./node_modules/react-color/lib/components/common/Swatch.js","webpack:///./node_modules/react-color/lib/components/common/index.js","webpack:///./node_modules/react-color/lib/components/compact/Compact.js","webpack:///./node_modules/react-color/lib/components/compact/CompactColor.js","webpack:///./node_modules/react-color/lib/components/compact/CompactFields.js","webpack:///./node_modules/react-color/lib/components/github/Github.js","webpack:///./node_modules/react-color/lib/components/github/GithubSwatch.js","webpack:///./node_modules/react-color/lib/components/hue/Hue.js","webpack:///./node_modules/react-color/lib/components/hue/HuePointer.js","webpack:///./node_modules/react-color/lib/components/material/Material.js","webpack:///./node_modules/react-color/lib/components/photoshop/Photoshop.js","webpack:///./node_modules/react-color/lib/components/photoshop/PhotoshopButton.js","webpack:///./node_modules/react-color/lib/components/photoshop/PhotoshopFields.js","webpack:///./node_modules/react-color/lib/components/photoshop/PhotoshopPointer.js","webpack:///./node_modules/react-color/lib/components/photoshop/PhotoshopPointerCircle.js","webpack:///./node_modules/react-color/lib/components/photoshop/PhotoshopPreviews.js","webpack:///./node_modules/react-color/lib/components/sketch/Sketch.js","webpack:///./node_modules/react-color/lib/components/sketch/SketchFields.js","webpack:///./node_modules/react-color/lib/components/sketch/SketchPresetColors.js","webpack:///./node_modules/react-color/lib/components/slider/Slider.js","webpack:///./node_modules/react-color/lib/components/slider/SliderPointer.js","webpack:///./node_modules/react-color/lib/components/slider/SliderSwatch.js","webpack:///./node_modules/react-color/lib/components/slider/SliderSwatches.js","webpack:///./node_modules/react-color/lib/components/swatches/Swatches.js","webpack:///./node_modules/react-color/lib/components/swatches/SwatchesColor.js","webpack:///./node_modules/react-color/lib/components/swatches/SwatchesGroup.js","webpack:///./node_modules/react-color/lib/components/twitter/Twitter.js","webpack:///./node_modules/react-color/lib/helpers/alpha.js","webpack:///./node_modules/react-color/lib/helpers/checkboard.js","webpack:///./node_modules/react-color/lib/helpers/color.js","webpack:///./node_modules/react-color/lib/helpers/hue.js","webpack:///./node_modules/react-color/lib/helpers/interaction.js","webpack:///./node_modules/react-color/lib/helpers/saturation.js","webpack:///./node_modules/react-color/lib/index.js","webpack:///./node_modules/react-dnd/dist/esm/common/DndContext.js","webpack:///./node_modules/react-dnd/dist/esm/common/DragSourceMonitorImpl.js","webpack:///./node_modules/react-dnd/dist/esm/common/DropTargetMonitorImpl.js","webpack:///./node_modules/react-dnd/dist/esm/common/SourceConnector.js","webpack:///./node_modules/react-dnd/dist/esm/common/TargetConnector.js","webpack:///./node_modules/react-dnd/dist/esm/common/registration.js","webpack:///./node_modules/react-dnd/dist/esm/common/wrapConnectorHooks.js","webpack:///./node_modules/react-dnd/dist/esm/hooks/internal/drag.js","webpack:///./node_modules/react-dnd/dist/esm/hooks/internal/drop.js","webpack:///./node_modules/react-dnd/dist/esm/hooks/internal/useCollector.js","webpack:///./node_modules/react-dnd/dist/esm/hooks/internal/useIsomorphicLayoutEffect.js","webpack:///./node_modules/react-dnd/dist/esm/hooks/internal/useMonitorOutput.js","webpack:///./node_modules/react-dnd/dist/esm/hooks/useDrag.js","webpack:///./node_modules/react-dnd/dist/esm/hooks/useDragDropManager.js","webpack:///./node_modules/react-dnd/dist/esm/hooks/useDrop.js","webpack:///./node_modules/react-dnd/dist/esm/utils/cloneWithRef.js","webpack:///./node_modules/react-dnd/dist/esm/utils/isRef.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/DragDropManagerImpl.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/DragDropMonitorImpl.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/HandlerRegistryImpl.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/dragDrop/beginDrag.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/dragDrop/drop.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/dragDrop/endDrag.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/dragDrop/hover.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/dragDrop/index.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/dragDrop/local/setClientOffset.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/dragDrop/publishDragSource.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/dragDrop/types.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/actions/registry.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/contracts.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/factories.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/interfaces.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/reducers/dirtyHandlerIds.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/reducers/dragOffset.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/reducers/dragOperation.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/reducers/index.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/reducers/refCount.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/reducers/stateId.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/utils/coords.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/utils/dirtiness.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/utils/equality.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/utils/getNextUniqueId.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/utils/js_utils.js","webpack:///./node_modules/react-dnd/node_modules/dnd-core/dist/esm/utils/matchesType.js","webpack:///./node_modules/react-table/dist/react-table.development.js","webpack:///./node_modules/react-table/index.js","webpack:///./node_modules/react-ultimate-pagination/lib/react-ultimate-pagination.js","webpack:///./node_modules/reactcss/lib/autoprefix.js","webpack:///./node_modules/reactcss/lib/components/active.js","webpack:///./node_modules/reactcss/lib/components/hover.js","webpack:///./node_modules/reactcss/lib/flattenNames.js","webpack:///./node_modules/reactcss/lib/index.js","webpack:///./node_modules/reactcss/lib/loop.js","webpack:///./node_modules/reactcss/lib/mergeClasses.js","webpack:///./node_modules/ultimate-pagination/lib/ultimate-pagination-constants.js","webpack:///./node_modules/ultimate-pagination/lib/ultimate-pagination-item-factories.js","webpack:///./node_modules/ultimate-pagination/lib/ultimate-pagination-utils.js","webpack:///./node_modules/ultimate-pagination/lib/ultimate-pagination.js","webpack:///./node_modules/urijs/src/IPv6.js","webpack:///./node_modules/urijs/src/SecondLevelDomains.js","webpack:///./node_modules/urijs/src/URI.js","webpack:///./node_modules/urijs/src/punycode.js","webpack:///./src/SqlLab/constants.ts","webpack:///./src/SqlLab/utils/sqlKeywords.ts","webpack:///./src/chart/chartAction.js","webpack:///./src/common/hooks/usePrevious/index.ts","webpack:///./src/common/hooks/usePrevious/usePrevious.ts","webpack:///./src/components/Alert/index.tsx","webpack:///./src/components/AsyncAceEditor/index.tsx","webpack:///./src/components/AsyncEsmComponent/index.tsx","webpack:///./src/components/AsyncSelect/index.jsx","webpack:///./src/components/Checkbox/Checkbox.tsx","webpack:///./src/components/Checkbox/CheckboxIcons.tsx","webpack:///./src/components/Checkbox/index.tsx","webpack:///./src/components/DatePicker/index.tsx","webpack:///./src/components/ErrorBoundary/index.jsx","webpack:///./src/components/ErrorMessage/ErrorMessageWithStackTrace.tsx","webpack:///./src/components/FormRow/index.jsx","webpack:///./src/components/Loading/index.tsx","webpack:///./src/components/ModalTrigger/index.jsx","webpack:///./src/components/Pagination/Ellipsis.tsx","webpack:///./src/components/Pagination/Item.tsx","webpack:///./src/components/Pagination/Next.tsx","webpack:///./src/components/Pagination/Prev.tsx","webpack:///./src/components/Pagination/index.tsx","webpack:///./src/components/Popover/index.tsx","webpack:///./src/components/PopoverSection/index.tsx","webpack:///./src/components/Radio/index.tsx","webpack:///./src/components/Slider/index.tsx","webpack:///./src/components/TableView/TableView.tsx","webpack:///./src/components/TableView/index.ts","webpack:///./src/components/Tabs/Tabs.tsx","webpack:///./src/components/Tabs/index.ts","webpack:///./src/components/WarningIconWithTooltip/index.tsx","webpack:///./src/components/dataViewCommon/Pagination.tsx","webpack:///./src/components/dataViewCommon/TableCollection.tsx","webpack:///./src/components/dataViewCommon/index.ts","webpack:///./src/dataMask/actions.ts","webpack:///./src/datasource/ChangeDatasourceModal.tsx","webpack:///./src/datasource/DatasourceModal.tsx","webpack:///./src/explore/components/Control.less?e8c5","webpack:///./src/explore/components/Control.tsx","webpack:///./src/explore/components/ControlRow.tsx","webpack:///./src/explore/components/DndItemType.ts","webpack:///./src/explore/components/ExploreContentPopover.tsx","webpack:///./src/explore/components/controls/AnnotationLayerControl/index.jsx","webpack:///./src/explore/components/controls/BoundsControl.jsx","webpack:///./src/explore/components/controls/CheckboxControl.jsx","webpack:///./src/explore/components/controls/CollectionControl/index.jsx","webpack:///./src/explore/components/controls/ColorMapControl.jsx","webpack:///./src/explore/components/controls/ColorPickerControl.jsx","webpack:///./src/explore/components/controls/ColorSchemeControl.jsx","webpack:///./src/explore/components/controls/CustomListItem/index.tsx","webpack:///./src/explore/components/controls/DatasourceControl/index.jsx","webpack:///./src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx","webpack:///./src/explore/components/controls/DateFilterControl/components/AdvancedFrame.tsx","webpack:///./src/explore/components/controls/DateFilterControl/components/CalendarFrame.tsx","webpack:///./src/explore/components/controls/DateFilterControl/components/CommonFrame.tsx","webpack:///./src/explore/components/controls/DateFilterControl/components/CustomFrame.tsx","webpack:///./src/explore/components/controls/DateFilterControl/components/DateFunctionTooltip.tsx","webpack:///./src/explore/components/controls/DateFilterControl/components/index.ts","webpack:///./src/explore/components/controls/DateFilterControl/index.ts","webpack:///./src/explore/components/controls/DateFilterControl/types.ts","webpack:///./src/explore/components/controls/DateFilterControl/utils/constants.ts","webpack:///./src/explore/components/controls/DateFilterControl/utils/dateFilterUtils.ts","webpack:///./src/explore/components/controls/DateFilterControl/utils/dateParser.ts","webpack:///./src/explore/components/controls/DateFilterControl/utils/index.ts","webpack:///./src/explore/components/controls/DndColumnSelectControl/DndColumnSelect.tsx","webpack:///./src/explore/components/controls/DndColumnSelectControl/DndFilterSelect.tsx","webpack:///./src/explore/components/controls/DndColumnSelectControl/DndMetricSelect.tsx","webpack:///./src/explore/components/controls/DndColumnSelectControl/DndSelectLabel.tsx","webpack:///./src/explore/components/controls/DndColumnSelectControl/Option.tsx","webpack:///./src/explore/components/controls/DndColumnSelectControl/OptionWrapper.tsx","webpack:///./src/explore/components/controls/DndColumnSelectControl/index.ts","webpack:///./src/explore/components/controls/DndColumnSelectControl/utils/index.ts","webpack:///./src/explore/components/controls/DndColumnSelectControl/utils/optionSelector.ts","webpack:///./src/explore/components/controls/FilterBoxItemControl/index.jsx","webpack:///./src/explore/components/controls/FilterControl/AdhocFilter/index.js","webpack:///./src/explore/components/controls/FilterControl/AdhocFilterControl/index.jsx","webpack:///./src/explore/components/controls/FilterControl/AdhocFilterEditPopover/index.jsx","webpack:///./src/explore/components/controls/FilterControl/AdhocFilterEditPopoverSimpleTabContent/index.jsx","webpack:///./src/explore/components/controls/FilterControl/AdhocFilterEditPopoverSqlTabContent/index.jsx","webpack:///./src/explore/components/controls/FilterControl/AdhocFilterOption/index.jsx","webpack:///./src/explore/components/controls/FilterControl/AdhocFilterPopoverTrigger/index.tsx","webpack:///./src/explore/components/controls/FilterControl/adhocFilterType.js","webpack:///./src/explore/components/controls/FilterControl/columnType.js","webpack:///./src/explore/components/controls/FixedOrMetricControl/index.jsx","webpack:///./src/explore/components/controls/HiddenControl.jsx","webpack:///./src/explore/components/controls/MetricControl/AdhocMetric.js","webpack:///./src/explore/components/controls/MetricControl/AdhocMetricEditPopover/index.jsx","webpack:///./src/explore/components/controls/MetricControl/AdhocMetricEditPopoverTitle.jsx","webpack:///./src/explore/components/controls/MetricControl/AdhocMetricOption.jsx","webpack:///./src/explore/components/controls/MetricControl/AdhocMetricPopoverTrigger.tsx","webpack:///./src/explore/components/controls/MetricControl/AggregateOption.jsx","webpack:///./src/explore/components/controls/MetricControl/FilterDefinitionOption.jsx","webpack:///./src/explore/components/controls/MetricControl/MetricDefinitionOption.jsx","webpack:///./src/explore/components/controls/MetricControl/MetricDefinitionValue.jsx","webpack:///./src/explore/components/controls/MetricControl/MetricsControl.jsx","webpack:///./src/explore/components/controls/MetricControl/adhocMetricType.js","webpack:///./src/explore/components/controls/MetricControl/aggregateOptionType.js","webpack:///./src/explore/components/controls/MetricControl/columnType.js","webpack:///./src/explore/components/controls/MetricControl/savedMetricType.js","webpack:///./src/explore/components/controls/OptionControls/index.tsx","webpack:///./src/explore/components/controls/SelectAsyncControl/index.jsx","webpack:///./src/explore/components/controls/SelectControl.jsx","webpack:///./src/explore/components/controls/SliderControl.jsx","webpack:///./src/explore/components/controls/SpatialControl.jsx","webpack:///./src/explore/components/controls/TextAreaControl.jsx","webpack:///./src/explore/components/controls/TextControl/index.tsx","webpack:///./src/explore/components/controls/TimeSeriesColumnControl/index.jsx","webpack:///./src/explore/components/controls/ViewportControl.jsx","webpack:///./src/explore/components/controls/index.js","webpack:///./src/explore/components/optionRenderers.tsx","webpack:///./src/explore/constants.ts","webpack:///./src/explore/controlPanels/sections.tsx","webpack:///./src/explore/controlUtils/getControlConfig.ts","webpack:///./src/explore/controlUtils/getControlState.ts","webpack:///./src/explore/controlUtils/getFormDataFromControls.ts","webpack:///./src/explore/controlUtils/getSectionsToRender.ts","webpack:///./src/explore/controlUtils/index.ts","webpack:///./src/explore/controls.jsx","webpack:///./src/explore/exploreUtils/index.js","webpack:///./src/explore/store.js","webpack:///./src/logger/LogUtils.ts","webpack:///./src/logger/actions/index.ts","webpack:///./src/middleware/asyncEvent.ts","webpack:///./src/modules/AnnotationTypes.js","webpack:///./src/utils/hostNamesConfig.js","webpack:///./src/utils/safeStringify.ts","webpack:///./src/utils/testUtils.ts","webpack:///./src/utils/textUtils.ts","webpack:///./src/views/CRUD/hooks.ts","webpack:///./src/views/CRUD/utils.tsx","webpack:///./src/visualizations/FilterBox/FilterBox.jsx","webpack:///./src/visualizations/FilterBox/FilterBox.less?2e95"],"names":["CHART_UPDATE_STARTED","chartUpdateStarted","queryController","latestQueryFormData","key","type","CHART_UPDATE_SUCCEEDED","chartUpdateSucceeded","queriesResponse","CHART_UPDATE_STOPPED","chartUpdateStopped","CHART_UPDATE_FAILED","chartUpdateFailed","CHART_RENDERING_FAILED","chartRenderingFailed","error","stackTrace","CHART_RENDERING_SUCCEEDED","chartRenderingSucceeded","REMOVE_CHART","removeChart","ANNOTATION_QUERY_SUCCESS","annotationQuerySuccess","annotation","queryResponse","ANNOTATION_QUERY_STARTED","annotationQueryStarted","ANNOTATION_QUERY_FAILED","annotationQueryFailed","DYNAMIC_PLUGIN_CONTROLS_READY","dynamicPluginControlsReady","dispatch","getState","state","controlsState","getControlsState","explore","form_data","slice_id","value","legacyChartDataRequest","formData","resultFormat","resultType","force","method","requestParams","endpointType","getLegacyEndpointType","allowDomainSharding","domainShardingEnabled","dashboard_id","url","getExploreUrl","querySettings","postPayload","clientMethod","isFeatureEnabled","FeatureFlag","CLIENT_CACHE","SupersetClient","get","post","then","json","result","v1ChartDataRequest","setDataMask","ownState","payload","buildV1ChartDataPayload","sliceId","dashboardId","qs","undefined","getChartDataUri","path","toString","headers","body","getChartDataRequest","mode","credentials","shouldUseLegacyApi","runAnnotationQuery","timeout","isDashboardRequest","sliceKey","charts","fd","requiresQuery","sourceType","resolve","granularity","time_grain_sqla","overridesKeys","overrides","time_range","sliceFormData","d","k","hasExtraFilters","extra_filters","length","isNative","ANNOTATION_SOURCE_TYPES","NATIVE","getAnnotationJsonUrl","controller","AbortController","signal","catch","response","getClientErrorObject","err","statusText","toLowerCase","TRIGGER_QUERY","triggerQuery","RENDER_TRIGGERED","renderTriggered","UPDATE_QUERY_FORM_DATA","updateQueryFormData","UPDATE_CHART_ID","updateChartId","newId","ADD_CHART","addChart","chart","exploreJSON","logStart","Logger","getTimestamp","dataMask","updateDataMask","chartDataRequest","chartDataRequestCaught","GLOBAL_ASYNC_QUERIES","waitForAsyncData","resultItem","logEvent","LOG_ACTIONS_LOAD_CHART","applied_filters","is_cached","force_refresh","row_count","rowcount","datasource","start_offset","ts","Date","getTime","duration","has_extra_filters","viz_type","data_age","moment","diff","utc","cached_dttm","appendErrorLog","errorDetails","isCached","has_err","error_details","name","parsedResponse","annotationLayers","annotation_layers","all","x","GET_SAVED_CHART","getSavedChart","POST_CHART_FORM_DATA","postChartFormData","redirectSQLLab","redirectUrl","datasourceKey","sql","query","postForm","addDangerToast","t","refreshChart","chartKey","dashboardInfo","common","conf","SUPERSET_WEBSERVER_TIMEOUT","id","propTypes","dataEndpoint","PropTypes","string","isRequired","onChange","func","mutator","onAsyncError","oneOfType","number","arrayOf","valueRenderer","placeholder","autoSelect","bool","defaultProps","AsyncSelect","React","PureComponent","constructor","props","isLoading","options","componentDidMount","fetchOptions","option","setState","endpoint","render","children","node","onError","showMessage","ErrorBoundary","Component","info","componentDidCatch","firstLine","message","componentStack","STYLE_ROW","marginTop","minHeight","STYLE_RALIGN","textAlign","label","tooltip","control","isCheckbox","FormRow","labelAndTooltip","dialogClassName","triggerNode","modalTitle","modalBody","modalFooter","beforeOpen","onExit","isButton","className","width","maxWidth","responsive","ModalTrigger","showModal","open","close","e","preventDefault","renderModal","AnnotationLayer","AsyncEsmComponent","height","colorScheme","annotationError","object","annotationQuery","vizType","validationErrors","array","actions","refreshAnnotationData","AnnotationLayerControl","popoverVisible","addedAnnotationIndex","popoverClear","addAnnotationLayer","removeAnnotationLayer","handleVisibleChange","handlePopoverClear","preload","UNSAFE_componentWillReceiveProps","nextProps","setControlValue","originalAnnotation","newAnnotation","annotations","anno","visible","popoverKey","prevState","renderPopover","renderInfo","color","show","addedAnnotation","i","theme","cursor","backgroundColor","colors","grayscale","light4","float","addLayerPopoverKey","borderRadius","gridUnit","mapStateToProps","getChartKey","controls","color_scheme","mapDispatchToProps","annotationLayer","themedAnnotationLayerControl","withTheme","connect","StyledDiv","styled","div","MinInput","InputNumber","MaxInput","BoundsControl","minMax","onMinChange","onMaxChange","update","componentDidUpdate","prevProps","mm","min","max","checkboxStyle","paddingRight","CheckboxControl","renderCheckbox","description","addTooltip","itemGenerator","keyAccessor","isFloat","isInt","controlName","shortid","generate","o","SortableListItem","SortableElement","CustomListItem","SortableList","SortableContainer","List","SortableDragger","SortableHandle","CollectionControl","onAdd","onSortEnd","oldIndex","newIndex","arrayMove","removeItem","ix","renderList","Control","controlMap","commonProps","flex","marginLeft","marginRight","light5","colorNamespace","ColorMapControl","CategoricalColorNamespace","getScale","setColor","swatchCommon","position","top","left","right","bottom","styles","swatch","padding","display","boxShadow","checkboard","background","ColorPickerControl","col","rgb","presetColors","getCategoricalSchemeRegistry","s","c","r","g","b","a","colStyle","labelMargin","clearable","default","choices","schemes","isLinear","ColorSchemeControl","renderOption","optionValue","currentScheme","getColors","border","selectProps","multi","autosize","optionRenderer","isEditable","onDatasourceSave","Styles","light2","primary","base","light3","CHANGE_DATASET","VIEW_IN_SQL_LAB","EDIT_DATASET","DatasourceControl","showEditDatasourceModal","showChangeDatasourceModal","toggleChangeDatasourceModal","toggleEditDatasourceModal","toggleShowDatasource","handleMenuItemClick","setDatasource","showDatasource","isMissingDatasource","isSqlSupported","datasourceMenu","health_check_message","healthCheckMessage","extra","JSON","parse","supersetTheme","warning","warning_markdown","INTEGRAL_TYPES","DECIMAL_TYPES","asc","multiple","column","metric","searchAllOptions","defaultValue","STYLE_WIDTH","FilterBoxItemControl","onControlChange","attr","typedValue","selectedColumnName","FILTER_CONFIG_ATTRIBUTES","DEFAULT_VALUE","selectedColumn","columns","column_name","toUpperCase","has","Number","setType","textSummary","renderForm","v","metrics","m","metric_name","MULTIPLE","SEARCH_ALL_OPTIONS","EXPRESSION_TYPES","SIMPLE","SQL","CLAUSES","HAVING","WHERE","OPERATORS_TO_SQL","IN","LIKE","ILIKE","REGEX","schema","datasource_name","translateToSql","adhocMetric","useSimple","expressionType","subject","comparator","operator","CUSTOM_OPERATORS","getSimpleSQLExpression","sqlExpression","AdhocFilter","adhocFilter","clause","isExtra","isNew","filterOptionName","Math","random","substring","duplicateWith","nextFields","equals","isValid","OPERATORS","getDefaultLabel","getTooltipTitle","selectedMetricType","adhocMetricType","adhocFilterType","columnType","savedMetrics","savedMetricType","selectedMetrics","isDictionaryForAdhocFilter","AdhocFilterControl","optionsForSelect","onRemoveFilter","onNewFilter","onFilterEdit","moveLabel","mapOption","getMetricExpression","filters","filter","index","partitionColumn","values","dbId","database","is_sqllab_view","isSqllabView","partitions","cols","logging","valuesCopy","newFilter","mappedOption","changedFilter","opts","savedMetricName","savedMetric","expression","dragIndex","hoverIndex","newValues","saved_metric_name","AdhocMetric","ensureIsArray","results","push","localeCompare","addNewFilterPopoverTrigger","trigger","light1","instanceOf","onClose","onResize","shape","ResizeIcon","startingWidth","startingHeight","FilterPopoverContentContainer","typography","sizes","xs","AdhocFilterEditPopover","onSave","onDragDown","onMouseMove","onMouseUp","onAdhocFilterChange","adjustHeight","onTabChange","activeKey","popoverContentRef","createRef","document","addEventListener","componentWillUnmount","removeEventListener","dragStartX","clientX","dragStartY","clientY","dragStartWidth","dragStartHeight","heightDifference","propsAdhocFilter","popoverProps","stateIsValid","hasUnsavedChanges","current","SelectWithLabel","Select","labelText","onHeightChange","popoverRef","translateOperator","AdhocFilterEditPopoverSimpleTabContent","onSubjectChange","onOperatorChange","onComparatorChange","onInputComparatorChange","isOperatorRelevant","refreshComparatorSuggestions","clearSuggestionSearch","suggestions","abortActiveRequest","currentSuggestionSearch","showSearch","UNSAFE_componentWillMount","optionName","currentComparator","newComparator","MULTI_OPERATORS","element","event","target","having","filter_select","abort","loading","isColumnBoolean","isColumnNumber","isColumnFunction","TABLE_ONLY_OPERATORS","DRUID_ONLY_OPERATORS","HAVING_OPERATORS","focusComparator","ref","shouldFocus","focus","optionsRemaining","valuesFromSuggestionsLength","createSuggestionsPlaceholder","renderSubjectOptionLabel","subjectSelectProps","notFoundContent","filterOption","input","filterBy","autoFocus","operatorSelectProps","OPERATORS_OPTIONS","op","comparatorSelectProps","allowClear","tokenSeparators","disabled","DISABLE_INPUT_OPERATORS","Icon","Icons","StopOutlined","CheckOutlined","marginBottom","parentNode","val","suggestion","AdhocFilterEditPopoverSqlTabContent","onSqlExpressionChange","onSqlExpressionClauseChange","handleAceEditorRef","aceEditorRef","editor","resize","clauseSelectProps","keywords","sqlKeywords","score","meta","Boolean","$blockScrolling","onMoveLabel","onDropLabel","AdhocFilterOption","DndItemType","FilterOption","oneOf","controlTypes","fixed","FixedOrMetricControl","setFixedValue","setMetric","fixedValue","metricValue","css","HiddenControl","inferSqlExpressionColumn","sqlaAutoGeneratedMetricRegex","test","indexFirstCloseParen","indexPairedOpenParen","inferSqlExpressionAggregate","indexFirstOpenParen","inferredColumn","aggregate","hasCustomLabel","getCurrentTab","getCurrentLabel","savedMetricsOptions","datasourceType","noOp","StyledSelect","SAVED_TAB_KEY","AdhocMetricEditPopover","defaultActiveTabKey","onResetStateAndClose","onColumnChange","onAggregateChange","onSavedMetricChange","refreshAceEditor","savedMetricLabel","verbose_name","adhocMetricLabel","oldMetric","columnId","savedMetricId","tab","renderColumnOption","propsAdhocMetric","propsSavedMetric","columnValue","columnSelectProps","aggregateSelectProps","AGGREGATES_OPTIONS","savedSelectProps","title","isEditDisabled","AdhocMetricEditPopoverTitle","onMouseOver","onMouseOut","onClick","onBlur","onInputBlur","isHovered","isEditMode","defaultLabel","onMetricEdit","onRemoveMetric","AdhocMetricOption","stopPropagation","aggregateOptionType","showType","AggregateOption","aggregate_name","FilterDefinitionOption","addWarningToast","MetricDefinitionOption","withToasts","MetricDefinitionValue","getSavedMetricByName","metricName","metricOptionProps","getOptionsForSavedMetrics","currentMetricValues","currentMetric","isDictionaryForAdhocMetric","columnsContainAllMetrics","columnNames","coerceAdhocMetrics","MetricsControl","onNewMetric","checkIfAggregateInInput","selectFilterOption","isAutoGeneratedMetric","select","selectRef","aggregateInInput","newMetric","changedMetric","transformedOpts","optionValues","isAddNewMetricDisabled","addNewMetricPopoverTrigger","lowercaseInput","clearedAggregateInInput","aggregates","druidAutoGeneratedMetricRegex","sqlaAutoGeneratedMetricNameRegex","data","filterValue","endIndex","valueAfterAggregate","AGGREGATES","onAsyncErrorMessage","SelectAsyncControl","onSelectionChange","errorMsg","freeForm","isMulti","allowAll","onFocus","showHeader","valueKey","noResultsText","promptTextCreator","commaChoosesOption","menuPortalTarget","menuPosition","menuPlacement","forceOverflow","SelectControl","getOptions","createMetaSelectAllOption","getSelectRef","handleKeyDownForCreate","opt","actionMeta","instance","existingOptionValues","selectedValues","unshift","optionsIncludesSelectAll","isMetaSelectAllOption","onKeyDown","remainingOptions","optionRemaingText","assistiveText","ignoreAccents","labelKey","SelectComponent","CreatableSelect","SliderControl","spatialTypes","latlong","delimited","geohash","animation","SpatialControl","defaultCol","delimiter","latCol","lonCol","lonlatCol","reverseCheckbox","geohashCol","errors","toggleCheckbox","renderReverseCheckbox","errMsg","renderLabelContent","renderSelect","renderPopoverContent","minLines","maxLines","offerEditInModal","language","aboveEditorSection","readOnly","TextAreaControl","onAceChangeDebounce","onAceChange","FAST_DEBOUNCE","renderEditor","inModal","style","renderModalBody","controlHeader","colType","timeLag","timeRatio","comparisonType","showYAxis","yAxisBounds","bounds","d3format","dateFormat","comparisonTypeOptions","colTypeOptions","StyledRow","Row","StyledCol","Col","StyledTooltip","InfoTooltipWithTrigger","ButtonBar","TimeSeriesColumnControl","resetState","initialState","onPopoverVisibleChange","onSelectChange","onTextInputChange","onCheckboxChange","onBoundsChange","onYAxisBoundsChange","formRow","ttLabel","DEFAULT_VIEWPORT","longitude","latitude","zoom","bearing","pitch","PARAMS","ViewportControl","ctrl","renderTextControl","renderLabel","decimal2sexagesimal","DateFilterControl","DndColumnSelectControl","DndColumnSelect","DndFilterSelect","DndMetricSelect","TextControl","VizTypeControl","sharedControlComponents","categoricalSchemeRegistry","sequentialSchemeRegistry","getSequentialSchemeRegistry","PRIMARY_COLOR","D3_FORMAT_OPTIONS","ROW_LIMIT_OPTIONS","SERIES_LIMITS","D3_FORMAT_DOCS","D3_TIME_FORMAT_OPTIONS","timeColumnOption","groupByControl","includeTime","text","newState","groupby","validators","validateNonEmpty","columnChoices","opt1","opt2","color_picker","renderTrigger","metric_2","linear_color_scheme","getDefaultKey","getMap","secondary_metric","druid_time_origin","TIME_FILTER_LABELS","granularity_sqla","main_dttm_col","endpoints","time_range_endpoints","row_limit","legacyValidateInteger","formatSelectOptions","limit","timeseries_limit_metric","series","entity","y","size","y_axis_format","showWarning","comparison_type","adhoc_filters","filterable","label_colors","color_namespace","MAX_URL_LENGTH","slice","requestCounter","getHostName","currentIndex","availableDomains","uri","URI","window","location","search","pathname","safeStringify","getURIDirectory","getExploreLongUrl","allowOverflow","extraSearch","directory","URL_PARAMS","standalone","DashboardStandaloneMode","HIDE_NAV","minimalFormData","URL_IS_TOO_LONG_TO_SHARE","protocol","hostname","port","curUrl","csv","samples","paramNames","hasOwnProperty","vizMetadata","getChartMetadataRegistry","useLegacyApi","buildQuery","getChartBuildQueryRegistry","buildQueryformData","buildQueryContext","baseQueryObject","result_format","result_type","hooks","hiddenForm","createElement","action","token","getElementById","appendChild","submit","removeChild","exportChart","exploreChart","useDebouncedEffect","effect","delay","deps","callback","useCallback","useEffect","handler","clearTimeout","firstValue","comparatorArray","isString","quote","prefix","suffix","formattedComparators","String","replace","join","handleDeprecatedControls","y_axis_zero","y_axis_bounds","inputFormData","DEFAULT_VIZ_TYPE","getAllControlsState","controlPanelConfig","getChartControlPanelRegistry","onInit","applyDefaultFormData","split","controlFormData","getFormDataFromControls","defaultControls","f","defaultState","extractTypes","metadata","prev","ANNOTATION_TYPES_METADATA","FORMULA","EVENT","supportNativeSource","INTERVAL","TIME_SERIES","ANNOTATION_TYPES","DEFAULT_ANNOTATION_TYPE","ANNOTATION_SOURCE_TYPES_METADATA","annotationSourceType","NATIVE_COLUMN_NAMES","timeColumn","intervalEndColumn","titleColumn","descriptionColumns","applyNativeColumns","getDomainsConfig","appContainer","bootstrapData","getAttribute","initFeatureFlags","feature_flags","ALLOW_DASHBOARD_DOMAIN_SHARDING","SUPERSET_WEBSERVER_DOMAINS","hostName","add","allowCrossDomain","TIME_RANGE","TIME_FILTER_MAP","chartId","origSelectedValues","instantFiltering","filtersFields","field","filtersChoices","objectOf","onFilterMenuOpen","onFilterMenuClose","showDateFilter","showSqlaTimeGrain","showSqlaTimeColumn","showDruidTimeGrain","showDruidTimeOrigin","FilterBox","onCloseDateFilterControl","hasChanged","debouncerCache","maxValueCache","changeFilter","onOpenDateFilterControl","getControlData","mapFunc","getKnownMax","d3Max","clickApply","fltr","vals","debounceLoadOptions","loadOptions","SLOW_DEBOUNCE","transformOptions","maxValue","perc","round","backgroundImage","BOOL_TRUE_DISPLAY","BOOL_FALSE_DISPLAY","inputValue","sortAsc","rawFormData","labelA","labelB","textOrder","renderDateFilter","newValue","renderDatasourceFilters","datasourceFilters","sqlaFilters","druidFilters","filterConfig","choiceIds","selectedValuesForKey","isMultiple","CLEARABLE","isClearable","FILTER_OPTIONS_LIMIT","AsyncCreatableSelect","renderFilters","overflow"],"mappings":";;;;;;;;;AAAA,iBAAiB,mBAAO,CAAC,wFAAgC,E;;;;;;;;;;;ACAzD,iBAAiB,mBAAO,CAAC,wGAAwC,E;;;;;;;;;;;ACAjE,iBAAiB,mBAAO,CAAC,8FAAmC,E;;;;;;;;;;;ACA5D,iBAAiB,mBAAO,CAAC,gHAA4C,E;;;;;;;;;;;ACArE,iBAAiB,mBAAO,CAAC,8FAAmC,E;;;;;;;;;;;ACA5D,iBAAiB,mBAAO,CAAC,kGAAqC,E;;;;;;;;;;;ACA9D,iBAAiB,mBAAO,CAAC,4GAA0C,E;;;;;;;;;;;ACAnE,iBAAiB,mBAAO,CAAC,kGAAqC,E;;;;;;;;;;;ACA9D,iBAAiB,mBAAO,CAAC,sFAA+B,E;;;;;;;;;;;ACAxD,iBAAiB,mBAAO,CAAC,0FAAiC,E;;;;;;;;;;;ACA1D,iBAAiB,mBAAO,CAAC,wFAAgC,E;;;;;;;;;;;;ACAzD;AAAA;AAAA;AAAgC;AAChC;;AAEA,mBAAmB;AACnB;;AAEA;AACA,wBAAwB,4CAAO;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;;;AAGO;AACP;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,EAAE,oDAAO;AACT,CAAC;AACD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,CAAC,G;;;;;;;;;;;;AClED;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA,eAAe;AACf;AACA;;AAEA,qBAAqB;AACrB;AACA;;AAEA,iBAAiB;AACjB;AACA;;AAEA,cAAc;AACd;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,kBAAkB;AAC5E;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA,qFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;;;AAGA,oCAAoC;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;;AAGA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;AC/MA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qDAAqD;AACrD,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA,0BAA0B;;AAE1B;AACA;AACA;;AAEqB;AACrB;;;;;;;;;;;;;ACzCA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mEAAmE;;AAEn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B;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,oEAAoE,WAAW,cAAc,EAAE;AAC/F,iBAAiB;;AAEjB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;;AAGT;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,sEAAsE;AACtE;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa;;AAEb;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mDAAmD;;AAEnD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB;;AAEA,SAAS;;;AAGT;AACA;AACA;AACA;AACA,8CAA8C;AAC9C,4CAA4C;AAC5C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;;;AAGT;AACA;AACA;AACA,2DAA2D,oCAAoC,GAAG,yCAAyC;AAC3I,qCAAqC;AACrC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;;;AAGT;AACA;AACA,6DAA6D,qCAAqC,GAAG,8BAA8B;AACnI,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,8CAA8C,OAAO;;AAErD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,oCAAoC,GAAG,yCAAyC;AAC3I,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;;AAGT;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,6DAA6D,qCAAqC,GAAG,8BAA8B;AACnI;AACA;AACA;;AAEA,oEAAoE,SAAS;;AAE7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,SAAS;;;AAGT;AACA;AACA;AACA;AACA,6DAA6D,qCAAqC,GAAG,8BAA8B;AACnI;AACA;;AAEA,+CAA+C,mBAAmB;;AAElE;;AAEA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,yDAAyD,qCAAqC,GAAG,8BAA8B;AAC/H;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+CAA+C,mBAAmB;;AAElE;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA,+DAA+D,qCAAqC;AACpG,6EAA6E,qCAAqC;AAClH;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,qCAAqC;AAClG;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,SAAS;;;AAGT;AACA;AACA;AACA,6DAA6D,qCAAqC;AAClG;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;;;AAGT;AACA;AACA;AACA,6DAA6D,qCAAqC;AAClG;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;;AAEA;AACA;;AAEA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA;AACA;AACA,+DAA+D;AAC/D,kEAAkE,qCAAqC,GAAG,8BAA8B;AACxI;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb,SAAS;;AAET;AACA;AACA;AACA,+CAA+C;AAC/C,6CAA6C;AAC7C,2CAA2C;AAC3C;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA,+CAA+C;AAC/C,6CAA6C;AAC7C,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA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AAkB,mBAAO,CAAC,6DAAgB;AAC1C,oBAAoB,mBAAO,CAAC,iEAAkB;AAC9C,iBAAiB,mBAAO,CAAC,2DAAe;AACxC,mBAAmB,mBAAO,CAAC,+DAAiB;AAC5C,aAAa,mBAAO,CAAC,mDAAW;AAChC,qBAAqB,mBAAO,CAAC,mEAAmB;AAChD,qBAAqB,mBAAO,CAAC,mEAAmB;AAChD,sBAAsB,mBAAO,CAAC,qEAAoB;AAClD,cAAc,mBAAO,CAAC,mDAAW;AACjC,eAAe,mBAAO,CAAC,qDAAY;AACnC,YAAY,mBAAO,CAAC,+CAAS;AAC7B,eAAe,mBAAO,CAAC,qDAAY;AACnC,YAAY,mBAAO,CAAC,+CAAS;AAC7B,WAAW,mBAAO,CAAC,6CAAQ;AAC3B,aAAa,mBAAO,CAAC,iDAAU;;AAE/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;;;;;;;;;;;ACrKA,iBAAiB,mBAAO,CAAC,2DAAe;AACxC,qBAAqB,mBAAO,CAAC,mEAAmB;;AAEhD;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB,aAAa,aAAa;AAC1B;AACA;;AAEA;;;;;;;;;;;;ACbA,aAAa,mBAAO,CAAC,mDAAW;AAChC,mBAAmB,mBAAO,CAAC,6DAAgB;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACjBA,aAAa,mBAAO,CAAC,mDAAW;AAChC,mBAAmB,mBAAO,CAAC,6DAAgB;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACjBA,eAAe,mBAAO,CAAC,uDAAa;AACpC,kBAAkB,mBAAO,CAAC,2DAAe;;AAEzC;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;;;;;;;;;;;ACrBA,eAAe,mBAAO,CAAC,qDAAY;;AAEnC;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACbA,uBAAuB,mBAAO,CAAC,uEAAqB;;AAEpD;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACfA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AChBA,aAAa,mBAAO,CAAC,mDAAW;;AAEhC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACjBA,iBAAiB,mBAAO,CAAC,2DAAe;AACxC,iBAAiB,mBAAO,CAAC,2DAAe;;AAExC;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,WAAW;AAC7B,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACfA,iBAAiB,mBAAO,CAAC,2DAAe;AACxC,mBAAmB,mBAAO,CAAC,+DAAiB;;AAE5C;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,WAAW;AAC7B,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACfA,kBAAkB,mBAAO,CAAC,2DAAe;;AAEzC;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC/BA,qBAAqB,mBAAO,CAAC,mEAAmB;AAChD,mBAAmB,mBAAO,CAAC,+DAAiB;AAC5C,aAAa,mBAAO,CAAC,iDAAU;;AAE/B;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AChBA,gBAAgB,mBAAO,CAAC,yDAAc;AACtC,mBAAmB,mBAAO,CAAC,+DAAiB;AAC5C,iBAAiB,mBAAO,CAAC,2DAAe;AACxC,gBAAgB,mBAAO,CAAC,uDAAa;;AAErC;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACxBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACzBA,uBAAuB,mBAAO,CAAC,uEAAqB;AACpD,oBAAoB,mBAAO,CAAC,iEAAkB;AAC9C,kBAAkB,mBAAO,CAAC,6DAAgB;AAC1C,kBAAkB,mBAAO,CAAC,6DAAgB;AAC1C,sBAAsB,mBAAO,CAAC,qEAAoB;;AAElD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC5EA,gBAAgB,mBAAO,CAAC,yDAAc;;AAEtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,EAAE;AACf;AACA;AACA;AACA,mBAAmB,SAAS,GAAG,SAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC5BA,iBAAiB,mBAAO,CAAC,mDAAW;;;;;;;;;;;;ACApC,gBAAgB,mBAAO,CAAC,yDAAc;AACtC,eAAe,mBAAO,CAAC,uDAAa;AACpC,mBAAmB,mBAAO,CAAC,+DAAiB;AAC5C,cAAc,mBAAO,CAAC,mDAAW;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,cAAc,iBAAiB;AAC/B;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACxCA,iBAAiB,mBAAO,CAAC,2DAAe;AACxC,mBAAmB,mBAAO,CAAC,+DAAiB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACnCA,eAAe,mBAAO,CAAC,uDAAa;AACpC,aAAa,mBAAO,CAAC,mDAAW;AAChC,kBAAkB,mBAAO,CAAC,2DAAe;AACzC,cAAc,mBAAO,CAAC,mDAAW;AACjC,kBAAkB,mBAAO,CAAC,2DAAe;AACzC,eAAe,mBAAO,CAAC,qDAAY;AACnC,kBAAkB,mBAAO,CAAC,6DAAgB;AAC1C,mBAAmB,mBAAO,CAAC,6DAAgB;;AAE3C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC5EA,gBAAgB,mBAAO,CAAC,uDAAa;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AChCA,gBAAgB,mBAAO,CAAC,yDAAc;AACtC,gBAAgB,mBAAO,CAAC,yDAAc;AACtC,eAAe,mBAAO,CAAC,uDAAa;;AAEpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC1BA,gBAAgB,mBAAO,CAAC,yDAAc;AACtC,gBAAgB,mBAAO,CAAC,yDAAc;AACtC,eAAe,mBAAO,CAAC,uDAAa;;AAEpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC1BA,iBAAiB,mBAAO,CAAC,2DAAe;AACxC,cAAc,mBAAO,CAAC,mDAAW;AACjC,mBAAmB,mBAAO,CAAC,6DAAgB;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC7BA,eAAe,mBAAO,CAAC,uDAAa;AACpC,mBAAmB,mBAAO,CAAC,+DAAiB;AAC5C,cAAc,mBAAO,CAAC,qDAAY;AAClC,cAAc,mBAAO,CAAC,mDAAW;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA,MAAM,mBAAmB;AACzB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACpDA,eAAe,mBAAO,CAAC,qDAAY;AACnC,eAAe,mBAAO,CAAC,qDAAY;;AAEnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO,YAAY;AAC9B,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,oBAAoB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;;;;;ACpEA,eAAe,mBAAO,CAAC,qDAAY;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;ACnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,WAAW;AACX,YAAY;AACZ,cAAc;AACd,kBAAkB;AAClB,cAAc;AACd,YAAY;AACZ,iBAAiB;AACjB,YAAY;AACZ,YAAY;AACZ,aAAa;AACb,kBAAkB;AAClB,YAAY;AACZ,cAAc;AACd,aAAa;AACb,cAAc;AACd,kBAAkB;AAClB,aAAa;AACb,YAAY;AACZ,gBAAgB;AAChB,gBAAgB;AAChB,iBAAiB;AACjB,iBAAiB;AACjB,kBAAkB;AAClB;AACA;;AAEQ;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;ACpDW;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,mDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,oBAAoB,mBAAO,CAAC,uFAAgB;;AAE5C;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,KAAK,+DAA+D;AACpE,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sD;;;;;;;;;;;;ACzEa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,qCAAqC;;AAE3C,+CAA+C,uBAAuB;AACtE;;AAEA,+B;;;;;;;;;;;;ACzCa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,aAAa,mBAAO,CAAC,4EAAqB;;AAE1C;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,qBAAqB,mBAAO,CAAC,yFAAiB;;AAE9C;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,uCAAuC;;AAE7C;AACA;AACA,KAAK,6DAA6D;AAClE,0CAA0C,yBAAyB;AACnE;AACA;AACA,OAAO,qBAAqB;AAC5B,wEAAwE,8BAA8B;AACtG;AACA;AACA,SAAS,sBAAsB;AAC/B;AACA;AACA;AACA;AACA;AACA,OAAO,qBAAqB;AAC5B,8DAA8D,sEAAsE;AACpI;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gD;;;;;;;;;;;;ACjJa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,WAAW,mBAAO,CAAC,gDAAY;;AAE/B;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,KAAK,yBAAyB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,0CAA0C,sBAAsB;AAChE;AACA;;AAEA,gC;;;;;;;;;;;;AClEa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,oBAAoB,mBAAO,CAAC,wFAAgB;;AAE5C;;AAEA,qBAAqB,mBAAO,CAAC,0FAAiB;;AAE9C;;AAEA,2BAA2B,mBAAO,CAAC,sGAAuB;;AAE1D;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,6BAA6B;;AAEnC;AACA;AACA,KAAK,gEAAgE;AACrE;AACA;AACA,OAAO,2BAA2B;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,qBAAqB;AAC5B;AACA;AACA,SAAS,mDAAmD;AAC5D;AACA;AACA,WAAW,sBAAsB;AACjC;AACA;AACA,aAAa,uBAAuB;AACpC,kDAAkD,uBAAuB;AACzE,+DAA+D,uBAAuB;AACtF;AACA;AACA;AACA;AACA,WAAW,wBAAwB;AACnC;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iD;;;;;;;;;;;;AC3Ma;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,aAAa,mBAAO,CAAC,4EAAqB;;AAE1C;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH,EAAE;;AAE9e;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,mEAAmE,aAAa;AAChF;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,wBAAwB,cAAc;AACtC,OAAO;AACP,wBAAwB,cAAc;AACtC,OAAO;AACP;AACA,0BAA0B,cAAc;AACxC,SAAS;AACT,0BAA0B,cAAc;AACxC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC,OAAO;AACP,uBAAuB,cAAc;AACrC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,WAAW,iDAAiD;AAC5D;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA,aAAa;AACb;AACA;AACA,OAAO;AACP;AACA;AACA,WAAW,iDAAiD;AAC5D;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,OAAO;AACP;AACA;AACA,WAAW,iDAAiD;AAC5D;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,sBAAsB,2CAA2C;AACjE;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,SAAS,+CAA+C;AACxD;AACA;AACA;AACA,WAAW,uBAAuB;AAClC;AACA;AACA,aAA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;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,+FAA+F;;AAErG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,KAAK;AACL,0CAA0C,oBAAoB;AAC9D;AACA;;AAEA,+B;;;;;;;;;;;;AClFa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,KAAK,iDAAiD;AACtD,0CAA0C,uBAAuB;AACjE;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,gC;;;;;;;;;;;;ACpIa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,WAAW,mBAAO,CAAC,gDAAY;;AAE/B;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,oBAAoB,mBAAO,CAAC,wFAAgB;;AAE5C;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,qBAAqB,0BAA0B;AAC/C;;AAEA;AACA;AACA,KAAK,8DAA8D;AACnE,0CAA0C,+BAA+B;AACzE,0CAA0C,yBAAyB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iD;;;;;;;;;;;;AC5Ja;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG,GAAG,eAAe;;AAErB;AACA;AACA,KAAK,uBAAuB;AAC5B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,2D;;;;;;;;;;;;ACzDa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,mDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,kBAAkB,mBAAO,CAAC,iFAAc;;AAExC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,qBAAqB,gCAAgC;AACrD;;AAEA;AACA;AACA,KAAK,6DAA6D;AAClE,0DAA0D;AAC1D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oD;;;;;;;;;;;;ACxEa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,qCAAqC;;AAE3C,+CAA+C,uBAAuB;AACtE;;AAEA,gC;;;;;;;;;;;;ACzCa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,aAAa,mBAAO,CAAC,4EAAqB;;AAE1C;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,oEAAoE;AAC3E;AACA,gBAAgB,uEAAuE;AACvF;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS,gDAAgD;AACzD;AACA;AACA,WAAW,sBAAsB;AACjC;AACA,oBAAoB,uEAAuE;AAC3F;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA,oBAAoB,uEAAuE;AAC3F;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA,oBAAoB,uEAAuE;AAC3F;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA,mD;;;;;;;;;;;;AClKa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,uBAAuB,mBAAO,CAAC,iGAAmB;;AAElD;;AAEA,8BAA8B,mBAAO,CAAC,+GAA0B;;AAEhE;;AAEA,wBAAwB,mBAAO,CAAC,mGAAoB;;AAEpD;;AAEA,uBAAuB,mBAAO,CAAC,iGAAmB;;AAElD;;AAEA,yBAAyB,mBAAO,CAAC,qGAAqB;;AAEtD;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,SAAS,mEAAmE;AAC5E;AACA;AACA,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA,WAAW,+CAA+C;AAC1D;AACA;AACA,aAAa,2BAA2B;AACxC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;AACA,eAAe,8CAA8C;AAC7D;AACA;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB,wBAAwB;AACzC,0EAA0E,0DAA0D;AACpI,0EAA0E,gDAAgD;AAC1H;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oD;;;;;;;;;;;;AC3Ma;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,iBAAiB;;AAEvB;AACA;AACA,KAAK,yCAAyC;AAC9C;AACA;AACA;;AAEA,kC;;;;;;;;;;;;ACrDa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,aAAa,mBAAO,CAAC,4EAAqB;;AAE1C;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,KAAK,uBAAuB;AAC5B;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL,0CAA0C,wBAAwB;AAClE;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL,0CAA0C,wBAAwB;AAClE;AACA,cAAc,uEAAuE;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO,6BAA6B;AACpC;AACA;AACA,SAAS,uBAAuB;AAChC;AACA;AACA;AACA;AACA,SAAS,uBAAuB;AAChC;AACA;AACA;AACA;AACA,SAAS,uBAAuB;AAChC;AACA;AACA;AACA;AACA;;AAEA,kC;;;;;;;;;;;;AChMa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,KAAK,wBAAwB;AAC7B;AACA;AACA,OAAO,qBAAqB;AAC5B,4CAA4C,2BAA2B;AACvE;AACA;AACA;AACA,OAAO,sBAAsB;AAC7B,4CAA4C,4BAA4B;AACxE;AACA;AACA;;AAEA,yC;;;;;;;;;;;;AC1Ea;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,+BAA+B;;AAErC,+CAA+C,uBAAuB;AACtE;;AAEA,yC;;;;;;;;;;;;ACxCa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO,sBAAsB;AAC7B;AACA;AACA;AACA;AACA,OAAO,yBAAyB;AAChC,4CAA4C,oBAAoB;AAChE,4CAA4C,wBAAwB;AACpE;AACA;AACA;AACA,OAAO,sBAAsB;AAC7B;AACA;AACA;AACA;;AAEA,oC;;;;;;;;;;;;ACrEa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,oBAAoB,mBAAO,CAAC,wFAAgB;;AAE5C;;AAEA,0BAA0B,mBAAO,CAAC,oGAAsB;;AAExD;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG,GAAG,6BAA6B;;AAEnC;AACA;AACA,KAAK,gEAAgE;AACrE;AACA;AACA,OAAO,2BAA2B;AAClC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,mDAAmD;AAC1D;AACA;AACA,SAAS,wBAAwB;AACjC;AACA;AACA,WAAW,oBAAoB;AAC/B;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS,sBAAsB;AAC/B;AACA,8CAA8C,4BAA4B;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iD;;;;;;;;;;;;ACjMa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,aAAa,mBAAO,CAAC,4EAAqB;;AAE1C;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,6BAA6B;;AAEnC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,KAAK,iDAAiD;AACtD;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA,gBAAgB,2CAA2C;AAC3D;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA,gBAAgB,2CAA2C;AAC3D;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA,gBAAgB,2CAA2C;AAC3D;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA,gBAAgB,2CAA2C;AAC3D;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,sBAAsB;AAC7B;AACA,gBAAgB,2CAA2C;AAC3D;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,+B;;;;;;;;;;;;ACzKa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,mDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,KAAK,iDAAiD;AACtD;AACA,sDAAsD,0BAA0B;AAChF;AACA;AACA;AACA,SAAS,qCAAqC;AAC9C,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,qC;;;;;;;;;;;;AChGa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sBAAsB,mBAAO,CAAC,4FAAkB;;AAEhD;;AAEA,qBAAqB,mBAAO,CAAC,0FAAiB;;AAE9C;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,KAAK,0CAA0C;AAC/C;AACA;AACA,OAAO,oBAAoB;AAC3B;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,yBAAyB;AAChC,+DAA+D,8BAA8B;AAC7F;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iD;;;;;;;;;;;;ACvEa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,+CAA+C,uBAAuB;AACtE;;AAEA,gC;;;;;;;;;;;;AClCa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,2CAA2C;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,+CAA+C,6CAA6C;AAC5F;;AAEA,+B;;;;;;;;;;;;AChEa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,oBAAoB,mBAAO,CAAC,wFAAgB;;AAE5C;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,KAAK,yBAAyB;AAC9B;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO,uBAAuB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,0CAA0C,sBAAsB;AAChE;AACA;;AAEA,iC;;;;;;;;;;;;ACrGa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,WAAW,mBAAO,CAAC,gDAAY;;AAE/B;;AAEA,aAAa,mBAAO,CAAC,4EAAqB;;AAE1C;;AAEA,sBAAsB,mBAAO,CAAC,6EAAiB;;AAE/C;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,qBAAqB,mBAAO,CAAC,4FAAiB;;AAE9C;;AAEA,uCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,KAAK,kEAAkE;AACvE;AACA;AACA;AACA;AACA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,gDAAgD,sBAAsB;AACtE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA,mD;;;;;;;;;;;;ACrHa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,aAAa,mBAAO,CAAC,4EAAqB;;AAE1C;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,KAAK;AACL;AACA;AACA,OAAO,sBAAsB;AAC7B;AACA;AACA,SAAS,SAAS,gCAAgC,wBAAwB;AAC1E,+CAA+C,+DAA+D;AAC9G;AACA;AACA;AACA;;AAEA,gC;;;;;;;;;;;;AC1Ga;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,WAAW,mBAAO,CAAC,gDAAY;;AAE/B;;AAEA,qBAAqB,mBAAO,CAAC,4FAAiB;;AAE9C;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,KAAK,sBAAsB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA,gC;;;;;;;;;;;;AC3Da;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,gBAAgB,mBAAO,CAAC,sDAAU;;AAElC;;AAEA,WAAW,mBAAO,CAAC,gDAAY;;AAE/B;;AAEA,aAAa,mBAAO,CAAC,4EAAqB;;AAE1C;;AAEA,cAAc,mBAAO,CAAC,4EAAW;;AAEjC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,KAAK,+DAA+D;AACpE,0CAA0C,+BAA+B;AACzE,0CAA0C,yBAAyB;AACnE;AACA;AACA,OAAO,qBAAqB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,SAAS,qBAAqB;AAC9B;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,OAAO;AACP,4CAA4C,sBAAsB;AAClE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kD;;;;;;;;;;;;ACtMa;;AAEb;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;ACtDa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;ACpCa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,YAAY,mBAAO,CAAC,kDAAa;;AAEjC;;AAEA,iBAAiB,mBAAO,CAAC,0DAAY;;AAErC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,2BAA2B;AACnC;AACA,QAAQ,2BAA2B;AACnC,QAAQ;AACR,E;;;;;;;;;;;;ACjFa;;AAEb;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;ACxDa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,mDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH,EAAE;;;AAG9e;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,qEAAqE,aAAa;AAClF;AACA;;AAEA,+LAA+L,eAAe;AAC9M,+BAA+B,cAAc;AAC7C,OAAO;AACP,+BAA+B,eAAe;AAC9C,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,qDAAqD;AAChE,8DAA8D;AAC9D;AACA;AACA,KAAK;;AAEL;AACA,GAAG;AACH,E;;;;;;;;;;;;AC5Da;;AAEb;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;ACrCa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,0FAA0B;;AAE/C;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,aAAa,mBAAO,CAAC,0FAA0B;;AAE/C;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,cAAc,mBAAO,CAAC,8FAA4B;;AAElD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,cAAc,mBAAO,CAAC,8FAA4B;;AAElD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,eAAe,mBAAO,CAAC,kGAA8B;;AAErD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,cAAc,mBAAO,CAAC,8FAA4B;;AAElD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,WAAW,mBAAO,CAAC,kFAAsB;;AAEzC;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,gBAAgB,mBAAO,CAAC,sGAAgC;;AAExD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,iBAAiB,mBAAO,CAAC,0GAAkC;;AAE3D;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,cAAc,mBAAO,CAAC,8FAA4B;;AAElD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,cAAc,mBAAO,CAAC,8FAA4B;;AAElD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,gBAAgB,mBAAO,CAAC,sGAAgC;;AAExD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,eAAe,mBAAO,CAAC,kGAA8B;;AAErD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,iBAAiB,mBAAO,CAAC,oGAA+B;;AAExD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,mC;;;;;;;;;;;;ACzIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+B;AACkB;AACjD;AACA;AACA;;AAEO,iBAAiB,mDAAmB;AAC3C;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA,qBAAqB,sEAAqB;AAC1C;AACA,C;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE;;AAE3T,6DAA6D,sEAAsE,8DAA8D,oBAAoB;;AAEpK;AACjD;AACA;AACO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM,sEAAS;;AAEf;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA,MAAM,sEAAS;;AAEf;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC,G;;;;;;;;;;;;ACpJD;AAAA;AAAA;AAAA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE;;AAE3T,6DAA6D,sEAAsE,8DAA8D,oBAAoB;;AAEpK;AACjD;AACO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM,sEAAS;;AAEf;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC,G;;;;;;;;;;;;AC3GD;AAAA;AAAA;AAAA;AAAA;AAAA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE;;AAE3T,6DAA6D,sEAAsE,8DAA8D,oBAAoB;;AAE3J;AACnB;AACgB;AAChD;AACP;AACA;;AAEA;;AAEA,iBAAiB,8EAAkB;AACnC;AACA;;AAEA;;AAEA,YAAY,0DAAK;AACjB;AACA,SAAS;AACT;AACA;;AAEA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA,YAAY,0DAAK;AACjB;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,KAAK;AACL,0BAA0B;;AAE1B;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC;;AAEvC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,yCAAyC;;AAEzC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,cAAc,4EAAY;AAC1B;AACA,GAAG;AACH;AACA;AACA,cAAc,4EAAY;AAC1B;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC,G;;;;;;;;;;;;ACzND;AAAA;AAAA;AAAA;AAAA;AAAA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE;;AAE3T,6DAA6D,sEAAsE,8DAA8D,oBAAoB;;AAE9J;AACG;AACnB;AAChC;AACP;AACA;;AAEA;;AAEA,iBAAiB,8EAAkB;AACnC;AACA;;AAEA;;AAEA,YAAY,0DAAK;AACjB;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,KAAK;AACL,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,cAAc,4EAAY;AAC1B;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC,G;;;;;;;;;;;;AChID;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH,C;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAAA;AAAuC;AACc;;AAErD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA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A0C,0DAA0D,EAAE;;AAEvJ,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE;;AAE3T,6DAA6D,sEAAsE,8DAA8D,oBAAoB;;AAEpK;AACC;AACkG;AACvG;AACtC;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM,sEAAS;AACf,MAAM,sEAAS;AACf;;AAEA;AACA;;AAEA;;AAEA;AACA,yGAAyG,iEAAQ;;AAEjH;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,MAAM,sEAAS;AACf;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,sEAAS;;AAEf;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,sEAAS;;AAEf;AACA;AACA;;AAEA;AACA;AACA,aAAa,sEAAW;AACxB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,sEAAS;;AAEf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,8BAA8B,sEAAW;AACzC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa,2EAAsB;AACnC;AACA,GAAG;AACH;AACA;AACA,aAAa,oFAA+B;AAC5C;AACA,GAAG;;AAEH;AACA,CAAC,G;;;;;;;;;;;;AC5OD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE;;AAE3T,6DAA6D,sEAAsE,8DAA8D,oBAAoB;;AAErN,iCAAiC,2HAA2H;;AAE5J,6BAA6B,kKAAkK;;AAE/L,iDAAiD,gBAAgB,gEAAgE,wDAAwD,6DAA6D,sDAAsD,kHAAkH;;AAE9Z,sCAAsC,uDAAuD,uCAAuC,SAAS,OAAO,kBAAkB,EAAE,aAAa;;AAErL,wCAAwC,gFAAgF,eAAe,eAAe,gBAAgB,oBAAoB,MAAM,0CAA0C,+BAA+B,aAAa,qBAAqB,mCAAmC,EAAE,EAAE,cAAc,WAAW,UAAU,EAAE,UAAU,MAAM,iDAAiD,EAAE,UAAU,kBAAkB,EAAE,EAAE,aAAa;;AAEve,+BAA+B,oCAAoC;;AAElB;AACmG;AAC1F;AACf;AACgD;AACpD;;AAEvC;AACA,WAAW,8EAAe;;AAE1B;AACA,SAAS,uDAAW;AACpB;;AAEA,SAAS,uDAAW;AACpB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,uDAAW;;AAExB;AACA,aAAa,uDAAW;;AAExB;AACA,MAAM,sEAAS;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM,+DAAY;AAClB,MAAM,yEAAsB;AAC5B,qCAAqC,uDAAW;AAChD,0BAA0B,mEAAU;AACpC;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM,+DAAY;AAClB,MAAM,yEAAsB;AAC5B,qCAAqC,uDAAW;AAChD,0BAA0B,mEAAU;AACpC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM,sEAAS;AACf;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM,sEAAS;AACf;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM,sEAAS;AACf;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM,sEAAS;AACf;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,sBAAsB,uDAAW;AACjC;AACA,GAAG;AACH;AACA;AACA;AACA,sBAAsB,uDAAW;AACjC;AACA,GAAG;AACH;AACA;AACA;;AAEA,MAAM,sEAAS;AACf,0BAA0B,sEAAa;AACvC,MAAM,4DAAI;AACV;;AAEA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA,MAAM,sEAAS;AACf,0BAA0B,sEAAa;AACvC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM,sEAAS;AACf;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM,sEAAS;AACf;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,mBAAmB,uDAAW;AAC9B;AACA,OAAO,mBAAmB,uDAAW;AACrC;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,CAAC,G;;;;;;;;;;;;ACxMD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiD;AACS;AACV;AACE;AAClD;AACA,QAAQ,kDAAW;AACnB;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;;AAEzC,qBAAqB,8EAAe;AACpC,mDAAmD;;AAEnD;;AAEA;AACA;AACA;AACA,KAAK;;;AAGL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL,qBAAqB,8EAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,iDAAU;AACtB;AACA;AACA;AACA;AACA;A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D,kFAAkF,EAAE,EAAE,EAAE,EAAE,eAAe;;AAEphB,2CAA2C,kBAAkB,kCAAkC,qEAAqE,EAAE,EAAE,OAAO,kBAAkB,EAAE,YAAY;;AAE3J;AACM;AACV;AACc;AAChB;AACN;AACjC;AACP;AACA;AACA;AACA,qBAAqB,+DAAe;AACpC;AACA,6CAA6C,qBAAqB;AAClE,uBAAuB,2DAAG;AAC1B,OAAO;AACP,KAAK;AACL,gBAAgB,0DAAU;AAC1B,cAAc,wDAAQ;AACtB,mBAAmB,6DAAa;AAChC,aAAa,uDAAO;AACpB;AACA,C;;;;;;;;;;;;AC3BA;AAAA;AAAA;AAA2F;AACpF;AACP;AACA;;AAEA;AACA,SAAS,4DAAU;AACnB,SAAS,4DAAU;AACnB;;AAEA,SAAS,+DAAa;AACtB,SAAS,+DAAa;AACtB;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;ACjBA;AAAA;AAAO;AACP;AACA;AACA,C;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;AC1DA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACnC;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,8DAAY;AAC9B;AACA,C;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACtCA;AAAA;AAAA;AACO;AACP;AACA,C;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAuB,2BAA2B,2EAA2E,kCAAkC,mBAAmB,GAAG,EAAE,OAAO,kCAAkC,8HAA8H,GAAG,EAAE,qBAAqB;;AAExX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,GAAG;AACH,C;;;;;;;;;;;;ACzEA;AAAA;AAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,C;;;;;;;;;;;ACRA;AACA,EAAE,KAA4D,oBAAoB,mBAAO,CAAC,4CAAO;AACjG,EAAE,SACwE;AAC1E,CAAC,mCAAmC;;AAEpC;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2EAA2E,aAAa;AACxF;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yBAAyB,WAAW;;AAEpC;AACA,+CAA+C,mBAAmB,IAAI,aAAa;AACnF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK,IAAI;AACT;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC,KAAK;;;AAGL;AACA;AACA,KAAK;;;AAGL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uDAAuD;AACvD;AACA,SAAS;AACT,OAAO,IAAI;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gCAAgC;AAChC,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+EAA+E,eAAe;AAC9F;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC;AACzC;AACA,OAAO,UAAU;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK,mBAAmB,uBAAuB;AAC/C;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA,OAAO,EAAE;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;;;AAGA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA,OAAO;AACP,qCAAqC;;AAErC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK,YAAY;AACjB;;AAEA;AACA;AACA;AACA,uEAAuE,aAAa;AACpF;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,qBAAqB,gBAAgB;AACrC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,6FAA6F,aAAa;AAC1G;AACA;;AAEA;AACA,iCAAiC;;AAEjC,oDAAoD;;AAEpD,qCAAqC,EAAE;;AAEvC,wDAAwD;;AAExD,4CAA4C;AAC5C;AACA;AACA,KAAK,GAAG;;AAER;AACA;AACA,KAAK,EAAE;;AAEP;AACA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;;;AAG7D,qDAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;;;AAGP;AACA;AACA,OAAO;AACP,KAAK,4CAA4C;;AAEjD;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,wCAAwC;;;AAGxC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK,EAAE;;AAEP;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL,oCAAoC;AACpC;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL,0CAA0C;;AAE1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL,8DAA8D;AAC9D;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK,IAAI;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;;AAGL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,8CAA8C;;AAE9C;AACA;AACA,KAAK;AACL,oCAAoC;;AAEpC;AACA;AACA,KAAK;AACL,qEAAqE;;AAErE;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,kDAAkD;;AAElD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;;AAE1D;AACA;AACA;AACA,OAAO,EAAE;;AAET;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA,SAAS,EAAE;;AAEX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA,OAAO;AACP,KAAK;AACL,iFAAiF;AACjF;;AAEA;AACA;AACA;AACA;AACA,OAAO,EAAE;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;AACA;AACA,SAAS,EAAE;;AAEX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT,OAAO,EAAE;;AAET;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;;AAEpB,UAAU;AACV;;AAEA;AACA;AACA;AACA,4DAA4D;;AAE5D,wBAAwB;;AAExB,6BAA6B;;AAE7B,2BAA2B;;AAE3B,2BAA2B;;AAE3B,gEAAgE;;AAEhE;AACA;AACA;AACA;AACA,WAAW,EAAE;;AAEb;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;;AAGP;AACA;AACA,OAAO;;;AAGP;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,IAAI;;;AAGJ;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,0BAA0B;AAC1B;AACA,SAAS;AACT;;AAEA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,0BAA0B;AAC1B,+BAA+B,iCAAiC;AAChE,SAAS;AACT,OAAO;AACP;AACA;AACA;;AAEA,0BAA0B;AAC1B;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC;;AAEtC;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA,6EAA6E;AAC7E;AACA;AACA,OAAO;AACP,4FAA4F;;AAE5F;AACA,0BAA0B;AAC1B;AACA;AACA,WAAW;AACX,SAAS;AACT;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;AACX,SAAS;AACT;;AAEA,wBAAwB;AACxB;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,WAAW;;AAEX,kFAAkF;;AAElF;AACA;AACA;;AAEA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD,6NAA6N;;AAE7N;AACA;AACA,QAAQ;AACR;;;AAGA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iFAAiF;;AAEjF;AACA;AACA;AACA,WAAW;AACX;;;AAGA;AACA;AACA,SAAS,QAAQ;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,EAAE;AACT;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,qFAAqF;AACrF,wEAAwE;;AAExE;AACA;AACA;;AAEA;AACA;;AAEA,wBAAwB;AACxB;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK,cAAc;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,4EAA4E;;AAE5E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO,EAAE;;AAET;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,IAAI;;;AAGJ;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA,SAAS;AACT;;AAEA,wBAAwB;AACxB;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,OAAO;;;AAGP;AACA;AACA;AACA,SAAS;AACT,OAAO,EAAE;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;;AAGX;;AAEA;AACA;AACA;AACA;AACA,aAAa,EAAE;;AAEf;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;;AAEA;AACA,aAAa;AACb;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,8CAA8C;;AAE9C,qDAAqD;;AAErD;AACA;AACA;AACA;AACA,mDAAmD;;AAEnD,uEAAuE;;AAEvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO,EAAE;;AAET;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA,iFAAiF;;AAEjF,oEAAoE;;AAEpE;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;;AAEA,yCAAyC;AACzC;AACA;;AAEA;AACA;AACA,kDAAkD;;AAElD;AACA,oBAAoB;AACpB;;AAEA;AACA,qDAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;;;AAGP;AACA;AACA,OAAO;;;AAGP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,IAAI;;;AAGJ;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA,OAAO;AACP,+CAA+C;;AAE/C;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA,0BAA0B;;AAE1B;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,OAAO;;;AAGP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,SAAS,GAAG;;AAEZ;AACA,OAAO;AACP;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,aAAa;AACb;;AAEA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,SAAS;AACT;;AAEA,wBAAwB;AACxB;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK,cAAc;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK,cAAc;;AAEnB,6CAA6C;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,8BAA8B;;AAE9B;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA,uEAAuE;;AAEvE;AACA;AACA,WAAW;AACX;;;AAGA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;;AAEA;AACA,SAAS,GAAG;;AAEZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,IAAI;;;AAGJ;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA,SAAS;AACT;;AAEA,wBAAwB;AACxB;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;;AAEA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,IAAI;;;AAGJ;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;;AAEA,2CAA2C;;AAE3C;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,SAAS;AACT;;AAEA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yCAAyC;;AAEzC;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0CAA0C;;AAE1C;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,OAAO;AACP,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB,6BAA6B,iCAAiC;AAC9D,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP,wBAAwB;AACxB,6BAA6B,iCAAiC,iCAAiC;AAC/F,gCAAgC,8BAA8B,iBAAiB;AAC/E,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iDAAiD;;AAEjD,yCAAyC;;AAEzC,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,mCAAmC;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP,wBAAwB;AACxB,mCAAmC;AACnC,mCAAmC,uCAAuC;AAC1E,SAAS;AACT,OAAO;AACP;;AAEA;AACA,wBAAwB;AACxB,mCAAmC;AACnC;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,0BAA0B;AAC1B,iCAAiC;AACjC;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,+BAA+B;AAC/B;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gDAAgD,cAAc;;AAE9D,CAAC;AACD;;;;;;;;;;;;ACj6IA,IAAI,KAAqC,EAAE,EAE1C;AACD,mBAAmB,mBAAO,CAAC,qGAAmC;AAC9D;;;;;;;;;;;;;ACJa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,mDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,aAAa,mBAAO,CAAC,4CAAO;;AAE5B;;AAEA,iBAAiB,mBAAO,CAAC,sDAAY;;AAErC;;AAEA,0BAA0B,mBAAO,CAAC,0FAAqB;;AAEvD,sCAAsC,uCAAuC,gBAAgB;;AAE7F,8CAA8C,iBAAiB,qBAAqB,oCAAoC,6DAA6D,oBAAoB,EAAE,eAAe;;AAE1N;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kEAAkE,uBAAuB;AACzF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oD;;;;;;;;;;;;AChGa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,eAAe,mBAAO,CAAC,sDAAe;;AAEtC;;AAEA,mDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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AE9P,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC;AACjC,OAAO;AACP;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,+B;;;;;;;;;;;;ACxCa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yD;;;;;;;;;;;;ACjBa;AACb,sCAAsC,mBAAO,CAAC,gHAAiC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8D;;;;;;;;;;;;ACjEa;AACb;AACA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA;AACA,qD;;;;;;;;;;;;ACTa;AACb,kCAAkC,mBAAO,CAAC,wGAA6B;AACvE,2CAA2C,mBAAO,CAAC,0HAAsC;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,mBAAO,CAAC,gHAAiC;AAC/E;AACA;AACA,+C;;;;;;;;;;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM,KAA0B;AAChC;AACA;AACA,GAAG,UAAU,IAA0C;AACvD;AACA,IAAI,oCAAO,OAAO;AAAA;AAAA;AAAA;AAAA,oGAAC;AACnB,GAAG,MAAM,EAGN;AACH,CAAC;AACD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,WAAW;AAC9B;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET,eAAe,WAAW;AAC1B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACxLD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM,KAA0B;AAChC;AACA;AACA,GAAG,UAAU,IAA0C;AACvD;AACA,IAAI,oCAAO,OAAO;AAAA;AAAA;AAAA;AAAA,oGAAC;AACnB,GAAG,MAAM,EAGN;AACH,CAAC;AACD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;;ACpPD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAA0B;AAChC;AACA,6BAA6B,mBAAO,CAAC,wDAAY,GAAG,mBAAO,CAAC,gDAAQ,GAAG,mBAAO,CAAC,4EAAsB;AACrG,GAAG,UAAU,IAA0C;AACvD;AACA,IAAI,iCAAO,CAAC,6EAAY,EAAE,qEAAQ,EAAE,iGAAsB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AACrE,GAAG,MAAM,EAGN;AACH,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,wCAAwC;AACxC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,wCAAwC,YAAY;AACpD;AACA;AACA,KAAK;AACL;AACA;;AAEA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC,YAAY;AACpD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI;AAC3D;AACA;AACA;AACA,2CAA2C,IAAI,GAAG,EAAE,aAAa,IAAI,mBAAmB,IAAI,GAAG,EAAE,cAAc,IAAI,yEAAyE,EAAE,oBAAoB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,2EAA2E,EAAE,oBAAoB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,iBAAiB,IAAI,2EAA2E,EAAE,qBAAqB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,iBAAiB,IAAI,EAAE,IAAI,yEAAyE,EAAE,qBAAqB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,iBAAiB,IAAI,EAAE,IAAI,yEAAyE,EAAE,qBAAqB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,iBAAiB,IAAI,EAAE,IAAI,yEAAyE,EAAE,yBAAyB,IAAI,EAAE,IAAI,iBAAiB,IAAI,EAAE,IAAI,yEAAyE,EAAE;AAC9jC;AACA;AACA;AACA;AACA,qDAAqD,IAAI,kBAAkB,IAAI,yBAAyB,IAAI,0GAA0G;AACtN;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,2CAA2C;AAC3C,sCAAsC,GAAG,IAAI;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;;AAEA,+CAA+C,YAAY;AAC3D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,YAAY;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uCAAuC,YAAY;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0BAA0B;AAC1B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,8BAA8B,UAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,wCAAwC,OAAO;AAC/C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL,+BAA+B,OAAO;AACtC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,GAAG;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sEAAsE,OAAO;AAC7E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,qBAAqB;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;;ACxyED;AACA,CAAC;;AAED;AACA,mBAAmB,KAA0B;AAC7C;AACA,kBAAkB,KAAyB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,KAAK;AACL,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;;AAExB,yCAAyC,qBAAqB;;AAE9D;AACA;AACA;AACA;AACA;AACA,kCAAkC,oBAAoB;;AAEtD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,iBAAiB;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;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","file":"9.9ed865ea.chunk.js","sourcesContent":["module.exports = require(\"core-js-pure/stable/array/from\");","module.exports = require(\"core-js-pure/stable/instance/ends-with\");","module.exports = require(\"core-js-pure/stable/instance/flat\");","module.exports = require(\"core-js-pure/stable/instance/last-index-of\");","module.exports = require(\"core-js-pure/stable/instance/sort\");","module.exports = require(\"core-js-pure/stable/instance/splice\");","module.exports = require(\"core-js-pure/stable/instance/starts-with\");","module.exports = require(\"core-js-pure/stable/instance/values\");","module.exports = require(\"core-js-pure/stable/object/is\");","module.exports = require(\"core-js-pure/stable/parse-float\");","module.exports = require(\"core-js-pure/stable/string/raw\");","import { rawAsap } from './raw'; // rawAsap provides everything we need except exception management.\n// RawTasks are recycled to reduce GC churn.\n\nvar freeTasks = []; // We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n  if (pendingErrors.length) {\n    throw pendingErrors.shift();\n  }\n}\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\n\n\nexport function asap(task) {\n  var rawTask;\n\n  if (freeTasks.length) {\n    rawTask = freeTasks.pop();\n  } else {\n    rawTask = new RawTask();\n  }\n\n  rawTask.task = task;\n  rawAsap(rawTask);\n} // We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\n\nvar RawTask =\n/** @class */\nfunction () {\n  function RawTask() {}\n\n  RawTask.prototype.call = function () {\n    try {\n      this.task.call();\n    } catch (error) {\n      if (asap.onerror) {\n        // This hook exists purely for testing purposes.\n        // Its name will be periodically randomized to break any code that\n        // depends on its existence.\n        asap.onerror(error);\n      } else {\n        // In a web browser, exceptions are not fatal. However, to avoid\n        // slowing down the queue of pending tasks, we rethrow the error in a\n        // lower priority turn.\n        pendingErrors.push(error);\n        requestErrorThrow();\n      }\n    } finally {\n      this.task = null;\n      freeTasks[freeTasks.length] = this;\n    }\n  };\n\n  return RawTask;\n}();","export * from './asap';","// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nexport function rawAsap(task) {\n  if (!queue.length) {\n    requestFlush();\n    flushing = true;\n  } // Equivalent to push, but avoids a function call.\n\n\n  queue[queue.length] = task;\n}\nvar queue = []; // Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\n// @ts-ignore\n\nvar flushing = false; // `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\n\nvar requestFlush; // The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\n\nvar index = 0; // If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\n\nvar capacity = 1024; // The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\n\nfunction flush() {\n  while (index < queue.length) {\n    var currentIndex = index; // Advance the index before calling the task. This ensures that we will\n    // begin flushing on the next task the task throws an error.\n\n    index = index + 1;\n    queue[currentIndex].call(); // Prevent leaking memory for long chains of recursive calls to `asap`.\n    // If we call `asap` within tasks scheduled by `asap`, the queue will\n    // grow, but to avoid an O(n) walk for every task we execute, we don't\n    // shift tasks off the queue after they have been executed.\n    // Instead, we periodically shift 1024 tasks off the queue.\n\n    if (index > capacity) {\n      // Manually shift all values starting at the index back to the\n      // beginning of the queue.\n      for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n        queue[scan] = queue[scan + index];\n      }\n\n      queue.length -= index;\n      index = 0;\n    }\n  }\n\n  queue.length = 0;\n  index = 0;\n  flushing = false;\n} // `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\n\n\nvar scope = typeof global !== 'undefined' ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver; // MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\n\nif (typeof BrowserMutationObserver === 'function') {\n  requestFlush = makeRequestCallFromMutationObserver(flush); // MessageChannels are desirable because they give direct access to the HTML\n  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n  // 11-12, and in web workers in many engines.\n  // Although message channels yield to any queued rendering and IO tasks, they\n  // would be better than imposing the 4ms delay of timers.\n  // However, they do not work reliably in Internet Explorer or Safari.\n  // Internet Explorer 10 is the only browser that has setImmediate but does\n  // not have MutationObservers.\n  // Although setImmediate yields to the browser's renderer, it would be\n  // preferrable to falling back to setTimeout since it does not have\n  // the minimum 4ms penalty.\n  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n  // Desktop to a lesser extent) that renders both setImmediate and\n  // MessageChannel useless for the purposes of ASAP.\n  // https://github.com/kriskowal/q/issues/396\n  // Timers are implemented universally.\n  // We fall back to timers in workers in most engines, and in foreground\n  // contexts in the following browsers.\n  // However, note that even this simple case requires nuances to operate in a\n  // broad spectrum of browsers.\n  //\n  // - Firefox 3-13\n  // - Internet Explorer 6-9\n  // - iPad Safari 4.3\n  // - Lynx 2.8.7\n} else {\n  requestFlush = makeRequestCallFromTimer(flush);\n} // `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\n\n\nrawAsap.requestFlush = requestFlush; // To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\n\nfunction makeRequestCallFromMutationObserver(callback) {\n  var toggle = 1;\n  var observer = new BrowserMutationObserver(callback);\n  var node = document.createTextNode('');\n  observer.observe(node, {\n    characterData: true\n  });\n  return function requestCall() {\n    toggle = -toggle;\n    node.data = toggle;\n  };\n} // The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n\nfunction makeRequestCallFromTimer(callback) {\n  return function requestCall() {\n    // We dispatch a timeout with a specified delay of 0 for engines that\n    // can reliably accommodate that request. This will usually be snapped\n    // to a 4 milisecond delay, but once we're flushing, there's no delay\n    // between events.\n    var timeoutHandle = setTimeout(handleTimer, 0); // However, since this timer gets frequently dropped in Firefox\n    // workers, we enlist an interval handle that will try to fire\n    // an event 20 times per second until it succeeds.\n\n    var intervalHandle = setInterval(handleTimer, 50);\n\n    function handleTimer() {\n      // Whichever timer succeeds will cancel both timers and\n      // execute the callback.\n      clearTimeout(timeoutHandle);\n      clearInterval(intervalHandle);\n      callback();\n    }\n  };\n} // This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\n\n\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer; // ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js","/**\r\n * Use invariant() to assert state which your program assumes to be true.\r\n *\r\n * Provide sprintf-style format (only %s is supported) and arguments\r\n * to provide information about what broke and what you were\r\n * expecting.\r\n *\r\n * The invariant message will be stripped in production, but the invariant\r\n * will remain to ensure logic does not differ in production.\r\n */\nfunction invariant(condition, format) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n\n    throw error;\n  }\n}\n\nexport { invariant };\n//# sourceMappingURL=invariant.esm.js.map\n","function shallowEqual(objA, objB, compare, compareContext) {\n  var compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (compareResult !== void 0) {\n    return !!compareResult;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB); // Test for A's keys different from B.\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n    compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport { shallowEqual };\n//# sourceMappingURL=shallowequal.esm.js.map\n","import * as React from 'react';\nvar RadioGroupContext = /*#__PURE__*/React.createContext(null);\nexport var RadioGroupContextProvider = RadioGroupContext.Provider;\nexport default RadioGroupContext;","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport Radio from './radio';\nimport { ConfigContext } from '../config-provider';\nimport SizeContext from '../config-provider/SizeContext';\nimport { RadioGroupContextProvider } from './context';\nvar RadioGroup = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var size = React.useContext(SizeContext);\n\n  var _useMergedState = useMergedState(props.defaultValue, {\n    value: props.value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      value = _useMergedState2[0],\n      setValue = _useMergedState2[1];\n\n  var onRadioChange = function onRadioChange(ev) {\n    var lastValue = value;\n    var val = ev.target.value;\n\n    if (!('value' in props)) {\n      setValue(val);\n    }\n\n    var onChange = props.onChange;\n\n    if (onChange && val !== lastValue) {\n      onChange(ev);\n    }\n  };\n\n  var renderGroup = function renderGroup() {\n    var _classNames;\n\n    var customizePrefixCls = props.prefixCls,\n        _props$className = props.className,\n        className = _props$className === void 0 ? '' : _props$className,\n        options = props.options,\n        optionType = props.optionType,\n        _props$buttonStyle = props.buttonStyle,\n        buttonStyle = _props$buttonStyle === void 0 ? 'outline' : _props$buttonStyle,\n        disabled = props.disabled,\n        children = props.children,\n        customizeSize = props.size,\n        style = props.style,\n        id = props.id,\n        onMouseEnter = props.onMouseEnter,\n        onMouseLeave = props.onMouseLeave;\n    var prefixCls = getPrefixCls('radio', customizePrefixCls);\n    var groupPrefixCls = \"\".concat(prefixCls, \"-group\");\n    var childrenToRender = children; // 如果存在 options, 优先使用\n\n    if (options && options.length > 0) {\n      var optionsPrefixCls = optionType === 'button' ? \"\".concat(prefixCls, \"-button\") : prefixCls;\n      childrenToRender = options.map(function (option) {\n        if (typeof option === 'string') {\n          // 此处类型自动推导为 string\n          return /*#__PURE__*/React.createElement(Radio, {\n            key: option,\n            prefixCls: optionsPrefixCls,\n            disabled: disabled,\n            value: option,\n            checked: value === option\n          }, option);\n        } // 此处类型自动推导为 { label: string value: string }\n\n\n        return /*#__PURE__*/React.createElement(Radio, {\n          key: \"radio-group-value-options-\".concat(option.value),\n          prefixCls: optionsPrefixCls,\n          disabled: option.disabled || disabled,\n          value: option.value,\n          checked: value === option.value,\n          style: option.style\n        }, option.label);\n      });\n    }\n\n    var mergedSize = customizeSize || size;\n    var classString = classNames(groupPrefixCls, \"\".concat(groupPrefixCls, \"-\").concat(buttonStyle), (_classNames = {}, _defineProperty(_classNames, \"\".concat(groupPrefixCls, \"-\").concat(mergedSize), mergedSize), _defineProperty(_classNames, \"\".concat(groupPrefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classString,\n      style: style,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      id: id,\n      ref: ref\n    }, childrenToRender);\n  };\n\n  return /*#__PURE__*/React.createElement(RadioGroupContextProvider, {\n    value: {\n      onChange: onRadioChange,\n      value: value,\n      disabled: props.disabled,\n      name: props.name\n    }\n  }, renderGroup());\n});\nexport default /*#__PURE__*/React.memo(RadioGroup);","import InternalRadio from './radio';\nimport Group from './group';\nimport Button from './radioButton';\nvar Radio = InternalRadio;\nRadio.Button = Button;\nRadio.Group = Group;\nexport { Button, Group };\nexport default Radio;","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport RcCheckbox from 'rc-checkbox';\nimport classNames from 'classnames';\nimport { composeRef } from \"rc-util/es/ref\";\nimport { ConfigContext } from '../config-provider';\nimport RadioGroupContext from './context';\nimport devWarning from '../_util/devWarning';\n\nvar InternalRadio = function InternalRadio(props, ref) {\n  var _classNames;\n\n  var context = React.useContext(RadioGroupContext);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var innerRef = React.useRef();\n  var mergedRef = composeRef(ref, innerRef);\n  React.useEffect(function () {\n    devWarning(!('optionType' in props), 'Radio', '`optionType` is only support in Radio.Group.');\n  }, []);\n\n  var onChange = function onChange(e) {\n    if (props.onChange) {\n      props.onChange(e);\n    }\n\n    if (context === null || context === void 0 ? void 0 : context.onChange) {\n      context.onChange(e);\n    }\n  };\n\n  var customizePrefixCls = props.prefixCls,\n      className = props.className,\n      children = props.children,\n      style = props.style,\n      restProps = __rest(props, [\"prefixCls\", \"className\", \"children\", \"style\"]);\n\n  var prefixCls = getPrefixCls('radio', customizePrefixCls);\n\n  var radioProps = _extends({}, restProps);\n\n  if (context) {\n    radioProps.name = context.name;\n    radioProps.onChange = onChange;\n    radioProps.checked = props.value === context.value;\n    radioProps.disabled = props.disabled || context.disabled;\n  }\n\n  var wrapperClassString = classNames(\"\".concat(prefixCls, \"-wrapper\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-wrapper-checked\"), radioProps.checked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-wrapper-disabled\"), radioProps.disabled), _defineProperty(_classNames, \"\".concat(prefixCls, \"-wrapper-rtl\"), direction === 'rtl'), _classNames), className);\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/label-has-associated-control\n    React.createElement(\"label\", {\n      className: wrapperClassString,\n      style: style,\n      onMouseEnter: props.onMouseEnter,\n      onMouseLeave: props.onMouseLeave\n    }, /*#__PURE__*/React.createElement(RcCheckbox, _extends({}, radioProps, {\n      prefixCls: prefixCls,\n      ref: mergedRef\n    })), children !== undefined ? /*#__PURE__*/React.createElement(\"span\", null, children) : null)\n  );\n};\n\nvar Radio = /*#__PURE__*/React.forwardRef(InternalRadio);\nRadio.displayName = 'Radio';\nRadio.defaultProps = {\n  type: 'radio'\n};\nexport default Radio;","import _extends from \"@babel/runtime/helpers/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport Radio from './radio';\nimport { ConfigContext } from '../config-provider';\nimport RadioGroupContext from './context';\n\nvar RadioButton = function RadioButton(props, ref) {\n  var radioGroupContext = React.useContext(RadioGroupContext);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var customizePrefixCls = props.prefixCls,\n      radioProps = __rest(props, [\"prefixCls\"]);\n\n  var prefixCls = getPrefixCls('radio-button', customizePrefixCls);\n\n  if (radioGroupContext) {\n    radioProps.checked = props.value === radioGroupContext.value;\n    radioProps.disabled = props.disabled || radioGroupContext.disabled;\n  }\n\n  return /*#__PURE__*/React.createElement(Radio, _extends({\n    prefixCls: prefixCls\n  }, radioProps, {\n    type: \"radio\",\n    ref: ref\n  }));\n};\n\nexport default /*#__PURE__*/React.forwardRef(RadioButton);","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _ref = require(\"rc-util/lib/ref\");\n\nvar _raf = _interopRequireDefault(require(\"rc-util/lib/raf\"));\n\nvar _tooltip = _interopRequireDefault(require(\"../tooltip\"));\n\nvar SliderTooltip = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var visible = props.visible;\n  var innerRef = (0, React.useRef)(null);\n  var rafRef = (0, React.useRef)(null);\n\n  function cancelKeepAlign() {\n    _raf[\"default\"].cancel(rafRef.current);\n\n    rafRef.current = null;\n  }\n\n  function keepAlign() {\n    rafRef.current = (0, _raf[\"default\"])(function () {\n      innerRef.current.forcePopupAlign();\n      rafRef.current = null;\n      keepAlign();\n    });\n  }\n\n  React.useEffect(function () {\n    if (visible) {\n      keepAlign();\n    } else {\n      cancelKeepAlign();\n    }\n\n    return cancelKeepAlign;\n  }, [visible]);\n  return /*#__PURE__*/React.createElement(_tooltip[\"default\"], (0, _extends2[\"default\"])({\n    ref: (0, _ref.composeRef)(innerRef, ref)\n  }, props));\n});\nvar _default = SliderTooltip;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends3 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _rcSlider = _interopRequireWildcard(require(\"rc-slider\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _SliderTooltip = _interopRequireDefault(require(\"./SliderTooltip\"));\n\nvar _configProvider = require(\"../config-provider\");\n\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar Slider = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _React$useContext = React.useContext(_configProvider.ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction,\n      getPopupContainer = _React$useContext.getPopupContainer;\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = (0, _slicedToArray2[\"default\"])(_React$useState, 2),\n      visibles = _React$useState2[0],\n      setVisibles = _React$useState2[1];\n\n  var toggleTooltipVisible = function toggleTooltipVisible(index, visible) {\n    setVisibles(function (prev) {\n      return (0, _extends3[\"default\"])((0, _extends3[\"default\"])({}, prev), (0, _defineProperty2[\"default\"])({}, index, visible));\n    });\n  };\n\n  var getTooltipPlacement = function getTooltipPlacement(tooltipPlacement, vertical) {\n    if (tooltipPlacement) {\n      return tooltipPlacement;\n    }\n\n    if (!vertical) {\n      return 'top';\n    }\n\n    return direction === 'rtl' ? 'left' : 'right';\n  };\n\n  var handleWithTooltip = function handleWithTooltip(_a) {\n    var tooltipPrefixCls = _a.tooltipPrefixCls,\n        prefixCls = _a.prefixCls,\n        _b = _a.info,\n        value = _b.value,\n        dragging = _b.dragging,\n        index = _b.index,\n        restProps = __rest(_b, [\"value\", \"dragging\", \"index\"]);\n\n    var tipFormatter = props.tipFormatter,\n        tooltipVisible = props.tooltipVisible,\n        tooltipPlacement = props.tooltipPlacement,\n        getTooltipPopupContainer = props.getTooltipPopupContainer,\n        vertical = props.vertical;\n    var isTipFormatter = tipFormatter ? visibles[index] || dragging : false;\n    var visible = tooltipVisible || tooltipVisible === undefined && isTipFormatter;\n    return /*#__PURE__*/React.createElement(_SliderTooltip[\"default\"], {\n      prefixCls: tooltipPrefixCls,\n      title: tipFormatter ? tipFormatter(value) : '',\n      visible: visible,\n      placement: getTooltipPlacement(tooltipPlacement, vertical),\n      transitionName: \"zoom-down\",\n      key: index,\n      overlayClassName: \"\".concat(prefixCls, \"-tooltip\"),\n      getPopupContainer: getTooltipPopupContainer || getPopupContainer || function () {\n        return document.body;\n      }\n    }, /*#__PURE__*/React.createElement(_rcSlider.Handle, (0, _extends3[\"default\"])({}, restProps, {\n      value: value,\n      onMouseEnter: function onMouseEnter() {\n        return toggleTooltipVisible(index, true);\n      },\n      onMouseLeave: function onMouseLeave() {\n        return toggleTooltipVisible(index, false);\n      }\n    })));\n  };\n\n  var customizePrefixCls = props.prefixCls,\n      customizeTooltipPrefixCls = props.tooltipPrefixCls,\n      range = props.range,\n      className = props.className,\n      restProps = __rest(props, [\"prefixCls\", \"tooltipPrefixCls\", \"range\", \"className\"]);\n\n  var prefixCls = getPrefixCls('slider', customizePrefixCls);\n  var tooltipPrefixCls = getPrefixCls('tooltip', customizeTooltipPrefixCls);\n  var cls = (0, _classnames[\"default\"])(className, (0, _defineProperty2[\"default\"])({}, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl')); // make reverse default on rtl direction\n\n  if (direction === 'rtl' && !restProps.vertical) {\n    restProps.reverse = !restProps.reverse;\n  }\n\n  if (range) {\n    return /*#__PURE__*/React.createElement(_rcSlider.Range, (0, _extends3[\"default\"])({}, restProps, {\n      step: restProps.step,\n      className: cls,\n      ref: ref,\n      handle: function handle(info) {\n        return handleWithTooltip({\n          tooltipPrefixCls: tooltipPrefixCls,\n          prefixCls: prefixCls,\n          info: info\n        });\n      },\n      prefixCls: prefixCls\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(_rcSlider[\"default\"], (0, _extends3[\"default\"])({}, restProps, {\n    step: restProps.step,\n    className: cls,\n    ref: ref,\n    handle: function handle(info) {\n      return handleWithTooltip({\n        tooltipPrefixCls: tooltipPrefixCls,\n        prefixCls: prefixCls,\n        info: info\n      });\n    },\n    prefixCls: prefixCls\n  }));\n});\nSlider.displayName = 'Slider';\nSlider.defaultProps = {\n  tipFormatter: function tipFormatter(value) {\n    return typeof value === 'number' ? value.toString() : '';\n  }\n};\nvar _default = Slider;\nexports[\"default\"] = _default;","require('../../modules/es.string.iterator');\nrequire('../../modules/es.array.from');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Array.from;\n","require('../../../modules/es.array.flat');\nrequire('../../../modules/es.array.unscopables.flat');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').flat;\n","require('../../../modules/es.array.last-index-of');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').lastIndexOf;\n","require('../../../modules/es.array.sort');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').sort;\n","require('../../../modules/es.array.splice');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').splice;\n","require('../../../modules/es.array.iterator');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').values;\n","var endsWith = require('../string/virtual/ends-with');\n\nvar StringPrototype = String.prototype;\n\nmodule.exports = function (it) {\n  var own = it.endsWith;\n  return typeof it === 'string' || it === StringPrototype\n    || (it instanceof String && own === StringPrototype.endsWith) ? endsWith : own;\n};\n","var flat = require('../array/virtual/flat');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.flat;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.flat) ? flat : own;\n};\n","var lastIndexOf = require('../array/virtual/last-index-of');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.lastIndexOf;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.lastIndexOf) ? lastIndexOf : own;\n};\n","var sort = require('../array/virtual/sort');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.sort;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.sort) ? sort : own;\n};\n","var splice = require('../array/virtual/splice');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.splice;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.splice) ? splice : own;\n};\n","var startsWith = require('../string/virtual/starts-with');\n\nvar StringPrototype = String.prototype;\n\nmodule.exports = function (it) {\n  var own = it.startsWith;\n  return typeof it === 'string' || it === StringPrototype\n    || (it instanceof String && own === StringPrototype.startsWith) ? startsWith : own;\n};\n","require('../../modules/es.object.is');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Object.is;\n","require('../modules/es.parse-float');\nvar path = require('../internals/path');\n\nmodule.exports = path.parseFloat;\n","require('../../modules/es.string.raw');\nvar path = require('../../internals/path');\n\nmodule.exports = path.String.raw;\n","require('../../../modules/es.string.ends-with');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('String').endsWith;\n","require('../../../modules/es.string.starts-with');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('String').startsWith;\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\n// `Array.from` method implementation\n// https://tc39.github.io/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar min = Math.min;\nvar nativeLastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : nativeLastIndexOf;\n","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar $parseFloat = global.parseFloat;\nvar FORCED = 1 / $parseFloat(whitespaces + '-0') !== -Infinity;\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(String(string));\n  var result = $parseFloat(trimmedString);\n  return result === 0 && trimmedString.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n","// `SameValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-samevalue\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.github.io/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flat');\n","var $ = require('../internals/export');\nvar is = require('../internals/same-value');\n\n// `Object.is` method\n// https://tc39.github.io/ecma262/#sec-object.is\n$({ target: 'Object', stat: true }, {\n  is: is\n});\n","var $ = require('../internals/export');\nvar parseFloatImplementation = require('../internals/number-parse-float');\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat != parseFloatImplementation }, {\n  parseFloat: parseFloatImplementation\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeEndsWith = ''.endsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.endsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = toLength(that.length);\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = String(searchString);\n    return nativeEndsWith\n      ? nativeEndsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n","var $ = require('../internals/export');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `String.raw` method\n// https://tc39.github.io/ecma262/#sec-string.raw\n$({ target: 'String', stat: true }, {\n  raw: function raw(template) {\n    var rawTemplate = toIndexedObject(template.raw);\n    var literalSegments = toLength(rawTemplate.length);\n    var argumentsLength = arguments.length;\n    var elements = [];\n    var i = 0;\n    while (literalSegments > i) {\n      elements.push(String(rawTemplate[i++]));\n      if (i < argumentsLength) elements.push(String(arguments[i]));\n    } return elements.join('');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeStartsWith = ''.startsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return nativeStartsWith\n      ? nativeStartsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","var parent = require('../../es/array/from');\n\nmodule.exports = parent;\n","var parent = require('../../../es/array/virtual/values');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/ends-with');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/flat');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/last-index-of');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/sort');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/splice');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/starts-with');\n\nmodule.exports = parent;\n","require('../../modules/web.dom-collections.iterator');\nvar values = require('../array/virtual/values');\nvar classof = require('../../internals/classof');\nvar ArrayPrototype = Array.prototype;\n\nvar DOMIterables = {\n  DOMTokenList: true,\n  NodeList: true\n};\n\nmodule.exports = function (it) {\n  var own = it.values;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.values)\n    // eslint-disable-next-line no-prototype-builtins\n    || DOMIterables.hasOwnProperty(classof(it)) ? values : own;\n};\n","var parent = require('../../es/object/is');\n\nmodule.exports = parent;\n","var parent = require('../es/parse-float');\n\nmodule.exports = parent;\n","var parent = require('../../es/string/raw');\n\nmodule.exports = parent;\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n.Control {\\n  padding-bottom: 4px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"G:/workspace/boke-pro/superset-all/superset/superset-frontend/src/explore/components/Control.less\",\"G:/workspace/boke-pro/superset-all/superset/superset-frontend/src/explore/components/G:/workspace/boke-pro/superset-all/superset/superset-frontend/src/explore/components/Control.less\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;;;;GAiBG;ACCH;EACE,oBAAA;CDCD\",\"file\":\"Control.less\",\"sourcesContent\":[\"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n.Control {\\n  padding-bottom: 4px;\\n}\\n\",\"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n.Control {\\n  padding-bottom: 4px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n/************************************************************************/\\n/* COLORS                                                               */\\n/* Please attempt to use and standardize on these colors,               */\\n/* rather than including specific color values in                       */\\n/* component styles. This will allow us to more easily adjust theming   */\\n/************************************************************************/\\n/**************************** text-specific *****************************/\\n/***************************** status colors ****************************/\\n/* general component effects */\\n/************************************************************************/\\n/* OPACITIES                                                            */\\n/* Used in LESS filters, e.g. fade(@someColorVar, @someOpacityBelow)    */\\n/************************************************************************/\\n/************************************************************************/\\n/* SHADES & TINTS                                                       */\\n/* Used in LESS filters for shadint/tinting,                            */\\n/* e.g. shade(@someColorVar, @colorstop-one) to darken                  */\\n/* or tint(@someColorVar, @colorstop-one) to lighten                    */\\n/************************************************************************/\\n/************************************************************************/\\n/* LAYOUT                                                               */\\n/* Widths and heights of things, that might be referred to often        */\\n/************************************************************************/\\n/* builder component pane */\\n/************************************************************************/\\n/* Z-INDEX                                                              */\\n/* Think of the site as \\\"layers\\\" rather than an arms race of numbers    */\\n/* Keep these to a minimum                                              */\\n/* Label semantic \\\"layers\\\" and add comments for usage notes             */\\n/* Use double dash modifiers to step up/down from a base layer          */\\n/* e.g. z-whatever--modifier                                            */\\n/************************************************************************/\\n/************************ toast messages, popovers **********************/\\n/***** filters, dashboard editor widgets, Explore reloading overlay *****/\\n/******************************** charts ********************************/\\n/************************************************************************/\\n/* TYPOGRAPHY                                                           */\\n/* Commonly used font weights, line heights, etc. These should be the   */\\n/* core values used to build more complex styles for headers, etc.      */\\n/************************************************************************/\\n/************************************************************************/\\n/* TRANSITIONS                                                          */\\n/* Timing and easings presets used in CSS transitions                   */\\n/************************************************************************/\\n/************************************************************************/\\n/* BORDER RADII                                                         */\\n/* Standard border-radius settings                                      */\\n/************************************************************************/\\n/************************************************************************/\\n/* BOOTSTRAP/BOOTSWATCH/COSMO                                           */\\n/* These are the legacy Cosmo theme overrides to Bootswatch's           */\\n/* overrides to Bootstrap. We should consolidate/deprecate these        */\\n/* in favor of custom/reusable CSS wherever possible                    */\\n/************************************************************************/\\n/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n.dashboard .filter_box .slice_container > div:not(.alert) {\\n  padding-top: 0;\\n}\\n.filter_box {\\n  padding: 10px 0;\\n  overflow: visible !important;\\n}\\n.filter_box:hover {\\n  z-index: 3000;\\n}\\n.m-b-5 {\\n  margin-bottom: 5px;\\n}\\n.input-inline {\\n  float: left;\\n  padding-right: 3px;\\n}\\n.input-inline .dropdown {\\n  display: flex;\\n}\\n.input-inline .dropdown button {\\n  padding-right: 20px;\\n}\\n.input-inline .dropdown button .caret {\\n  width: auto;\\n  position: absolute;\\n  right: 5px;\\n  top: 6px;\\n}\\n.filter-container {\\n  display: flex;\\n  flex-direction: column;\\n  margin-bottom: 10px;\\n}\\n.filter-container:last-child {\\n  margin-bottom: 0;\\n}\\n.filter-container label {\\n  display: flex;\\n  font-weight: 700;\\n}\\n.filter-container .filter-badge-container {\\n  width: 30px;\\n  padding-right: 10px;\\n}\\n.filter-container .filter-badge-container + div {\\n  width: 100%;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"G:/workspace/boke-pro/superset-all/superset/superset-frontend/src/visualizations/FilterBox/FilterBox.less\",\"G:/workspace/boke-pro/superset-all/superset/superset-frontend/src/visualizations/FilterBox/G:/workspace/boke-pro/superset-all/superset/superset-frontend/src/visualizations/FilterBox/FilterBox.less\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;;;;GAiBG;AACH;;;;;;;;;;;;;;;;;GAiBG;AACH,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,+BAA+B;AAC/B,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,4BAA4B;AAC5B,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E,0EAA0E;AAC1E;;;;;;;;;;;;;;;;;GAiBG;ACvFH;EACE,eAAA;CDyFD;ACtFD;EACE,gBAAA;EACA,6BAAA;CDwFD;ACtFC;EACE,cAAA;CDwFH;ACpFD;EACE,mBAAA;CDsFD;ACnFD;EACE,YAAA;EACA,mBAAA;CDqFD;ACvFD;EAKI,cAAA;CDqFH;AC1FD;EAOM,oBAAA;CDsFL;AC7FD;EASQ,YAAA;EACA,mBAAA;EACA,WAAA;EACA,SAAA;CDuFP;ACjFD;EACE,cAAA;EACA,uBAAA;EACA,oBAAA;CDmFD;ACjFC;EACE,iBAAA;CDmFH;ACzFD;EAUI,cAAA;EACA,iBAAA;CDkFH;AC7FD;EAeI,YAAA;EACA,oBAAA;CDiFH;ACjGD;EAoBI,YAAA;CDgFH\",\"file\":\"FilterBox.less\",\"sourcesContent\":[\"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n/************************************************************************/\\n/* COLORS                                                               */\\n/* Please attempt to use and standardize on these colors,               */\\n/* rather than including specific color values in                       */\\n/* component styles. This will allow us to more easily adjust theming   */\\n/************************************************************************/\\n/**************************** text-specific *****************************/\\n/***************************** status colors ****************************/\\n/* general component effects */\\n/************************************************************************/\\n/* OPACITIES                                                            */\\n/* Used in LESS filters, e.g. fade(@someColorVar, @someOpacityBelow)    */\\n/************************************************************************/\\n/************************************************************************/\\n/* SHADES & TINTS                                                       */\\n/* Used in LESS filters for shadint/tinting,                            */\\n/* e.g. shade(@someColorVar, @colorstop-one) to darken                  */\\n/* or tint(@someColorVar, @colorstop-one) to lighten                    */\\n/************************************************************************/\\n/************************************************************************/\\n/* LAYOUT                                                               */\\n/* Widths and heights of things, that might be referred to often        */\\n/************************************************************************/\\n/* builder component pane */\\n/************************************************************************/\\n/* Z-INDEX                                                              */\\n/* Think of the site as \\\"layers\\\" rather than an arms race of numbers    */\\n/* Keep these to a minimum                                              */\\n/* Label semantic \\\"layers\\\" and add comments for usage notes             */\\n/* Use double dash modifiers to step up/down from a base layer          */\\n/* e.g. z-whatever--modifier                                            */\\n/************************************************************************/\\n/************************ toast messages, popovers **********************/\\n/***** filters, dashboard editor widgets, Explore reloading overlay *****/\\n/******************************** charts ********************************/\\n/************************************************************************/\\n/* TYPOGRAPHY                                                           */\\n/* Commonly used font weights, line heights, etc. These should be the   */\\n/* core values used to build more complex styles for headers, etc.      */\\n/************************************************************************/\\n/************************************************************************/\\n/* TRANSITIONS                                                          */\\n/* Timing and easings presets used in CSS transitions                   */\\n/************************************************************************/\\n/************************************************************************/\\n/* BORDER RADII                                                         */\\n/* Standard border-radius settings                                      */\\n/************************************************************************/\\n/************************************************************************/\\n/* BOOTSTRAP/BOOTSWATCH/COSMO                                           */\\n/* These are the legacy Cosmo theme overrides to Bootswatch's           */\\n/* overrides to Bootstrap. We should consolidate/deprecate these        */\\n/* in favor of custom/reusable CSS wherever possible                    */\\n/************************************************************************/\\n/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n.dashboard .filter_box .slice_container > div:not(.alert) {\\n  padding-top: 0;\\n}\\n.filter_box {\\n  padding: 10px 0;\\n  overflow: visible !important;\\n}\\n.filter_box:hover {\\n  z-index: 3000;\\n}\\n.m-b-5 {\\n  margin-bottom: 5px;\\n}\\n.input-inline {\\n  float: left;\\n  padding-right: 3px;\\n}\\n.input-inline .dropdown {\\n  display: flex;\\n}\\n.input-inline .dropdown button {\\n  padding-right: 20px;\\n}\\n.input-inline .dropdown button .caret {\\n  width: auto;\\n  position: absolute;\\n  right: 5px;\\n  top: 6px;\\n}\\n.filter-container {\\n  display: flex;\\n  flex-direction: column;\\n  margin-bottom: 10px;\\n}\\n.filter-container:last-child {\\n  margin-bottom: 0;\\n}\\n.filter-container label {\\n  display: flex;\\n  font-weight: 700;\\n}\\n.filter-container .filter-badge-container {\\n  width: 30px;\\n  padding-right: 10px;\\n}\\n.filter-container .filter-badge-container + div {\\n  width: 100%;\\n}\\n\",\"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n@import '../../../stylesheets/less/variables.less';\\n\\n.dashboard .filter_box .slice_container > div:not(.alert) {\\n  padding-top: 0;\\n}\\n\\n.filter_box {\\n  padding: 10px 0;\\n  overflow: visible !important;\\n\\n  &:hover {\\n    z-index: @z-index-max;\\n  }\\n}\\n\\n.m-b-5 {\\n  margin-bottom: 5px;\\n}\\n\\n.input-inline {\\n  float: left;\\n  padding-right: 3px;\\n\\n  .dropdown {\\n    display: flex;\\n    button {\\n      padding-right: 20px;\\n      .caret {\\n        width: auto;\\n        position: absolute;\\n        right: 5px;\\n        top: 6px;\\n      }\\n    }\\n  }\\n}\\n\\n.filter-container {\\n  display: flex;\\n  flex-direction: column;\\n  margin-bottom: 10px;\\n\\n  &:last-child {\\n    margin-bottom: 0;\\n  }\\n\\n  label {\\n    display: flex;\\n    font-weight: @font-weight-bold;\\n  }\\n\\n  .filter-badge-container {\\n    width: 30px;\\n    padding-right: 10px;\\n  }\\n\\n  .filter-badge-container + div {\\n    width: 100%;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n","/*! geolib 2.0.23 by Manuel Bieh\r\n* Library to provide geo functions like distance calculation,\r\n* conversion of decimal coordinates to sexagesimal and vice versa, etc.\r\n* WGS 84 (World Geodetic System 1984)\r\n* \r\n* @author Manuel Bieh\r\n* @url http://www.manuelbieh.com/\r\n* @version 2.0.23\r\n* @license MIT \r\n**/;(function(global, undefined) {\n\n    \"use strict\";\n\n    function Geolib() {}\n\n    // Constants\n    Geolib.TO_RAD = Math.PI / 180;\n    Geolib.TO_DEG = 180 / Math.PI;\n    Geolib.PI_X2 = Math.PI * 2;\n    Geolib.PI_DIV4 = Math.PI / 4;\n\n    // Setting readonly defaults\n    var geolib = Object.create(Geolib.prototype, {\n        version: {\n            value: \"2.0.23\"\n        },\n        radius: {\n            value: 6378137\n        },\n        minLat: {\n            value: -90\n        },\n        maxLat: {\n            value: 90\n        },\n        minLon: {\n            value: -180\n        },\n        maxLon: {\n            value: 180\n        },\n        sexagesimalPattern: {\n            value: /^([0-9]{1,3})°\\s*([0-9]{1,3}(?:\\.(?:[0-9]{1,2}))?)'\\s*(([0-9]{1,3}(\\.([0-9]{1,4}))?)\"\\s*)?([NEOSW]?)$/\n        },\n        measures: {\n            value: Object.create(Object.prototype, {\n                \"m\" : {value: 1},\n                \"km\": {value: 0.001},\n                \"cm\": {value: 100},\n                \"mm\": {value: 1000},\n                \"mi\": {value: (1 / 1609.344)},\n                \"sm\": {value: (1 / 1852.216)},\n                \"ft\": {value: (100 / 30.48)},\n                \"in\": {value: (100 / 2.54)},\n                \"yd\": {value: (1 / 0.9144)}\n            })\n        },\n        prototype: {\n            value: Geolib.prototype\n        },\n        extend: {\n            value: function(methods, overwrite) {\n                for(var prop in methods) {\n                    if(typeof geolib.prototype[prop] === 'undefined' || overwrite === true) {\n                        if(typeof methods[prop] === 'function' && typeof methods[prop].bind === 'function') {\n                            geolib.prototype[prop] = methods[prop].bind(geolib);\n                        } else {\n                            geolib.prototype[prop] = methods[prop];\n                        }\n                    }\n                }\n            }\n        }\n    });\n\n    if (typeof(Number.prototype.toRad) === 'undefined') {\n        Number.prototype.toRad = function() {\n            return this * Geolib.TO_RAD;\n        };\n    }\n\n    if (typeof(Number.prototype.toDeg) === 'undefined') {\n        Number.prototype.toDeg = function() {\n            return this * Geolib.TO_DEG;\n        };\n    }\n\n    // Here comes the magic\n    geolib.extend({\n\n        decimal: {},\n\n        sexagesimal: {},\n\n        distance: null,\n\n        getKeys: function(point) {\n\n            // GeoJSON Array [longitude, latitude(, elevation)]\n            if(Object.prototype.toString.call(point) == '[object Array]') {\n\n                return {\n                    longitude: point.length >= 1 ? 0 : undefined,\n                    latitude: point.length >= 2 ? 1 : undefined,\n                    elevation: point.length >= 3 ? 2 : undefined\n                };\n\n            }\n\n            var getKey = function(possibleValues) {\n\n                var key;\n\n                possibleValues.every(function(val) {\n                    // TODO: check if point is an object\n                    if(typeof point != 'object') {\n                        return true;\n                    }\n                    return point.hasOwnProperty(val) ? (function() { key = val; return false; }()) : true;\n                });\n\n                return key;\n\n            };\n\n            var longitude = getKey(['lng', 'lon', 'longitude']);\n            var latitude = getKey(['lat', 'latitude']);\n            var elevation = getKey(['alt', 'altitude', 'elevation', 'elev']);\n\n            // return undefined if not at least one valid property was found\n            if(typeof latitude == 'undefined' &&\n                typeof longitude == 'undefined' &&\n                typeof elevation == 'undefined') {\n                return undefined;\n            }\n\n            return {\n                latitude: latitude,\n                longitude: longitude,\n                elevation: elevation\n            };\n\n        },\n\n        // returns latitude of a given point, converted to decimal\n        // set raw to true to avoid conversion\n        getLat: function(point, raw) {\n            return raw === true ? point[this.getKeys(point).latitude] : this.useDecimal(point[this.getKeys(point).latitude]);\n        },\n\n        // Alias for getLat\n        latitude: function(point) {\n            return this.getLat.call(this, point);\n        },\n\n        // returns longitude of a given point, converted to decimal\n        // set raw to true to avoid conversion\n        getLon: function(point, raw) {\n            return raw === true ? point[this.getKeys(point).longitude] : this.useDecimal(point[this.getKeys(point).longitude]);\n        },\n\n        // Alias for getLon\n        longitude: function(point) {\n            return this.getLon.call(this, point);\n        },\n\n        getElev: function(point) {\n            return point[this.getKeys(point).elevation];\n        },\n\n        // Alias for getElev\n        elevation: function(point) {\n            return this.getElev.call(this, point);\n        },\n\n        coords: function(point, raw) {\n\n            var retval = {\n                latitude: raw === true ? point[this.getKeys(point).latitude] : this.useDecimal(point[this.getKeys(point).latitude]),\n                longitude: raw === true ? point[this.getKeys(point).longitude] : this.useDecimal(point[this.getKeys(point).longitude])\n            };\n\n            var elev = point[this.getKeys(point).elevation];\n\n            if(typeof elev !== 'undefined') {\n                retval['elevation'] = elev;\n            }\n\n            return retval;\n\n        },\n\n        // Alias for coords\n        ll: function(point, raw) {\n            return this.coords.call(this, point, raw);\n        },\n\n\n        // checks if a variable contains a valid latlong object\n        validate: function(point) {\n\n            var keys = this.getKeys(point);\n\n            if(typeof keys === 'undefined' || typeof keys.latitude === 'undefined' || keys.longitude === 'undefined') {\n                return false;\n            }\n\n            var lat = point[keys.latitude];\n            var lng = point[keys.longitude];\n\n            if(typeof lat === 'undefined' || !this.isDecimal(lat) && !this.isSexagesimal(lat)) {\n                return false;\n            }\n\n            if(typeof lng === 'undefined' || !this.isDecimal(lng) && !this.isSexagesimal(lng)) {\n                return false;\n            }\n\n            lat = this.useDecimal(lat);\n            lng = this.useDecimal(lng);\n\n            if(lat < this.minLat || lat > this.maxLat || lng < this.minLon || lng > this.maxLon) {\n                return false;\n            }\n\n            return true;\n\n        },\n\n        /**\n        * Calculates geodetic distance between two points specified by latitude/longitude using\n        * Vincenty inverse formula for ellipsoids\n        * Vincenty Inverse Solution of Geodesics on the Ellipsoid (c) Chris Veness 2002-2010\n        * (Licensed under CC BY 3.0)\n        *\n        * @param    object    Start position {latitude: 123, longitude: 123}\n        * @param    object    End position {latitude: 123, longitude: 123}\n        * @param    integer   Accuracy (in meters)\n        * @param    integer   Precision (in decimal cases)\n        * @return   integer   Distance (in meters)\n        */\n        getDistance: function(start, end, accuracy, precision) {\n\n            accuracy = Math.floor(accuracy) || 1;\n            precision = Math.floor(precision) || 0;\n\n            var s = this.coords(start);\n            var e = this.coords(end);\n\n            var a = 6378137, b = 6356752.314245,  f = 1/298.257223563;  // WGS-84 ellipsoid params\n            var L = (e['longitude']-s['longitude']).toRad();\n\n            var cosSigma, sigma, sinAlpha, cosSqAlpha, cos2SigmaM, sinSigma;\n\n            var U1 = Math.atan((1-f) * Math.tan(parseFloat(s['latitude']).toRad()));\n            var U2 = Math.atan((1-f) * Math.tan(parseFloat(e['latitude']).toRad()));\n            var sinU1 = Math.sin(U1), cosU1 = Math.cos(U1);\n            var sinU2 = Math.sin(U2), cosU2 = Math.cos(U2);\n\n            var lambda = L, lambdaP, iterLimit = 100;\n            do {\n                var sinLambda = Math.sin(lambda), cosLambda = Math.cos(lambda);\n                sinSigma = (\n                    Math.sqrt(\n                        (\n                            cosU2 * sinLambda\n                        ) * (\n                            cosU2 * sinLambda\n                        ) + (\n                            cosU1 * sinU2 - sinU1 * cosU2 * cosLambda\n                        ) * (\n                            cosU1 * sinU2 - sinU1 * cosU2 * cosLambda\n                        )\n                    )\n                );\n                if (sinSigma === 0) {\n                    return geolib.distance = 0;  // co-incident points\n                }\n\n                cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * cosLambda;\n                sigma = Math.atan2(sinSigma, cosSigma);\n                sinAlpha = cosU1 * cosU2 * sinLambda / sinSigma;\n                cosSqAlpha = 1 - sinAlpha * sinAlpha;\n                cos2SigmaM = cosSigma - 2 * sinU1 * sinU2 / cosSqAlpha;\n\n                if (isNaN(cos2SigmaM)) {\n                    cos2SigmaM = 0;  // equatorial line: cosSqAlpha=0 (§6)\n                }\n                var C = (\n                    f / 16 * cosSqAlpha * (\n                        4 + f * (\n                            4 - 3 * cosSqAlpha\n                        )\n                    )\n                );\n                lambdaP = lambda;\n                lambda = (\n                    L + (\n                        1 - C\n                    ) * f * sinAlpha * (\n                        sigma + C * sinSigma * (\n                            cos2SigmaM + C * cosSigma * (\n                                -1 + 2 * cos2SigmaM * cos2SigmaM\n                            )\n                        )\n                    )\n                );\n\n            } while (Math.abs(lambda-lambdaP) > 1e-12 && --iterLimit>0);\n\n            if (iterLimit === 0) {\n                return NaN;  // formula failed to converge\n            }\n\n            var uSq = (\n                cosSqAlpha * (\n                    a * a - b * b\n                ) / (\n                    b*b\n                )\n            );\n\n            var A = (\n                1 + uSq / 16384 * (\n                    4096 + uSq * (\n                        -768 + uSq * (\n                            320 - 175 * uSq\n                        )\n                    )\n                )\n            );\n\n            var B = (\n                uSq / 1024 * (\n                    256 + uSq * (\n                        -128 + uSq * (\n                            74-47 * uSq\n                        )\n                    )\n                )\n            );\n\n            var deltaSigma = (\n                B * sinSigma * (\n                    cos2SigmaM + B / 4 * (\n                        cosSigma * (\n                            -1 + 2 * cos2SigmaM * cos2SigmaM\n                        ) -B / 6 * cos2SigmaM * (\n                            -3 + 4 * sinSigma * sinSigma\n                        ) * (\n                            -3 + 4 * cos2SigmaM * cos2SigmaM\n                        )\n                    )\n                )\n            );\n\n            var distance = b * A * (sigma - deltaSigma);\n\n            distance = distance.toFixed(precision); // round to 1mm precision\n\n            //if (start.hasOwnProperty(elevation) && end.hasOwnProperty(elevation)) {\n            if (typeof this.elevation(start) !== 'undefined' && typeof this.elevation(end) !== 'undefined') {\n                var climb = Math.abs(this.elevation(start) - this.elevation(end));\n                distance = Math.sqrt(distance * distance + climb * climb);\n            }\n\n            return this.distance = Math.round(distance * Math.pow(10, precision) / accuracy) * accuracy / Math.pow(10, precision);\n\n            /*\n            // note: to return initial/final bearings in addition to distance, use something like:\n            var fwdAz = Math.atan2(cosU2*sinLambda,  cosU1*sinU2-sinU1*cosU2*cosLambda);\n            var revAz = Math.atan2(cosU1*sinLambda, -sinU1*cosU2+cosU1*sinU2*cosLambda);\n\n            return { distance: s, initialBearing: fwdAz.toDeg(), finalBearing: revAz.toDeg() };\n            */\n\n        },\n\n\n        /**\n        * Calculates the distance between two spots.\n        * This method is more simple but also far more inaccurate\n        *\n        * @param    object    Start position {latitude: 123, longitude: 123}\n        * @param    object    End position {latitude: 123, longitude: 123}\n        * @param    integer   Accuracy (in meters)\n        * @return   integer   Distance (in meters)\n        */\n        getDistanceSimple: function(start, end, accuracy) {\n\n            accuracy = Math.floor(accuracy) || 1;\n\n            var distance =\n                Math.round(\n                    Math.acos(\n                        Math.sin(\n                            this.latitude(end).toRad()\n                        ) *\n                        Math.sin(\n                            this.latitude(start).toRad()\n                        ) +\n                        Math.cos(\n                            this.latitude(end).toRad()\n                        ) *\n                        Math.cos(\n                            this.latitude(start).toRad()\n                        ) *\n                        Math.cos(\n                            this.longitude(start).toRad() - this.longitude(end).toRad()\n                        )\n                    ) * this.radius\n                );\n\n            return geolib.distance = Math.floor(Math.round(distance/accuracy)*accuracy);\n\n        },\n\n\n    /**\n        * Calculates the center of a collection of geo coordinates\n        *\n        * @param        array       Collection of coords [{latitude: 51.510, longitude: 7.1321}, {latitude: 49.1238, longitude: \"8° 30' W\"}, ...]\n        * @return       object      {latitude: centerLat, longitude: centerLng}\n        */\n        getCenter: function(coords) {\n\n            var coordsArray = coords;\n            if(typeof coords === 'object' && !(coords instanceof Array)) {\n\n                coordsArray = [];\n\n                for(var key in coords) {\n                    coordsArray.push(\n                        this.coords(coords[key])\n                    );\n                }\n\n            }\n\n            if(!coordsArray.length) {\n                return false;\n            }\n\n            var X = 0.0;\n            var Y = 0.0;\n            var Z = 0.0;\n            var lat, lon, hyp;\n\n            coordsArray.forEach(function(coord) {\n\n                lat = this.latitude(coord).toRad();\n                lon = this.longitude(coord).toRad();\n\n                X += Math.cos(lat) * Math.cos(lon);\n                Y += Math.cos(lat) * Math.sin(lon);\n                Z += Math.sin(lat);\n\n            }, this);\n\n            var nb_coords = coordsArray.length;\n            X = X / nb_coords;\n            Y = Y / nb_coords;\n            Z = Z / nb_coords;\n\n            lon = Math.atan2(Y, X);\n            hyp = Math.sqrt(X * X + Y * Y);\n            lat = Math.atan2(Z, hyp);\n\n            return {\n                latitude: (lat * Geolib.TO_DEG).toFixed(6),\n                longitude: (lon * Geolib.TO_DEG).toFixed(6)\n            };\n\n        },\n\n\n        /**\n        * Gets the max and min, latitude, longitude, and elevation (if provided).\n        * @param        array       array with coords e.g. [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return   object      {maxLat: maxLat,\n        *                     minLat: minLat\n        *                     maxLng: maxLng,\n        *                     minLng: minLng,\n        *                     maxElev: maxElev,\n        *                     minElev: minElev}\n        */\n        getBounds: function(coords) {\n\n            if (!coords.length) {\n                return false;\n            }\n\n            var useElevation = this.elevation(coords[0]);\n\n            var stats = {\n                maxLat: -Infinity,\n                minLat: Infinity,\n                maxLng: -Infinity,\n                minLng: Infinity\n            };\n\n            if (typeof useElevation != 'undefined') {\n                stats.maxElev = 0;\n                stats.minElev = Infinity;\n            }\n\n            for (var i = 0, l = coords.length; i < l; ++i) {\n\n                stats.maxLat = Math.max(this.latitude(coords[i]), stats.maxLat);\n                stats.minLat = Math.min(this.latitude(coords[i]), stats.minLat);\n                stats.maxLng = Math.max(this.longitude(coords[i]), stats.maxLng);\n                stats.minLng = Math.min(this.longitude(coords[i]), stats.minLng);\n\n                if (useElevation) {\n                    stats.maxElev = Math.max(this.elevation(coords[i]), stats.maxElev);\n                    stats.minElev = Math.min(this.elevation(coords[i]), stats.minElev);\n                }\n\n            }\n\n            return stats;\n\n        },\n\n        /**\n        * Calculates the center of the bounds of geo coordinates.\n        *\n        * On polygons like political borders (eg. states)\n        * this may gives a closer result to human expectation, than `getCenter`,\n        * because that function can be disturbed by uneven distribution of\n        * point in different sides.\n        * Imagine the US state Oklahoma: `getCenter` on that gives a southern\n        * point, because the southern border contains a lot more nodes,\n        * than the others.\n        *\n        * @param        array       Collection of coords [{latitude: 51.510, longitude: 7.1321}, {latitude: 49.1238, longitude: \"8° 30' W\"}, ...]\n        * @return       object      {latitude: centerLat, longitude: centerLng}\n        */\n        getCenterOfBounds: function(coords) {\n            var b = this.getBounds(coords);\n            var latitude = b.minLat + ((b.maxLat - b.minLat) / 2);\n            var longitude = b.minLng + ((b.maxLng - b.minLng) / 2);\n            return {\n                latitude: parseFloat(latitude.toFixed(6)),\n                longitude: parseFloat(longitude.toFixed(6))\n            };\n        },\n\n\n        /**\n        * Computes the bounding coordinates of all points on the surface\n        * of the earth less than or equal to the specified great circle\n        * distance.\n        *\n        * @param object Point position {latitude: 123, longitude: 123}\n        * @param number Distance (in meters).\n        * @return array Collection of two points defining the SW and NE corners.\n        */\n        getBoundsOfDistance: function(point, distance) {\n\n            var latitude = this.latitude(point);\n            var longitude = this.longitude(point);\n\n            var radLat = latitude.toRad();\n            var radLon = longitude.toRad();\n\n            var radDist = distance / this.radius;\n            var minLat = radLat - radDist;\n            var maxLat = radLat + radDist;\n\n            var MAX_LAT_RAD = this.maxLat.toRad();\n            var MIN_LAT_RAD = this.minLat.toRad();\n            var MAX_LON_RAD = this.maxLon.toRad();\n            var MIN_LON_RAD = this.minLon.toRad();\n\n            var minLon;\n            var maxLon;\n\n            if (minLat > MIN_LAT_RAD && maxLat < MAX_LAT_RAD) {\n\n                var deltaLon = Math.asin(Math.sin(radDist) / Math.cos(radLat));\n                minLon = radLon - deltaLon;\n\n                if (minLon < MIN_LON_RAD) {\n                    minLon += Geolib.PI_X2;\n                }\n\n                maxLon = radLon + deltaLon;\n\n                if (maxLon > MAX_LON_RAD) {\n                    maxLon -= Geolib.PI_X2;\n                }\n\n            } else {\n                // A pole is within the distance.\n                minLat = Math.max(minLat, MIN_LAT_RAD);\n                maxLat = Math.min(maxLat, MAX_LAT_RAD);\n                minLon = MIN_LON_RAD;\n                maxLon = MAX_LON_RAD;\n            }\n\n            return [\n                // Southwest\n                {\n                    latitude: minLat.toDeg(),\n                    longitude: minLon.toDeg()\n                },\n                // Northeast\n                {\n                    latitude: maxLat.toDeg(),\n                    longitude: maxLon.toDeg()\n                }\n            ];\n\n        },\n\n\n        /**\n        * Checks whether a point is inside of a polygon or not.\n        * Note that the polygon coords must be in correct order!\n        *\n        * @param        object      coordinate to check e.g. {latitude: 51.5023, longitude: 7.3815}\n        * @param        array       array with coords e.g. [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return       bool        true if the coordinate is inside the given polygon\n        */\n        isPointInside: function(latlng, coords) {\n\n            for(var c = false, i = -1, l = coords.length, j = l - 1; ++i < l; j = i) {\n\n                if(\n                    (\n                        (this.longitude(coords[i]) <= this.longitude(latlng) && this.longitude(latlng) < this.longitude(coords[j])) ||\n                        (this.longitude(coords[j]) <= this.longitude(latlng) && this.longitude(latlng) < this.longitude(coords[i]))\n                    ) &&\n                    (\n                        this.latitude(latlng) < (this.latitude(coords[j]) - this.latitude(coords[i])) *\n                        (this.longitude(latlng) - this.longitude(coords[i])) /\n                        (this.longitude(coords[j]) - this.longitude(coords[i])) +\n                        this.latitude(coords[i])\n                    )\n                ) {\n                    c = !c;\n                }\n\n            }\n\n            return c;\n\n        },\n\n\n       /**\n        * Pre calculate the polygon coords, to speed up the point inside check.\n        * Use this function before calling isPointInsideWithPreparedPolygon()\n        * @see          Algorythm from http://alienryderflex.com/polygon/\n        * @param        array       array with coords e.g. [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        */\n        preparePolygonForIsPointInsideOptimized: function(coords) {\n\n            for(var i = 0, j = coords.length-1; i < coords.length; i++) {\n\n            if(this.longitude(coords[j]) === this.longitude(coords[i])) {\n\n                    coords[i].constant = this.latitude(coords[i]);\n                    coords[i].multiple = 0;\n\n                } else {\n\n                    coords[i].constant = this.latitude(coords[i]) - (\n                        this.longitude(coords[i]) * this.latitude(coords[j])\n                    ) / (\n                        this.longitude(coords[j]) - this.longitude(coords[i])\n                    ) + (\n                        this.longitude(coords[i])*this.latitude(coords[i])\n                    ) / (\n                        this.longitude(coords[j])-this.longitude(coords[i])\n                    );\n\n                    coords[i].multiple = (\n                        this.latitude(coords[j])-this.latitude(coords[i])\n                    ) / (\n                        this.longitude(coords[j])-this.longitude(coords[i])\n                    );\n\n                }\n\n                j=i;\n\n            }\n\n        },\n\n      /**\n       * Checks whether a point is inside of a polygon or not.\n       * \"This is useful if you have many points that need to be tested against the same (static) polygon.\"\n       * Please call the function preparePolygonForIsPointInsideOptimized() with the same coords object before using this function.\n       * Note that the polygon coords must be in correct order!\n       *\n       * @see          Algorythm from http://alienryderflex.com/polygon/\n       *\n       * @param     object      coordinate to check e.g. {latitude: 51.5023, longitude: 7.3815}\n       * @param     array       array with coords e.g. [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n       * @return        bool        true if the coordinate is inside the given polygon\n       */\n        isPointInsideWithPreparedPolygon: function(point, coords) {\n\n            var flgPointInside = false,\n            y = this.longitude(point),\n            x = this.latitude(point);\n\n            for(var i = 0, j = coords.length-1; i < coords.length; i++) {\n\n                if ((this.longitude(coords[i]) < y && this.longitude(coords[j]) >=y ||\n                    this.longitude(coords[j]) < y && this.longitude(coords[i]) >= y)) {\n\n                    flgPointInside^=(y*coords[i].multiple+coords[i].constant < x);\n\n                }\n\n                j=i;\n\n            }\n\n            return flgPointInside;\n\n        },\n\n\n        /**\n        * Shortcut for geolib.isPointInside()\n        */\n        isInside: function() {\n            return this.isPointInside.apply(this, arguments);\n        },\n\n\n        /**\n        * Checks whether a point is inside of a circle or not.\n        *\n        * @param        object      coordinate to check (e.g. {latitude: 51.5023, longitude: 7.3815})\n        * @param        object      coordinate of the circle's center (e.g. {latitude: 51.4812, longitude: 7.4025})\n        * @param        integer     maximum radius in meters\n        * @return       bool        true if the coordinate is within the given radius\n        */\n        isPointInCircle: function(latlng, center, radius) {\n            return this.getDistance(latlng, center) < radius;\n        },\n\n\n        /**\n        * Shortcut for geolib.isPointInCircle()\n        */\n        withinRadius: function() {\n            return this.isPointInCircle.apply(this, arguments);\n        },\n\n\n        /**\n        * Gets rhumb line bearing of two points. Find out about the difference between rhumb line and\n        * great circle bearing on Wikipedia. It's quite complicated. Rhumb line should be fine in most cases:\n        *\n        * http://en.wikipedia.org/wiki/Rhumb_line#General_and_mathematical_description\n        *\n        * Function heavily based on Doug Vanderweide's great PHP version (licensed under GPL 3.0)\n        * http://www.dougv.com/2009/07/13/calculating-the-bearing-and-compass-rose-direction-between-two-latitude-longitude-coordinates-in-php/\n        *\n        * @param        object      origin coordinate (e.g. {latitude: 51.5023, longitude: 7.3815})\n        * @param        object      destination coordinate\n        * @return       integer     calculated bearing\n        */\n        getRhumbLineBearing: function(originLL, destLL) {\n\n            // difference of longitude coords\n            var diffLon = this.longitude(destLL).toRad() - this.longitude(originLL).toRad();\n\n            // difference latitude coords phi\n            var diffPhi = Math.log(\n                Math.tan(\n                    this.latitude(destLL).toRad() / 2 + Geolib.PI_DIV4\n                ) /\n                Math.tan(\n                    this.latitude(originLL).toRad() / 2 + Geolib.PI_DIV4\n                )\n            );\n\n            // recalculate diffLon if it is greater than pi\n            if(Math.abs(diffLon) > Math.PI) {\n                if(diffLon > 0) {\n                    diffLon = (Geolib.PI_X2 - diffLon) * -1;\n                }\n                else {\n                    diffLon = Geolib.PI_X2 + diffLon;\n                }\n            }\n\n            //return the angle, normalized\n            return (Math.atan2(diffLon, diffPhi).toDeg() + 360) % 360;\n\n        },\n\n\n        /**\n        * Gets great circle bearing of two points. See description of getRhumbLineBearing for more information\n        *\n        * @param        object      origin coordinate (e.g. {latitude: 51.5023, longitude: 7.3815})\n        * @param        object      destination coordinate\n        * @return       integer     calculated bearing\n        */\n        getBearing: function(originLL, destLL) {\n\n            destLL['latitude'] = this.latitude(destLL);\n            destLL['longitude'] = this.longitude(destLL);\n            originLL['latitude'] = this.latitude(originLL);\n            originLL['longitude'] = this.longitude(originLL);\n\n            var bearing = (\n                (\n                    Math.atan2(\n                        Math.sin(\n                            destLL['longitude'].toRad() -\n                            originLL['longitude'].toRad()\n                        ) *\n                        Math.cos(\n                            destLL['latitude'].toRad()\n                        ),\n                        Math.cos(\n                            originLL['latitude'].toRad()\n                        ) *\n                        Math.sin(\n                            destLL['latitude'].toRad()\n                        ) -\n                        Math.sin(\n                            originLL['latitude'].toRad()\n                        ) *\n                        Math.cos(\n                            destLL['latitude'].toRad()\n                        ) *\n                        Math.cos(\n                            destLL['longitude'].toRad() - originLL['longitude'].toRad()\n                        )\n                    )\n                ).toDeg() + 360\n            ) % 360;\n\n            return bearing;\n\n        },\n\n\n        /**\n        * Gets the compass direction from an origin coordinate to a destination coordinate.\n        *\n        * @param        object      origin coordinate (e.g. {latitude: 51.5023, longitude: 7.3815})\n        * @param        object      destination coordinate\n        * @param        string      Bearing mode. Can be either circle or rhumbline\n        * @return       object      Returns an object with a rough (NESW) and an exact direction (NNE, NE, ENE, E, ESE, etc).\n        */\n        getCompassDirection: function(originLL, destLL, bearingMode) {\n\n            var direction;\n            var bearing;\n\n            if(bearingMode == 'circle') {\n                // use great circle bearing\n                bearing = this.getBearing(originLL, destLL);\n            } else {\n                // default is rhumb line bearing\n                bearing = this.getRhumbLineBearing(originLL, destLL);\n            }\n\n            switch(Math.round(bearing/22.5)) {\n                case 1:\n                    direction = {exact: \"NNE\", rough: \"N\"};\n                    break;\n                case 2:\n                    direction = {exact: \"NE\", rough: \"N\"};\n                    break;\n                case 3:\n                    direction = {exact: \"ENE\", rough: \"E\"};\n                    break;\n                case 4:\n                    direction = {exact: \"E\", rough: \"E\"};\n                    break;\n                case 5:\n                    direction = {exact: \"ESE\", rough: \"E\"};\n                    break;\n                case 6:\n                    direction = {exact: \"SE\", rough: \"E\"};\n                    break;\n                case 7:\n                    direction = {exact: \"SSE\", rough: \"S\"};\n                    break;\n                case 8:\n                    direction = {exact: \"S\", rough: \"S\"};\n                    break;\n                case 9:\n                    direction = {exact: \"SSW\", rough: \"S\"};\n                    break;\n                case 10:\n                    direction = {exact: \"SW\", rough: \"S\"};\n                    break;\n                case 11:\n                    direction = {exact: \"WSW\", rough: \"W\"};\n                    break;\n                case 12:\n                    direction = {exact: \"W\", rough: \"W\"};\n                    break;\n                case 13:\n                    direction = {exact: \"WNW\", rough: \"W\"};\n                    break;\n                case 14:\n                    direction = {exact: \"NW\", rough: \"W\"};\n                    break;\n                case 15:\n                    direction = {exact: \"NNW\", rough: \"N\"};\n                    break;\n                default:\n                    direction = {exact: \"N\", rough: \"N\"};\n            }\n\n            direction['bearing'] = bearing;\n            return direction;\n\n        },\n\n\n        /**\n        * Shortcut for getCompassDirection\n        */\n        getDirection: function(originLL, destLL, bearingMode) {\n            return this.getCompassDirection.apply(this, arguments);\n        },\n\n\n        /**\n        * Sorts an array of coords by distance from a reference coordinate\n        *\n        * @param        object      reference coordinate e.g. {latitude: 51.5023, longitude: 7.3815}\n        * @param        mixed       array or object with coords [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return       array       ordered array\n        */\n        orderByDistance: function(latlng, coords) {\n\n            var coordsArray = Object.keys(coords).map(function(idx) {\n                var distance = this.getDistance(latlng, coords[idx]);\n                var augmentedCoord = Object.create(coords[idx]);\n                augmentedCoord.distance = distance;\n                augmentedCoord.key = idx;\n                return augmentedCoord;\n            }, this);\n\n            return coordsArray.sort(function(a, b) {\n                return a.distance - b.distance;\n            });\n\n        },\n\n        /**\n        * Check if a point lies in line created by two other points\n        *\n        * @param    object    Point to check: {latitude: 123, longitude: 123}\n        * @param    object    Start of line {latitude: 123, longitude: 123}\n        * @param    object    End of line {latitude: 123, longitude: 123}\n        * @return   boolean\n        */\n        isPointInLine: function(point, start, end) {\n\n            return (this.getDistance(start, point, 1, 3)+this.getDistance(point, end, 1, 3)).toFixed(3)==this.getDistance(start, end, 1, 3);\n        },\n\n                /**\n        * Check if a point lies within a given distance from a line created by two other points\n        *\n        * @param    object    Point to check: {latitude: 123, longitude: 123}\n        * @param    object    Start of line {latitude: 123, longitude: 123}\n        * @param    object    End of line {latitude: 123, longitude: 123}\n        * @pararm   float     maximum distance from line\n        * @return   boolean\n        */\n        isPointNearLine: function(point, start, end, distance) {\n            return this.getDistanceFromLine(point, start, end) < distance;\n        },\n\n                     /**\n        * return the minimum distance from a point to a line\n        *\n        * @param    object    Point away from line\n        * @param    object    Start of line {latitude: 123, longitude: 123}\n        * @param    object    End of line {latitude: 123, longitude: 123}\n        * @return   float     distance from point to line\n        */\n        getDistanceFromLine: function(point, start, end) {\n            var d1 = this.getDistance(start, point, 1, 3);\n            var d2 = this.getDistance(point, end, 1, 3);\n            var d3 = this.getDistance(start, end, 1, 3);\n            var distance = 0;\n\n            // alpha is the angle between the line from start to point, and from start to end //\n            var alpha = Math.acos((d1*d1 + d3*d3 - d2*d2)/(2*d1*d3));\n            // beta is the angle between the line from end to point and from end to start //\n            var beta = Math.acos((d2*d2 + d3*d3 - d1*d1)/(2*d2*d3));\n\n            // if the angle is greater than 90 degrees, then the minimum distance is the\n            // line from the start to the point //\n            if(alpha>Math.PI/2) {\n                distance = d1;\n            }\n            // same for the beta //\n            else if(beta > Math.PI/2) {\n                distance = d2;\n            }\n            // otherwise the minimum distance is achieved through a line perpendular to the start-end line,\n            // which goes from the start-end line to the point //\n            else {\n                distance = Math.sin(alpha) * d1;\n            }\n\n            return distance;\n        },\n\n        /**\n        * Finds the nearest coordinate to a reference coordinate\n        *\n        * @param        object      reference coordinate e.g. {latitude: 51.5023, longitude: 7.3815}\n        * @param        mixed       array or object with coords [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return       array       ordered array\n        */\n        findNearest: function(latlng, coords, offset, limit) {\n\n            offset = offset || 0;\n            limit = limit || 1;\n            var ordered = this.orderByDistance(latlng, coords);\n\n            if(limit === 1) {\n                return ordered[offset];\n            } else {\n                return ordered.splice(offset, limit);\n            }\n\n        },\n\n\n        /**\n        * Calculates the length of a given path\n        *\n        * @param        mixed       array or object with coords [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return       integer     length of the path (in meters)\n        */\n        getPathLength: function(coords) {\n\n            var dist = 0;\n            var last;\n\n            for (var i = 0, l = coords.length; i < l; ++i) {\n                if(last) {\n                    //console.log(coords[i], last, this.getDistance(coords[i], last));\n                    dist += this.getDistance(this.coords(coords[i]), last);\n                }\n                last = this.coords(coords[i]);\n            }\n\n            return dist;\n\n        },\n\n\n        /**\n        * Calculates the speed between to points within a given time span.\n        *\n        * @param        object      coords with javascript timestamp {latitude: 51.5143, longitude: 7.4138, time: 1360231200880}\n        * @param        object      coords with javascript timestamp {latitude: 51.5502, longitude: 7.4323, time: 1360245600460}\n        * @param        object      options (currently \"unit\" is the only option. Default: km(h));\n        * @return       float       speed in unit per hour\n        */\n        getSpeed: function(start, end, options) {\n\n            var unit = options && options.unit || 'km';\n\n            if(unit == 'mph') {\n                unit = 'mi';\n            } else if(unit == 'kmh') {\n                unit = 'km';\n            }\n\n            var distance = geolib.getDistance(start, end);\n            var time = ((end.time*1)/1000) - ((start.time*1)/1000);\n            var mPerHr = (distance/time)*3600;\n            var speed = Math.round(mPerHr * this.measures[unit] * 10000)/10000;\n            return speed;\n\n        },\n\n\n        /**\n         * Computes the destination point given an initial point, a distance\n         * and a bearing\n         *\n         * see http://www.movable-type.co.uk/scripts/latlong.html for the original code\n         *\n         * @param        object     start coordinate (e.g. {latitude: 51.5023, longitude: 7.3815})\n         * @param        float      longitude of the inital point in degree\n         * @param        float      distance to go from the inital point in meter\n         * @param        float      bearing in degree of the direction to go, e.g. 0 = north, 180 = south\n         * @param        float      optional (in meter), defaults to mean radius of the earth\n         * @return       object     {latitude: destLat (in degree), longitude: destLng (in degree)}\n         */\n        computeDestinationPoint: function(start, distance, bearing, radius) {\n\n            var lat = this.latitude(start);\n            var lng = this.longitude(start);\n\n            radius = (typeof radius === 'undefined') ? this.radius : Number(radius);\n\n            var δ = Number(distance) / radius; // angular distance in radians\n            var θ = Number(bearing).toRad();\n\n            var φ1 = Number(lat).toRad();\n            var λ1 = Number(lng).toRad();\n\n            var φ2 = Math.asin( Math.sin(φ1)*Math.cos(δ) +\n                Math.cos(φ1)*Math.sin(δ)*Math.cos(θ) );\n            var λ2 = λ1 + Math.atan2(Math.sin(θ)*Math.sin(δ)*Math.cos(φ1),\n                    Math.cos(δ)-Math.sin(φ1)*Math.sin(φ2));\n            λ2 = (λ2+3*Math.PI) % (2*Math.PI) - Math.PI; // normalise to -180..+180°\n\n            return {\n                latitude: φ2.toDeg(),\n                longitude: λ2.toDeg()\n            };\n\n        },\n\n\n        /**\n        * Converts a distance from meters to km, mm, cm, mi, ft, in or yd\n        *\n        * @param        string      Format to be converted in\n        * @param        float       Distance in meters\n        * @param        float       Decimal places for rounding (default: 4)\n        * @return       float       Converted distance\n        */\n        convertUnit: function(unit, distance, round) {\n\n            if(distance === 0) {\n\n                return 0;\n\n            } else if(typeof distance === 'undefined') {\n\n                if(this.distance === null) {\n                    throw new Error('No distance was given');\n                } else if(this.distance === 0) {\n                    return 0;\n                } else {\n                    distance = this.distance;\n                }\n\n            }\n\n            unit = unit || 'm';\n            round = (null == round ? 4 : round);\n\n            if(typeof this.measures[unit] !== 'undefined') {\n                return this.round(distance * this.measures[unit], round);\n            } else {\n                throw new Error('Unknown unit for conversion.');\n            }\n\n        },\n\n\n        /**\n        * Checks if a value is in decimal format or, if neccessary, converts to decimal\n        *\n        * @param        mixed       Value(s) to be checked/converted (array of latlng objects, latlng object, sexagesimal string, float)\n        * @return       float       Input data in decimal format\n        */\n        useDecimal: function(value) {\n\n            if(Object.prototype.toString.call(value) === '[object Array]') {\n\n                var geolib = this;\n\n                value = value.map(function(val) {\n\n                    //if(!isNaN(parseFloat(val))) {\n                    if(geolib.isDecimal(val)) {\n\n                        return geolib.useDecimal(val);\n\n                    } else if(typeof val == 'object') {\n\n                        if(geolib.validate(val)) {\n\n                            return geolib.coords(val);\n\n                        } else {\n\n                            for(var prop in val) {\n                                val[prop] = geolib.useDecimal(val[prop]);\n                            }\n\n                            return val;\n\n                        }\n\n                    } else if(geolib.isSexagesimal(val)) {\n\n                        return geolib.sexagesimal2decimal(val);\n\n                    } else {\n\n                        return val;\n\n                    }\n\n                });\n\n                return value;\n\n            } else if(typeof value === 'object' && this.validate(value)) {\n\n                return this.coords(value);\n\n            } else if(typeof value === 'object') {\n\n                for(var prop in value) {\n                    value[prop] = this.useDecimal(value[prop]);\n                }\n\n                return value;\n\n            }\n\n\n            if (this.isDecimal(value)) {\n\n                return parseFloat(value);\n\n            } else if(this.isSexagesimal(value) === true) {\n\n                return parseFloat(this.sexagesimal2decimal(value));\n\n            }\n\n            throw new Error('Unknown format.');\n\n        },\n\n        /**\n        * Converts a decimal coordinate value to sexagesimal format\n        *\n        * @param        float       decimal\n        * @return       string      Sexagesimal value (XX° YY' ZZ\")\n        */\n        decimal2sexagesimal: function(dec) {\n\n            if (dec in this.sexagesimal) {\n                return this.sexagesimal[dec];\n            }\n\n            var tmp = dec.toString().split('.');\n\n            var deg = Math.abs(tmp[0]);\n            var min = ('0.' + (tmp[1] || 0))*60;\n            var sec = min.toString().split('.');\n\n            min = Math.floor(min);\n            sec = (('0.' + (sec[1] || 0)) * 60).toFixed(2);\n\n            this.sexagesimal[dec] = (deg + '° ' + min + \"' \" + sec + '\"');\n\n            return this.sexagesimal[dec];\n\n        },\n\n\n        /**\n        * Converts a sexagesimal coordinate to decimal format\n        *\n        * @param        float       Sexagesimal coordinate\n        * @return       string      Decimal value (XX.XXXXXXXX)\n        */\n        sexagesimal2decimal: function(sexagesimal) {\n\n            if (sexagesimal in this.decimal) {\n                return this.decimal[sexagesimal];\n            }\n\n            var regEx = new RegExp(this.sexagesimalPattern);\n            var data = regEx.exec(sexagesimal);\n            var min = 0, sec = 0;\n\n            if(data) {\n                min = parseFloat(data[2]/60);\n                sec = parseFloat(data[4]/3600) || 0;\n            }\n\n            var dec = ((parseFloat(data[1]) + min + sec)).toFixed(8);\n            //var   dec = ((parseFloat(data[1]) + min + sec));\n\n                // South and West are negative decimals\n                dec = (data[7] == 'S' || data[7] == 'W') ? parseFloat(-dec) : parseFloat(dec);\n                //dec = (data[7] == 'S' || data[7] == 'W') ? -dec : dec;\n\n            this.decimal[sexagesimal] = dec;\n\n            return dec;\n\n        },\n\n\n        /**\n        * Checks if a value is in decimal format\n        *\n        * @param        string      Value to be checked\n        * @return       bool        True if in sexagesimal format\n        */\n        isDecimal: function(value) {\n\n            value = value.toString().replace(/\\s*/, '');\n\n            // looks silly but works as expected\n            // checks if value is in decimal format\n            return (!isNaN(parseFloat(value)) && parseFloat(value) == value);\n\n        },\n\n\n        /**\n        * Checks if a value is in sexagesimal format\n        *\n        * @param        string      Value to be checked\n        * @return       bool        True if in sexagesimal format\n        */\n        isSexagesimal: function(value) {\n\n            value = value.toString().replace(/\\s*/, '');\n\n            return this.sexagesimalPattern.test(value);\n\n        },\n\n        round: function(value, n) {\n            var decPlace = Math.pow(10, n);\n            return Math.round(value * decPlace)/decPlace;\n        }\n\n    });\n\n    // Node module\n    if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n\n        module.exports = geolib;\n\n        // react native\n        if (typeof global === 'object') {\n          global.geolib = geolib;\n        }\n\n    // AMD module\n    } else if (typeof define === \"function\" && define.amd) {\n\n        define(\"geolib\", [], function () {\n            return geolib;\n        });\n\n    // we're in a browser\n    } else {\n\n        global.geolib = geolib;\n\n    }\n\n}(this));\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","module.exports = require('./forEach');\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","var baseForOwn = require('./_baseForOwn'),\n    castFunction = require('./_castFunction');\n\n/**\n * Iterates over own enumerable string keyed properties of an object and\n * invokes `iteratee` for each property. The iteratee is invoked with three\n * arguments: (value, key, object). Iteratee functions may exit iteration\n * early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 0.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forOwnRight\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forOwn(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forOwn(object, iteratee) {\n  return object && baseForOwn(object, castFunction(iteratee));\n}\n\nmodule.exports = forOwn;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var toInteger = require('./toInteger');\n\n/**\n * Checks if `value` is an integer.\n *\n * **Note:** This method is based on\n * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n * @example\n *\n * _.isInteger(3);\n * // => true\n *\n * _.isInteger(Number.MIN_VALUE);\n * // => false\n *\n * _.isInteger(Infinity);\n * // => false\n *\n * _.isInteger('3');\n * // => false\n */\nfunction isInteger(value) {\n  return typeof value == 'number' && value == toInteger(value);\n}\n\nmodule.exports = isInteger;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","export var red = {\"50\":\"#ffebee\",\"100\":\"#ffcdd2\",\"200\":\"#ef9a9a\",\"300\":\"#e57373\",\"400\":\"#ef5350\",\"500\":\"#f44336\",\"600\":\"#e53935\",\"700\":\"#d32f2f\",\"800\":\"#c62828\",\"900\":\"#b71c1c\",\"a100\":\"#ff8a80\",\"a200\":\"#ff5252\",\"a400\":\"#ff1744\",\"a700\":\"#d50000\"};\nexport var pink = {\"50\":\"#fce4ec\",\"100\":\"#f8bbd0\",\"200\":\"#f48fb1\",\"300\":\"#f06292\",\"400\":\"#ec407a\",\"500\":\"#e91e63\",\"600\":\"#d81b60\",\"700\":\"#c2185b\",\"800\":\"#ad1457\",\"900\":\"#880e4f\",\"a100\":\"#ff80ab\",\"a200\":\"#ff4081\",\"a400\":\"#f50057\",\"a700\":\"#c51162\"};\nexport var purple = {\"50\":\"#f3e5f5\",\"100\":\"#e1bee7\",\"200\":\"#ce93d8\",\"300\":\"#ba68c8\",\"400\":\"#ab47bc\",\"500\":\"#9c27b0\",\"600\":\"#8e24aa\",\"700\":\"#7b1fa2\",\"800\":\"#6a1b9a\",\"900\":\"#4a148c\",\"a100\":\"#ea80fc\",\"a200\":\"#e040fb\",\"a400\":\"#d500f9\",\"a700\":\"#aa00ff\"};\nexport var deepPurple = {\"50\":\"#ede7f6\",\"100\":\"#d1c4e9\",\"200\":\"#b39ddb\",\"300\":\"#9575cd\",\"400\":\"#7e57c2\",\"500\":\"#673ab7\",\"600\":\"#5e35b1\",\"700\":\"#512da8\",\"800\":\"#4527a0\",\"900\":\"#311b92\",\"a100\":\"#b388ff\",\"a200\":\"#7c4dff\",\"a400\":\"#651fff\",\"a700\":\"#6200ea\"};\nexport var indigo = {\"50\":\"#e8eaf6\",\"100\":\"#c5cae9\",\"200\":\"#9fa8da\",\"300\":\"#7986cb\",\"400\":\"#5c6bc0\",\"500\":\"#3f51b5\",\"600\":\"#3949ab\",\"700\":\"#303f9f\",\"800\":\"#283593\",\"900\":\"#1a237e\",\"a100\":\"#8c9eff\",\"a200\":\"#536dfe\",\"a400\":\"#3d5afe\",\"a700\":\"#304ffe\"};\nexport var blue = {\"50\":\"#e3f2fd\",\"100\":\"#bbdefb\",\"200\":\"#90caf9\",\"300\":\"#64b5f6\",\"400\":\"#42a5f5\",\"500\":\"#2196f3\",\"600\":\"#1e88e5\",\"700\":\"#1976d2\",\"800\":\"#1565c0\",\"900\":\"#0d47a1\",\"a100\":\"#82b1ff\",\"a200\":\"#448aff\",\"a400\":\"#2979ff\",\"a700\":\"#2962ff\"};\nexport var lightBlue = {\"50\":\"#e1f5fe\",\"100\":\"#b3e5fc\",\"200\":\"#81d4fa\",\"300\":\"#4fc3f7\",\"400\":\"#29b6f6\",\"500\":\"#03a9f4\",\"600\":\"#039be5\",\"700\":\"#0288d1\",\"800\":\"#0277bd\",\"900\":\"#01579b\",\"a100\":\"#80d8ff\",\"a200\":\"#40c4ff\",\"a400\":\"#00b0ff\",\"a700\":\"#0091ea\"};\nexport var cyan = {\"50\":\"#e0f7fa\",\"100\":\"#b2ebf2\",\"200\":\"#80deea\",\"300\":\"#4dd0e1\",\"400\":\"#26c6da\",\"500\":\"#00bcd4\",\"600\":\"#00acc1\",\"700\":\"#0097a7\",\"800\":\"#00838f\",\"900\":\"#006064\",\"a100\":\"#84ffff\",\"a200\":\"#18ffff\",\"a400\":\"#00e5ff\",\"a700\":\"#00b8d4\"};\nexport var teal = {\"50\":\"#e0f2f1\",\"100\":\"#b2dfdb\",\"200\":\"#80cbc4\",\"300\":\"#4db6ac\",\"400\":\"#26a69a\",\"500\":\"#009688\",\"600\":\"#00897b\",\"700\":\"#00796b\",\"800\":\"#00695c\",\"900\":\"#004d40\",\"a100\":\"#a7ffeb\",\"a200\":\"#64ffda\",\"a400\":\"#1de9b6\",\"a700\":\"#00bfa5\"};\nexport var green = {\"50\":\"#e8f5e9\",\"100\":\"#c8e6c9\",\"200\":\"#a5d6a7\",\"300\":\"#81c784\",\"400\":\"#66bb6a\",\"500\":\"#4caf50\",\"600\":\"#43a047\",\"700\":\"#388e3c\",\"800\":\"#2e7d32\",\"900\":\"#1b5e20\",\"a100\":\"#b9f6ca\",\"a200\":\"#69f0ae\",\"a400\":\"#00e676\",\"a700\":\"#00c853\"};\nexport var lightGreen = {\"50\":\"#f1f8e9\",\"100\":\"#dcedc8\",\"200\":\"#c5e1a5\",\"300\":\"#aed581\",\"400\":\"#9ccc65\",\"500\":\"#8bc34a\",\"600\":\"#7cb342\",\"700\":\"#689f38\",\"800\":\"#558b2f\",\"900\":\"#33691e\",\"a100\":\"#ccff90\",\"a200\":\"#b2ff59\",\"a400\":\"#76ff03\",\"a700\":\"#64dd17\"};\nexport var lime = {\"50\":\"#f9fbe7\",\"100\":\"#f0f4c3\",\"200\":\"#e6ee9c\",\"300\":\"#dce775\",\"400\":\"#d4e157\",\"500\":\"#cddc39\",\"600\":\"#c0ca33\",\"700\":\"#afb42b\",\"800\":\"#9e9d24\",\"900\":\"#827717\",\"a100\":\"#f4ff81\",\"a200\":\"#eeff41\",\"a400\":\"#c6ff00\",\"a700\":\"#aeea00\"};\nexport var yellow = {\"50\":\"#fffde7\",\"100\":\"#fff9c4\",\"200\":\"#fff59d\",\"300\":\"#fff176\",\"400\":\"#ffee58\",\"500\":\"#ffeb3b\",\"600\":\"#fdd835\",\"700\":\"#fbc02d\",\"800\":\"#f9a825\",\"900\":\"#f57f17\",\"a100\":\"#ffff8d\",\"a200\":\"#ffff00\",\"a400\":\"#ffea00\",\"a700\":\"#ffd600\"};\nexport var amber = {\"50\":\"#fff8e1\",\"100\":\"#ffecb3\",\"200\":\"#ffe082\",\"300\":\"#ffd54f\",\"400\":\"#ffca28\",\"500\":\"#ffc107\",\"600\":\"#ffb300\",\"700\":\"#ffa000\",\"800\":\"#ff8f00\",\"900\":\"#ff6f00\",\"a100\":\"#ffe57f\",\"a200\":\"#ffd740\",\"a400\":\"#ffc400\",\"a700\":\"#ffab00\"};\nexport var orange = {\"50\":\"#fff3e0\",\"100\":\"#ffe0b2\",\"200\":\"#ffcc80\",\"300\":\"#ffb74d\",\"400\":\"#ffa726\",\"500\":\"#ff9800\",\"600\":\"#fb8c00\",\"700\":\"#f57c00\",\"800\":\"#ef6c00\",\"900\":\"#e65100\",\"a100\":\"#ffd180\",\"a200\":\"#ffab40\",\"a400\":\"#ff9100\",\"a700\":\"#ff6d00\"};\nexport var deepOrange = {\"50\":\"#fbe9e7\",\"100\":\"#ffccbc\",\"200\":\"#ffab91\",\"300\":\"#ff8a65\",\"400\":\"#ff7043\",\"500\":\"#ff5722\",\"600\":\"#f4511e\",\"700\":\"#e64a19\",\"800\":\"#d84315\",\"900\":\"#bf360c\",\"a100\":\"#ff9e80\",\"a200\":\"#ff6e40\",\"a400\":\"#ff3d00\",\"a700\":\"#dd2c00\"};\nexport var brown = {\"50\":\"#efebe9\",\"100\":\"#d7ccc8\",\"200\":\"#bcaaa4\",\"300\":\"#a1887f\",\"400\":\"#8d6e63\",\"500\":\"#795548\",\"600\":\"#6d4c41\",\"700\":\"#5d4037\",\"800\":\"#4e342e\",\"900\":\"#3e2723\"};\nexport var grey = {\"50\":\"#fafafa\",\"100\":\"#f5f5f5\",\"200\":\"#eeeeee\",\"300\":\"#e0e0e0\",\"400\":\"#bdbdbd\",\"500\":\"#9e9e9e\",\"600\":\"#757575\",\"700\":\"#616161\",\"800\":\"#424242\",\"900\":\"#212121\"};\nexport var blueGrey = {\"50\":\"#eceff1\",\"100\":\"#cfd8dc\",\"200\":\"#b0bec5\",\"300\":\"#90a4ae\",\"400\":\"#78909c\",\"500\":\"#607d8b\",\"600\":\"#546e7a\",\"700\":\"#455a64\",\"800\":\"#37474f\",\"900\":\"#263238\"};\nexport var darkText = {\"primary\":\"rgba(0, 0, 0, 0.87)\",\"secondary\":\"rgba(0, 0, 0, 0.54)\",\"disabled\":\"rgba(0, 0, 0, 0.38)\",\"dividers\":\"rgba(0, 0, 0, 0.12)\"};\nexport var lightText = {\"primary\":\"rgba(255, 255, 255, 1)\",\"secondary\":\"rgba(255, 255, 255, 0.7)\",\"disabled\":\"rgba(255, 255, 255, 0.5)\",\"dividers\":\"rgba(255, 255, 255, 0.12)\"};\nexport var darkIcons = {\"active\":\"rgba(0, 0, 0, 0.54)\",\"inactive\":\"rgba(0, 0, 0, 0.38)\"};\nexport var lightIcons = {\"active\":\"rgba(255, 255, 255, 1)\",\"inactive\":\"rgba(255, 255, 255, 0.5)\"};\nexport var white = \"#ffffff\";\nexport var black = \"#000000\";\n\nexport default {\n  red: red,\n  pink: pink,\n  purple: purple,\n  deepPurple: deepPurple,\n  indigo: indigo,\n  blue: blue,\n  lightBlue: lightBlue,\n  cyan: cyan,\n  teal: teal,\n  green: green,\n  lightGreen: lightGreen,\n  lime: lime,\n  yellow: yellow,\n  amber: amber,\n  orange: orange,\n  deepOrange: deepOrange,\n  brown: brown,\n  grey: grey,\n  blueGrey: blueGrey,\n  darkText: darkText,\n  lightText: lightText,\n  darkIcons: darkIcons,\n  lightIcons: lightIcons,\n  white: white,\n  black: black\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AlphaPicker = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _AlphaPointer = require('./AlphaPointer');\n\nvar _AlphaPointer2 = _interopRequireDefault(_AlphaPointer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AlphaPicker = exports.AlphaPicker = function AlphaPicker(_ref) {\n  var rgb = _ref.rgb,\n      hsl = _ref.hsl,\n      width = _ref.width,\n      height = _ref.height,\n      onChange = _ref.onChange,\n      direction = _ref.direction,\n      style = _ref.style,\n      renderers = _ref.renderers,\n      pointer = _ref.pointer,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        position: 'relative',\n        width: width,\n        height: height\n      },\n      alpha: {\n        radius: '2px',\n        style: style\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'alpha-picker ' + className },\n    _react2.default.createElement(_common.Alpha, _extends({}, styles.alpha, {\n      rgb: rgb,\n      hsl: hsl,\n      pointer: pointer,\n      renderers: renderers,\n      onChange: onChange,\n      direction: direction\n    }))\n  );\n};\n\nAlphaPicker.defaultProps = {\n  width: '316px',\n  height: '16px',\n  direction: 'horizontal',\n  pointer: _AlphaPointer2.default\n};\n\nexports.default = (0, _common.ColorWrap)(AlphaPicker);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AlphaPointer = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AlphaPointer = exports.AlphaPointer = function AlphaPointer(_ref) {\n  var direction = _ref.direction;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '18px',\n        height: '18px',\n        borderRadius: '50%',\n        transform: 'translate(-9px, -1px)',\n        backgroundColor: 'rgb(248, 248, 248)',\n        boxShadow: '0 1px 4px 0 rgba(0, 0, 0, 0.37)'\n      }\n    },\n    'vertical': {\n      picker: {\n        transform: 'translate(-3px, -9px)'\n      }\n    }\n  }, { vertical: direction === 'vertical' });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = AlphaPointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Block = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nvar _BlockSwatches = require('./BlockSwatches');\n\nvar _BlockSwatches2 = _interopRequireDefault(_BlockSwatches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Block = exports.Block = function Block(_ref) {\n  var onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      hex = _ref.hex,\n      colors = _ref.colors,\n      width = _ref.width,\n      triangle = _ref.triangle,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var transparent = hex === 'transparent';\n  var handleChange = function handleChange(hexCode, e) {\n    _color2.default.isValidHex(hexCode) && onChange({\n      hex: hexCode,\n      source: 'hex'\n    }, e);\n  };\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      card: {\n        width: width,\n        background: '#fff',\n        boxShadow: '0 1px rgba(0,0,0,.1)',\n        borderRadius: '6px',\n        position: 'relative'\n      },\n      head: {\n        height: '110px',\n        background: hex,\n        borderRadius: '6px 6px 0 0',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        position: 'relative'\n      },\n      body: {\n        padding: '10px'\n      },\n      label: {\n        fontSize: '18px',\n        color: _color2.default.getContrastingColor(hex),\n        position: 'relative'\n      },\n      triangle: {\n        width: '0px',\n        height: '0px',\n        borderStyle: 'solid',\n        borderWidth: '0 10px 10px 10px',\n        borderColor: 'transparent transparent ' + hex + ' transparent',\n        position: 'absolute',\n        top: '-10px',\n        left: '50%',\n        marginLeft: '-10px'\n      },\n      input: {\n        width: '100%',\n        fontSize: '12px',\n        color: '#666',\n        border: '0px',\n        outline: 'none',\n        height: '22px',\n        boxShadow: 'inset 0 0 0 1px #ddd',\n        borderRadius: '4px',\n        padding: '0 7px',\n        boxSizing: 'border-box'\n      }\n    },\n    'hide-triangle': {\n      triangle: {\n        display: 'none'\n      }\n    }\n  }, { 'hide-triangle': triangle === 'hide' });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.card, className: 'block-picker ' + className },\n    _react2.default.createElement('div', { style: styles.triangle }),\n    _react2.default.createElement(\n      'div',\n      { style: styles.head },\n      transparent && _react2.default.createElement(_common.Checkboard, { borderRadius: '6px 6px 0 0' }),\n      _react2.default.createElement(\n        'div',\n        { style: styles.label },\n        hex\n      )\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.body },\n      _react2.default.createElement(_BlockSwatches2.default, { colors: colors, onClick: handleChange, onSwatchHover: onSwatchHover }),\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input },\n        value: hex,\n        onChange: handleChange\n      })\n    )\n  );\n};\n\nBlock.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.string),\n  triangle: _propTypes2.default.oneOf(['top', 'hide'])\n};\n\nBlock.defaultProps = {\n  width: 170,\n  colors: ['#D9E3F0', '#F47373', '#697689', '#37D67A', '#2CCCE4', '#555555', '#dce775', '#ff8a65', '#ba68c8'],\n  triangle: 'top'\n};\n\nexports.default = (0, _common.ColorWrap)(Block);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BlockSwatches = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BlockSwatches = exports.BlockSwatches = function BlockSwatches(_ref) {\n  var colors = _ref.colors,\n      onClick = _ref.onClick,\n      onSwatchHover = _ref.onSwatchHover;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatches: {\n        marginRight: '-10px'\n      },\n      swatch: {\n        width: '22px',\n        height: '22px',\n        float: 'left',\n        marginRight: '10px',\n        marginBottom: '10px',\n        borderRadius: '4px'\n      },\n      clear: {\n        clear: 'both'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.swatches },\n    (0, _map2.default)(colors, function (c) {\n      return _react2.default.createElement(_common.Swatch, {\n        key: c,\n        color: c,\n        style: styles.swatch,\n        onClick: onClick,\n        onHover: onSwatchHover,\n        focusStyle: {\n          boxShadow: '0 0 4px ' + c\n        }\n      });\n    }),\n    _react2.default.createElement('div', { style: styles.clear })\n  );\n};\n\nexports.default = BlockSwatches;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Chrome = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _ChromeFields = require('./ChromeFields');\n\nvar _ChromeFields2 = _interopRequireDefault(_ChromeFields);\n\nvar _ChromePointer = require('./ChromePointer');\n\nvar _ChromePointer2 = _interopRequireDefault(_ChromePointer);\n\nvar _ChromePointerCircle = require('./ChromePointerCircle');\n\nvar _ChromePointerCircle2 = _interopRequireDefault(_ChromePointerCircle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Chrome = exports.Chrome = function Chrome(_ref) {\n  var onChange = _ref.onChange,\n      disableAlpha = _ref.disableAlpha,\n      rgb = _ref.rgb,\n      hsl = _ref.hsl,\n      hsv = _ref.hsv,\n      hex = _ref.hex,\n      renderers = _ref.renderers,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        background: '#fff',\n        borderRadius: '2px',\n        boxShadow: '0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)',\n        boxSizing: 'initial',\n        width: '225px',\n        fontFamily: 'Menlo'\n      },\n      saturation: {\n        width: '100%',\n        paddingBottom: '55%',\n        position: 'relative',\n        borderRadius: '2px 2px 0 0',\n        overflow: 'hidden'\n      },\n      Saturation: {\n        radius: '2px 2px 0 0'\n      },\n      body: {\n        padding: '16px 16px 12px'\n      },\n      controls: {\n        display: 'flex'\n      },\n      color: {\n        width: '32px'\n      },\n      swatch: {\n        marginTop: '6px',\n        width: '16px',\n        height: '16px',\n        borderRadius: '8px',\n        position: 'relative',\n        overflow: 'hidden'\n      },\n      active: {\n        absolute: '0px 0px 0px 0px',\n        borderRadius: '8px',\n        boxShadow: 'inset 0 0 0 1px rgba(0,0,0,.1)',\n        background: 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', ' + rgb.a + ')',\n        zIndex: '2'\n      },\n      toggles: {\n        flex: '1'\n      },\n      hue: {\n        height: '10px',\n        position: 'relative',\n        marginBottom: '8px'\n      },\n      Hue: {\n        radius: '2px'\n      },\n      alpha: {\n        height: '10px',\n        position: 'relative'\n      },\n      Alpha: {\n        radius: '2px'\n      }\n    },\n    'disableAlpha': {\n      color: {\n        width: '22px'\n      },\n      alpha: {\n        display: 'none'\n      },\n      hue: {\n        marginBottom: '0px'\n      },\n      swatch: {\n        width: '10px',\n        height: '10px',\n        marginTop: '0px'\n      }\n    }\n  }, { disableAlpha: disableAlpha });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'chrome-picker ' + className },\n    _react2.default.createElement(\n      'div',\n      { style: styles.saturation },\n      _react2.default.createElement(_common.Saturation, {\n        style: styles.Saturation,\n        hsl: hsl,\n        hsv: hsv,\n        pointer: _ChromePointerCircle2.default,\n        onChange: onChange\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.body },\n      _react2.default.createElement(\n        'div',\n        { style: styles.controls, className: 'flexbox-fix' },\n        _react2.default.createElement(\n          'div',\n          { style: styles.color },\n          _react2.default.createElement(\n            'div',\n            { style: styles.swatch },\n            _react2.default.createElement('div', { style: styles.active }),\n            _react2.default.createElement(_common.Checkboard, { renderers: renderers })\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.toggles },\n          _react2.default.createElement(\n            'div',\n            { style: styles.hue },\n            _react2.default.createElement(_common.Hue, {\n              style: styles.Hue,\n              hsl: hsl,\n              pointer: _ChromePointer2.default,\n              onChange: onChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.alpha },\n            _react2.default.createElement(_common.Alpha, {\n              style: styles.Alpha,\n              rgb: rgb,\n              hsl: hsl,\n              pointer: _ChromePointer2.default,\n              renderers: renderers,\n              onChange: onChange\n            })\n          )\n        )\n      ),\n      _react2.default.createElement(_ChromeFields2.default, {\n        rgb: rgb,\n        hsl: hsl,\n        hex: hex,\n        onChange: onChange,\n        disableAlpha: disableAlpha\n      })\n    )\n  );\n};\n\nChrome.propTypes = {\n  disableAlpha: _propTypes2.default.bool\n};\n\nChrome.defaultProps = {\n  disableAlpha: false\n};\n\nexports.default = (0, _common.ColorWrap)(Chrome);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChromeFields = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable react/no-did-mount-set-state, no-param-reassign */\n\nvar ChromeFields = exports.ChromeFields = function (_React$Component) {\n  _inherits(ChromeFields, _React$Component);\n\n  function ChromeFields() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ChromeFields);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ChromeFields.__proto__ || Object.getPrototypeOf(ChromeFields)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      view: ''\n    }, _this.toggleViews = function () {\n      if (_this.state.view === 'hex') {\n        _this.setState({ view: 'rgb' });\n      } else if (_this.state.view === 'rgb') {\n        _this.setState({ view: 'hsl' });\n      } else if (_this.state.view === 'hsl') {\n        if (_this.props.hsl.a === 1) {\n          _this.setState({ view: 'hex' });\n        } else {\n          _this.setState({ view: 'rgb' });\n        }\n      }\n    }, _this.handleChange = function (data, e) {\n      if (data.hex) {\n        _color2.default.isValidHex(data.hex) && _this.props.onChange({\n          hex: data.hex,\n          source: 'hex'\n        }, e);\n      } else if (data.r || data.g || data.b) {\n        _this.props.onChange({\n          r: data.r || _this.props.rgb.r,\n          g: data.g || _this.props.rgb.g,\n          b: data.b || _this.props.rgb.b,\n          source: 'rgb'\n        }, e);\n      } else if (data.a) {\n        if (data.a < 0) {\n          data.a = 0;\n        } else if (data.a > 1) {\n          data.a = 1;\n        }\n\n        _this.props.onChange({\n          h: _this.props.hsl.h,\n          s: _this.props.hsl.s,\n          l: _this.props.hsl.l,\n          a: Math.round(data.a * 100) / 100,\n          source: 'rgb'\n        }, e);\n      } else if (data.h || data.s || data.l) {\n        _this.props.onChange({\n          h: data.h || _this.props.hsl.h,\n          s: Number(data.s && data.s || _this.props.hsl.s),\n          l: Number(data.l && data.l || _this.props.hsl.l),\n          source: 'hsl'\n        }, e);\n      }\n    }, _this.showHighlight = function (e) {\n      e.target.style.background = '#eee';\n    }, _this.hideHighlight = function (e) {\n      e.target.style.background = 'transparent';\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(ChromeFields, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.hsl.a === 1 && this.state.view !== 'hex') {\n        this.setState({ view: 'hex' });\n      } else if (this.state.view !== 'rgb' && this.state.view !== 'hsl') {\n        this.setState({ view: 'rgb' });\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.hsl.a !== 1 && this.state.view === 'hex') {\n        this.setState({ view: 'rgb' });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          wrap: {\n            paddingTop: '16px',\n            display: 'flex'\n          },\n          fields: {\n            flex: '1',\n            display: 'flex',\n            marginLeft: '-6px'\n          },\n          field: {\n            paddingLeft: '6px',\n            width: '100%'\n          },\n          alpha: {\n            paddingLeft: '6px',\n            width: '100%'\n          },\n          toggle: {\n            width: '32px',\n            textAlign: 'right',\n            position: 'relative'\n          },\n          icon: {\n            marginRight: '-4px',\n            marginTop: '12px',\n            cursor: 'pointer',\n            position: 'relative'\n          },\n          iconHighlight: {\n            position: 'absolute',\n            width: '24px',\n            height: '28px',\n            background: '#eee',\n            borderRadius: '4px',\n            top: '10px',\n            left: '12px',\n            display: 'none'\n          },\n          input: {\n            fontSize: '11px',\n            color: '#333',\n            width: '100%',\n            borderRadius: '2px',\n            border: 'none',\n            boxShadow: 'inset 0 0 0 1px #dadada',\n            height: '21px',\n            textAlign: 'center'\n          },\n          label: {\n            textTransform: 'uppercase',\n            fontSize: '11px',\n            lineHeight: '11px',\n            color: '#969696',\n            textAlign: 'center',\n            display: 'block',\n            marginTop: '12px'\n          },\n          svg: {\n            width: '24px',\n            height: '24px',\n            border: '1px transparent solid',\n            borderRadius: '5px'\n          }\n        },\n        'disableAlpha': {\n          alpha: {\n            display: 'none'\n          }\n        }\n      }, this.props, this.state);\n\n      var fields = void 0;\n      if (this.state.view === 'hex') {\n        fields = _react2.default.createElement(\n          'div',\n          { style: styles.fields, className: 'flexbox-fix' },\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'hex', value: this.props.hex,\n              onChange: this.handleChange\n            })\n          )\n        );\n      } else if (this.state.view === 'rgb') {\n        fields = _react2.default.createElement(\n          'div',\n          { style: styles.fields, className: 'flexbox-fix' },\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'r',\n              value: this.props.rgb.r,\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'g',\n              value: this.props.rgb.g,\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'b',\n              value: this.props.rgb.b,\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.alpha },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'a',\n              value: this.props.rgb.a,\n              arrowOffset: 0.01,\n              onChange: this.handleChange\n            })\n          )\n        );\n      } else if (this.state.view === 'hsl') {\n        fields = _react2.default.createElement(\n          'div',\n          { style: styles.fields, className: 'flexbox-fix' },\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'h',\n              value: Math.round(this.props.hsl.h),\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 's',\n              value: Math.round(this.props.hsl.s * 100) + '%',\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'l',\n              value: Math.round(this.props.hsl.l * 100) + '%',\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.alpha },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'a',\n              value: this.props.hsl.a,\n              arrowOffset: 0.01,\n              onChange: this.handleChange\n            })\n          )\n        );\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.wrap, className: 'flexbox-fix' },\n        fields,\n        _react2.default.createElement(\n          'div',\n          { style: styles.toggle },\n          _react2.default.createElement(\n            'div',\n            { style: styles.icon, onClick: this.toggleViews, ref: function ref(icon) {\n                return _this2.icon = icon;\n              } },\n            _react2.default.createElement(\n              'svg',\n              {\n                style: styles.svg,\n                viewBox: '0 0 24 24',\n                onMouseOver: this.showHighlight,\n                onMouseEnter: this.showHighlight,\n                onMouseOut: this.hideHighlight\n              },\n              _react2.default.createElement('path', {\n                ref: function ref(iconUp) {\n                  return _this2.iconUp = iconUp;\n                },\n                fill: '#333',\n                d: 'M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z'\n              }),\n              _react2.default.createElement('path', {\n                ref: function ref(iconDown) {\n                  return _this2.iconDown = iconDown;\n                },\n                fill: '#333',\n                d: 'M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z'\n              })\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return ChromeFields;\n}(_react2.default.Component);\n\nexports.default = ChromeFields;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChromePointer = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ChromePointer = exports.ChromePointer = function ChromePointer() {\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '12px',\n        height: '12px',\n        borderRadius: '6px',\n        transform: 'translate(-6px, -1px)',\n        backgroundColor: 'rgb(248, 248, 248)',\n        boxShadow: '0 1px 4px 0 rgba(0, 0, 0, 0.37)'\n      }\n    }\n  });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = ChromePointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChromePointerCircle = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ChromePointerCircle = exports.ChromePointerCircle = function ChromePointerCircle() {\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '12px',\n        height: '12px',\n        borderRadius: '6px',\n        boxShadow: 'inset 0 0 0 1px #fff',\n        transform: 'translate(-6px, -6px)'\n      }\n    }\n  });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = ChromePointerCircle;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Circle = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _materialColors = require('material-colors');\n\nvar material = _interopRequireWildcard(_materialColors);\n\nvar _common = require('../common');\n\nvar _CircleSwatch = require('./CircleSwatch');\n\nvar _CircleSwatch2 = _interopRequireDefault(_CircleSwatch);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Circle = exports.Circle = function Circle(_ref) {\n  var width = _ref.width,\n      onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      colors = _ref.colors,\n      hex = _ref.hex,\n      circleSize = _ref.circleSize,\n      circleSpacing = _ref.circleSpacing,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      card: {\n        width: width,\n        display: 'flex',\n        flexWrap: 'wrap',\n        marginRight: -circleSpacing,\n        marginBottom: -circleSpacing\n      }\n    }\n  });\n\n  var handleChange = function handleChange(hexCode, e) {\n    return onChange({ hex: hexCode, source: 'hex' }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.card, className: 'circle-picker ' + className },\n    (0, _map2.default)(colors, function (c) {\n      return _react2.default.createElement(_CircleSwatch2.default, {\n        key: c,\n        color: c,\n        onClick: handleChange,\n        onSwatchHover: onSwatchHover,\n        active: hex === c.toLowerCase(),\n        circleSize: circleSize,\n        circleSpacing: circleSpacing\n      });\n    })\n  );\n};\n\nCircle.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  circleSize: _propTypes2.default.number,\n  circleSpacing: _propTypes2.default.number\n};\n\nCircle.defaultProps = {\n  width: 252,\n  circleSize: 28,\n  circleSpacing: 14,\n  colors: [material.red['500'], material.pink['500'], material.purple['500'], material.deepPurple['500'], material.indigo['500'], material.blue['500'], material.lightBlue['500'], material.cyan['500'], material.teal['500'], material.green['500'], material.lightGreen['500'], material.lime['500'], material.yellow['500'], material.amber['500'], material.orange['500'], material.deepOrange['500'], material.brown['500'], material.blueGrey['500']]\n};\n\nexports.default = (0, _common.ColorWrap)(Circle);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CircleSwatch = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CircleSwatch = exports.CircleSwatch = function CircleSwatch(_ref) {\n  var color = _ref.color,\n      onClick = _ref.onClick,\n      onSwatchHover = _ref.onSwatchHover,\n      hover = _ref.hover,\n      active = _ref.active,\n      circleSize = _ref.circleSize,\n      circleSpacing = _ref.circleSpacing;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatch: {\n        width: circleSize,\n        height: circleSize,\n        marginRight: circleSpacing,\n        marginBottom: circleSpacing,\n        transform: 'scale(1)',\n        transition: '100ms transform ease'\n      },\n      Swatch: {\n        borderRadius: '50%',\n        background: 'transparent',\n        boxShadow: 'inset 0 0 0 ' + circleSize / 2 + 'px ' + color,\n        transition: '100ms box-shadow ease'\n      }\n    },\n    'hover': {\n      swatch: {\n        transform: 'scale(1.2)'\n      }\n    },\n    'active': {\n      Swatch: {\n        boxShadow: 'inset 0 0 0 3px ' + color\n      }\n    }\n  }, { hover: hover, active: active });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.swatch },\n    _react2.default.createElement(_common.Swatch, {\n      style: styles.Swatch,\n      color: color,\n      onClick: onClick,\n      onHover: onSwatchHover,\n      focusStyle: { boxShadow: styles.Swatch.boxShadow + ', 0 0 5px ' + color }\n    })\n  );\n};\n\nCircleSwatch.defaultProps = {\n  circleSize: 28,\n  circleSpacing: 14\n};\n\nexports.default = (0, _reactcss.handleHover)(CircleSwatch);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Alpha = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _alpha = require('../../helpers/alpha');\n\nvar alpha = _interopRequireWildcard(_alpha);\n\nvar _Checkboard = require('./Checkboard');\n\nvar _Checkboard2 = _interopRequireDefault(_Checkboard);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Alpha = exports.Alpha = function (_ref) {\n  _inherits(Alpha, _ref);\n\n  function Alpha() {\n    var _ref2;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Alpha);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = Alpha.__proto__ || Object.getPrototypeOf(Alpha)).call.apply(_ref2, [this].concat(args))), _this), _this.handleChange = function (e, skip) {\n      var change = alpha.calculateChange(e, skip, _this.props, _this.container);\n      change && _this.props.onChange && _this.props.onChange(change, e);\n    }, _this.handleMouseDown = function (e) {\n      _this.handleChange(e, true);\n      window.addEventListener('mousemove', _this.handleChange);\n      window.addEventListener('mouseup', _this.handleMouseUp);\n    }, _this.handleMouseUp = function () {\n      _this.unbindEventListeners();\n    }, _this.unbindEventListeners = function () {\n      window.removeEventListener('mousemove', _this.handleChange);\n      window.removeEventListener('mouseup', _this.handleMouseUp);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Alpha, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unbindEventListeners();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var rgb = this.props.rgb;\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          alpha: {\n            absolute: '0px 0px 0px 0px',\n            borderRadius: this.props.radius\n          },\n          checkboard: {\n            absolute: '0px 0px 0px 0px',\n            overflow: 'hidden',\n            borderRadius: this.props.radius\n          },\n          gradient: {\n            absolute: '0px 0px 0px 0px',\n            background: 'linear-gradient(to right, rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ', 0) 0%,\\n           rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ', 1) 100%)',\n            boxShadow: this.props.shadow,\n            borderRadius: this.props.radius\n          },\n          container: {\n            position: 'relative',\n            height: '100%',\n            margin: '0 3px'\n          },\n          pointer: {\n            position: 'absolute',\n            left: rgb.a * 100 + '%'\n          },\n          slider: {\n            width: '4px',\n            borderRadius: '1px',\n            height: '8px',\n            boxShadow: '0 0 2px rgba(0, 0, 0, .6)',\n            background: '#fff',\n            marginTop: '1px',\n            transform: 'translateX(-2px)'\n          }\n        },\n        'vertical': {\n          gradient: {\n            background: 'linear-gradient(to bottom, rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ', 0) 0%,\\n           rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ', 1) 100%)'\n          },\n          pointer: {\n            left: 0,\n            top: rgb.a * 100 + '%'\n          }\n        },\n        'overwrite': _extends({}, this.props.style)\n      }, {\n        vertical: this.props.direction === 'vertical',\n        overwrite: true\n      });\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.alpha },\n        _react2.default.createElement(\n          'div',\n          { style: styles.checkboard },\n          _react2.default.createElement(_Checkboard2.default, { renderers: this.props.renderers })\n        ),\n        _react2.default.createElement('div', { style: styles.gradient }),\n        _react2.default.createElement(\n          'div',\n          {\n            style: styles.container,\n            ref: function ref(container) {\n              return _this2.container = container;\n            },\n            onMouseDown: this.handleMouseDown,\n            onTouchMove: this.handleChange,\n            onTouchStart: this.handleChange\n          },\n          _react2.default.createElement(\n            'div',\n            { style: styles.pointer },\n            this.props.pointer ? _react2.default.createElement(this.props.pointer, this.props) : _react2.default.createElement('div', { style: styles.slider })\n          )\n        )\n      );\n    }\n  }]);\n\n  return Alpha;\n}(_react.PureComponent || _react.Component);\n\nexports.default = Alpha;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Checkboard = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _checkboard = require('../../helpers/checkboard');\n\nvar checkboard = _interopRequireWildcard(_checkboard);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Checkboard = exports.Checkboard = function Checkboard(_ref) {\n  var white = _ref.white,\n      grey = _ref.grey,\n      size = _ref.size,\n      renderers = _ref.renderers,\n      borderRadius = _ref.borderRadius,\n      boxShadow = _ref.boxShadow;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      grid: {\n        borderRadius: borderRadius,\n        boxShadow: boxShadow,\n        absolute: '0px 0px 0px 0px',\n        background: 'url(' + checkboard.get(white, grey, size, renderers.canvas) + ') center left'\n      }\n    }\n  });\n\n  return _react2.default.createElement('div', { style: styles.grid });\n};\n\nCheckboard.defaultProps = {\n  size: 8,\n  white: 'transparent',\n  grey: 'rgba(0,0,0,.08)',\n  renderers: {}\n};\n\nexports.default = Checkboard;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColorWrap = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _debounce = require('lodash/debounce');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ColorWrap = exports.ColorWrap = function ColorWrap(Picker) {\n  var ColorPicker = function (_ref) {\n    _inherits(ColorPicker, _ref);\n\n    function ColorPicker(props) {\n      _classCallCheck(this, ColorPicker);\n\n      var _this = _possibleConstructorReturn(this, (ColorPicker.__proto__ || Object.getPrototypeOf(ColorPicker)).call(this));\n\n      _this.handleChange = function (data, event) {\n        var isValidColor = _color2.default.simpleCheckForValidColor(data);\n        if (isValidColor) {\n          var colors = _color2.default.toState(data, data.h || _this.state.oldHue);\n          _this.setState(colors);\n          _this.props.onChangeComplete && _this.debounce(_this.props.onChangeComplete, colors, event);\n          _this.props.onChange && _this.props.onChange(colors, event);\n        }\n      };\n\n      _this.handleSwatchHover = function (data, event) {\n        var isValidColor = _color2.default.simpleCheckForValidColor(data);\n        if (isValidColor) {\n          var colors = _color2.default.toState(data, data.h || _this.state.oldHue);\n          _this.setState(colors);\n          _this.props.onSwatchHover && _this.props.onSwatchHover(colors, event);\n        }\n      };\n\n      _this.state = _extends({}, _color2.default.toState(props.color, 0));\n\n      _this.debounce = (0, _debounce2.default)(function (fn, data, event) {\n        fn(data, event);\n      }, 100);\n      return _this;\n    }\n\n    _createClass(ColorPicker, [{\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        this.setState(_extends({}, _color2.default.toState(nextProps.color, this.state.oldHue)));\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var optionalEvents = {};\n        if (this.props.onSwatchHover) {\n          optionalEvents.onSwatchHover = this.handleSwatchHover;\n        }\n\n        return _react2.default.createElement(Picker, _extends({}, this.props, this.state, {\n          onChange: this.handleChange\n        }, optionalEvents));\n      }\n    }]);\n\n    return ColorPicker;\n  }(_react.PureComponent || _react.Component);\n\n  ColorPicker.propTypes = _extends({}, Picker.propTypes);\n\n  ColorPicker.defaultProps = _extends({}, Picker.defaultProps, {\n    color: {\n      h: 250,\n      s: 0.50,\n      l: 0.20,\n      a: 1\n    }\n  });\n\n  return ColorPicker;\n};\n\nexports.default = ColorWrap;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EditableInput = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EditableInput = exports.EditableInput = function (_ref) {\n  _inherits(EditableInput, _ref);\n\n  function EditableInput(props) {\n    _classCallCheck(this, EditableInput);\n\n    var _this = _possibleConstructorReturn(this, (EditableInput.__proto__ || Object.getPrototypeOf(EditableInput)).call(this));\n\n    _this.handleBlur = function () {\n      if (_this.state.blurValue) {\n        _this.setState({ value: _this.state.blurValue, blurValue: null });\n      }\n    };\n\n    _this.handleChange = function (e) {\n      if (_this.props.label) {\n        _this.props.onChange && _this.props.onChange(_defineProperty({}, _this.props.label, e.target.value), e);\n      } else {\n        _this.props.onChange && _this.props.onChange(e.target.value, e);\n      }\n\n      _this.setState({ value: e.target.value });\n    };\n\n    _this.handleKeyDown = function (e) {\n      // In case `e.target.value` is a percentage remove the `%` character\n      // and update accordingly with a percentage\n      // https://github.com/casesandberg/react-color/issues/383\n      var stringValue = String(e.target.value);\n      var isPercentage = stringValue.indexOf('%') > -1;\n      var number = Number(stringValue.replace(/%/g, ''));\n      if (!isNaN(number)) {\n        var amount = _this.props.arrowOffset || 1;\n\n        // Up\n        if (e.keyCode === 38) {\n          if (_this.props.label !== null) {\n            _this.props.onChange && _this.props.onChange(_defineProperty({}, _this.props.label, number + amount), e);\n          } else {\n            _this.props.onChange && _this.props.onChange(number + amount, e);\n          }\n\n          if (isPercentage) {\n            _this.setState({ value: number + amount + '%' });\n          } else {\n            _this.setState({ value: number + amount });\n          }\n        }\n\n        // Down\n        if (e.keyCode === 40) {\n          if (_this.props.label !== null) {\n            _this.props.onChange && _this.props.onChange(_defineProperty({}, _this.props.label, number - amount), e);\n          } else {\n            _this.props.onChange && _this.props.onChange(number - amount, e);\n          }\n\n          if (isPercentage) {\n            _this.setState({ value: number - amount + '%' });\n          } else {\n            _this.setState({ value: number - amount });\n          }\n        }\n      }\n    };\n\n    _this.handleDrag = function (e) {\n      if (_this.props.dragLabel) {\n        var newValue = Math.round(_this.props.value + e.movementX);\n        if (newValue >= 0 && newValue <= _this.props.dragMax) {\n          _this.props.onChange && _this.props.onChange(_defineProperty({}, _this.props.label, newValue), e);\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (e) {\n      if (_this.props.dragLabel) {\n        e.preventDefault();\n        _this.handleDrag(e);\n        window.addEventListener('mousemove', _this.handleDrag);\n        window.addEventListener('mouseup', _this.handleMouseUp);\n      }\n    };\n\n    _this.handleMouseUp = function () {\n      _this.unbindEventListeners();\n    };\n\n    _this.unbindEventListeners = function () {\n      window.removeEventListener('mousemove', _this.handleDrag);\n      window.removeEventListener('mouseup', _this.handleMouseUp);\n    };\n\n    _this.state = {\n      value: String(props.value).toUpperCase(),\n      blurValue: String(props.value).toUpperCase()\n    };\n    return _this;\n  }\n\n  _createClass(EditableInput, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var input = this.input;\n      if (nextProps.value !== this.state.value) {\n        if (input === document.activeElement) {\n          this.setState({ blurValue: String(nextProps.value).toUpperCase() });\n        } else {\n          this.setState({ value: String(nextProps.value).toUpperCase(), blurValue: !this.state.blurValue && String(nextProps.value).toUpperCase() });\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unbindEventListeners();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          wrap: {\n            position: 'relative'\n          }\n        },\n        'user-override': {\n          wrap: this.props.style && this.props.style.wrap ? this.props.style.wrap : {},\n          input: this.props.style && this.props.style.input ? this.props.style.input : {},\n          label: this.props.style && this.props.style.label ? this.props.style.label : {}\n        },\n        'dragLabel-true': {\n          label: {\n            cursor: 'ew-resize'\n          }\n        }\n      }, {\n        'user-override': true\n      }, this.props);\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.wrap },\n        _react2.default.createElement('input', {\n          style: styles.input,\n          ref: function ref(input) {\n            return _this2.input = input;\n          },\n          value: this.state.value,\n          onKeyDown: this.handleKeyDown,\n          onChange: this.handleChange,\n          onBlur: this.handleBlur,\n          placeholder: this.props.placeholder,\n          spellCheck: 'false'\n        }),\n        this.props.label && !this.props.hideLabel ? _react2.default.createElement(\n          'span',\n          { style: styles.label, onMouseDown: this.handleMouseDown },\n          this.props.label\n        ) : null\n      );\n    }\n  }]);\n\n  return EditableInput;\n}(_react.PureComponent || _react.Component);\n\nexports.default = EditableInput;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Hue = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _hue = require('../../helpers/hue');\n\nvar hue = _interopRequireWildcard(_hue);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Hue = exports.Hue = function (_ref) {\n  _inherits(Hue, _ref);\n\n  function Hue() {\n    var _ref2;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Hue);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = Hue.__proto__ || Object.getPrototypeOf(Hue)).call.apply(_ref2, [this].concat(args))), _this), _this.handleChange = function (e, skip) {\n      var change = hue.calculateChange(e, skip, _this.props, _this.container);\n      change && _this.props.onChange && _this.props.onChange(change, e);\n    }, _this.handleMouseDown = function (e) {\n      _this.handleChange(e, true);\n      window.addEventListener('mousemove', _this.handleChange);\n      window.addEventListener('mouseup', _this.handleMouseUp);\n    }, _this.handleMouseUp = function () {\n      _this.unbindEventListeners();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Hue, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unbindEventListeners();\n    }\n  }, {\n    key: 'unbindEventListeners',\n    value: function unbindEventListeners() {\n      window.removeEventListener('mousemove', this.handleChange);\n      window.removeEventListener('mouseup', this.handleMouseUp);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props$direction = this.props.direction,\n          direction = _props$direction === undefined ? 'horizontal' : _props$direction;\n\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          hue: {\n            absolute: '0px 0px 0px 0px',\n            borderRadius: this.props.radius,\n            boxShadow: this.props.shadow\n          },\n          container: {\n            padding: '0 2px',\n            position: 'relative',\n            height: '100%',\n            borderRadius: this.props.radius\n          },\n          pointer: {\n            position: 'absolute',\n            left: this.props.hsl.h * 100 / 360 + '%'\n          },\n          slider: {\n            marginTop: '1px',\n            width: '4px',\n            borderRadius: '1px',\n            height: '8px',\n            boxShadow: '0 0 2px rgba(0, 0, 0, .6)',\n            background: '#fff',\n            transform: 'translateX(-2px)'\n          }\n        },\n        'vertical': {\n          pointer: {\n            left: '0px',\n            top: -(this.props.hsl.h * 100 / 360) + 100 + '%'\n          }\n        }\n      }, { vertical: direction === 'vertical' });\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.hue },\n        _react2.default.createElement(\n          'div',\n          {\n            className: 'hue-' + direction,\n            style: styles.container,\n            ref: function ref(container) {\n              return _this2.container = container;\n            },\n            onMouseDown: this.handleMouseDown,\n            onTouchMove: this.handleChange,\n            onTouchStart: this.handleChange\n          },\n          _react2.default.createElement(\n            'style',\n            null,\n            '\\n            .hue-horizontal {\\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n            }\\n\\n            .hue-vertical {\\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n            }\\n          '\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.pointer },\n            this.props.pointer ? _react2.default.createElement(this.props.pointer, this.props) : _react2.default.createElement('div', { style: styles.slider })\n          )\n        )\n      );\n    }\n  }]);\n\n  return Hue;\n}(_react.PureComponent || _react.Component);\n\nexports.default = Hue;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Raised = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Raised = exports.Raised = function Raised(_ref) {\n  var zDepth = _ref.zDepth,\n      radius = _ref.radius,\n      background = _ref.background,\n      children = _ref.children;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      wrap: {\n        position: 'relative',\n        display: 'inline-block'\n      },\n      content: {\n        position: 'relative'\n      },\n      bg: {\n        absolute: '0px 0px 0px 0px',\n        boxShadow: '0 ' + zDepth + 'px ' + zDepth * 4 + 'px rgba(0,0,0,.24)',\n        borderRadius: radius,\n        background: background\n      }\n    },\n    'zDepth-0': {\n      bg: {\n        boxShadow: 'none'\n      }\n    },\n\n    'zDepth-1': {\n      bg: {\n        boxShadow: '0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)'\n      }\n    },\n    'zDepth-2': {\n      bg: {\n        boxShadow: '0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)'\n      }\n    },\n    'zDepth-3': {\n      bg: {\n        boxShadow: '0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)'\n      }\n    },\n    'zDepth-4': {\n      bg: {\n        boxShadow: '0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)'\n      }\n    },\n    'zDepth-5': {\n      bg: {\n        boxShadow: '0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)'\n      }\n    },\n    'square': {\n      bg: {\n        borderRadius: '0'\n      }\n    },\n    'circle': {\n      bg: {\n        borderRadius: '50%'\n      }\n    }\n  }, { 'zDepth-1': zDepth === 1 });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.wrap },\n    _react2.default.createElement('div', { style: styles.bg }),\n    _react2.default.createElement(\n      'div',\n      { style: styles.content },\n      children\n    )\n  );\n};\n\nRaised.propTypes = {\n  background: _propTypes2.default.string,\n  zDepth: _propTypes2.default.oneOf([0, 1, 2, 3, 4, 5]),\n  radius: _propTypes2.default.number\n};\n\nRaised.defaultProps = {\n  background: '#fff',\n  zDepth: 1,\n  radius: 2\n};\n\nexports.default = Raised;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Saturation = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _throttle = require('lodash/throttle');\n\nvar _throttle2 = _interopRequireDefault(_throttle);\n\nvar _saturation = require('../../helpers/saturation');\n\nvar saturation = _interopRequireWildcard(_saturation);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Saturation = exports.Saturation = function (_ref) {\n  _inherits(Saturation, _ref);\n\n  function Saturation(props) {\n    _classCallCheck(this, Saturation);\n\n    var _this = _possibleConstructorReturn(this, (Saturation.__proto__ || Object.getPrototypeOf(Saturation)).call(this, props));\n\n    _this.handleChange = function (e, skip) {\n      _this.props.onChange && _this.throttle(_this.props.onChange, saturation.calculateChange(e, skip, _this.props, _this.container), e);\n    };\n\n    _this.handleMouseDown = function (e) {\n      _this.handleChange(e, true);\n      window.addEventListener('mousemove', _this.handleChange);\n      window.addEventListener('mouseup', _this.handleMouseUp);\n    };\n\n    _this.handleMouseUp = function () {\n      _this.unbindEventListeners();\n    };\n\n    _this.throttle = (0, _throttle2.default)(function (fn, data, e) {\n      fn(data, e);\n    }, 50);\n    return _this;\n  }\n\n  _createClass(Saturation, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unbindEventListeners();\n    }\n  }, {\n    key: 'unbindEventListeners',\n    value: function unbindEventListeners() {\n      window.removeEventListener('mousemove', this.handleChange);\n      window.removeEventListener('mouseup', this.handleMouseUp);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _ref2 = this.props.style || {},\n          color = _ref2.color,\n          white = _ref2.white,\n          black = _ref2.black,\n          pointer = _ref2.pointer,\n          circle = _ref2.circle;\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          color: {\n            absolute: '0px 0px 0px 0px',\n            background: 'hsl(' + this.props.hsl.h + ',100%, 50%)',\n            borderRadius: this.props.radius\n          },\n          white: {\n            absolute: '0px 0px 0px 0px',\n            borderRadius: this.props.radius\n          },\n          black: {\n            absolute: '0px 0px 0px 0px',\n            boxShadow: this.props.shadow,\n            borderRadius: this.props.radius\n          },\n          pointer: {\n            position: 'absolute',\n            top: -(this.props.hsv.v * 100) + 100 + '%',\n            left: this.props.hsv.s * 100 + '%',\n            cursor: 'default'\n          },\n          circle: {\n            width: '4px',\n            height: '4px',\n            boxShadow: '0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\\n            0 0 1px 2px rgba(0,0,0,.4)',\n            borderRadius: '50%',\n            cursor: 'hand',\n            transform: 'translate(-2px, -2px)'\n          }\n        },\n        'custom': {\n          color: color,\n          white: white,\n          black: black,\n          pointer: pointer,\n          circle: circle\n        }\n      }, { 'custom': !!this.props.style });\n\n      return _react2.default.createElement(\n        'div',\n        {\n          style: styles.color,\n          ref: function ref(container) {\n            return _this2.container = container;\n          },\n          onMouseDown: this.handleMouseDown,\n          onTouchMove: this.handleChange,\n          onTouchStart: this.handleChange\n        },\n        _react2.default.createElement(\n          'style',\n          null,\n          '\\n          .saturation-white {\\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\\n          }\\n          .saturation-black {\\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\\n          }\\n        '\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.white, className: 'saturation-white' },\n          _react2.default.createElement('div', { style: styles.black, className: 'saturation-black' }),\n          _react2.default.createElement(\n            'div',\n            { style: styles.pointer },\n            this.props.pointer ? _react2.default.createElement(this.props.pointer, this.props) : _react2.default.createElement('div', { style: styles.circle })\n          )\n        )\n      );\n    }\n  }]);\n\n  return Saturation;\n}(_react.PureComponent || _react.Component);\n\nexports.default = Saturation;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Swatch = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _interaction = require('../../helpers/interaction');\n\nvar _ = require('./');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ENTER = 13;\n\nvar Swatch = exports.Swatch = function Swatch(_ref) {\n  var color = _ref.color,\n      style = _ref.style,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      onHover = _ref.onHover,\n      _ref$title = _ref.title,\n      title = _ref$title === undefined ? color : _ref$title,\n      children = _ref.children,\n      focus = _ref.focus,\n      _ref$focusStyle = _ref.focusStyle,\n      focusStyle = _ref$focusStyle === undefined ? {} : _ref$focusStyle;\n\n  var transparent = color === 'transparent';\n  var styles = (0, _reactcss2.default)({\n    default: {\n      swatch: _extends({\n        background: color,\n        height: '100%',\n        width: '100%',\n        cursor: 'pointer',\n        position: 'relative',\n        outline: 'none'\n      }, style, focus ? focusStyle : {})\n    }\n  });\n\n  var handleClick = function handleClick(e) {\n    return onClick(color, e);\n  };\n  var handleKeyDown = function handleKeyDown(e) {\n    return e.keyCode === ENTER && onClick(color, e);\n  };\n  var handleHover = function handleHover(e) {\n    return onHover(color, e);\n  };\n\n  var optionalEvents = {};\n  if (onHover) {\n    optionalEvents.onMouseOver = handleHover;\n  }\n\n  return _react2.default.createElement(\n    'div',\n    _extends({\n      style: styles.swatch,\n      onClick: handleClick,\n      title: title,\n      tabIndex: 0,\n      onKeyDown: handleKeyDown\n    }, optionalEvents),\n    children,\n    transparent && _react2.default.createElement(_.Checkboard, {\n      borderRadius: styles.swatch.borderRadius,\n      boxShadow: 'inset 0 0 0 1px rgba(0,0,0,0.1)'\n    })\n  );\n};\n\nexports.default = (0, _interaction.handleFocus)(Swatch);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Alpha = require('./Alpha');\n\nObject.defineProperty(exports, 'Alpha', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Alpha).default;\n  }\n});\n\nvar _Checkboard = require('./Checkboard');\n\nObject.defineProperty(exports, 'Checkboard', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Checkboard).default;\n  }\n});\n\nvar _EditableInput = require('./EditableInput');\n\nObject.defineProperty(exports, 'EditableInput', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_EditableInput).default;\n  }\n});\n\nvar _Hue = require('./Hue');\n\nObject.defineProperty(exports, 'Hue', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Hue).default;\n  }\n});\n\nvar _Raised = require('./Raised');\n\nObject.defineProperty(exports, 'Raised', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Raised).default;\n  }\n});\n\nvar _Saturation = require('./Saturation');\n\nObject.defineProperty(exports, 'Saturation', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Saturation).default;\n  }\n});\n\nvar _ColorWrap = require('./ColorWrap');\n\nObject.defineProperty(exports, 'ColorWrap', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_ColorWrap).default;\n  }\n});\n\nvar _Swatch = require('./Swatch');\n\nObject.defineProperty(exports, 'Swatch', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Swatch).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Compact = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nvar _CompactColor = require('./CompactColor');\n\nvar _CompactColor2 = _interopRequireDefault(_CompactColor);\n\nvar _CompactFields = require('./CompactFields');\n\nvar _CompactFields2 = _interopRequireDefault(_CompactFields);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Compact = exports.Compact = function Compact(_ref) {\n  var onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      colors = _ref.colors,\n      hex = _ref.hex,\n      rgb = _ref.rgb,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      Compact: {\n        background: '#f6f6f6',\n        radius: '4px'\n      },\n      compact: {\n        paddingTop: '5px',\n        paddingLeft: '5px',\n        boxSizing: 'initial',\n        width: '240px'\n      },\n      clear: {\n        clear: 'both'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    if (data.hex) {\n      _color2.default.isValidHex(data.hex) && onChange({\n        hex: data.hex,\n        source: 'hex'\n      }, e);\n    } else {\n      onChange(data, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    _common.Raised,\n    { style: styles.Compact },\n    _react2.default.createElement(\n      'div',\n      { style: styles.compact, className: 'compact-picker ' + className },\n      _react2.default.createElement(\n        'div',\n        null,\n        (0, _map2.default)(colors, function (c) {\n          return _react2.default.createElement(_CompactColor2.default, {\n            key: c,\n            color: c,\n            active: c.toLowerCase() === hex,\n            onClick: handleChange,\n            onSwatchHover: onSwatchHover\n          });\n        }),\n        _react2.default.createElement('div', { style: styles.clear })\n      ),\n      _react2.default.createElement(_CompactFields2.default, { hex: hex, rgb: rgb, onChange: handleChange })\n    )\n  );\n};\n\nCompact.propTypes = {\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.string)\n};\n\nCompact.defaultProps = {\n  colors: ['#4D4D4D', '#999999', '#FFFFFF', '#F44E3B', '#FE9200', '#FCDC00', '#DBDF00', '#A4DD00', '#68CCCA', '#73D8FF', '#AEA1FF', '#FDA1FF', '#333333', '#808080', '#cccccc', '#D33115', '#E27300', '#FCC400', '#B0BC00', '#68BC00', '#16A5A5', '#009CE0', '#7B64FF', '#FA28FF', '#000000', '#666666', '#B3B3B3', '#9F0500', '#C45100', '#FB9E00', '#808900', '#194D33', '#0C797D', '#0062B1', '#653294', '#AB149E']\n};\n\nexports.default = (0, _common.ColorWrap)(Compact);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CompactColor = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CompactColor = exports.CompactColor = function CompactColor(_ref) {\n  var color = _ref.color,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      onSwatchHover = _ref.onSwatchHover,\n      active = _ref.active;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      color: {\n        background: color,\n        width: '15px',\n        height: '15px',\n        float: 'left',\n        marginRight: '5px',\n        marginBottom: '5px',\n        position: 'relative',\n        cursor: 'pointer'\n      },\n      dot: {\n        absolute: '5px 5px 5px 5px',\n        background: _color2.default.getContrastingColor(color),\n        borderRadius: '50%',\n        opacity: '0'\n      }\n    },\n    'active': {\n      dot: {\n        opacity: '1'\n      }\n    },\n    'color-#FFFFFF': {\n      color: {\n        boxShadow: 'inset 0 0 0 1px #ddd'\n      },\n      dot: {\n        background: '#000'\n      }\n    },\n    'transparent': {\n      dot: {\n        background: '#000'\n      }\n    }\n  }, { active: active, 'color-#FFFFFF': color === '#FFFFFF', 'transparent': color === 'transparent' });\n\n  return _react2.default.createElement(\n    _common.Swatch,\n    {\n      style: styles.color,\n      color: color,\n      onClick: onClick,\n      onHover: onSwatchHover,\n      focusStyle: { boxShadow: '0 0 4px ' + color }\n    },\n    _react2.default.createElement('div', { style: styles.dot })\n  );\n};\n\nexports.default = CompactColor;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CompactFields = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CompactFields = exports.CompactFields = function CompactFields(_ref) {\n  var hex = _ref.hex,\n      rgb = _ref.rgb,\n      onChange = _ref.onChange;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      fields: {\n        display: 'flex',\n        paddingBottom: '6px',\n        paddingRight: '5px',\n        position: 'relative'\n      },\n      active: {\n        position: 'absolute',\n        top: '6px',\n        left: '5px',\n        height: '9px',\n        width: '9px',\n        background: hex\n      },\n      HEXwrap: {\n        flex: '6',\n        position: 'relative'\n      },\n      HEXinput: {\n        width: '80%',\n        padding: '0px',\n        paddingLeft: '20%',\n        border: 'none',\n        outline: 'none',\n        background: 'none',\n        fontSize: '12px',\n        color: '#333',\n        height: '16px'\n      },\n      HEXlabel: {\n        display: 'none'\n      },\n      RGBwrap: {\n        flex: '3',\n        position: 'relative'\n      },\n      RGBinput: {\n        width: '70%',\n        padding: '0px',\n        paddingLeft: '30%',\n        border: 'none',\n        outline: 'none',\n        background: 'none',\n        fontSize: '12px',\n        color: '#333',\n        height: '16px'\n      },\n      RGBlabel: {\n        position: 'absolute',\n        top: '3px',\n        left: '0px',\n        lineHeight: '16px',\n        textTransform: 'uppercase',\n        fontSize: '12px',\n        color: '#999'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    if (data.r || data.g || data.b) {\n      onChange({\n        r: data.r || rgb.r,\n        g: data.g || rgb.g,\n        b: data.b || rgb.b,\n        source: 'rgb'\n      }, e);\n    } else {\n      onChange({\n        hex: data.hex,\n        source: 'hex'\n      }, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.fields, className: 'flexbox-fix' },\n    _react2.default.createElement('div', { style: styles.active }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.HEXwrap, input: styles.HEXinput, label: styles.HEXlabel },\n      label: 'hex',\n      value: hex,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'r',\n      value: rgb.r,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'g',\n      value: rgb.g,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'b',\n      value: rgb.b,\n      onChange: handleChange\n    })\n  );\n};\n\nexports.default = CompactFields;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Github = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _common = require('../common');\n\nvar _GithubSwatch = require('./GithubSwatch');\n\nvar _GithubSwatch2 = _interopRequireDefault(_GithubSwatch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Github = exports.Github = function Github(_ref) {\n  var width = _ref.width,\n      colors = _ref.colors,\n      onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      triangle = _ref.triangle,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      card: {\n        width: width,\n        background: '#fff',\n        border: '1px solid rgba(0,0,0,0.2)',\n        boxShadow: '0 3px 12px rgba(0,0,0,0.15)',\n        borderRadius: '4px',\n        position: 'relative',\n        padding: '5px',\n        display: 'flex',\n        flexWrap: 'wrap'\n      },\n      triangle: {\n        position: 'absolute',\n        border: '7px solid transparent',\n        borderBottomColor: '#fff'\n      },\n      triangleShadow: {\n        position: 'absolute',\n        border: '8px solid transparent',\n        borderBottomColor: 'rgba(0,0,0,0.15)'\n      }\n    },\n    'hide-triangle': {\n      triangle: {\n        display: 'none'\n      },\n      triangleShadow: {\n        display: 'none'\n      }\n    },\n    'top-left-triangle': {\n      triangle: {\n        top: '-14px',\n        left: '10px'\n      },\n      triangleShadow: {\n        top: '-16px',\n        left: '9px'\n      }\n    },\n    'top-right-triangle': {\n      triangle: {\n        top: '-14px',\n        right: '10px'\n      },\n      triangleShadow: {\n        top: '-16px',\n        right: '9px'\n      }\n    },\n    'bottom-left-triangle': {\n      triangle: {\n        top: '35px',\n        left: '10px',\n        transform: 'rotate(180deg)'\n      },\n      triangleShadow: {\n        top: '37px',\n        left: '9px',\n        transform: 'rotate(180deg)'\n      }\n    },\n    'bottom-right-triangle': {\n      triangle: {\n        top: '35px',\n        right: '10px',\n        transform: 'rotate(180deg)'\n      },\n      triangleShadow: {\n        top: '37px',\n        right: '9px',\n        transform: 'rotate(180deg)'\n      }\n    }\n  }, {\n    'hide-triangle': triangle === 'hide',\n    'top-left-triangle': triangle === 'top-left',\n    'top-right-triangle': triangle === 'top-right',\n    'bottom-left-triangle': triangle == 'bottom-left',\n    'bottom-right-triangle': triangle === 'bottom-right'\n  });\n\n  var handleChange = function handleChange(hex, e) {\n    return onChange({ hex: hex, source: 'hex' }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.card, className: 'github-picker ' + className },\n    _react2.default.createElement('div', { style: styles.triangleShadow }),\n    _react2.default.createElement('div', { style: styles.triangle }),\n    (0, _map2.default)(colors, function (c) {\n      return _react2.default.createElement(_GithubSwatch2.default, {\n        color: c,\n        key: c,\n        onClick: handleChange,\n        onSwatchHover: onSwatchHover\n      });\n    })\n  );\n};\n\nGithub.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.string),\n  triangle: _propTypes2.default.oneOf(['hide', 'top-left', 'top-right', 'bottom-left', 'bottom-right'])\n};\n\nGithub.defaultProps = {\n  width: 200,\n  colors: ['#B80000', '#DB3E00', '#FCCB00', '#008B02', '#006B76', '#1273DE', '#004DCF', '#5300EB', '#EB9694', '#FAD0C3', '#FEF3BD', '#C1E1C5', '#BEDADC', '#C4DEF6', '#BED3F3', '#D4C4FB'],\n  triangle: 'top-left'\n};\n\nexports.default = (0, _common.ColorWrap)(Github);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GithubSwatch = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GithubSwatch = exports.GithubSwatch = function GithubSwatch(_ref) {\n  var hover = _ref.hover,\n      color = _ref.color,\n      onClick = _ref.onClick,\n      onSwatchHover = _ref.onSwatchHover;\n\n  var hoverSwatch = {\n    position: 'relative',\n    zIndex: '2',\n    outline: '2px solid #fff',\n    boxShadow: '0 0 5px 2px rgba(0,0,0,0.25)'\n  };\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatch: {\n        width: '25px',\n        height: '25px',\n        fontSize: '0'\n      }\n    },\n    'hover': {\n      swatch: hoverSwatch\n    }\n  }, { hover: hover });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.swatch },\n    _react2.default.createElement(_common.Swatch, {\n      color: color,\n      onClick: onClick,\n      onHover: onSwatchHover,\n      focusStyle: hoverSwatch\n    })\n  );\n};\n\nexports.default = (0, _reactcss.handleHover)(GithubSwatch);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HuePicker = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _HuePointer = require('./HuePointer');\n\nvar _HuePointer2 = _interopRequireDefault(_HuePointer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HuePicker = exports.HuePicker = function HuePicker(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      onChange = _ref.onChange,\n      hsl = _ref.hsl,\n      direction = _ref.direction,\n      pointer = _ref.pointer,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        position: 'relative',\n        width: width,\n        height: height\n      },\n      hue: {\n        radius: '2px'\n      }\n    }\n  });\n\n  // Overwrite to provide pure hue color\n  var handleChange = function handleChange(data) {\n    return onChange({ a: 1, h: data.h, l: 0.5, s: 1 });\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'hue-picker ' + className },\n    _react2.default.createElement(_common.Hue, _extends({}, styles.hue, {\n      hsl: hsl,\n      pointer: pointer,\n      onChange: handleChange,\n      direction: direction\n    }))\n  );\n};\n\nHuePicker.defaultProps = {\n  width: '316px',\n  height: '16px',\n  direction: 'horizontal',\n  pointer: _HuePointer2.default\n};\n\nexports.default = (0, _common.ColorWrap)(HuePicker);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SliderPointer = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SliderPointer = exports.SliderPointer = function SliderPointer(_ref) {\n  var direction = _ref.direction;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '18px',\n        height: '18px',\n        borderRadius: '50%',\n        transform: 'translate(-9px, -1px)',\n        backgroundColor: 'rgb(248, 248, 248)',\n        boxShadow: '0 1px 4px 0 rgba(0, 0, 0, 0.37)'\n      }\n    },\n    'vertical': {\n      picker: {\n        transform: 'translate(-3px, -9px)'\n      }\n    }\n  }, { vertical: direction === 'vertical' });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = SliderPointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Material = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Material = exports.Material = function Material(_ref) {\n  var onChange = _ref.onChange,\n      hex = _ref.hex,\n      rgb = _ref.rgb,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      material: {\n        width: '98px',\n        height: '98px',\n        padding: '16px',\n        fontFamily: 'Roboto'\n      },\n      HEXwrap: {\n        position: 'relative'\n      },\n      HEXinput: {\n        width: '100%',\n        marginTop: '12px',\n        fontSize: '15px',\n        color: '#333',\n        padding: '0px',\n        border: '0px',\n        borderBottom: '2px solid ' + hex,\n        outline: 'none',\n        height: '30px'\n      },\n      HEXlabel: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        fontSize: '11px',\n        color: '#999999',\n        textTransform: 'capitalize'\n      },\n      Hex: {\n        style: {}\n      },\n      RGBwrap: {\n        position: 'relative'\n      },\n      RGBinput: {\n        width: '100%',\n        marginTop: '12px',\n        fontSize: '15px',\n        color: '#333',\n        padding: '0px',\n        border: '0px',\n        borderBottom: '1px solid #eee',\n        outline: 'none',\n        height: '30px'\n      },\n      RGBlabel: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        fontSize: '11px',\n        color: '#999999',\n        textTransform: 'capitalize'\n      },\n      split: {\n        display: 'flex',\n        marginRight: '-10px',\n        paddingTop: '11px'\n      },\n      third: {\n        flex: '1',\n        paddingRight: '10px'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    if (data.hex) {\n      _color2.default.isValidHex(data.hex) && onChange({\n        hex: data.hex,\n        source: 'hex'\n      }, e);\n    } else if (data.r || data.g || data.b) {\n      onChange({\n        r: data.r || rgb.r,\n        g: data.g || rgb.g,\n        b: data.b || rgb.b,\n        source: 'rgb'\n      }, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    _common.Raised,\n    null,\n    _react2.default.createElement(\n      'div',\n      { style: styles.material, className: 'material-picker ' + className },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { wrap: styles.HEXwrap, input: styles.HEXinput, label: styles.HEXlabel },\n        label: 'hex',\n        value: hex,\n        onChange: handleChange\n      }),\n      _react2.default.createElement(\n        'div',\n        { style: styles.split, className: 'flexbox-fix' },\n        _react2.default.createElement(\n          'div',\n          { style: styles.third },\n          _react2.default.createElement(_common.EditableInput, {\n            style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n            label: 'r', value: rgb.r,\n            onChange: handleChange\n          })\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.third },\n          _react2.default.createElement(_common.EditableInput, {\n            style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n            label: 'g',\n            value: rgb.g,\n            onChange: handleChange\n          })\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.third },\n          _react2.default.createElement(_common.EditableInput, {\n            style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n            label: 'b',\n            value: rgb.b,\n            onChange: handleChange\n          })\n        )\n      )\n    )\n  );\n};\n\nexports.default = (0, _common.ColorWrap)(Material);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Photoshop = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _PhotoshopFields = require('./PhotoshopFields');\n\nvar _PhotoshopFields2 = _interopRequireDefault(_PhotoshopFields);\n\nvar _PhotoshopPointerCircle = require('./PhotoshopPointerCircle');\n\nvar _PhotoshopPointerCircle2 = _interopRequireDefault(_PhotoshopPointerCircle);\n\nvar _PhotoshopPointer = require('./PhotoshopPointer');\n\nvar _PhotoshopPointer2 = _interopRequireDefault(_PhotoshopPointer);\n\nvar _PhotoshopButton = require('./PhotoshopButton');\n\nvar _PhotoshopButton2 = _interopRequireDefault(_PhotoshopButton);\n\nvar _PhotoshopPreviews = require('./PhotoshopPreviews');\n\nvar _PhotoshopPreviews2 = _interopRequireDefault(_PhotoshopPreviews);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Photoshop = exports.Photoshop = function (_React$Component) {\n  _inherits(Photoshop, _React$Component);\n\n  function Photoshop(props) {\n    _classCallCheck(this, Photoshop);\n\n    var _this = _possibleConstructorReturn(this, (Photoshop.__proto__ || Object.getPrototypeOf(Photoshop)).call(this));\n\n    _this.state = {\n      currentColor: props.hex\n    };\n    return _this;\n  }\n\n  _createClass(Photoshop, [{\n    key: 'render',\n    value: function render() {\n      var _props$className = this.props.className,\n          className = _props$className === undefined ? '' : _props$className;\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          picker: {\n            background: '#DCDCDC',\n            borderRadius: '4px',\n            boxShadow: '0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)',\n            boxSizing: 'initial',\n            width: '513px'\n          },\n          head: {\n            backgroundImage: 'linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)',\n            borderBottom: '1px solid #B1B1B1',\n            boxShadow: 'inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)',\n            height: '23px',\n            lineHeight: '24px',\n            borderRadius: '4px 4px 0 0',\n            fontSize: '13px',\n            color: '#4D4D4D',\n            textAlign: 'center'\n          },\n          body: {\n            padding: '15px 15px 0',\n            display: 'flex'\n          },\n          saturation: {\n            width: '256px',\n            height: '256px',\n            position: 'relative',\n            border: '2px solid #B3B3B3',\n            borderBottom: '2px solid #F0F0F0',\n            overflow: 'hidden'\n          },\n          hue: {\n            position: 'relative',\n            height: '256px',\n            width: '19px',\n            marginLeft: '10px',\n            border: '2px solid #B3B3B3',\n            borderBottom: '2px solid #F0F0F0'\n          },\n          controls: {\n            width: '180px',\n            marginLeft: '10px'\n          },\n          top: {\n            display: 'flex'\n          },\n          previews: {\n            width: '60px'\n          },\n          actions: {\n            flex: '1',\n            marginLeft: '20px'\n          }\n        }\n      });\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.picker, className: 'photoshop-picker ' + className },\n        _react2.default.createElement(\n          'div',\n          { style: styles.head },\n          this.props.header\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.body, className: 'flexbox-fix' },\n          _react2.default.createElement(\n            'div',\n            { style: styles.saturation },\n            _react2.default.createElement(_common.Saturation, {\n              hsl: this.props.hsl,\n              hsv: this.props.hsv,\n              pointer: _PhotoshopPointerCircle2.default,\n              onChange: this.props.onChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.hue },\n            _react2.default.createElement(_common.Hue, {\n              direction: 'vertical',\n              hsl: this.props.hsl,\n              pointer: _PhotoshopPointer2.default,\n              onChange: this.props.onChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.controls },\n            _react2.default.createElement(\n              'div',\n              { style: styles.top, className: 'flexbox-fix' },\n              _react2.default.createElement(\n                'div',\n                { style: styles.previews },\n                _react2.default.createElement(_PhotoshopPreviews2.default, {\n                  rgb: this.props.rgb,\n                  currentColor: this.state.currentColor\n                })\n              ),\n              _react2.default.createElement(\n                'div',\n                { style: styles.actions },\n                _react2.default.createElement(_PhotoshopButton2.default, { label: 'OK', onClick: this.props.onAccept, active: true }),\n                _react2.default.createElement(_PhotoshopButton2.default, { label: 'Cancel', onClick: this.props.onCancel }),\n                _react2.default.createElement(_PhotoshopFields2.default, {\n                  onChange: this.props.onChange,\n                  rgb: this.props.rgb,\n                  hsv: this.props.hsv,\n                  hex: this.props.hex\n                })\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return Photoshop;\n}(_react2.default.Component);\n\nPhotoshop.propTypes = {\n  header: _propTypes2.default.string\n};\n\nPhotoshop.defaultProps = {\n  header: 'Color Picker'\n};\n\nexports.default = (0, _common.ColorWrap)(Photoshop);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopBotton = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopBotton = exports.PhotoshopBotton = function PhotoshopBotton(_ref) {\n  var onClick = _ref.onClick,\n      label = _ref.label,\n      children = _ref.children,\n      active = _ref.active;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      button: {\n        backgroundImage: 'linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)',\n        border: '1px solid #878787',\n        borderRadius: '2px',\n        height: '20px',\n        boxShadow: '0 1px 0 0 #EAEAEA',\n        fontSize: '14px',\n        color: '#000',\n        lineHeight: '20px',\n        textAlign: 'center',\n        marginBottom: '10px',\n        cursor: 'pointer'\n      }\n    },\n    'active': {\n      button: {\n        boxShadow: '0 0 0 1px #878787'\n      }\n    }\n  }, { active: active });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.button, onClick: onClick },\n    label || children\n  );\n};\n\nexports.default = PhotoshopBotton;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopPicker = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopPicker = exports.PhotoshopPicker = function PhotoshopPicker(_ref) {\n  var onChange = _ref.onChange,\n      rgb = _ref.rgb,\n      hsv = _ref.hsv,\n      hex = _ref.hex;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      fields: {\n        paddingTop: '5px',\n        paddingBottom: '9px',\n        width: '80px',\n        position: 'relative'\n      },\n      divider: {\n        height: '5px'\n      },\n      RGBwrap: {\n        position: 'relative'\n      },\n      RGBinput: {\n        marginLeft: '40%',\n        width: '40%',\n        height: '18px',\n        border: '1px solid #888888',\n        boxShadow: 'inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC',\n        marginBottom: '5px',\n        fontSize: '13px',\n        paddingLeft: '3px',\n        marginRight: '10px'\n      },\n      RGBlabel: {\n        left: '0px',\n        width: '34px',\n        textTransform: 'uppercase',\n        fontSize: '13px',\n        height: '18px',\n        lineHeight: '22px',\n        position: 'absolute'\n      },\n      HEXwrap: {\n        position: 'relative'\n      },\n      HEXinput: {\n        marginLeft: '20%',\n        width: '80%',\n        height: '18px',\n        border: '1px solid #888888',\n        boxShadow: 'inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC',\n        marginBottom: '6px',\n        fontSize: '13px',\n        paddingLeft: '3px'\n      },\n      HEXlabel: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        width: '14px',\n        textTransform: 'uppercase',\n        fontSize: '13px',\n        height: '18px',\n        lineHeight: '22px'\n      },\n      fieldSymbols: {\n        position: 'absolute',\n        top: '5px',\n        right: '-7px',\n        fontSize: '13px'\n      },\n      symbol: {\n        height: '20px',\n        lineHeight: '22px',\n        paddingBottom: '7px'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    if (data['#']) {\n      _color2.default.isValidHex(data['#']) && onChange({\n        hex: data['#'],\n        source: 'hex'\n      }, e);\n    } else if (data.r || data.g || data.b) {\n      onChange({\n        r: data.r || rgb.r,\n        g: data.g || rgb.g,\n        b: data.b || rgb.b,\n        source: 'rgb'\n      }, e);\n    } else if (data.h || data.s || data.v) {\n      onChange({\n        h: data.h || hsv.h,\n        s: data.s || hsv.s,\n        v: data.v || hsv.v,\n        source: 'hsv'\n      }, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.fields },\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'h',\n      value: Math.round(hsv.h),\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 's',\n      value: Math.round(hsv.s * 100),\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'v',\n      value: Math.round(hsv.v * 100),\n      onChange: handleChange\n    }),\n    _react2.default.createElement('div', { style: styles.divider }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'r',\n      value: rgb.r,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'g',\n      value: rgb.g,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'b',\n      value: rgb.b,\n      onChange: handleChange\n    }),\n    _react2.default.createElement('div', { style: styles.divider }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.HEXwrap, input: styles.HEXinput, label: styles.HEXlabel },\n      label: '#',\n      value: hex.replace('#', ''),\n      onChange: handleChange\n    }),\n    _react2.default.createElement(\n      'div',\n      { style: styles.fieldSymbols },\n      _react2.default.createElement(\n        'div',\n        { style: styles.symbol },\n        '\\xB0'\n      ),\n      _react2.default.createElement(\n        'div',\n        { style: styles.symbol },\n        '%'\n      ),\n      _react2.default.createElement(\n        'div',\n        { style: styles.symbol },\n        '%'\n      )\n    )\n  );\n};\n\nexports.default = PhotoshopPicker;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopPointerCircle = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopPointerCircle = exports.PhotoshopPointerCircle = function PhotoshopPointerCircle() {\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      triangle: {\n        width: 0,\n        height: 0,\n        borderStyle: 'solid',\n        borderWidth: '4px 0 4px 6px',\n        borderColor: 'transparent transparent transparent #fff',\n        position: 'absolute',\n        top: '1px',\n        left: '1px'\n      },\n      triangleBorder: {\n        width: 0,\n        height: 0,\n        borderStyle: 'solid',\n        borderWidth: '5px 0 5px 8px',\n        borderColor: 'transparent transparent transparent #555'\n      },\n\n      left: {\n        Extend: 'triangleBorder',\n        transform: 'translate(-13px, -4px)'\n      },\n      leftInside: {\n        Extend: 'triangle',\n        transform: 'translate(-8px, -5px)'\n      },\n\n      right: {\n        Extend: 'triangleBorder',\n        transform: 'translate(20px, -14px) rotate(180deg)'\n      },\n      rightInside: {\n        Extend: 'triangle',\n        transform: 'translate(-8px, -5px)'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.pointer },\n    _react2.default.createElement(\n      'div',\n      { style: styles.left },\n      _react2.default.createElement('div', { style: styles.leftInside })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.right },\n      _react2.default.createElement('div', { style: styles.rightInside })\n    )\n  );\n};\n\nexports.default = PhotoshopPointerCircle;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopPointerCircle = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopPointerCircle = exports.PhotoshopPointerCircle = function PhotoshopPointerCircle(_ref) {\n  var hsl = _ref.hsl;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '12px',\n        height: '12px',\n        borderRadius: '6px',\n        boxShadow: 'inset 0 0 0 1px #fff',\n        transform: 'translate(-6px, -6px)'\n      }\n    },\n    'black-outline': {\n      picker: {\n        boxShadow: 'inset 0 0 0 1px #000'\n      }\n    }\n  }, { 'black-outline': hsl.l > 0.5 });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = PhotoshopPointerCircle;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopPreviews = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopPreviews = exports.PhotoshopPreviews = function PhotoshopPreviews(_ref) {\n  var rgb = _ref.rgb,\n      currentColor = _ref.currentColor;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatches: {\n        border: '1px solid #B3B3B3',\n        borderBottom: '1px solid #F0F0F0',\n        marginBottom: '2px',\n        marginTop: '1px'\n      },\n      new: {\n        height: '34px',\n        background: 'rgb(' + rgb.r + ',' + rgb.g + ', ' + rgb.b + ')',\n        boxShadow: 'inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000'\n      },\n      current: {\n        height: '34px',\n        background: currentColor,\n        boxShadow: 'inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000'\n      },\n      label: {\n        fontSize: '14px',\n        color: '#000',\n        textAlign: 'center'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    null,\n    _react2.default.createElement(\n      'div',\n      { style: styles.label },\n      'new'\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatches },\n      _react2.default.createElement('div', { style: styles.new }),\n      _react2.default.createElement('div', { style: styles.current })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.label },\n      'current'\n    )\n  );\n};\n\nexports.default = PhotoshopPreviews;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sketch = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _SketchFields = require('./SketchFields');\n\nvar _SketchFields2 = _interopRequireDefault(_SketchFields);\n\nvar _SketchPresetColors = require('./SketchPresetColors');\n\nvar _SketchPresetColors2 = _interopRequireDefault(_SketchPresetColors);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Sketch = exports.Sketch = function Sketch(_ref) {\n  var width = _ref.width,\n      rgb = _ref.rgb,\n      hex = _ref.hex,\n      hsv = _ref.hsv,\n      hsl = _ref.hsl,\n      onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      disableAlpha = _ref.disableAlpha,\n      presetColors = _ref.presetColors,\n      renderers = _ref.renderers,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: width,\n        padding: '10px 10px 0',\n        boxSizing: 'initial',\n        background: '#fff',\n        borderRadius: '4px',\n        boxShadow: '0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)'\n      },\n      saturation: {\n        width: '100%',\n        paddingBottom: '75%',\n        position: 'relative',\n        overflow: 'hidden'\n      },\n      Saturation: {\n        radius: '3px',\n        shadow: 'inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)'\n      },\n      controls: {\n        display: 'flex'\n      },\n      sliders: {\n        padding: '4px 0',\n        flex: '1'\n      },\n      color: {\n        width: '24px',\n        height: '24px',\n        position: 'relative',\n        marginTop: '4px',\n        marginLeft: '4px',\n        borderRadius: '3px'\n      },\n      activeColor: {\n        absolute: '0px 0px 0px 0px',\n        borderRadius: '2px',\n        background: 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')',\n        boxShadow: 'inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)'\n      },\n      hue: {\n        position: 'relative',\n        height: '10px',\n        overflow: 'hidden'\n      },\n      Hue: {\n        radius: '2px',\n        shadow: 'inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)'\n      },\n\n      alpha: {\n        position: 'relative',\n        height: '10px',\n        marginTop: '4px',\n        overflow: 'hidden'\n      },\n      Alpha: {\n        radius: '2px',\n        shadow: 'inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)'\n      }\n    },\n    'disableAlpha': {\n      color: {\n        height: '10px'\n      },\n      hue: {\n        height: '10px'\n      },\n      alpha: {\n        display: 'none'\n      }\n    }\n  }, { disableAlpha: disableAlpha });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'sketch-picker ' + className },\n    _react2.default.createElement(\n      'div',\n      { style: styles.saturation },\n      _react2.default.createElement(_common.Saturation, {\n        style: styles.Saturation,\n        hsl: hsl,\n        hsv: hsv,\n        onChange: onChange\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.controls, className: 'flexbox-fix' },\n      _react2.default.createElement(\n        'div',\n        { style: styles.sliders },\n        _react2.default.createElement(\n          'div',\n          { style: styles.hue },\n          _react2.default.createElement(_common.Hue, {\n            style: styles.Hue,\n            hsl: hsl,\n            onChange: onChange\n          })\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.alpha },\n          _react2.default.createElement(_common.Alpha, {\n            style: styles.Alpha,\n            rgb: rgb,\n            hsl: hsl,\n            renderers: renderers,\n            onChange: onChange\n          })\n        )\n      ),\n      _react2.default.createElement(\n        'div',\n        { style: styles.color },\n        _react2.default.createElement(_common.Checkboard, null),\n        _react2.default.createElement('div', { style: styles.activeColor })\n      )\n    ),\n    _react2.default.createElement(_SketchFields2.default, {\n      rgb: rgb,\n      hsl: hsl,\n      hex: hex,\n      onChange: onChange,\n      disableAlpha: disableAlpha\n    }),\n    _react2.default.createElement(_SketchPresetColors2.default, {\n      colors: presetColors,\n      onClick: onChange,\n      onSwatchHover: onSwatchHover\n    })\n  );\n};\n\nSketch.propTypes = {\n  disableAlpha: _propTypes2.default.bool,\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number])\n};\n\nSketch.defaultProps = {\n  disableAlpha: false,\n  width: 200,\n  presetColors: ['#D0021B', '#F5A623', '#F8E71C', '#8B572A', '#7ED321', '#417505', '#BD10E0', '#9013FE', '#4A90E2', '#50E3C2', '#B8E986', '#000000', '#4A4A4A', '#9B9B9B', '#FFFFFF']\n};\n\nexports.default = (0, _common.ColorWrap)(Sketch);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SketchFields = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-param-reassign */\n\nvar SketchFields = exports.SketchFields = function SketchFields(_ref) {\n  var onChange = _ref.onChange,\n      rgb = _ref.rgb,\n      hsl = _ref.hsl,\n      hex = _ref.hex,\n      disableAlpha = _ref.disableAlpha;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      fields: {\n        display: 'flex',\n        paddingTop: '4px'\n      },\n      single: {\n        flex: '1',\n        paddingLeft: '6px'\n      },\n      alpha: {\n        flex: '1',\n        paddingLeft: '6px'\n      },\n      double: {\n        flex: '2'\n      },\n      input: {\n        width: '80%',\n        padding: '4px 10% 3px',\n        border: 'none',\n        boxShadow: 'inset 0 0 0 1px #ccc',\n        fontSize: '11px'\n      },\n      label: {\n        display: 'block',\n        textAlign: 'center',\n        fontSize: '11px',\n        color: '#222',\n        paddingTop: '3px',\n        paddingBottom: '4px',\n        textTransform: 'capitalize'\n      }\n    },\n    'disableAlpha': {\n      alpha: {\n        display: 'none'\n      }\n    }\n  }, { disableAlpha: disableAlpha });\n\n  var handleChange = function handleChange(data, e) {\n    if (data.hex) {\n      _color2.default.isValidHex(data.hex) && onChange({\n        hex: data.hex,\n        source: 'hex'\n      }, e);\n    } else if (data.r || data.g || data.b) {\n      onChange({\n        r: data.r || rgb.r,\n        g: data.g || rgb.g,\n        b: data.b || rgb.b,\n        a: rgb.a,\n        source: 'rgb'\n      }, e);\n    } else if (data.a) {\n      if (data.a < 0) {\n        data.a = 0;\n      } else if (data.a > 100) {\n        data.a = 100;\n      }\n\n      data.a /= 100;\n      onChange({\n        h: hsl.h,\n        s: hsl.s,\n        l: hsl.l,\n        a: data.a,\n        source: 'rgb'\n      }, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.fields, className: 'flexbox-fix' },\n    _react2.default.createElement(\n      'div',\n      { style: styles.double },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'hex',\n        value: hex.replace('#', ''),\n        onChange: handleChange\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.single },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'r',\n        value: rgb.r,\n        onChange: handleChange,\n        dragLabel: 'true',\n        dragMax: '255'\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.single },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'g',\n        value: rgb.g,\n        onChange: handleChange,\n        dragLabel: 'true',\n        dragMax: '255'\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.single },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'b',\n        value: rgb.b,\n        onChange: handleChange,\n        dragLabel: 'true',\n        dragMax: '255'\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.alpha },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'a',\n        value: Math.round(rgb.a * 100),\n        onChange: handleChange,\n        dragLabel: 'true',\n        dragMax: '100'\n      })\n    )\n  );\n};\n\nexports.default = SketchFields;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SketchPresetColors = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SketchPresetColors = exports.SketchPresetColors = function SketchPresetColors(_ref) {\n  var colors = _ref.colors,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      onSwatchHover = _ref.onSwatchHover;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      colors: {\n        margin: '0 -10px',\n        padding: '10px 0 0 10px',\n        borderTop: '1px solid #eee',\n        display: 'flex',\n        flexWrap: 'wrap',\n        position: 'relative'\n      },\n      swatchWrap: {\n        width: '16px',\n        height: '16px',\n        margin: '0 10px 10px 0'\n      },\n      swatch: {\n        borderRadius: '3px',\n        boxShadow: 'inset 0 0 0 1px rgba(0,0,0,.15)'\n      }\n    },\n    'no-presets': {\n      colors: {\n        display: 'none'\n      }\n    }\n  }, {\n    'no-presets': !colors || !colors.length\n  });\n\n  var handleClick = function handleClick(hex, e) {\n    onClick({\n      hex: hex,\n      source: 'hex'\n    }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.colors, className: 'flexbox-fix' },\n    colors.map(function (colorObjOrString) {\n      var c = typeof colorObjOrString === 'string' ? { color: colorObjOrString } : colorObjOrString;\n      var key = '' + c.color + (c.title || '');\n      return _react2.default.createElement(\n        'div',\n        { key: key, style: styles.swatchWrap },\n        _react2.default.createElement(_common.Swatch, _extends({}, c, {\n          style: styles.swatch,\n          onClick: handleClick,\n          onHover: onSwatchHover,\n          focusStyle: {\n            boxShadow: 'inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px ' + c.color\n          }\n        }))\n      );\n    })\n  );\n};\n\nSketchPresetColors.propTypes = {\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    color: _propTypes2.default.string,\n    title: _propTypes2.default.string\n  })])).isRequired\n};\n\nexports.default = SketchPresetColors;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Slider = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _SliderSwatches = require('./SliderSwatches');\n\nvar _SliderSwatches2 = _interopRequireDefault(_SliderSwatches);\n\nvar _SliderPointer = require('./SliderPointer');\n\nvar _SliderPointer2 = _interopRequireDefault(_SliderPointer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Slider = exports.Slider = function Slider(_ref) {\n  var hsl = _ref.hsl,\n      onChange = _ref.onChange,\n      pointer = _ref.pointer,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      hue: {\n        height: '12px',\n        position: 'relative'\n      },\n      Hue: {\n        radius: '2px'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { className: 'slider-picker ' + className },\n    _react2.default.createElement(\n      'div',\n      { style: styles.hue },\n      _react2.default.createElement(_common.Hue, {\n        style: styles.Hue,\n        hsl: hsl,\n        pointer: pointer,\n        onChange: onChange\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatches },\n      _react2.default.createElement(_SliderSwatches2.default, { hsl: hsl, onClick: onChange })\n    )\n  );\n};\n\nSlider.defaultProps = {\n  pointer: _SliderPointer2.default\n};\n\nexports.default = (0, _common.ColorWrap)(Slider);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SliderPointer = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SliderPointer = exports.SliderPointer = function SliderPointer() {\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '14px',\n        height: '14px',\n        borderRadius: '6px',\n        transform: 'translate(-7px, -1px)',\n        backgroundColor: 'rgb(248, 248, 248)',\n        boxShadow: '0 1px 4px 0 rgba(0, 0, 0, 0.37)'\n      }\n    }\n  });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = SliderPointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SliderSwatch = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SliderSwatch = exports.SliderSwatch = function SliderSwatch(_ref) {\n  var hsl = _ref.hsl,\n      offset = _ref.offset,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      active = _ref.active,\n      first = _ref.first,\n      last = _ref.last;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatch: {\n        height: '12px',\n        background: 'hsl(' + hsl.h + ', 50%, ' + offset * 100 + '%)',\n        cursor: 'pointer'\n      }\n    },\n    'first': {\n      swatch: {\n        borderRadius: '2px 0 0 2px'\n      }\n    },\n    'last': {\n      swatch: {\n        borderRadius: '0 2px 2px 0'\n      }\n    },\n    'active': {\n      swatch: {\n        transform: 'scaleY(1.8)',\n        borderRadius: '3.6px/2px'\n      }\n    }\n  }, { active: active, first: first, last: last });\n\n  var handleClick = function handleClick(e) {\n    return onClick({\n      h: hsl.h,\n      s: 0.5,\n      l: offset,\n      source: 'hsl'\n    }, e);\n  };\n\n  return _react2.default.createElement('div', { style: styles.swatch, onClick: handleClick });\n};\n\nexports.default = SliderSwatch;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SliderSwatches = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _SliderSwatch = require('./SliderSwatch');\n\nvar _SliderSwatch2 = _interopRequireDefault(_SliderSwatch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SliderSwatches = exports.SliderSwatches = function SliderSwatches(_ref) {\n  var onClick = _ref.onClick,\n      hsl = _ref.hsl;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatches: {\n        marginTop: '20px'\n      },\n      swatch: {\n        boxSizing: 'border-box',\n        width: '20%',\n        paddingRight: '1px',\n        float: 'left'\n      },\n      clear: {\n        clear: 'both'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.swatches },\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.80',\n        active: Math.round(hsl.l * 100) / 100 === 0.80 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick,\n        first: true\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.65',\n        active: Math.round(hsl.l * 100) / 100 === 0.65 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.50',\n        active: Math.round(hsl.l * 100) / 100 === 0.50 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.35',\n        active: Math.round(hsl.l * 100) / 100 === 0.35 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.20',\n        active: Math.round(hsl.l * 100) / 100 === 0.20 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick,\n        last: true\n      })\n    ),\n    _react2.default.createElement('div', { style: styles.clear })\n  );\n};\n\nexports.default = SliderSwatches;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Swatches = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _materialColors = require('material-colors');\n\nvar material = _interopRequireWildcard(_materialColors);\n\nvar _common = require('../common');\n\nvar _SwatchesGroup = require('./SwatchesGroup');\n\nvar _SwatchesGroup2 = _interopRequireDefault(_SwatchesGroup);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Swatches = exports.Swatches = function Swatches(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      colors = _ref.colors,\n      hex = _ref.hex,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: width,\n        height: height\n      },\n      overflow: {\n        height: height,\n        overflowY: 'scroll'\n      },\n      body: {\n        padding: '16px 0 6px 16px'\n      },\n      clear: {\n        clear: 'both'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    _color2.default.isValidHex(data) && onChange({\n      hex: data,\n      source: 'hex'\n    }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'swatches-picker ' + className },\n    _react2.default.createElement(\n      _common.Raised,\n      null,\n      _react2.default.createElement(\n        'div',\n        { style: styles.overflow },\n        _react2.default.createElement(\n          'div',\n          { style: styles.body },\n          (0, _map2.default)(colors, function (group) {\n            return _react2.default.createElement(_SwatchesGroup2.default, {\n              key: group.toString(),\n              group: group,\n              active: hex,\n              onClick: handleChange,\n              onSwatchHover: onSwatchHover\n            });\n          }),\n          _react2.default.createElement('div', { style: styles.clear })\n        )\n      )\n    )\n  );\n};\n\nSwatches.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  height: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.arrayOf(_propTypes2.default.string))\n\n  /* eslint-disable max-len */\n};Swatches.defaultProps = {\n  width: 320,\n  height: 240,\n  colors: [[material.red['900'], material.red['700'], material.red['500'], material.red['300'], material.red['100']], [material.pink['900'], material.pink['700'], material.pink['500'], material.pink['300'], material.pink['100']], [material.purple['900'], material.purple['700'], material.purple['500'], material.purple['300'], material.purple['100']], [material.deepPurple['900'], material.deepPurple['700'], material.deepPurple['500'], material.deepPurple['300'], material.deepPurple['100']], [material.indigo['900'], material.indigo['700'], material.indigo['500'], material.indigo['300'], material.indigo['100']], [material.blue['900'], material.blue['700'], material.blue['500'], material.blue['300'], material.blue['100']], [material.lightBlue['900'], material.lightBlue['700'], material.lightBlue['500'], material.lightBlue['300'], material.lightBlue['100']], [material.cyan['900'], material.cyan['700'], material.cyan['500'], material.cyan['300'], material.cyan['100']], [material.teal['900'], material.teal['700'], material.teal['500'], material.teal['300'], material.teal['100']], ['#194D33', material.green['700'], material.green['500'], material.green['300'], material.green['100']], [material.lightGreen['900'], material.lightGreen['700'], material.lightGreen['500'], material.lightGreen['300'], material.lightGreen['100']], [material.lime['900'], material.lime['700'], material.lime['500'], material.lime['300'], material.lime['100']], [material.yellow['900'], material.yellow['700'], material.yellow['500'], material.yellow['300'], material.yellow['100']], [material.amber['900'], material.amber['700'], material.amber['500'], material.amber['300'], material.amber['100']], [material.orange['900'], material.orange['700'], material.orange['500'], material.orange['300'], material.orange['100']], [material.deepOrange['900'], material.deepOrange['700'], material.deepOrange['500'], material.deepOrange['300'], material.deepOrange['100']], [material.brown['900'], material.brown['700'], material.brown['500'], material.brown['300'], material.brown['100']], [material.blueGrey['900'], material.blueGrey['700'], material.blueGrey['500'], material.blueGrey['300'], material.blueGrey['100']], ['#000000', '#525252', '#969696', '#D9D9D9', '#FFFFFF']]\n};\n\nexports.default = (0, _common.ColorWrap)(Swatches);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SwatchesColor = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SwatchesColor = exports.SwatchesColor = function SwatchesColor(_ref) {\n  var color = _ref.color,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      onSwatchHover = _ref.onSwatchHover,\n      first = _ref.first,\n      last = _ref.last,\n      active = _ref.active;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      color: {\n        width: '40px',\n        height: '24px',\n        cursor: 'pointer',\n        background: color,\n        marginBottom: '1px'\n      },\n      check: {\n        fill: _color2.default.getContrastingColor(color),\n        marginLeft: '8px',\n        display: 'none'\n      }\n    },\n    'first': {\n      color: {\n        overflow: 'hidden',\n        borderRadius: '2px 2px 0 0'\n      }\n    },\n    'last': {\n      color: {\n        overflow: 'hidden',\n        borderRadius: '0 0 2px 2px'\n      }\n    },\n    'active': {\n      check: {\n        display: 'block'\n      }\n    },\n    'color-#FFFFFF': {\n      color: {\n        boxShadow: 'inset 0 0 0 1px #ddd'\n      },\n      check: {\n        fill: '#333'\n      }\n    },\n    'transparent': {\n      check: {\n        fill: '#333'\n      }\n    }\n  }, {\n    first: first,\n    last: last,\n    active: active,\n    'color-#FFFFFF': color === '#FFFFFF',\n    'transparent': color === 'transparent'\n  });\n\n  return _react2.default.createElement(\n    _common.Swatch,\n    {\n      color: color,\n      style: styles.color,\n      onClick: onClick,\n      onHover: onSwatchHover,\n      focusStyle: { boxShadow: '0 0 4px ' + color }\n    },\n    _react2.default.createElement(\n      'div',\n      { style: styles.check },\n      _react2.default.createElement(\n        'svg',\n        { style: { width: '24px', height: '24px' }, viewBox: '0 0 24 24' },\n        _react2.default.createElement('path', { d: 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z' })\n      )\n    )\n  );\n};\n\nexports.default = SwatchesColor;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SwatchesGroup = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _SwatchesColor = require('./SwatchesColor');\n\nvar _SwatchesColor2 = _interopRequireDefault(_SwatchesColor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SwatchesGroup = exports.SwatchesGroup = function SwatchesGroup(_ref) {\n  var onClick = _ref.onClick,\n      onSwatchHover = _ref.onSwatchHover,\n      group = _ref.group,\n      active = _ref.active;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      group: {\n        paddingBottom: '10px',\n        width: '40px',\n        float: 'left',\n        marginRight: '10px'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.group },\n    (0, _map2.default)(group, function (color, i) {\n      return _react2.default.createElement(_SwatchesColor2.default, {\n        key: color,\n        color: color,\n        active: color.toLowerCase() === active,\n        first: i === 0,\n        last: i === group.length - 1,\n        onClick: onClick,\n        onSwatchHover: onSwatchHover\n      });\n    })\n  );\n};\n\nexports.default = SwatchesGroup;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Twitter = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Twitter = exports.Twitter = function Twitter(_ref) {\n  var onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      hex = _ref.hex,\n      colors = _ref.colors,\n      width = _ref.width,\n      triangle = _ref.triangle,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      card: {\n        width: width,\n        background: '#fff',\n        border: '0 solid rgba(0,0,0,0.25)',\n        boxShadow: '0 1px 4px rgba(0,0,0,0.25)',\n        borderRadius: '4px',\n        position: 'relative'\n      },\n      body: {\n        padding: '15px 9px 9px 15px'\n      },\n      label: {\n        fontSize: '18px',\n        color: '#fff'\n      },\n      triangle: {\n        width: '0px',\n        height: '0px',\n        borderStyle: 'solid',\n        borderWidth: '0 9px 10px 9px',\n        borderColor: 'transparent transparent #fff transparent',\n        position: 'absolute'\n      },\n      triangleShadow: {\n        width: '0px',\n        height: '0px',\n        borderStyle: 'solid',\n        borderWidth: '0 9px 10px 9px',\n        borderColor: 'transparent transparent rgba(0,0,0,.1) transparent',\n        position: 'absolute'\n      },\n      hash: {\n        background: '#F0F0F0',\n        height: '30px',\n        width: '30px',\n        borderRadius: '4px 0 0 4px',\n        float: 'left',\n        color: '#98A1A4',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      input: {\n        width: '100px',\n        fontSize: '14px',\n        color: '#666',\n        border: '0px',\n        outline: 'none',\n        height: '28px',\n        boxShadow: 'inset 0 0 0 1px #F0F0F0',\n        boxSizing: 'content-box',\n        borderRadius: '0 4px 4px 0',\n        float: 'left',\n        paddingLeft: '8px'\n      },\n      swatch: {\n        width: '30px',\n        height: '30px',\n        float: 'left',\n        borderRadius: '4px',\n        margin: '0 6px 6px 0'\n      },\n      clear: {\n        clear: 'both'\n      }\n    },\n    'hide-triangle': {\n      triangle: {\n        display: 'none'\n      },\n      triangleShadow: {\n        display: 'none'\n      }\n    },\n    'top-left-triangle': {\n      triangle: {\n        top: '-10px',\n        left: '12px'\n      },\n      triangleShadow: {\n        top: '-11px',\n        left: '12px'\n      }\n    },\n    'top-right-triangle': {\n      triangle: {\n        top: '-10px',\n        right: '12px'\n      },\n      triangleShadow: {\n        top: '-11px',\n        right: '12px'\n      }\n    }\n  }, {\n    'hide-triangle': triangle === 'hide',\n    'top-left-triangle': triangle === 'top-left',\n    'top-right-triangle': triangle === 'top-right'\n  });\n\n  var handleChange = function handleChange(hexcode, e) {\n    _color2.default.isValidHex(hexcode) && onChange({\n      hex: hexcode,\n      source: 'hex'\n    }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.card, className: 'twitter-picker ' + className },\n    _react2.default.createElement('div', { style: styles.triangleShadow }),\n    _react2.default.createElement('div', { style: styles.triangle }),\n    _react2.default.createElement(\n      'div',\n      { style: styles.body },\n      (0, _map2.default)(colors, function (c, i) {\n        return _react2.default.createElement(_common.Swatch, {\n          key: i,\n          color: c,\n          hex: c,\n          style: styles.swatch,\n          onClick: handleChange,\n          onHover: onSwatchHover,\n          focusStyle: {\n            boxShadow: '0 0 4px ' + c\n          }\n        });\n      }),\n      _react2.default.createElement(\n        'div',\n        { style: styles.hash },\n        '#'\n      ),\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input },\n        value: hex.replace('#', ''),\n        onChange: handleChange\n      }),\n      _react2.default.createElement('div', { style: styles.clear })\n    )\n  );\n};\n\nTwitter.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  triangle: _propTypes2.default.oneOf(['hide', 'top-left', 'top-right']),\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.string)\n};\n\nTwitter.defaultProps = {\n  width: 276,\n  colors: ['#FF6900', '#FCB900', '#7BDCB5', '#00D084', '#8ED1FC', '#0693E3', '#ABB8C3', '#EB144C', '#F78DA7', '#9900EF'],\n  triangle: 'top-left'\n};\n\nexports.default = (0, _common.ColorWrap)(Twitter);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar calculateChange = exports.calculateChange = function calculateChange(e, skip, props, container) {\n  e.preventDefault();\n  var containerWidth = container.clientWidth;\n  var containerHeight = container.clientHeight;\n  var x = typeof e.pageX === 'number' ? e.pageX : e.touches[0].pageX;\n  var y = typeof e.pageY === 'number' ? e.pageY : e.touches[0].pageY;\n  var left = x - (container.getBoundingClientRect().left + window.pageXOffset);\n  var top = y - (container.getBoundingClientRect().top + window.pageYOffset);\n\n  if (props.direction === 'vertical') {\n    var a = void 0;\n    if (top < 0) {\n      a = 0;\n    } else if (top > containerHeight) {\n      a = 1;\n    } else {\n      a = Math.round(top * 100 / containerHeight) / 100;\n    }\n\n    if (props.hsl.a !== a) {\n      return {\n        h: props.hsl.h,\n        s: props.hsl.s,\n        l: props.hsl.l,\n        a: a,\n        source: 'rgb'\n      };\n    }\n  } else {\n    var _a = void 0;\n    if (left < 0) {\n      _a = 0;\n    } else if (left > containerWidth) {\n      _a = 1;\n    } else {\n      _a = Math.round(left * 100 / containerWidth) / 100;\n    }\n\n    if (props.a !== _a) {\n      return {\n        h: props.hsl.h,\n        s: props.hsl.s,\n        l: props.hsl.l,\n        a: _a,\n        source: 'rgb'\n      };\n    }\n  }\n  return null;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar checkboardCache = {};\n\nvar render = exports.render = function render(c1, c2, size, serverCanvas) {\n  if (typeof document === 'undefined' && !serverCanvas) {\n    return null;\n  }\n  var canvas = serverCanvas ? new serverCanvas() : document.createElement('canvas');\n  canvas.width = size * 2;\n  canvas.height = size * 2;\n  var ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return null;\n  } // If no context can be found, return early.\n  ctx.fillStyle = c1;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  ctx.fillStyle = c2;\n  ctx.fillRect(0, 0, size, size);\n  ctx.translate(size, size);\n  ctx.fillRect(0, 0, size, size);\n  return canvas.toDataURL();\n};\n\nvar get = exports.get = function get(c1, c2, size, serverCanvas) {\n  var key = c1 + '-' + c2 + '-' + size + (serverCanvas ? '-server' : '');\n  var checkboard = render(c1, c2, size, serverCanvas);\n\n  if (checkboardCache[key]) {\n    return checkboardCache[key];\n  }\n  checkboardCache[key] = checkboard;\n  return checkboard;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.red = undefined;\n\nvar _each = require('lodash/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nvar _tinycolor = require('tinycolor2');\n\nvar _tinycolor2 = _interopRequireDefault(_tinycolor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  simpleCheckForValidColor: function simpleCheckForValidColor(data) {\n    var keysToCheck = ['r', 'g', 'b', 'a', 'h', 's', 'l', 'v'];\n    var checked = 0;\n    var passed = 0;\n    (0, _each2.default)(keysToCheck, function (letter) {\n      if (data[letter]) {\n        checked += 1;\n        if (!isNaN(data[letter])) {\n          passed += 1;\n        }\n        if (letter === 's' || letter === 'l') {\n          var percentPatt = /^\\d+%$/;\n          if (percentPatt.test(data[letter])) {\n            passed += 1;\n          }\n        }\n      }\n    });\n    return checked === passed ? data : false;\n  },\n  toState: function toState(data, oldHue) {\n    var color = data.hex ? (0, _tinycolor2.default)(data.hex) : (0, _tinycolor2.default)(data);\n    var hsl = color.toHsl();\n    var hsv = color.toHsv();\n    var rgb = color.toRgb();\n    var hex = color.toHex();\n    if (hsl.s === 0) {\n      hsl.h = oldHue || 0;\n      hsv.h = oldHue || 0;\n    }\n    var transparent = hex === '000000' && rgb.a === 0;\n\n    return {\n      hsl: hsl,\n      hex: transparent ? 'transparent' : '#' + hex,\n      rgb: rgb,\n      hsv: hsv,\n      oldHue: data.h || oldHue || hsl.h,\n      source: data.source\n    };\n  },\n  isValidHex: function isValidHex(hex) {\n    // disable hex4 and hex8\n    var lh = String(hex).charAt(0) === '#' ? 1 : 0;\n    return hex.length !== 4 + lh && hex.length < 7 + lh && (0, _tinycolor2.default)(hex).isValid();\n  },\n  getContrastingColor: function getContrastingColor(data) {\n    if (!data) {\n      return '#fff';\n    }\n    var col = this.toState(data);\n    if (col.hex === 'transparent') {\n      return 'rgba(0,0,0,0.4)';\n    }\n    var yiq = (col.rgb.r * 299 + col.rgb.g * 587 + col.rgb.b * 114) / 1000;\n    return yiq >= 128 ? '#000' : '#fff';\n  }\n};\nvar red = exports.red = {\n  hsl: { a: 1, h: 0, l: 0.5, s: 1 },\n  hex: '#ff0000',\n  rgb: { r: 255, g: 0, b: 0, a: 1 },\n  hsv: { h: 0, s: 1, v: 1, a: 1 }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar calculateChange = exports.calculateChange = function calculateChange(e, skip, props, container) {\n  e.preventDefault();\n  var containerWidth = container.clientWidth;\n  var containerHeight = container.clientHeight;\n  var x = typeof e.pageX === 'number' ? e.pageX : e.touches[0].pageX;\n  var y = typeof e.pageY === 'number' ? e.pageY : e.touches[0].pageY;\n  var left = x - (container.getBoundingClientRect().left + window.pageXOffset);\n  var top = y - (container.getBoundingClientRect().top + window.pageYOffset);\n\n  if (props.direction === 'vertical') {\n    var h = void 0;\n    if (top < 0) {\n      h = 359;\n    } else if (top > containerHeight) {\n      h = 0;\n    } else {\n      var percent = -(top * 100 / containerHeight) + 100;\n      h = 360 * percent / 100;\n    }\n\n    if (props.hsl.h !== h) {\n      return {\n        h: h,\n        s: props.hsl.s,\n        l: props.hsl.l,\n        a: props.hsl.a,\n        source: 'rgb'\n      };\n    }\n  } else {\n    var _h = void 0;\n    if (left < 0) {\n      _h = 0;\n    } else if (left > containerWidth) {\n      _h = 359;\n    } else {\n      var _percent = left * 100 / containerWidth;\n      _h = 360 * _percent / 100;\n    }\n\n    if (props.hsl.h !== _h) {\n      return {\n        h: _h,\n        s: props.hsl.s,\n        l: props.hsl.l,\n        a: props.hsl.a,\n        source: 'rgb'\n      };\n    }\n  }\n  return null;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleFocus = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable no-invalid-this */\n\n\nvar handleFocus = exports.handleFocus = function handleFocus(Component) {\n  var Span = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'span';\n  return function (_React$Component) {\n    _inherits(Focus, _React$Component);\n\n    function Focus() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Focus);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Focus.__proto__ || Object.getPrototypeOf(Focus)).call.apply(_ref, [this].concat(args))), _this), _this.state = { focus: false }, _this.handleFocus = function () {\n        return _this.setState({ focus: true });\n      }, _this.handleBlur = function () {\n        return _this.setState({ focus: false });\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(Focus, [{\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(\n          Span,\n          { onFocus: this.handleFocus, onBlur: this.handleBlur },\n          _react2.default.createElement(Component, _extends({}, this.props, this.state))\n        );\n      }\n    }]);\n\n    return Focus;\n  }(_react2.default.Component);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar calculateChange = exports.calculateChange = function calculateChange(e, skip, props, container) {\n  e.preventDefault();\n\n  var _container$getBoundin = container.getBoundingClientRect(),\n      containerWidth = _container$getBoundin.width,\n      containerHeight = _container$getBoundin.height;\n\n  var x = typeof e.pageX === 'number' ? e.pageX : e.touches[0].pageX;\n  var y = typeof e.pageY === 'number' ? e.pageY : e.touches[0].pageY;\n  var left = x - (container.getBoundingClientRect().left + window.pageXOffset);\n  var top = y - (container.getBoundingClientRect().top + window.pageYOffset);\n\n  if (left < 0) {\n    left = 0;\n  } else if (left > containerWidth) {\n    left = containerWidth;\n  } else if (top < 0) {\n    top = 0;\n  } else if (top > containerHeight) {\n    top = containerHeight;\n  }\n\n  var saturation = left * 100 / containerWidth;\n  var bright = -(top * 100 / containerHeight) + 100;\n\n  return {\n    h: props.hsl.h,\n    s: saturation,\n    v: bright,\n    a: props.hsl.a,\n    source: 'rgb'\n  };\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CustomPicker = exports.TwitterPicker = exports.SwatchesPicker = exports.SliderPicker = exports.SketchPicker = exports.PhotoshopPicker = exports.MaterialPicker = exports.HuePicker = exports.GithubPicker = exports.CompactPicker = exports.ChromePicker = exports.default = exports.CirclePicker = exports.BlockPicker = exports.AlphaPicker = undefined;\n\nvar _Alpha = require('./components/alpha/Alpha');\n\nObject.defineProperty(exports, 'AlphaPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Alpha).default;\n  }\n});\n\nvar _Block = require('./components/block/Block');\n\nObject.defineProperty(exports, 'BlockPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Block).default;\n  }\n});\n\nvar _Circle = require('./components/circle/Circle');\n\nObject.defineProperty(exports, 'CirclePicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Circle).default;\n  }\n});\n\nvar _Chrome = require('./components/chrome/Chrome');\n\nObject.defineProperty(exports, 'ChromePicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Chrome).default;\n  }\n});\n\nvar _Compact = require('./components/compact/Compact');\n\nObject.defineProperty(exports, 'CompactPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Compact).default;\n  }\n});\n\nvar _Github = require('./components/github/Github');\n\nObject.defineProperty(exports, 'GithubPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Github).default;\n  }\n});\n\nvar _Hue = require('./components/hue/Hue');\n\nObject.defineProperty(exports, 'HuePicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Hue).default;\n  }\n});\n\nvar _Material = require('./components/material/Material');\n\nObject.defineProperty(exports, 'MaterialPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Material).default;\n  }\n});\n\nvar _Photoshop = require('./components/photoshop/Photoshop');\n\nObject.defineProperty(exports, 'PhotoshopPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Photoshop).default;\n  }\n});\n\nvar _Sketch = require('./components/sketch/Sketch');\n\nObject.defineProperty(exports, 'SketchPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Sketch).default;\n  }\n});\n\nvar _Slider = require('./components/slider/Slider');\n\nObject.defineProperty(exports, 'SliderPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Slider).default;\n  }\n});\n\nvar _Swatches = require('./components/swatches/Swatches');\n\nObject.defineProperty(exports, 'SwatchesPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Swatches).default;\n  }\n});\n\nvar _Twitter = require('./components/twitter/Twitter');\n\nObject.defineProperty(exports, 'TwitterPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Twitter).default;\n  }\n});\n\nvar _ColorWrap = require('./components/common/ColorWrap');\n\nObject.defineProperty(exports, 'CustomPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_ColorWrap).default;\n  }\n});\n\nvar _Chrome2 = _interopRequireDefault(_Chrome);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Chrome2.default;","import * as React from 'react';\nimport { createDragDropManager } from 'dnd-core';\n/**\n * Create the React Context\n */\n\nexport var DndContext = React.createContext({\n  dragDropManager: undefined\n});\n/**\n * Creates the context object we're providing\n * @param backend\n * @param context\n */\n\nexport function createDndContext(backend, context, options, debugMode) {\n  return {\n    dragDropManager: createDragDropManager(backend, context, options, debugMode)\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nvar isCallingCanDrag = false;\nvar isCallingIsDragging = false;\nexport var DragSourceMonitorImpl = /*#__PURE__*/function () {\n  function DragSourceMonitorImpl(manager) {\n    _classCallCheck(this, DragSourceMonitorImpl);\n\n    this.sourceId = null;\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass(DragSourceMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(sourceId) {\n      this.sourceId = sourceId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.sourceId;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingCanDrag = true;\n        return this.internalMonitor.canDragSource(this.sourceId);\n      } finally {\n        isCallingCanDrag = false;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      if (!this.sourceId) {\n        return false;\n      }\n\n      invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingIsDragging = true;\n        return this.internalMonitor.isDraggingSource(this.sourceId);\n      } finally {\n        isCallingIsDragging = false;\n      }\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      return this.internalMonitor.isDraggingSource(sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId, options) {\n      return this.internalMonitor.isOverTarget(targetId, options);\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.internalMonitor.getTargetIds();\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.internalMonitor.isSourcePublic();\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.internalMonitor.getSourceId();\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      return this.internalMonitor.canDragSource(sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      return this.internalMonitor.canDropOnTarget(targetId);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DragSourceMonitorImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nvar isCallingCanDrop = false;\nexport var DropTargetMonitorImpl = /*#__PURE__*/function () {\n  function DropTargetMonitorImpl(manager) {\n    _classCallCheck(this, DropTargetMonitorImpl);\n\n    this.targetId = null;\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass(DropTargetMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(targetId) {\n      this.targetId = targetId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.targetId;\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      // Cut out early if the target id has not been set. This should prevent errors\n      // where the user has an older version of dnd-core like in\n      // https://github.com/react-dnd/react-dnd/issues/1310\n      if (!this.targetId) {\n        return false;\n      }\n\n      invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n      try {\n        isCallingCanDrop = true;\n        return this.internalMonitor.canDropOnTarget(this.targetId);\n      } finally {\n        isCallingCanDrop = false;\n      }\n    }\n  }, {\n    key: \"isOver\",\n    value: function isOver(options) {\n      if (!this.targetId) {\n        return false;\n      }\n\n      return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DropTargetMonitorImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { wrapConnectorHooks } from './wrapConnectorHooks';\nimport { isRef } from '../utils/isRef';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nexport var SourceConnector = /*#__PURE__*/function () {\n  function SourceConnector(backend) {\n    var _this = this;\n\n    _classCallCheck(this, SourceConnector);\n\n    this.hooks = wrapConnectorHooks({\n      dragSource: function dragSource(node, options) {\n        _this.clearDragSource();\n\n        _this.dragSourceOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragSourceRef = node;\n        } else {\n          _this.dragSourceNode = node;\n        }\n\n        _this.reconnectDragSource();\n      },\n      dragPreview: function dragPreview(node, options) {\n        _this.clearDragPreview();\n\n        _this.dragPreviewOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragPreviewRef = node;\n        } else {\n          _this.dragPreviewNode = node;\n        }\n\n        _this.reconnectDragPreview();\n      }\n    });\n    this.handlerId = null; // The drop target may either be attached via ref or connect function\n\n    this.dragSourceRef = null;\n    this.dragSourceOptionsInternal = null; // The drag preview may either be attached via ref or connect function\n\n    this.dragPreviewRef = null;\n    this.dragPreviewOptionsInternal = null;\n    this.lastConnectedHandlerId = null;\n    this.lastConnectedDragSource = null;\n    this.lastConnectedDragSourceOptions = null;\n    this.lastConnectedDragPreview = null;\n    this.lastConnectedDragPreviewOptions = null;\n    this.backend = backend;\n  }\n\n  _createClass(SourceConnector, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (this.handlerId === newHandlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.reconnectDragSource();\n      this.reconnectDragPreview();\n    }\n  }, {\n    key: \"reconnectDragSource\",\n    value: function reconnectDragSource() {\n      var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragSource();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragSource) {\n        this.lastConnectedDragSource = dragSource;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragSource = dragSource;\n        this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n        this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n      }\n    }\n  }, {\n    key: \"reconnectDragPreview\",\n    value: function reconnectDragPreview() {\n      var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragPreview();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragPreview) {\n        this.lastConnectedDragPreview = dragPreview;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragPreview = dragPreview;\n        this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n        this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n      }\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didConnectedDragSourceChange\",\n    value: function didConnectedDragSourceChange() {\n      return this.lastConnectedDragSource !== this.dragSource;\n    }\n  }, {\n    key: \"didConnectedDragPreviewChange\",\n    value: function didConnectedDragPreviewChange() {\n      return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n  }, {\n    key: \"didDragSourceOptionsChange\",\n    value: function didDragSourceOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n  }, {\n    key: \"didDragPreviewOptionsChange\",\n    value: function didDragPreviewOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n  }, {\n    key: \"disconnectDragSource\",\n    value: function disconnectDragSource() {\n      if (this.dragSourceUnsubscribe) {\n        this.dragSourceUnsubscribe();\n        this.dragSourceUnsubscribe = undefined;\n      }\n    }\n  }, {\n    key: \"disconnectDragPreview\",\n    value: function disconnectDragPreview() {\n      if (this.dragPreviewUnsubscribe) {\n        this.dragPreviewUnsubscribe();\n        this.dragPreviewUnsubscribe = undefined;\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }\n  }, {\n    key: \"clearDragSource\",\n    value: function clearDragSource() {\n      this.dragSourceNode = null;\n      this.dragSourceRef = null;\n    }\n  }, {\n    key: \"clearDragPreview\",\n    value: function clearDragPreview() {\n      this.dragPreviewNode = null;\n      this.dragPreviewRef = null;\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dragSource;\n    }\n  }, {\n    key: \"dragSourceOptions\",\n    get: function get() {\n      return this.dragSourceOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragSourceOptionsInternal = options;\n    }\n  }, {\n    key: \"dragPreviewOptions\",\n    get: function get() {\n      return this.dragPreviewOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragPreviewOptionsInternal = options;\n    }\n  }, {\n    key: \"dragSource\",\n    get: function get() {\n      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n  }, {\n    key: \"dragPreview\",\n    get: function get() {\n      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n  }]);\n\n  return SourceConnector;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { wrapConnectorHooks } from './wrapConnectorHooks';\nimport { isRef } from '../utils/isRef';\nexport var TargetConnector = /*#__PURE__*/function () {\n  function TargetConnector(backend) {\n    var _this = this;\n\n    _classCallCheck(this, TargetConnector);\n\n    this.hooks = wrapConnectorHooks({\n      dropTarget: function dropTarget(node, options) {\n        _this.clearDropTarget();\n\n        _this.dropTargetOptions = options;\n\n        if (isRef(node)) {\n          _this.dropTargetRef = node;\n        } else {\n          _this.dropTargetNode = node;\n        }\n\n        _this.reconnect();\n      }\n    });\n    this.handlerId = null; // The drop target may either be attached via ref or connect function\n\n    this.dropTargetRef = null;\n    this.dropTargetOptionsInternal = null;\n    this.lastConnectedHandlerId = null;\n    this.lastConnectedDropTarget = null;\n    this.lastConnectedDropTargetOptions = null;\n    this.backend = backend;\n  }\n\n  _createClass(TargetConnector, [{\n    key: \"reconnect\",\n    value: function reconnect() {\n      // if nothing has changed then don't resubscribe\n      var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n      if (didChange) {\n        this.disconnectDropTarget();\n      }\n\n      var dropTarget = this.dropTarget;\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dropTarget) {\n        this.lastConnectedDropTarget = dropTarget;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDropTarget = dropTarget;\n        this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n        this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n      }\n    }\n  }, {\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (newHandlerId === this.handlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didDropTargetChange\",\n    value: function didDropTargetChange() {\n      return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n  }, {\n    key: \"didOptionsChange\",\n    value: function didOptionsChange() {\n      return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n  }, {\n    key: \"disconnectDropTarget\",\n    value: function disconnectDropTarget() {\n      if (this.unsubscribeDropTarget) {\n        this.unsubscribeDropTarget();\n        this.unsubscribeDropTarget = undefined;\n      }\n    }\n  }, {\n    key: \"clearDropTarget\",\n    value: function clearDropTarget() {\n      this.dropTargetRef = null;\n      this.dropTargetNode = null;\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dropTarget;\n    }\n  }, {\n    key: \"dropTargetOptions\",\n    get: function get() {\n      return this.dropTargetOptionsInternal;\n    },\n    set: function set(options) {\n      this.dropTargetOptionsInternal = options;\n    }\n  }, {\n    key: \"dropTarget\",\n    get: function get() {\n      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n  }]);\n\n  return TargetConnector;\n}();","export function registerTarget(type, target, manager) {\n  var registry = manager.getRegistry();\n  var targetId = registry.addTarget(type, target);\n  return [targetId, function () {\n    return registry.removeTarget(targetId);\n  }];\n}\nexport function registerSource(type, source, manager) {\n  var registry = manager.getRegistry();\n  var sourceId = registry.addSource(type, source);\n  return [sourceId, function () {\n    return registry.removeSource(sourceId);\n  }];\n}","import { isValidElement } from 'react';\nimport { cloneWithRef } from '../utils/cloneWithRef';\n\nfunction throwIfCompositeComponentElement(element) {\n  // Custom components can no longer be wrapped directly in React DnD 2.0\n  // so that we don't need to depend on findDOMNode() from react-dom.\n  if (typeof element.type === 'string') {\n    return;\n  }\n\n  var displayName = element.type.displayName || element.type.name || 'the component';\n  throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n}\n\nfunction wrapHookToRecognizeElement(hook) {\n  return function () {\n    var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    // When passed a node, call the hook straight away.\n    if (!isValidElement(elementOrNode)) {\n      var node = elementOrNode;\n      hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n      // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n      return node;\n    } // If passed a ReactElement, clone it and attach this function as a ref.\n    // This helps us achieve a neat API where user doesn't even know that refs\n    // are being used under the hood.\n\n\n    var element = elementOrNode;\n    throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n    var ref = options ? function (node) {\n      return hook(node, options);\n    } : hook;\n    return cloneWithRef(element, ref);\n  };\n}\n\nexport function wrapConnectorHooks(hooks) {\n  var wrappedHooks = {};\n  Object.keys(hooks).forEach(function (key) {\n    var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n    if (key.endsWith('Ref')) {\n      wrappedHooks[key] = hooks[key];\n    } else {\n      var wrappedHook = wrapHookToRecognizeElement(hook);\n\n      wrappedHooks[key] = function () {\n        return wrappedHook;\n      };\n    }\n  });\n  return wrappedHooks;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { useMemo } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { registerSource } from '../../common/registration';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { DragSourceMonitorImpl } from '../../common/DragSourceMonitorImpl';\nimport { SourceConnector } from '../../common/SourceConnector';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nexport function useDragSourceMonitor() {\n  var manager = useDragDropManager();\n  var monitor = useMemo(function () {\n    return new DragSourceMonitorImpl(manager);\n  }, [manager]);\n  var connector = useMemo(function () {\n    return new SourceConnector(manager.getBackend());\n  }, [manager]);\n  return [monitor, connector];\n}\nexport function useDragHandler(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useMemo(function () {\n    return {\n      beginDrag: function beginDrag() {\n        var _spec$current = spec.current,\n            begin = _spec$current.begin,\n            item = _spec$current.item;\n\n        if (begin) {\n          var beginResult = begin(monitor);\n          invariant(beginResult == null || _typeof(beginResult) === 'object', 'dragSpec.begin() must either return an object, undefined, or null');\n          return beginResult || item || {};\n        }\n\n        return item || {};\n      },\n      canDrag: function canDrag() {\n        if (typeof spec.current.canDrag === 'boolean') {\n          return spec.current.canDrag;\n        } else if (typeof spec.current.canDrag === 'function') {\n          return spec.current.canDrag(monitor);\n        } else {\n          return true;\n        }\n      },\n      isDragging: function isDragging(globalMonitor, target) {\n        var isDragging = spec.current.isDragging;\n        return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n      },\n      endDrag: function endDrag() {\n        var end = spec.current.end;\n\n        if (end) {\n          end(monitor.getItem(), monitor);\n        }\n\n        connector.reconnect();\n      }\n    };\n  }, []);\n  useIsomorphicLayoutEffect(function registerHandler() {\n    var _registerSource = registerSource(spec.current.item.type, handler, manager),\n        _registerSource2 = _slicedToArray(_registerSource, 2),\n        handlerId = _registerSource2[0],\n        unregister = _registerSource2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, []);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useMemo } from 'react';\nimport { registerTarget } from '../../common/registration';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { TargetConnector } from '../../common/TargetConnector';\nimport { DropTargetMonitorImpl } from '../../common/DropTargetMonitorImpl';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nexport function useDropTargetMonitor() {\n  var manager = useDragDropManager();\n  var monitor = useMemo(function () {\n    return new DropTargetMonitorImpl(manager);\n  }, [manager]);\n  var connector = useMemo(function () {\n    return new TargetConnector(manager.getBackend());\n  }, [manager]);\n  return [monitor, connector];\n}\nexport function useDropHandler(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useMemo(function () {\n    return {\n      canDrop: function canDrop() {\n        var canDrop = spec.current.canDrop;\n        return canDrop ? canDrop(monitor.getItem(), monitor) : true;\n      },\n      hover: function hover() {\n        var hover = spec.current.hover;\n\n        if (hover) {\n          hover(monitor.getItem(), monitor);\n        }\n      },\n      drop: function drop() {\n        var drop = spec.current.drop;\n\n        if (drop) {\n          return drop(monitor.getItem(), monitor);\n        }\n      }\n    };\n  }, [monitor]);\n  useIsomorphicLayoutEffect(function registerHandler() {\n    var _registerTarget = registerTarget(spec.current.accept, handler, manager),\n        _registerTarget2 = _slicedToArray(_registerTarget, 2),\n        handlerId = _registerTarget2[0],\n        unregister = _registerTarget2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [monitor, connector]);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { useState, useCallback } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\n\nexport function useCollector(monitor, collect, onUpdate) {\n  var _useState = useState(function () {\n    return collect(monitor);\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      collected = _useState2[0],\n      setCollected = _useState2[1];\n\n  var updateCollected = useCallback(function () {\n    var nextValue = collect(monitor);\n\n    if (!shallowEqual(collected, nextValue)) {\n      setCollected(nextValue);\n\n      if (onUpdate) {\n        onUpdate();\n      }\n    }\n  }, [collected, monitor, onUpdate]); // update the collected properties after the first render\n  // and the components are attached to dnd-core\n\n  useIsomorphicLayoutEffect(updateCollected, []);\n  return [collected, updateCollected];\n}","import { useLayoutEffect, useEffect } from 'react'; // suppress the useLayoutEffect warning on server side.\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nimport { useCollector } from './useCollector';\nexport function useMonitorOutput(monitor, collect, onCollect) {\n  var _useCollector = useCollector(monitor, collect, onCollect),\n      _useCollector2 = _slicedToArray(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    var handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return undefined;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useRef, useMemo } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { useMonitorOutput } from './internal/useMonitorOutput';\nimport { useIsomorphicLayoutEffect } from './internal/useIsomorphicLayoutEffect';\nimport { useDragSourceMonitor, useDragHandler } from './internal/drag';\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification *\n */\n\nexport function useDrag(spec) {\n  var specRef = useRef(spec);\n  specRef.current = spec; // TODO: wire options into createSourceConnector\n\n  invariant(spec.item != null, 'item must be defined');\n  invariant(spec.item.type != null, 'item type must be defined');\n\n  var _useDragSourceMonitor = useDragSourceMonitor(),\n      _useDragSourceMonitor2 = _slicedToArray(_useDragSourceMonitor, 2),\n      monitor = _useDragSourceMonitor2[0],\n      connector = _useDragSourceMonitor2[1];\n\n  useDragHandler(specRef, monitor, connector);\n  var result = useMonitorOutput(monitor, specRef.current.collect || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n  var connectDragSource = useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n  var connectDragPreview = useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = specRef.current.options || null;\n    connector.reconnect();\n  }, [connector]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = specRef.current.previewOptions || null;\n    connector.reconnect();\n  }, [connector]);\n  return [result, connectDragSource, connectDragPreview];\n}","import { useContext } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { DndContext } from '../common/DndContext';\n/**\n * A hook to retrieve the DragDropManager from Context\n */\n\nexport function useDragDropManager() {\n  var _useContext = useContext(DndContext),\n      dragDropManager = _useContext.dragDropManager;\n\n  invariant(dragDropManager != null, 'Expected drag drop context');\n  return dragDropManager;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useRef, useMemo } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { useMonitorOutput } from './internal/useMonitorOutput';\nimport { useIsomorphicLayoutEffect } from './internal/useIsomorphicLayoutEffect';\nimport { useDropHandler, useDropTargetMonitor } from './internal/drop';\n/**\n * useDropTarget Hook\n * @param spec The drop target specification\n */\n\nexport function useDrop(spec) {\n  var specRef = useRef(spec);\n  specRef.current = spec;\n  invariant(spec.accept != null, 'accept must be defined');\n\n  var _useDropTargetMonitor = useDropTargetMonitor(),\n      _useDropTargetMonitor2 = _slicedToArray(_useDropTargetMonitor, 2),\n      monitor = _useDropTargetMonitor2[0],\n      connector = _useDropTargetMonitor2[1];\n\n  useDropHandler(specRef, monitor, connector);\n  var result = useMonitorOutput(monitor, specRef.current.collect || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n  var connectDropTarget = useMemo(function () {\n    return connector.hooks.dropTarget();\n  }, [connector]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dropTargetOptions = spec.options || null;\n    connector.reconnect();\n  }, [spec.options]);\n  return [result, connectDropTarget];\n}","import { cloneElement } from 'react';\nimport { invariant } from '@react-dnd/invariant';\n\nfunction setRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else {\n    ref.current = node;\n  }\n}\n\nexport function cloneWithRef(element, newRef) {\n  var previousRef = element.ref;\n  invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute');\n\n  if (!previousRef) {\n    // When there is no ref on the element, use the new ref directly\n    return cloneElement(element, {\n      ref: newRef\n    });\n  } else {\n    return cloneElement(element, {\n      ref: function ref(node) {\n        setRef(previousRef, node);\n        setRef(newRef, node);\n      }\n    });\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function isRef(obj) {\n  return (// eslint-disable-next-line no-prototype-builtins\n    obj !== null && _typeof(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n  );\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { createStore } from 'redux';\nimport { reduce } from './reducers';\nimport { createDragDropActions } from './actions/dragDrop';\nimport { DragDropMonitorImpl } from './DragDropMonitorImpl';\nimport { HandlerRegistryImpl } from './HandlerRegistryImpl';\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}\n\nexport var DragDropManagerImpl = /*#__PURE__*/function () {\n  function DragDropManagerImpl() {\n    var _this = this;\n\n    var debugMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, DragDropManagerImpl);\n\n    this.isSetUp = false;\n\n    this.handleRefCountChange = function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    };\n\n    var store = makeStoreInstance(debugMode);\n    this.store = store;\n    this.monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = createDragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { matchesType } from './utils/matchesType';\nimport { getSourceClientOffset as _getSourceClientOffset, getDifferenceFromInitialOffset as _getDifferenceFromInitialOffset } from './utils/coords';\nimport { areDirty } from './utils/dirtiness';\nexport var DragDropMonitorImpl = /*#__PURE__*/function () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck(this, DragDropMonitorImpl);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, 'Expected to find a valid source.');\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, 'Expected to find a valid target.');\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, 'Expected to find a valid source.');\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      };\n\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return _getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return _getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource as _addSource, addTarget as _addTarget, removeSource as _removeSource, removeTarget as _removeTarget } from './actions/registry';\nimport { getNextUniqueId } from './utils/getNextUniqueId';\nimport { HandlerRole } from './interfaces';\nimport { validateSourceContract, validateTargetContract, validateType } from './contracts';\nimport { asap } from '@react-dnd/asap';\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nexport var HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck(this, HandlerRegistryImpl);\n\n    this.types = new Map();\n    this.dragSources = new Map();\n    this.dropTargets = new Map();\n    this.pinnedSourceId = null;\n    this.pinnedSource = null;\n    this.store = store;\n  }\n\n  _createClass(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(_addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(_addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(_removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(_removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();","import { invariant } from '@react-dnd/invariant';\nimport { setClientOffset } from './local/setClientOffset';\nimport { isObject } from '../../utils/js_utils';\nimport { BEGIN_DRAG, INIT_COORDS } from './types';\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\nexport function createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      if (!getSourceClientOffset) {\n        throw new Error('getSourceClientOffset must be defined');\n      }\n\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId);\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { DROP } from './types';\nimport { isObject } from '../../utils/js_utils';\nexport function createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread(_objectSpread({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}","import { invariant } from '@react-dnd/invariant';\nimport { END_DRAG } from './types';\nexport function createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n\n    if (sourceId != null) {\n      var source = registry.getSource(sourceId, true);\n      source.endDrag(monitor, sourceId);\n      registry.unpinSource();\n    }\n\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}","import { invariant } from '@react-dnd/invariant';\nimport { matchesType } from '../../utils/matchesType';\nimport { HOVER } from './types';\nexport function createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}","import { createBeginDrag } from './beginDrag';\nimport { createPublishDragSource } from './publishDragSource';\nimport { createHover } from './hover';\nimport { createDrop } from './drop';\nimport { createEndDrag } from './endDrag';\nexport * from './types';\nexport function createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}","import { INIT_COORDS } from '../types';\nexport function setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}","import { PUBLISH_DRAG_SOURCE } from './types';\nexport function createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}","export var INIT_COORDS = 'dnd-core/INIT_COORDS';\nexport var BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nexport var PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nexport var HOVER = 'dnd-core/HOVER';\nexport var DROP = 'dnd-core/DROP';\nexport var END_DRAG = 'dnd-core/END_DRAG';","export var ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nexport var ADD_TARGET = 'dnd-core/ADD_TARGET';\nexport var REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nexport var REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nexport function addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\nexport function removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { invariant } from '@react-dnd/invariant';\nexport function validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nexport function validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nexport function validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}","import { DragDropManagerImpl } from './DragDropManagerImpl';\nexport function createDragDropManager(backendFactory, globalContext, backendOptions, debugMode) {\n  var manager = new DragDropManagerImpl(debugMode);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}","export var HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));","import { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nimport { areArraysEqual } from '../utils/equality';\nimport { NONE, ALL } from '../utils/dirtiness';\nimport { xor } from '../utils/js_utils';\nexport function reduce() {\n  var _state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NONE;\n\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { INIT_COORDS, BEGIN_DRAG, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { areCoordsEqual } from '../utils/equality';\nvar initialState = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState;\n\n    default:\n      return state;\n  }\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { REMOVE_TARGET } from '../actions/registry';\nimport { without } from '../utils/js_utils';\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        targetIds: without(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { reduce as dragOffset } from './dragOffset';\nimport { reduce as dragOperation } from './dragOperation';\nimport { reduce as refCount } from './refCount';\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds';\nimport { reduce as stateId } from './stateId';\nimport { get } from '../utils/js_utils';\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread(_objectSpread({}, action.payload), {}, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: dragOffset(state.dragOffset, action),\n    refCount: refCount(state.refCount, action),\n    dragOperation: dragOperation(state.dragOperation, action),\n    stateId: stateId(state.stateId)\n  };\n}","import { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}","export function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}","/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\nexport function subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\nexport function getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\nexport function getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}","import { intersection } from './js_utils';\nexport var NONE = [];\nexport var ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nexport function areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}","export var strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\nexport function areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\nexport function areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}","var nextUniqueId = 0;\nexport function getNextUniqueId() {\n  return nextUniqueId++;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\nexport function get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isString(input) {\n  return typeof input === 'string';\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isObject(input) {\n  return _typeof(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\nexport function xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\nexport function intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}","export function matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = global || self, factory(global.ReactTable = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  React = React && Object.prototype.hasOwnProperty.call(React, 'default') ? React['default'] : React;\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function () {\n      var self = this,\n          args = arguments;\n      return new Promise(function (resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== \"object\" || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || \"default\");\n      if (typeof res !== \"object\") return res;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n\n    return (hint === \"string\" ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, \"string\");\n\n    return typeof key === \"symbol\" ? key : String(key);\n  }\n\n  var renderErr = 'Renderer Error ☝️';\n  var actions = {\n    init: 'init'\n  };\n  var defaultRenderer = function defaultRenderer(_ref) {\n    var _ref$value = _ref.value,\n        value = _ref$value === void 0 ? '' : _ref$value;\n    return value;\n  };\n  var emptyRenderer = function emptyRenderer() {\n    return React.createElement(React.Fragment, null, \"\\xA0\");\n  };\n  var defaultColumn = {\n    Cell: defaultRenderer,\n    width: 150,\n    minWidth: 0,\n    maxWidth: Number.MAX_SAFE_INTEGER\n  };\n\n  function mergeProps() {\n    for (var _len = arguments.length, propList = new Array(_len), _key = 0; _key < _len; _key++) {\n      propList[_key] = arguments[_key];\n    }\n\n    return propList.reduce(function (props, next) {\n      var style = next.style,\n          className = next.className,\n          rest = _objectWithoutPropertiesLoose(next, [\"style\", \"className\"]);\n\n      props = _extends({}, props, {}, rest);\n\n      if (style) {\n        props.style = props.style ? _extends({}, props.style || {}, {}, style || {}) : style;\n      }\n\n      if (className) {\n        props.className = props.className ? props.className + ' ' + className : className;\n      }\n\n      if (props.className === '') {\n        delete props.className;\n      }\n\n      return props;\n    }, {});\n  }\n\n  function handlePropGetter(prevProps, userProps, meta) {\n    // Handle a lambda, pass it the previous props\n    if (typeof userProps === 'function') {\n      return handlePropGetter({}, userProps(prevProps, meta));\n    } // Handle an array, merge each item as separate props\n\n\n    if (Array.isArray(userProps)) {\n      return mergeProps.apply(void 0, [prevProps].concat(userProps));\n    } // Handle an object by default, merge the two objects\n\n\n    return mergeProps(prevProps, userProps);\n  }\n\n  var makePropGetter = function makePropGetter(hooks, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return function (userProps) {\n      if (userProps === void 0) {\n        userProps = {};\n      }\n\n      return [].concat(hooks, [userProps]).reduce(function (prev, next) {\n        return handlePropGetter(prev, next, _extends({}, meta, {\n          userProps: userProps\n        }));\n      }, {});\n    };\n  };\n  var reduceHooks = function reduceHooks(hooks, initial, meta, allowUndefined) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return hooks.reduce(function (prev, next) {\n      var nextValue = next(prev, meta);\n\n      {\n        if (!allowUndefined && typeof nextValue === 'undefined') {\n          console.info(next);\n          throw new Error('React Table: A reducer hook ☝️ just returned undefined! This is not allowed.');\n        }\n      }\n\n      return nextValue;\n    }, initial);\n  };\n  var loopHooks = function loopHooks(hooks, context, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return hooks.forEach(function (hook) {\n      var nextValue = hook(context, meta);\n\n      {\n        if (typeof nextValue !== 'undefined') {\n          console.info(hook, nextValue);\n          throw new Error('React Table: A loop-type hook ☝️ just returned a value! This is not allowed.');\n        }\n      }\n    });\n  };\n  function ensurePluginOrder(plugins, befores, pluginName, afters) {\n    if ( afters) {\n      throw new Error(\"Defining plugins in the \\\"after\\\" section of ensurePluginOrder is no longer supported (see plugin \" + pluginName + \")\");\n    }\n\n    var pluginIndex = plugins.findIndex(function (plugin) {\n      return plugin.pluginName === pluginName;\n    });\n\n    if (pluginIndex === -1) {\n      {\n        throw new Error(\"The plugin \\\"\" + pluginName + \"\\\" was not found in the plugin list!\\nThis usually means you need to need to name your plugin hook by setting the 'pluginName' property of the hook function, eg:\\n\\n  \" + pluginName + \".pluginName = '\" + pluginName + \"'\\n\");\n      }\n    }\n\n    befores.forEach(function (before) {\n      var beforeIndex = plugins.findIndex(function (plugin) {\n        return plugin.pluginName === before;\n      });\n\n      if (beforeIndex > -1 && beforeIndex > pluginIndex) {\n        {\n          throw new Error(\"React Table: The \" + pluginName + \" plugin hook must be placed after the \" + before + \" plugin hook!\");\n        }\n      }\n    });\n  }\n  function functionalUpdate(updater, old) {\n    return typeof updater === 'function' ? updater(old) : updater;\n  }\n  function useGetLatest(obj) {\n    var ref = React.useRef();\n    ref.current = obj;\n    return React.useCallback(function () {\n      return ref.current;\n    }, []);\n  } // SSR has issues with useLayoutEffect still, so use useEffect during SSR\n\n  var safeUseLayoutEffect = typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n  function useMountedLayoutEffect(fn, deps) {\n    var mountedRef = React.useRef(false);\n    safeUseLayoutEffect(function () {\n      if (mountedRef.current) {\n        fn();\n      }\n\n      mountedRef.current = true; // eslint-disable-next-line\n    }, deps);\n  }\n  function useAsyncDebounce(defaultFn, defaultWait) {\n    if (defaultWait === void 0) {\n      defaultWait = 0;\n    }\n\n    var debounceRef = React.useRef({});\n    var getDefaultFn = useGetLatest(defaultFn);\n    var getDefaultWait = useGetLatest(defaultWait);\n    return React.useCallback(\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _len2,\n            args,\n            _key2,\n            _args2 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                for (_len2 = _args2.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = _args2[_key2];\n                }\n\n                if (!debounceRef.current.promise) {\n                  debounceRef.current.promise = new Promise(function (resolve, reject) {\n                    debounceRef.current.resolve = resolve;\n                    debounceRef.current.reject = reject;\n                  });\n                }\n\n                if (debounceRef.current.timeout) {\n                  clearTimeout(debounceRef.current.timeout);\n                }\n\n                debounceRef.current.timeout = setTimeout(\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                regeneratorRuntime.mark(function _callee() {\n                  return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          delete debounceRef.current.timeout;\n                          _context.prev = 1;\n                          _context.t0 = debounceRef.current;\n                          _context.next = 5;\n                          return getDefaultFn().apply(void 0, args);\n\n                        case 5:\n                          _context.t1 = _context.sent;\n\n                          _context.t0.resolve.call(_context.t0, _context.t1);\n\n                          _context.next = 12;\n                          break;\n\n                        case 9:\n                          _context.prev = 9;\n                          _context.t2 = _context[\"catch\"](1);\n                          debounceRef.current.reject(_context.t2);\n\n                        case 12:\n                          _context.prev = 12;\n                          delete debounceRef.current.promise;\n                          return _context.finish(12);\n\n                        case 15:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee, null, [[1, 9, 12, 15]]);\n                })), getDefaultWait());\n                return _context2.abrupt(\"return\", debounceRef.current.promise);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function () {\n        return _ref2.apply(this, arguments);\n      };\n    }(), [getDefaultFn, getDefaultWait]);\n  }\n  function makeRenderer(instance, column, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return function (type, userProps) {\n      if (userProps === void 0) {\n        userProps = {};\n      }\n\n      var Comp = typeof type === 'string' ? column[type] : type;\n\n      if (typeof Comp === 'undefined') {\n        console.info(column);\n        throw new Error(renderErr);\n      }\n\n      return flexRender(Comp, _extends({}, instance, {\n        column: column\n      }, meta, {}, userProps));\n    };\n  }\n  function flexRender(Comp, props) {\n    return isReactComponent(Comp) ? React.createElement(Comp, props) : Comp;\n  }\n\n  function isReactComponent(component) {\n    return isClassComponent(component) || typeof component === 'function' || isExoticComponent(component);\n  }\n\n  function isClassComponent(component) {\n    return typeof component === 'function' && function () {\n      var proto = Object.getPrototypeOf(component);\n      return proto.prototype && proto.prototype.isReactComponent;\n    }();\n  }\n\n  function isExoticComponent(component) {\n    return typeof component === 'object' && typeof component.$$typeof === 'symbol' && ['react.memo', 'react.forward_ref'].includes(component.$$typeof.description);\n  }\n\n  function linkColumnStructure(columns, parent, depth) {\n    if (depth === void 0) {\n      depth = 0;\n    }\n\n    return columns.map(function (column) {\n      column = _extends({}, column, {\n        parent: parent,\n        depth: depth\n      });\n      assignColumnAccessor(column);\n\n      if (column.columns) {\n        column.columns = linkColumnStructure(column.columns, column, depth + 1);\n      }\n\n      return column;\n    });\n  }\n  function flattenColumns(columns) {\n    return flattenBy(columns, 'columns');\n  }\n  function assignColumnAccessor(column) {\n    // First check for string accessor\n    var id = column.id,\n        accessor = column.accessor,\n        Header = column.Header;\n\n    if (typeof accessor === 'string') {\n      id = id || accessor;\n      var accessorPath = accessor.split('.');\n\n      accessor = function accessor(row) {\n        return getBy(row, accessorPath);\n      };\n    }\n\n    if (!id && typeof Header === 'string' && Header) {\n      id = Header;\n    }\n\n    if (!id && column.columns) {\n      console.error(column);\n      throw new Error('A column ID (or unique \"Header\" value) is required!');\n    }\n\n    if (!id) {\n      console.error(column);\n      throw new Error('A column ID (or string accessor) is required!');\n    }\n\n    Object.assign(column, {\n      id: id,\n      accessor: accessor\n    });\n    return column;\n  }\n  function decorateColumn(column, userDefaultColumn) {\n    if (!userDefaultColumn) {\n      throw new Error();\n    }\n\n    Object.assign(column, _extends({\n      // Make sure there is a fallback header, just in case\n      Header: emptyRenderer,\n      Footer: emptyRenderer\n    }, defaultColumn, {}, userDefaultColumn, {}, column));\n    Object.assign(column, {\n      originalWidth: column.width\n    });\n    return column;\n  } // Build the header groups from the bottom up\n\n  function makeHeaderGroups(allColumns, defaultColumn, additionalHeaderProperties) {\n    if (additionalHeaderProperties === void 0) {\n      additionalHeaderProperties = function additionalHeaderProperties() {\n        return {};\n      };\n    }\n\n    var headerGroups = [];\n    var scanColumns = allColumns;\n    var uid = 0;\n\n    var getUID = function getUID() {\n      return uid++;\n    };\n\n    var _loop = function _loop() {\n      // The header group we are creating\n      var headerGroup = {\n        headers: []\n      }; // The parent columns we're going to scan next\n\n      var parentColumns = [];\n      var hasParents = scanColumns.some(function (d) {\n        return d.parent;\n      }); // Scan each column for parents\n\n      scanColumns.forEach(function (column) {\n        // What is the latest (last) parent column?\n        var latestParentColumn = [].concat(parentColumns).reverse()[0];\n        var newParent;\n\n        if (hasParents) {\n          // If the column has a parent, add it if necessary\n          if (column.parent) {\n            newParent = _extends({}, column.parent, {\n              originalId: column.parent.id,\n              id: column.parent.id + \"_\" + getUID(),\n              headers: [column]\n            }, additionalHeaderProperties(column));\n          } else {\n            // If other columns have parents, we'll need to add a place holder if necessary\n            var originalId = column.id + \"_placeholder\";\n            newParent = decorateColumn(_extends({\n              originalId: originalId,\n              id: column.id + \"_placeholder_\" + getUID(),\n              placeholderOf: column,\n              headers: [column]\n            }, additionalHeaderProperties(column)), defaultColumn);\n          } // If the resulting parent columns are the same, just add\n          // the column and increment the header span\n\n\n          if (latestParentColumn && latestParentColumn.originalId === newParent.originalId) {\n            latestParentColumn.headers.push(column);\n          } else {\n            parentColumns.push(newParent);\n          }\n        }\n\n        headerGroup.headers.push(column);\n      });\n      headerGroups.push(headerGroup); // Start scanning the parent columns\n\n      scanColumns = parentColumns;\n    };\n\n    while (scanColumns.length) {\n      _loop();\n    }\n\n    return headerGroups.reverse();\n  }\n  var pathObjCache = new Map();\n  function getBy(obj, path, def) {\n    if (!path) {\n      return obj;\n    }\n\n    var cacheKey = typeof path === 'function' ? path : JSON.stringify(path);\n\n    var pathObj = pathObjCache.get(cacheKey) || function () {\n      var pathObj = makePathArray(path);\n      pathObjCache.set(cacheKey, pathObj);\n      return pathObj;\n    }();\n\n    var val;\n\n    try {\n      val = pathObj.reduce(function (cursor, pathPart) {\n        return cursor[pathPart];\n      }, obj);\n    } catch (e) {// continue regardless of error\n    }\n\n    return typeof val !== 'undefined' ? val : def;\n  }\n  function getFirstDefined() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    for (var i = 0; i < args.length; i += 1) {\n      if (typeof args[i] !== 'undefined') {\n        return args[i];\n      }\n    }\n  }\n  function isFunction(a) {\n    if (typeof a === 'function') {\n      return a;\n    }\n  }\n  function flattenBy(arr, key) {\n    var flat = [];\n\n    var recurse = function recurse(arr) {\n      arr.forEach(function (d) {\n        if (!d[key]) {\n          flat.push(d);\n        } else {\n          recurse(d[key]);\n        }\n      });\n    };\n\n    recurse(arr);\n    return flat;\n  }\n  function expandRows(rows, _ref) {\n    var manualExpandedKey = _ref.manualExpandedKey,\n        expanded = _ref.expanded,\n        _ref$expandSubRows = _ref.expandSubRows,\n        expandSubRows = _ref$expandSubRows === void 0 ? true : _ref$expandSubRows;\n    var expandedRows = [];\n\n    var handleRow = function handleRow(row, addToExpandedRows) {\n      if (addToExpandedRows === void 0) {\n        addToExpandedRows = true;\n      }\n\n      row.isExpanded = row.original && row.original[manualExpandedKey] || expanded[row.id];\n      row.canExpand = row.subRows && !!row.subRows.length;\n\n      if (addToExpandedRows) {\n        expandedRows.push(row);\n      }\n\n      if (row.subRows && row.subRows.length && row.isExpanded) {\n        row.subRows.forEach(function (row) {\n          return handleRow(row, expandSubRows);\n        });\n      }\n    };\n\n    rows.forEach(function (row) {\n      return handleRow(row);\n    });\n    return expandedRows;\n  }\n  function getFilterMethod(filter, userFilterTypes, filterTypes) {\n    return isFunction(filter) || userFilterTypes[filter] || filterTypes[filter] || filterTypes.text;\n  }\n  function shouldAutoRemoveFilter(autoRemove, value, column) {\n    return autoRemove ? autoRemove(value, column) : typeof value === 'undefined';\n  }\n  function unpreparedAccessWarning() {\n    throw new Error('React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.');\n  }\n  var passiveSupported = null;\n  function passiveEventSupported() {\n    // memoize support to avoid adding multiple test events\n    if (typeof passiveSupported === 'boolean') return passiveSupported;\n    var supported = false;\n\n    try {\n      var options = {\n        get passive() {\n          supported = true;\n          return false;\n        }\n\n      };\n      window.addEventListener('test', null, options);\n      window.removeEventListener('test', null, options);\n    } catch (err) {\n      supported = false;\n    }\n\n    passiveSupported = supported;\n    return passiveSupported;\n  } //\n\n  var reOpenBracket = /\\[/g;\n  var reCloseBracket = /\\]/g;\n\n  function makePathArray(obj) {\n    return flattenDeep(obj) // remove all periods in parts\n    .map(function (d) {\n      return String(d).replace('.', '_');\n    }) // join parts using period\n    .join('.') // replace brackets with periods\n    .replace(reOpenBracket, '.').replace(reCloseBracket, '') // split it back out on periods\n    .split('.');\n  }\n\n  function flattenDeep(arr, newArr) {\n    if (newArr === void 0) {\n      newArr = [];\n    }\n\n    if (!Array.isArray(arr)) {\n      newArr.push(arr);\n    } else {\n      for (var i = 0; i < arr.length; i += 1) {\n        flattenDeep(arr[i], newArr);\n      }\n    }\n\n    return newArr;\n  }\n\n  var defaultGetTableProps = function defaultGetTableProps(props) {\n    return _extends({\n      role: 'table'\n    }, props);\n  };\n\n  var defaultGetTableBodyProps = function defaultGetTableBodyProps(props) {\n    return _extends({\n      role: 'rowgroup'\n    }, props);\n  };\n\n  var defaultGetHeaderProps = function defaultGetHeaderProps(props, _ref) {\n    var column = _ref.column;\n    return _extends({\n      key: \"header_\" + column.id,\n      colSpan: column.totalVisibleHeaderCount,\n      role: 'columnheader'\n    }, props);\n  };\n\n  var defaultGetFooterProps = function defaultGetFooterProps(props, _ref2) {\n    var column = _ref2.column;\n    return _extends({\n      key: \"footer_\" + column.id,\n      colSpan: column.totalVisibleHeaderCount\n    }, props);\n  };\n\n  var defaultGetHeaderGroupProps = function defaultGetHeaderGroupProps(props, _ref3) {\n    var index = _ref3.index;\n    return _extends({\n      key: \"headerGroup_\" + index,\n      role: 'row'\n    }, props);\n  };\n\n  var defaultGetFooterGroupProps = function defaultGetFooterGroupProps(props, _ref4) {\n    var index = _ref4.index;\n    return _extends({\n      key: \"footerGroup_\" + index\n    }, props);\n  };\n\n  var defaultGetRowProps = function defaultGetRowProps(props, _ref5) {\n    var row = _ref5.row;\n    return _extends({\n      key: \"row_\" + row.id,\n      role: 'row'\n    }, props);\n  };\n\n  var defaultGetCellProps = function defaultGetCellProps(props, _ref6) {\n    var cell = _ref6.cell;\n    return _extends({\n      key: \"cell_\" + cell.row.id + \"_\" + cell.column.id,\n      role: 'cell'\n    }, props);\n  };\n\n  function makeDefaultPluginHooks() {\n    return {\n      useOptions: [],\n      stateReducers: [],\n      useControlledState: [],\n      columns: [],\n      columnsDeps: [],\n      allColumns: [],\n      allColumnsDeps: [],\n      accessValue: [],\n      materializedColumns: [],\n      materializedColumnsDeps: [],\n      useInstanceAfterData: [],\n      visibleColumns: [],\n      visibleColumnsDeps: [],\n      headerGroups: [],\n      headerGroupsDeps: [],\n      useInstanceBeforeDimensions: [],\n      useInstance: [],\n      prepareRow: [],\n      getTableProps: [defaultGetTableProps],\n      getTableBodyProps: [defaultGetTableBodyProps],\n      getHeaderGroupProps: [defaultGetHeaderGroupProps],\n      getFooterGroupProps: [defaultGetFooterGroupProps],\n      getHeaderProps: [defaultGetHeaderProps],\n      getFooterProps: [defaultGetFooterProps],\n      getRowProps: [defaultGetRowProps],\n      getCellProps: [defaultGetCellProps],\n      useFinalInstance: []\n    };\n  }\n\n  actions.resetHiddenColumns = 'resetHiddenColumns';\n  actions.toggleHideColumn = 'toggleHideColumn';\n  actions.setHiddenColumns = 'setHiddenColumns';\n  actions.toggleHideAllColumns = 'toggleHideAllColumns';\n  var useColumnVisibility = function useColumnVisibility(hooks) {\n    hooks.getToggleHiddenProps = [defaultGetToggleHiddenProps];\n    hooks.getToggleHideAllColumnsProps = [defaultGetToggleHideAllColumnsProps];\n    hooks.stateReducers.push(reducer);\n    hooks.useInstanceBeforeDimensions.push(useInstanceBeforeDimensions);\n    hooks.headerGroupsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.hiddenColumns]);\n    });\n    hooks.useInstance.push(useInstance);\n  };\n  useColumnVisibility.pluginName = 'useColumnVisibility';\n\n  var defaultGetToggleHiddenProps = function defaultGetToggleHiddenProps(props, _ref2) {\n    var column = _ref2.column;\n    return [props, {\n      onChange: function onChange(e) {\n        column.toggleHidden(!e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: column.isVisible,\n      title: 'Toggle Column Visible'\n    }];\n  };\n\n  var defaultGetToggleHideAllColumnsProps = function defaultGetToggleHideAllColumnsProps(props, _ref3) {\n    var instance = _ref3.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleHideAllColumns(!e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: !instance.allColumnsHidden && !instance.state.hiddenColumns.length,\n      title: 'Toggle All Columns Hidden',\n      indeterminate: !instance.allColumnsHidden && instance.state.hiddenColumns.length\n    }];\n  };\n\n  function reducer(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        hiddenColumns: []\n      }, state);\n    }\n\n    if (action.type === actions.resetHiddenColumns) {\n      return _extends({}, state, {\n        hiddenColumns: instance.initialState.hiddenColumns || []\n      });\n    }\n\n    if (action.type === actions.toggleHideColumn) {\n      var should = typeof action.value !== 'undefined' ? action.value : !state.hiddenColumns.includes(action.columnId);\n      var hiddenColumns = should ? [].concat(state.hiddenColumns, [action.columnId]) : state.hiddenColumns.filter(function (d) {\n        return d !== action.columnId;\n      });\n      return _extends({}, state, {\n        hiddenColumns: hiddenColumns\n      });\n    }\n\n    if (action.type === actions.setHiddenColumns) {\n      return _extends({}, state, {\n        hiddenColumns: functionalUpdate(action.value, state.hiddenColumns)\n      });\n    }\n\n    if (action.type === actions.toggleHideAllColumns) {\n      var shouldAll = typeof action.value !== 'undefined' ? action.value : !state.hiddenColumns.length;\n      return _extends({}, state, {\n        hiddenColumns: shouldAll ? instance.allColumns.map(function (d) {\n          return d.id;\n        }) : []\n      });\n    }\n  }\n\n  function useInstanceBeforeDimensions(instance) {\n    var headers = instance.headers,\n        hiddenColumns = instance.state.hiddenColumns;\n    var isMountedRef = React.useRef(false);\n\n    if (!isMountedRef.current) ;\n\n    var handleColumn = function handleColumn(column, parentVisible) {\n      column.isVisible = parentVisible && !hiddenColumns.includes(column.id);\n      var totalVisibleHeaderCount = 0;\n\n      if (column.headers && column.headers.length) {\n        column.headers.forEach(function (subColumn) {\n          return totalVisibleHeaderCount += handleColumn(subColumn, column.isVisible);\n        });\n      } else {\n        totalVisibleHeaderCount = column.isVisible ? 1 : 0;\n      }\n\n      column.totalVisibleHeaderCount = totalVisibleHeaderCount;\n      return totalVisibleHeaderCount;\n    };\n\n    var totalVisibleHeaderCount = 0;\n    headers.forEach(function (subHeader) {\n      return totalVisibleHeaderCount += handleColumn(subHeader, true);\n    });\n  }\n\n  function useInstance(instance) {\n    var columns = instance.columns,\n        flatHeaders = instance.flatHeaders,\n        dispatch = instance.dispatch,\n        allColumns = instance.allColumns,\n        getHooks = instance.getHooks,\n        hiddenColumns = instance.state.hiddenColumns,\n        _instance$autoResetHi = instance.autoResetHiddenColumns,\n        autoResetHiddenColumns = _instance$autoResetHi === void 0 ? true : _instance$autoResetHi;\n    var getInstance = useGetLatest(instance);\n    var allColumnsHidden = allColumns.length === hiddenColumns.length;\n    var toggleHideColumn = React.useCallback(function (columnId, value) {\n      return dispatch({\n        type: actions.toggleHideColumn,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var setHiddenColumns = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.setHiddenColumns,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleHideAllColumns = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleHideAllColumns,\n        value: value\n      });\n    }, [dispatch]);\n    var getToggleHideAllColumnsProps = makePropGetter(getHooks().getToggleHideAllColumnsProps, {\n      instance: getInstance()\n    });\n    flatHeaders.forEach(function (column) {\n      column.toggleHidden = function (value) {\n        dispatch({\n          type: actions.toggleHideColumn,\n          columnId: column.id,\n          value: value\n        });\n      };\n\n      column.getToggleHiddenProps = makePropGetter(getHooks().getToggleHiddenProps, {\n        instance: getInstance(),\n        column: column\n      });\n    });\n    var getAutoResetHiddenColumns = useGetLatest(autoResetHiddenColumns);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetHiddenColumns()) {\n        dispatch({\n          type: actions.resetHiddenColumns\n        });\n      }\n    }, [dispatch, columns]);\n    Object.assign(instance, {\n      allColumnsHidden: allColumnsHidden,\n      toggleHideColumn: toggleHideColumn,\n      setHiddenColumns: setHiddenColumns,\n      toggleHideAllColumns: toggleHideAllColumns,\n      getToggleHideAllColumnsProps: getToggleHideAllColumnsProps\n    });\n  }\n\n  var defaultInitialState = {};\n  var defaultColumnInstance = {};\n\n  var defaultReducer = function defaultReducer(state, action, prevState) {\n    return state;\n  };\n\n  var defaultGetSubRows = function defaultGetSubRows(row, index) {\n    return row.subRows || [];\n  };\n\n  var defaultGetRowId = function defaultGetRowId(row, index, parent) {\n    return \"\" + (parent ? [parent.id, index].join('.') : index);\n  };\n\n  var defaultUseControlledState = function defaultUseControlledState(d) {\n    return d;\n  };\n\n  function applyDefaults(props) {\n    var _props$initialState = props.initialState,\n        initialState = _props$initialState === void 0 ? defaultInitialState : _props$initialState,\n        _props$defaultColumn = props.defaultColumn,\n        defaultColumn = _props$defaultColumn === void 0 ? defaultColumnInstance : _props$defaultColumn,\n        _props$getSubRows = props.getSubRows,\n        getSubRows = _props$getSubRows === void 0 ? defaultGetSubRows : _props$getSubRows,\n        _props$getRowId = props.getRowId,\n        getRowId = _props$getRowId === void 0 ? defaultGetRowId : _props$getRowId,\n        _props$stateReducer = props.stateReducer,\n        stateReducer = _props$stateReducer === void 0 ? defaultReducer : _props$stateReducer,\n        _props$useControlledS = props.useControlledState,\n        useControlledState = _props$useControlledS === void 0 ? defaultUseControlledState : _props$useControlledS,\n        rest = _objectWithoutPropertiesLoose(props, [\"initialState\", \"defaultColumn\", \"getSubRows\", \"getRowId\", \"stateReducer\", \"useControlledState\"]);\n\n    return _extends({}, rest, {\n      initialState: initialState,\n      defaultColumn: defaultColumn,\n      getSubRows: getSubRows,\n      getRowId: getRowId,\n      stateReducer: stateReducer,\n      useControlledState: useControlledState\n    });\n  }\n\n  var useTable = function useTable(props) {\n    for (var _len = arguments.length, plugins = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      plugins[_key - 1] = arguments[_key];\n    }\n\n    // Apply default props\n    props = applyDefaults(props); // Add core plugins\n\n    plugins = [useColumnVisibility].concat(plugins); // Create the table instance\n\n    var instanceRef = React.useRef({}); // Create a getter for the instance (helps avoid a lot of potential memory leaks)\n\n    var getInstance = useGetLatest(instanceRef.current); // Assign the props, plugins and hooks to the instance\n\n    Object.assign(getInstance(), _extends({}, props, {\n      plugins: plugins,\n      hooks: makeDefaultPluginHooks()\n    })); // Allow plugins to register hooks as early as possible\n\n    plugins.filter(Boolean).forEach(function (plugin) {\n      plugin(getInstance().hooks);\n    }); // Consume all hooks and make a getter for them\n\n    var getHooks = useGetLatest(getInstance().hooks);\n    getInstance().getHooks = getHooks;\n    delete getInstance().hooks; // Allow useOptions hooks to modify the options coming into the table\n\n    Object.assign(getInstance(), reduceHooks(getHooks().useOptions, applyDefaults(props)));\n\n    var _getInstance = getInstance(),\n        data = _getInstance.data,\n        userColumns = _getInstance.columns,\n        initialState = _getInstance.initialState,\n        defaultColumn = _getInstance.defaultColumn,\n        getSubRows = _getInstance.getSubRows,\n        getRowId = _getInstance.getRowId,\n        stateReducer = _getInstance.stateReducer,\n        useControlledState = _getInstance.useControlledState; // Setup user reducer ref\n\n\n    var getStateReducer = useGetLatest(stateReducer); // Build the reducer\n\n    var reducer = React.useCallback(function (state, action) {\n      // Detect invalid actions\n      if (!action.type) {\n        console.info({\n          action: action\n        });\n        throw new Error('Unknown Action 👆');\n      } // Reduce the state from all plugin reducers\n\n\n      return [].concat(getHooks().stateReducers, Array.isArray(getStateReducer()) ? getStateReducer() : [getStateReducer()]).reduce(function (s, handler) {\n        return handler(s, action, state, getInstance()) || s;\n      }, state);\n    }, [getHooks, getStateReducer, getInstance]); // Start the reducer\n\n    var _React$useReducer = React.useReducer(reducer, undefined, function () {\n      return reducer(initialState, {\n        type: actions.init\n      });\n    }),\n        reducerState = _React$useReducer[0],\n        dispatch = _React$useReducer[1]; // Allow the user to control the final state with hooks\n\n\n    var state = reduceHooks([].concat(getHooks().useControlledState, [useControlledState]), reducerState, {\n      instance: getInstance()\n    });\n    Object.assign(getInstance(), {\n      state: state,\n      dispatch: dispatch\n    }); // Decorate All the columns\n\n    var columns = React.useMemo(function () {\n      return linkColumnStructure(reduceHooks(getHooks().columns, userColumns, {\n        instance: getInstance()\n      }));\n    }, [getHooks, getInstance, userColumns].concat(reduceHooks(getHooks().columnsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().columns = columns; // Get the flat list of all columns and allow hooks to decorate\n    // those columns (and trigger this memoization via deps)\n\n    var allColumns = React.useMemo(function () {\n      return reduceHooks(getHooks().allColumns, flattenColumns(columns), {\n        instance: getInstance()\n      }).map(assignColumnAccessor);\n    }, [columns, getHooks, getInstance].concat(reduceHooks(getHooks().allColumnsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().allColumns = allColumns; // Access the row model using initial columns\n\n    var _React$useMemo = React.useMemo(function () {\n      var rows = [];\n      var flatRows = [];\n      var rowsById = {};\n      var allColumnsQueue = [].concat(allColumns);\n\n      while (allColumnsQueue.length) {\n        var column = allColumnsQueue.shift();\n        accessRowsForColumn({\n          data: data,\n          rows: rows,\n          flatRows: flatRows,\n          rowsById: rowsById,\n          column: column,\n          getRowId: getRowId,\n          getSubRows: getSubRows,\n          accessValueHooks: getHooks().accessValue,\n          getInstance: getInstance\n        });\n      }\n\n      return [rows, flatRows, rowsById];\n    }, [allColumns, data, getRowId, getSubRows, getHooks, getInstance]),\n        rows = _React$useMemo[0],\n        flatRows = _React$useMemo[1],\n        rowsById = _React$useMemo[2];\n\n    Object.assign(getInstance(), {\n      rows: rows,\n      initialRows: [].concat(rows),\n      flatRows: flatRows,\n      rowsById: rowsById // materializedColumns,\n\n    });\n    loopHooks(getHooks().useInstanceAfterData, getInstance()); // Get the flat list of all columns AFTER the rows\n    // have been access, and allow hooks to decorate\n    // those columns (and trigger this memoization via deps)\n\n    var visibleColumns = React.useMemo(function () {\n      return reduceHooks(getHooks().visibleColumns, allColumns, {\n        instance: getInstance()\n      }).map(function (d) {\n        return decorateColumn(d, defaultColumn);\n      });\n    }, [getHooks, allColumns, getInstance, defaultColumn].concat(reduceHooks(getHooks().visibleColumnsDeps, [], {\n      instance: getInstance()\n    }))); // Combine new visible columns with all columns\n\n    allColumns = React.useMemo(function () {\n      var columns = [].concat(visibleColumns);\n      allColumns.forEach(function (column) {\n        if (!columns.find(function (d) {\n          return d.id === column.id;\n        })) {\n          columns.push(column);\n        }\n      });\n      return columns;\n    }, [allColumns, visibleColumns]);\n    getInstance().allColumns = allColumns;\n\n    {\n      var duplicateColumns = allColumns.filter(function (column, i) {\n        return allColumns.findIndex(function (d) {\n          return d.id === column.id;\n        }) !== i;\n      });\n\n      if (duplicateColumns.length) {\n        console.info(allColumns);\n        throw new Error(\"Duplicate columns were found with ids: \\\"\" + duplicateColumns.map(function (d) {\n          return d.id;\n        }).join(', ') + \"\\\" in the columns array above\");\n      }\n    } // Make the headerGroups\n\n\n    var headerGroups = React.useMemo(function () {\n      return reduceHooks(getHooks().headerGroups, makeHeaderGroups(visibleColumns, defaultColumn), getInstance());\n    }, [getHooks, visibleColumns, defaultColumn, getInstance].concat(reduceHooks(getHooks().headerGroupsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().headerGroups = headerGroups; // Get the first level of headers\n\n    var headers = React.useMemo(function () {\n      return headerGroups.length ? headerGroups[0].headers : [];\n    }, [headerGroups]);\n    getInstance().headers = headers; // Provide a flat header list for utilities\n\n    getInstance().flatHeaders = headerGroups.reduce(function (all, headerGroup) {\n      return [].concat(all, headerGroup.headers);\n    }, []);\n    loopHooks(getHooks().useInstanceBeforeDimensions, getInstance()); // Filter columns down to visible ones\n\n    var visibleColumnsDep = visibleColumns.filter(function (d) {\n      return d.isVisible;\n    }).map(function (d) {\n      return d.id;\n    }).sort().join('_');\n    visibleColumns = React.useMemo(function () {\n      return visibleColumns.filter(function (d) {\n        return d.isVisible;\n      });\n    }, // eslint-disable-next-line react-hooks/exhaustive-deps\n    [visibleColumns, visibleColumnsDep]);\n    getInstance().visibleColumns = visibleColumns; // Header Visibility is needed by this point\n\n    var _calculateHeaderWidth = calculateHeaderWidths(headers),\n        totalColumnsMinWidth = _calculateHeaderWidth[0],\n        totalColumnsWidth = _calculateHeaderWidth[1],\n        totalColumnsMaxWidth = _calculateHeaderWidth[2];\n\n    getInstance().totalColumnsMinWidth = totalColumnsMinWidth;\n    getInstance().totalColumnsWidth = totalColumnsWidth;\n    getInstance().totalColumnsMaxWidth = totalColumnsMaxWidth;\n    loopHooks(getHooks().useInstance, getInstance()) // Each materialized header needs to be assigned a render function and other\n    // prop getter properties here.\n    ;\n    [].concat(getInstance().flatHeaders, getInstance().allColumns).forEach(function (column) {\n      // Give columns/headers rendering power\n      column.render = makeRenderer(getInstance(), column); // Give columns/headers a default getHeaderProps\n\n      column.getHeaderProps = makePropGetter(getHooks().getHeaderProps, {\n        instance: getInstance(),\n        column: column\n      }); // Give columns/headers a default getFooterProps\n\n      column.getFooterProps = makePropGetter(getHooks().getFooterProps, {\n        instance: getInstance(),\n        column: column\n      });\n    });\n    getInstance().headerGroups = React.useMemo(function () {\n      return headerGroups.filter(function (headerGroup, i) {\n        // Filter out any headers and headerGroups that don't have visible columns\n        headerGroup.headers = headerGroup.headers.filter(function (column) {\n          var recurse = function recurse(headers) {\n            return headers.filter(function (column) {\n              if (column.headers) {\n                return recurse(column.headers);\n              }\n\n              return column.isVisible;\n            }).length;\n          };\n\n          if (column.headers) {\n            return recurse(column.headers);\n          }\n\n          return column.isVisible;\n        }); // Give headerGroups getRowProps\n\n        if (headerGroup.headers.length) {\n          headerGroup.getHeaderGroupProps = makePropGetter(getHooks().getHeaderGroupProps, {\n            instance: getInstance(),\n            headerGroup: headerGroup,\n            index: i\n          });\n          headerGroup.getFooterGroupProps = makePropGetter(getHooks().getFooterGroupProps, {\n            instance: getInstance(),\n            headerGroup: headerGroup,\n            index: i\n          });\n          return true;\n        }\n\n        return false;\n      });\n    }, [headerGroups, getInstance, getHooks]);\n    getInstance().footerGroups = [].concat(getInstance().headerGroups).reverse(); // The prepareRow function is absolutely necessary and MUST be called on\n    // any rows the user wishes to be displayed.\n\n    getInstance().prepareRow = React.useCallback(function (row) {\n      row.getRowProps = makePropGetter(getHooks().getRowProps, {\n        instance: getInstance(),\n        row: row\n      }); // Build the visible cells for each row\n\n      row.allCells = allColumns.map(function (column) {\n        var value = row.values[column.id];\n        var cell = {\n          column: column,\n          row: row,\n          value: value\n        }; // Give each cell a getCellProps base\n\n        cell.getCellProps = makePropGetter(getHooks().getCellProps, {\n          instance: getInstance(),\n          cell: cell\n        }); // Give each cell a renderer function (supports multiple renderers)\n\n        cell.render = makeRenderer(getInstance(), column, {\n          row: row,\n          cell: cell,\n          value: value\n        });\n        return cell;\n      });\n      row.cells = visibleColumns.map(function (column) {\n        return row.allCells.find(function (cell) {\n          return cell.column.id === column.id;\n        });\n      }); // need to apply any row specific hooks (useExpanded requires this)\n\n      loopHooks(getHooks().prepareRow, row, {\n        instance: getInstance()\n      });\n    }, [getHooks, getInstance, allColumns, visibleColumns]);\n    getInstance().getTableProps = makePropGetter(getHooks().getTableProps, {\n      instance: getInstance()\n    });\n    getInstance().getTableBodyProps = makePropGetter(getHooks().getTableBodyProps, {\n      instance: getInstance()\n    });\n    loopHooks(getHooks().useFinalInstance, getInstance());\n    return getInstance();\n  };\n\n  function calculateHeaderWidths(headers, left) {\n    if (left === void 0) {\n      left = 0;\n    }\n\n    var sumTotalMinWidth = 0;\n    var sumTotalWidth = 0;\n    var sumTotalMaxWidth = 0;\n    var sumTotalFlexWidth = 0;\n    headers.forEach(function (header) {\n      var subHeaders = header.headers;\n      header.totalLeft = left;\n\n      if (subHeaders && subHeaders.length) {\n        var _calculateHeaderWidth2 = calculateHeaderWidths(subHeaders, left),\n            totalMinWidth = _calculateHeaderWidth2[0],\n            totalWidth = _calculateHeaderWidth2[1],\n            totalMaxWidth = _calculateHeaderWidth2[2],\n            totalFlexWidth = _calculateHeaderWidth2[3];\n\n        header.totalMinWidth = totalMinWidth;\n        header.totalWidth = totalWidth;\n        header.totalMaxWidth = totalMaxWidth;\n        header.totalFlexWidth = totalFlexWidth;\n      } else {\n        header.totalMinWidth = header.minWidth;\n        header.totalWidth = Math.min(Math.max(header.minWidth, header.width), header.maxWidth);\n        header.totalMaxWidth = header.maxWidth;\n        header.totalFlexWidth = header.canResize ? header.totalWidth : 0;\n      }\n\n      if (header.isVisible) {\n        left += header.totalWidth;\n        sumTotalMinWidth += header.totalMinWidth;\n        sumTotalWidth += header.totalWidth;\n        sumTotalMaxWidth += header.totalMaxWidth;\n        sumTotalFlexWidth += header.totalFlexWidth;\n      }\n    });\n    return [sumTotalMinWidth, sumTotalWidth, sumTotalMaxWidth, sumTotalFlexWidth];\n  }\n\n  function accessRowsForColumn(_ref) {\n    var data = _ref.data,\n        rows = _ref.rows,\n        flatRows = _ref.flatRows,\n        rowsById = _ref.rowsById,\n        column = _ref.column,\n        getRowId = _ref.getRowId,\n        getSubRows = _ref.getSubRows,\n        accessValueHooks = _ref.accessValueHooks,\n        getInstance = _ref.getInstance;\n\n    // Access the row's data column-by-column\n    // We do it this way so we can incrementally add materialized\n    // columns after the first pass and avoid excessive looping\n    var accessRow = function accessRow(originalRow, rowIndex, depth, parent, parentRows) {\n      if (depth === void 0) {\n        depth = 0;\n      }\n\n      // Keep the original reference around\n      var original = originalRow;\n      var id = getRowId(originalRow, rowIndex, parent);\n      var row = rowsById[id]; // If the row hasn't been created, let's make it\n\n      if (!row) {\n        row = {\n          id: id,\n          original: original,\n          index: rowIndex,\n          depth: depth,\n          cells: [{}] // This is a dummy cell\n\n        }; // Override common array functions (and the dummy cell's getCellProps function)\n        // to show an error if it is accessed without calling prepareRow\n\n        row.cells.map = unpreparedAccessWarning;\n        row.cells.filter = unpreparedAccessWarning;\n        row.cells.forEach = unpreparedAccessWarning;\n        row.cells[0].getCellProps = unpreparedAccessWarning; // Create the cells and values\n\n        row.values = {}; // Push this row into the parentRows array\n\n        parentRows.push(row); // Keep track of every row in a flat array\n\n        flatRows.push(row); // Also keep track of every row by its ID\n\n        rowsById[id] = row; // Get the original subrows\n\n        row.originalSubRows = getSubRows(originalRow, rowIndex); // Then recursively access them\n\n        if (row.originalSubRows) {\n          var subRows = [];\n          row.originalSubRows.forEach(function (d, i) {\n            return accessRow(d, i, depth + 1, row, subRows);\n          }); // Keep the new subRows array on the row\n\n          row.subRows = subRows;\n        }\n      } else if (row.subRows) {\n        // If the row exists, then it's already been accessed\n        // Keep recursing, but don't worry about passing the\n        // accumlator array (those rows already exist)\n        row.originalSubRows.forEach(function (d, i) {\n          return accessRow(d, i, depth + 1, row);\n        });\n      } // If the column has an accessor, use it to get a value\n\n\n      if (column.accessor) {\n        row.values[column.id] = column.accessor(originalRow, rowIndex, row, parentRows, data);\n      } // Allow plugins to manipulate the column value\n\n\n      row.values[column.id] = reduceHooks(accessValueHooks, row.values[column.id], {\n        row: row,\n        column: column,\n        instance: getInstance()\n      }, true);\n    };\n\n    data.forEach(function (originalRow, rowIndex) {\n      return accessRow(originalRow, rowIndex, 0, undefined, rows);\n    });\n  }\n\n  actions.resetExpanded = 'resetExpanded';\n  actions.toggleRowExpanded = 'toggleRowExpanded';\n  actions.toggleAllRowsExpanded = 'toggleAllRowsExpanded';\n  var useExpanded = function useExpanded(hooks) {\n    hooks.getToggleAllRowsExpandedProps = [defaultGetToggleAllRowsExpandedProps];\n    hooks.getToggleRowExpandedProps = [defaultGetToggleRowExpandedProps];\n    hooks.stateReducers.push(reducer$1);\n    hooks.useInstance.push(useInstance$1);\n    hooks.prepareRow.push(prepareRow);\n  };\n  useExpanded.pluginName = 'useExpanded';\n\n  var defaultGetToggleAllRowsExpandedProps = function defaultGetToggleAllRowsExpandedProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      onClick: function onClick(e) {\n        instance.toggleAllRowsExpanded();\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      title: 'Toggle All Rows Expanded'\n    }];\n  };\n\n  var defaultGetToggleRowExpandedProps = function defaultGetToggleRowExpandedProps(props, _ref2) {\n    var row = _ref2.row;\n    return [props, {\n      onClick: function onClick() {\n        row.toggleRowExpanded();\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      title: 'Toggle Row Expanded'\n    }];\n  }; // Reducer\n\n\n  function reducer$1(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        expanded: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetExpanded) {\n      return _extends({}, state, {\n        expanded: instance.initialState.expanded || {}\n      });\n    }\n\n    if (action.type === actions.toggleAllRowsExpanded) {\n      var value = action.value;\n      var isAllRowsExpanded = instance.isAllRowsExpanded,\n          rowsById = instance.rowsById;\n      var expandAll = typeof value !== 'undefined' ? value : !isAllRowsExpanded;\n\n      if (expandAll) {\n        var expanded = {};\n        Object.keys(rowsById).forEach(function (rowId) {\n          expanded[rowId] = true;\n        });\n        return _extends({}, state, {\n          expanded: expanded\n        });\n      }\n\n      return _extends({}, state, {\n        expanded: {}\n      });\n    }\n\n    if (action.type === actions.toggleRowExpanded) {\n      var id = action.id,\n          setExpanded = action.value;\n      var exists = state.expanded[id];\n      var shouldExist = typeof setExpanded !== 'undefined' ? setExpanded : !exists;\n\n      if (!exists && shouldExist) {\n        var _extends2;\n\n        return _extends({}, state, {\n          expanded: _extends({}, state.expanded, (_extends2 = {}, _extends2[id] = true, _extends2))\n        });\n      } else if (exists && !shouldExist) {\n        var _state$expanded = state.expanded,\n            _ = _state$expanded[id],\n            rest = _objectWithoutPropertiesLoose(_state$expanded, [id].map(_toPropertyKey));\n\n        return _extends({}, state, {\n          expanded: rest\n        });\n      } else {\n        return state;\n      }\n    }\n  }\n\n  function useInstance$1(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        rowsById = instance.rowsById,\n        _instance$manualExpan = instance.manualExpandedKey,\n        manualExpandedKey = _instance$manualExpan === void 0 ? 'expanded' : _instance$manualExpan,\n        _instance$paginateExp = instance.paginateExpandedRows,\n        paginateExpandedRows = _instance$paginateExp === void 0 ? true : _instance$paginateExp,\n        _instance$expandSubRo = instance.expandSubRows,\n        expandSubRows = _instance$expandSubRo === void 0 ? true : _instance$expandSubRo,\n        _instance$autoResetEx = instance.autoResetExpanded,\n        autoResetExpanded = _instance$autoResetEx === void 0 ? true : _instance$autoResetEx,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        expanded = instance.state.expanded,\n        dispatch = instance.dispatch;\n    ensurePluginOrder(plugins, ['useSortBy', 'useGroupBy', 'usePivotColumns', 'useGlobalFilter'], 'useExpanded');\n    var getAutoResetExpanded = useGetLatest(autoResetExpanded);\n    var isAllRowsExpanded = Boolean(Object.keys(rowsById).length && Object.keys(expanded).length);\n\n    if (isAllRowsExpanded) {\n      if (Object.keys(rowsById).some(function (id) {\n        return !expanded[id];\n      })) {\n        isAllRowsExpanded = false;\n      }\n    } // Bypass any effects from firing when this changes\n\n\n    useMountedLayoutEffect(function () {\n      if (getAutoResetExpanded()) {\n        dispatch({\n          type: actions.resetExpanded\n        });\n      }\n    }, [dispatch, data]);\n    var toggleRowExpanded = React.useCallback(function (id, value) {\n      dispatch({\n        type: actions.toggleRowExpanded,\n        id: id,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleAllRowsExpanded = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllRowsExpanded,\n        value: value\n      });\n    }, [dispatch]);\n    var expandedRows = React.useMemo(function () {\n      if (paginateExpandedRows) {\n        return expandRows(rows, {\n          manualExpandedKey: manualExpandedKey,\n          expanded: expanded,\n          expandSubRows: expandSubRows\n        });\n      }\n\n      return rows;\n    }, [paginateExpandedRows, rows, manualExpandedKey, expanded, expandSubRows]);\n    var expandedDepth = React.useMemo(function () {\n      return findExpandedDepth(expanded);\n    }, [expanded]);\n    var getInstance = useGetLatest(instance);\n    var getToggleAllRowsExpandedProps = makePropGetter(getHooks().getToggleAllRowsExpandedProps, {\n      instance: getInstance()\n    });\n    Object.assign(instance, {\n      preExpandedRows: rows,\n      expandedRows: expandedRows,\n      rows: expandedRows,\n      expandedDepth: expandedDepth,\n      isAllRowsExpanded: isAllRowsExpanded,\n      toggleRowExpanded: toggleRowExpanded,\n      toggleAllRowsExpanded: toggleAllRowsExpanded,\n      getToggleAllRowsExpandedProps: getToggleAllRowsExpandedProps\n    });\n  }\n\n  function prepareRow(row, _ref3) {\n    var getHooks = _ref3.instance.getHooks,\n        instance = _ref3.instance;\n\n    row.toggleRowExpanded = function (set) {\n      return instance.toggleRowExpanded(row.id, set);\n    };\n\n    row.getToggleRowExpandedProps = makePropGetter(getHooks().getToggleRowExpandedProps, {\n      instance: instance,\n      row: row\n    });\n  }\n\n  function findExpandedDepth(expanded) {\n    var maxDepth = 0;\n    Object.keys(expanded).forEach(function (id) {\n      var splitId = id.split('.');\n      maxDepth = Math.max(maxDepth, splitId.length);\n    });\n    return maxDepth;\n  }\n\n  var text = function text(rows, ids, filterValue) {\n    rows = rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return String(rowValue).toLowerCase().includes(String(filterValue).toLowerCase());\n      });\n    });\n    return rows;\n  };\n\n  text.autoRemove = function (val) {\n    return !val;\n  };\n\n  var exactText = function exactText(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue !== undefined ? String(rowValue).toLowerCase() === String(filterValue).toLowerCase() : true;\n      });\n    });\n  };\n\n  exactText.autoRemove = function (val) {\n    return !val;\n  };\n\n  var exactTextCase = function exactTextCase(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue !== undefined ? String(rowValue) === String(filterValue) : true;\n      });\n    });\n  };\n\n  exactTextCase.autoRemove = function (val) {\n    return !val;\n  };\n\n  var includes = function includes(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue.includes(filterValue);\n      });\n    });\n  };\n\n  includes.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesAll = function includesAll(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue && rowValue.length && filterValue.every(function (val) {\n          return rowValue.includes(val);\n        });\n      });\n    });\n  };\n\n  includesAll.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesSome = function includesSome(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue && rowValue.length && filterValue.some(function (val) {\n          return rowValue.includes(val);\n        });\n      });\n    });\n  };\n\n  includesSome.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesValue = function includesValue(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return filterValue.includes(rowValue);\n      });\n    });\n  };\n\n  includesValue.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var exact = function exact(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue === filterValue;\n      });\n    });\n  };\n\n  exact.autoRemove = function (val) {\n    return typeof val === 'undefined';\n  };\n\n  var equals = function equals(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id]; // eslint-disable-next-line eqeqeq\n\n        return rowValue == filterValue;\n      });\n    });\n  };\n\n  equals.autoRemove = function (val) {\n    return val == null;\n  };\n\n  var between = function between(rows, ids, filterValue) {\n    var _ref = filterValue || [],\n        min = _ref[0],\n        max = _ref[1];\n\n    min = typeof min === 'number' ? min : -Infinity;\n    max = typeof max === 'number' ? max : Infinity;\n\n    if (min > max) {\n      var temp = min;\n      min = max;\n      max = temp;\n    }\n\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue >= min && rowValue <= max;\n      });\n    });\n  };\n\n  between.autoRemove = function (val) {\n    return !val || typeof val[0] !== 'number' && typeof val[1] !== 'number';\n  };\n\n  var filterTypes = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    text: text,\n    exactText: exactText,\n    exactTextCase: exactTextCase,\n    includes: includes,\n    includesAll: includesAll,\n    includesSome: includesSome,\n    includesValue: includesValue,\n    exact: exact,\n    equals: equals,\n    between: between\n  });\n\n  actions.resetFilters = 'resetFilters';\n  actions.setFilter = 'setFilter';\n  actions.setAllFilters = 'setAllFilters';\n  var useFilters = function useFilters(hooks) {\n    hooks.stateReducers.push(reducer$2);\n    hooks.useInstance.push(useInstance$2);\n  };\n  useFilters.pluginName = 'useFilters';\n\n  function reducer$2(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        filters: []\n      }, state);\n    }\n\n    if (action.type === actions.resetFilters) {\n      return _extends({}, state, {\n        filters: instance.initialState.filters || []\n      });\n    }\n\n    if (action.type === actions.setFilter) {\n      var columnId = action.columnId,\n          filterValue = action.filterValue;\n      var allColumns = instance.allColumns,\n          userFilterTypes = instance.filterTypes;\n      var column = allColumns.find(function (d) {\n        return d.id === columnId;\n      });\n\n      if (!column) {\n        throw new Error(\"React-Table: Could not find a column with id: \" + columnId);\n      }\n\n      var filterMethod = getFilterMethod(column.filter, userFilterTypes || {}, filterTypes);\n      var previousfilter = state.filters.find(function (d) {\n        return d.id === columnId;\n      });\n      var newFilter = functionalUpdate(filterValue, previousfilter && previousfilter.value); //\n\n      if (shouldAutoRemoveFilter(filterMethod.autoRemove, newFilter, column)) {\n        return _extends({}, state, {\n          filters: state.filters.filter(function (d) {\n            return d.id !== columnId;\n          })\n        });\n      }\n\n      if (previousfilter) {\n        return _extends({}, state, {\n          filters: state.filters.map(function (d) {\n            if (d.id === columnId) {\n              return {\n                id: columnId,\n                value: newFilter\n              };\n            }\n\n            return d;\n          })\n        });\n      }\n\n      return _extends({}, state, {\n        filters: [].concat(state.filters, [{\n          id: columnId,\n          value: newFilter\n        }])\n      });\n    }\n\n    if (action.type === actions.setAllFilters) {\n      var filters = action.filters;\n      var _allColumns = instance.allColumns,\n          _userFilterTypes = instance.filterTypes;\n      return _extends({}, state, {\n        // Filter out undefined values\n        filters: functionalUpdate(filters, state.filters).filter(function (filter) {\n          var column = _allColumns.find(function (d) {\n            return d.id === filter.id;\n          });\n\n          var filterMethod = getFilterMethod(column.filter, _userFilterTypes || {}, filterTypes);\n\n          if (shouldAutoRemoveFilter(filterMethod.autoRemove, filter.value, column)) {\n            return false;\n          }\n\n          return true;\n        })\n      });\n    }\n  }\n\n  function useInstance$2(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        userFilterTypes = instance.filterTypes,\n        manualFilters = instance.manualFilters,\n        _instance$defaultCanF = instance.defaultCanFilter,\n        defaultCanFilter = _instance$defaultCanF === void 0 ? false : _instance$defaultCanF,\n        disableFilters = instance.disableFilters,\n        filters = instance.state.filters,\n        dispatch = instance.dispatch,\n        _instance$autoResetFi = instance.autoResetFilters,\n        autoResetFilters = _instance$autoResetFi === void 0 ? true : _instance$autoResetFi;\n    var setFilter = React.useCallback(function (columnId, filterValue) {\n      dispatch({\n        type: actions.setFilter,\n        columnId: columnId,\n        filterValue: filterValue\n      });\n    }, [dispatch]);\n    var setAllFilters = React.useCallback(function (filters) {\n      dispatch({\n        type: actions.setAllFilters,\n        filters: filters\n      });\n    }, [dispatch]);\n    allColumns.forEach(function (column) {\n      var id = column.id,\n          accessor = column.accessor,\n          columnDefaultCanFilter = column.defaultCanFilter,\n          columnDisableFilters = column.disableFilters; // Determine if a column is filterable\n\n      column.canFilter = accessor ? getFirstDefined(columnDisableFilters === true ? false : undefined, disableFilters === true ? false : undefined, true) : getFirstDefined(columnDefaultCanFilter, defaultCanFilter, false); // Provide the column a way of updating the filter value\n\n      column.setFilter = function (val) {\n        return setFilter(column.id, val);\n      }; // Provide the current filter value to the column for\n      // convenience\n\n\n      var found = filters.find(function (d) {\n        return d.id === id;\n      });\n      column.filterValue = found && found.value;\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualFilters || !filters.length) {\n        return [rows, flatRows, rowsById];\n      }\n\n      var filteredFlatRows = [];\n      var filteredRowsById = {}; // Filters top level and nested rows\n\n      var filterRows = function filterRows(rows, depth) {\n        if (depth === void 0) {\n          depth = 0;\n        }\n\n        var filteredRows = rows;\n        filteredRows = filters.reduce(function (filteredSoFar, _ref) {\n          var columnId = _ref.id,\n              filterValue = _ref.value;\n          // Find the filters column\n          var column = allColumns.find(function (d) {\n            return d.id === columnId;\n          });\n\n          if (!column) {\n            return filteredSoFar;\n          }\n\n          if (depth === 0) {\n            column.preFilteredRows = filteredSoFar;\n          }\n\n          var filterMethod = getFilterMethod(column.filter, userFilterTypes || {}, filterTypes);\n\n          if (!filterMethod) {\n            console.warn(\"Could not find a valid 'column.filter' for column with the ID: \" + column.id + \".\");\n            return filteredSoFar;\n          } // Pass the rows, id, filterValue and column to the filterMethod\n          // to get the filtered rows back\n\n\n          column.filteredRows = filterMethod(filteredSoFar, [columnId], filterValue);\n          return column.filteredRows;\n        }, rows); // Apply the filter to any subRows\n        // We technically could do this recursively in the above loop,\n        // but that would severely hinder the API for the user, since they\n        // would be required to do that recursion in some scenarios\n\n        filteredRows.forEach(function (row) {\n          filteredFlatRows.push(row);\n          filteredRowsById[row.id] = row;\n\n          if (!row.subRows) {\n            return;\n          }\n\n          row.subRows = row.subRows && row.subRows.length > 0 ? filterRows(row.subRows, depth + 1) : row.subRows;\n        });\n        return filteredRows;\n      };\n\n      return [filterRows(rows), filteredFlatRows, filteredRowsById];\n    }, [manualFilters, filters, rows, flatRows, rowsById, allColumns, userFilterTypes]),\n        filteredRows = _React$useMemo[0],\n        filteredFlatRows = _React$useMemo[1],\n        filteredRowsById = _React$useMemo[2];\n\n    React.useMemo(function () {\n      // Now that each filtered column has it's partially filtered rows,\n      // lets assign the final filtered rows to all of the other columns\n      var nonFilteredColumns = allColumns.filter(function (column) {\n        return !filters.find(function (d) {\n          return d.id === column.id;\n        });\n      }); // This essentially enables faceted filter options to be built easily\n      // using every column's preFilteredRows value\n\n      nonFilteredColumns.forEach(function (column) {\n        column.preFilteredRows = filteredRows;\n        column.filteredRows = filteredRows;\n      });\n    }, [filteredRows, filters, allColumns]);\n    var getAutoResetFilters = useGetLatest(autoResetFilters);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetFilters()) {\n        dispatch({\n          type: actions.resetFilters\n        });\n      }\n    }, [dispatch, manualFilters ? null : data]);\n    Object.assign(instance, {\n      preFilteredRows: rows,\n      preFilteredFlatRows: flatRows,\n      preFilteredRowsById: rowsById,\n      filteredRows: filteredRows,\n      filteredFlatRows: filteredFlatRows,\n      filteredRowsById: filteredRowsById,\n      rows: filteredRows,\n      flatRows: filteredFlatRows,\n      rowsById: filteredRowsById,\n      setFilter: setFilter,\n      setAllFilters: setAllFilters\n    });\n  }\n\n  actions.resetGlobalFilter = 'resetGlobalFilter';\n  actions.setGlobalFilter = 'setGlobalFilter';\n  var useGlobalFilter = function useGlobalFilter(hooks) {\n    hooks.stateReducers.push(reducer$3);\n    hooks.useInstance.push(useInstance$3);\n  };\n  useGlobalFilter.pluginName = 'useGlobalFilter';\n\n  function reducer$3(state, action, previousState, instance) {\n    if (action.type === actions.resetGlobalFilter) {\n      return _extends({}, state, {\n        globalFilter: instance.initialState.globalFilter || undefined\n      });\n    }\n\n    if (action.type === actions.setGlobalFilter) {\n      var filterValue = action.filterValue;\n      var userFilterTypes = instance.userFilterTypes;\n      var filterMethod = getFilterMethod(instance.globalFilter, userFilterTypes || {}, filterTypes);\n      var newFilter = functionalUpdate(filterValue, state.globalFilter); //\n\n      if (shouldAutoRemoveFilter(filterMethod.autoRemove, newFilter)) {\n        var globalFilter = state.globalFilter,\n            stateWithoutGlobalFilter = _objectWithoutPropertiesLoose(state, [\"globalFilter\"]);\n\n        return stateWithoutGlobalFilter;\n      }\n\n      return _extends({}, state, {\n        globalFilter: newFilter\n      });\n    }\n  }\n\n  function useInstance$3(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        userFilterTypes = instance.filterTypes,\n        globalFilter = instance.globalFilter,\n        manualGlobalFilter = instance.manualGlobalFilter,\n        globalFilterValue = instance.state.globalFilter,\n        dispatch = instance.dispatch,\n        _instance$autoResetGl = instance.autoResetGlobalFilter,\n        autoResetGlobalFilter = _instance$autoResetGl === void 0 ? true : _instance$autoResetGl,\n        disableGlobalFilter = instance.disableGlobalFilter;\n    var setGlobalFilter = React.useCallback(function (filterValue) {\n      dispatch({\n        type: actions.setGlobalFilter,\n        filterValue: filterValue\n      });\n    }, [dispatch]); // TODO: Create a filter cache for incremental high speed multi-filtering\n    // This gets pretty complicated pretty fast, since you have to maintain a\n    // cache for each row group (top-level rows, and each row's recursive subrows)\n    // This would make multi-filtering a lot faster though. Too far?\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualGlobalFilter || typeof globalFilterValue === 'undefined') {\n        return [rows, flatRows, rowsById];\n      }\n\n      var filteredFlatRows = [];\n      var filteredRowsById = {};\n      var filterMethod = getFilterMethod(globalFilter, userFilterTypes || {}, filterTypes);\n\n      if (!filterMethod) {\n        console.warn(\"Could not find a valid 'globalFilter' option.\");\n        return rows;\n      }\n\n      allColumns.forEach(function (column) {\n        var columnDisableGlobalFilter = column.disableGlobalFilter;\n        column.canFilter = getFirstDefined(columnDisableGlobalFilter === true ? false : undefined, disableGlobalFilter === true ? false : undefined, true);\n      });\n      var filterableColumns = allColumns.filter(function (c) {\n        return c.canFilter === true;\n      }); // Filters top level and nested rows\n\n      var filterRows = function filterRows(filteredRows) {\n        filteredRows = filterMethod(filteredRows, filterableColumns.map(function (d) {\n          return d.id;\n        }), globalFilterValue);\n        filteredRows.forEach(function (row) {\n          filteredFlatRows.push(row);\n          filteredRowsById[row.id] = row;\n          row.subRows = row.subRows && row.subRows.length ? filterRows(row.subRows) : row.subRows;\n        });\n        return filteredRows;\n      };\n\n      return [filterRows(rows), filteredFlatRows, filteredRowsById];\n    }, [manualGlobalFilter, globalFilterValue, globalFilter, userFilterTypes, allColumns, rows, flatRows, rowsById, disableGlobalFilter]),\n        globalFilteredRows = _React$useMemo[0],\n        globalFilteredFlatRows = _React$useMemo[1],\n        globalFilteredRowsById = _React$useMemo[2];\n\n    var getAutoResetGlobalFilter = useGetLatest(autoResetGlobalFilter);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetGlobalFilter()) {\n        dispatch({\n          type: actions.resetGlobalFilter\n        });\n      }\n    }, [dispatch, manualGlobalFilter ? null : data]);\n    Object.assign(instance, {\n      preGlobalFilteredRows: rows,\n      preGlobalFilteredFlatRows: flatRows,\n      preGlobalFilteredRowsById: rowsById,\n      globalFilteredRows: globalFilteredRows,\n      globalFilteredFlatRows: globalFilteredFlatRows,\n      globalFilteredRowsById: globalFilteredRowsById,\n      rows: globalFilteredRows,\n      flatRows: globalFilteredFlatRows,\n      rowsById: globalFilteredRowsById,\n      setGlobalFilter: setGlobalFilter,\n      disableGlobalFilter: disableGlobalFilter\n    });\n  }\n\n  function sum(values, aggregatedValues) {\n    // It's faster to just add the aggregations together instead of\n    // process leaf nodes individually\n    return aggregatedValues.reduce(function (sum, next) {\n      return sum + (typeof next === 'number' ? next : 0);\n    }, 0);\n  }\n  function min(values) {\n    var min = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        min = Math.min(min, value);\n      }\n    });\n    return min;\n  }\n  function max(values) {\n    var max = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        max = Math.max(max, value);\n      }\n    });\n    return max;\n  }\n  function minMax(values) {\n    var min = values[0] || 0;\n    var max = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        min = Math.min(min, value);\n        max = Math.max(max, value);\n      }\n    });\n    return min + \"..\" + max;\n  }\n  function average(values) {\n    return sum(null, values) / values.length;\n  }\n  function median(values) {\n    if (!values.length) {\n      return null;\n    }\n\n    var mid = Math.floor(values.length / 2);\n    var nums = [].concat(values).sort(function (a, b) {\n      return a - b;\n    });\n    return values.length % 2 !== 0 ? nums[mid] : (nums[mid - 1] + nums[mid]) / 2;\n  }\n  function unique(values) {\n    return Array.from(new Set(values).values());\n  }\n  function uniqueCount(values) {\n    return new Set(values).size;\n  }\n  function count(values) {\n    return values.length;\n  }\n\n  var aggregations = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    sum: sum,\n    min: min,\n    max: max,\n    minMax: minMax,\n    average: average,\n    median: median,\n    unique: unique,\n    uniqueCount: uniqueCount,\n    count: count\n  });\n\n  var emptyArray = [];\n  var emptyObject = {}; // Actions\n\n  actions.resetGroupBy = 'resetGroupBy';\n  actions.setGroupBy = 'setGroupBy';\n  actions.toggleGroupBy = 'toggleGroupBy';\n  var useGroupBy = function useGroupBy(hooks) {\n    hooks.getGroupByToggleProps = [defaultGetGroupByToggleProps];\n    hooks.stateReducers.push(reducer$4);\n    hooks.visibleColumnsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.groupBy]);\n    });\n    hooks.visibleColumns.push(visibleColumns);\n    hooks.useInstance.push(useInstance$4);\n    hooks.prepareRow.push(prepareRow$1);\n  };\n  useGroupBy.pluginName = 'useGroupBy';\n\n  var defaultGetGroupByToggleProps = function defaultGetGroupByToggleProps(props, _ref2) {\n    var header = _ref2.header;\n    return [props, {\n      onClick: header.canGroupBy ? function (e) {\n        e.persist();\n        header.toggleGroupBy();\n      } : undefined,\n      style: {\n        cursor: header.canGroupBy ? 'pointer' : undefined\n      },\n      title: 'Toggle GroupBy'\n    }];\n  }; // Reducer\n\n\n  function reducer$4(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        groupBy: []\n      }, state);\n    }\n\n    if (action.type === actions.resetGroupBy) {\n      return _extends({}, state, {\n        groupBy: instance.initialState.groupBy || []\n      });\n    }\n\n    if (action.type === actions.setGroupBy) {\n      var value = action.value;\n      return _extends({}, state, {\n        groupBy: value\n      });\n    }\n\n    if (action.type === actions.toggleGroupBy) {\n      var columnId = action.columnId,\n          setGroupBy = action.value;\n      var resolvedGroupBy = typeof setGroupBy !== 'undefined' ? setGroupBy : !state.groupBy.includes(columnId);\n\n      if (resolvedGroupBy) {\n        return _extends({}, state, {\n          groupBy: [].concat(state.groupBy, [columnId])\n        });\n      }\n\n      return _extends({}, state, {\n        groupBy: state.groupBy.filter(function (d) {\n          return d !== columnId;\n        })\n      });\n    }\n  }\n\n  function visibleColumns(columns, _ref3) {\n    var groupBy = _ref3.instance.state.groupBy;\n    // Sort grouped columns to the start of the column list\n    // before the headers are built\n    var groupByColumns = groupBy.map(function (g) {\n      return columns.find(function (col) {\n        return col.id === g;\n      });\n    }).filter(Boolean);\n    var nonGroupByColumns = columns.filter(function (col) {\n      return !groupBy.includes(col.id);\n    });\n    columns = [].concat(groupByColumns, nonGroupByColumns);\n    columns.forEach(function (column) {\n      column.isGrouped = groupBy.includes(column.id);\n      column.groupedIndex = groupBy.indexOf(column.id);\n    });\n    return columns;\n  }\n\n  var defaultUserAggregations = {};\n\n  function useInstance$4(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        flatHeaders = instance.flatHeaders,\n        _instance$groupByFn = instance.groupByFn,\n        groupByFn = _instance$groupByFn === void 0 ? defaultGroupByFn : _instance$groupByFn,\n        manualGroupBy = instance.manualGroupBy,\n        _instance$aggregation = instance.aggregations,\n        userAggregations = _instance$aggregation === void 0 ? defaultUserAggregations : _instance$aggregation,\n        plugins = instance.plugins,\n        groupBy = instance.state.groupBy,\n        dispatch = instance.dispatch,\n        _instance$autoResetGr = instance.autoResetGroupBy,\n        autoResetGroupBy = _instance$autoResetGr === void 0 ? true : _instance$autoResetGr,\n        disableGroupBy = instance.disableGroupBy,\n        defaultCanGroupBy = instance.defaultCanGroupBy,\n        getHooks = instance.getHooks;\n    ensurePluginOrder(plugins, ['useColumnOrder', 'useFilters'], 'useGroupBy');\n    var getInstance = useGetLatest(instance);\n    allColumns.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnGroupBy = column.defaultGroupBy,\n          columnDisableGroupBy = column.disableGroupBy;\n      column.canGroupBy = accessor ? getFirstDefined(column.canGroupBy, columnDisableGroupBy === true ? false : undefined, disableGroupBy === true ? false : undefined, true) : getFirstDefined(column.canGroupBy, defaultColumnGroupBy, defaultCanGroupBy, false);\n\n      if (column.canGroupBy) {\n        column.toggleGroupBy = function () {\n          return instance.toggleGroupBy(column.id);\n        };\n      }\n\n      column.Aggregated = column.Aggregated || column.Cell;\n    });\n    var toggleGroupBy = React.useCallback(function (columnId, value) {\n      dispatch({\n        type: actions.toggleGroupBy,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var setGroupBy = React.useCallback(function (value) {\n      dispatch({\n        type: actions.setGroupBy,\n        value: value\n      });\n    }, [dispatch]);\n    flatHeaders.forEach(function (header) {\n      header.getGroupByToggleProps = makePropGetter(getHooks().getGroupByToggleProps, {\n        instance: getInstance(),\n        header: header\n      });\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualGroupBy || !groupBy.length) {\n        return [rows, flatRows, rowsById, emptyArray, emptyObject, flatRows, rowsById];\n      } // Ensure that the list of filtered columns exist\n\n\n      var existingGroupBy = groupBy.filter(function (g) {\n        return allColumns.find(function (col) {\n          return col.id === g;\n        });\n      }); // Find the columns that can or are aggregating\n      // Uses each column to aggregate rows into a single value\n\n      var aggregateRowsToValues = function aggregateRowsToValues(leafRows, groupedRows, depth) {\n        var values = {};\n        allColumns.forEach(function (column) {\n          // Don't aggregate columns that are in the groupBy\n          if (existingGroupBy.includes(column.id)) {\n            values[column.id] = groupedRows[0] ? groupedRows[0].values[column.id] : null;\n            return;\n          } // Aggregate the values\n\n\n          var aggregateFn = typeof column.aggregate === 'function' ? column.aggregate : userAggregations[column.aggregate] || aggregations[column.aggregate];\n\n          if (aggregateFn) {\n            // Get the columnValues to aggregate\n            var groupedValues = groupedRows.map(function (row) {\n              return row.values[column.id];\n            }); // Get the columnValues to aggregate\n\n            var leafValues = leafRows.map(function (row) {\n              var columnValue = row.values[column.id];\n\n              if (!depth && column.aggregateValue) {\n                var aggregateValueFn = typeof column.aggregateValue === 'function' ? column.aggregateValue : userAggregations[column.aggregateValue] || aggregations[column.aggregateValue];\n\n                if (!aggregateValueFn) {\n                  console.info({\n                    column: column\n                  });\n                  throw new Error(\"React Table: Invalid column.aggregateValue option for column listed above\");\n                }\n\n                columnValue = aggregateValueFn(columnValue, row, column);\n              }\n\n              return columnValue;\n            });\n            values[column.id] = aggregateFn(leafValues, groupedValues);\n          } else if (column.aggregate) {\n            console.info({\n              column: column\n            });\n            throw new Error(\"React Table: Invalid column.aggregate option for column listed above\");\n          } else {\n            values[column.id] = null;\n          }\n        });\n        return values;\n      };\n\n      var groupedFlatRows = [];\n      var groupedRowsById = {};\n      var onlyGroupedFlatRows = [];\n      var onlyGroupedRowsById = {};\n      var nonGroupedFlatRows = [];\n      var nonGroupedRowsById = {}; // Recursively group the data\n\n      var groupUpRecursively = function groupUpRecursively(rows, depth, parentId) {\n        if (depth === void 0) {\n          depth = 0;\n        }\n\n        // This is the last level, just return the rows\n        if (depth === existingGroupBy.length) {\n          return rows;\n        }\n\n        var columnId = existingGroupBy[depth]; // Group the rows together for this level\n\n        var rowGroupsMap = groupByFn(rows, columnId); // Peform aggregations for each group\n\n        var aggregatedGroupedRows = Object.entries(rowGroupsMap).map(function (_ref4, index) {\n          var groupByVal = _ref4[0],\n              groupedRows = _ref4[1];\n          var id = columnId + \":\" + groupByVal;\n          id = parentId ? parentId + \">\" + id : id; // First, Recurse to group sub rows before aggregation\n\n          var subRows = groupUpRecursively(groupedRows, depth + 1, id); // Flatten the leaf rows of the rows in this group\n\n          var leafRows = depth ? flattenBy(groupedRows, 'leafRows') : groupedRows;\n          var values = aggregateRowsToValues(leafRows, groupedRows, depth);\n          var row = {\n            id: id,\n            isGrouped: true,\n            groupByID: columnId,\n            groupByVal: groupByVal,\n            values: values,\n            subRows: subRows,\n            leafRows: leafRows,\n            depth: depth,\n            index: index\n          };\n          subRows.forEach(function (subRow) {\n            groupedFlatRows.push(subRow);\n            groupedRowsById[subRow.id] = subRow;\n\n            if (subRow.isGrouped) {\n              onlyGroupedFlatRows.push(subRow);\n              onlyGroupedRowsById[subRow.id] = subRow;\n            } else {\n              nonGroupedFlatRows.push(subRow);\n              nonGroupedRowsById[subRow.id] = subRow;\n            }\n          });\n          return row;\n        });\n        return aggregatedGroupedRows;\n      };\n\n      var groupedRows = groupUpRecursively(rows);\n      groupedRows.forEach(function (subRow) {\n        groupedFlatRows.push(subRow);\n        groupedRowsById[subRow.id] = subRow;\n\n        if (subRow.isGrouped) {\n          onlyGroupedFlatRows.push(subRow);\n          onlyGroupedRowsById[subRow.id] = subRow;\n        } else {\n          nonGroupedFlatRows.push(subRow);\n          nonGroupedRowsById[subRow.id] = subRow;\n        }\n      }); // Assign the new data\n\n      return [groupedRows, groupedFlatRows, groupedRowsById, onlyGroupedFlatRows, onlyGroupedRowsById, nonGroupedFlatRows, nonGroupedRowsById];\n    }, [manualGroupBy, groupBy, rows, flatRows, rowsById, allColumns, userAggregations, groupByFn]),\n        groupedRows = _React$useMemo[0],\n        groupedFlatRows = _React$useMemo[1],\n        groupedRowsById = _React$useMemo[2],\n        onlyGroupedFlatRows = _React$useMemo[3],\n        onlyGroupedRowsById = _React$useMemo[4],\n        nonGroupedFlatRows = _React$useMemo[5],\n        nonGroupedRowsById = _React$useMemo[6];\n\n    var getAutoResetGroupBy = useGetLatest(autoResetGroupBy);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetGroupBy()) {\n        dispatch({\n          type: actions.resetGroupBy\n        });\n      }\n    }, [dispatch, manualGroupBy ? null : data]);\n    Object.assign(instance, {\n      preGroupedRows: rows,\n      preGroupedFlatRow: flatRows,\n      preGroupedRowsById: rowsById,\n      groupedRows: groupedRows,\n      groupedFlatRows: groupedFlatRows,\n      groupedRowsById: groupedRowsById,\n      onlyGroupedFlatRows: onlyGroupedFlatRows,\n      onlyGroupedRowsById: onlyGroupedRowsById,\n      nonGroupedFlatRows: nonGroupedFlatRows,\n      nonGroupedRowsById: nonGroupedRowsById,\n      rows: groupedRows,\n      flatRows: groupedFlatRows,\n      rowsById: groupedRowsById,\n      toggleGroupBy: toggleGroupBy,\n      setGroupBy: setGroupBy\n    });\n  }\n\n  function prepareRow$1(row) {\n    row.allCells.forEach(function (cell) {\n      var _row$subRows;\n\n      // Grouped cells are in the groupBy and the pivot cell for the row\n      cell.isGrouped = cell.column.isGrouped && cell.column.id === row.groupByID; // Placeholder cells are any columns in the groupBy that are not grouped\n\n      cell.isPlaceholder = !cell.isGrouped && cell.column.isGrouped; // Aggregated cells are not grouped, not repeated, but still have subRows\n\n      cell.isAggregated = !cell.isGrouped && !cell.isPlaceholder && ((_row$subRows = row.subRows) == null ? void 0 : _row$subRows.length);\n    });\n  }\n\n  function defaultGroupByFn(rows, columnId) {\n    return rows.reduce(function (prev, row, i) {\n      // TODO: Might want to implement a key serializer here so\n      // irregular column values can still be grouped if needed?\n      var resKey = \"\" + row.values[columnId];\n      prev[resKey] = Array.isArray(prev[resKey]) ? prev[resKey] : [];\n      prev[resKey].push(row);\n      return prev;\n    }, {});\n  }\n\n  var reSplitAlphaNumeric = /([0-9]+)/gm; // Mixed sorting is slow, but very inclusive of many edge cases.\n  // It handles numbers, mixed alphanumeric combinations, and even\n  // null, undefined, and Infinity\n\n  var alphanumeric = function alphanumeric(rowA, rowB, columnId) {\n    var a = getRowValueByColumnID(rowA, columnId);\n    var b = getRowValueByColumnID(rowB, columnId); // Force to strings (or \"\" for unsupported types)\n\n    a = toString(a);\n    b = toString(b); // Split on number groups, but keep the delimiter\n    // Then remove falsey split values\n\n    a = a.split(reSplitAlphaNumeric).filter(Boolean);\n    b = b.split(reSplitAlphaNumeric).filter(Boolean); // While\n\n    while (a.length && b.length) {\n      var aa = a.shift();\n      var bb = b.shift();\n      var an = parseInt(aa, 10);\n      var bn = parseInt(bb, 10);\n      var combo = [an, bn].sort(); // Both are string\n\n      if (isNaN(combo[0])) {\n        if (aa > bb) {\n          return 1;\n        }\n\n        if (bb > aa) {\n          return -1;\n        }\n\n        continue;\n      } // One is a string, one is a number\n\n\n      if (isNaN(combo[1])) {\n        return isNaN(an) ? -1 : 1;\n      } // Both are numbers\n\n\n      if (an > bn) {\n        return 1;\n      }\n\n      if (bn > an) {\n        return -1;\n      }\n    }\n\n    return a.length - b.length;\n  };\n  function datetime(rowA, rowB, columnId) {\n    var a = getRowValueByColumnID(rowA, columnId);\n    var b = getRowValueByColumnID(rowB, columnId);\n    a = a.getTime();\n    b = b.getTime();\n    return compareBasic(a, b);\n  }\n  function basic(rowA, rowB, columnId) {\n    var a = getRowValueByColumnID(rowA, columnId);\n    var b = getRowValueByColumnID(rowB, columnId);\n    return compareBasic(a, b);\n  } // Utils\n\n  function compareBasic(a, b) {\n    return a === b ? 0 : a > b ? 1 : -1;\n  }\n\n  function getRowValueByColumnID(row, columnId) {\n    return row.values[columnId];\n  }\n\n  function toString(a) {\n    if (typeof a === 'number') {\n      if (isNaN(a) || a === Infinity || a === -Infinity) {\n        return '';\n      }\n\n      return String(a);\n    }\n\n    if (typeof a === 'string') {\n      return a;\n    }\n\n    return '';\n  }\n\n  var sortTypes = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    alphanumeric: alphanumeric,\n    datetime: datetime,\n    basic: basic\n  });\n\n  actions.resetSortBy = 'resetSortBy';\n  actions.setSortBy = 'setSortBy';\n  actions.toggleSortBy = 'toggleSortBy';\n  actions.clearSortBy = 'clearSortBy';\n  defaultColumn.sortType = 'alphanumeric';\n  defaultColumn.sortDescFirst = false;\n  var useSortBy = function useSortBy(hooks) {\n    hooks.getSortByToggleProps = [defaultGetSortByToggleProps];\n    hooks.stateReducers.push(reducer$5);\n    hooks.useInstance.push(useInstance$5);\n  };\n  useSortBy.pluginName = 'useSortBy';\n\n  var defaultGetSortByToggleProps = function defaultGetSortByToggleProps(props, _ref) {\n    var instance = _ref.instance,\n        column = _ref.column;\n    var _instance$isMultiSort = instance.isMultiSortEvent,\n        isMultiSortEvent = _instance$isMultiSort === void 0 ? function (e) {\n      return e.shiftKey;\n    } : _instance$isMultiSort;\n    return [props, {\n      onClick: column.canSort ? function (e) {\n        e.persist();\n        column.toggleSortBy(undefined, !instance.disableMultiSort && isMultiSortEvent(e));\n      } : undefined,\n      style: {\n        cursor: column.canSort ? 'pointer' : undefined\n      },\n      title: column.canSort ? 'Toggle SortBy' : undefined\n    }];\n  }; // Reducer\n\n\n  function reducer$5(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        sortBy: []\n      }, state);\n    }\n\n    if (action.type === actions.resetSortBy) {\n      return _extends({}, state, {\n        sortBy: instance.initialState.sortBy || []\n      });\n    }\n\n    if (action.type === actions.clearSortBy) {\n      var sortBy = state.sortBy;\n      var newSortBy = sortBy.filter(function (d) {\n        return d.id !== action.columnId;\n      });\n      return _extends({}, state, {\n        sortBy: newSortBy\n      });\n    }\n\n    if (action.type === actions.setSortBy) {\n      var _sortBy = action.sortBy;\n      return _extends({}, state, {\n        sortBy: _sortBy\n      });\n    }\n\n    if (action.type === actions.toggleSortBy) {\n      var columnId = action.columnId,\n          desc = action.desc,\n          multi = action.multi;\n      var allColumns = instance.allColumns,\n          disableMultiSort = instance.disableMultiSort,\n          disableSortRemove = instance.disableSortRemove,\n          disableMultiRemove = instance.disableMultiRemove,\n          _instance$maxMultiSor = instance.maxMultiSortColCount,\n          maxMultiSortColCount = _instance$maxMultiSor === void 0 ? Number.MAX_SAFE_INTEGER : _instance$maxMultiSor;\n      var _sortBy2 = state.sortBy; // Find the column for this columnId\n\n      var column = allColumns.find(function (d) {\n        return d.id === columnId;\n      });\n      var sortDescFirst = column.sortDescFirst; // Find any existing sortBy for this column\n\n      var existingSortBy = _sortBy2.find(function (d) {\n        return d.id === columnId;\n      });\n\n      var existingIndex = _sortBy2.findIndex(function (d) {\n        return d.id === columnId;\n      });\n\n      var hasDescDefined = typeof desc !== 'undefined' && desc !== null;\n      var _newSortBy = []; // What should we do with this sort action?\n\n      var sortAction;\n\n      if (!disableMultiSort && multi) {\n        if (existingSortBy) {\n          sortAction = 'toggle';\n        } else {\n          sortAction = 'add';\n        }\n      } else {\n        // Normal mode\n        if (existingIndex !== _sortBy2.length - 1 || _sortBy2.length !== 1) {\n          sortAction = 'replace';\n        } else if (existingSortBy) {\n          sortAction = 'toggle';\n        } else {\n          sortAction = 'replace';\n        }\n      } // Handle toggle states that will remove the sortBy\n\n\n      if (sortAction === 'toggle' && // Must be toggling\n      !disableSortRemove && // If disableSortRemove, disable in general\n      !hasDescDefined && ( // Must not be setting desc\n      multi ? !disableMultiRemove : true) && ( // If multi, don't allow if disableMultiRemove\n      existingSortBy && // Finally, detect if it should indeed be removed\n      existingSortBy.desc && !sortDescFirst || !existingSortBy.desc && sortDescFirst)) {\n        sortAction = 'remove';\n      }\n\n      if (sortAction === 'replace') {\n        _newSortBy = [{\n          id: columnId,\n          desc: hasDescDefined ? desc : sortDescFirst\n        }];\n      } else if (sortAction === 'add') {\n        _newSortBy = [].concat(_sortBy2, [{\n          id: columnId,\n          desc: hasDescDefined ? desc : sortDescFirst\n        }]); // Take latest n columns\n\n        _newSortBy.splice(0, _newSortBy.length - maxMultiSortColCount);\n      } else if (sortAction === 'toggle') {\n        // This flips (or sets) the\n        _newSortBy = _sortBy2.map(function (d) {\n          if (d.id === columnId) {\n            return _extends({}, d, {\n              desc: hasDescDefined ? desc : !existingSortBy.desc\n            });\n          }\n\n          return d;\n        });\n      } else if (sortAction === 'remove') {\n        _newSortBy = _sortBy2.filter(function (d) {\n          return d.id !== columnId;\n        });\n      }\n\n      return _extends({}, state, {\n        sortBy: _newSortBy\n      });\n    }\n  }\n\n  function useInstance$5(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        allColumns = instance.allColumns,\n        _instance$orderByFn = instance.orderByFn,\n        orderByFn = _instance$orderByFn === void 0 ? defaultOrderByFn : _instance$orderByFn,\n        userSortTypes = instance.sortTypes,\n        manualSortBy = instance.manualSortBy,\n        defaultCanSort = instance.defaultCanSort,\n        disableSortBy = instance.disableSortBy,\n        flatHeaders = instance.flatHeaders,\n        sortBy = instance.state.sortBy,\n        dispatch = instance.dispatch,\n        plugins = instance.plugins,\n        getHooks = instance.getHooks,\n        _instance$autoResetSo = instance.autoResetSortBy,\n        autoResetSortBy = _instance$autoResetSo === void 0 ? true : _instance$autoResetSo;\n    ensurePluginOrder(plugins, ['useFilters', 'useGlobalFilter', 'useGroupBy', 'usePivotColumns'], 'useSortBy');\n    var setSortBy = React.useCallback(function (sortBy) {\n      dispatch({\n        type: actions.setSortBy,\n        sortBy: sortBy\n      });\n    }, [dispatch]); // Updates sorting based on a columnId, desc flag and multi flag\n\n    var toggleSortBy = React.useCallback(function (columnId, desc, multi) {\n      dispatch({\n        type: actions.toggleSortBy,\n        columnId: columnId,\n        desc: desc,\n        multi: multi\n      });\n    }, [dispatch]); // use reference to avoid memory leak in #1608\n\n    var getInstance = useGetLatest(instance); // Add the getSortByToggleProps method to columns and headers\n\n    flatHeaders.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnCanSort = column.canSort,\n          columnDisableSortBy = column.disableSortBy,\n          id = column.id;\n      var canSort = accessor ? getFirstDefined(columnDisableSortBy === true ? false : undefined, disableSortBy === true ? false : undefined, true) : getFirstDefined(defaultCanSort, defaultColumnCanSort, false);\n      column.canSort = canSort;\n\n      if (column.canSort) {\n        column.toggleSortBy = function (desc, multi) {\n          return toggleSortBy(column.id, desc, multi);\n        };\n\n        column.clearSortBy = function () {\n          dispatch({\n            type: actions.clearSortBy,\n            columnId: column.id\n          });\n        };\n      }\n\n      column.getSortByToggleProps = makePropGetter(getHooks().getSortByToggleProps, {\n        instance: getInstance(),\n        column: column\n      });\n      var columnSort = sortBy.find(function (d) {\n        return d.id === id;\n      });\n      column.isSorted = !!columnSort;\n      column.sortedIndex = sortBy.findIndex(function (d) {\n        return d.id === id;\n      });\n      column.isSortedDesc = column.isSorted ? columnSort.desc : undefined;\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualSortBy || !sortBy.length) {\n        return [rows, flatRows];\n      }\n\n      var sortedFlatRows = []; // Filter out sortBys that correspond to non existing columns\n\n      var availableSortBy = sortBy.filter(function (sort) {\n        return allColumns.find(function (col) {\n          return col.id === sort.id;\n        });\n      });\n\n      var sortData = function sortData(rows) {\n        // Use the orderByFn to compose multiple sortBy's together.\n        // This will also perform a stable sorting using the row index\n        // if needed.\n        var sortedData = orderByFn(rows, availableSortBy.map(function (sort) {\n          // Support custom sorting methods for each column\n          var column = allColumns.find(function (d) {\n            return d.id === sort.id;\n          });\n\n          if (!column) {\n            throw new Error(\"React-Table: Could not find a column with id: \" + sort.id + \" while sorting\");\n          }\n\n          var sortType = column.sortType; // Look up sortBy functions in this order:\n          // column function\n          // column string lookup on user sortType\n          // column string lookup on built-in sortType\n          // default function\n          // default string lookup on user sortType\n          // default string lookup on built-in sortType\n\n          var sortMethod = isFunction(sortType) || (userSortTypes || {})[sortType] || sortTypes[sortType];\n\n          if (!sortMethod) {\n            throw new Error(\"React-Table: Could not find a valid sortType of '\" + sortType + \"' for column '\" + sort.id + \"'.\");\n          } // Return the correct sortFn.\n          // This function should always return in ascending order\n\n\n          return function (a, b) {\n            return sortMethod(a, b, sort.id, sort.desc);\n          };\n        }), // Map the directions\n        availableSortBy.map(function (sort) {\n          // Detect and use the sortInverted option\n          var column = allColumns.find(function (d) {\n            return d.id === sort.id;\n          });\n\n          if (column && column.sortInverted) {\n            return sort.desc;\n          }\n\n          return !sort.desc;\n        })); // If there are sub-rows, sort them\n\n        sortedData.forEach(function (row) {\n          sortedFlatRows.push(row);\n\n          if (!row.subRows || row.subRows.length === 0) {\n            return;\n          }\n\n          row.subRows = sortData(row.subRows);\n        });\n        return sortedData;\n      };\n\n      return [sortData(rows), sortedFlatRows];\n    }, [manualSortBy, sortBy, rows, flatRows, allColumns, orderByFn, userSortTypes]),\n        sortedRows = _React$useMemo[0],\n        sortedFlatRows = _React$useMemo[1];\n\n    var getAutoResetSortBy = useGetLatest(autoResetSortBy);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetSortBy()) {\n        dispatch({\n          type: actions.resetSortBy\n        });\n      }\n    }, [manualSortBy ? null : data]);\n    Object.assign(instance, {\n      preSortedRows: rows,\n      preSortedFlatRows: flatRows,\n      sortedRows: sortedRows,\n      sortedFlatRows: sortedFlatRows,\n      rows: sortedRows,\n      flatRows: sortedFlatRows,\n      setSortBy: setSortBy,\n      toggleSortBy: toggleSortBy\n    });\n  }\n\n  function defaultOrderByFn(arr, funcs, dirs) {\n    return [].concat(arr).sort(function (rowA, rowB) {\n      for (var i = 0; i < funcs.length; i += 1) {\n        var sortFn = funcs[i];\n        var desc = dirs[i] === false || dirs[i] === 'desc';\n        var sortInt = sortFn(rowA, rowB);\n\n        if (sortInt !== 0) {\n          return desc ? -sortInt : sortInt;\n        }\n      }\n\n      return dirs[0] ? rowA.index - rowB.index : rowB.index - rowA.index;\n    });\n  }\n\n  var pluginName = 'usePagination'; // Actions\n\n  actions.resetPage = 'resetPage';\n  actions.gotoPage = 'gotoPage';\n  actions.setPageSize = 'setPageSize';\n  var usePagination = function usePagination(hooks) {\n    hooks.stateReducers.push(reducer$6);\n    hooks.useInstance.push(useInstance$6);\n  };\n  usePagination.pluginName = pluginName;\n\n  function reducer$6(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        pageSize: 10,\n        pageIndex: 0\n      }, state);\n    }\n\n    if (action.type === actions.resetPage) {\n      return _extends({}, state, {\n        pageIndex: instance.initialState.pageIndex || 0\n      });\n    }\n\n    if (action.type === actions.gotoPage) {\n      var pageCount = instance.pageCount,\n          page = instance.page;\n      var newPageIndex = functionalUpdate(action.pageIndex, state.pageIndex);\n      var canNavigate = false;\n\n      if (newPageIndex > state.pageIndex) {\n        // next page\n        canNavigate = pageCount === -1 ? page.length >= state.pageSize : newPageIndex < pageCount;\n      } else if (newPageIndex < state.pageIndex) {\n        // prev page\n        canNavigate = newPageIndex > -1;\n      }\n\n      if (!canNavigate) {\n        return state;\n      }\n\n      return _extends({}, state, {\n        pageIndex: newPageIndex\n      });\n    }\n\n    if (action.type === actions.setPageSize) {\n      var pageSize = action.pageSize;\n      var topRowIndex = state.pageSize * state.pageIndex;\n      var pageIndex = Math.floor(topRowIndex / pageSize);\n      return _extends({}, state, {\n        pageIndex: pageIndex,\n        pageSize: pageSize\n      });\n    }\n  }\n\n  function useInstance$6(instance) {\n    var rows = instance.rows,\n        _instance$autoResetPa = instance.autoResetPage,\n        autoResetPage = _instance$autoResetPa === void 0 ? true : _instance$autoResetPa,\n        _instance$manualExpan = instance.manualExpandedKey,\n        manualExpandedKey = _instance$manualExpan === void 0 ? 'expanded' : _instance$manualExpan,\n        plugins = instance.plugins,\n        userPageCount = instance.pageCount,\n        _instance$paginateExp = instance.paginateExpandedRows,\n        paginateExpandedRows = _instance$paginateExp === void 0 ? true : _instance$paginateExp,\n        _instance$expandSubRo = instance.expandSubRows,\n        expandSubRows = _instance$expandSubRo === void 0 ? true : _instance$expandSubRo,\n        _instance$state = instance.state,\n        pageSize = _instance$state.pageSize,\n        pageIndex = _instance$state.pageIndex,\n        expanded = _instance$state.expanded,\n        globalFilter = _instance$state.globalFilter,\n        filters = _instance$state.filters,\n        groupBy = _instance$state.groupBy,\n        sortBy = _instance$state.sortBy,\n        dispatch = instance.dispatch,\n        data = instance.data,\n        manualPagination = instance.manualPagination;\n    ensurePluginOrder(plugins, ['useGlobalFilter', 'useFilters', 'useGroupBy', 'useSortBy', 'useExpanded'], 'usePagination');\n    var getAutoResetPage = useGetLatest(autoResetPage);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetPage()) {\n        dispatch({\n          type: actions.resetPage\n        });\n      }\n    }, [dispatch, manualPagination ? null : data, globalFilter, filters, groupBy, sortBy]);\n    var pageCount = manualPagination ? userPageCount : Math.ceil(rows.length / pageSize);\n    var pageOptions = React.useMemo(function () {\n      return pageCount > 0 ? [].concat(new Array(pageCount)).fill(null).map(function (d, i) {\n        return i;\n      }) : [];\n    }, [pageCount]);\n    var page = React.useMemo(function () {\n      var page;\n\n      if (manualPagination) {\n        page = rows;\n      } else {\n        var pageStart = pageSize * pageIndex;\n        var pageEnd = pageStart + pageSize;\n        page = rows.slice(pageStart, pageEnd);\n      }\n\n      if (paginateExpandedRows) {\n        return page;\n      }\n\n      return expandRows(page, {\n        manualExpandedKey: manualExpandedKey,\n        expanded: expanded,\n        expandSubRows: expandSubRows\n      });\n    }, [expandSubRows, expanded, manualExpandedKey, manualPagination, pageIndex, pageSize, paginateExpandedRows, rows]);\n    var canPreviousPage = pageIndex > 0;\n    var canNextPage = pageCount === -1 ? page.length >= pageSize : pageIndex < pageCount - 1;\n    var gotoPage = React.useCallback(function (pageIndex) {\n      dispatch({\n        type: actions.gotoPage,\n        pageIndex: pageIndex\n      });\n    }, [dispatch]);\n    var previousPage = React.useCallback(function () {\n      return gotoPage(function (old) {\n        return old - 1;\n      });\n    }, [gotoPage]);\n    var nextPage = React.useCallback(function () {\n      return gotoPage(function (old) {\n        return old + 1;\n      });\n    }, [gotoPage]);\n    var setPageSize = React.useCallback(function (pageSize) {\n      dispatch({\n        type: actions.setPageSize,\n        pageSize: pageSize\n      });\n    }, [dispatch]);\n    Object.assign(instance, {\n      pageOptions: pageOptions,\n      pageCount: pageCount,\n      page: page,\n      canPreviousPage: canPreviousPage,\n      canNextPage: canNextPage,\n      gotoPage: gotoPage,\n      previousPage: previousPage,\n      nextPage: nextPage,\n      setPageSize: setPageSize\n    });\n  }\n\n  actions.resetPivot = 'resetPivot';\n  actions.togglePivot = 'togglePivot';\n  var _UNSTABLE_usePivotColumns = function _UNSTABLE_usePivotColumns(hooks) {\n    hooks.getPivotToggleProps = [defaultGetPivotToggleProps];\n    hooks.stateReducers.push(reducer$7);\n    hooks.useInstanceAfterData.push(useInstanceAfterData);\n    hooks.allColumns.push(allColumns);\n    hooks.accessValue.push(accessValue);\n    hooks.materializedColumns.push(materializedColumns);\n    hooks.materializedColumnsDeps.push(materializedColumnsDeps);\n    hooks.visibleColumns.push(visibleColumns$1);\n    hooks.visibleColumnsDeps.push(visibleColumnsDeps);\n    hooks.useInstance.push(useInstance$7);\n    hooks.prepareRow.push(prepareRow$2);\n  };\n  _UNSTABLE_usePivotColumns.pluginName = 'usePivotColumns';\n  var defaultPivotColumns = [];\n\n  var defaultGetPivotToggleProps = function defaultGetPivotToggleProps(props, _ref) {\n    var header = _ref.header;\n    return [props, {\n      onClick: header.canPivot ? function (e) {\n        e.persist();\n        header.togglePivot();\n      } : undefined,\n      style: {\n        cursor: header.canPivot ? 'pointer' : undefined\n      },\n      title: 'Toggle Pivot'\n    }];\n  }; // Reducer\n\n\n  function reducer$7(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        pivotColumns: defaultPivotColumns\n      }, state);\n    }\n\n    if (action.type === actions.resetPivot) {\n      return _extends({}, state, {\n        pivotColumns: instance.initialState.pivotColumns || defaultPivotColumns\n      });\n    }\n\n    if (action.type === actions.togglePivot) {\n      var columnId = action.columnId,\n          setPivot = action.value;\n      var resolvedPivot = typeof setPivot !== 'undefined' ? setPivot : !state.pivotColumns.includes(columnId);\n\n      if (resolvedPivot) {\n        return _extends({}, state, {\n          pivotColumns: [].concat(state.pivotColumns, [columnId])\n        });\n      }\n\n      return _extends({}, state, {\n        pivotColumns: state.pivotColumns.filter(function (d) {\n          return d !== columnId;\n        })\n      });\n    }\n  }\n\n  function useInstanceAfterData(instance) {\n    instance.allColumns.forEach(function (column) {\n      column.isPivotSource = instance.state.pivotColumns.includes(column.id);\n    });\n  }\n\n  function allColumns(columns, _ref2) {\n    var instance = _ref2.instance;\n    columns.forEach(function (column) {\n      column.isPivotSource = instance.state.pivotColumns.includes(column.id);\n      column.uniqueValues = new Set();\n    });\n    return columns;\n  }\n\n  function accessValue(value, _ref3) {\n    var column = _ref3.column;\n\n    if (column.uniqueValues && typeof value !== 'undefined') {\n      column.uniqueValues.add(value);\n    }\n\n    return value;\n  }\n\n  function materializedColumns(materialized, _ref4) {\n    var instance = _ref4.instance;\n    var allColumns = instance.allColumns,\n        state = instance.state;\n\n    if (!state.pivotColumns.length || !state.groupBy || !state.groupBy.length) {\n      return materialized;\n    }\n\n    var pivotColumns = state.pivotColumns.map(function (id) {\n      return allColumns.find(function (d) {\n        return d.id === id;\n      });\n    }).filter(Boolean);\n    var sourceColumns = allColumns.filter(function (d) {\n      return !d.isPivotSource && !state.groupBy.includes(d.id) && !state.pivotColumns.includes(d.id);\n    });\n\n    var buildPivotColumns = function buildPivotColumns(depth, parent, pivotFilters) {\n      if (depth === void 0) {\n        depth = 0;\n      }\n\n      if (pivotFilters === void 0) {\n        pivotFilters = [];\n      }\n\n      var pivotColumn = pivotColumns[depth];\n\n      if (!pivotColumn) {\n        return sourceColumns.map(function (sourceColumn) {\n          // TODO: We could offer support here for renesting pivoted\n          // columns inside copies of their header groups. For now,\n          // that seems like it would be (1) overkill on nesting, considering\n          // you already get nesting for every pivot level and (2)\n          // really hard. :)\n          return _extends({}, sourceColumn, {\n            canPivot: false,\n            isPivoted: true,\n            parent: parent,\n            depth: depth,\n            id: \"\" + (parent ? parent.id + \".\" + sourceColumn.id : sourceColumn.id),\n            accessor: function accessor(originalRow, i, row) {\n              if (pivotFilters.every(function (filter) {\n                return filter(row);\n              })) {\n                return row.values[sourceColumn.id];\n              }\n            }\n          });\n        });\n      }\n\n      var uniqueValues = Array.from(pivotColumn.uniqueValues).sort();\n      return uniqueValues.map(function (uniqueValue) {\n        var columnGroup = _extends({}, pivotColumn, {\n          Header: pivotColumn.PivotHeader || typeof pivotColumn.header === 'string' ? pivotColumn.Header + \": \" + uniqueValue : uniqueValue,\n          isPivotGroup: true,\n          parent: parent,\n          depth: depth,\n          id: parent ? parent.id + \".\" + pivotColumn.id + \".\" + uniqueValue : pivotColumn.id + \".\" + uniqueValue,\n          pivotValue: uniqueValue\n        });\n\n        columnGroup.columns = buildPivotColumns(depth + 1, columnGroup, [].concat(pivotFilters, [function (row) {\n          return row.values[pivotColumn.id] === uniqueValue;\n        }]));\n        return columnGroup;\n      });\n    };\n\n    var newMaterialized = flattenColumns(buildPivotColumns());\n    return [].concat(materialized, newMaterialized);\n  }\n\n  function materializedColumnsDeps(deps, _ref5) {\n    var _ref5$instance$state = _ref5.instance.state,\n        pivotColumns = _ref5$instance$state.pivotColumns,\n        groupBy = _ref5$instance$state.groupBy;\n    return [].concat(deps, [pivotColumns, groupBy]);\n  }\n\n  function visibleColumns$1(visibleColumns, _ref6) {\n    var state = _ref6.instance.state;\n    visibleColumns = visibleColumns.filter(function (d) {\n      return !d.isPivotSource;\n    });\n\n    if (state.pivotColumns.length && state.groupBy && state.groupBy.length) {\n      visibleColumns = visibleColumns.filter(function (column) {\n        return column.isGrouped || column.isPivoted;\n      });\n    }\n\n    return visibleColumns;\n  }\n\n  function visibleColumnsDeps(deps, _ref7) {\n    var instance = _ref7.instance;\n    return [].concat(deps, [instance.state.pivotColumns, instance.state.groupBy]);\n  }\n\n  function useInstance$7(instance) {\n    var columns = instance.columns,\n        allColumns = instance.allColumns,\n        flatHeaders = instance.flatHeaders,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        dispatch = instance.dispatch,\n        _instance$autoResetPi = instance.autoResetPivot,\n        autoResetPivot = _instance$autoResetPi === void 0 ? true : _instance$autoResetPi,\n        manaulPivot = instance.manaulPivot,\n        disablePivot = instance.disablePivot,\n        defaultCanPivot = instance.defaultCanPivot;\n    ensurePluginOrder(plugins, ['useGroupBy'], 'usePivotColumns');\n    var getInstance = useGetLatest(instance);\n    allColumns.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnPivot = column.defaultPivot,\n          columnDisablePivot = column.disablePivot;\n      column.canPivot = accessor ? getFirstDefined(column.canPivot, columnDisablePivot === true ? false : undefined, disablePivot === true ? false : undefined, true) : getFirstDefined(column.canPivot, defaultColumnPivot, defaultCanPivot, false);\n\n      if (column.canPivot) {\n        column.togglePivot = function () {\n          return instance.togglePivot(column.id);\n        };\n      }\n\n      column.Aggregated = column.Aggregated || column.Cell;\n    });\n\n    var togglePivot = function togglePivot(columnId, value) {\n      dispatch({\n        type: actions.togglePivot,\n        columnId: columnId,\n        value: value\n      });\n    };\n\n    flatHeaders.forEach(function (header) {\n      header.getPivotToggleProps = makePropGetter(getHooks().getPivotToggleProps, {\n        instance: getInstance(),\n        header: header\n      });\n    });\n    var getAutoResetPivot = useGetLatest(autoResetPivot);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetPivot()) {\n        dispatch({\n          type: actions.resetPivot\n        });\n      }\n    }, [dispatch, manaulPivot ? null : columns]);\n    Object.assign(instance, {\n      togglePivot: togglePivot\n    });\n  }\n\n  function prepareRow$2(row) {\n    row.allCells.forEach(function (cell) {\n      // Grouped cells are in the pivotColumns and the pivot cell for the row\n      cell.isPivoted = cell.column.isPivoted;\n    });\n  }\n\n  var pluginName$1 = 'useRowSelect'; // Actions\n\n  actions.resetSelectedRows = 'resetSelectedRows';\n  actions.toggleAllRowsSelected = 'toggleAllRowsSelected';\n  actions.toggleRowSelected = 'toggleRowSelected';\n  actions.toggleAllPageRowsSelected = 'toggleAllPageRowsSelected';\n  var useRowSelect = function useRowSelect(hooks) {\n    hooks.getToggleRowSelectedProps = [defaultGetToggleRowSelectedProps];\n    hooks.getToggleAllRowsSelectedProps = [defaultGetToggleAllRowsSelectedProps];\n    hooks.getToggleAllPageRowsSelectedProps = [defaultGetToggleAllPageRowsSelectedProps];\n    hooks.stateReducers.push(reducer$8);\n    hooks.useInstance.push(useInstance$8);\n    hooks.prepareRow.push(prepareRow$3);\n  };\n  useRowSelect.pluginName = pluginName$1;\n\n  var defaultGetToggleRowSelectedProps = function defaultGetToggleRowSelectedProps(props, _ref) {\n    var instance = _ref.instance,\n        row = _ref.row;\n    var _instance$manualRowSe = instance.manualRowSelectedKey,\n        manualRowSelectedKey = _instance$manualRowSe === void 0 ? 'isSelected' : _instance$manualRowSe;\n    var checked = false;\n\n    if (row.original && row.original[manualRowSelectedKey]) {\n      checked = true;\n    } else {\n      checked = row.isSelected;\n    }\n\n    return [props, {\n      onChange: function onChange(e) {\n        row.toggleRowSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: checked,\n      title: 'Toggle Row Selected',\n      indeterminate: row.isSomeSelected\n    }];\n  };\n\n  var defaultGetToggleAllRowsSelectedProps = function defaultGetToggleAllRowsSelectedProps(props, _ref2) {\n    var instance = _ref2.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleAllRowsSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: instance.isAllRowsSelected,\n      title: 'Toggle All Rows Selected',\n      indeterminate: Boolean(!instance.isAllRowsSelected && Object.keys(instance.state.selectedRowIds).length)\n    }];\n  };\n\n  var defaultGetToggleAllPageRowsSelectedProps = function defaultGetToggleAllPageRowsSelectedProps(props, _ref3) {\n    var instance = _ref3.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleAllPageRowsSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: instance.isAllPageRowsSelected,\n      title: 'Toggle All Current Page Rows Selected',\n      indeterminate: Boolean(!instance.isAllPageRowsSelected && instance.page.some(function (_ref4) {\n        var id = _ref4.id;\n        return instance.state.selectedRowIds[id];\n      }))\n    }];\n  }; // eslint-disable-next-line max-params\n\n\n  function reducer$8(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        selectedRowIds: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetSelectedRows) {\n      return _extends({}, state, {\n        selectedRowIds: instance.initialState.selectedRowIds || {}\n      });\n    }\n\n    if (action.type === actions.toggleAllRowsSelected) {\n      var setSelected = action.value;\n      var isAllRowsSelected = instance.isAllRowsSelected,\n          rowsById = instance.rowsById,\n          _instance$nonGroupedR = instance.nonGroupedRowsById,\n          nonGroupedRowsById = _instance$nonGroupedR === void 0 ? rowsById : _instance$nonGroupedR;\n      var selectAll = typeof setSelected !== 'undefined' ? setSelected : !isAllRowsSelected; // Only remove/add the rows that are visible on the screen\n      //  Leave all the other rows that are selected alone.\n\n      var selectedRowIds = Object.assign({}, state.selectedRowIds);\n\n      if (selectAll) {\n        Object.keys(nonGroupedRowsById).forEach(function (rowId) {\n          selectedRowIds[rowId] = true;\n        });\n      } else {\n        Object.keys(nonGroupedRowsById).forEach(function (rowId) {\n          delete selectedRowIds[rowId];\n        });\n      }\n\n      return _extends({}, state, {\n        selectedRowIds: selectedRowIds\n      });\n    }\n\n    if (action.type === actions.toggleRowSelected) {\n      var id = action.id,\n          _setSelected = action.value;\n      var _rowsById = instance.rowsById,\n          _instance$selectSubRo = instance.selectSubRows,\n          selectSubRows = _instance$selectSubRo === void 0 ? true : _instance$selectSubRo,\n          getSubRows = instance.getSubRows;\n      var isSelected = state.selectedRowIds[id];\n      var shouldExist = typeof _setSelected !== 'undefined' ? _setSelected : !isSelected;\n\n      if (isSelected === shouldExist) {\n        return state;\n      }\n\n      var newSelectedRowIds = _extends({}, state.selectedRowIds);\n\n      var handleRowById = function handleRowById(id) {\n        var row = _rowsById[id];\n\n        if (!row.isGrouped) {\n          if (shouldExist) {\n            newSelectedRowIds[id] = true;\n          } else {\n            delete newSelectedRowIds[id];\n          }\n        }\n\n        if (selectSubRows && getSubRows(row)) {\n          return getSubRows(row).forEach(function (row) {\n            return handleRowById(row.id);\n          });\n        }\n      };\n\n      handleRowById(id);\n      return _extends({}, state, {\n        selectedRowIds: newSelectedRowIds\n      });\n    }\n\n    if (action.type === actions.toggleAllPageRowsSelected) {\n      var _setSelected2 = action.value;\n\n      var page = instance.page,\n          _rowsById2 = instance.rowsById,\n          _instance$selectSubRo2 = instance.selectSubRows,\n          _selectSubRows = _instance$selectSubRo2 === void 0 ? true : _instance$selectSubRo2,\n          isAllPageRowsSelected = instance.isAllPageRowsSelected,\n          _getSubRows = instance.getSubRows;\n\n      var _selectAll = typeof _setSelected2 !== 'undefined' ? _setSelected2 : !isAllPageRowsSelected;\n\n      var _newSelectedRowIds = _extends({}, state.selectedRowIds);\n\n      var _handleRowById = function _handleRowById(id) {\n        var row = _rowsById2[id];\n\n        if (!row.isGrouped) {\n          if (_selectAll) {\n            _newSelectedRowIds[id] = true;\n          } else {\n            delete _newSelectedRowIds[id];\n          }\n        }\n\n        if (_selectSubRows && _getSubRows(row)) {\n          return _getSubRows(row).forEach(function (row) {\n            return _handleRowById(row.id);\n          });\n        }\n      };\n\n      page.forEach(function (row) {\n        return _handleRowById(row.id);\n      });\n      return _extends({}, state, {\n        selectedRowIds: _newSelectedRowIds\n      });\n    }\n\n    return state;\n  }\n\n  function useInstance$8(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        rowsById = instance.rowsById,\n        _instance$nonGroupedR2 = instance.nonGroupedRowsById,\n        nonGroupedRowsById = _instance$nonGroupedR2 === void 0 ? rowsById : _instance$nonGroupedR2,\n        _instance$autoResetSe = instance.autoResetSelectedRows,\n        autoResetSelectedRows = _instance$autoResetSe === void 0 ? true : _instance$autoResetSe,\n        selectedRowIds = instance.state.selectedRowIds,\n        _instance$selectSubRo3 = instance.selectSubRows,\n        selectSubRows = _instance$selectSubRo3 === void 0 ? true : _instance$selectSubRo3,\n        dispatch = instance.dispatch,\n        page = instance.page,\n        getSubRows = instance.getSubRows;\n    ensurePluginOrder(plugins, ['useFilters', 'useGroupBy', 'useSortBy', 'useExpanded', 'usePagination'], 'useRowSelect');\n    var selectedFlatRows = React.useMemo(function () {\n      var selectedFlatRows = [];\n      rows.forEach(function (row) {\n        var isSelected = selectSubRows ? getRowIsSelected(row, selectedRowIds, getSubRows) : !!selectedRowIds[row.id];\n        row.isSelected = !!isSelected;\n        row.isSomeSelected = isSelected === null;\n\n        if (isSelected) {\n          selectedFlatRows.push(row);\n        }\n      });\n      return selectedFlatRows;\n    }, [rows, selectSubRows, selectedRowIds, getSubRows]);\n    var isAllRowsSelected = Boolean(Object.keys(nonGroupedRowsById).length && Object.keys(selectedRowIds).length);\n    var isAllPageRowsSelected = isAllRowsSelected;\n\n    if (isAllRowsSelected) {\n      if (Object.keys(nonGroupedRowsById).some(function (id) {\n        return !selectedRowIds[id];\n      })) {\n        isAllRowsSelected = false;\n      }\n    }\n\n    if (!isAllRowsSelected) {\n      if (page && page.length && page.some(function (_ref5) {\n        var id = _ref5.id;\n        return !selectedRowIds[id];\n      })) {\n        isAllPageRowsSelected = false;\n      }\n    }\n\n    var getAutoResetSelectedRows = useGetLatest(autoResetSelectedRows);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetSelectedRows()) {\n        dispatch({\n          type: actions.resetSelectedRows\n        });\n      }\n    }, [dispatch, data]);\n    var toggleAllRowsSelected = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllRowsSelected,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleAllPageRowsSelected = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllPageRowsSelected,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleRowSelected = React.useCallback(function (id, value) {\n      return dispatch({\n        type: actions.toggleRowSelected,\n        id: id,\n        value: value\n      });\n    }, [dispatch]);\n    var getInstance = useGetLatest(instance);\n    var getToggleAllRowsSelectedProps = makePropGetter(getHooks().getToggleAllRowsSelectedProps, {\n      instance: getInstance()\n    });\n    var getToggleAllPageRowsSelectedProps = makePropGetter(getHooks().getToggleAllPageRowsSelectedProps, {\n      instance: getInstance()\n    });\n    Object.assign(instance, {\n      selectedFlatRows: selectedFlatRows,\n      isAllRowsSelected: isAllRowsSelected,\n      isAllPageRowsSelected: isAllPageRowsSelected,\n      toggleRowSelected: toggleRowSelected,\n      toggleAllRowsSelected: toggleAllRowsSelected,\n      getToggleAllRowsSelectedProps: getToggleAllRowsSelectedProps,\n      getToggleAllPageRowsSelectedProps: getToggleAllPageRowsSelectedProps,\n      toggleAllPageRowsSelected: toggleAllPageRowsSelected\n    });\n  }\n\n  function prepareRow$3(row, _ref6) {\n    var instance = _ref6.instance;\n\n    row.toggleRowSelected = function (set) {\n      return instance.toggleRowSelected(row.id, set);\n    };\n\n    row.getToggleRowSelectedProps = makePropGetter(instance.getHooks().getToggleRowSelectedProps, {\n      instance: instance,\n      row: row\n    });\n  }\n\n  function getRowIsSelected(row, selectedRowIds, getSubRows) {\n    if (selectedRowIds[row.id]) {\n      return true;\n    }\n\n    var subRows = getSubRows(row);\n\n    if (subRows && subRows.length) {\n      var allChildrenSelected = true;\n      var someSelected = false;\n      subRows.forEach(function (subRow) {\n        // Bail out early if we know both of these\n        if (someSelected && !allChildrenSelected) {\n          return;\n        }\n\n        if (getRowIsSelected(subRow, selectedRowIds, getSubRows)) {\n          someSelected = true;\n        } else {\n          allChildrenSelected = false;\n        }\n      });\n      return allChildrenSelected ? true : someSelected ? null : false;\n    }\n\n    return false;\n  }\n\n  var defaultInitialRowStateAccessor = function defaultInitialRowStateAccessor(row) {\n    return {};\n  };\n\n  var defaultInitialCellStateAccessor = function defaultInitialCellStateAccessor(cell) {\n    return {};\n  }; // Actions\n\n\n  actions.setRowState = 'setRowState';\n  actions.setCellState = 'setCellState';\n  actions.resetRowState = 'resetRowState';\n  var useRowState = function useRowState(hooks) {\n    hooks.stateReducers.push(reducer$9);\n    hooks.useInstance.push(useInstance$9);\n    hooks.prepareRow.push(prepareRow$4);\n  };\n  useRowState.pluginName = 'useRowState';\n\n  function reducer$9(state, action, previousState, instance) {\n    var _instance$initialRowS = instance.initialRowStateAccessor,\n        initialRowStateAccessor = _instance$initialRowS === void 0 ? defaultInitialRowStateAccessor : _instance$initialRowS,\n        _instance$initialCell = instance.initialCellStateAccessor,\n        initialCellStateAccessor = _instance$initialCell === void 0 ? defaultInitialCellStateAccessor : _instance$initialCell,\n        rowsById = instance.rowsById;\n\n    if (action.type === actions.init) {\n      return _extends({\n        rowState: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetRowState) {\n      return _extends({}, state, {\n        rowState: instance.initialState.rowState || {}\n      });\n    }\n\n    if (action.type === actions.setRowState) {\n      var _extends2;\n\n      var rowId = action.rowId,\n          value = action.value;\n      var oldRowState = typeof state.rowState[rowId] !== 'undefined' ? state.rowState[rowId] : initialRowStateAccessor(rowsById[rowId]);\n      return _extends({}, state, {\n        rowState: _extends({}, state.rowState, (_extends2 = {}, _extends2[rowId] = functionalUpdate(value, oldRowState), _extends2))\n      });\n    }\n\n    if (action.type === actions.setCellState) {\n      var _oldRowState$cellStat, _rowsById$_rowId, _rowsById$_rowId$cell, _extends3, _extends4;\n\n      var _rowId = action.rowId,\n          columnId = action.columnId,\n          _value = action.value;\n\n      var _oldRowState = typeof state.rowState[_rowId] !== 'undefined' ? state.rowState[_rowId] : initialRowStateAccessor(rowsById[_rowId]);\n\n      var oldCellState = typeof (_oldRowState == null ? void 0 : (_oldRowState$cellStat = _oldRowState.cellState) == null ? void 0 : _oldRowState$cellStat[columnId]) !== 'undefined' ? _oldRowState.cellState[columnId] : initialCellStateAccessor((_rowsById$_rowId = rowsById[_rowId]) == null ? void 0 : (_rowsById$_rowId$cell = _rowsById$_rowId.cells) == null ? void 0 : _rowsById$_rowId$cell.find(function (cell) {\n        return cell.column.id === columnId;\n      }));\n      return _extends({}, state, {\n        rowState: _extends({}, state.rowState, (_extends4 = {}, _extends4[_rowId] = _extends({}, _oldRowState, {\n          cellState: _extends({}, _oldRowState.cellState || {}, (_extends3 = {}, _extends3[columnId] = functionalUpdate(_value, oldCellState), _extends3))\n        }), _extends4))\n      });\n    }\n  }\n\n  function useInstance$9(instance) {\n    var _instance$autoResetRo = instance.autoResetRowState,\n        autoResetRowState = _instance$autoResetRo === void 0 ? true : _instance$autoResetRo,\n        data = instance.data,\n        dispatch = instance.dispatch;\n    var setRowState = React.useCallback(function (rowId, value) {\n      return dispatch({\n        type: actions.setRowState,\n        rowId: rowId,\n        value: value\n      });\n    }, [dispatch]);\n    var setCellState = React.useCallback(function (rowId, columnId, value) {\n      return dispatch({\n        type: actions.setCellState,\n        rowId: rowId,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var getAutoResetRowState = useGetLatest(autoResetRowState);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetRowState()) {\n        dispatch({\n          type: actions.resetRowState\n        });\n      }\n    }, [data]);\n    Object.assign(instance, {\n      setRowState: setRowState,\n      setCellState: setCellState\n    });\n  }\n\n  function prepareRow$4(row, _ref) {\n    var instance = _ref.instance;\n    var _instance$initialRowS2 = instance.initialRowStateAccessor,\n        initialRowStateAccessor = _instance$initialRowS2 === void 0 ? defaultInitialRowStateAccessor : _instance$initialRowS2,\n        _instance$initialCell2 = instance.initialCellStateAccessor,\n        initialCellStateAccessor = _instance$initialCell2 === void 0 ? defaultInitialCellStateAccessor : _instance$initialCell2,\n        rowState = instance.state.rowState;\n\n    if (row) {\n      row.state = typeof rowState[row.id] !== 'undefined' ? rowState[row.id] : initialRowStateAccessor(row);\n\n      row.setState = function (updater) {\n        return instance.setRowState(row.id, updater);\n      };\n\n      row.cells.forEach(function (cell) {\n        if (!row.state.cellState) {\n          row.state.cellState = {};\n        }\n\n        cell.state = typeof row.state.cellState[cell.column.id] !== 'undefined' ? row.state.cellState[cell.column.id] : initialCellStateAccessor(cell);\n\n        cell.setState = function (updater) {\n          return instance.setCellState(row.id, cell.column.id, updater);\n        };\n      });\n    }\n  }\n\n  actions.resetColumnOrder = 'resetColumnOrder';\n  actions.setColumnOrder = 'setColumnOrder';\n  var useColumnOrder = function useColumnOrder(hooks) {\n    hooks.stateReducers.push(reducer$a);\n    hooks.visibleColumnsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.columnOrder]);\n    });\n    hooks.visibleColumns.push(visibleColumns$2);\n    hooks.useInstance.push(useInstance$a);\n  };\n  useColumnOrder.pluginName = 'useColumnOrder';\n\n  function reducer$a(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        columnOrder: []\n      }, state);\n    }\n\n    if (action.type === actions.resetColumnOrder) {\n      return _extends({}, state, {\n        columnOrder: instance.initialState.columnOrder || []\n      });\n    }\n\n    if (action.type === actions.setColumnOrder) {\n      return _extends({}, state, {\n        columnOrder: functionalUpdate(action.columnOrder, state.columnOrder)\n      });\n    }\n  }\n\n  function visibleColumns$2(columns, _ref2) {\n    var columnOrder = _ref2.instance.state.columnOrder;\n\n    // If there is no order, return the normal columns\n    if (!columnOrder || !columnOrder.length) {\n      return columns;\n    }\n\n    var columnOrderCopy = [].concat(columnOrder); // If there is an order, make a copy of the columns\n\n    var columnsCopy = [].concat(columns); // And make a new ordered array of the columns\n\n    var columnsInOrder = []; // Loop over the columns and place them in order into the new array\n\n    var _loop = function _loop() {\n      var targetColumnId = columnOrderCopy.shift();\n      var foundIndex = columnsCopy.findIndex(function (d) {\n        return d.id === targetColumnId;\n      });\n\n      if (foundIndex > -1) {\n        columnsInOrder.push(columnsCopy.splice(foundIndex, 1)[0]);\n      }\n    };\n\n    while (columnsCopy.length && columnOrderCopy.length) {\n      _loop();\n    } // If there are any columns left, add them to the end\n\n\n    return [].concat(columnsInOrder, columnsCopy);\n  }\n\n  function useInstance$a(instance) {\n    var dispatch = instance.dispatch;\n    instance.setColumnOrder = React.useCallback(function (columnOrder) {\n      return dispatch({\n        type: actions.setColumnOrder,\n        columnOrder: columnOrder\n      });\n    }, [dispatch]);\n  }\n\n  defaultColumn.canResize = true; // Actions\n\n  actions.columnStartResizing = 'columnStartResizing';\n  actions.columnResizing = 'columnResizing';\n  actions.columnDoneResizing = 'columnDoneResizing';\n  actions.resetResize = 'resetResize';\n  var useResizeColumns = function useResizeColumns(hooks) {\n    hooks.getResizerProps = [defaultGetResizerProps];\n    hooks.getHeaderProps.push({\n      style: {\n        position: 'relative'\n      }\n    });\n    hooks.stateReducers.push(reducer$b);\n    hooks.useInstance.push(useInstance$b);\n    hooks.useInstanceBeforeDimensions.push(useInstanceBeforeDimensions$1);\n  };\n\n  var defaultGetResizerProps = function defaultGetResizerProps(props, _ref) {\n    var instance = _ref.instance,\n        header = _ref.header;\n    var dispatch = instance.dispatch;\n\n    var onResizeStart = function onResizeStart(e, header) {\n      var isTouchEvent = false;\n\n      if (e.type === 'touchstart') {\n        // lets not respond to multiple touches (e.g. 2 or 3 fingers)\n        if (e.touches && e.touches.length > 1) {\n          return;\n        }\n\n        isTouchEvent = true;\n      }\n\n      var headersToResize = getLeafHeaders(header);\n      var headerIdWidths = headersToResize.map(function (d) {\n        return [d.id, d.totalWidth];\n      });\n      var clientX = isTouchEvent ? Math.round(e.touches[0].clientX) : e.clientX;\n\n      var dispatchMove = function dispatchMove(clientXPos) {\n        dispatch({\n          type: actions.columnResizing,\n          clientX: clientXPos\n        });\n      };\n\n      var dispatchEnd = function dispatchEnd() {\n        return dispatch({\n          type: actions.columnDoneResizing\n        });\n      };\n\n      var handlersAndEvents = {\n        mouse: {\n          moveEvent: 'mousemove',\n          moveHandler: function moveHandler(e) {\n            return dispatchMove(e.clientX);\n          },\n          upEvent: 'mouseup',\n          upHandler: function upHandler(e) {\n            document.removeEventListener('mousemove', handlersAndEvents.mouse.moveHandler);\n            document.removeEventListener('mouseup', handlersAndEvents.mouse.upHandler);\n            dispatchEnd();\n          }\n        },\n        touch: {\n          moveEvent: 'touchmove',\n          moveHandler: function moveHandler(e) {\n            if (e.cancelable) {\n              e.preventDefault();\n              e.stopPropagation();\n            }\n\n            dispatchMove(e.touches[0].clientX);\n            return false;\n          },\n          upEvent: 'touchend',\n          upHandler: function upHandler(e) {\n            document.removeEventListener(handlersAndEvents.touch.moveEvent, handlersAndEvents.touch.moveHandler);\n            document.removeEventListener(handlersAndEvents.touch.upEvent, handlersAndEvents.touch.moveHandler);\n            dispatchEnd();\n          }\n        }\n      };\n      var events = isTouchEvent ? handlersAndEvents.touch : handlersAndEvents.mouse;\n      var passiveIfSupported = passiveEventSupported() ? {\n        passive: false\n      } : false;\n      document.addEventListener(events.moveEvent, events.moveHandler, passiveIfSupported);\n      document.addEventListener(events.upEvent, events.upHandler, passiveIfSupported);\n      dispatch({\n        type: actions.columnStartResizing,\n        columnId: header.id,\n        columnWidth: header.totalWidth,\n        headerIdWidths: headerIdWidths,\n        clientX: clientX\n      });\n    };\n\n    return [props, {\n      onMouseDown: function onMouseDown(e) {\n        return e.persist() || onResizeStart(e, header);\n      },\n      onTouchStart: function onTouchStart(e) {\n        return e.persist() || onResizeStart(e, header);\n      },\n      style: {\n        cursor: 'col-resize'\n      },\n      draggable: false,\n      role: 'separator'\n    }];\n  };\n\n  useResizeColumns.pluginName = 'useResizeColumns';\n\n  function reducer$b(state, action) {\n    if (action.type === actions.init) {\n      return _extends({\n        columnResizing: {\n          columnWidths: {}\n        }\n      }, state);\n    }\n\n    if (action.type === actions.resetResize) {\n      return _extends({}, state, {\n        columnResizing: {\n          columnWidths: {}\n        }\n      });\n    }\n\n    if (action.type === actions.columnStartResizing) {\n      var clientX = action.clientX,\n          columnId = action.columnId,\n          columnWidth = action.columnWidth,\n          headerIdWidths = action.headerIdWidths;\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          startX: clientX,\n          headerIdWidths: headerIdWidths,\n          columnWidth: columnWidth,\n          isResizingColumn: columnId\n        })\n      });\n    }\n\n    if (action.type === actions.columnResizing) {\n      var _clientX = action.clientX;\n\n      var _state$columnResizing = state.columnResizing,\n          startX = _state$columnResizing.startX,\n          _columnWidth = _state$columnResizing.columnWidth,\n          _state$columnResizing2 = _state$columnResizing.headerIdWidths,\n          _headerIdWidths = _state$columnResizing2 === void 0 ? [] : _state$columnResizing2;\n\n      var deltaX = _clientX - startX;\n      var percentageDeltaX = deltaX / _columnWidth;\n      var newColumnWidths = {};\n\n      _headerIdWidths.forEach(function (_ref2) {\n        var headerId = _ref2[0],\n            headerWidth = _ref2[1];\n        newColumnWidths[headerId] = Math.max(headerWidth + headerWidth * percentageDeltaX, 0);\n      });\n\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          columnWidths: _extends({}, state.columnResizing.columnWidths, {}, newColumnWidths)\n        })\n      });\n    }\n\n    if (action.type === actions.columnDoneResizing) {\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          startX: null,\n          isResizingColumn: null\n        })\n      });\n    }\n  }\n\n  var useInstanceBeforeDimensions$1 = function useInstanceBeforeDimensions(instance) {\n    var flatHeaders = instance.flatHeaders,\n        disableResizing = instance.disableResizing,\n        getHooks = instance.getHooks,\n        columnResizing = instance.state.columnResizing;\n    var getInstance = useGetLatest(instance);\n    flatHeaders.forEach(function (header) {\n      var canResize = getFirstDefined(header.disableResizing === true ? false : undefined, disableResizing === true ? false : undefined, true);\n      header.canResize = canResize;\n      header.width = columnResizing.columnWidths[header.id] || header.originalWidth || header.width;\n      header.isResizing = columnResizing.isResizingColumn === header.id;\n\n      if (canResize) {\n        header.getResizerProps = makePropGetter(getHooks().getResizerProps, {\n          instance: getInstance(),\n          header: header\n        });\n      }\n    });\n  };\n\n  function useInstance$b(instance) {\n    var plugins = instance.plugins,\n        dispatch = instance.dispatch,\n        _instance$autoResetRe = instance.autoResetResize,\n        autoResetResize = _instance$autoResetRe === void 0 ? true : _instance$autoResetRe,\n        columns = instance.columns;\n    ensurePluginOrder(plugins, ['useAbsoluteLayout'], 'useResizeColumns');\n    var getAutoResetResize = useGetLatest(autoResetResize);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetResize()) {\n        dispatch({\n          type: actions.resetResize\n        });\n      }\n    }, [columns]);\n    var resetResizing = React.useCallback(function () {\n      return dispatch({\n        type: actions.resetResize\n      });\n    }, [dispatch]);\n    Object.assign(instance, {\n      resetResizing: resetResizing\n    });\n  }\n\n  function getLeafHeaders(header) {\n    var leafHeaders = [];\n\n    var recurseHeader = function recurseHeader(header) {\n      if (header.columns && header.columns.length) {\n        header.columns.map(recurseHeader);\n      }\n\n      leafHeaders.push(header);\n    };\n\n    recurseHeader(header);\n    return leafHeaders;\n  }\n\n  var cellStyles = {\n    position: 'absolute',\n    top: 0\n  };\n  var useAbsoluteLayout = function useAbsoluteLayout(hooks) {\n    hooks.getTableBodyProps.push(getRowStyles);\n    hooks.getRowProps.push(getRowStyles);\n    hooks.getHeaderGroupProps.push(getRowStyles);\n    hooks.getFooterGroupProps.push(getRowStyles);\n    hooks.getHeaderProps.push(function (props, _ref) {\n      var column = _ref.column;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: column.totalLeft + \"px\",\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getCellProps.push(function (props, _ref2) {\n      var cell = _ref2.cell;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: cell.column.totalLeft + \"px\",\n          width: cell.column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getFooterProps.push(function (props, _ref3) {\n      var column = _ref3.column;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: column.totalLeft + \"px\",\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n  };\n  useAbsoluteLayout.pluginName = 'useAbsoluteLayout';\n\n  var getRowStyles = function getRowStyles(props, _ref4) {\n    var instance = _ref4.instance;\n    return [props, {\n      style: {\n        position: 'relative',\n        width: instance.totalColumnsWidth + \"px\"\n      }\n    }];\n  };\n\n  var cellStyles$1 = {\n    display: 'inline-block',\n    boxSizing: 'border-box'\n  };\n\n  var getRowStyles$1 = function getRowStyles(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        display: 'flex',\n        width: instance.totalColumnsWidth + \"px\"\n      }\n    }];\n  };\n\n  var useBlockLayout = function useBlockLayout(hooks) {\n    hooks.getRowProps.push(getRowStyles$1);\n    hooks.getHeaderGroupProps.push(getRowStyles$1);\n    hooks.getFooterGroupProps.push(getRowStyles$1);\n    hooks.getHeaderProps.push(function (props, _ref2) {\n      var column = _ref2.column;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getCellProps.push(function (props, _ref3) {\n      var cell = _ref3.cell;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: cell.column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getFooterProps.push(function (props, _ref4) {\n      var column = _ref4.column;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n  };\n  useBlockLayout.pluginName = 'useBlockLayout';\n\n  function useFlexLayout(hooks) {\n    hooks.getTableProps.push(getTableProps);\n    hooks.getRowProps.push(getRowStyles$2);\n    hooks.getHeaderGroupProps.push(getRowStyles$2);\n    hooks.getFooterGroupProps.push(getRowStyles$2);\n    hooks.getHeaderProps.push(getHeaderProps);\n    hooks.getCellProps.push(getCellProps);\n    hooks.getFooterProps.push(getFooterProps);\n  }\n  useFlexLayout.pluginName = 'useFlexLayout';\n\n  var getTableProps = function getTableProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        minWidth: instance.totalColumnsMinWidth + \"px\"\n      }\n    }];\n  };\n\n  var getRowStyles$2 = function getRowStyles(props, _ref2) {\n    var instance = _ref2.instance;\n    return [props, {\n      style: {\n        display: 'flex',\n        flex: '1 0 auto',\n        minWidth: instance.totalColumnsMinWidth + \"px\"\n      }\n    }];\n  };\n\n  var getHeaderProps = function getHeaderProps(props, _ref3) {\n    var column = _ref3.column;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: column.totalFlexWidth ? column.totalFlexWidth + \" 0 auto\" : undefined,\n        minWidth: column.totalMinWidth + \"px\",\n        width: column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  var getCellProps = function getCellProps(props, _ref4) {\n    var cell = _ref4.cell;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: cell.column.totalFlexWidth + \" 0 auto\",\n        minWidth: cell.column.totalMinWidth + \"px\",\n        width: cell.column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  var getFooterProps = function getFooterProps(props, _ref5) {\n    var column = _ref5.column;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: column.totalFlexWidth ? column.totalFlexWidth + \" 0 auto\" : undefined,\n        minWidth: column.totalMinWidth + \"px\",\n        width: column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  function useGridLayout(hooks) {\n    hooks.stateReducers.push(reducer$c);\n    hooks.getTableProps.push(getTableProps$1);\n    hooks.getHeaderProps.push(getHeaderProps$1);\n  }\n  useGridLayout.pluginName = 'useGridLayout';\n\n  var getTableProps$1 = function getTableProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: instance.state.gridLayout.columnWidths.map(function (w) {\n          return w;\n        }).join(\" \")\n      }\n    }];\n  };\n\n  var getHeaderProps$1 = function getHeaderProps(props, _ref2) {\n    var column = _ref2.column;\n    return [props, {\n      id: \"header-cell-\" + column.id,\n      style: {\n        position: \"sticky\" //enables a scroll wrapper to be placed around the table and have sticky headers\n\n      }\n    }];\n  };\n\n  function reducer$c(state, action, previousState, instance) {\n    if (action.type === \"init\") {\n      return _extends({\n        gridLayout: {\n          columnWidths: instance.columns.map(function () {\n            return \"auto\";\n          })\n        }\n      }, state);\n    }\n\n    if (action.type === \"columnStartResizing\") {\n      var columnId = action.columnId;\n      var columnIndex = instance.visibleColumns.findIndex(function (col) {\n        return col.id === columnId;\n      });\n      var elWidth = getElementWidth(columnId);\n\n      if (elWidth !== undefined) {\n        return _extends({}, state, {\n          gridLayout: _extends({}, state.gridLayout, {\n            columnId: columnId,\n            columnIndex: columnIndex,\n            startingWidth: elWidth\n          })\n        });\n      } else {\n        return state;\n      }\n    }\n\n    if (action.type === \"columnResizing\") {\n      var _state$gridLayout = state.gridLayout,\n          _columnIndex = _state$gridLayout.columnIndex,\n          startingWidth = _state$gridLayout.startingWidth,\n          columnWidths = _state$gridLayout.columnWidths;\n      var change = state.columnResizing.startX - action.clientX;\n      var newWidth = startingWidth - change;\n      var columnWidthsCopy = [].concat(columnWidths);\n      columnWidthsCopy[_columnIndex] = newWidth + \"px\";\n      return _extends({}, state, {\n        gridLayout: _extends({}, state.gridLayout, {\n          columnWidths: columnWidthsCopy\n        })\n      });\n    }\n  }\n\n  function getElementWidth(columnId) {\n    var _document$getElementB;\n\n    var width = (_document$getElementB = document.getElementById(\"header-cell-\" + columnId)) == null ? void 0 : _document$getElementB.offsetWidth;\n\n    if (width !== undefined) {\n      return width;\n    }\n  }\n\n  exports._UNSTABLE_usePivotColumns = _UNSTABLE_usePivotColumns;\n  exports.actions = actions;\n  exports.defaultColumn = defaultColumn;\n  exports.defaultGroupByFn = defaultGroupByFn;\n  exports.defaultOrderByFn = defaultOrderByFn;\n  exports.defaultRenderer = defaultRenderer;\n  exports.emptyRenderer = emptyRenderer;\n  exports.ensurePluginOrder = ensurePluginOrder;\n  exports.flexRender = flexRender;\n  exports.functionalUpdate = functionalUpdate;\n  exports.loopHooks = loopHooks;\n  exports.makePropGetter = makePropGetter;\n  exports.makeRenderer = makeRenderer;\n  exports.reduceHooks = reduceHooks;\n  exports.safeUseLayoutEffect = safeUseLayoutEffect;\n  exports.useAbsoluteLayout = useAbsoluteLayout;\n  exports.useAsyncDebounce = useAsyncDebounce;\n  exports.useBlockLayout = useBlockLayout;\n  exports.useColumnOrder = useColumnOrder;\n  exports.useExpanded = useExpanded;\n  exports.useFilters = useFilters;\n  exports.useFlexLayout = useFlexLayout;\n  exports.useGetLatest = useGetLatest;\n  exports.useGlobalFilter = useGlobalFilter;\n  exports.useGridLayout = useGridLayout;\n  exports.useGroupBy = useGroupBy;\n  exports.useMountedLayoutEffect = useMountedLayoutEffect;\n  exports.usePagination = usePagination;\n  exports.useResizeColumns = useResizeColumns;\n  exports.useRowSelect = useRowSelect;\n  exports.useRowState = useRowState;\n  exports.useSortBy = useSortBy;\n  exports.useTable = useTable;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=react-table.development.js.map\n","if (process.env.NODE_ENV === 'production') {\n  module.exports = require('./dist/react-table.production.min.js')\n} else {\n  module.exports = require('./dist/react-table.development.js')\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ITEM_TYPES = exports.createUltimatePagination = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ultimatePagination = require('ultimate-pagination');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar renderItemComponentFunctionFactory = function renderItemComponentFunctionFactory(itemTypeToComponent, currentPage, onChange) {\n  var onItemClickFunctionFactory = function onItemClickFunctionFactory(_ref) {\n    var value = _ref.value,\n        isDisabled = _ref.isDisabled;\n\n    return function () {\n      if (!isDisabled && onChange && currentPage !== value) {\n        onChange(value);\n      }\n    };\n  };\n\n  return function (props) {\n    var ItemComponent = itemTypeToComponent[props.type];\n    var onItemClick = onItemClickFunctionFactory(props);\n    return _react2.default.createElement(ItemComponent, _extends({ onClick: onItemClick }, props));\n  };\n};\n\nvar createUltimatePagination = function createUltimatePagination(_ref2) {\n  var itemTypeToComponent = _ref2.itemTypeToComponent,\n      _ref2$WrapperComponen = _ref2.WrapperComponent,\n      WrapperComponent = _ref2$WrapperComponen === undefined ? 'div' : _ref2$WrapperComponen;\n\n  var UltimatePaginationComponent = function UltimatePaginationComponent(props) {\n    var currentPage = props.currentPage,\n        totalPages = props.totalPages,\n        boundaryPagesRange = props.boundaryPagesRange,\n        siblingPagesRange = props.siblingPagesRange,\n        hideEllipsis = props.hideEllipsis,\n        hidePreviousAndNextPageLinks = props.hidePreviousAndNextPageLinks,\n        hideFirstAndLastPageLinks = props.hideFirstAndLastPageLinks,\n        onChange = props.onChange,\n        disabled = props.disabled,\n        restProps = _objectWithoutProperties(props, ['currentPage', 'totalPages', 'boundaryPagesRange', 'siblingPagesRange', 'hideEllipsis', 'hidePreviousAndNextPageLinks', 'hideFirstAndLastPageLinks', 'onChange', 'disabled']);\n\n    var paginationModel = (0, _ultimatePagination.getPaginationModel)({\n      currentPage: currentPage,\n      totalPages: totalPages,\n      boundaryPagesRange: boundaryPagesRange,\n      siblingPagesRange: siblingPagesRange,\n      hideEllipsis: hideEllipsis,\n      hidePreviousAndNextPageLinks: hidePreviousAndNextPageLinks,\n      hideFirstAndLastPageLinks: hideFirstAndLastPageLinks\n    });\n    var renderItemComponent = renderItemComponentFunctionFactory(itemTypeToComponent, currentPage, onChange);\n    return _react2.default.createElement(\n      WrapperComponent,\n      restProps,\n      paginationModel.map(function (itemModel) {\n        return renderItemComponent(_extends({}, itemModel, {\n          isDisabled: !!disabled\n        }));\n      })\n    );\n  };\n\n  UltimatePaginationComponent.propTypes = {\n    currentPage: _propTypes2.default.number.isRequired,\n    totalPages: _propTypes2.default.number.isRequired,\n    boundaryPagesRange: _propTypes2.default.number,\n    siblingPagesRange: _propTypes2.default.number,\n    hideEllipsis: _propTypes2.default.bool,\n    hidePreviousAndNextPageLinks: _propTypes2.default.bool,\n    hideFirstAndLastPageLinks: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func,\n    disabled: _propTypes2.default.bool\n  };\n\n  return UltimatePaginationComponent;\n};\n\nexports.createUltimatePagination = createUltimatePagination;\nexports.ITEM_TYPES = _ultimatePagination.ITEM_TYPES;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.autoprefix = undefined;\n\nvar _forOwn2 = require('lodash/forOwn');\n\nvar _forOwn3 = _interopRequireDefault(_forOwn2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar transforms = {\n  borderRadius: function borderRadius(value) {\n    return {\n      msBorderRadius: value,\n      MozBorderRadius: value,\n      OBorderRadius: value,\n      WebkitBorderRadius: value,\n      borderRadius: value\n    };\n  },\n  boxShadow: function boxShadow(value) {\n    return {\n      msBoxShadow: value,\n      MozBoxShadow: value,\n      OBoxShadow: value,\n      WebkitBoxShadow: value,\n      boxShadow: value\n    };\n  },\n  userSelect: function userSelect(value) {\n    return {\n      WebkitTouchCallout: value,\n      KhtmlUserSelect: value,\n      MozUserSelect: value,\n      msUserSelect: value,\n      WebkitUserSelect: value,\n      userSelect: value\n    };\n  },\n\n  flex: function flex(value) {\n    return {\n      WebkitBoxFlex: value,\n      MozBoxFlex: value,\n      WebkitFlex: value,\n      msFlex: value,\n      flex: value\n    };\n  },\n  flexBasis: function flexBasis(value) {\n    return {\n      WebkitFlexBasis: value,\n      flexBasis: value\n    };\n  },\n  justifyContent: function justifyContent(value) {\n    return {\n      WebkitJustifyContent: value,\n      justifyContent: value\n    };\n  },\n\n  transition: function transition(value) {\n    return {\n      msTransition: value,\n      MozTransition: value,\n      OTransition: value,\n      WebkitTransition: value,\n      transition: value\n    };\n  },\n\n  transform: function transform(value) {\n    return {\n      msTransform: value,\n      MozTransform: value,\n      OTransform: value,\n      WebkitTransform: value,\n      transform: value\n    };\n  },\n  absolute: function absolute(value) {\n    var direction = value && value.split(' ');\n    return {\n      position: 'absolute',\n      top: direction && direction[0],\n      right: direction && direction[1],\n      bottom: direction && direction[2],\n      left: direction && direction[3]\n    };\n  },\n  extend: function extend(name, otherElementStyles) {\n    var otherStyle = otherElementStyles[name];\n    if (otherStyle) {\n      return otherStyle;\n    }\n    return {\n      'extend': name\n    };\n  }\n};\n\nvar autoprefix = exports.autoprefix = function autoprefix(elements) {\n  var prefixed = {};\n  (0, _forOwn3.default)(elements, function (styles, element) {\n    var expanded = {};\n    (0, _forOwn3.default)(styles, function (value, key) {\n      var transform = transforms[key];\n      if (transform) {\n        expanded = _extends({}, expanded, transform(value));\n      } else {\n        expanded[key] = value;\n      }\n    });\n    prefixed[element] = expanded;\n  });\n  return prefixed;\n};\n\nexports.default = autoprefix;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.active = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar active = exports.active = function active(Component) {\n  var Span = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'span';\n\n  return function (_React$Component) {\n    _inherits(Active, _React$Component);\n\n    function Active() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Active);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Active.__proto__ || Object.getPrototypeOf(Active)).call.apply(_ref, [this].concat(args))), _this), _this.state = { active: false }, _this.handleMouseDown = function () {\n        return _this.setState({ active: true });\n      }, _this.handleMouseUp = function () {\n        return _this.setState({ active: false });\n      }, _this.render = function () {\n        return _react2.default.createElement(\n          Span,\n          { onMouseDown: _this.handleMouseDown, onMouseUp: _this.handleMouseUp },\n          _react2.default.createElement(Component, _extends({}, _this.props, _this.state))\n        );\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    return Active;\n  }(_react2.default.Component);\n};\n\nexports.default = active;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hover = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar hover = exports.hover = function hover(Component) {\n  var Span = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'span';\n\n  return function (_React$Component) {\n    _inherits(Hover, _React$Component);\n\n    function Hover() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Hover);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Hover.__proto__ || Object.getPrototypeOf(Hover)).call.apply(_ref, [this].concat(args))), _this), _this.state = { hover: false }, _this.handleMouseOver = function () {\n        return _this.setState({ hover: true });\n      }, _this.handleMouseOut = function () {\n        return _this.setState({ hover: false });\n      }, _this.render = function () {\n        return _react2.default.createElement(\n          Span,\n          { onMouseOver: _this.handleMouseOver, onMouseOut: _this.handleMouseOut },\n          _react2.default.createElement(Component, _extends({}, _this.props, _this.state))\n        );\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    return Hover;\n  }(_react2.default.Component);\n};\n\nexports.default = hover;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.flattenNames = undefined;\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _forOwn2 = require('lodash/forOwn');\n\nvar _forOwn3 = _interopRequireDefault(_forOwn2);\n\nvar _isPlainObject2 = require('lodash/isPlainObject');\n\nvar _isPlainObject3 = _interopRequireDefault(_isPlainObject2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar flattenNames = exports.flattenNames = function flattenNames() {\n  var things = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n  var names = [];\n\n  (0, _map3.default)(things, function (thing) {\n    if (Array.isArray(thing)) {\n      flattenNames(thing).map(function (name) {\n        return names.push(name);\n      });\n    } else if ((0, _isPlainObject3.default)(thing)) {\n      (0, _forOwn3.default)(thing, function (value, key) {\n        value === true && names.push(key);\n        names.push(key + '-' + value);\n      });\n    } else if ((0, _isString3.default)(thing)) {\n      names.push(thing);\n    }\n  });\n\n  return names;\n};\n\nexports.default = flattenNames;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReactCSS = exports.loop = exports.handleActive = exports.handleHover = exports.hover = undefined;\n\nvar _flattenNames = require('./flattenNames');\n\nvar _flattenNames2 = _interopRequireDefault(_flattenNames);\n\nvar _mergeClasses = require('./mergeClasses');\n\nvar _mergeClasses2 = _interopRequireDefault(_mergeClasses);\n\nvar _autoprefix = require('./autoprefix');\n\nvar _autoprefix2 = _interopRequireDefault(_autoprefix);\n\nvar _hover2 = require('./components/hover');\n\nvar _hover3 = _interopRequireDefault(_hover2);\n\nvar _active = require('./components/active');\n\nvar _active2 = _interopRequireDefault(_active);\n\nvar _loop2 = require('./loop');\n\nvar _loop3 = _interopRequireDefault(_loop2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.hover = _hover3.default;\nexports.handleHover = _hover3.default;\nexports.handleActive = _active2.default;\nexports.loop = _loop3.default;\nvar ReactCSS = exports.ReactCSS = function ReactCSS(classes) {\n  for (var _len = arguments.length, activations = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    activations[_key - 1] = arguments[_key];\n  }\n\n  var activeNames = (0, _flattenNames2.default)(activations);\n  var merged = (0, _mergeClasses2.default)(classes, activeNames);\n  return (0, _autoprefix2.default)(merged);\n};\n\nexports.default = ReactCSS;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar loopable = function loopable(i, length) {\n  var props = {};\n  var setProp = function setProp(name) {\n    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    props[name] = value;\n  };\n\n  i === 0 && setProp('first-child');\n  i === length - 1 && setProp('last-child');\n  (i === 0 || i % 2 === 0) && setProp('even');\n  Math.abs(i % 2) === 1 && setProp('odd');\n  setProp('nth-child', i);\n\n  return props;\n};\n\nexports.default = loopable;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mergeClasses = undefined;\n\nvar _forOwn2 = require('lodash/forOwn');\n\nvar _forOwn3 = _interopRequireDefault(_forOwn2);\n\nvar _cloneDeep2 = require('lodash/cloneDeep');\n\nvar _cloneDeep3 = _interopRequireDefault(_cloneDeep2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mergeClasses = exports.mergeClasses = function mergeClasses(classes) {\n  var activeNames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  var styles = classes.default && (0, _cloneDeep3.default)(classes.default) || {};\n  activeNames.map(function (name) {\n    var toMerge = classes[name];\n    if (toMerge) {\n      (0, _forOwn3.default)(toMerge, function (value, key) {\n        if (!styles[key]) {\n          styles[key] = {};\n        }\n\n        styles[key] = _extends({}, styles[key], toMerge[key]);\n      });\n    }\n\n    return name;\n  });\n  return styles;\n};\n\nexports.default = mergeClasses;","\"use strict\";\nexports.ITEM_TYPES = {\n    PAGE: 'PAGE',\n    ELLIPSIS: 'ELLIPSIS',\n    FIRST_PAGE_LINK: 'FIRST_PAGE_LINK',\n    PREVIOUS_PAGE_LINK: 'PREVIOUS_PAGE_LINK',\n    NEXT_PAGE_LINK: 'NEXT_PAGE_LINK',\n    LAST_PAGE_LINK: 'LAST_PAGE_LINK'\n};\nexports.ITEM_KEYS = {\n    FIRST_ELLIPSIS: -1,\n    SECOND_ELLIPSIS: -2,\n    FIRST_PAGE_LINK: -3,\n    PREVIOUS_PAGE_LINK: -4,\n    NEXT_PAGE_LINK: -5,\n    LAST_PAGE_LINK: -6\n};\n//# sourceMappingURL=ultimate-pagination-constants.js.map","\"use strict\";\nvar ultimate_pagination_constants_1 = require(\"./ultimate-pagination-constants\");\nexports.createFirstEllipsis = function (pageNumber) {\n    return {\n        type: ultimate_pagination_constants_1.ITEM_TYPES.ELLIPSIS,\n        key: ultimate_pagination_constants_1.ITEM_KEYS.FIRST_ELLIPSIS,\n        value: pageNumber,\n        isActive: false\n    };\n};\nexports.createSecondEllipsis = function (pageNumber) {\n    return {\n        type: ultimate_pagination_constants_1.ITEM_TYPES.ELLIPSIS,\n        key: ultimate_pagination_constants_1.ITEM_KEYS.SECOND_ELLIPSIS,\n        value: pageNumber,\n        isActive: false\n    };\n};\nexports.createFirstPageLink = function (options) {\n    var currentPage = options.currentPage;\n    return {\n        type: ultimate_pagination_constants_1.ITEM_TYPES.FIRST_PAGE_LINK,\n        key: ultimate_pagination_constants_1.ITEM_KEYS.FIRST_PAGE_LINK,\n        value: 1,\n        isActive: currentPage === 1\n    };\n};\nexports.createPreviousPageLink = function (options) {\n    var currentPage = options.currentPage;\n    return {\n        type: ultimate_pagination_constants_1.ITEM_TYPES.PREVIOUS_PAGE_LINK,\n        key: ultimate_pagination_constants_1.ITEM_KEYS.PREVIOUS_PAGE_LINK,\n        value: Math.max(1, currentPage - 1),\n        isActive: currentPage === 1\n    };\n};\nexports.createNextPageLink = function (options) {\n    var currentPage = options.currentPage, totalPages = options.totalPages;\n    return {\n        type: ultimate_pagination_constants_1.ITEM_TYPES.NEXT_PAGE_LINK,\n        key: ultimate_pagination_constants_1.ITEM_KEYS.NEXT_PAGE_LINK,\n        value: Math.min(totalPages, currentPage + 1),\n        isActive: currentPage === totalPages\n    };\n};\nexports.createLastPageLink = function (options) {\n    var currentPage = options.currentPage, totalPages = options.totalPages;\n    return {\n        type: ultimate_pagination_constants_1.ITEM_TYPES.LAST_PAGE_LINK,\n        key: ultimate_pagination_constants_1.ITEM_KEYS.LAST_PAGE_LINK,\n        value: totalPages,\n        isActive: currentPage === totalPages\n    };\n};\nexports.createPageFunctionFactory = function (options) {\n    var currentPage = options.currentPage;\n    return function (pageNumber) {\n        return {\n            type: ultimate_pagination_constants_1.ITEM_TYPES.PAGE,\n            key: pageNumber,\n            value: pageNumber,\n            isActive: pageNumber === currentPage\n        };\n    };\n};\n//# sourceMappingURL=ultimate-pagination-item-factories.js.map","\"use strict\";\nfunction createRange(start, end) {\n    var range = [];\n    for (var i = start; i <= end; i++) {\n        range.push(i);\n    }\n    return range;\n}\nexports.createRange = createRange;\n//# sourceMappingURL=ultimate-pagination-utils.js.map","\"use strict\";\nvar ultimate_pagination_utils_1 = require(\"./ultimate-pagination-utils\");\nvar ultimate_pagination_item_factories_1 = require(\"./ultimate-pagination-item-factories\");\nfunction getPaginationModel(options) {\n    if (options == null) {\n        throw new Error('getPaginationModel(): options object should be a passed');\n    }\n    var totalPages = Number(options.totalPages);\n    if (isNaN(totalPages)) {\n        throw new Error('getPaginationModel(): totalPages should be a number');\n    }\n    if (totalPages < 0) {\n        throw new Error('getPaginationModel(): totalPages shouldn\\'t be a negative number');\n    }\n    var currentPage = Number(options.currentPage);\n    if (isNaN(currentPage)) {\n        throw new Error('getPaginationModel(): currentPage should be a number');\n    }\n    if (currentPage < 0) {\n        throw new Error('getPaginationModel(): currentPage shouldn\\'t be a negative number');\n    }\n    if (currentPage > totalPages) {\n        throw new Error('getPaginationModel(): currentPage shouldn\\'t be greater than totalPages');\n    }\n    var boundaryPagesRange = (options.boundaryPagesRange == null ? 1 : Number(options.boundaryPagesRange));\n    if (isNaN(boundaryPagesRange)) {\n        throw new Error('getPaginationModel(): boundaryPagesRange should be a number');\n    }\n    if (boundaryPagesRange < 0) {\n        throw new Error('getPaginationModel(): boundaryPagesRange shouldn\\'t be a negative number');\n    }\n    var siblingPagesRange = (options.siblingPagesRange == null ? 1 : Number(options.siblingPagesRange));\n    if (isNaN(siblingPagesRange)) {\n        throw new Error('getPaginationModel(): siblingPagesRange should be a number');\n    }\n    if (siblingPagesRange < 0) {\n        throw new Error('getPaginationModel(): siblingPagesRange shouldn\\'t be a negative number');\n    }\n    var hidePreviousAndNextPageLinks = Boolean(options.hidePreviousAndNextPageLinks);\n    var hideFirstAndLastPageLinks = Boolean(options.hideFirstAndLastPageLinks);\n    var hideEllipsis = Boolean(options.hideEllipsis);\n    var ellipsisSize = (hideEllipsis ? 0 : 1);\n    var paginationModel = [];\n    var createPage = ultimate_pagination_item_factories_1.createPageFunctionFactory(options);\n    if (!hideFirstAndLastPageLinks) {\n        paginationModel.push(ultimate_pagination_item_factories_1.createFirstPageLink(options));\n    }\n    if (!hidePreviousAndNextPageLinks) {\n        paginationModel.push(ultimate_pagination_item_factories_1.createPreviousPageLink(options));\n    }\n    // Simplify generation of pages if number of available items is equal or greater than total pages to show\n    if (1 + 2 * ellipsisSize + 2 * siblingPagesRange + 2 * boundaryPagesRange >= totalPages) {\n        var allPages = ultimate_pagination_utils_1.createRange(1, totalPages).map(createPage);\n        paginationModel.push.apply(paginationModel, allPages);\n    }\n    else {\n        // Calculate group of first pages\n        var firstPagesStart = 1;\n        var firstPagesEnd = boundaryPagesRange;\n        var firstPages = ultimate_pagination_utils_1.createRange(firstPagesStart, firstPagesEnd).map(createPage);\n        // Calculate group of last pages\n        var lastPagesStart = totalPages + 1 - boundaryPagesRange;\n        var lastPagesEnd = totalPages;\n        var lastPages = ultimate_pagination_utils_1.createRange(lastPagesStart, lastPagesEnd).map(createPage);\n        // Calculate group of main pages\n        var mainPagesStart = Math.min(Math.max(currentPage - siblingPagesRange, firstPagesEnd + ellipsisSize + 1), lastPagesStart - ellipsisSize - 2 * siblingPagesRange - 1);\n        var mainPagesEnd = mainPagesStart + 2 * siblingPagesRange;\n        var mainPages = ultimate_pagination_utils_1.createRange(mainPagesStart, mainPagesEnd).map(createPage);\n        // Add group of first pages\n        paginationModel.push.apply(paginationModel, firstPages);\n        if (!hideEllipsis) {\n            // Calculate and add ellipsis before group of main pages\n            var firstEllipsisPageNumber = mainPagesStart - 1;\n            var showPageInsteadOfFirstEllipsis = (firstEllipsisPageNumber === firstPagesEnd + 1);\n            var createFirstEllipsisOrPage = showPageInsteadOfFirstEllipsis ? createPage : ultimate_pagination_item_factories_1.createFirstEllipsis;\n            var firstEllipsis = createFirstEllipsisOrPage(firstEllipsisPageNumber);\n            paginationModel.push(firstEllipsis);\n        }\n        // Add group of main pages\n        paginationModel.push.apply(paginationModel, mainPages);\n        if (!hideEllipsis) {\n            // Calculate and add ellipsis after group of main pages\n            var secondEllipsisPageNumber = mainPagesEnd + 1;\n            var showPageInsteadOfSecondEllipsis = (secondEllipsisPageNumber === lastPagesStart - 1);\n            var createSecondEllipsisOrPage = showPageInsteadOfSecondEllipsis ? createPage : ultimate_pagination_item_factories_1.createSecondEllipsis;\n            var secondEllipsis = createSecondEllipsisOrPage(secondEllipsisPageNumber);\n            paginationModel.push(secondEllipsis);\n        }\n        // Add group of last pages\n        paginationModel.push.apply(paginationModel, lastPages);\n    }\n    if (!hidePreviousAndNextPageLinks) {\n        paginationModel.push(ultimate_pagination_item_factories_1.createNextPageLink(options));\n    }\n    if (!hideFirstAndLastPageLinks) {\n        paginationModel.push(ultimate_pagination_item_factories_1.createLastPageLink(options));\n    }\n    return paginationModel;\n}\nexports.getPaginationModel = getPaginationModel;\nvar ultimate_pagination_constants_1 = require(\"./ultimate-pagination-constants\");\nexports.ITEM_TYPES = ultimate_pagination_constants_1.ITEM_TYPES;\nexports.ITEM_KEYS = ultimate_pagination_constants_1.ITEM_KEYS;\n//# sourceMappingURL=ultimate-pagination.js.map","/*!\n * URI.js - Mutating URLs\n * IPv6 Support\n *\n * Version: 1.19.6\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.IPv6 = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  /*\n  var _in = \"fe80:0000:0000:0000:0204:61ff:fe9d:f156\";\n  var _out = IPv6.best(_in);\n  var _expected = \"fe80::204:61ff:fe9d:f156\";\n\n  console.log(_in, _out, _expected, _out === _expected);\n  */\n\n  // save current IPv6 variable, if any\n  var _IPv6 = root && root.IPv6;\n\n  function bestPresentation(address) {\n    // based on:\n    // Javascript to test an IPv6 address for proper format, and to\n    // present the \"best text representation\" according to IETF Draft RFC at\n    // http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04\n    // 8 Feb 2010 Rich Brown, Dartware, LLC\n    // Please feel free to use this code as long as you provide a link to\n    // http://www.intermapper.com\n    // http://intermapper.com/support/tools/IPV6-Validator.aspx\n    // http://download.dartware.com/thirdparty/ipv6validator.js\n\n    var _address = address.toLowerCase();\n    var segments = _address.split(':');\n    var length = segments.length;\n    var total = 8;\n\n    // trim colons (:: or ::a:b:c… or …a:b:c::)\n    if (segments[0] === '' && segments[1] === '' && segments[2] === '') {\n      // must have been ::\n      // remove first two items\n      segments.shift();\n      segments.shift();\n    } else if (segments[0] === '' && segments[1] === '') {\n      // must have been ::xxxx\n      // remove the first item\n      segments.shift();\n    } else if (segments[length - 1] === '' && segments[length - 2] === '') {\n      // must have been xxxx::\n      segments.pop();\n    }\n\n    length = segments.length;\n\n    // adjust total segments for IPv4 trailer\n    if (segments[length - 1].indexOf('.') !== -1) {\n      // found a \".\" which means IPv4\n      total = 7;\n    }\n\n    // fill empty segments them with \"0000\"\n    var pos;\n    for (pos = 0; pos < length; pos++) {\n      if (segments[pos] === '') {\n        break;\n      }\n    }\n\n    if (pos < total) {\n      segments.splice(pos, 1, '0000');\n      while (segments.length < total) {\n        segments.splice(pos, 0, '0000');\n      }\n    }\n\n    // strip leading zeros\n    var _segments;\n    for (var i = 0; i < total; i++) {\n      _segments = segments[i].split('');\n      for (var j = 0; j < 3 ; j++) {\n        if (_segments[0] === '0' && _segments.length > 1) {\n          _segments.splice(0,1);\n        } else {\n          break;\n        }\n      }\n\n      segments[i] = _segments.join('');\n    }\n\n    // find longest sequence of zeroes and coalesce them into one segment\n    var best = -1;\n    var _best = 0;\n    var _current = 0;\n    var current = -1;\n    var inzeroes = false;\n    // i; already declared\n\n    for (i = 0; i < total; i++) {\n      if (inzeroes) {\n        if (segments[i] === '0') {\n          _current += 1;\n        } else {\n          inzeroes = false;\n          if (_current > _best) {\n            best = current;\n            _best = _current;\n          }\n        }\n      } else {\n        if (segments[i] === '0') {\n          inzeroes = true;\n          current = i;\n          _current = 1;\n        }\n      }\n    }\n\n    if (_current > _best) {\n      best = current;\n      _best = _current;\n    }\n\n    if (_best > 1) {\n      segments.splice(best, _best, '');\n    }\n\n    length = segments.length;\n\n    // assemble remaining segments\n    var result = '';\n    if (segments[0] === '')  {\n      result = ':';\n    }\n\n    for (i = 0; i < length; i++) {\n      result += segments[i];\n      if (i === length - 1) {\n        break;\n      }\n\n      result += ':';\n    }\n\n    if (segments[length - 1] === '') {\n      result += ':';\n    }\n\n    return result;\n  }\n\n  function noConflict() {\n    /*jshint validthis: true */\n    if (root.IPv6 === this) {\n      root.IPv6 = _IPv6;\n    }\n\n    return this;\n  }\n\n  return {\n    best: bestPresentation,\n    noConflict: noConflict\n  };\n}));\n","/*!\n * URI.js - Mutating URLs\n * Second Level Domain (SLD) Support\n *\n * Version: 1.19.6\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.SecondLevelDomains = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  // save current SecondLevelDomains variable, if any\n  var _SecondLevelDomains = root && root.SecondLevelDomains;\n\n  var SLD = {\n    // list of known Second Level Domains\n    // converted list of SLDs from https://github.com/gavingmiller/second-level-domains\n    // ----\n    // publicsuffix.org is more current and actually used by a couple of browsers internally.\n    // downside is it also contains domains like \"dyndns.org\" - which is fine for the security\n    // issues browser have to deal with (SOP for cookies, etc) - but is way overboard for URI.js\n    // ----\n    list: {\n      'ac':' com gov mil net org ',\n      'ae':' ac co gov mil name net org pro sch ',\n      'af':' com edu gov net org ',\n      'al':' com edu gov mil net org ',\n      'ao':' co ed gv it og pb ',\n      'ar':' com edu gob gov int mil net org tur ',\n      'at':' ac co gv or ',\n      'au':' asn com csiro edu gov id net org ',\n      'ba':' co com edu gov mil net org rs unbi unmo unsa untz unze ',\n      'bb':' biz co com edu gov info net org store tv ',\n      'bh':' biz cc com edu gov info net org ',\n      'bn':' com edu gov net org ',\n      'bo':' com edu gob gov int mil net org tv ',\n      'br':' adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ',\n      'bs':' com edu gov net org ',\n      'bz':' du et om ov rg ',\n      'ca':' ab bc mb nb nf nl ns nt nu on pe qc sk yk ',\n      'ck':' biz co edu gen gov info net org ',\n      'cn':' ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ',\n      'co':' com edu gov mil net nom org ',\n      'cr':' ac c co ed fi go or sa ',\n      'cy':' ac biz com ekloges gov ltd name net org parliament press pro tm ',\n      'do':' art com edu gob gov mil net org sld web ',\n      'dz':' art asso com edu gov net org pol ',\n      'ec':' com edu fin gov info med mil net org pro ',\n      'eg':' com edu eun gov mil name net org sci ',\n      'er':' com edu gov ind mil net org rochest w ',\n      'es':' com edu gob nom org ',\n      'et':' biz com edu gov info name net org ',\n      'fj':' ac biz com info mil name net org pro ',\n      'fk':' ac co gov net nom org ',\n      'fr':' asso com f gouv nom prd presse tm ',\n      'gg':' co net org ',\n      'gh':' com edu gov mil org ',\n      'gn':' ac com gov net org ',\n      'gr':' com edu gov mil net org ',\n      'gt':' com edu gob ind mil net org ',\n      'gu':' com edu gov net org ',\n      'hk':' com edu gov idv net org ',\n      'hu':' 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ',\n      'id':' ac co go mil net or sch web ',\n      'il':' ac co gov idf k12 muni net org ',\n      'in':' ac co edu ernet firm gen gov i ind mil net nic org res ',\n      'iq':' com edu gov i mil net org ',\n      'ir':' ac co dnssec gov i id net org sch ',\n      'it':' edu gov ',\n      'je':' co net org ',\n      'jo':' com edu gov mil name net org sch ',\n      'jp':' ac ad co ed go gr lg ne or ',\n      'ke':' ac co go info me mobi ne or sc ',\n      'kh':' com edu gov mil net org per ',\n      'ki':' biz com de edu gov info mob net org tel ',\n      'km':' asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ',\n      'kn':' edu gov net org ',\n      'kr':' ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ',\n      'kw':' com edu gov net org ',\n      'ky':' com edu gov net org ',\n      'kz':' com edu gov mil net org ',\n      'lb':' com edu gov net org ',\n      'lk':' assn com edu gov grp hotel int ltd net ngo org sch soc web ',\n      'lr':' com edu gov net org ',\n      'lv':' asn com conf edu gov id mil net org ',\n      'ly':' com edu gov id med net org plc sch ',\n      'ma':' ac co gov m net org press ',\n      'mc':' asso tm ',\n      'me':' ac co edu gov its net org priv ',\n      'mg':' com edu gov mil nom org prd tm ',\n      'mk':' com edu gov inf name net org pro ',\n      'ml':' com edu gov net org presse ',\n      'mn':' edu gov org ',\n      'mo':' com edu gov net org ',\n      'mt':' com edu gov net org ',\n      'mv':' aero biz com coop edu gov info int mil museum name net org pro ',\n      'mw':' ac co com coop edu gov int museum net org ',\n      'mx':' com edu gob net org ',\n      'my':' com edu gov mil name net org sch ',\n      'nf':' arts com firm info net other per rec store web ',\n      'ng':' biz com edu gov mil mobi name net org sch ',\n      'ni':' ac co com edu gob mil net nom org ',\n      'np':' com edu gov mil net org ',\n      'nr':' biz com edu gov info net org ',\n      'om':' ac biz co com edu gov med mil museum net org pro sch ',\n      'pe':' com edu gob mil net nom org sld ',\n      'ph':' com edu gov i mil net ngo org ',\n      'pk':' biz com edu fam gob gok gon gop gos gov net org web ',\n      'pl':' art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ',\n      'pr':' ac biz com edu est gov info isla name net org pro prof ',\n      'ps':' com edu gov net org plo sec ',\n      'pw':' belau co ed go ne or ',\n      'ro':' arts com firm info nom nt org rec store tm www ',\n      'rs':' ac co edu gov in org ',\n      'sb':' com edu gov net org ',\n      'sc':' com edu gov net org ',\n      'sh':' co com edu gov net nom org ',\n      'sl':' com edu gov net org ',\n      'st':' co com consulado edu embaixada gov mil net org principe saotome store ',\n      'sv':' com edu gob org red ',\n      'sz':' ac co org ',\n      'tr':' av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ',\n      'tt':' aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ',\n      'tw':' club com ebiz edu game gov idv mil net org ',\n      'mu':' ac co com gov net or org ',\n      'mz':' ac co edu gov org ',\n      'na':' co com ',\n      'nz':' ac co cri geek gen govt health iwi maori mil net org parliament school ',\n      'pa':' abo ac com edu gob ing med net nom org sld ',\n      'pt':' com edu gov int net nome org publ ',\n      'py':' com edu gov mil net org ',\n      'qa':' com edu gov mil net org ',\n      're':' asso com nom ',\n      'ru':' ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ',\n      'rw':' ac co com edu gouv gov int mil net ',\n      'sa':' com edu gov med net org pub sch ',\n      'sd':' com edu gov info med net org tv ',\n      'se':' a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ',\n      'sg':' com edu gov idn net org per ',\n      'sn':' art com edu gouv org perso univ ',\n      'sy':' com edu gov mil net news org ',\n      'th':' ac co go in mi net or ',\n      'tj':' ac biz co com edu go gov info int mil name net nic org test web ',\n      'tn':' agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ',\n      'tz':' ac co go ne or ',\n      'ua':' biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ',\n      'ug':' ac co go ne or org sc ',\n      'uk':' ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ',\n      'us':' dni fed isa kids nsn ',\n      'uy':' com edu gub mil net org ',\n      've':' co com edu gob info mil net org web ',\n      'vi':' co com k12 net org ',\n      'vn':' ac biz com edu gov health info int name net org pro ',\n      'ye':' co com gov ltd me net org plc ',\n      'yu':' ac co edu gov org ',\n      'za':' ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ',\n      'zm':' ac co com edu gov net org sch ',\n      // https://en.wikipedia.org/wiki/CentralNic#Second-level_domains\n      'com': 'ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ',\n      'net': 'gb jp se uk ',\n      'org': 'ae',\n      'de': 'com '\n    },\n    // gorhill 2013-10-25: Using indexOf() instead Regexp(). Significant boost\n    // in both performance and memory footprint. No initialization required.\n    // http://jsperf.com/uri-js-sld-regex-vs-binary-search/4\n    // Following methods use lastIndexOf() rather than array.split() in order\n    // to avoid any memory allocations.\n    has: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') >= 0;\n    },\n    is: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset >= 0) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(0, tldOffset) + ' ') >= 0;\n    },\n    get: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return null;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return null;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return null;\n      }\n      if (sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') < 0) {\n        return null;\n      }\n      return domain.slice(sldOffset+1);\n    },\n    noConflict: function(){\n      if (root.SecondLevelDomains === this) {\n        root.SecondLevelDomains = _SecondLevelDomains;\n      }\n      return this;\n    }\n  };\n\n  return SLD;\n}));\n","/*!\n * URI.js - Mutating URLs\n *\n * Version: 1.19.6\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory(require('./punycode'), require('./IPv6'), require('./SecondLevelDomains'));\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['./punycode', './IPv6', './SecondLevelDomains'], factory);\n  } else {\n    // Browser globals (root is window)\n    root.URI = factory(root.punycode, root.IPv6, root.SecondLevelDomains, root);\n  }\n}(this, function (punycode, IPv6, SLD, root) {\n  'use strict';\n  /*global location, escape, unescape */\n  // FIXME: v2.0.0 renamce non-camelCase properties to uppercase\n  /*jshint camelcase: false */\n\n  // save current URI variable, if any\n  var _URI = root && root.URI;\n\n  function URI(url, base) {\n    var _urlSupplied = arguments.length >= 1;\n    var _baseSupplied = arguments.length >= 2;\n\n    // Allow instantiation without the 'new' keyword\n    if (!(this instanceof URI)) {\n      if (_urlSupplied) {\n        if (_baseSupplied) {\n          return new URI(url, base);\n        }\n\n        return new URI(url);\n      }\n\n      return new URI();\n    }\n\n    if (url === undefined) {\n      if (_urlSupplied) {\n        throw new TypeError('undefined is not a valid argument for URI');\n      }\n\n      if (typeof location !== 'undefined') {\n        url = location.href + '';\n      } else {\n        url = '';\n      }\n    }\n\n    if (url === null) {\n      if (_urlSupplied) {\n        throw new TypeError('null is not a valid argument for URI');\n      }\n    }\n\n    this.href(url);\n\n    // resolve to base according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#constructor\n    if (base !== undefined) {\n      return this.absoluteTo(base);\n    }\n\n    return this;\n  }\n\n  function isInteger(value) {\n    return /^[0-9]+$/.test(value);\n  }\n\n  URI.version = '1.19.6';\n\n  var p = URI.prototype;\n  var hasOwn = Object.prototype.hasOwnProperty;\n\n  function escapeRegEx(string) {\n    // https://github.com/medialize/URI.js/commit/85ac21783c11f8ccab06106dba9735a31a86924d#commitcomment-821963\n    return string.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  }\n\n  function getType(value) {\n    // IE8 doesn't return [Object Undefined] but [Object Object] for undefined value\n    if (value === undefined) {\n      return 'Undefined';\n    }\n\n    return String(Object.prototype.toString.call(value)).slice(8, -1);\n  }\n\n  function isArray(obj) {\n    return getType(obj) === 'Array';\n  }\n\n  function filterArrayValues(data, value) {\n    var lookup = {};\n    var i, length;\n\n    if (getType(value) === 'RegExp') {\n      lookup = null;\n    } else if (isArray(value)) {\n      for (i = 0, length = value.length; i < length; i++) {\n        lookup[value[i]] = true;\n      }\n    } else {\n      lookup[value] = true;\n    }\n\n    for (i = 0, length = data.length; i < length; i++) {\n      /*jshint laxbreak: true */\n      var _match = lookup && lookup[data[i]] !== undefined\n        || !lookup && value.test(data[i]);\n      /*jshint laxbreak: false */\n      if (_match) {\n        data.splice(i, 1);\n        length--;\n        i--;\n      }\n    }\n\n    return data;\n  }\n\n  function arrayContains(list, value) {\n    var i, length;\n\n    // value may be string, number, array, regexp\n    if (isArray(value)) {\n      // Note: this can be optimized to O(n) (instead of current O(m * n))\n      for (i = 0, length = value.length; i < length; i++) {\n        if (!arrayContains(list, value[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var _type = getType(value);\n    for (i = 0, length = list.length; i < length; i++) {\n      if (_type === 'RegExp') {\n        if (typeof list[i] === 'string' && list[i].match(value)) {\n          return true;\n        }\n      } else if (list[i] === value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function arraysEqual(one, two) {\n    if (!isArray(one) || !isArray(two)) {\n      return false;\n    }\n\n    // arrays can't be equal if they have different amount of content\n    if (one.length !== two.length) {\n      return false;\n    }\n\n    one.sort();\n    two.sort();\n\n    for (var i = 0, l = one.length; i < l; i++) {\n      if (one[i] !== two[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function trimSlashes(text) {\n    var trim_expression = /^\\/+|\\/+$/g;\n    return text.replace(trim_expression, '');\n  }\n\n  URI._parts = function() {\n    return {\n      protocol: null,\n      username: null,\n      password: null,\n      hostname: null,\n      urn: null,\n      port: null,\n      path: null,\n      query: null,\n      fragment: null,\n      // state\n      preventInvalidHostname: URI.preventInvalidHostname,\n      duplicateQueryParameters: URI.duplicateQueryParameters,\n      escapeQuerySpace: URI.escapeQuerySpace\n    };\n  };\n  // state: throw on invalid hostname\n  // see https://github.com/medialize/URI.js/pull/345\n  // and https://github.com/medialize/URI.js/issues/354\n  URI.preventInvalidHostname = false;\n  // state: allow duplicate query parameters (a=1&a=1)\n  URI.duplicateQueryParameters = false;\n  // state: replaces + with %20 (space in query strings)\n  URI.escapeQuerySpace = true;\n  // static properties\n  URI.protocol_expression = /^[a-z][a-z0-9.+-]*$/i;\n  URI.idn_expression = /[^a-z0-9\\._-]/i;\n  URI.punycode_expression = /(xn--)/i;\n  // well, 333.444.555.666 matches, but it sure ain't no IPv4 - do we care?\n  URI.ip4_expression = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\n  // credits to Rich Brown\n  // source: http://forums.intermapper.com/viewtopic.php?p=1096#1096\n  // specification: http://www.ietf.org/rfc/rfc4291.txt\n  URI.ip6_expression = /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n  // expression used is \"gruber revised\" (@gruber v2) determined to be the\n  // best solution in a regex-golf we did a couple of ages ago at\n  // * http://mathiasbynens.be/demo/url-regex\n  // * http://rodneyrehm.de/t/url-regex.html\n  URI.find_uri_expression = /\\b((?:[a-z][\\w-]+:(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))/ig;\n  URI.findUri = {\n    // valid \"scheme://\" or \"www.\"\n    start: /\\b(?:([a-z][a-z0-9.+-]*:\\/\\/)|www\\.)/gi,\n    // everything up to the next whitespace\n    end: /[\\s\\r\\n]|$/,\n    // trim trailing punctuation captured by end RegExp\n    trim: /[`!()\\[\\]{};:'\".,<>?«»“”„‘’]+$/,\n    // balanced parens inclusion (), [], {}, <>\n    parens: /(\\([^\\)]*\\)|\\[[^\\]]*\\]|\\{[^}]*\\}|<[^>]*>)/g,\n  };\n  // http://www.iana.org/assignments/uri-schemes.html\n  // http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers#Well-known_ports\n  URI.defaultPorts = {\n    http: '80',\n    https: '443',\n    ftp: '21',\n    gopher: '70',\n    ws: '80',\n    wss: '443'\n  };\n  // list of protocols which always require a hostname\n  URI.hostProtocols = [\n    'http',\n    'https'\n  ];\n\n  // allowed hostname characters according to RFC 3986\n  // ALPHA DIGIT \"-\" \".\" \"_\" \"~\" \"!\" \"$\" \"&\" \"'\" \"(\" \")\" \"*\" \"+\" \",\" \";\" \"=\" %encoded\n  // I've never seen a (non-IDN) hostname other than: ALPHA DIGIT . - _\n  URI.invalid_hostname_characters = /[^a-zA-Z0-9\\.\\-:_]/;\n  // map DOM Elements to their URI attribute\n  URI.domAttributes = {\n    'a': 'href',\n    'blockquote': 'cite',\n    'link': 'href',\n    'base': 'href',\n    'script': 'src',\n    'form': 'action',\n    'img': 'src',\n    'area': 'href',\n    'iframe': 'src',\n    'embed': 'src',\n    'source': 'src',\n    'track': 'src',\n    'input': 'src', // but only if type=\"image\"\n    'audio': 'src',\n    'video': 'src'\n  };\n  URI.getDomAttribute = function(node) {\n    if (!node || !node.nodeName) {\n      return undefined;\n    }\n\n    var nodeName = node.nodeName.toLowerCase();\n    // <input> should only expose src for type=\"image\"\n    if (nodeName === 'input' && node.type !== 'image') {\n      return undefined;\n    }\n\n    return URI.domAttributes[nodeName];\n  };\n\n  function escapeForDumbFirefox36(value) {\n    // https://github.com/medialize/URI.js/issues/91\n    return escape(value);\n  }\n\n  // encoding / decoding according to RFC3986\n  function strictEncodeURIComponent(string) {\n    // see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent\n    return encodeURIComponent(string)\n      .replace(/[!'()*]/g, escapeForDumbFirefox36)\n      .replace(/\\*/g, '%2A');\n  }\n  URI.encode = strictEncodeURIComponent;\n  URI.decode = decodeURIComponent;\n  URI.iso8859 = function() {\n    URI.encode = escape;\n    URI.decode = unescape;\n  };\n  URI.unicode = function() {\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = decodeURIComponent;\n  };\n  URI.characters = {\n    pathname: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,\n        map: {\n          // -._~!'()*\n          '%24': '$',\n          '%26': '&',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%3A': ':',\n          '%40': '@'\n        }\n      },\n      decode: {\n        expression: /[\\/\\?#]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23'\n        }\n      }\n    },\n    reserved: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,\n        map: {\n          // gen-delims\n          '%3A': ':',\n          '%2F': '/',\n          '%3F': '?',\n          '%23': '#',\n          '%5B': '[',\n          '%5D': ']',\n          '%40': '@',\n          // sub-delims\n          '%21': '!',\n          '%24': '$',\n          '%26': '&',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '='\n        }\n      }\n    },\n    urnpath: {\n      // The characters under `encode` are the characters called out by RFC 2141 as being acceptable\n      // for usage in a URN. RFC2141 also calls out \"-\", \".\", and \"_\" as acceptable characters, but\n      // these aren't encoded by encodeURIComponent, so we don't have to call them out here. Also\n      // note that the colon character is not featured in the encoding map; this is because URI.js\n      // gives the colons in URNs semantic meaning as the delimiters of path segements, and so it\n      // should not appear unencoded in a segment itself.\n      // See also the note above about RFC3986 and capitalalized hex digits.\n      encode: {\n        expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,\n        map: {\n          '%21': '!',\n          '%24': '$',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%40': '@'\n        }\n      },\n      // These characters are the characters called out by RFC2141 as \"reserved\" characters that\n      // should never appear in a URN, plus the colon character (see note above).\n      decode: {\n        expression: /[\\/\\?#:]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23',\n          ':': '%3A'\n        }\n      }\n    }\n  };\n  URI.encodeQuery = function(string, escapeQuerySpace) {\n    var escaped = URI.encode(string + '');\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    return escapeQuerySpace ? escaped.replace(/%20/g, '+') : escaped;\n  };\n  URI.decodeQuery = function(string, escapeQuerySpace) {\n    string += '';\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    try {\n      return URI.decode(escapeQuerySpace ? string.replace(/\\+/g, '%20') : string);\n    } catch(e) {\n      // we're not going to mess with weird encodings,\n      // give up and return the undecoded original string\n      // see https://github.com/medialize/URI.js/issues/87\n      // see https://github.com/medialize/URI.js/issues/92\n      return string;\n    }\n  };\n  // generate encode/decode path functions\n  var _parts = {'encode':'encode', 'decode':'decode'};\n  var _part;\n  var generateAccessor = function(_group, _part) {\n    return function(string) {\n      try {\n        return URI[_part](string + '').replace(URI.characters[_group][_part].expression, function(c) {\n          return URI.characters[_group][_part].map[c];\n        });\n      } catch (e) {\n        // we're not going to mess with weird encodings,\n        // give up and return the undecoded original string\n        // see https://github.com/medialize/URI.js/issues/87\n        // see https://github.com/medialize/URI.js/issues/92\n        return string;\n      }\n    };\n  };\n\n  for (_part in _parts) {\n    URI[_part + 'PathSegment'] = generateAccessor('pathname', _parts[_part]);\n    URI[_part + 'UrnPathSegment'] = generateAccessor('urnpath', _parts[_part]);\n  }\n\n  var generateSegmentedPathFunction = function(_sep, _codingFuncName, _innerCodingFuncName) {\n    return function(string) {\n      // Why pass in names of functions, rather than the function objects themselves? The\n      // definitions of some functions (but in particular, URI.decode) will occasionally change due\n      // to URI.js having ISO8859 and Unicode modes. Passing in the name and getting it will ensure\n      // that the functions we use here are \"fresh\".\n      var actualCodingFunc;\n      if (!_innerCodingFuncName) {\n        actualCodingFunc = URI[_codingFuncName];\n      } else {\n        actualCodingFunc = function(string) {\n          return URI[_codingFuncName](URI[_innerCodingFuncName](string));\n        };\n      }\n\n      var segments = (string + '').split(_sep);\n\n      for (var i = 0, length = segments.length; i < length; i++) {\n        segments[i] = actualCodingFunc(segments[i]);\n      }\n\n      return segments.join(_sep);\n    };\n  };\n\n  // This takes place outside the above loop because we don't want, e.g., encodeUrnPath functions.\n  URI.decodePath = generateSegmentedPathFunction('/', 'decodePathSegment');\n  URI.decodeUrnPath = generateSegmentedPathFunction(':', 'decodeUrnPathSegment');\n  URI.recodePath = generateSegmentedPathFunction('/', 'encodePathSegment', 'decode');\n  URI.recodeUrnPath = generateSegmentedPathFunction(':', 'encodeUrnPathSegment', 'decode');\n\n  URI.encodeReserved = generateAccessor('reserved', 'encode');\n\n  URI.parse = function(string, parts) {\n    var pos;\n    if (!parts) {\n      parts = {\n        preventInvalidHostname: URI.preventInvalidHostname\n      };\n    }\n    // [protocol\"://\"[username[\":\"password]\"@\"]hostname[\":\"port]\"/\"?][path][\"?\"querystring][\"#\"fragment]\n\n    // extract fragment\n    pos = string.indexOf('#');\n    if (pos > -1) {\n      // escaping?\n      parts.fragment = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract query\n    pos = string.indexOf('?');\n    if (pos > -1) {\n      // escaping?\n      parts.query = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract protocol\n    if (string.substring(0, 2) === '//') {\n      // relative-scheme\n      parts.protocol = null;\n      string = string.substring(2);\n      // extract \"user:pass@host:port\"\n      string = URI.parseAuthority(string, parts);\n    } else {\n      pos = string.indexOf(':');\n      if (pos > -1) {\n        parts.protocol = string.substring(0, pos) || null;\n        if (parts.protocol && !parts.protocol.match(URI.protocol_expression)) {\n          // : may be within the path\n          parts.protocol = undefined;\n        } else if (string.substring(pos + 1, pos + 3).replace(/\\\\/g, '/') === '//') {\n          string = string.substring(pos + 3);\n\n          // extract \"user:pass@host:port\"\n          string = URI.parseAuthority(string, parts);\n        } else {\n          string = string.substring(pos + 1);\n          parts.urn = true;\n        }\n      }\n    }\n\n    // what's left must be the path\n    parts.path = string;\n\n    // and we're done\n    return parts;\n  };\n  URI.parseHost = function(string, parts) {\n    if (!string) {\n      string = '';\n    }\n\n    // Copy chrome, IE, opera backslash-handling behavior.\n    // Back slashes before the query string get converted to forward slashes\n    // See: https://github.com/joyent/node/blob/386fd24f49b0e9d1a8a076592a404168faeecc34/lib/url.js#L115-L124\n    // See: https://code.google.com/p/chromium/issues/detail?id=25916\n    // https://github.com/medialize/URI.js/pull/233\n    string = string.replace(/\\\\/g, '/');\n\n    // extract host:port\n    var pos = string.indexOf('/');\n    var bracketPos;\n    var t;\n\n    if (pos === -1) {\n      pos = string.length;\n    }\n\n    if (string.charAt(0) === '[') {\n      // IPv6 host - http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04#section-6\n      // I claim most client software breaks on IPv6 anyways. To simplify things, URI only accepts\n      // IPv6+port in the format [2001:db8::1]:80 (for the time being)\n      bracketPos = string.indexOf(']');\n      parts.hostname = string.substring(1, bracketPos) || null;\n      parts.port = string.substring(bracketPos + 2, pos) || null;\n      if (parts.port === '/') {\n        parts.port = null;\n      }\n    } else {\n      var firstColon = string.indexOf(':');\n      var firstSlash = string.indexOf('/');\n      var nextColon = string.indexOf(':', firstColon + 1);\n      if (nextColon !== -1 && (firstSlash === -1 || nextColon < firstSlash)) {\n        // IPv6 host contains multiple colons - but no port\n        // this notation is actually not allowed by RFC 3986, but we're a liberal parser\n        parts.hostname = string.substring(0, pos) || null;\n        parts.port = null;\n      } else {\n        t = string.substring(0, pos).split(':');\n        parts.hostname = t[0] || null;\n        parts.port = t[1] || null;\n      }\n    }\n\n    if (parts.hostname && string.substring(pos).charAt(0) !== '/') {\n      pos++;\n      string = '/' + string;\n    }\n\n    if (parts.preventInvalidHostname) {\n      URI.ensureValidHostname(parts.hostname, parts.protocol);\n    }\n\n    if (parts.port) {\n      URI.ensureValidPort(parts.port);\n    }\n\n    return string.substring(pos) || '/';\n  };\n  URI.parseAuthority = function(string, parts) {\n    string = URI.parseUserinfo(string, parts);\n    return URI.parseHost(string, parts);\n  };\n  URI.parseUserinfo = function(string, parts) {\n    // extract username:password\n    var _string = string\n    var firstBackSlash = string.indexOf('\\\\');\n    if (firstBackSlash !== -1) {\n      string = string.replace(/\\\\/g, '/')\n    }\n    var firstSlash = string.indexOf('/');\n    var pos = string.lastIndexOf('@', firstSlash > -1 ? firstSlash : string.length - 1);\n    var t;\n\n    // authority@ must come before /path or \\path\n    if (pos > -1 && (firstSlash === -1 || pos < firstSlash)) {\n      t = string.substring(0, pos).split(':');\n      parts.username = t[0] ? URI.decode(t[0]) : null;\n      t.shift();\n      parts.password = t[0] ? URI.decode(t.join(':')) : null;\n      string = _string.substring(pos + 1);\n    } else {\n      parts.username = null;\n      parts.password = null;\n    }\n\n    return string;\n  };\n  URI.parseQuery = function(string, escapeQuerySpace) {\n    if (!string) {\n      return {};\n    }\n\n    // throw out the funky business - \"?\"[name\"=\"value\"&\"]+\n    string = string.replace(/&+/g, '&').replace(/^\\?*&*|&+$/g, '');\n\n    if (!string) {\n      return {};\n    }\n\n    var items = {};\n    var splits = string.split('&');\n    var length = splits.length;\n    var v, name, value;\n\n    for (var i = 0; i < length; i++) {\n      v = splits[i].split('=');\n      name = URI.decodeQuery(v.shift(), escapeQuerySpace);\n      // no \"=\" is null according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#collect-url-parameters\n      value = v.length ? URI.decodeQuery(v.join('='), escapeQuerySpace) : null;\n\n      if (hasOwn.call(items, name)) {\n        if (typeof items[name] === 'string' || items[name] === null) {\n          items[name] = [items[name]];\n        }\n\n        items[name].push(value);\n      } else {\n        items[name] = value;\n      }\n    }\n\n    return items;\n  };\n\n  URI.build = function(parts) {\n    var t = '';\n    var requireAbsolutePath = false\n\n    if (parts.protocol) {\n      t += parts.protocol + ':';\n    }\n\n    if (!parts.urn && (t || parts.hostname)) {\n      t += '//';\n      requireAbsolutePath = true\n    }\n\n    t += (URI.buildAuthority(parts) || '');\n\n    if (typeof parts.path === 'string') {\n      if (parts.path.charAt(0) !== '/' && requireAbsolutePath) {\n        t += '/';\n      }\n\n      t += parts.path;\n    }\n\n    if (typeof parts.query === 'string' && parts.query) {\n      t += '?' + parts.query;\n    }\n\n    if (typeof parts.fragment === 'string' && parts.fragment) {\n      t += '#' + parts.fragment;\n    }\n    return t;\n  };\n  URI.buildHost = function(parts) {\n    var t = '';\n\n    if (!parts.hostname) {\n      return '';\n    } else if (URI.ip6_expression.test(parts.hostname)) {\n      t += '[' + parts.hostname + ']';\n    } else {\n      t += parts.hostname;\n    }\n\n    if (parts.port) {\n      t += ':' + parts.port;\n    }\n\n    return t;\n  };\n  URI.buildAuthority = function(parts) {\n    return URI.buildUserinfo(parts) + URI.buildHost(parts);\n  };\n  URI.buildUserinfo = function(parts) {\n    var t = '';\n\n    if (parts.username) {\n      t += URI.encode(parts.username);\n    }\n\n    if (parts.password) {\n      t += ':' + URI.encode(parts.password);\n    }\n\n    if (t) {\n      t += '@';\n    }\n\n    return t;\n  };\n  URI.buildQuery = function(data, duplicateQueryParameters, escapeQuerySpace) {\n    // according to http://tools.ietf.org/html/rfc3986 or http://labs.apache.org/webarch/uri/rfc/rfc3986.html\n    // being »-._~!$&'()*+,;=:@/?« %HEX and alnum are allowed\n    // the RFC explicitly states ?/foo being a valid use case, no mention of parameter syntax!\n    // URI.js treats the query string as being application/x-www-form-urlencoded\n    // see http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type\n\n    var t = '';\n    var unique, key, i, length;\n    for (key in data) {\n      if (hasOwn.call(data, key)) {\n        if (isArray(data[key])) {\n          unique = {};\n          for (i = 0, length = data[key].length; i < length; i++) {\n            if (data[key][i] !== undefined && unique[data[key][i] + ''] === undefined) {\n              t += '&' + URI.buildQueryParameter(key, data[key][i], escapeQuerySpace);\n              if (duplicateQueryParameters !== true) {\n                unique[data[key][i] + ''] = true;\n              }\n            }\n          }\n        } else if (data[key] !== undefined) {\n          t += '&' + URI.buildQueryParameter(key, data[key], escapeQuerySpace);\n        }\n      }\n    }\n\n    return t.substring(1);\n  };\n  URI.buildQueryParameter = function(name, value, escapeQuerySpace) {\n    // http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type -- application/x-www-form-urlencoded\n    // don't append \"=\" for null values, according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#url-parameter-serialization\n    return URI.encodeQuery(name, escapeQuerySpace) + (value !== null ? '=' + URI.encodeQuery(value, escapeQuerySpace) : '');\n  };\n\n  URI.addQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.addQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (data[name] === undefined) {\n        data[name] = value;\n        return;\n      } else if (typeof data[name] === 'string') {\n        data[name] = [data[name]];\n      }\n\n      if (!isArray(value)) {\n        value = [value];\n      }\n\n      data[name] = (data[name] || []).concat(value);\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.setQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.setQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      data[name] = value === undefined ? null : value;\n    } else {\n      throw new TypeError('URI.setQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.removeQuery = function(data, name, value) {\n    var i, length, key;\n\n    if (isArray(name)) {\n      for (i = 0, length = name.length; i < length; i++) {\n        data[name[i]] = undefined;\n      }\n    } else if (getType(name) === 'RegExp') {\n      for (key in data) {\n        if (name.test(key)) {\n          data[key] = undefined;\n        }\n      }\n    } else if (typeof name === 'object') {\n      for (key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.removeQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (value !== undefined) {\n        if (getType(value) === 'RegExp') {\n          if (!isArray(data[name]) && value.test(data[name])) {\n            data[name] = undefined;\n          } else {\n            data[name] = filterArrayValues(data[name], value);\n          }\n        } else if (data[name] === String(value) && (!isArray(value) || value.length === 1)) {\n          data[name] = undefined;\n        } else if (isArray(data[name])) {\n          data[name] = filterArrayValues(data[name], value);\n        }\n      } else {\n        data[name] = undefined;\n      }\n    } else {\n      throw new TypeError('URI.removeQuery() accepts an object, string, RegExp as the first parameter');\n    }\n  };\n  URI.hasQuery = function(data, name, value, withinArray) {\n    switch (getType(name)) {\n      case 'String':\n        // Nothing to do here\n        break;\n\n      case 'RegExp':\n        for (var key in data) {\n          if (hasOwn.call(data, key)) {\n            if (name.test(key) && (value === undefined || URI.hasQuery(data, key, value))) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n\n      case 'Object':\n        for (var _key in name) {\n          if (hasOwn.call(name, _key)) {\n            if (!URI.hasQuery(data, _key, name[_key])) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts a string, regular expression or object as the name parameter');\n    }\n\n    switch (getType(value)) {\n      case 'Undefined':\n        // true if exists (but may be empty)\n        return name in data; // data[name] !== undefined;\n\n      case 'Boolean':\n        // true if exists and non-empty\n        var _booly = Boolean(isArray(data[name]) ? data[name].length : data[name]);\n        return value === _booly;\n\n      case 'Function':\n        // allow complex comparison\n        return !!value(data[name], name, data);\n\n      case 'Array':\n        if (!isArray(data[name])) {\n          return false;\n        }\n\n        var op = withinArray ? arrayContains : arraysEqual;\n        return op(data[name], value);\n\n      case 'RegExp':\n        if (!isArray(data[name])) {\n          return Boolean(data[name] && data[name].match(value));\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      case 'Number':\n        value = String(value);\n        /* falls through */\n      case 'String':\n        if (!isArray(data[name])) {\n          return data[name] === value;\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter');\n    }\n  };\n\n\n  URI.joinPaths = function() {\n    var input = [];\n    var segments = [];\n    var nonEmptySegments = 0;\n\n    for (var i = 0; i < arguments.length; i++) {\n      var url = new URI(arguments[i]);\n      input.push(url);\n      var _segments = url.segment();\n      for (var s = 0; s < _segments.length; s++) {\n        if (typeof _segments[s] === 'string') {\n          segments.push(_segments[s]);\n        }\n\n        if (_segments[s]) {\n          nonEmptySegments++;\n        }\n      }\n    }\n\n    if (!segments.length || !nonEmptySegments) {\n      return new URI('');\n    }\n\n    var uri = new URI('').segment(segments);\n\n    if (input[0].path() === '' || input[0].path().slice(0, 1) === '/') {\n      uri.path('/' + uri.path());\n    }\n\n    return uri.normalize();\n  };\n\n  URI.commonPath = function(one, two) {\n    var length = Math.min(one.length, two.length);\n    var pos;\n\n    // find first non-matching character\n    for (pos = 0; pos < length; pos++) {\n      if (one.charAt(pos) !== two.charAt(pos)) {\n        pos--;\n        break;\n      }\n    }\n\n    if (pos < 1) {\n      return one.charAt(0) === two.charAt(0) && one.charAt(0) === '/' ? '/' : '';\n    }\n\n    // revert to last /\n    if (one.charAt(pos) !== '/' || two.charAt(pos) !== '/') {\n      pos = one.substring(0, pos).lastIndexOf('/');\n    }\n\n    return one.substring(0, pos + 1);\n  };\n\n  URI.withinString = function(string, callback, options) {\n    options || (options = {});\n    var _start = options.start || URI.findUri.start;\n    var _end = options.end || URI.findUri.end;\n    var _trim = options.trim || URI.findUri.trim;\n    var _parens = options.parens || URI.findUri.parens;\n    var _attributeOpen = /[a-z0-9-]=[\"']?$/i;\n\n    _start.lastIndex = 0;\n    while (true) {\n      var match = _start.exec(string);\n      if (!match) {\n        break;\n      }\n\n      var start = match.index;\n      if (options.ignoreHtml) {\n        // attribut(e=[\"']?$)\n        var attributeOpen = string.slice(Math.max(start - 3, 0), start);\n        if (attributeOpen && _attributeOpen.test(attributeOpen)) {\n          continue;\n        }\n      }\n\n      var end = start + string.slice(start).search(_end);\n      var slice = string.slice(start, end);\n      // make sure we include well balanced parens\n      var parensEnd = -1;\n      while (true) {\n        var parensMatch = _parens.exec(slice);\n        if (!parensMatch) {\n          break;\n        }\n\n        var parensMatchEnd = parensMatch.index + parensMatch[0].length;\n        parensEnd = Math.max(parensEnd, parensMatchEnd);\n      }\n\n      if (parensEnd > -1) {\n        slice = slice.slice(0, parensEnd) + slice.slice(parensEnd).replace(_trim, '');\n      } else {\n        slice = slice.replace(_trim, '');\n      }\n\n      if (slice.length <= match[0].length) {\n        // the extract only contains the starting marker of a URI,\n        // e.g. \"www\" or \"http://\"\n        continue;\n      }\n\n      if (options.ignore && options.ignore.test(slice)) {\n        continue;\n      }\n\n      end = start + slice.length;\n      var result = callback(slice, start, end, string);\n      if (result === undefined) {\n        _start.lastIndex = end;\n        continue;\n      }\n\n      result = String(result);\n      string = string.slice(0, start) + result + string.slice(end);\n      _start.lastIndex = start + result.length;\n    }\n\n    _start.lastIndex = 0;\n    return string;\n  };\n\n  URI.ensureValidHostname = function(v, protocol) {\n    // Theoretically URIs allow percent-encoding in Hostnames (according to RFC 3986)\n    // they are not part of DNS and therefore ignored by URI.js\n\n    var hasHostname = !!v; // not null and not an empty string\n    var hasProtocol = !!protocol;\n    var rejectEmptyHostname = false;\n\n    if (hasProtocol) {\n      rejectEmptyHostname = arrayContains(URI.hostProtocols, protocol);\n    }\n\n    if (rejectEmptyHostname && !hasHostname) {\n      throw new TypeError('Hostname cannot be empty, if protocol is ' + protocol);\n    } else if (v && v.match(URI.invalid_hostname_characters)) {\n      // test punycode\n      if (!punycode) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');\n      }\n      if (punycode.toASCII(v).match(URI.invalid_hostname_characters)) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_]');\n      }\n    }\n  };\n\n  URI.ensureValidPort = function (v) {\n    if (!v) {\n      return;\n    }\n\n    var port = Number(v);\n    if (isInteger(port) && (port > 0) && (port < 65536)) {\n      return;\n    }\n\n    throw new TypeError('Port \"' + v + '\" is not a valid port');\n  };\n\n  // noConflict\n  URI.noConflict = function(removeAll) {\n    if (removeAll) {\n      var unconflicted = {\n        URI: this.noConflict()\n      };\n\n      if (root.URITemplate && typeof root.URITemplate.noConflict === 'function') {\n        unconflicted.URITemplate = root.URITemplate.noConflict();\n      }\n\n      if (root.IPv6 && typeof root.IPv6.noConflict === 'function') {\n        unconflicted.IPv6 = root.IPv6.noConflict();\n      }\n\n      if (root.SecondLevelDomains && typeof root.SecondLevelDomains.noConflict === 'function') {\n        unconflicted.SecondLevelDomains = root.SecondLevelDomains.noConflict();\n      }\n\n      return unconflicted;\n    } else if (root.URI === this) {\n      root.URI = _URI;\n    }\n\n    return this;\n  };\n\n  p.build = function(deferBuild) {\n    if (deferBuild === true) {\n      this._deferred_build = true;\n    } else if (deferBuild === undefined || this._deferred_build) {\n      this._string = URI.build(this._parts);\n      this._deferred_build = false;\n    }\n\n    return this;\n  };\n\n  p.clone = function() {\n    return new URI(this);\n  };\n\n  p.valueOf = p.toString = function() {\n    return this.build(false)._string;\n  };\n\n\n  function generateSimpleAccessor(_part){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        this._parts[_part] = v || null;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  function generatePrefixAccessor(_part, _key){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        if (v !== null) {\n          v = v + '';\n          if (v.charAt(0) === _key) {\n            v = v.substring(1);\n          }\n        }\n\n        this._parts[_part] = v;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  p.protocol = generateSimpleAccessor('protocol');\n  p.username = generateSimpleAccessor('username');\n  p.password = generateSimpleAccessor('password');\n  p.hostname = generateSimpleAccessor('hostname');\n  p.port = generateSimpleAccessor('port');\n  p.query = generatePrefixAccessor('query', '?');\n  p.fragment = generatePrefixAccessor('fragment', '#');\n\n  p.search = function(v, build) {\n    var t = this.query(v, build);\n    return typeof t === 'string' && t.length ? ('?' + t) : t;\n  };\n  p.hash = function(v, build) {\n    var t = this.fragment(v, build);\n    return typeof t === 'string' && t.length ? ('#' + t) : t;\n  };\n\n  p.pathname = function(v, build) {\n    if (v === undefined || v === true) {\n      var res = this._parts.path || (this._parts.hostname ? '/' : '');\n      return v ? (this._parts.urn ? URI.decodeUrnPath : URI.decodePath)(res) : res;\n    } else {\n      if (this._parts.urn) {\n        this._parts.path = v ? URI.recodeUrnPath(v) : '';\n      } else {\n        this._parts.path = v ? URI.recodePath(v) : '/';\n      }\n      this.build(!build);\n      return this;\n    }\n  };\n  p.path = p.pathname;\n  p.href = function(href, build) {\n    var key;\n\n    if (href === undefined) {\n      return this.toString();\n    }\n\n    this._string = '';\n    this._parts = URI._parts();\n\n    var _URI = href instanceof URI;\n    var _object = typeof href === 'object' && (href.hostname || href.path || href.pathname);\n    if (href.nodeName) {\n      var attribute = URI.getDomAttribute(href);\n      href = href[attribute] || '';\n      _object = false;\n    }\n\n    // window.location is reported to be an object, but it's not the sort\n    // of object we're looking for:\n    // * location.protocol ends with a colon\n    // * location.query != object.search\n    // * location.hash != object.fragment\n    // simply serializing the unknown object should do the trick\n    // (for location, not for everything...)\n    if (!_URI && _object && href.pathname !== undefined) {\n      href = href.toString();\n    }\n\n    if (typeof href === 'string' || href instanceof String) {\n      this._parts = URI.parse(String(href), this._parts);\n    } else if (_URI || _object) {\n      var src = _URI ? href._parts : href;\n      for (key in src) {\n        if (key === 'query') { continue; }\n        if (hasOwn.call(this._parts, key)) {\n          this._parts[key] = src[key];\n        }\n      }\n      if (src.query) {\n        this.query(src.query, false);\n      }\n    } else {\n      throw new TypeError('invalid input');\n    }\n\n    this.build(!build);\n    return this;\n  };\n\n  // identification accessors\n  p.is = function(what) {\n    var ip = false;\n    var ip4 = false;\n    var ip6 = false;\n    var name = false;\n    var sld = false;\n    var idn = false;\n    var punycode = false;\n    var relative = !this._parts.urn;\n\n    if (this._parts.hostname) {\n      relative = false;\n      ip4 = URI.ip4_expression.test(this._parts.hostname);\n      ip6 = URI.ip6_expression.test(this._parts.hostname);\n      ip = ip4 || ip6;\n      name = !ip;\n      sld = name && SLD && SLD.has(this._parts.hostname);\n      idn = name && URI.idn_expression.test(this._parts.hostname);\n      punycode = name && URI.punycode_expression.test(this._parts.hostname);\n    }\n\n    switch (what.toLowerCase()) {\n      case 'relative':\n        return relative;\n\n      case 'absolute':\n        return !relative;\n\n      // hostname identification\n      case 'domain':\n      case 'name':\n        return name;\n\n      case 'sld':\n        return sld;\n\n      case 'ip':\n        return ip;\n\n      case 'ip4':\n      case 'ipv4':\n      case 'inet4':\n        return ip4;\n\n      case 'ip6':\n      case 'ipv6':\n      case 'inet6':\n        return ip6;\n\n      case 'idn':\n        return idn;\n\n      case 'url':\n        return !this._parts.urn;\n\n      case 'urn':\n        return !!this._parts.urn;\n\n      case 'punycode':\n        return punycode;\n    }\n\n    return null;\n  };\n\n  // component specific input validation\n  var _protocol = p.protocol;\n  var _port = p.port;\n  var _hostname = p.hostname;\n\n  p.protocol = function(v, build) {\n    if (v) {\n      // accept trailing ://\n      v = v.replace(/:(\\/\\/)?$/, '');\n\n      if (!v.match(URI.protocol_expression)) {\n        throw new TypeError('Protocol \"' + v + '\" contains characters other than [A-Z0-9.+-] or doesn\\'t start with [A-Z]');\n      }\n    }\n\n    return _protocol.call(this, v, build);\n  };\n  p.scheme = p.protocol;\n  p.port = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      if (v === 0) {\n        v = null;\n      }\n\n      if (v) {\n        v += '';\n        if (v.charAt(0) === ':') {\n          v = v.substring(1);\n        }\n\n        URI.ensureValidPort(v);\n      }\n    }\n    return _port.call(this, v, build);\n  };\n  p.hostname = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      var x = { preventInvalidHostname: this._parts.preventInvalidHostname };\n      var res = URI.parseHost(v, x);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      v = x.hostname;\n      if (this._parts.preventInvalidHostname) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n    }\n\n    return _hostname.call(this, v, build);\n  };\n\n  // compound accessors\n  p.origin = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var protocol = this.protocol();\n      var authority = this.authority();\n      if (!authority) {\n        return '';\n      }\n\n      return (protocol ? protocol + '://' : '') + this.authority();\n    } else {\n      var origin = URI(v);\n      this\n        .protocol(origin.protocol())\n        .authority(origin.authority())\n        .build(!build);\n      return this;\n    }\n  };\n  p.host = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildHost(this._parts) : '';\n    } else {\n      var res = URI.parseHost(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.authority = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildAuthority(this._parts) : '';\n    } else {\n      var res = URI.parseAuthority(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.userinfo = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var t = URI.buildUserinfo(this._parts);\n      return t ? t.substring(0, t.length -1) : t;\n    } else {\n      if (v[v.length-1] !== '@') {\n        v += '@';\n      }\n\n      URI.parseUserinfo(v, this._parts);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.resource = function(v, build) {\n    var parts;\n\n    if (v === undefined) {\n      return this.path() + this.search() + this.hash();\n    }\n\n    parts = URI.parse(v);\n    this._parts.path = parts.path;\n    this._parts.query = parts.query;\n    this._parts.fragment = parts.fragment;\n    this.build(!build);\n    return this;\n  };\n\n  // fraction accessors\n  p.subdomain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    // convenience, return \"www\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // grab domain and add another segment\n      var end = this._parts.hostname.length - this.domain().length - 1;\n      return this._parts.hostname.substring(0, end) || '';\n    } else {\n      var e = this._parts.hostname.length - this.domain().length;\n      var sub = this._parts.hostname.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(sub));\n\n      if (v && v.charAt(v.length - 1) !== '.') {\n        v += '.';\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      if (v) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n\n      this._parts.hostname = this._parts.hostname.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.domain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // convenience, return \"example.org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // if hostname consists of 1 or 2 segments, it must be the domain\n      var t = this._parts.hostname.match(/\\./g);\n      if (t && t.length < 2) {\n        return this._parts.hostname;\n      }\n\n      // grab tld and add another segment\n      var end = this._parts.hostname.length - this.tld(build).length - 1;\n      end = this._parts.hostname.lastIndexOf('.', end -1) + 1;\n      return this._parts.hostname.substring(end) || '';\n    } else {\n      if (!v) {\n        throw new TypeError('cannot set domain empty');\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      URI.ensureValidHostname(v, this._parts.protocol);\n\n      if (!this._parts.hostname || this.is('IP')) {\n        this._parts.hostname = v;\n      } else {\n        var replace = new RegExp(escapeRegEx(this.domain()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.tld = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // return \"org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      var pos = this._parts.hostname.lastIndexOf('.');\n      var tld = this._parts.hostname.substring(pos + 1);\n\n      if (build !== true && SLD && SLD.list[tld.toLowerCase()]) {\n        return SLD.get(this._parts.hostname) || tld;\n      }\n\n      return tld;\n    } else {\n      var replace;\n\n      if (!v) {\n        throw new TypeError('cannot set TLD empty');\n      } else if (v.match(/[^a-zA-Z0-9-]/)) {\n        if (SLD && SLD.is(v)) {\n          replace = new RegExp(escapeRegEx(this.tld()) + '$');\n          this._parts.hostname = this._parts.hostname.replace(replace, v);\n        } else {\n          throw new TypeError('TLD \"' + v + '\" contains characters other than [A-Z0-9]');\n        }\n      } else if (!this._parts.hostname || this.is('IP')) {\n        throw new ReferenceError('cannot set TLD on non-domain host');\n      } else {\n        replace = new RegExp(escapeRegEx(this.tld()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.directory = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path && !this._parts.hostname) {\n        return '';\n      }\n\n      if (this._parts.path === '/') {\n        return '/';\n      }\n\n      var end = this._parts.path.length - this.filename().length - 1;\n      var res = this._parts.path.substring(0, end) || (this._parts.hostname ? '/' : '');\n\n      return v ? URI.decodePath(res) : res;\n\n    } else {\n      var e = this._parts.path.length - this.filename().length;\n      var directory = this._parts.path.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(directory));\n\n      // fully qualifier directories begin with a slash\n      if (!this.is('relative')) {\n        if (!v) {\n          v = '/';\n        }\n\n        if (v.charAt(0) !== '/') {\n          v = '/' + v;\n        }\n      }\n\n      // directories always end with a slash\n      if (v && v.charAt(v.length - 1) !== '/') {\n        v += '/';\n      }\n\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.filename = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v !== 'string') {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var pos = this._parts.path.lastIndexOf('/');\n      var res = this._parts.path.substring(pos+1);\n\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      var mutatedDirectory = false;\n\n      if (v.charAt(0) === '/') {\n        v = v.substring(1);\n      }\n\n      if (v.match(/\\.?\\//)) {\n        mutatedDirectory = true;\n      }\n\n      var replace = new RegExp(escapeRegEx(this.filename()) + '$');\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n\n      if (mutatedDirectory) {\n        this.normalizePath(build);\n      } else {\n        this.build(!build);\n      }\n\n      return this;\n    }\n  };\n  p.suffix = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var filename = this.filename();\n      var pos = filename.lastIndexOf('.');\n      var s, res;\n\n      if (pos === -1) {\n        return '';\n      }\n\n      // suffix may only contain alnum characters (yup, I made this up.)\n      s = filename.substring(pos+1);\n      res = (/^[a-z0-9%]+$/i).test(s) ? s : '';\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      if (v.charAt(0) === '.') {\n        v = v.substring(1);\n      }\n\n      var suffix = this.suffix();\n      var replace;\n\n      if (!suffix) {\n        if (!v) {\n          return this;\n        }\n\n        this._parts.path += '.' + URI.recodePath(v);\n      } else if (!v) {\n        replace = new RegExp(escapeRegEx('.' + suffix) + '$');\n      } else {\n        replace = new RegExp(escapeRegEx(suffix) + '$');\n      }\n\n      if (replace) {\n        v = URI.recodePath(v);\n        this._parts.path = this._parts.path.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.segment = function(segment, v, build) {\n    var separator = this._parts.urn ? ':' : '/';\n    var path = this.path();\n    var absolute = path.substring(0, 1) === '/';\n    var segments = path.split(separator);\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      throw new Error('Bad segment \"' + segment + '\", must be 0-based integer');\n    }\n\n    if (absolute) {\n      segments.shift();\n    }\n\n    if (segment < 0) {\n      // allow negative indexes to address from the end\n      segment = Math.max(segments.length + segment, 0);\n    }\n\n    if (v === undefined) {\n      /*jshint laxbreak: true */\n      return segment === undefined\n        ? segments\n        : segments[segment];\n      /*jshint laxbreak: false */\n    } else if (segment === null || segments[segment] === undefined) {\n      if (isArray(v)) {\n        segments = [];\n        // collapse empty elements within array\n        for (var i=0, l=v.length; i < l; i++) {\n          if (!v[i].length && (!segments.length || !segments[segments.length -1].length)) {\n            continue;\n          }\n\n          if (segments.length && !segments[segments.length -1].length) {\n            segments.pop();\n          }\n\n          segments.push(trimSlashes(v[i]));\n        }\n      } else if (v || typeof v === 'string') {\n        v = trimSlashes(v);\n        if (segments[segments.length -1] === '') {\n          // empty trailing elements have to be overwritten\n          // to prevent results such as /foo//bar\n          segments[segments.length -1] = v;\n        } else {\n          segments.push(v);\n        }\n      }\n    } else {\n      if (v) {\n        segments[segment] = trimSlashes(v);\n      } else {\n        segments.splice(segment, 1);\n      }\n    }\n\n    if (absolute) {\n      segments.unshift('');\n    }\n\n    return this.path(segments.join(separator), build);\n  };\n  p.segmentCoded = function(segment, v, build) {\n    var segments, i, l;\n\n    if (typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (v === undefined) {\n      segments = this.segment(segment, v, build);\n      if (!isArray(segments)) {\n        segments = segments !== undefined ? URI.decode(segments) : undefined;\n      } else {\n        for (i = 0, l = segments.length; i < l; i++) {\n          segments[i] = URI.decode(segments[i]);\n        }\n      }\n\n      return segments;\n    }\n\n    if (!isArray(v)) {\n      v = (typeof v === 'string' || v instanceof String) ? URI.encode(v) : v;\n    } else {\n      for (i = 0, l = v.length; i < l; i++) {\n        v[i] = URI.encode(v[i]);\n      }\n    }\n\n    return this.segment(segment, v, build);\n  };\n\n  // mutating query string\n  var q = p.query;\n  p.query = function(v, build) {\n    if (v === true) {\n      return URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    } else if (typeof v === 'function') {\n      var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n      var result = v.call(this, data);\n      this._parts.query = URI.buildQuery(result || data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else if (v !== undefined && typeof v !== 'string') {\n      this._parts.query = URI.buildQuery(v, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else {\n      return q.call(this, v, build);\n    }\n  };\n  p.setQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n\n    if (typeof name === 'string' || name instanceof String) {\n      data[name] = value !== undefined ? value : null;\n    } else if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          data[key] = name[key];\n        }\n      }\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.addQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.addQuery(data, name, value === undefined ? null : value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.removeQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.removeQuery(data, name, value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.hasQuery = function(name, value, withinArray) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    return URI.hasQuery(data, name, value, withinArray);\n  };\n  p.setSearch = p.setQuery;\n  p.addSearch = p.addQuery;\n  p.removeSearch = p.removeQuery;\n  p.hasSearch = p.hasQuery;\n\n  // sanitizing URLs\n  p.normalize = function() {\n    if (this._parts.urn) {\n      return this\n        .normalizeProtocol(false)\n        .normalizePath(false)\n        .normalizeQuery(false)\n        .normalizeFragment(false)\n        .build();\n    }\n\n    return this\n      .normalizeProtocol(false)\n      .normalizeHostname(false)\n      .normalizePort(false)\n      .normalizePath(false)\n      .normalizeQuery(false)\n      .normalizeFragment(false)\n      .build();\n  };\n  p.normalizeProtocol = function(build) {\n    if (typeof this._parts.protocol === 'string') {\n      this._parts.protocol = this._parts.protocol.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeHostname = function(build) {\n    if (this._parts.hostname) {\n      if (this.is('IDN') && punycode) {\n        this._parts.hostname = punycode.toASCII(this._parts.hostname);\n      } else if (this.is('IPv6') && IPv6) {\n        this._parts.hostname = IPv6.best(this._parts.hostname);\n      }\n\n      this._parts.hostname = this._parts.hostname.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePort = function(build) {\n    // remove port of it's the protocol's default\n    if (typeof this._parts.protocol === 'string' && this._parts.port === URI.defaultPorts[this._parts.protocol]) {\n      this._parts.port = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePath = function(build) {\n    var _path = this._parts.path;\n    if (!_path) {\n      return this;\n    }\n\n    if (this._parts.urn) {\n      this._parts.path = URI.recodeUrnPath(this._parts.path);\n      this.build(!build);\n      return this;\n    }\n\n    if (this._parts.path === '/') {\n      return this;\n    }\n\n    _path = URI.recodePath(_path);\n\n    var _was_relative;\n    var _leadingParents = '';\n    var _parent, _pos;\n\n    // handle relative paths\n    if (_path.charAt(0) !== '/') {\n      _was_relative = true;\n      _path = '/' + _path;\n    }\n\n    // handle relative files (as opposed to directories)\n    if (_path.slice(-3) === '/..' || _path.slice(-2) === '/.') {\n      _path += '/';\n    }\n\n    // resolve simples\n    _path = _path\n      .replace(/(\\/(\\.\\/)+)|(\\/\\.$)/g, '/')\n      .replace(/\\/{2,}/g, '/');\n\n    // remember leading parents\n    if (_was_relative) {\n      _leadingParents = _path.substring(1).match(/^(\\.\\.\\/)+/) || '';\n      if (_leadingParents) {\n        _leadingParents = _leadingParents[0];\n      }\n    }\n\n    // resolve parents\n    while (true) {\n      _parent = _path.search(/\\/\\.\\.(\\/|$)/);\n      if (_parent === -1) {\n        // no more ../ to resolve\n        break;\n      } else if (_parent === 0) {\n        // top level cannot be relative, skip it\n        _path = _path.substring(3);\n        continue;\n      }\n\n      _pos = _path.substring(0, _parent).lastIndexOf('/');\n      if (_pos === -1) {\n        _pos = _parent;\n      }\n      _path = _path.substring(0, _pos) + _path.substring(_parent + 3);\n    }\n\n    // revert to relative\n    if (_was_relative && this.is('relative')) {\n      _path = _leadingParents + _path.substring(1);\n    }\n\n    this._parts.path = _path;\n    this.build(!build);\n    return this;\n  };\n  p.normalizePathname = p.normalizePath;\n  p.normalizeQuery = function(build) {\n    if (typeof this._parts.query === 'string') {\n      if (!this._parts.query.length) {\n        this._parts.query = null;\n      } else {\n        this.query(URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace));\n      }\n\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeFragment = function(build) {\n    if (!this._parts.fragment) {\n      this._parts.fragment = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeSearch = p.normalizeQuery;\n  p.normalizeHash = p.normalizeFragment;\n\n  p.iso8859 = function() {\n    // expect unicode input, iso8859 output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = escape;\n    URI.decode = decodeURIComponent;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.unicode = function() {\n    // expect iso8859 input, unicode output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = unescape;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.readable = function() {\n    var uri = this.clone();\n    // removing username, password, because they shouldn't be displayed according to RFC 3986\n    uri.username('').password('').normalize();\n    var t = '';\n    if (uri._parts.protocol) {\n      t += uri._parts.protocol + '://';\n    }\n\n    if (uri._parts.hostname) {\n      if (uri.is('punycode') && punycode) {\n        t += punycode.toUnicode(uri._parts.hostname);\n        if (uri._parts.port) {\n          t += ':' + uri._parts.port;\n        }\n      } else {\n        t += uri.host();\n      }\n    }\n\n    if (uri._parts.hostname && uri._parts.path && uri._parts.path.charAt(0) !== '/') {\n      t += '/';\n    }\n\n    t += uri.path(true);\n    if (uri._parts.query) {\n      var q = '';\n      for (var i = 0, qp = uri._parts.query.split('&'), l = qp.length; i < l; i++) {\n        var kv = (qp[i] || '').split('=');\n        q += '&' + URI.decodeQuery(kv[0], this._parts.escapeQuerySpace)\n          .replace(/&/g, '%26');\n\n        if (kv[1] !== undefined) {\n          q += '=' + URI.decodeQuery(kv[1], this._parts.escapeQuerySpace)\n            .replace(/&/g, '%26');\n        }\n      }\n      t += '?' + q.substring(1);\n    }\n\n    t += URI.decodeQuery(uri.hash(), true);\n    return t;\n  };\n\n  // resolving relative and absolute URLs\n  p.absoluteTo = function(base) {\n    var resolved = this.clone();\n    var properties = ['protocol', 'username', 'password', 'hostname', 'port'];\n    var basedir, i, p;\n\n    if (this._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    if (!(base instanceof URI)) {\n      base = new URI(base);\n    }\n\n    if (resolved._parts.protocol) {\n      // Directly returns even if this._parts.hostname is empty.\n      return resolved;\n    } else {\n      resolved._parts.protocol = base._parts.protocol;\n    }\n\n    if (this._parts.hostname) {\n      return resolved;\n    }\n\n    for (i = 0; (p = properties[i]); i++) {\n      resolved._parts[p] = base._parts[p];\n    }\n\n    if (!resolved._parts.path) {\n      resolved._parts.path = base._parts.path;\n      if (!resolved._parts.query) {\n        resolved._parts.query = base._parts.query;\n      }\n    } else {\n      if (resolved._parts.path.substring(-2) === '..') {\n        resolved._parts.path += '/';\n      }\n\n      if (resolved.path().charAt(0) !== '/') {\n        basedir = base.directory();\n        basedir = basedir ? basedir : base.path().indexOf('/') === 0 ? '/' : '';\n        resolved._parts.path = (basedir ? (basedir + '/') : '') + resolved._parts.path;\n        resolved.normalizePath();\n      }\n    }\n\n    resolved.build();\n    return resolved;\n  };\n  p.relativeTo = function(base) {\n    var relative = this.clone().normalize();\n    var relativeParts, baseParts, common, relativePath, basePath;\n\n    if (relative._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    base = new URI(base).normalize();\n    relativeParts = relative._parts;\n    baseParts = base._parts;\n    relativePath = relative.path();\n    basePath = base.path();\n\n    if (relativePath.charAt(0) !== '/') {\n      throw new Error('URI is already relative');\n    }\n\n    if (basePath.charAt(0) !== '/') {\n      throw new Error('Cannot calculate a URI relative to another relative URI');\n    }\n\n    if (relativeParts.protocol === baseParts.protocol) {\n      relativeParts.protocol = null;\n    }\n\n    if (relativeParts.username !== baseParts.username || relativeParts.password !== baseParts.password) {\n      return relative.build();\n    }\n\n    if (relativeParts.protocol !== null || relativeParts.username !== null || relativeParts.password !== null) {\n      return relative.build();\n    }\n\n    if (relativeParts.hostname === baseParts.hostname && relativeParts.port === baseParts.port) {\n      relativeParts.hostname = null;\n      relativeParts.port = null;\n    } else {\n      return relative.build();\n    }\n\n    if (relativePath === basePath) {\n      relativeParts.path = '';\n      return relative.build();\n    }\n\n    // determine common sub path\n    common = URI.commonPath(relativePath, basePath);\n\n    // If the paths have nothing in common, return a relative URL with the absolute path.\n    if (!common) {\n      return relative.build();\n    }\n\n    var parents = baseParts.path\n      .substring(common.length)\n      .replace(/[^\\/]*$/, '')\n      .replace(/.*?\\//g, '../');\n\n    relativeParts.path = (parents + relativeParts.path.substring(common.length)) || './';\n\n    return relative.build();\n  };\n\n  // comparing URIs\n  p.equals = function(uri) {\n    var one = this.clone();\n    var two = new URI(uri);\n    var one_map = {};\n    var two_map = {};\n    var checked = {};\n    var one_query, two_query, key;\n\n    one.normalize();\n    two.normalize();\n\n    // exact match\n    if (one.toString() === two.toString()) {\n      return true;\n    }\n\n    // extract query string\n    one_query = one.query();\n    two_query = two.query();\n    one.query('');\n    two.query('');\n\n    // definitely not equal if not even non-query parts match\n    if (one.toString() !== two.toString()) {\n      return false;\n    }\n\n    // query parameters have the same length, even if they're permuted\n    if (one_query.length !== two_query.length) {\n      return false;\n    }\n\n    one_map = URI.parseQuery(one_query, this._parts.escapeQuerySpace);\n    two_map = URI.parseQuery(two_query, this._parts.escapeQuerySpace);\n\n    for (key in one_map) {\n      if (hasOwn.call(one_map, key)) {\n        if (!isArray(one_map[key])) {\n          if (one_map[key] !== two_map[key]) {\n            return false;\n          }\n        } else if (!arraysEqual(one_map[key], two_map[key])) {\n          return false;\n        }\n\n        checked[key] = true;\n      }\n    }\n\n    for (key in two_map) {\n      if (hasOwn.call(two_map, key)) {\n        if (!checked[key]) {\n          // two contains a parameter not present in one\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  // state\n  p.preventInvalidHostname = function(v) {\n    this._parts.preventInvalidHostname = !!v;\n    return this;\n  };\n\n  p.duplicateQueryParameters = function(v) {\n    this._parts.duplicateQueryParameters = !!v;\n    return this;\n  };\n\n  p.escapeQuerySpace = function(v) {\n    this._parts.escapeQuerySpace = !!v;\n    return this;\n  };\n\n  return URI;\n}));\n","/*! https://mths.be/punycode v1.4.0 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport const STATE_TYPE_MAP = {\r\n  offline: 'danger',\r\n  failed: 'danger',\r\n  pending: 'info',\r\n  fetching: 'info',\r\n  running: 'warning',\r\n  stopped: 'danger',\r\n  success: 'success',\r\n};\r\n\r\nexport const STATUS_OPTIONS = {\r\n  success: 'success',\r\n  failed: 'failed',\r\n  running: 'running',\r\n  offline: 'offline',\r\n  pending: 'pending',\r\n};\r\n\r\nexport const TIME_OPTIONS = [\r\n  'now',\r\n  '1 hour ago',\r\n  '1 day ago',\r\n  '7 days ago',\r\n  '28 days ago',\r\n  '90 days ago',\r\n  '1 year ago',\r\n];\r\n\r\n// SqlEditor layout constants\r\nexport const SQL_EDITOR_GUTTER_HEIGHT = 5;\r\nexport const SQL_EDITOR_GUTTER_MARGIN = 3;\r\nexport const SQL_TOOLBAR_HEIGHT = 51;\r\n\r\n// kilobyte storage\r\nexport const KB_STORAGE = 1024;\r\nexport const BYTES_PER_CHAR = 2;\r\n\r\n// browser's localStorage max usage constants\r\nexport const LOCALSTORAGE_MAX_QUERY_AGE_MS = 24 * 60 * 60 * 1000; // 24 hours\r\nexport const LOCALSTORAGE_MAX_USAGE_KB = 5 * 1024; // 5M\r\nexport const LOCALSTORAGE_WARNING_THRESHOLD = 0.9;\r\nexport const LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS = 8000; // danger type toast duration\r\n\r\n// autocomplete score weights\r\nexport const SQL_KEYWORD_AUTOCOMPLETE_SCORE = 100;\r\nexport const SQL_FUNCTIONS_AUTOCOMPLETE_SCORE = 90;\r\nexport const SCHEMA_AUTOCOMPLETE_SCORE = 60;\r\nexport const TABLE_AUTOCOMPLETE_SCORE = 55;\r\nexport const COLUMN_AUTOCOMPLETE_SCORE = 50;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { SQL_KEYWORD_AUTOCOMPLETE_SCORE } from '../constants';\r\n\r\nconst SQL_KEYWORDS = [\r\n  'AND',\r\n  'AS',\r\n  'ASC',\r\n  'AVG',\r\n  'BY',\r\n  'CASE',\r\n  'COUNT',\r\n  'CREATE',\r\n  'CROSS',\r\n  'DATABASE',\r\n  'DEFAULT',\r\n  'DELETE',\r\n  'DESC',\r\n  'DISTINCT',\r\n  'DROP',\r\n  'ELSE',\r\n  'END',\r\n  'FOREIGN',\r\n  'FROM',\r\n  'GRANT',\r\n  'GROUP',\r\n  'HAVING',\r\n  'IF',\r\n  'INNER',\r\n  'INSERT',\r\n  'JOIN',\r\n  'KEY',\r\n  'LEFT',\r\n  'LIMIT',\r\n  'MAX',\r\n  'MIN',\r\n  'NATURAL',\r\n  'NOT',\r\n  'NULL',\r\n  'OFFSET',\r\n  'ON',\r\n  'OR',\r\n  'ORDER',\r\n  'OUTER',\r\n  'PRIMARY',\r\n  'REFERENCES',\r\n  'RIGHT',\r\n  'SELECT',\r\n  'SUM',\r\n  'TABLE',\r\n  'THEN',\r\n  'TYPE',\r\n  'UNION',\r\n  'UPDATE',\r\n  'WHEN',\r\n  'WHERE',\r\n];\r\n\r\nconst SQL_DATA_TYPES = [\r\n  'BIGINT',\r\n  'BINARY',\r\n  'BIT',\r\n  'CHAR',\r\n  'DATE',\r\n  'DECIMAL',\r\n  'DOUBLE',\r\n  'FLOAT',\r\n  'INT',\r\n  'INTEGER',\r\n  'MONEY',\r\n  'NUMBER',\r\n  'NUMERIC',\r\n  'REAL',\r\n  'SET',\r\n  'TEXT',\r\n  'TIMESTAMP',\r\n  'VARCHAR',\r\n];\r\n\r\nconst allKeywords = SQL_KEYWORDS.concat(SQL_DATA_TYPES);\r\n\r\nconst sqlKeywords = allKeywords.map(keyword => ({\r\n  meta: 'sql',\r\n  name: keyword,\r\n  score: SQL_KEYWORD_AUTOCOMPLETE_SCORE,\r\n  value: keyword,\r\n}));\r\n\r\nexport default sqlKeywords;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n/* eslint no-undef: 'error' */\r\n/* eslint no-param-reassign: [\"error\", { \"props\": false }] */\r\nimport moment from 'moment';\r\nimport { t, SupersetClient } from '@superset-ui/core';\r\nimport { getControlsState } from 'src/explore/store';\r\nimport { isFeatureEnabled, FeatureFlag } from '../featureFlags';\r\nimport {\r\n  getAnnotationJsonUrl,\r\n  getExploreUrl,\r\n  getLegacyEndpointType,\r\n  buildV1ChartDataPayload,\r\n  postForm,\r\n  shouldUseLegacyApi,\r\n  getChartDataUri,\r\n} from '../explore/exploreUtils';\r\nimport {\r\n  requiresQuery,\r\n  ANNOTATION_SOURCE_TYPES,\r\n} from '../modules/AnnotationTypes';\r\n\r\nimport { addDangerToast } from '../messageToasts/actions';\r\nimport { logEvent } from '../logger/actions';\r\nimport { Logger, LOG_ACTIONS_LOAD_CHART } from '../logger/LogUtils';\r\nimport { getClientErrorObject } from '../utils/getClientErrorObject';\r\nimport { allowCrossDomain as domainShardingEnabled } from '../utils/hostNamesConfig';\r\nimport { updateDataMask } from '../dataMask/actions';\r\nimport { waitForAsyncData } from '../middleware/asyncEvent';\r\n\r\nexport const CHART_UPDATE_STARTED = 'CHART_UPDATE_STARTED';\r\nexport function chartUpdateStarted(queryController, latestQueryFormData, key) {\r\n  return {\r\n    type: CHART_UPDATE_STARTED,\r\n    queryController,\r\n    latestQueryFormData,\r\n    key,\r\n  };\r\n}\r\n\r\nexport const CHART_UPDATE_SUCCEEDED = 'CHART_UPDATE_SUCCEEDED';\r\nexport function chartUpdateSucceeded(queriesResponse, key) {\r\n  return { type: CHART_UPDATE_SUCCEEDED, queriesResponse, key };\r\n}\r\n\r\nexport const CHART_UPDATE_STOPPED = 'CHART_UPDATE_STOPPED';\r\nexport function chartUpdateStopped(key) {\r\n  return { type: CHART_UPDATE_STOPPED, key };\r\n}\r\n\r\nexport const CHART_UPDATE_FAILED = 'CHART_UPDATE_FAILED';\r\nexport function chartUpdateFailed(queriesResponse, key) {\r\n  return { type: CHART_UPDATE_FAILED, queriesResponse, key };\r\n}\r\n\r\nexport const CHART_RENDERING_FAILED = 'CHART_RENDERING_FAILED';\r\nexport function chartRenderingFailed(error, key, stackTrace) {\r\n  return { type: CHART_RENDERING_FAILED, error, key, stackTrace };\r\n}\r\n\r\nexport const CHART_RENDERING_SUCCEEDED = 'CHART_RENDERING_SUCCEEDED';\r\nexport function chartRenderingSucceeded(key) {\r\n  return { type: CHART_RENDERING_SUCCEEDED, key };\r\n}\r\n\r\nexport const REMOVE_CHART = 'REMOVE_CHART';\r\nexport function removeChart(key) {\r\n  return { type: REMOVE_CHART, key };\r\n}\r\n\r\nexport const ANNOTATION_QUERY_SUCCESS = 'ANNOTATION_QUERY_SUCCESS';\r\nexport function annotationQuerySuccess(annotation, queryResponse, key) {\r\n  return { type: ANNOTATION_QUERY_SUCCESS, annotation, queryResponse, key };\r\n}\r\n\r\nexport const ANNOTATION_QUERY_STARTED = 'ANNOTATION_QUERY_STARTED';\r\nexport function annotationQueryStarted(annotation, queryController, key) {\r\n  return { type: ANNOTATION_QUERY_STARTED, annotation, queryController, key };\r\n}\r\n\r\nexport const ANNOTATION_QUERY_FAILED = 'ANNOTATION_QUERY_FAILED';\r\nexport function annotationQueryFailed(annotation, queryResponse, key) {\r\n  return { type: ANNOTATION_QUERY_FAILED, annotation, queryResponse, key };\r\n}\r\n\r\nexport const DYNAMIC_PLUGIN_CONTROLS_READY = 'DYNAMIC_PLUGIN_CONTROLS_READY';\r\nexport const dynamicPluginControlsReady = () => (dispatch, getState) => {\r\n  const state = getState();\r\n  const controlsState = getControlsState(\r\n    state.explore,\r\n    state.explore.form_data,\r\n  );\r\n  dispatch({\r\n    type: DYNAMIC_PLUGIN_CONTROLS_READY,\r\n    key: controlsState.slice_id.value,\r\n    controlsState,\r\n  });\r\n};\r\n\r\nconst legacyChartDataRequest = async (\r\n  formData,\r\n  resultFormat,\r\n  resultType,\r\n  force,\r\n  method = 'POST',\r\n  requestParams = {},\r\n) => {\r\n  const endpointType = getLegacyEndpointType({ resultFormat, resultType });\r\n  const allowDomainSharding =\r\n    // eslint-disable-next-line camelcase\r\n    domainShardingEnabled && requestParams?.dashboard_id;\r\n  const url = getExploreUrl({\r\n    formData,\r\n    endpointType,\r\n    force,\r\n    allowDomainSharding,\r\n    method,\r\n    requestParams: requestParams.dashboard_id\r\n      ? { dashboard_id: requestParams.dashboard_id }\r\n      : {},\r\n  });\r\n  const querySettings = {\r\n    ...requestParams,\r\n    url,\r\n    postPayload: { form_data: formData },\r\n  };\r\n\r\n  const clientMethod =\r\n    'GET' && isFeatureEnabled(FeatureFlag.CLIENT_CACHE)\r\n      ? SupersetClient.get\r\n      : SupersetClient.post;\r\n  return clientMethod(querySettings).then(({ json }) =>\r\n    // Make the legacy endpoint return a payload that corresponds to the\r\n    // V1 chart data endpoint response signature.\r\n    ({\r\n      result: [json],\r\n    }),\r\n  );\r\n};\r\n\r\nconst v1ChartDataRequest = async (\r\n  formData,\r\n  resultFormat,\r\n  resultType,\r\n  force,\r\n  requestParams,\r\n  setDataMask,\r\n  ownState,\r\n) => {\r\n  const payload = buildV1ChartDataPayload({\r\n    formData,\r\n    resultType,\r\n    resultFormat,\r\n    force,\r\n    setDataMask,\r\n    ownState,\r\n  });\r\n\r\n  // The dashboard id is added to query params for tracking purposes\r\n  const { slice_id: sliceId } = formData;\r\n  const { dashboard_id: dashboardId } = requestParams;\r\n\r\n  const qs = {};\r\n  if (sliceId !== undefined) qs.form_data = `{\"slice_id\":${sliceId}}`;\r\n  if (dashboardId !== undefined) qs.dashboard_id = dashboardId;\r\n  if (force !== false) qs.force = force;\r\n\r\n  const allowDomainSharding =\r\n    // eslint-disable-next-line camelcase\r\n    domainShardingEnabled && requestParams?.dashboard_id;\r\n  const url = getChartDataUri({\r\n    path: '/api/v1/chart/data',\r\n    qs,\r\n    allowDomainSharding,\r\n  }).toString();\r\n\r\n  const querySettings = {\r\n    ...requestParams,\r\n    url,\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  };\r\n  return SupersetClient.post(querySettings).then(({ json }) => json);\r\n};\r\n\r\nexport async function getChartDataRequest({\r\n  formData,\r\n  setDataMask = () => {},\r\n  resultFormat = 'json',\r\n  resultType = 'full',\r\n  force = false,\r\n  method = 'POST',\r\n  requestParams = {},\r\n  ownState = {},\r\n}) {\r\n  let querySettings = {\r\n    ...requestParams,\r\n  };\r\n\r\n  if (domainShardingEnabled) {\r\n    querySettings = {\r\n      ...querySettings,\r\n      mode: 'cors',\r\n      credentials: 'include',\r\n    };\r\n  }\r\n\r\n  if (shouldUseLegacyApi(formData)) {\r\n    return legacyChartDataRequest(\r\n      formData,\r\n      resultFormat,\r\n      resultType,\r\n      force,\r\n      method,\r\n      querySettings,\r\n    );\r\n  }\r\n  return v1ChartDataRequest(\r\n    formData,\r\n    resultFormat,\r\n    resultType,\r\n    force,\r\n    querySettings,\r\n    setDataMask,\r\n    ownState,\r\n  );\r\n}\r\n\r\nexport function runAnnotationQuery(\r\n  annotation,\r\n  timeout = 60,\r\n  formData = null,\r\n  key,\r\n  isDashboardRequest = false,\r\n  force = false,\r\n) {\r\n  return function (dispatch, getState) {\r\n    const sliceKey = key || Object.keys(getState().charts)[0];\r\n    // make a copy of formData, not modifying original formData\r\n    const fd = {\r\n      ...(formData || getState().charts[sliceKey].latestQueryFormData),\r\n    };\r\n\r\n    if (!requiresQuery(annotation.sourceType)) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    const granularity = fd.time_grain_sqla || fd.granularity;\r\n    fd.time_grain_sqla = granularity;\r\n    fd.granularity = granularity;\r\n    const overridesKeys = Object.keys(annotation.overrides);\r\n    if (overridesKeys.includes('since') || overridesKeys.includes('until')) {\r\n      annotation.overrides = {\r\n        ...annotation.overrides,\r\n        time_range: null,\r\n      };\r\n    }\r\n    const sliceFormData = Object.keys(annotation.overrides).reduce(\r\n      (d, k) => ({\r\n        ...d,\r\n        [k]: annotation.overrides[k] || fd[k],\r\n      }),\r\n      {},\r\n    );\r\n\r\n    if (!isDashboardRequest && fd) {\r\n      const hasExtraFilters = fd.extra_filters && fd.extra_filters.length > 0;\r\n      sliceFormData.extra_filters = hasExtraFilters\r\n        ? fd.extra_filters\r\n        : undefined;\r\n    }\r\n\r\n    const isNative = annotation.sourceType === ANNOTATION_SOURCE_TYPES.NATIVE;\r\n    const url = getAnnotationJsonUrl(\r\n      annotation.value,\r\n      sliceFormData,\r\n      isNative,\r\n      force,\r\n    );\r\n    const controller = new AbortController();\r\n    const { signal } = controller;\r\n\r\n    dispatch(annotationQueryStarted(annotation, controller, sliceKey));\r\n\r\n    return SupersetClient.get({\r\n      url,\r\n      signal,\r\n      timeout: timeout * 1000,\r\n    })\r\n      .then(({ json }) =>\r\n        dispatch(annotationQuerySuccess(annotation, json, sliceKey)),\r\n      )\r\n      .catch(response =>\r\n        getClientErrorObject(response).then(err => {\r\n          if (err.statusText === 'timeout') {\r\n            dispatch(\r\n              annotationQueryFailed(\r\n                annotation,\r\n                { error: 'Query timeout' },\r\n                sliceKey,\r\n              ),\r\n            );\r\n          } else if ((err.error || '').toLowerCase().includes('no data')) {\r\n            dispatch(annotationQuerySuccess(annotation, err, sliceKey));\r\n          } else if (err.statusText !== 'abort') {\r\n            dispatch(annotationQueryFailed(annotation, err, sliceKey));\r\n          }\r\n        }),\r\n      );\r\n  };\r\n}\r\n\r\nexport const TRIGGER_QUERY = 'TRIGGER_QUERY';\r\nexport function triggerQuery(value = true, key) {\r\n  return { type: TRIGGER_QUERY, value, key };\r\n}\r\n\r\n// this action is used for forced re-render without fetch data\r\nexport const RENDER_TRIGGERED = 'RENDER_TRIGGERED';\r\nexport function renderTriggered(value, key) {\r\n  return { type: RENDER_TRIGGERED, value, key };\r\n}\r\n\r\nexport const UPDATE_QUERY_FORM_DATA = 'UPDATE_QUERY_FORM_DATA';\r\nexport function updateQueryFormData(value, key) {\r\n  return { type: UPDATE_QUERY_FORM_DATA, value, key };\r\n}\r\n\r\n// in the sql lab -> explore flow, user can inline edit chart title,\r\n// then the chart will be assigned a new slice_id\r\nexport const UPDATE_CHART_ID = 'UPDATE_CHART_ID';\r\nexport function updateChartId(newId, key = 0) {\r\n  return { type: UPDATE_CHART_ID, newId, key };\r\n}\r\n\r\nexport const ADD_CHART = 'ADD_CHART';\r\nexport function addChart(chart, key) {\r\n  return { type: ADD_CHART, chart, key };\r\n}\r\n\r\nexport function exploreJSON(\r\n  formData,\r\n  force = false,\r\n  timeout = 60,\r\n  key,\r\n  method,\r\n  dashboardId,\r\n  ownState,\r\n) {\r\n  return async dispatch => {\r\n    const logStart = Logger.getTimestamp();\r\n    const controller = new AbortController();\r\n\r\n    const requestParams = {\r\n      signal: controller.signal,\r\n      timeout: timeout * 1000,\r\n    };\r\n    if (dashboardId) requestParams.dashboard_id = dashboardId;\r\n\r\n    const setDataMask = dataMask => {\r\n      dispatch(updateDataMask(formData.slice_id, dataMask));\r\n    };\r\n    const chartDataRequest = getChartDataRequest({\r\n      setDataMask,\r\n      formData,\r\n      resultFormat: 'json',\r\n      resultType: 'full',\r\n      force,\r\n      method,\r\n      requestParams,\r\n      ownState,\r\n    });\r\n\r\n    dispatch(chartUpdateStarted(controller, formData, key));\r\n\r\n    const chartDataRequestCaught = chartDataRequest\r\n      .then(response => {\r\n        const queriesResponse = response.result;\r\n        if (isFeatureEnabled(FeatureFlag.GLOBAL_ASYNC_QUERIES)) {\r\n          // deal with getChartDataRequest transforming the response data\r\n          const result = 'result' in response ? response.result[0] : response;\r\n          return waitForAsyncData(result);\r\n        }\r\n        return queriesResponse;\r\n      })\r\n      .then(queriesResponse => {\r\n        queriesResponse.forEach(resultItem =>\r\n          dispatch(\r\n            logEvent(LOG_ACTIONS_LOAD_CHART, {\r\n              slice_id: key,\r\n              applied_filters: resultItem.applied_filters,\r\n              is_cached: resultItem.is_cached,\r\n              force_refresh: force,\r\n              row_count: resultItem.rowcount,\r\n              datasource: formData.datasource,\r\n              start_offset: logStart,\r\n              ts: new Date().getTime(),\r\n              duration: Logger.getTimestamp() - logStart,\r\n              has_extra_filters:\r\n                formData.extra_filters && formData.extra_filters.length > 0,\r\n              viz_type: formData.viz_type,\r\n              data_age: resultItem.is_cached\r\n                ? moment(new Date()).diff(moment.utc(resultItem.cached_dttm))\r\n                : null,\r\n            }),\r\n          ),\r\n        );\r\n        return dispatch(chartUpdateSucceeded(queriesResponse, key));\r\n      })\r\n      .catch(response => {\r\n        if (isFeatureEnabled(FeatureFlag.GLOBAL_ASYNC_QUERIES)) {\r\n          return dispatch(chartUpdateFailed([response], key));\r\n        }\r\n\r\n        const appendErrorLog = (errorDetails, isCached) => {\r\n          dispatch(\r\n            logEvent(LOG_ACTIONS_LOAD_CHART, {\r\n              slice_id: key,\r\n              has_err: true,\r\n              is_cached: isCached,\r\n              error_details: errorDetails,\r\n              datasource: formData.datasource,\r\n              start_offset: logStart,\r\n              ts: new Date().getTime(),\r\n              duration: Logger.getTimestamp() - logStart,\r\n            }),\r\n          );\r\n        };\r\n        if (response.name === 'AbortError') {\r\n          appendErrorLog('abort');\r\n          return dispatch(chartUpdateStopped(key));\r\n        }\r\n        return getClientErrorObject(response).then(parsedResponse => {\r\n          if (response.statusText === 'timeout') {\r\n            appendErrorLog('timeout');\r\n          } else {\r\n            appendErrorLog(parsedResponse.error, parsedResponse.is_cached);\r\n          }\r\n          return dispatch(chartUpdateFailed([parsedResponse], key));\r\n        });\r\n      });\r\n\r\n    // only retrieve annotations when calling the legacy API\r\n    const annotationLayers = shouldUseLegacyApi(formData)\r\n      ? formData.annotation_layers || []\r\n      : [];\r\n    const isDashboardRequest = dashboardId > 0;\r\n\r\n    return Promise.all([\r\n      chartDataRequestCaught,\r\n      dispatch(triggerQuery(false, key)),\r\n      dispatch(updateQueryFormData(formData, key)),\r\n      ...annotationLayers.map(x =>\r\n        dispatch(\r\n          runAnnotationQuery(\r\n            x,\r\n            timeout,\r\n            formData,\r\n            key,\r\n            isDashboardRequest,\r\n            force,\r\n          ),\r\n        ),\r\n      ),\r\n    ]);\r\n  };\r\n}\r\n\r\nexport const GET_SAVED_CHART = 'GET_SAVED_CHART';\r\nexport function getSavedChart(\r\n  formData,\r\n  force = false,\r\n  timeout = 60,\r\n  key,\r\n  dashboardId,\r\n  ownState,\r\n) {\r\n  /*\r\n   * Perform a GET request to `/explore_json`.\r\n   *\r\n   * This will return the payload of a saved chart, optionally filtered by\r\n   * ad-hoc or extra filters from dashboards. Eg:\r\n   *\r\n   *  GET  /explore_json?{\"chart_id\":1}\r\n   *  GET  /explore_json?{\"chart_id\":1,\"extra_filters\":\"...\"}\r\n   *\r\n   */\r\n  return exploreJSON(\r\n    formData,\r\n    force,\r\n    timeout,\r\n    key,\r\n    'GET',\r\n    dashboardId,\r\n    ownState,\r\n  );\r\n}\r\n\r\nexport const POST_CHART_FORM_DATA = 'POST_CHART_FORM_DATA';\r\nexport function postChartFormData(\r\n  formData,\r\n  force = false,\r\n  timeout = 60,\r\n  key,\r\n  dashboardId,\r\n  ownState,\r\n) {\r\n  /*\r\n   * Perform a POST request to `/explore_json`.\r\n   *\r\n   * This will post the form data to the endpoint, returning a new chart.\r\n   *\r\n   */\r\n  return exploreJSON(\r\n    formData,\r\n    force,\r\n    timeout,\r\n    key,\r\n    'POST',\r\n    dashboardId,\r\n    ownState,\r\n  );\r\n}\r\n\r\nexport function redirectSQLLab(formData) {\r\n  return dispatch => {\r\n    getChartDataRequest({ formData, resultFormat: 'json', resultType: 'query' })\r\n      .then(({ result }) => {\r\n        const redirectUrl = '/superset/sqllab/';\r\n        const payload = {\r\n          datasourceKey: formData.datasource,\r\n          sql: result[0].query,\r\n        };\r\n        postForm(redirectUrl, payload);\r\n      })\r\n      .catch(() =>\r\n        dispatch(addDangerToast(t('An error occurred while loading the SQL'))),\r\n      );\r\n  };\r\n}\r\n\r\nexport function refreshChart(chartKey, force, dashboardId) {\r\n  return (dispatch, getState) => {\r\n    const chart = (getState().charts || {})[chartKey];\r\n    const timeout = getState().dashboardInfo.common.conf\r\n      .SUPERSET_WEBSERVER_TIMEOUT;\r\n\r\n    if (\r\n      !chart.latestQueryFormData ||\r\n      Object.keys(chart.latestQueryFormData).length === 0\r\n    ) {\r\n      return;\r\n    }\r\n    dispatch(\r\n      postChartFormData(\r\n        chart.latestQueryFormData,\r\n        force,\r\n        timeout,\r\n        chart.id,\r\n        dashboardId,\r\n        getState().dataMask[chart.id]?.ownState,\r\n      ),\r\n    );\r\n  };\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nexport * from './usePrevious';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport { useEffect, useRef } from 'react';\r\n\r\n/**\r\n * Pass in a piece of state.\r\n * This hook returns what the value of that state was in the previous render.\r\n * Returns undefined (or whatever value you specify) the first time.\r\n */\r\nexport function usePrevious<T>(value: T): T | undefined;\r\nexport function usePrevious<T, INIT>(value: T, initialValue: INIT): T | INIT;\r\nexport function usePrevious<T>(value: T, initialValue?: any): T {\r\n  const previous = useRef<T>(initialValue);\r\n  useEffect(() => {\r\n    // useEffect runs after the render completes\r\n    previous.current = value;\r\n  }, [value]);\r\n  return previous.current;\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { PropsWithChildren } from 'react';\r\nimport {\r\n  Alert as AntdAlert,\r\n  AlertProps as AntdAlertProps,\r\n} from 'src/common/components';\r\nimport { useTheme } from '@superset-ui/core';\r\nimport Icon from 'src/components/Icon';\r\nimport Icons from 'src/components/Icons';\r\n\r\nexport type AlertProps = PropsWithChildren<\r\n  AntdAlertProps & { roomBelow?: boolean }\r\n>;\r\n\r\nexport default function Alert(props: AlertProps) {\r\n  const {\r\n    type = 'info',\r\n    description,\r\n    showIcon = true,\r\n    closable = true,\r\n    roomBelow = false,\r\n    children,\r\n  } = props;\r\n\r\n  const theme = useTheme();\r\n  const { colors, typography, gridUnit } = theme;\r\n  const { alert, error, info, success } = colors;\r\n\r\n  let baseColor = info;\r\n  let AlertIcon = Icons.InfoSolid;\r\n  if (type === 'error') {\r\n    baseColor = error;\r\n    AlertIcon = Icons.ErrorSolid;\r\n  } else if (type === 'warning') {\r\n    baseColor = alert;\r\n    AlertIcon = Icons.AlertSolid;\r\n  } else if (type === 'success') {\r\n    baseColor = success;\r\n    AlertIcon = Icons.CircleCheckSolid;\r\n  }\r\n\r\n  return (\r\n    <AntdAlert\r\n      role=\"alert\"\r\n      showIcon={showIcon}\r\n      icon={<AlertIcon aria-label={`${type} icon`} />}\r\n      closeText={closable && <Icon name=\"x-small\" aria-label=\"close icon\" />}\r\n      css={{\r\n        marginBottom: roomBelow ? gridUnit * 4 : 0,\r\n        padding: `${gridUnit * 2}px ${gridUnit * 3}px`,\r\n        alignItems: 'flex-start',\r\n        border: 0,\r\n        backgroundColor: baseColor.light2,\r\n        '& .ant-alert-icon': {\r\n          marginRight: gridUnit * 2,\r\n        },\r\n        '& .ant-alert-message': {\r\n          color: baseColor.dark2,\r\n          fontSize: typography.sizes.m,\r\n          fontWeight: description\r\n            ? typography.weights.bold\r\n            : typography.weights.normal,\r\n        },\r\n        '& .ant-alert-description': {\r\n          color: baseColor.dark2,\r\n          fontSize: typography.sizes.m,\r\n        },\r\n      }}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </AntdAlert>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport {\r\n  Editor as OrigEditor,\r\n  IEditSession,\r\n  Position,\r\n  TextMode as OrigTextMode,\r\n} from 'brace';\r\nimport AceEditor, { AceEditorProps } from 'react-ace';\r\nimport AsyncEsmComponent, {\r\n  PlaceholderProps,\r\n} from 'src/components/AsyncEsmComponent';\r\n\r\nexport interface AceCompleterKeywordData {\r\n  name: string;\r\n  value: string;\r\n  score: number;\r\n  meta: string;\r\n}\r\n\r\nexport type TextMode = OrigTextMode & { $id: string };\r\n\r\nexport interface AceCompleter {\r\n  insertMatch: (\r\n    data?: Editor | { value: string } | string,\r\n    options?: AceCompleterKeywordData,\r\n  ) => void;\r\n}\r\n\r\nexport type Editor = OrigEditor & {\r\n  completer: AceCompleter;\r\n  completers: AceCompleter[];\r\n};\r\n\r\nexport interface AceCompleterKeyword extends AceCompleterKeywordData {\r\n  completer?: AceCompleter;\r\n}\r\n\r\n/**\r\n * Async loaders to import brace modules. Must manually create call `import(...)`\r\n * promises because webpack can only analyze asycn imports statically.\r\n */\r\nconst aceModuleLoaders = {\r\n  'mode/sql': () => import('brace/mode/sql'),\r\n  'mode/markdown': () => import('brace/mode/markdown'),\r\n  'mode/css': () => import('brace/mode/css'),\r\n  'mode/json': () => import('brace/mode/json'),\r\n  'mode/yaml': () => import('brace/mode/yaml'),\r\n  'mode/html': () => import('brace/mode/html'),\r\n  'mode/javascript': () => import('brace/mode/javascript'),\r\n  'theme/textmate': () => import('brace/theme/textmate'),\r\n  'theme/github': () => import('brace/theme/github'),\r\n  'ext/language_tools': () => import('brace/ext/language_tools'),\r\n};\r\n\r\nexport type AceModule = keyof typeof aceModuleLoaders;\r\n\r\nexport type AsyncAceEditorProps = AceEditorProps & {\r\n  keywords?: AceCompleterKeyword[];\r\n};\r\n\r\nexport type AceEditorMode = 'sql';\r\nexport type AceEditorTheme = 'textmate' | 'github';\r\nexport type AsyncAceEditorOptions = {\r\n  defaultMode?: AceEditorMode;\r\n  defaultTheme?: AceEditorTheme;\r\n  defaultTabSize?: number;\r\n  placeholder?: React.ComponentType<\r\n    PlaceholderProps & Partial<AceEditorProps>\r\n  > | null;\r\n};\r\n\r\n/**\r\n * Get an async AceEditor with automatical loading of specified ace modules.\r\n */\r\nexport default function AsyncAceEditor(\r\n  aceModules: AceModule[],\r\n  {\r\n    defaultMode,\r\n    defaultTheme,\r\n    defaultTabSize = 2,\r\n    placeholder,\r\n  }: AsyncAceEditorOptions = {},\r\n) {\r\n  return AsyncEsmComponent(async () => {\r\n    const { default: ace } = await import('brace');\r\n    const { default: ReactAceEditor } = await import('react-ace');\r\n\r\n    await Promise.all(aceModules.map(x => aceModuleLoaders[x]()));\r\n\r\n    const inferredMode =\r\n      defaultMode ||\r\n      aceModules.find(x => x.startsWith('mode/'))?.replace('mode/', '');\r\n    const inferredTheme =\r\n      defaultTheme ||\r\n      aceModules.find(x => x.startsWith('theme/'))?.replace('theme/', '');\r\n\r\n    return React.forwardRef<AceEditor, AsyncAceEditorProps>(\r\n      function ExtendedAceEditor(\r\n        {\r\n          keywords,\r\n          mode = inferredMode,\r\n          theme = inferredTheme,\r\n          tabSize = defaultTabSize,\r\n          defaultValue = '',\r\n          value = '',\r\n          ...props\r\n        },\r\n        ref,\r\n      ) {\r\n        if (keywords) {\r\n          const langTools = ace.acequire('ace/ext/language_tools');\r\n          const completer = {\r\n            getCompletions: (\r\n              editor: AceEditor,\r\n              session: IEditSession,\r\n              pos: Position,\r\n              prefix: string,\r\n              callback: (error: null, wordList: object[]) => void,\r\n            ) => {\r\n              // If the prefix starts with a number, don't try to autocomplete\r\n              if (!Number.isNaN(parseInt(prefix, 10))) {\r\n                return;\r\n              }\r\n              if ((session.getMode() as TextMode).$id === `ace/mode/${mode}`) {\r\n                callback(null, keywords);\r\n              }\r\n            },\r\n          };\r\n          langTools.setCompleters([completer]);\r\n        }\r\n        return (\r\n          <ReactAceEditor\r\n            ref={ref}\r\n            mode={mode}\r\n            theme={theme}\r\n            tabSize={tabSize}\r\n            defaultValue={defaultValue}\r\n            value={value || ''}\r\n            {...props}\r\n          />\r\n        );\r\n      },\r\n    );\r\n  }, placeholder);\r\n}\r\n\r\nexport const SQLEditor = AsyncAceEditor([\r\n  'mode/sql',\r\n  'theme/github',\r\n  'ext/language_tools',\r\n]);\r\n\r\nexport const FullSQLEditor = AsyncAceEditor(\r\n  ['mode/sql', 'theme/github', 'ext/language_tools'],\r\n  {\r\n    // a custom placeholder in SQL lab for less jumpy re-renders\r\n    placeholder: () => {\r\n      const gutterBackground = '#e8e8e8'; // from ace-github theme\r\n      return (\r\n        <div\r\n          style={{\r\n            height: '100%',\r\n          }}\r\n        >\r\n          <div\r\n            style={{ width: 41, height: '100%', background: gutterBackground }}\r\n          />\r\n          {/* make it possible to resize the placeholder */}\r\n          <div className=\"ace_content\" />\r\n        </div>\r\n      );\r\n    },\r\n  },\r\n);\r\n\r\nexport const MarkdownEditor = AsyncAceEditor([\r\n  'mode/markdown',\r\n  'theme/textmate',\r\n]);\r\n\r\nexport const TextAreaEditor = AsyncAceEditor([\r\n  'mode/markdown',\r\n  'mode/sql',\r\n  'mode/json',\r\n  'mode/html',\r\n  'mode/javascript',\r\n  'theme/textmate',\r\n]);\r\n\r\nexport const CssEditor = AsyncAceEditor(['mode/css', 'theme/github']);\r\n\r\nexport const JsonEditor = AsyncAceEditor(['mode/json', 'theme/github']);\r\n\r\n/**\r\n * JSON or Yaml config editor.\r\n */\r\nexport const ConfigEditor = AsyncAceEditor([\r\n  'mode/json',\r\n  'mode/yaml',\r\n  'theme/github',\r\n]);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { CSSProperties, useEffect, useState, RefObject } from 'react';\r\nimport Loading from '../Loading';\r\n\r\nexport type PlaceholderProps = {\r\n  showLoadingForImport?: boolean;\r\n  width?: string | number;\r\n  height?: string | number;\r\n  placeholderStyle?: CSSProperties;\r\n} & {\r\n  [key: string]: any;\r\n};\r\n\r\nfunction DefaultPlaceholder({\r\n  width,\r\n  height,\r\n  showLoadingForImport = false,\r\n  placeholderStyle: style,\r\n}: PlaceholderProps) {\r\n  return (\r\n    // since `width` defaults to 100%, we can display the placeholder once\r\n    // height is specified.\r\n    (height && (\r\n      <div key=\"async-asm-placeholder\" style={{ width, height, ...style }}>\r\n        {showLoadingForImport && <Loading position=\"floating\" />}\r\n      </div>\r\n    )) ||\r\n    // `|| null` is for in case of height=0.\r\n    null\r\n  );\r\n}\r\n\r\n/**\r\n * Asynchronously import an ES module as a React component, render a placeholder\r\n * first (if provided) and re-render once import is complete.\r\n */\r\nexport default function AsyncEsmComponent<\r\n  P = PlaceholderProps,\r\n  M = React.ComponentType<P> | { default: React.ComponentType<P> }\r\n>(\r\n  /**\r\n   * A promise generator that returns the React component to render.\r\n   */\r\n  loadComponent: Promise<M> | (() => Promise<M>),\r\n  /**\r\n   * Placeholder while still importing.\r\n   */\r\n  placeholder: React.ComponentType<\r\n    PlaceholderProps & Partial<P>\r\n  > | null = DefaultPlaceholder,\r\n) {\r\n  // component props + placeholder props\r\n  type FullProps = P & PlaceholderProps;\r\n  let promise: Promise<M> | undefined;\r\n  let component: React.ComponentType<FullProps>;\r\n\r\n  /**\r\n   * Safely wait for promise, make sure the loader function only execute once.\r\n   */\r\n  function waitForPromise() {\r\n    if (!promise) {\r\n      // load component on initialization\r\n      promise =\r\n        loadComponent instanceof Promise ? loadComponent : loadComponent();\r\n    }\r\n    if (!component) {\r\n      promise.then(result => {\r\n        component = ((result as { default?: React.ComponentType<P> }).default ||\r\n          result) as React.ComponentType<FullProps>;\r\n      });\r\n    }\r\n    return promise;\r\n  }\r\n\r\n  type AsyncComponent = React.ForwardRefExoticComponent<\r\n    React.PropsWithoutRef<FullProps> &\r\n      React.RefAttributes<React.ComponentType<FullProps>>\r\n  > & {\r\n    preload?: typeof waitForPromise;\r\n  };\r\n\r\n  const AsyncComponent: AsyncComponent = React.forwardRef(\r\n    function AsyncComponent(\r\n      props: FullProps,\r\n      ref: RefObject<React.ComponentType<FullProps>>,\r\n    ) {\r\n      const [loaded, setLoaded] = useState(component !== undefined);\r\n      useEffect(() => {\r\n        let isMounted = true;\r\n        if (!loaded) {\r\n          // update state to trigger a re-render\r\n          waitForPromise().then(() => {\r\n            if (isMounted) {\r\n              setLoaded(true);\r\n            }\r\n          });\r\n        }\r\n        return () => {\r\n          isMounted = false;\r\n        };\r\n      });\r\n      const Component = component || placeholder;\r\n      return Component ? (\r\n        // placeholder does not get the ref\r\n        <Component ref={Component === component ? ref : null} {...props} />\r\n      ) : null;\r\n    },\r\n  );\r\n  // preload the async component before rendering\r\n  AsyncComponent.preload = waitForPromise;\r\n\r\n  return AsyncComponent as AsyncComponent & {\r\n    preload: typeof waitForPromise;\r\n  };\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n// TODO: refactor this with `import { AsyncSelect } from src/components/Select`\r\nimport { Select } from 'src/components/Select';\r\nimport { t, SupersetClient } from '@superset-ui/core';\r\nimport { getClientErrorObject } from '../../utils/getClientErrorObject';\r\n\r\nconst propTypes = {\r\n  dataEndpoint: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  mutator: PropTypes.func.isRequired,\r\n  onAsyncError: PropTypes.func,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.arrayOf(PropTypes.number),\r\n  ]),\r\n  valueRenderer: PropTypes.func,\r\n  placeholder: PropTypes.string,\r\n  autoSelect: PropTypes.bool,\r\n};\r\n\r\nconst defaultProps = {\r\n  placeholder: t('Select ...'),\r\n  onAsyncError: () => {},\r\n};\r\n\r\nclass AsyncSelect extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      options: [],\r\n    };\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchOptions();\r\n  }\r\n\r\n  onChange(option) {\r\n    this.props.onChange(option);\r\n  }\r\n\r\n  fetchOptions() {\r\n    this.setState({ isLoading: true });\r\n    const { mutator, dataEndpoint } = this.props;\r\n\r\n    return SupersetClient.get({ endpoint: dataEndpoint })\r\n      .then(({ json }) => {\r\n        const options = mutator ? mutator(json) : json;\r\n\r\n        this.setState({ options, isLoading: false });\r\n\r\n        if (!this.props.value && this.props.autoSelect && options.length > 0) {\r\n          this.onChange(options[0]);\r\n        }\r\n      })\r\n      .catch(response =>\r\n        getClientErrorObject(response).then(error => {\r\n          this.props.onAsyncError(error.error || error.statusText || error);\r\n          this.setState({ isLoading: false });\r\n        }),\r\n      );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Select\r\n        placeholder={this.props.placeholder}\r\n        options={this.state.options}\r\n        value={this.props.value}\r\n        isLoading={this.state.isLoading}\r\n        onChange={this.onChange}\r\n        valueRenderer={this.props.valueRenderer}\r\n        {...this.props}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nAsyncSelect.propTypes = propTypes;\r\nAsyncSelect.defaultProps = defaultProps;\r\n\r\nexport default AsyncSelect;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { styled } from '@superset-ui/core';\r\nimport { CheckboxChecked, CheckboxUnchecked } from 'src/components/Checkbox';\r\n\r\ninterface CheckboxProps {\r\n  checked: boolean;\r\n  onChange: (val?: boolean) => void;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nconst Styles = styled.span`\r\n  &,\r\n  & svg {\r\n    vertical-align: top;\r\n  }\r\n`;\r\n\r\nexport default function Checkbox({ checked, onChange, style }: CheckboxProps) {\r\n  return (\r\n    <Styles\r\n      style={style}\r\n      onClick={() => {\r\n        onChange(!checked);\r\n      }}\r\n      role=\"checkbox\"\r\n      tabIndex={0}\r\n      aria-checked={checked}\r\n      aria-label=\"Checkbox\"\r\n    >\r\n      {checked ? <CheckboxChecked /> : <CheckboxUnchecked />}\r\n    </Styles>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { useTheme } from '@superset-ui/core';\r\n\r\nexport const CheckboxChecked = () => {\r\n  const theme = useTheme();\r\n  return (\r\n    <svg\r\n      width=\"18\"\r\n      height=\"18\"\r\n      viewBox=\"0 0 18 18\"\r\n      fill=\"none\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M16 0H2C0.89 0 0 0.9 0 2V16C0 17.1 0.89 18 2 18H16C17.11 18 18 17.1 18 16V2C18 0.9 17.11 0 16 0Z\"\r\n        fill={theme.colors.primary.base}\r\n      />\r\n      <path\r\n        d=\"M7 14L2 9L3.41 7.59L7 11.17L14.59 3.58L16 5L7 14Z\"\r\n        fill=\"white\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const CheckboxHalfChecked = () => {\r\n  const theme = useTheme();\r\n  return (\r\n    <svg\r\n      width=\"18\"\r\n      height=\"18\"\r\n      viewBox=\"0 0 18 18\"\r\n      fill=\"none\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M16 0H2C0.9 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z\"\r\n        fill={theme.colors.grayscale.light1}\r\n      />\r\n      <path d=\"M14 10H4V8H14V10Z\" fill=\"white\" />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport const CheckboxUnchecked = () => {\r\n  const theme = useTheme();\r\n  return (\r\n    <svg\r\n      width=\"18\"\r\n      height=\"18\"\r\n      viewBox=\"0 0 18 18\"\r\n      fill=\"none\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M16 0H2C0.9 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z\"\r\n        fill={theme.colors.grayscale.light2}\r\n      />\r\n      <path d=\"M16 2V16H2V2H16V2Z\" fill=\"white\" />\r\n    </svg>\r\n  );\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport { default } from 'src/components/Checkbox/Checkbox';\r\nexport * from 'src/components/Checkbox/CheckboxIcons';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { DatePicker as AntdDatePicker } from 'antd';\r\n\r\nexport const { RangePicker } = AntdDatePicker;\r\nexport const DatePicker = AntdDatePicker;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { t } from '@superset-ui/core';\r\nimport ErrorMessageWithStackTrace from 'src/components/ErrorMessage/ErrorMessageWithStackTrace';\r\n\r\nconst propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  onError: PropTypes.func,\r\n  showMessage: PropTypes.bool,\r\n};\r\nconst defaultProps = {\r\n  onError: () => {},\r\n  showMessage: true,\r\n};\r\n\r\nexport default class ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { error: null, info: null };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    if (this.props.onError) this.props.onError(error, info);\r\n    this.setState({ error, info });\r\n  }\r\n\r\n  render() {\r\n    const { error, info } = this.state;\r\n    if (error) {\r\n      const firstLine = error.toString();\r\n      const message = (\r\n        <span>\r\n          <strong>{t('Unexpected error')}</strong>\r\n          {firstLine ? `: ${firstLine}` : ''}\r\n        </span>\r\n      );\r\n      if (this.props.showMessage) {\r\n        return (\r\n          <ErrorMessageWithStackTrace\r\n            subtitle={message}\r\n            copyText={message}\r\n            stackTrace={info ? info.componentStack : null}\r\n          />\r\n        );\r\n      }\r\n      return null;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\nErrorBoundary.propTypes = propTypes;\r\nErrorBoundary.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { t } from '@superset-ui/core';\r\n\r\nimport getErrorMessageComponentRegistry from './getErrorMessageComponentRegistry';\r\nimport { SupersetError, ErrorSource } from './types';\r\nimport ErrorAlert from './ErrorAlert';\r\n\r\nconst DEFAULT_TITLE = t('Unexpected error');\r\n\r\ntype Props = {\r\n  title?: string;\r\n  error?: SupersetError;\r\n  link?: string;\r\n  subtitle?: React.ReactNode;\r\n  copyText?: string;\r\n  stackTrace?: string;\r\n  source?: ErrorSource;\r\n};\r\n\r\nexport default function ErrorMessageWithStackTrace({\r\n  title = DEFAULT_TITLE,\r\n  error,\r\n  subtitle,\r\n  copyText,\r\n  link,\r\n  stackTrace,\r\n  source,\r\n}: Props) {\r\n  // Check if a custom error message component was registered for this message\r\n  if (error) {\r\n    const ErrorMessageComponent = getErrorMessageComponentRegistry().get(\r\n      error.error_type,\r\n    );\r\n    if (ErrorMessageComponent) {\r\n      return (\r\n        <ErrorMessageComponent\r\n          error={error}\r\n          source={source}\r\n          subtitle={subtitle}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ErrorAlert\r\n      level=\"warning\"\r\n      title={title}\r\n      subtitle={subtitle}\r\n      copyText={copyText}\r\n      source={source}\r\n      body={\r\n        link || stackTrace ? (\r\n          <>\r\n            {link && (\r\n              <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                (Request Access)\r\n              </a>\r\n            )}\r\n            <br />\r\n            {stackTrace && <pre>{stackTrace}</pre>}\r\n          </>\r\n        ) : undefined\r\n      }\r\n    />\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Row, Col } from 'src/common/components';\r\n\r\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\r\n\r\nconst STYLE_ROW = { marginTop: '5px', minHeight: '30px' };\r\nconst STYLE_RALIGN = { textAlign: 'right' };\r\n\r\nconst propTypes = {\r\n  label: PropTypes.string.isRequired,\r\n  tooltip: PropTypes.string,\r\n  control: PropTypes.node.isRequired,\r\n  isCheckbox: PropTypes.bool,\r\n};\r\n\r\nconst defaultProps = {\r\n  tooltip: null,\r\n  isCheckbox: false,\r\n};\r\n\r\nexport default function FormRow({ label, tooltip, control, isCheckbox }) {\r\n  const labelAndTooltip = (\r\n    <span>\r\n      {label}{' '}\r\n      {tooltip && (\r\n        <InfoTooltipWithTrigger\r\n          placement=\"top\"\r\n          label={label}\r\n          tooltip={tooltip}\r\n        />\r\n      )}\r\n    </span>\r\n  );\r\n  if (isCheckbox) {\r\n    return (\r\n      <Row style={STYLE_ROW} gutter={16}>\r\n        <Col xs={24} md={8} style={STYLE_RALIGN}>\r\n          {control}\r\n        </Col>\r\n        <Col xs={24} md={16}>\r\n          {labelAndTooltip}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n  return (\r\n    <Row style={STYLE_ROW} gutter={16}>\r\n      <Col xs={24} md={8} style={STYLE_RALIGN}>\r\n        {labelAndTooltip}\r\n      </Col>\r\n      <Col xs={24} md={16}>\r\n        {control}\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\nFormRow.propTypes = propTypes;\r\nFormRow.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React from 'react';\r\nimport { styled } from '@superset-ui/core';\r\nimport cls from 'classnames';\r\n\r\nexport type PositionOption =\r\n  | 'floating'\r\n  | 'inline'\r\n  | 'inline-centered'\r\n  | 'normal';\r\nexport interface Props {\r\n  position?: PositionOption;\r\n  className?: string;\r\n  image?: string;\r\n}\r\n\r\nconst LoaderImg = styled.img`\r\n  z-index: 99;\r\n  width: 50px;\r\n  position: relative;\r\n  margin: 10px;\r\n  &.inline {\r\n    margin: 0px;\r\n    width: 30px;\r\n  }\r\n  &.inline-centered {\r\n    margin: 0 auto;\r\n    width: 30px;\r\n    display: block;\r\n  }\r\n  &.floating {\r\n    padding: 0;\r\n    margin: 0;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n  }\r\n`;\r\nexport default function Loading({\r\n  position = 'floating',\r\n  image = '/static/assets/images/loading.gif',\r\n  className,\r\n}: Props) {\r\n  return (\r\n    <LoaderImg\r\n      className={cls('loading', position, className)}\r\n      alt=\"Loading...\"\r\n      src={image}\r\n      role=\"status\"\r\n      aria-live=\"polite\"\r\n      aria-label=\"Loading\"\r\n    />\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Modal from 'src/components/Modal';\r\nimport Button from 'src/components/Button';\r\n\r\nconst propTypes = {\r\n  dialogClassName: PropTypes.string,\r\n  triggerNode: PropTypes.node.isRequired,\r\n  modalTitle: PropTypes.node,\r\n  modalBody: PropTypes.node, // not required because it can be generated by beforeOpen\r\n  modalFooter: PropTypes.node,\r\n  beforeOpen: PropTypes.func,\r\n  onExit: PropTypes.func,\r\n  isButton: PropTypes.bool,\r\n  className: PropTypes.string,\r\n  tooltip: PropTypes.string,\r\n  width: PropTypes.string,\r\n  maxWidth: PropTypes.string,\r\n  responsive: PropTypes.bool,\r\n};\r\n\r\nconst defaultProps = {\r\n  beforeOpen: () => {},\r\n  onExit: () => {},\r\n  isButton: false,\r\n  className: '',\r\n  modalTitle: '',\r\n};\r\n\r\nexport default class ModalTrigger extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showModal: false,\r\n    };\r\n    this.open = this.open.bind(this);\r\n    this.close = this.close.bind(this);\r\n  }\r\n\r\n  close() {\r\n    this.setState(() => ({ showModal: false }));\r\n  }\r\n\r\n  open(e) {\r\n    e.preventDefault();\r\n    this.props.beforeOpen();\r\n    this.setState(() => ({ showModal: true }));\r\n  }\r\n\r\n  renderModal() {\r\n    return (\r\n      <Modal\r\n        wrapClassName={this.props.dialogClassName}\r\n        className={this.props.className}\r\n        show={this.state.showModal}\r\n        onHide={this.close}\r\n        afterClose={this.props.onExit}\r\n        title={this.props.modalTitle}\r\n        footer={this.props.modalFooter}\r\n        hideFooter={!this.props.modalFooter}\r\n        width={this.props.width}\r\n        maxWidth={this.props.maxWidth}\r\n        responsive={this.props.responsive}\r\n      >\r\n        {this.props.modalBody}\r\n      </Modal>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.props.isButton) {\r\n      return (\r\n        <>\r\n          <Button\r\n            className=\"modal-trigger\"\r\n            data-test=\"btn-modal-trigger\"\r\n            tooltip={this.props.tooltip}\r\n            onClick={this.open}\r\n          >\r\n            {this.props.triggerNode}\r\n          </Button>\r\n          {this.renderModal()}\r\n        </>\r\n      );\r\n    }\r\n    /* eslint-disable jsx-a11y/interactive-supports-focus */\r\n    return (\r\n      <>\r\n        <span data-test=\"span-modal-trigger\" onClick={this.open} role=\"button\">\r\n          {this.props.triggerNode}\r\n        </span>\r\n        {this.renderModal()}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nModalTrigger.propTypes = propTypes;\r\nModalTrigger.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PaginationButtonProps } from './types';\r\n\r\nexport function Ellipsis({ disabled, onClick }: PaginationButtonProps) {\r\n  return (\r\n    <li className={classNames({ disabled })}>\r\n      <span\r\n        role=\"button\"\r\n        tabIndex={disabled ? -1 : 0}\r\n        onClick={e => {\r\n          e.preventDefault();\r\n          if (!disabled) onClick(e);\r\n        }}\r\n      >\r\n        …\r\n      </span>\r\n    </li>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PaginationButtonProps } from './types';\r\n\r\ninterface PaginationItemButton extends PaginationButtonProps {\r\n  active?: boolean;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport function Item({ active, children, onClick }: PaginationItemButton) {\r\n  return (\r\n    <li className={classNames({ active })}>\r\n      <span\r\n        role=\"button\"\r\n        tabIndex={active ? -1 : 0}\r\n        onClick={e => {\r\n          e.preventDefault();\r\n          if (!active) onClick(e);\r\n        }}\r\n      >\r\n        {children}\r\n      </span>\r\n    </li>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PaginationButtonProps } from './types';\r\n\r\nexport function Next({ disabled, onClick }: PaginationButtonProps) {\r\n  return (\r\n    <li className={classNames({ disabled })}>\r\n      <span\r\n        role=\"button\"\r\n        tabIndex={disabled ? -1 : 0}\r\n        onClick={e => {\r\n          e.preventDefault();\r\n          if (!disabled) onClick(e);\r\n        }}\r\n      >\r\n        »\r\n      </span>\r\n    </li>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PaginationButtonProps } from './types';\r\n\r\nexport function Prev({ disabled, onClick }: PaginationButtonProps) {\r\n  return (\r\n    <li className={classNames({ disabled })}>\r\n      <span\r\n        role=\"button\"\r\n        tabIndex={disabled ? -1 : 0}\r\n        onClick={e => {\r\n          e.preventDefault();\r\n          if (!disabled) onClick(e);\r\n        }}\r\n      >\r\n        «\r\n      </span>\r\n    </li>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React from 'react';\r\nimport { styled } from '@superset-ui/core';\r\nimport { Next } from './Next';\r\nimport { Prev } from './Prev';\r\nimport { Item } from './Item';\r\nimport { Ellipsis } from './Ellipsis';\r\n\r\ninterface PaginationProps {\r\n  children: JSX.Element | JSX.Element[];\r\n}\r\n\r\nconst PaginationList = styled.ul`\r\n  display: inline-block;\r\n  margin: 16px 0;\r\n  padding: 0;\r\n\r\n  li {\r\n    display: inline;\r\n    margin: 0 4px;\r\n\r\n    span {\r\n      padding: 8px 12px;\r\n      text-decoration: none;\r\n      background-color: ${({ theme }) => theme.colors.grayscale.light5};\r\n      border-radius: ${({ theme }) => theme.borderRadius}px;\r\n\r\n      &:hover,\r\n      &:focus {\r\n        z-index: 2;\r\n        color: ${({ theme }) => theme.colors.grayscale.dark1};\r\n        background-color: ${({ theme }) => theme.colors.grayscale.light3};\r\n      }\r\n    }\r\n\r\n    &.disabled {\r\n      span {\r\n        background-color: transparent;\r\n        cursor: default;\r\n\r\n        &:focus {\r\n          outline: none;\r\n        }\r\n      }\r\n    }\r\n    &.active {\r\n      span {\r\n        z-index: 3;\r\n        color: ${({ theme }) => theme.colors.grayscale.light5};\r\n        cursor: default;\r\n        background-color: ${({ theme }) => theme.colors.primary.base};\r\n\r\n        &:focus {\r\n          outline: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nfunction Pagination({ children }: PaginationProps) {\r\n  return <PaginationList role=\"navigation\">{children}</PaginationList>;\r\n}\r\n\r\nPagination.Next = Next;\r\nPagination.Prev = Prev;\r\nPagination.Item = Item;\r\nPagination.Ellipsis = Ellipsis;\r\n\r\nexport default Pagination;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { Popover } from 'antd';\r\n\r\n// Eventually Popover can be wrapped and customized in this file\r\n// for now we're just redirecting\r\nexport default Popover;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { MouseEventHandler, ReactNode } from 'react';\r\nimport { useTheme } from '@superset-ui/core';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport Icon from 'src/components/Icon';\r\n\r\nexport interface PopoverSectionProps {\r\n  title: string;\r\n  isSelected?: boolean;\r\n  onSelect?: MouseEventHandler<HTMLDivElement>;\r\n  info?: string;\r\n  children?: ReactNode;\r\n}\r\n\r\nexport default function PopoverSection({\r\n  title,\r\n  isSelected,\r\n  children,\r\n  onSelect,\r\n  info,\r\n}: PopoverSectionProps) {\r\n  const theme = useTheme();\r\n  return (\r\n    <div\r\n      css={{\r\n        paddingBottom: theme.gridUnit * 2,\r\n        opacity: isSelected ? 1 : theme.opacity.mediumHeavy,\r\n      }}\r\n    >\r\n      <div\r\n        role=\"button\"\r\n        tabIndex={0}\r\n        onClick={onSelect}\r\n        css={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          cursor: onSelect ? 'pointer' : 'default',\r\n        }}\r\n      >\r\n        <strong data-test=\"popover-title\">{title}</strong>\r\n        {info && (\r\n          <Tooltip title={info} css={{ marginLeft: theme.gridUnit }}>\r\n            <Icon\r\n              role=\"img\"\r\n              name=\"info-solid\"\r\n              width={14}\r\n              height={14}\r\n              color={theme.colors.grayscale.light1}\r\n            />\r\n          </Tooltip>\r\n        )}\r\n        <Icon\r\n          role=\"img\"\r\n          name=\"check\"\r\n          color={\r\n            isSelected ? theme.colors.primary.base : theme.colors.grayscale.base\r\n          }\r\n        />\r\n      </div>\r\n      <div\r\n        css={{\r\n          marginLeft: theme.gridUnit,\r\n          marginTop: theme.gridUnit,\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { styled } from '@superset-ui/core';\r\nimport { Radio as AntdRadio } from 'antd';\r\n\r\nconst StyledRadio = styled(AntdRadio)`\r\n  .ant-radio-inner {\r\n    top: -1px;\r\n    left: 2px;\r\n    width: ${({ theme }) => theme.gridUnit * 4}px;\r\n    height: ${({ theme }) => theme.gridUnit * 4}px;\r\n    border-width: 2px;\r\n    border-color: ${({ theme }) => theme.colors.grayscale.light2};\r\n  }\r\n\r\n  .ant-radio.ant-radio-checked {\r\n    .ant-radio-inner {\r\n      border-width: ${({ theme }) => theme.gridUnit + 1}px;\r\n      border-color: ${({ theme }) => theme.colors.primary.base};\r\n    }\r\n\r\n    .ant-radio-inner::after {\r\n      background-color: ${({ theme }) => theme.colors.grayscale.light5};\r\n      top: 0;\r\n      left: 0;\r\n      width: ${({ theme }) => theme.gridUnit + 2}px;\r\n      height: ${({ theme }) => theme.gridUnit + 2}px;\r\n    }\r\n  }\r\n\r\n  .ant-radio:hover,\r\n  .ant-radio:focus {\r\n    .ant-radio-inner {\r\n      border-color: ${({ theme }) => theme.colors.primary.dark1};\r\n    }\r\n  }\r\n`;\r\nconst StyledGroup = styled(AntdRadio.Group)`\r\n  font-size: inherit;\r\n`;\r\n\r\nexport const Radio = Object.assign(StyledRadio, {\r\n  Group: StyledGroup,\r\n});\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport AntDSlider, {\r\n  SliderSingleProps,\r\n  SliderRangeProps,\r\n} from 'antd/lib/slider';\r\n\r\nexport { SliderSingleProps, SliderRangeProps };\r\n\r\nexport default function Slider(props: SliderSingleProps | SliderRangeProps) {\r\n  return <AntDSlider {...props} css={{ marginLeft: 0, marginRight: 0 }} />;\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { styled, t } from '@superset-ui/core';\r\nimport { useFilters, usePagination, useSortBy, useTable } from 'react-table';\r\nimport { Empty } from 'src/common/components';\r\nimport { TableCollection, Pagination } from 'src/components/dataViewCommon';\r\nimport { SortColumns } from './types';\r\n\r\nconst DEFAULT_PAGE_SIZE = 10;\r\n\r\nexport enum EmptyWrapperType {\r\n  Default = 'Default',\r\n  Small = 'Small',\r\n}\r\n\r\nexport interface TableViewProps {\r\n  columns: any[];\r\n  data: any[];\r\n  pageSize?: number;\r\n  initialPageIndex?: number;\r\n  initialSortBy?: SortColumns;\r\n  loading?: boolean;\r\n  withPagination?: boolean;\r\n  emptyWrapperType?: EmptyWrapperType;\r\n  noDataText?: string;\r\n  className?: string;\r\n  isPaginationSticky?: boolean;\r\n  showRowCount?: boolean;\r\n  scrollTable?: boolean;\r\n}\r\n\r\nconst EmptyWrapper = styled.div`\r\n  margin: ${({ theme }) => theme.gridUnit * 40}px 0;\r\n`;\r\n\r\nconst TableViewStyles = styled.div<{\r\n  isPaginationSticky?: boolean;\r\n  scrollTable?: boolean;\r\n}>`\r\n  ${({ scrollTable, theme }) =>\r\n    scrollTable &&\r\n    `\r\n    height: 300px;\r\n    margin-bottom: ${theme.gridUnit * 4}px;\r\n    overflow: auto;\r\n  `}\r\n\r\n  .table-cell.table-cell {\r\n    vertical-align: top;\r\n  }\r\n\r\n  .pagination-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: ${({ theme }) => theme.colors.grayscale.light5};\r\n\r\n    ${({ theme, isPaginationSticky }) =>\r\n      isPaginationSticky &&\r\n      `\r\n        position: sticky;\r\n        bottom: 0;\r\n        left: 0;\r\n    `};\r\n  }\r\n\r\n  .row-count-container {\r\n    margin-top: ${({ theme }) => theme.gridUnit * 2}px;\r\n    color: ${({ theme }) => theme.colors.grayscale.base};\r\n  }\r\n`;\r\n\r\nconst TableView = ({\r\n  columns,\r\n  data,\r\n  pageSize: initialPageSize,\r\n  initialPageIndex,\r\n  initialSortBy = [],\r\n  loading = false,\r\n  withPagination = true,\r\n  emptyWrapperType = EmptyWrapperType.Default,\r\n  noDataText,\r\n  showRowCount = true,\r\n  ...props\r\n}: TableViewProps) => {\r\n  const initialState = {\r\n    pageSize: initialPageSize ?? DEFAULT_PAGE_SIZE,\r\n    pageIndex: initialPageIndex ?? 0,\r\n    sortBy: initialSortBy,\r\n  };\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    page,\r\n    rows,\r\n    prepareRow,\r\n    pageCount,\r\n    gotoPage,\r\n    state: { pageIndex, pageSize },\r\n  } = useTable(\r\n    {\r\n      columns,\r\n      data,\r\n      initialState,\r\n    },\r\n    useFilters,\r\n    useSortBy,\r\n    usePagination,\r\n  );\r\n\r\n  const content = withPagination ? page : rows;\r\n\r\n  let EmptyWrapperComponent;\r\n  switch (emptyWrapperType) {\r\n    case EmptyWrapperType.Small:\r\n      EmptyWrapperComponent = ({ children }: any) => <>{children}</>;\r\n      break;\r\n    case EmptyWrapperType.Default:\r\n    default:\r\n      EmptyWrapperComponent = ({ children }: any) => (\r\n        <EmptyWrapper>{children}</EmptyWrapper>\r\n      );\r\n  }\r\n\r\n  const isEmpty = !loading && content.length === 0;\r\n\r\n  return (\r\n    <TableViewStyles {...props}>\r\n      <TableCollection\r\n        getTableProps={getTableProps}\r\n        getTableBodyProps={getTableBodyProps}\r\n        prepareRow={prepareRow}\r\n        headerGroups={headerGroups}\r\n        rows={content}\r\n        columns={columns}\r\n        loading={loading}\r\n      />\r\n      {isEmpty && (\r\n        <EmptyWrapperComponent>\r\n          {noDataText ? (\r\n            <Empty\r\n              image={Empty.PRESENTED_IMAGE_SIMPLE}\r\n              description={noDataText}\r\n            />\r\n          ) : (\r\n            <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />\r\n          )}\r\n        </EmptyWrapperComponent>\r\n      )}\r\n      {pageCount > 1 && withPagination && (\r\n        <div className=\"pagination-container\">\r\n          <Pagination\r\n            totalPages={pageCount || 0}\r\n            currentPage={pageCount ? pageIndex + 1 : 0}\r\n            onChange={(p: number) => gotoPage(p - 1)}\r\n            hideFirstAndLastPageLinks\r\n          />\r\n          {showRowCount && (\r\n            <div className=\"row-count-container\">\r\n              {!loading &&\r\n                t(\r\n                  '%s-%s of %s',\r\n                  pageSize * pageIndex + (page.length && 1),\r\n                  pageSize * pageIndex + page.length,\r\n                  data.length,\r\n                )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </TableViewStyles>\r\n  );\r\n};\r\n\r\nexport default React.memo(TableView);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport * from './TableView';\r\nexport { default } from './TableView';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { css, styled } from '@superset-ui/core';\r\nimport AntDTabs, { TabsProps as AntDTabsProps } from 'antd/lib/tabs';\r\nimport Icon from 'src/components/Icon';\r\n\r\nexport interface TabsProps extends AntDTabsProps {\r\n  fullWidth?: boolean;\r\n  allowOverflow?: boolean;\r\n}\r\n\r\nconst StyledTabs = ({\r\n  animated = false,\r\n  fullWidth = true,\r\n  allowOverflow = true,\r\n  ...props\r\n}: TabsProps) => (\r\n  <AntDTabs\r\n    animated={animated}\r\n    {...props}\r\n    css={theme => css`\r\n      overflow: ${allowOverflow ? 'visible' : 'hidden'};\r\n\r\n      .ant-tabs-content-holder {\r\n        overflow: ${allowOverflow ? 'visible' : 'auto'};\r\n      }\r\n      .ant-tabs-tab {\r\n        flex: 1 1 auto;\r\n        &.ant-tabs-tab-active .ant-tabs-tab-btn {\r\n          color: inherit;\r\n        }\r\n        &:hover {\r\n          .anchor-link-container {\r\n            cursor: pointer;\r\n            .fa.fa-link {\r\n              visibility: visible;\r\n            }\r\n          }\r\n        }\r\n        .short-link-trigger.btn {\r\n          padding: 0 ${theme.gridUnit}px;\r\n          & > .fa.fa-link {\r\n            top: 0;\r\n          }\r\n        }\r\n      }\r\n      ${fullWidth &&\r\n      css`\r\n        .ant-tabs-nav-list {\r\n          width: 100%;\r\n        }\r\n      `};\r\n\r\n      .ant-tabs-tab-btn {\r\n        display: flex;\r\n        flex: 1 1 auto;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: ${theme.typography.sizes.s}px;\r\n        text-align: center;\r\n        text-transform: uppercase;\r\n        user-select: none;\r\n        .required {\r\n          margin-left: ${theme.gridUnit / 2}px;\r\n          color: ${theme.colors.error.base};\r\n        }\r\n      }\r\n      .ant-tabs-ink-bar {\r\n        background: ${theme.colors.secondary.base};\r\n      }\r\n    `}\r\n  />\r\n);\r\n\r\nconst StyledTabPane = styled(AntDTabs.TabPane)``;\r\n\r\nconst Tabs = Object.assign(StyledTabs, {\r\n  TabPane: StyledTabPane,\r\n});\r\n\r\nconst StyledEditableTabs = styled(StyledTabs)`\r\n  .ant-tabs-content-holder {\r\n    background: white;\r\n  }\r\n\r\n  & > .ant-tabs-nav {\r\n    margin-bottom: 0;\r\n  }\r\n\r\n  .ant-tabs-tab-remove {\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n    height: ${({ theme }) => theme.gridUnit * 6}px;\r\n  }\r\n\r\n  ${({ fullWidth }) =>\r\n    fullWidth &&\r\n    css`\r\n      .ant-tabs-nav-list {\r\n        width: 100%;\r\n      }\r\n    `}\r\n`;\r\n\r\nexport const EditableTabs = Object.assign(StyledEditableTabs, {\r\n  TabPane: StyledTabPane,\r\n});\r\n\r\nEditableTabs.defaultProps = {\r\n  type: 'editable-card',\r\n  fullWidth: false,\r\n  animated: { inkBar: true, tabPane: false },\r\n};\r\n\r\nEditableTabs.TabPane.defaultProps = {\r\n  closeIcon: (\r\n    <Icon role=\"button\" tabIndex={0} cursor=\"pointer\" name=\"cancel-x\" />\r\n  ),\r\n};\r\n\r\nexport const StyledLineEditableTabs = styled(EditableTabs)`\r\n  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-tab {\r\n    margin: 0 ${({ theme }) => theme.gridUnit * 4}px;\r\n    padding: ${({ theme }) => `${theme.gridUnit * 3}px ${theme.gridUnit}px`};\r\n    background: transparent;\r\n    border: none;\r\n  }\r\n\r\n  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-ink-bar {\r\n    visibility: visible;\r\n  }\r\n\r\n  .ant-tabs-tab-btn {\r\n    font-size: ${({ theme }) => theme.typography.sizes.m}px;\r\n  }\r\n\r\n  .ant-tabs-tab-remove {\r\n    margin-left: 0;\r\n    padding-right: 0;\r\n  }\r\n\r\n  .ant-tabs-nav-add {\r\n    min-width: unset !important;\r\n    background: transparent !important;\r\n    border: none !important;\r\n  }\r\n`;\r\n\r\nexport const LineEditableTabs = Object.assign(StyledLineEditableTabs, {\r\n  TabPane: StyledTabPane,\r\n});\r\n\r\nexport default Tabs;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport * from './Tabs';\r\nexport { default } from './Tabs';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { useTheme, SafeMarkdown } from '@superset-ui/core';\r\nimport Icons from 'src/components/Icons';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\n\r\nexport interface WarningIconWithTooltipProps {\r\n  warningMarkdown: string;\r\n  size?: number;\r\n}\r\n\r\nfunction WarningIconWithTooltip({\r\n  warningMarkdown,\r\n}: WarningIconWithTooltipProps) {\r\n  const theme = useTheme();\r\n  return (\r\n    <Tooltip\r\n      id=\"warning-tooltip\"\r\n      title={<SafeMarkdown source={warningMarkdown} />}\r\n    >\r\n      <Icons.AlertSolid iconColor={theme.colors.alert.base} />\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nexport default WarningIconWithTooltip;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport Pagination from 'src/components/Pagination';\r\nimport {\r\n  createUltimatePagination,\r\n  ITEM_TYPES,\r\n} from 'react-ultimate-pagination';\r\n\r\nconst ListViewPagination = createUltimatePagination({\r\n  WrapperComponent: Pagination,\r\n  itemTypeToComponent: {\r\n    [ITEM_TYPES.PAGE]: ({ value, isActive, onClick }) => (\r\n      <Pagination.Item active={isActive} onClick={onClick}>\r\n        {value}\r\n      </Pagination.Item>\r\n    ),\r\n    [ITEM_TYPES.ELLIPSIS]: ({ isActive, onClick }) => (\r\n      <Pagination.Ellipsis disabled={isActive} onClick={onClick} />\r\n    ),\r\n    [ITEM_TYPES.PREVIOUS_PAGE_LINK]: ({ isActive, onClick }) => (\r\n      <Pagination.Prev disabled={isActive} onClick={onClick} />\r\n    ),\r\n    [ITEM_TYPES.NEXT_PAGE_LINK]: ({ isActive, onClick }) => (\r\n      <Pagination.Next disabled={isActive} onClick={onClick} />\r\n    ),\r\n    [ITEM_TYPES.FIRST_PAGE_LINK]: () => null,\r\n    [ITEM_TYPES.LAST_PAGE_LINK]: () => null,\r\n  },\r\n});\r\n\r\nexport default ListViewPagination;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport cx from 'classnames';\r\nimport { TableInstance } from 'react-table';\r\nimport { styled } from '@superset-ui/core';\r\nimport Icon from 'src/components/Icon';\r\n\r\ninterface TableCollectionProps {\r\n  getTableProps: (userProps?: any) => any;\r\n  getTableBodyProps: (userProps?: any) => any;\r\n  prepareRow: TableInstance['prepareRow'];\r\n  headerGroups: TableInstance['headerGroups'];\r\n  rows: TableInstance['rows'];\r\n  columns: TableInstance['column'][];\r\n  loading: boolean;\r\n  highlightRowId?: number;\r\n}\r\n\r\nexport const Table = styled.table`\r\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\r\n  border-collapse: separate;\r\n  border-radius: ${({ theme }) => theme.borderRadius}px;\r\n\r\n  thead > tr > th {\r\n    border: 0;\r\n  }\r\n\r\n  tbody {\r\n    tr:first-of-type > td {\r\n      border-top: 0;\r\n    }\r\n  }\r\n  th {\r\n    background: ${({ theme }) => theme.colors.grayscale.light5};\r\n    position: sticky;\r\n    top: 0;\r\n\r\n    &:first-of-type {\r\n      padding-left: ${({ theme }) => theme.gridUnit * 4}px;\r\n    }\r\n\r\n    &.xs {\r\n      min-width: 25px;\r\n    }\r\n    &.sm {\r\n      min-width: 50px;\r\n    }\r\n    &.md {\r\n      min-width: 75px;\r\n    }\r\n    &.lg {\r\n      min-width: 100px;\r\n    }\r\n    &.xl {\r\n      min-width: 150px;\r\n    }\r\n    &.xxl {\r\n      min-width: 200px;\r\n    }\r\n\r\n    span {\r\n      white-space: nowrap;\r\n      display: flex;\r\n      align-items: center;\r\n      line-height: 2;\r\n    }\r\n\r\n    svg {\r\n      display: inline-block;\r\n      position: relative;\r\n    }\r\n  }\r\n\r\n  td {\r\n    &.xs {\r\n      width: 25px;\r\n    }\r\n    &.sm {\r\n      width: 50px;\r\n    }\r\n    &.md {\r\n      width: 75px;\r\n    }\r\n    &.lg {\r\n      width: 100px;\r\n    }\r\n    &.xl {\r\n      width: 150px;\r\n    }\r\n    &.xxl {\r\n      width: 200px;\r\n    }\r\n  }\r\n\r\n  .table-cell-loader {\r\n    position: relative;\r\n\r\n    .loading-bar {\r\n      background-color: ${({ theme }) => theme.colors.secondary.light4};\r\n      border-radius: 7px;\r\n\r\n      span {\r\n        visibility: hidden;\r\n      }\r\n    }\r\n\r\n    &:after {\r\n      position: absolute;\r\n      transform: translateY(-50%);\r\n      top: 50%;\r\n      left: 0;\r\n      content: '';\r\n      display: block;\r\n      width: 100%;\r\n      height: 48px;\r\n      background-image: linear-gradient(\r\n        100deg,\r\n        rgba(255, 255, 255, 0),\r\n        rgba(255, 255, 255, 0.5) 60%,\r\n        rgba(255, 255, 255, 0) 80%\r\n      );\r\n      background-size: 200px 48px;\r\n      background-position: -100px 0;\r\n      background-repeat: no-repeat;\r\n      animation: loading-shimmer 1s infinite;\r\n    }\r\n  }\r\n\r\n  .actions {\r\n    white-space: nowrap;\r\n    min-width: 100px;\r\n\r\n    svg,\r\n    i {\r\n      margin-right: 8px;\r\n\r\n      &:hover {\r\n        path {\r\n          fill: ${({ theme }) => theme.colors.primary.base};\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .table-row {\r\n    .actions {\r\n      opacity: 0;\r\n      font-size: ${({ theme }) => theme.typography.sizes.xl}px;\r\n    }\r\n\r\n    &:hover {\r\n      background-color: ${({ theme }) => theme.colors.secondary.light5};\r\n\r\n      .actions {\r\n        opacity: 1;\r\n        transition: opacity ease-in ${({ theme }) => theme.transitionTiming}s;\r\n      }\r\n    }\r\n  }\r\n\r\n  .table-row-selected {\r\n    background-color: ${({ theme }) => theme.colors.secondary.light4};\r\n\r\n    &:hover {\r\n      background-color: ${({ theme }) => theme.colors.secondary.light4};\r\n    }\r\n  }\r\n\r\n  .table-cell {\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    max-width: 300px;\r\n    line-height: 1;\r\n    vertical-align: middle;\r\n    &:first-of-type {\r\n      padding-left: ${({ theme }) => theme.gridUnit * 4}px;\r\n    }\r\n  }\r\n\r\n  @keyframes loading-shimmer {\r\n    40% {\r\n      background-position: 100% 0;\r\n    }\r\n\r\n    100% {\r\n      background-position: 100% 0;\r\n    }\r\n  }\r\n`;\r\n\r\nTable.displayName = 'table';\r\n\r\nexport default React.memo(\r\n  ({\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    prepareRow,\r\n    headerGroups,\r\n    columns,\r\n    rows,\r\n    loading,\r\n    highlightRowId,\r\n  }: TableCollectionProps) => (\r\n    <Table\r\n      {...getTableProps()}\r\n      className=\"table table-hover\"\r\n      data-test=\"listview-table\"\r\n    >\r\n      <thead>\r\n        {headerGroups.map(headerGroup => (\r\n          <tr {...headerGroup.getHeaderGroupProps()}>\r\n            {headerGroup.headers.map(column => {\r\n              let sortIcon = <Icon name=\"sort\" />;\r\n              if (column.isSorted && column.isSortedDesc) {\r\n                sortIcon = <Icon name=\"sort-desc\" />;\r\n              } else if (column.isSorted && !column.isSortedDesc) {\r\n                sortIcon = <Icon name=\"sort-asc\" />;\r\n              }\r\n              return column.hidden ? null : (\r\n                <th\r\n                  {...column.getHeaderProps(\r\n                    column.canSort ? column.getSortByToggleProps() : {},\r\n                  )}\r\n                  data-test=\"sort-header\"\r\n                  className={cx({\r\n                    [column.size || '']: column.size,\r\n                  })}\r\n                >\r\n                  <span>\r\n                    {column.render('Header')}\r\n                    {column.canSort && sortIcon}\r\n                  </span>\r\n                </th>\r\n              );\r\n            })}\r\n          </tr>\r\n        ))}\r\n      </thead>\r\n      <tbody {...getTableBodyProps()}>\r\n        {loading &&\r\n          rows.length === 0 &&\r\n          [...new Array(25)].map((_, i) => (\r\n            <tr key={i}>\r\n              {columns.map((column, i2) => {\r\n                if (column.hidden) return null;\r\n                return (\r\n                  <td\r\n                    key={i2}\r\n                    className={cx('table-cell', {\r\n                      'table-cell-loader': loading,\r\n                      [column.size || '']: column.size,\r\n                    })}\r\n                  >\r\n                    <span className=\"loading-bar\" role=\"progressbar\">\r\n                      <span>LOADING</span>\r\n                    </span>\r\n                  </td>\r\n                );\r\n              })}\r\n            </tr>\r\n          ))}\r\n        {rows.length > 0 &&\r\n          rows.map(row => {\r\n            prepareRow(row);\r\n            // @ts-ignore\r\n            const rowId = row.original.id;\r\n            return (\r\n              <tr\r\n                data-test=\"table-row\"\r\n                {...row.getRowProps()}\r\n                className={cx('table-row', {\r\n                  'table-row-selected':\r\n                    row.isSelected ||\r\n                    (typeof rowId !== 'undefined' && rowId === highlightRowId),\r\n                })}\r\n              >\r\n                {row.cells.map(cell => {\r\n                  if (cell.column.hidden) return null;\r\n\r\n                  const columnCellProps = cell.column.cellProps || {};\r\n                  return (\r\n                    <td\r\n                      data-test=\"table-row-cell\"\r\n                      className={cx('table-cell', {\r\n                        'table-cell-loader': loading,\r\n                        [cell.column.size || '']: cell.column.size,\r\n                      })}\r\n                      {...cell.getCellProps()}\r\n                      {...columnCellProps}\r\n                    >\r\n                      <span\r\n                        className={cx({ 'loading-bar': loading })}\r\n                        role={loading ? 'progressbar' : undefined}\r\n                      >\r\n                        <span data-test=\"cell-text\">{cell.render('Cell')}</span>\r\n                      </span>\r\n                    </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            );\r\n          })}\r\n      </tbody>\r\n    </Table>\r\n  ),\r\n);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport { default as Pagination } from './Pagination';\r\nexport { default as TableCollection } from './TableCollection';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { DataMask } from '@superset-ui/core';\r\nimport { FilterConfiguration } from '../dashboard/components/nativeFilters/types';\r\nimport { FeatureFlag, isFeatureEnabled } from '../featureFlags';\r\nimport { Filters } from '../dashboard/reducers/types';\r\n\r\nexport const UPDATE_DATA_MASK = 'UPDATE_DATA_MASK';\r\nexport interface UpdateDataMask {\r\n  type: typeof UPDATE_DATA_MASK;\r\n  filterId: string;\r\n  dataMask: DataMask;\r\n}\r\n\r\nexport const SET_DATA_MASK_FOR_FILTER_CONFIG_COMPLETE =\r\n  'SET_DATA_MASK_FOR_FILTER_CONFIG_COMPLETE';\r\n\r\nexport interface SetDataMaskForFilterConfigComplete {\r\n  type: typeof SET_DATA_MASK_FOR_FILTER_CONFIG_COMPLETE;\r\n  filterConfig: FilterConfiguration;\r\n  filters?: Filters;\r\n}\r\n\r\nexport const SET_DATA_MASK_FOR_FILTER_CONFIG_FAIL =\r\n  'SET_DATA_MASK_FOR_FILTER_CONFIG_FAIL';\r\n\r\nexport interface SetDataMaskForFilterConfigFail {\r\n  type: typeof SET_DATA_MASK_FOR_FILTER_CONFIG_FAIL;\r\n  filterConfig: FilterConfiguration;\r\n}\r\nexport function setDataMaskForFilterConfigComplete(\r\n  filterConfig: FilterConfiguration,\r\n  filters?: Filters,\r\n): SetDataMaskForFilterConfigComplete {\r\n  return {\r\n    type: SET_DATA_MASK_FOR_FILTER_CONFIG_COMPLETE,\r\n    filterConfig,\r\n    filters,\r\n  };\r\n}\r\nexport function updateDataMask(\r\n  filterId: string,\r\n  dataMask: DataMask,\r\n): UpdateDataMask {\r\n  // Only apply data mask if one of the relevant features is enabled\r\n  const isFeatureFlagActive =\r\n    isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS) ||\r\n    isFeatureEnabled(FeatureFlag.DASHBOARD_CROSS_FILTERS);\r\n  return {\r\n    type: UPDATE_DATA_MASK,\r\n    filterId,\r\n    dataMask: isFeatureFlagActive ? dataMask : {},\r\n  };\r\n}\r\n\r\nexport type AnyDataMaskAction =\r\n  | UpdateDataMask\r\n  | SetDataMaskForFilterConfigFail\r\n  | SetDataMaskForFilterConfigComplete;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, {\r\n  FunctionComponent,\r\n  useState,\r\n  useRef,\r\n  useEffect,\r\n  useCallback,\r\n} from 'react';\r\nimport Alert from 'src/components/Alert';\r\nimport { SupersetClient, t, styled } from '@superset-ui/core';\r\nimport TableView, { EmptyWrapperType } from 'src/components/TableView';\r\nimport StyledModal from 'src/components/Modal';\r\nimport Button from 'src/components/Button';\r\nimport { useListViewResource } from 'src/views/CRUD/hooks';\r\nimport Dataset from 'src/types/Dataset';\r\nimport { useDebouncedEffect } from 'src/explore/exploreUtils';\r\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\r\nimport Loading from 'src/components/Loading';\r\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\r\nimport { Input, AntdInput } from 'src/common/components';\r\n\r\nconst CONFIRM_WARNING_MESSAGE = t(\r\n  'Warning! Changing the dataset may break the chart if the metadata does not exist.',\r\n);\r\n\r\nconst CHANGE_WARNING_MSG = t(\r\n  'Changing the dataset may break the chart if the chart relies ' +\r\n    'on columns or metadata that does not exist in the target dataset',\r\n);\r\n\r\ninterface Datasource {\r\n  type: string;\r\n  id: number;\r\n  uid: string;\r\n}\r\n\r\ninterface ChangeDatasourceModalProps {\r\n  addDangerToast: (msg: string) => void;\r\n  addSuccessToast: (msg: string) => void;\r\n  onChange: (uid: string) => void;\r\n  onDatasourceSave: (datasource: object, errors?: Array<any>) => {};\r\n  onHide: () => void;\r\n  show: boolean;\r\n}\r\n\r\nconst ConfirmModalStyled = styled.div`\r\n  .btn-container {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    padding: 0px 15px;\r\n    margin: 10px 0 0 0;\r\n  }\r\n\r\n  .confirm-modal-container {\r\n    margin: 9px;\r\n  }\r\n`;\r\n\r\nconst StyledSpan = styled.span`\r\n  cursor: pointer;\r\n  color: ${({ theme }) => theme.colors.primary.dark1};\r\n  &: hover {\r\n    color: ${({ theme }) => theme.colors.primary.dark2};\r\n  }\r\n`;\r\n\r\nconst TABLE_COLUMNS = [\r\n  'name',\r\n  'type',\r\n  'schema',\r\n  'connection',\r\n  'creator',\r\n].map(col => ({ accessor: col, Header: col }));\r\n\r\nconst emptyRequest = {\r\n  pageIndex: 0,\r\n  pageSize: 20,\r\n  filters: [],\r\n  sortBy: [{ id: 'changed_on_delta_humanized' }],\r\n};\r\n\r\nconst ChangeDatasourceModal: FunctionComponent<ChangeDatasourceModalProps> = ({\r\n  addDangerToast,\r\n  addSuccessToast,\r\n  onChange,\r\n  onDatasourceSave,\r\n  onHide,\r\n  show,\r\n}) => {\r\n  const [filter, setFilter] = useState<any>(undefined);\r\n  const [confirmChange, setConfirmChange] = useState(false);\r\n  const [confirmedDataset, setConfirmedDataset] = useState<Datasource>();\r\n  const searchRef = useRef<AntdInput>(null);\r\n\r\n  const {\r\n    state: { loading, resourceCollection },\r\n    fetchData,\r\n  } = useListViewResource<Dataset>('dataset', t('dataset'), addDangerToast);\r\n\r\n  const selectDatasource = useCallback((datasource: Datasource) => {\r\n    setConfirmChange(true);\r\n    setConfirmedDataset(datasource);\r\n  }, []);\r\n\r\n  useDebouncedEffect(\r\n    () => {\r\n      fetchData({\r\n        ...emptyRequest,\r\n        ...(filter && {\r\n          filters: [\r\n            {\r\n              id: 'table_name',\r\n              operator: 'ct',\r\n              value: filter,\r\n            },\r\n          ],\r\n        }),\r\n      });\r\n    },\r\n    300,\r\n    [filter],\r\n  );\r\n\r\n  useEffect(() => {\r\n    const onEnterModal = async () => {\r\n      setTimeout(() => searchRef?.current?.focus(), 200);\r\n    };\r\n\r\n    if (show) {\r\n      onEnterModal();\r\n    }\r\n  }, [\r\n    addDangerToast,\r\n    fetchData,\r\n    onChange,\r\n    onDatasourceSave,\r\n    onHide,\r\n    selectDatasource,\r\n    show,\r\n  ]);\r\n\r\n  const changeSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const searchValue = event.target.value ?? '';\r\n    setFilter(searchValue);\r\n  };\r\n\r\n  const handleChangeConfirm = () => {\r\n    SupersetClient.get({\r\n      endpoint: `/datasource/get/${confirmedDataset?.type}/${confirmedDataset?.id}/`,\r\n    })\r\n      .then(({ json }) => {\r\n        onDatasourceSave(json);\r\n        onChange(`${confirmedDataset?.id}__table`);\r\n      })\r\n      .catch(response => {\r\n        getClientErrorObject(response).then(\r\n          ({ error, message }: { error: any; message: string }) => {\r\n            const errorMessage = error\r\n              ? error.error || error.statusText || error\r\n              : message;\r\n            addDangerToast(errorMessage);\r\n          },\r\n        );\r\n      });\r\n    onHide();\r\n    addSuccessToast('Successfully changed dataset!');\r\n  };\r\n\r\n  const handlerCancelConfirm = () => {\r\n    setConfirmChange(false);\r\n  };\r\n\r\n  const renderTableView = () => {\r\n    const data = resourceCollection.map((ds: any) => ({\r\n      rawName: ds.table_name,\r\n      connection: ds.database.database_name,\r\n      schema: ds.schema,\r\n      name: (\r\n        <StyledSpan\r\n          role=\"button\"\r\n          tabIndex={0}\r\n          data-test=\"datasource-link\"\r\n          onClick={() => selectDatasource({ type: 'table', ...ds })}\r\n        >\r\n          {ds.table_name}\r\n        </StyledSpan>\r\n      ),\r\n      type: ds.kind,\r\n    }));\r\n\r\n    return data;\r\n  };\r\n\r\n  return (\r\n    <StyledModal\r\n      show={show}\r\n      onHide={onHide}\r\n      responsive\r\n      title={t('Change dataset')}\r\n      width={confirmChange ? '432px' : ''}\r\n      height={confirmChange ? 'auto' : '480px'}\r\n      hideFooter={!confirmChange}\r\n      footer={\r\n        <>\r\n          {confirmChange && (\r\n            <ConfirmModalStyled>\r\n              <div className=\"btn-container\">\r\n                <Button onClick={handlerCancelConfirm}>Cancel</Button>\r\n                <Button\r\n                  className=\"proceed-btn\"\r\n                  buttonStyle=\"primary\"\r\n                  onClick={handleChangeConfirm}\r\n                >\r\n                  Proceed\r\n                </Button>\r\n              </div>\r\n            </ConfirmModalStyled>\r\n          )}\r\n        </>\r\n      }\r\n    >\r\n      <>\r\n        {!confirmChange && (\r\n          <>\r\n            <Alert\r\n              roomBelow\r\n              type=\"warning\"\r\n              css={theme => ({ marginBottom: theme.gridUnit * 4 })}\r\n              message={\r\n                <>\r\n                  <strong>{t('Warning!')}</strong> {CHANGE_WARNING_MSG}\r\n                </>\r\n              }\r\n            />\r\n            <Input\r\n              ref={searchRef}\r\n              type=\"text\"\r\n              value={filter}\r\n              placeholder={t('Search / Filter')}\r\n              onChange={changeSearch}\r\n            />\r\n            {loading && <Loading />}\r\n            {!loading && (\r\n              <TableView\r\n                columns={TABLE_COLUMNS}\r\n                data={renderTableView()}\r\n                pageSize={20}\r\n                className=\"table-condensed\"\r\n                emptyWrapperType={EmptyWrapperType.Small}\r\n                scrollTable\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n        {confirmChange && <>{CONFIRM_WARNING_MESSAGE}</>}\r\n      </>\r\n    </StyledModal>\r\n  );\r\n};\r\n\r\nexport default withToasts(ChangeDatasourceModal);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { FunctionComponent, useState, useRef } from 'react';\r\nimport Alert from 'src/components/Alert';\r\nimport Button from 'src/components/Button';\r\nimport { styled, t, SupersetClient } from '@superset-ui/core';\r\n\r\nimport Modal from 'src/components/Modal';\r\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\r\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\r\n\r\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\r\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\r\n\r\nconst DatasourceEditor = AsyncEsmComponent(() => import('./DatasourceEditor'));\r\n\r\nconst StyledDatasourceModal = styled(Modal)`\r\n  .modal-content {\r\n    height: 900px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n\r\n  .modal-header {\r\n    flex: 0 1 auto;\r\n  }\r\n  .modal-body {\r\n    flex: 1 1 auto;\r\n    overflow: auto;\r\n  }\r\n\r\n  .modal-footer {\r\n    flex: 0 1 auto;\r\n  }\r\n\r\n  .ant-modal-body {\r\n    overflow: visible;\r\n  }\r\n`;\r\n\r\ninterface DatasourceModalProps {\r\n  addSuccessToast: (msg: string) => void;\r\n  datasource: any;\r\n  onChange: () => {};\r\n  onDatasourceSave: (datasource: object, errors?: Array<any>) => {};\r\n  onHide: () => {};\r\n  show: boolean;\r\n}\r\n\r\nfunction buildMetricExtraJsonObject(metric: Record<string, unknown>) {\r\n  const certification =\r\n    metric?.certified_by || metric?.certification_details\r\n      ? {\r\n          certified_by: metric?.certified_by,\r\n          details: metric?.certification_details,\r\n        }\r\n      : undefined;\r\n  return JSON.stringify({\r\n    certification,\r\n    warning_markdown: metric?.warning_markdown,\r\n  });\r\n}\r\n\r\nconst DatasourceModal: FunctionComponent<DatasourceModalProps> = ({\r\n  addSuccessToast,\r\n  datasource,\r\n  onDatasourceSave,\r\n  onHide,\r\n  show,\r\n}) => {\r\n  const [currentDatasource, setCurrentDatasource] = useState(datasource);\r\n  const [errors, setErrors] = useState<any[]>([]);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const dialog = useRef<any>(null);\r\n  const [modal, contextHolder] = Modal.useModal();\r\n\r\n  const onConfirmSave = () => {\r\n    // Pull out extra fields into the extra object\r\n    const schema =\r\n      currentDatasource.tableSelector?.schema ||\r\n      currentDatasource.databaseSelector?.schema ||\r\n      currentDatasource.schema;\r\n\r\n    setIsSaving(true);\r\n\r\n    SupersetClient.post({\r\n      endpoint: '/datasource/save/',\r\n      postPayload: {\r\n        data: {\r\n          ...currentDatasource,\r\n          schema,\r\n          metrics: currentDatasource?.metrics?.map(\r\n            (metric: Record<string, unknown>) => ({\r\n              ...metric,\r\n              extra: buildMetricExtraJsonObject(metric),\r\n            }),\r\n          ),\r\n          type: currentDatasource.type || currentDatasource.datasource_type,\r\n        },\r\n      },\r\n    })\r\n      .then(({ json }) => {\r\n        addSuccessToast(t('The dataset has been saved'));\r\n        onDatasourceSave(json);\r\n        onHide();\r\n      })\r\n      .catch(response => {\r\n        setIsSaving(false);\r\n        getClientErrorObject(response).then(({ error }) => {\r\n          modal.error({\r\n            title: 'Error',\r\n            content: error || t('An error has occurred'),\r\n            okButtonProps: { danger: true, className: 'btn-danger' },\r\n          });\r\n        });\r\n      });\r\n  };\r\n\r\n  const onDatasourceChange = (data: Record<string, any>, err: Array<any>) => {\r\n    setCurrentDatasource({\r\n      ...data,\r\n      metrics: data?.metrics.map((metric: Record<string, unknown>) => ({\r\n        ...metric,\r\n        is_certified: metric?.certified_by || metric?.certification_details,\r\n      })),\r\n    });\r\n    setErrors(err);\r\n  };\r\n\r\n  const renderSaveDialog = () => (\r\n    <div>\r\n      <Alert\r\n        css={theme => ({\r\n          marginTop: theme.gridUnit * 4,\r\n          marginBottom: theme.gridUnit * 4,\r\n        })}\r\n        type=\"warning\"\r\n        showIcon\r\n        message={t(`The dataset configuration exposed here\r\n                affects all the charts using this dataset.\r\n                Be mindful that changing settings\r\n                here may affect other charts\r\n                in undesirable ways.`)}\r\n      />\r\n      {t('Are you sure you want to save and apply changes?')}\r\n    </div>\r\n  );\r\n\r\n  const onClickSave = () => {\r\n    dialog.current = modal.confirm({\r\n      title: t('Confirm save'),\r\n      content: renderSaveDialog(),\r\n      onOk: onConfirmSave,\r\n      icon: null,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <StyledDatasourceModal\r\n      show={show}\r\n      onHide={onHide}\r\n      title={\r\n        <span>\r\n          {t('Edit Dataset ')}\r\n          <strong>{currentDatasource.table_name}</strong>\r\n        </span>\r\n      }\r\n      footer={\r\n        <>\r\n          {isFeatureEnabled(FeatureFlag.ENABLE_REACT_CRUD_VIEWS) && (\r\n            <Button\r\n              buttonSize=\"small\"\r\n              buttonStyle=\"default\"\r\n              data-test=\"datasource-modal-legacy-edit\"\r\n              className=\"m-r-5\"\r\n              onClick={() => {\r\n                window.location.href =\r\n                  currentDatasource.edit_url || currentDatasource.url;\r\n              }}\r\n            >\r\n              {t('Use legacy datasource editor')}\r\n            </Button>\r\n          )}\r\n          <Button\r\n            data-test=\"datasource-modal-cancel\"\r\n            buttonSize=\"small\"\r\n            className=\"m-r-5\"\r\n            onClick={onHide}\r\n          >\r\n            {t('Cancel')}\r\n          </Button>\r\n          <Button\r\n            buttonSize=\"small\"\r\n            buttonStyle=\"primary\"\r\n            data-test=\"datasource-modal-save\"\r\n            onClick={onClickSave}\r\n            disabled={isSaving || errors.length > 0}\r\n          >\r\n            {t('Save')}\r\n          </Button>\r\n        </>\r\n      }\r\n      responsive\r\n    >\r\n      <DatasourceEditor\r\n        showLoadingForImport\r\n        height={500}\r\n        datasource={currentDatasource}\r\n        onChange={onDatasourceChange}\r\n      />\r\n      {contextHolder}\r\n    </StyledDatasourceModal>\r\n  );\r\n};\r\n\r\nexport default withToasts(DatasourceModal);\r\n","var content = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/less-loader/dist/cjs.js??ref--8-2!./Control.less\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { ReactNode } from 'react';\r\nimport { ControlType } from '@superset-ui/chart-controls';\r\nimport { JsonValue, QueryFormData } from '@superset-ui/core';\r\nimport ErrorBoundary from 'src/components/ErrorBoundary';\r\nimport { ExploreActions } from 'src/explore/actions/exploreActions';\r\nimport controlMap from './controls';\r\n\r\nimport './Control.less';\r\n\r\nexport type ControlProps = {\r\n  // the actual action dispatcher (via bindActionCreators) has identical\r\n  // signature to the original action factory.\r\n  actions: Partial<ExploreActions> & Pick<ExploreActions, 'setControlValue'>;\r\n  type: ControlType;\r\n  label?: ReactNode;\r\n  name: string;\r\n  description?: ReactNode;\r\n  tooltipOnClick?: () => ReactNode;\r\n  places?: number;\r\n  rightNode?: ReactNode;\r\n  formData?: QueryFormData | null;\r\n  value?: JsonValue;\r\n  validationErrors?: any[];\r\n  hidden?: boolean;\r\n  renderTrigger?: boolean;\r\n};\r\n\r\nexport default class Control extends React.PureComponent<\r\n  ControlProps,\r\n  { hovered: boolean }\r\n> {\r\n  onMouseEnter: () => void;\r\n\r\n  onMouseLeave: () => void;\r\n\r\n  constructor(props: ControlProps) {\r\n    super(props);\r\n    this.state = { hovered: false };\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onMouseEnter = this.setHover.bind(this, true);\r\n    this.onMouseLeave = this.setHover.bind(this, false);\r\n  }\r\n\r\n  onChange(value: any, errors: any[]) {\r\n    this.props.actions.setControlValue(this.props.name, value, errors);\r\n  }\r\n\r\n  setHover(hovered: boolean) {\r\n    this.setState({ hovered });\r\n  }\r\n\r\n  render() {\r\n    const { type, hidden } = this.props;\r\n    if (!type) return null;\r\n    const ControlComponent = typeof type === 'string' ? controlMap[type] : type;\r\n    if (!ControlComponent) {\r\n      return `Unknown controlType: ${type}`;\r\n    }\r\n    return (\r\n      <div\r\n        className=\"Control\"\r\n        data-test={this.props.name}\r\n        style={hidden ? { display: 'none' } : undefined}\r\n        onMouseEnter={this.onMouseEnter}\r\n        onMouseLeave={this.onMouseLeave}\r\n      >\r\n        <ErrorBoundary>\r\n          <ControlComponent\r\n            onChange={this.onChange}\r\n            hovered={this.state.hovered}\r\n            {...this.props}\r\n          />\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\n\r\nconst NUM_COLUMNS = 12;\r\n\r\ntype Control = React.ReactElement | null;\r\n\r\nexport default function ControlRow({ controls }: { controls: Control[] }) {\r\n  // ColorMapControl renders null and should not be counted\r\n  // in the columns number\r\n  const countableControls = controls.filter(\r\n    control => !['ColorMapControl'].includes(control?.props.type),\r\n  );\r\n  const colSize = NUM_COLUMNS / countableControls.length;\r\n  return (\r\n    <div className=\"row space-1\">\r\n      {controls.map((control, i) => (\r\n        <div className={`col-lg-${colSize} col-xs-12`} key={i}>\r\n          {control}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\n/**\r\n * All possible draggable items for the chart controls.\r\n */\r\nexport enum DndItemType {\r\n  // an existing column in table\r\n  Column = 'column',\r\n  // a selected column option in ColumnSelectControl\r\n  ColumnOption = 'columnOption',\r\n  // an adhoc column option in ColumnSelectControl\r\n  AdhocColumnOption = 'adhocColumn',\r\n\r\n  // a saved metric\r\n  Metric = 'metric',\r\n  // a selected saved metric in MetricsControl\r\n  MetricOption = 'metricOption',\r\n  // an adhoc metric option in MetricsControl\r\n  AdhocMetricOption = 'adhocMetric',\r\n\r\n  // an adhoc filter option\r\n  FilterOption = 'filterOption',\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { styled } from '@superset-ui/core';\r\n\r\nexport const ExplorePopoverContent = styled.div`\r\n  .edit-popover-resize {\r\n    transform: scaleX(-1);\r\n    float: right;\r\n    margin-top: ${({ theme }) => theme.gridUnit * 4}px;\r\n    margin-right: ${({ theme }) => theme.gridUnit * -2}px;\r\n    cursor: nwse-resize;\r\n  }\r\n  .filter-sql-editor {\r\n    border: ${({ theme }) => theme.colors.grayscale.light2} solid thin;\r\n  }\r\n  .custom-sql-disabled-message {\r\n    color: ${({ theme }) => theme.colors.grayscale.light1};\r\n    font-size: ${({ theme }) => theme.typography.sizes.xs}px;\r\n    text-align: center;\r\n    margin-top: ${({ theme }) => theme.gridUnit * 15}px;\r\n  }\r\n`;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { List } from 'src/common/components';\r\nimport { connect } from 'react-redux';\r\nimport { t, withTheme } from '@superset-ui/core';\r\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\r\nimport Popover from 'src/components/Popover';\r\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\r\nimport { getChartKey } from 'src/explore/exploreUtils';\r\nimport { runAnnotationQuery } from 'src/chart/chartAction';\r\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\r\n\r\nconst AnnotationLayer = AsyncEsmComponent(\r\n  () => import('./AnnotationLayer'),\r\n  // size of overlay inner content\r\n  () => <div style={{ width: 450, height: 368 }} />,\r\n);\r\n\r\nconst propTypes = {\r\n  colorScheme: PropTypes.string.isRequired,\r\n  annotationError: PropTypes.object,\r\n  annotationQuery: PropTypes.object,\r\n  vizType: PropTypes.string,\r\n\r\n  validationErrors: PropTypes.array,\r\n  name: PropTypes.string.isRequired,\r\n  actions: PropTypes.object,\r\n  value: PropTypes.arrayOf(PropTypes.object),\r\n  onChange: PropTypes.func,\r\n  refreshAnnotationData: PropTypes.func,\r\n};\r\n\r\nconst defaultProps = {\r\n  vizType: '',\r\n  value: [],\r\n  annotationError: {},\r\n  annotationQuery: {},\r\n  onChange: () => {},\r\n};\r\n\r\nclass AnnotationLayerControl extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      popoverVisible: {},\r\n      addedAnnotationIndex: null,\r\n      popoverClear: false,\r\n    };\r\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\r\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\r\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\r\n    this.handlePopoverClear = this.handlePopoverClear.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // preload the AnotationLayer component and dependent libraries i.e. mathjs\r\n    AnnotationLayer.preload();\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    const { name, annotationError, validationErrors, value } = nextProps;\r\n    if (Object.keys(annotationError).length && !validationErrors.length) {\r\n      this.props.actions.setControlValue(\r\n        name,\r\n        value,\r\n        Object.keys(annotationError),\r\n      );\r\n    }\r\n    if (!Object.keys(annotationError).length && validationErrors.length) {\r\n      this.props.actions.setControlValue(name, value, []);\r\n    }\r\n  }\r\n\r\n  addAnnotationLayer(originalAnnotation, newAnnotation) {\r\n    let annotations = this.props.value;\r\n    if (annotations.includes(originalAnnotation)) {\r\n      annotations = annotations.map(anno =>\r\n        anno === originalAnnotation ? newAnnotation : anno,\r\n      );\r\n    } else {\r\n      annotations = [...annotations, newAnnotation];\r\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\r\n    }\r\n\r\n    this.props.refreshAnnotationData(newAnnotation);\r\n    this.props.onChange(annotations);\r\n  }\r\n\r\n  handleVisibleChange(visible, popoverKey) {\r\n    if (!this.state.popoverClear) {\r\n      this.setState(prevState => ({\r\n        popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible },\r\n      }));\r\n    } else {\r\n      this.handlePopoverClear(false);\r\n    }\r\n  }\r\n\r\n  handlePopoverClear(popoverClear) {\r\n    this.setState({\r\n      popoverClear,\r\n    });\r\n  }\r\n\r\n  removeAnnotationLayer(annotation) {\r\n    const annotations = this.props.value.filter(anno => anno !== annotation);\r\n    this.props.onChange(annotations);\r\n  }\r\n\r\n  renderPopover(popoverKey, annotation, error) {\r\n    const id = annotation?.name || '_new';\r\n\r\n    return (\r\n      <div id={`annotation-pop-${id}`} data-test=\"popover-content\">\r\n        <AnnotationLayer\r\n          {...annotation}\r\n          error={error}\r\n          colorScheme={this.props.colorScheme}\r\n          vizType={this.props.vizType}\r\n          addAnnotationLayer={newAnnotation =>\r\n            this.addAnnotationLayer(annotation, newAnnotation)\r\n          }\r\n          removeAnnotationLayer={() => this.removeAnnotationLayer(annotation)}\r\n          close={() => {\r\n            this.handleVisibleChange(false, popoverKey);\r\n            this.setState({ addedAnnotationIndex: null });\r\n          }}\r\n          onPopoverClear={this.handlePopoverClear}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderInfo(anno) {\r\n    const { annotationError, annotationQuery } = this.props;\r\n    if (annotationQuery[anno.name]) {\r\n      return (\r\n        <i className=\"fa fa-refresh\" style={{ color: 'orange' }} aria-hidden />\r\n      );\r\n    }\r\n    if (annotationError[anno.name]) {\r\n      return (\r\n        <InfoTooltipWithTrigger\r\n          label=\"validation-errors\"\r\n          bsStyle=\"danger\"\r\n          tooltip={annotationError[anno.name]}\r\n        />\r\n      );\r\n    }\r\n    if (!anno.show) {\r\n      return <span style={{ color: 'red' }}> Hidden </span>;\r\n    }\r\n    return '';\r\n  }\r\n\r\n  render() {\r\n    const { addedAnnotationIndex } = this.state;\r\n    const addedAnnotation = this.props.value[addedAnnotationIndex];\r\n\r\n    const annotations = this.props.value.map((anno, i) => (\r\n      <Popover\r\n        key={i}\r\n        trigger=\"click\"\r\n        placement=\"right\"\r\n        title={t('Edit annotation layer')}\r\n        css={theme => ({\r\n          '&:hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: theme.colors.grayscale.light4,\r\n          },\r\n        })}\r\n        content={this.renderPopover(\r\n          i,\r\n          anno,\r\n          this.props.annotationError[anno.name],\r\n        )}\r\n        visible={this.state.popoverVisible[i]}\r\n        onVisibleChange={visible => this.handleVisibleChange(visible, i)}\r\n      >\r\n        <CustomListItem selectable>\r\n          <span>{anno.name}</span>\r\n          <span style={{ float: 'right' }}>{this.renderInfo(anno)}</span>\r\n        </CustomListItem>\r\n      </Popover>\r\n    ));\r\n\r\n    const addLayerPopoverKey = 'add';\r\n    return (\r\n      <div>\r\n        <List bordered css={theme => ({ borderRadius: theme.gridUnit })}>\r\n          {annotations}\r\n          <Popover\r\n            trigger=\"click\"\r\n            placement=\"right\"\r\n            content={this.renderPopover(addLayerPopoverKey, addedAnnotation)}\r\n            title={t('Add annotation layer')}\r\n            visible={this.state.popoverVisible[addLayerPopoverKey]}\r\n            destroyTooltipOnHide\r\n            onVisibleChange={visible =>\r\n              this.handleVisibleChange(visible, addLayerPopoverKey)\r\n            }\r\n          >\r\n            <CustomListItem selectable>\r\n              <i\r\n                data-test=\"add-annotation-layer-button\"\r\n                className=\"fa fa-plus\"\r\n              />{' '}\r\n              &nbsp; {t('Add annotation layer')}\r\n            </CustomListItem>\r\n          </Popover>\r\n        </List>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAnnotationLayerControl.propTypes = propTypes;\r\nAnnotationLayerControl.defaultProps = defaultProps;\r\n\r\n// Tried to hook this up through stores/control.jsx instead of using redux\r\n// directly, could not figure out how to get access to the color_scheme\r\nfunction mapStateToProps({ charts, explore }) {\r\n  const chartKey = getChartKey(explore);\r\n  const chart = charts[chartKey] || charts[0] || {};\r\n\r\n  return {\r\n    // eslint-disable-next-line camelcase\r\n    colorScheme: explore.controls?.color_scheme?.value,\r\n    annotationError: chart.annotationError,\r\n    annotationQuery: chart.annotationQuery,\r\n    vizType: explore.controls.viz_type.value,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    refreshAnnotationData: annotationLayer =>\r\n      dispatch(runAnnotationQuery(annotationLayer)),\r\n  };\r\n}\r\n\r\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(themedAnnotationLayerControl);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { InputNumber } from 'src/common/components';\r\nimport { t, styled } from '@superset-ui/core';\r\nimport { isEqual, debounce } from 'lodash';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.array,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  value: [null, null],\r\n};\r\n\r\nconst StyledDiv = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst MinInput = styled(InputNumber)`\r\n  flex: 1;\r\n  margin-right: ${({ theme }) => theme.gridUnit}px;\r\n`;\r\n\r\nconst MaxInput = styled(InputNumber)`\r\n  flex: 1;\r\n  margin-left: ${({ theme }) => theme.gridUnit}px;\r\n`;\r\n\r\nexport default class BoundsControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      minMax: [\r\n        Number.isNaN(this.props.value[0]) ? '' : props.value[0],\r\n        Number.isNaN(this.props.value[1]) ? '' : props.value[1],\r\n      ],\r\n    };\r\n    this.onChange = debounce(this.onChange.bind(this), 300);\r\n    this.onMinChange = this.onMinChange.bind(this);\r\n    this.onMaxChange = this.onMaxChange.bind(this);\r\n    this.update = this.update.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (!isEqual(prevProps.value, this.props.value)) {\r\n      this.update();\r\n    }\r\n  }\r\n\r\n  update() {\r\n    this.setState({\r\n      minMax: [\r\n        Number.isNaN(this.props.value[0]) ? '' : this.props.value[0],\r\n        Number.isNaN(this.props.value[1]) ? '' : this.props.value[1],\r\n      ],\r\n    });\r\n  }\r\n\r\n  onMinChange(value) {\r\n    this.setState(\r\n      prevState => ({\r\n        minMax: [value, prevState.minMax[1]],\r\n      }),\r\n      this.onChange,\r\n    );\r\n  }\r\n\r\n  onMaxChange(value) {\r\n    this.setState(\r\n      prevState => ({\r\n        minMax: [prevState.minMax[0], value],\r\n      }),\r\n      this.onChange,\r\n    );\r\n  }\r\n\r\n  onChange() {\r\n    const mm = this.state.minMax;\r\n    const min = parseFloat(mm[0]) || null;\r\n    const max = parseFloat(mm[1]) || null;\r\n    this.props.onChange([min, max]);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ControlHeader {...this.props} />\r\n        <StyledDiv>\r\n          <MinInput\r\n            data-test=\"min-bound\"\r\n            placeholder={t('Min')}\r\n            onChange={this.onMinChange}\r\n            value={this.state.minMax[0]}\r\n          />\r\n          <MaxInput\r\n            data-test=\"max-bound\"\r\n            placeholder={t('Max')}\r\n            onChange={this.onMaxChange}\r\n            value={this.state.minMax[1]}\r\n          />\r\n        </StyledDiv>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nBoundsControl.propTypes = propTypes;\r\nBoundsControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ControlHeader from '../ControlHeader';\r\nimport Checkbox from '../../../components/Checkbox';\r\n\r\nconst propTypes = {\r\n  value: PropTypes.bool,\r\n  label: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n};\r\n\r\nconst defaultProps = {\r\n  value: false,\r\n  onChange: () => {},\r\n};\r\n\r\nconst checkboxStyle = { paddingRight: '5px' };\r\n\r\nexport default class CheckboxControl extends React.Component {\r\n  onChange() {\r\n    this.props.onChange(!this.props.value);\r\n  }\r\n\r\n  renderCheckbox() {\r\n    return (\r\n      <Checkbox\r\n        onChange={this.onChange.bind(this)}\r\n        style={checkboxStyle}\r\n        checked={!!this.props.value}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.props.label) {\r\n      return (\r\n        <ControlHeader\r\n          {...this.props}\r\n          leftNode={this.renderCheckbox()}\r\n          onClick={this.onChange.bind(this)}\r\n        />\r\n      );\r\n    }\r\n    return this.renderCheckbox();\r\n  }\r\n}\r\nCheckboxControl.propTypes = propTypes;\r\nCheckboxControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { List } from 'src/common/components';\r\nimport shortid from 'shortid';\r\nimport { t, withTheme } from '@superset-ui/core';\r\nimport {\r\n  SortableContainer,\r\n  SortableHandle,\r\n  SortableElement,\r\n  arrayMove,\r\n} from 'react-sortable-hoc';\r\nimport Icon from 'src/components/Icon';\r\nimport {\r\n  HeaderContainer,\r\n  AddIconButton,\r\n} from 'src/explore/components/controls/OptionControls';\r\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\r\nimport controlMap from '..';\r\n\r\nconst propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  label: PropTypes.string,\r\n  description: PropTypes.string,\r\n  placeholder: PropTypes.string,\r\n  addTooltip: PropTypes.string,\r\n  itemGenerator: PropTypes.func,\r\n  keyAccessor: PropTypes.func,\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.oneOfType([PropTypes.array]),\r\n  isFloat: PropTypes.bool,\r\n  isInt: PropTypes.bool,\r\n  controlName: PropTypes.string.isRequired,\r\n};\r\n\r\nconst defaultProps = {\r\n  label: null,\r\n  description: null,\r\n  onChange: () => {},\r\n  placeholder: t('Empty collection'),\r\n  itemGenerator: () => ({ key: shortid.generate() }),\r\n  keyAccessor: o => o.key,\r\n  value: [],\r\n  addTooltip: t('Add an item'),\r\n};\r\nconst SortableListItem = SortableElement(CustomListItem);\r\nconst SortableList = SortableContainer(List);\r\nconst SortableDragger = SortableHandle(() => (\r\n  <i\r\n    role=\"img\"\r\n    aria-label=\"drag\"\r\n    className=\"fa fa-bars text-primary\"\r\n    style={{ cursor: 'ns-resize' }}\r\n  />\r\n));\r\n\r\nclass CollectionControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onAdd = this.onAdd.bind(this);\r\n  }\r\n\r\n  onChange(i, value) {\r\n    Object.assign(this.props.value[i], value);\r\n    this.props.onChange(this.props.value);\r\n  }\r\n\r\n  onAdd() {\r\n    this.props.onChange(this.props.value.concat([this.props.itemGenerator()]));\r\n  }\r\n\r\n  onSortEnd({ oldIndex, newIndex }) {\r\n    this.props.onChange(arrayMove(this.props.value, oldIndex, newIndex));\r\n  }\r\n\r\n  removeItem(i) {\r\n    this.props.onChange(this.props.value.filter((o, ix) => i !== ix));\r\n  }\r\n\r\n  renderList() {\r\n    if (this.props.value.length === 0) {\r\n      return <div className=\"text-muted\">{this.props.placeholder}</div>;\r\n    }\r\n    const Control = controlMap[this.props.controlName];\r\n    return (\r\n      <SortableList\r\n        useDragHandle\r\n        lockAxis=\"y\"\r\n        onSortEnd={this.onSortEnd.bind(this)}\r\n        bordered\r\n        css={theme => ({\r\n          borderRadius: theme.gridUnit,\r\n        })}\r\n      >\r\n        {this.props.value.map((o, i) => {\r\n          // label relevant only for header, not here\r\n          const { label, ...commonProps } = this.props;\r\n          return (\r\n            <SortableListItem\r\n              className=\"clearfix\"\r\n              css={{ justifyContent: 'flex-start' }}\r\n              key={this.props.keyAccessor(o)}\r\n              index={i}\r\n            >\r\n              <SortableDragger />\r\n              <div\r\n                css={theme => ({\r\n                  flex: 1,\r\n                  marginLeft: theme.gridUnit * 2,\r\n                  marginRight: theme.gridUnit * 2,\r\n                })}\r\n              >\r\n                <Control\r\n                  {...commonProps}\r\n                  {...o}\r\n                  onChange={this.onChange.bind(this, i)}\r\n                />\r\n              </div>\r\n              <InfoTooltipWithTrigger\r\n                icon=\"times\"\r\n                label=\"remove-item\"\r\n                tooltip={t('Remove item')}\r\n                bsStyle=\"primary\"\r\n                onClick={this.removeItem.bind(this, i)}\r\n              />\r\n            </SortableListItem>\r\n          );\r\n        })}\r\n      </SortableList>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { theme } = this.props;\r\n    return (\r\n      <div data-test=\"CollectionControl\" className=\"CollectionControl\">\r\n        <HeaderContainer>\r\n          <ControlHeader {...this.props} />\r\n          <AddIconButton onClick={this.onAdd}>\r\n            <Icon\r\n              name=\"plus-large\"\r\n              width={theme.gridUnit * 3}\r\n              height={theme.gridUnit * 3}\r\n              color={theme.colors.grayscale.light5}\r\n            />\r\n          </AddIconButton>\r\n        </HeaderContainer>\r\n        {this.renderList()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCollectionControl.propTypes = propTypes;\r\nCollectionControl.defaultProps = defaultProps;\r\n\r\nexport default withTheme(CollectionControl);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { CategoricalColorNamespace } from '@superset-ui/core';\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.object,\r\n  colorScheme: PropTypes.string,\r\n  colorNamespace: PropTypes.string,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  value: {},\r\n  colorScheme: undefined,\r\n  colorNamespace: undefined,\r\n};\r\n\r\nexport default class ColorMapControl extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    Object.keys(this.props.value).forEach(label => {\r\n      CategoricalColorNamespace.getScale(\r\n        this.props.colorScheme,\r\n        this.props.colorNamespace,\r\n      ).setColor(label, this.props.value[label]);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nColorMapControl.propTypes = propTypes;\r\nColorMapControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { SketchPicker } from 'react-color';\r\nimport { getCategoricalSchemeRegistry } from '@superset-ui/core';\r\nimport Popover from 'src/components/Popover';\r\nimport ControlHeader from '../ControlHeader';\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.object,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n};\r\n\r\nconst swatchCommon = {\r\n  position: 'absolute',\r\n  width: '50px',\r\n  height: '20px',\r\n  top: '0px',\r\n  left: '0px',\r\n  right: '0px',\r\n  bottom: '0px',\r\n};\r\n\r\nconst styles = {\r\n  swatch: {\r\n    width: '50px',\r\n    height: '20px',\r\n    position: 'relative',\r\n    padding: '5px',\r\n    borderRadius: '1px',\r\n    display: 'inline-block',\r\n    cursor: 'pointer',\r\n    boxShadow:\r\n      'rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset, rgba(0, 0, 0, 0.25) 0px 0px 4px inset',\r\n  },\r\n  color: {\r\n    ...swatchCommon,\r\n    borderRadius: '2px',\r\n  },\r\n  checkboard: {\r\n    ...swatchCommon,\r\n    background:\r\n      'url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\") left center',\r\n  },\r\n};\r\nexport default class ColorPickerControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  onChange(col) {\r\n    this.props.onChange(col.rgb);\r\n  }\r\n\r\n  renderPopover() {\r\n    const presetColors = getCategoricalSchemeRegistry()\r\n      .get()\r\n      .colors.filter((s, i) => i < 7);\r\n    return (\r\n      <div id=\"filter-popover\" className=\"color-popover\">\r\n        <SketchPicker\r\n          color={this.props.value}\r\n          onChange={this.onChange}\r\n          presetColors={presetColors}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const c = this.props.value || { r: 0, g: 0, b: 0, a: 0 };\r\n    const colStyle = {\r\n      ...styles.color,\r\n      background: `rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,\r\n    };\r\n    return (\r\n      <div>\r\n        <ControlHeader {...this.props} />\r\n        <Popover\r\n          trigger=\"click\"\r\n          placement=\"right\"\r\n          content={this.renderPopover()}\r\n        >\r\n          <div style={styles.swatch}>\r\n            <div style={styles.checkboard} />\r\n            <div style={colStyle} />\r\n          </div>\r\n        </Popover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nColorPickerControl.propTypes = propTypes;\r\nColorPickerControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { isFunction } from 'lodash';\r\nimport { Select } from 'src/components/Select';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport ControlHeader from '../ControlHeader';\r\n\r\nconst propTypes = {\r\n  description: PropTypes.string,\r\n  label: PropTypes.string.isRequired,\r\n  labelMargin: PropTypes.number,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.string,\r\n  clearable: PropTypes.bool,\r\n  default: PropTypes.string,\r\n  choices: PropTypes.oneOfType([\r\n    PropTypes.arrayOf(PropTypes.array),\r\n    PropTypes.func,\r\n  ]),\r\n  schemes: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\r\n  isLinear: PropTypes.bool,\r\n};\r\n\r\nconst defaultProps = {\r\n  choices: [],\r\n  schemes: {},\r\n  clearable: false,\r\n  onChange: () => {},\r\n};\r\n\r\nexport default class ColorSchemeControl extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.renderOption = this.renderOption.bind(this);\r\n  }\r\n\r\n  onChange(option) {\r\n    const optionValue = option ? option.value : null;\r\n    this.props.onChange(optionValue);\r\n  }\r\n\r\n  renderOption(key) {\r\n    const { isLinear } = this.props;\r\n    const currentScheme = this.schemes[key.value];\r\n\r\n    // For categorical scheme, display all the colors\r\n    // For sequential scheme, show 10 or interpolate to 10.\r\n    // Sequential schemes usually have at most 10 colors.\r\n    let colors = [];\r\n    if (currentScheme) {\r\n      colors = isLinear ? currentScheme.getColors(10) : currentScheme.colors;\r\n    }\r\n\r\n    return (\r\n      <Tooltip id={`${currentScheme.id}-tooltip`} title={currentScheme.label}>\r\n        <ul\r\n          css={{\r\n            listStyle: 'none',\r\n            margin: 0,\r\n            padding: 0,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n\r\n            '& li': {\r\n              flexBasis: 9,\r\n              height: 10,\r\n              margin: '9px 1px',\r\n            },\r\n          }}\r\n          data-test={currentScheme.id}\r\n        >\r\n          {colors.map((color, i) => (\r\n            <li\r\n              key={`${currentScheme.id}-${i}`}\r\n              css={{\r\n                backgroundColor: color,\r\n                border: `1px solid ${color === 'white' ? 'black' : color}`,\r\n              }}\r\n            >\r\n              &nbsp;\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </Tooltip>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { schemes, choices, labelMargin = 0 } = this.props;\r\n    // save parsed schemes for later\r\n    this.schemes = isFunction(schemes) ? schemes() : schemes;\r\n    const options = (isFunction(choices) ? choices() : choices).map(\r\n      ([value, label]) => ({\r\n        value,\r\n        // use scheme label if available\r\n        label: this.schemes[value]?.label || label,\r\n      }),\r\n    );\r\n    const selectProps = {\r\n      multi: false,\r\n      name: `select-${this.props.name}`,\r\n      placeholder: `Select (${options.length})`,\r\n      default: this.props.default,\r\n      options,\r\n      value: this.props.value,\r\n      autosize: false,\r\n      clearable: this.props.clearable,\r\n      onChange: this.onChange,\r\n      optionRenderer: this.renderOption,\r\n      valueRenderer: this.renderOption,\r\n    };\r\n    return (\r\n      <div>\r\n        <ControlHeader {...this.props} />\r\n        <Select {...selectProps} css={{ marginTop: labelMargin }} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nColorSchemeControl.propTypes = propTypes;\r\nColorSchemeControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { useTheme } from '@superset-ui/core';\r\nimport { List, ListItemProps } from 'src/common/components';\r\n\r\nexport interface CustomListItemProps extends ListItemProps {\r\n  selectable: boolean;\r\n}\r\n\r\nexport default function CustomListItem(props: CustomListItemProps) {\r\n  const { selectable, children, ...rest } = props;\r\n  const theme = useTheme();\r\n  const css = {\r\n    '&.ant-list-item': {\r\n      padding: `${theme.gridUnit + 2}px ${theme.gridUnit * 3}px`,\r\n      ':first-of-type': {\r\n        borderTopLeftRadius: theme.gridUnit,\r\n        borderTopRightRadius: theme.gridUnit,\r\n      },\r\n      ':last-of-type': {\r\n        borderBottomLeftRadius: theme.gridUnit,\r\n        borderBottomRightRadius: theme.gridUnit,\r\n      },\r\n    },\r\n  };\r\n\r\n  if (selectable) {\r\n    css['&:hover'] = {\r\n      cursor: 'pointer',\r\n      backgroundColor: theme.colors.grayscale.light4,\r\n    };\r\n  }\r\n\r\n  return (\r\n    <List.Item {...rest} css={css}>\r\n      {children}\r\n    </List.Item>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { t, styled, supersetTheme } from '@superset-ui/core';\r\n\r\nimport { Dropdown, Menu } from 'src/common/components';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport Icon from 'src/components/Icon';\r\nimport Icons from 'src/components/Icons';\r\nimport ChangeDatasourceModal from 'src/datasource/ChangeDatasourceModal';\r\nimport DatasourceModal from 'src/datasource/DatasourceModal';\r\nimport { postForm } from 'src/explore/exploreUtils';\r\nimport Button from 'src/components/Button';\r\nimport ErrorAlert from 'src/components/ErrorMessage/ErrorAlert';\r\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\r\n\r\nconst propTypes = {\r\n  actions: PropTypes.object.isRequired,\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.string,\r\n  datasource: PropTypes.object.isRequired,\r\n  isEditable: PropTypes.bool,\r\n  onDatasourceSave: PropTypes.func,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  onDatasourceSave: null,\r\n  value: null,\r\n  isEditable: true,\r\n};\r\n\r\nconst Styles = styled.div`\r\n  .data-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    border-bottom: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\r\n    padding: ${({ theme }) => 2 * theme.gridUnit}px;\r\n  }\r\n  .error-alert {\r\n    margin: ${({ theme }) => 2 * theme.gridUnit}px;\r\n  }\r\n  .ant-dropdown-trigger {\r\n    margin-left: ${({ theme }) => 2 * theme.gridUnit}px;\r\n    box-shadow: none;\r\n    &:active {\r\n      box-shadow: none;\r\n    }\r\n  }\r\n  .btn-group .open .dropdown-toggle {\r\n    box-shadow: none;\r\n    &.button-default {\r\n      background: none;\r\n    }\r\n  }\r\n  i.angle {\r\n    color: ${({ theme }) => theme.colors.primary.base};\r\n  }\r\n  svg.datasource-modal-trigger {\r\n    color: ${({ theme }) => theme.colors.primary.base};\r\n    cursor: pointer;\r\n  }\r\n  .title-select {\r\n    flex: 1 1 100%;\r\n    display: inline-block;\r\n    background-color: ${({ theme }) => theme.colors.grayscale.light3};\r\n    padding: ${({ theme }) => theme.gridUnit * 2}px;\r\n    border-radius: ${({ theme }) => theme.borderRadius}px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n  }\r\n  .dataset-svg {\r\n    margin-right: ${({ theme }) => 2 * theme.gridUnit}px;\r\n    flex: none;\r\n  }\r\n`;\r\n\r\nconst CHANGE_DATASET = 'change_dataset';\r\nconst VIEW_IN_SQL_LAB = 'view_in_sql_lab';\r\nconst EDIT_DATASET = 'edit_dataset';\r\n\r\nclass DatasourceControl extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showEditDatasourceModal: false,\r\n      showChangeDatasourceModal: false,\r\n    };\r\n    this.onDatasourceSave = this.onDatasourceSave.bind(this);\r\n    this.toggleChangeDatasourceModal = this.toggleChangeDatasourceModal.bind(\r\n      this,\r\n    );\r\n    this.toggleEditDatasourceModal = this.toggleEditDatasourceModal.bind(this);\r\n    this.toggleShowDatasource = this.toggleShowDatasource.bind(this);\r\n    this.handleMenuItemClick = this.handleMenuItemClick.bind(this);\r\n  }\r\n\r\n  onDatasourceSave(datasource) {\r\n    this.props.actions.setDatasource(datasource);\r\n    if (this.props.onDatasourceSave) {\r\n      this.props.onDatasourceSave(datasource);\r\n    }\r\n  }\r\n\r\n  toggleShowDatasource() {\r\n    this.setState(({ showDatasource }) => ({\r\n      showDatasource: !showDatasource,\r\n    }));\r\n  }\r\n\r\n  toggleChangeDatasourceModal() {\r\n    this.setState(({ showChangeDatasourceModal }) => ({\r\n      showChangeDatasourceModal: !showChangeDatasourceModal,\r\n    }));\r\n  }\r\n\r\n  toggleEditDatasourceModal() {\r\n    this.setState(({ showEditDatasourceModal }) => ({\r\n      showEditDatasourceModal: !showEditDatasourceModal,\r\n    }));\r\n  }\r\n\r\n  handleMenuItemClick({ key }) {\r\n    if (key === CHANGE_DATASET) {\r\n      this.toggleChangeDatasourceModal();\r\n    }\r\n    if (key === EDIT_DATASET) {\r\n      this.toggleEditDatasourceModal();\r\n    }\r\n    if (key === VIEW_IN_SQL_LAB) {\r\n      const { datasource } = this.props;\r\n      const payload = {\r\n        datasourceKey: `${datasource.id}__${datasource.type}`,\r\n        sql: datasource.sql,\r\n      };\r\n      postForm('/superset/sqllab/', payload);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { showChangeDatasourceModal, showEditDatasourceModal } = this.state;\r\n    const { datasource, onChange } = this.props;\r\n    const isMissingDatasource = datasource.id == null;\r\n\r\n    const isSqlSupported = datasource.type === 'table';\r\n\r\n    const datasourceMenu = (\r\n      <Menu onClick={this.handleMenuItemClick}>\r\n        {this.props.isEditable && (\r\n          <Menu.Item key={EDIT_DATASET} data-test=\"edit-dataset\">\r\n            {t('Edit dataset')}\r\n          </Menu.Item>\r\n        )}\r\n        <Menu.Item key={CHANGE_DATASET}>{t('Change dataset')}</Menu.Item>\r\n        {isSqlSupported && (\r\n          <Menu.Item key={VIEW_IN_SQL_LAB}>{t('View in SQL Lab')}</Menu.Item>\r\n        )}\r\n      </Menu>\r\n    );\r\n\r\n    const { health_check_message: healthCheckMessage } = datasource;\r\n\r\n    let extra = {};\r\n    if (datasource?.extra) {\r\n      try {\r\n        extra = JSON.parse(datasource?.extra);\r\n      } catch {} // eslint-disable-line no-empty\r\n    }\r\n\r\n    return (\r\n      <Styles data-test=\"datasource-control\" className=\"DatasourceControl\">\r\n        <div className=\"data-container\">\r\n          <Icon name=\"dataset-physical\" className=\"dataset-svg\" />\r\n          {/* Add a tooltip only for long dataset names */}\r\n          {!isMissingDatasource && datasource.name.length > 25 ? (\r\n            <Tooltip title={datasource.name}>\r\n              <span className=\"title-select\">{datasource.name}</span>\r\n            </Tooltip>\r\n          ) : (\r\n            <span title={datasource.name} className=\"title-select\">\r\n              {datasource.name}\r\n            </span>\r\n          )}\r\n          {healthCheckMessage && (\r\n            <Tooltip title={healthCheckMessage}>\r\n              <Icons.AlertSolid iconColor={supersetTheme.colors.warning.base} />\r\n            </Tooltip>\r\n          )}\r\n          {extra?.warning_markdown && ( // eslint-disable-line camelcase\r\n            <WarningIconWithTooltip\r\n              warningMarkdown={extra.warning_markdown} // eslint-disable-line camelcase\r\n              size={30}\r\n            />\r\n          )}\r\n          <Dropdown\r\n            overlay={datasourceMenu}\r\n            trigger={['click']}\r\n            data-test=\"datasource-menu\"\r\n          >\r\n            <Tooltip title={t('More dataset related options')}>\r\n              <Icon\r\n                className=\"datasource-modal-trigger\"\r\n                data-test=\"datasource-menu-trigger\"\r\n                name=\"more-horiz\"\r\n              />\r\n            </Tooltip>\r\n          </Dropdown>\r\n        </div>\r\n        {/* missing dataset */}\r\n        {isMissingDatasource && (\r\n          <div className=\"error-alert\">\r\n            <ErrorAlert\r\n              level=\"warning\"\r\n              title={t('Missing dataset')}\r\n              source=\"explore\"\r\n              subtitle={\r\n                <>\r\n                  <p>\r\n                    {t(\r\n                      'The dataset linked to this chart may have been deleted.',\r\n                    )}\r\n                  </p>\r\n                  <p>\r\n                    <Button\r\n                      buttonStyle=\"primary\"\r\n                      onClick={() =>\r\n                        this.handleMenuItemClick({ key: CHANGE_DATASET })\r\n                      }\r\n                    >\r\n                      {t('Change dataset')}\r\n                    </Button>\r\n                  </p>\r\n                </>\r\n              }\r\n            />\r\n          </div>\r\n        )}\r\n        {showEditDatasourceModal && (\r\n          <DatasourceModal\r\n            datasource={datasource}\r\n            show={showEditDatasourceModal}\r\n            onDatasourceSave={this.onDatasourceSave}\r\n            onHide={this.toggleEditDatasourceModal}\r\n          />\r\n        )}\r\n        {showChangeDatasourceModal && (\r\n          <ChangeDatasourceModal\r\n            onDatasourceSave={this.onDatasourceSave}\r\n            onHide={this.toggleChangeDatasourceModal}\r\n            show={showChangeDatasourceModal}\r\n            onChange={onChange}\r\n          />\r\n        )}\r\n      </Styles>\r\n    );\r\n  }\r\n}\r\n\r\nDatasourceControl.propTypes = propTypes;\r\nDatasourceControl.defaultProps = defaultProps;\r\n\r\nexport default DatasourceControl;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport rison from 'rison';\r\nimport {\r\n  SupersetClient,\r\n  styled,\r\n  supersetTheme,\r\n  t,\r\n  TimeRangeEndpoints,\r\n} from '@superset-ui/core';\r\nimport {\r\n  buildTimeRangeString,\r\n  formatTimeRange,\r\n  COMMON_RANGE_VALUES_SET,\r\n  CALENDAR_RANGE_VALUES_SET,\r\n  FRAME_OPTIONS,\r\n  customTimeRangeDecode,\r\n} from 'src/explore/components/controls/DateFilterControl/utils';\r\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\r\nimport Button from 'src/components/Button';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\nimport Label from 'src/components/Label';\r\nimport Popover from 'src/components/Popover';\r\nimport { Divider } from 'src/common/components';\r\nimport Icon from 'src/components/Icon';\r\nimport { Select } from 'src/components/Select';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport { DEFAULT_TIME_RANGE } from 'src/explore/constants';\r\nimport { useDebouncedEffect } from 'src/explore/exploreUtils';\r\nimport { SLOW_DEBOUNCE } from 'src/constants';\r\nimport { testWithId } from 'src/utils/testUtils';\r\nimport { SelectOptionType, FrameType } from './types';\r\n\r\nimport {\r\n  CommonFrame,\r\n  CalendarFrame,\r\n  CustomFrame,\r\n  AdvancedFrame,\r\n} from './components';\r\n\r\nconst guessFrame = (timeRange: string): FrameType => {\r\n  if (COMMON_RANGE_VALUES_SET.has(timeRange)) {\r\n    return 'Common';\r\n  }\r\n  if (CALENDAR_RANGE_VALUES_SET.has(timeRange)) {\r\n    return 'Calendar';\r\n  }\r\n  if (timeRange === 'No filter') {\r\n    return 'No filter';\r\n  }\r\n  if (customTimeRangeDecode(timeRange).matchedFlag) {\r\n    return 'Custom';\r\n  }\r\n  return 'Advanced';\r\n};\r\n\r\nconst fetchTimeRange = async (\r\n  timeRange: string,\r\n  endpoints?: TimeRangeEndpoints,\r\n) => {\r\n  const query = rison.encode(timeRange);\r\n  const endpoint = `/api/v1/time_range/?q=${query}`;\r\n  try {\r\n    const response = await SupersetClient.get({ endpoint });\r\n    const timeRangeString = buildTimeRangeString(\r\n      response?.json?.result?.since || '',\r\n      response?.json?.result?.until || '',\r\n    );\r\n    return {\r\n      value: formatTimeRange(timeRangeString, endpoints),\r\n    };\r\n  } catch (response) {\r\n    const clientError = await getClientErrorObject(response);\r\n    return {\r\n      error: clientError.message || clientError.error,\r\n    };\r\n  }\r\n};\r\n\r\nconst StyledPopover = styled(Popover)``;\r\n\r\nconst ContentStyleWrapper = styled.div`\r\n  .ant-row {\r\n    margin-top: 8px;\r\n  }\r\n\r\n  .ant-input-number {\r\n    width: 100%;\r\n  }\r\n\r\n  .frame-dropdown {\r\n    width: 272px;\r\n  }\r\n\r\n  .ant-picker {\r\n    padding: 4px 17px 4px;\r\n    border-radius: 4px;\r\n    width: 100%;\r\n  }\r\n\r\n  .ant-divider-horizontal {\r\n    margin: 16px 0;\r\n  }\r\n\r\n  .control-label {\r\n    font-size: 11px;\r\n    font-weight: 500;\r\n    color: #b2b2b2;\r\n    line-height: 16px;\r\n    text-transform: uppercase;\r\n    margin: 8px 0;\r\n  }\r\n\r\n  .vertical-radio {\r\n    display: block;\r\n    height: 40px;\r\n    line-height: 40px;\r\n  }\r\n\r\n  .section-title {\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 15px;\r\n    line-height: 24px;\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .control-anchor-to {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .control-anchor-to-datetime {\r\n    width: 217px;\r\n  }\r\n\r\n  .footer {\r\n    text-align: right;\r\n  }\r\n`;\r\n\r\nconst IconWrapper = styled.span`\r\n  svg {\r\n    margin-right: ${({ theme }) => 2 * theme.gridUnit}px;\r\n    vertical-align: middle;\r\n  }\r\n  .text {\r\n    vertical-align: middle;\r\n  }\r\n  .error {\r\n    color: ${({ theme }) => theme.colors.error.base};\r\n  }\r\n`;\r\n\r\ninterface DateFilterControlProps {\r\n  name: string;\r\n  onChange: (timeRange: string) => void;\r\n  value?: string;\r\n  endpoints?: TimeRangeEndpoints;\r\n}\r\n\r\nexport const DATE_FILTER_CONTROL_TEST_ID = 'date-filter-control';\r\nexport const getDateFilterControlTestId = testWithId(\r\n  DATE_FILTER_CONTROL_TEST_ID,\r\n);\r\n\r\nexport default function DateFilterLabel(props: DateFilterControlProps) {\r\n  const { value = DEFAULT_TIME_RANGE, endpoints, onChange } = props;\r\n  const [actualTimeRange, setActualTimeRange] = useState<string>(value);\r\n\r\n  const [show, setShow] = useState<boolean>(false);\r\n  const guessedFrame = useMemo(() => guessFrame(value), [value]);\r\n  const [frame, setFrame] = useState<FrameType>(guessedFrame);\r\n  const [timeRangeValue, setTimeRangeValue] = useState(value);\r\n  const [validTimeRange, setValidTimeRange] = useState<boolean>(false);\r\n  const [evalResponse, setEvalResponse] = useState<string>(value);\r\n  const [tooltipTitle, setTooltipTitle] = useState<string>(value);\r\n\r\n  useEffect(() => {\r\n    fetchTimeRange(value, endpoints).then(({ value: actualRange, error }) => {\r\n      if (error) {\r\n        setEvalResponse(error || '');\r\n        setValidTimeRange(false);\r\n        setTooltipTitle(value || '');\r\n      } else {\r\n        /*\r\n          HRT == human readable text\r\n          ADR == actual datetime range\r\n          +--------------+------+----------+--------+----------+-----------+\r\n          |              | Last | Previous | Custom | Advanced | No Filter |\r\n          +--------------+------+----------+--------+----------+-----------+\r\n          | control pill | HRT  | HRT      | ADR    | ADR      |   HRT     |\r\n          +--------------+------+----------+--------+----------+-----------+\r\n          | tooltip      | ADR  | ADR      | HRT    | HRT      |   ADR     |\r\n          +--------------+------+----------+--------+----------+-----------+\r\n        */\r\n        if (\r\n          guessedFrame === 'Common' ||\r\n          guessedFrame === 'Calendar' ||\r\n          guessedFrame === 'No filter'\r\n        ) {\r\n          setActualTimeRange(value);\r\n          setTooltipTitle(actualRange || '');\r\n        } else {\r\n          setActualTimeRange(actualRange || '');\r\n          setTooltipTitle(value || '');\r\n        }\r\n        setValidTimeRange(true);\r\n      }\r\n    });\r\n  }, [value]);\r\n\r\n  useDebouncedEffect(\r\n    () => {\r\n      fetchTimeRange(timeRangeValue, endpoints).then(({ value, error }) => {\r\n        if (error) {\r\n          setEvalResponse(error || '');\r\n          setValidTimeRange(false);\r\n        } else {\r\n          setEvalResponse(value || '');\r\n          setValidTimeRange(true);\r\n        }\r\n      });\r\n    },\r\n    SLOW_DEBOUNCE,\r\n    [timeRangeValue],\r\n  );\r\n\r\n  function onSave() {\r\n    onChange(timeRangeValue);\r\n    setShow(false);\r\n  }\r\n\r\n  function onOpen() {\r\n    setTimeRangeValue(value);\r\n    setFrame(guessedFrame);\r\n    setShow(true);\r\n  }\r\n\r\n  function onHide() {\r\n    setTimeRangeValue(value);\r\n    setFrame(guessedFrame);\r\n    setShow(false);\r\n  }\r\n\r\n  const togglePopover = () => {\r\n    if (show) {\r\n      onHide();\r\n    } else {\r\n      setShow(true);\r\n    }\r\n  };\r\n\r\n  function onChangeFrame(option: SelectOptionType) {\r\n    if (option.value === 'No filter') {\r\n      setTimeRangeValue('No filter');\r\n    }\r\n    setFrame(option.value as FrameType);\r\n  }\r\n\r\n  const overlayConetent = (\r\n    <ContentStyleWrapper>\r\n      <div className=\"control-label\">{t('RANGE TYPE')}</div>\r\n      <Select\r\n        options={FRAME_OPTIONS}\r\n        value={FRAME_OPTIONS.filter(({ value }) => value === frame)}\r\n        onChange={onChangeFrame}\r\n        className=\"frame-dropdown\"\r\n      />\r\n      {frame !== 'No filter' && <Divider />}\r\n      {frame === 'Common' && (\r\n        <CommonFrame value={timeRangeValue} onChange={setTimeRangeValue} />\r\n      )}\r\n      {frame === 'Calendar' && (\r\n        <CalendarFrame value={timeRangeValue} onChange={setTimeRangeValue} />\r\n      )}\r\n      {frame === 'Advanced' && (\r\n        <AdvancedFrame value={timeRangeValue} onChange={setTimeRangeValue} />\r\n      )}\r\n      {frame === 'Custom' && (\r\n        <CustomFrame value={timeRangeValue} onChange={setTimeRangeValue} />\r\n      )}\r\n      {frame === 'No filter' && <div data-test=\"no-filter\" />}\r\n      <Divider />\r\n      <div>\r\n        <div className=\"section-title\">{t('Actual time range')}</div>\r\n        {validTimeRange && <div>{evalResponse}</div>}\r\n        {!validTimeRange && (\r\n          <IconWrapper className=\"warning\">\r\n            <Icon\r\n              name=\"error-solid-small\"\r\n              color={supersetTheme.colors.error.base}\r\n            />\r\n            <span className=\"text error\">{evalResponse}</span>\r\n          </IconWrapper>\r\n        )}\r\n      </div>\r\n      <Divider />\r\n      <div className=\"footer\">\r\n        <Button\r\n          buttonStyle=\"secondary\"\r\n          cta\r\n          key=\"cancel\"\r\n          onClick={onHide}\r\n          data-test=\"cancel-button\"\r\n        >\r\n          {t('CANCEL')}\r\n        </Button>\r\n        <Button\r\n          buttonStyle=\"primary\"\r\n          cta\r\n          disabled={!validTimeRange}\r\n          key=\"apply\"\r\n          onClick={onSave}\r\n          {...getDateFilterControlTestId('apply-button')}\r\n        >\r\n          {t('APPLY')}\r\n        </Button>\r\n      </div>\r\n    </ContentStyleWrapper>\r\n  );\r\n\r\n  const title = (\r\n    <IconWrapper>\r\n      <Icon name=\"edit-alt\" />\r\n      <span className=\"text\">{t('Edit time range')}</span>\r\n    </IconWrapper>\r\n  );\r\n\r\n  const overlayStyle = {\r\n    width: '600px',\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ControlHeader {...props} />\r\n      <StyledPopover\r\n        placement=\"right\"\r\n        trigger=\"click\"\r\n        content={overlayConetent}\r\n        title={title}\r\n        defaultVisible={show}\r\n        visible={show}\r\n        onVisibleChange={togglePopover}\r\n        overlayStyle={overlayStyle}\r\n      >\r\n        <Tooltip placement=\"top\" title={tooltipTitle}>\r\n          <Label\r\n            className=\"pointer\"\r\n            data-test=\"time-range-trigger\"\r\n            onClick={onOpen}\r\n          >\r\n            {actualTimeRange}\r\n          </Label>\r\n        </Tooltip>\r\n      </StyledPopover>\r\n    </>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { t } from '@superset-ui/core';\r\nimport { SEPARATOR } from 'src/explore/components/controls/DateFilterControl/utils';\r\nimport { Input } from 'src/common/components';\r\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\r\nimport { FrameComponentProps } from 'src/explore/components/controls/DateFilterControl/types';\r\nimport DateFunctionTooltip from './DateFunctionTooltip';\r\n\r\nexport function AdvancedFrame(props: FrameComponentProps) {\r\n  const advancedRange = getAdvancedRange(props.value || '');\r\n  const [since, until] = advancedRange.split(SEPARATOR);\r\n  if (advancedRange !== props.value) {\r\n    props.onChange(getAdvancedRange(props.value || ''));\r\n  }\r\n\r\n  function getAdvancedRange(value: string): string {\r\n    if (value.includes(SEPARATOR)) {\r\n      return value;\r\n    }\r\n    if (value.startsWith('Last')) {\r\n      return [value, ''].join(SEPARATOR);\r\n    }\r\n    if (value.startsWith('Next')) {\r\n      return ['', value].join(SEPARATOR);\r\n    }\r\n    return SEPARATOR;\r\n  }\r\n\r\n  function onChange(control: 'since' | 'until', value: string) {\r\n    if (control === 'since') {\r\n      props.onChange(`${value}${SEPARATOR}${until}`);\r\n    } else {\r\n      props.onChange(`${since}${SEPARATOR}${value}`);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"section-title\">\r\n        {t('Configure Advanced Time Range ')}\r\n        <DateFunctionTooltip placement=\"rightBottom\">\r\n          <i className=\"fa fa-info-circle text-muted\" />\r\n        </DateFunctionTooltip>\r\n      </div>\r\n      <div className=\"control-label\">\r\n        {t('START (INCLUSIVE)')}{' '}\r\n        <InfoTooltipWithTrigger\r\n          tooltip={t('Start date included in time range')}\r\n          placement=\"right\"\r\n        />\r\n      </div>\r\n      <Input\r\n        key=\"since\"\r\n        value={since}\r\n        onChange={e => onChange('since', e.target.value)}\r\n      />\r\n      <div className=\"control-label\">\r\n        {t('END (EXCLUSIVE)')}{' '}\r\n        <InfoTooltipWithTrigger\r\n          tooltip={t('End date excluded from time range')}\r\n          placement=\"right\"\r\n        />\r\n      </div>\r\n      <Input\r\n        key=\"until\"\r\n        value={until}\r\n        onChange={e => onChange('until', e.target.value)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { t } from '@superset-ui/core';\r\nimport { Radio } from 'src/components/Radio';\r\nimport {\r\n  CALENDAR_RANGE_OPTIONS,\r\n  CALENDAR_RANGE_SET,\r\n} from 'src/explore/components/controls/DateFilterControl/utils';\r\nimport {\r\n  CalendarRangeType,\r\n  PreviousCalendarWeek,\r\n  FrameComponentProps,\r\n} from '../types';\r\n\r\nexport function CalendarFrame(props: FrameComponentProps) {\r\n  let calendarRange = PreviousCalendarWeek;\r\n  if (CALENDAR_RANGE_SET.has(props.value as CalendarRangeType)) {\r\n    calendarRange = props.value;\r\n  } else {\r\n    props.onChange(calendarRange);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"section-title\">\r\n        {t('Configure Time Range: Previous...')}\r\n      </div>\r\n      <Radio.Group\r\n        value={calendarRange}\r\n        onChange={(e: any) => props.onChange(e.target.value)}\r\n      >\r\n        {CALENDAR_RANGE_OPTIONS.map(({ value, label }) => (\r\n          <Radio key={value} value={value} className=\"vertical-radio\">\r\n            {label}\r\n          </Radio>\r\n        ))}\r\n      </Radio.Group>\r\n    </>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { t } from '@superset-ui/core';\r\nimport { Radio } from 'src/components/Radio';\r\nimport {\r\n  COMMON_RANGE_OPTIONS,\r\n  COMMON_RANGE_SET,\r\n} from 'src/explore/components/controls/DateFilterControl/utils';\r\nimport {\r\n  CommonRangeType,\r\n  FrameComponentProps,\r\n} from 'src/explore/components/controls/DateFilterControl/types';\r\n\r\nexport function CommonFrame(props: FrameComponentProps) {\r\n  let commonRange = 'Last week';\r\n  if (COMMON_RANGE_SET.has(props.value as CommonRangeType)) {\r\n    commonRange = props.value;\r\n  } else {\r\n    props.onChange(commonRange);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"section-title\">{t('Configure Time Range: Last...')}</div>\r\n      <Radio.Group\r\n        value={commonRange}\r\n        onChange={(e: any) => props.onChange(e.target.value)}\r\n      >\r\n        {COMMON_RANGE_OPTIONS.map(({ value, label }) => (\r\n          <Radio key={value} value={value} className=\"vertical-radio\">\r\n            {label}\r\n          </Radio>\r\n        ))}\r\n      </Radio.Group>\r\n    </>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { t } from '@superset-ui/core';\r\nimport { Moment } from 'moment';\r\nimport { isInteger } from 'lodash';\r\nimport { Col, InputNumber, Row } from 'src/common/components';\r\nimport { DatePicker } from 'src/components/DatePicker';\r\nimport { Radio } from 'src/components/Radio';\r\nimport { Select } from 'src/components/Select';\r\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\r\nimport {\r\n  SINCE_GRAIN_OPTIONS,\r\n  SINCE_MODE_OPTIONS,\r\n  UNTIL_GRAIN_OPTIONS,\r\n  UNTIL_MODE_OPTIONS,\r\n  MOMENT_FORMAT,\r\n  MIDNIGHT,\r\n  customTimeRangeDecode,\r\n  customTimeRangeEncode,\r\n  dttmToMoment,\r\n} from 'src/explore/components/controls/DateFilterControl/utils';\r\nimport {\r\n  CustomRangeKey,\r\n  SelectOptionType,\r\n  FrameComponentProps,\r\n} from 'src/explore/components/controls/DateFilterControl/types';\r\n\r\nexport function CustomFrame(props: FrameComponentProps) {\r\n  const { customRange, matchedFlag } = customTimeRangeDecode(props.value);\r\n  if (!matchedFlag) {\r\n    props.onChange(customTimeRangeEncode(customRange));\r\n  }\r\n  const {\r\n    sinceDatetime,\r\n    sinceMode,\r\n    sinceGrain,\r\n    sinceGrainValue,\r\n    untilDatetime,\r\n    untilMode,\r\n    untilGrain,\r\n    untilGrainValue,\r\n    anchorValue,\r\n    anchorMode,\r\n  } = { ...customRange };\r\n\r\n  function onChange(control: CustomRangeKey, value: string) {\r\n    props.onChange(\r\n      customTimeRangeEncode({\r\n        ...customRange,\r\n        [control]: value,\r\n      }),\r\n    );\r\n  }\r\n\r\n  function onGrainValue(\r\n    control: 'sinceGrainValue' | 'untilGrainValue',\r\n    value: string | number,\r\n  ) {\r\n    // only positive values in grainValue controls\r\n    if (isInteger(value) && value > 0) {\r\n      props.onChange(\r\n        customTimeRangeEncode({\r\n          ...customRange,\r\n          [control]: value,\r\n        }),\r\n      );\r\n    }\r\n  }\r\n\r\n  function onAnchorMode(option: any) {\r\n    const radioValue = option.target.value;\r\n    if (radioValue === 'now') {\r\n      props.onChange(\r\n        customTimeRangeEncode({\r\n          ...customRange,\r\n          anchorValue: 'now',\r\n          anchorMode: radioValue,\r\n        }),\r\n      );\r\n    } else {\r\n      props.onChange(\r\n        customTimeRangeEncode({\r\n          ...customRange,\r\n          anchorValue: MIDNIGHT,\r\n          anchorMode: radioValue,\r\n        }),\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div data-test=\"custom-frame\">\r\n      <div className=\"section-title\">{t('Configure custom time range')}</div>\r\n      <Row gutter={24}>\r\n        <Col span={12}>\r\n          <div className=\"control-label\">\r\n            {t('START (INCLUSIVE)')}{' '}\r\n            <InfoTooltipWithTrigger\r\n              tooltip={t('Start date included in time range')}\r\n              placement=\"right\"\r\n            />\r\n          </div>\r\n          <Select\r\n            options={SINCE_MODE_OPTIONS}\r\n            value={SINCE_MODE_OPTIONS.filter(\r\n              option => option.value === sinceMode,\r\n            )}\r\n            onChange={(option: SelectOptionType) =>\r\n              onChange('sinceMode', option.value)\r\n            }\r\n          />\r\n          {sinceMode === 'specific' && (\r\n            <Row>\r\n              <DatePicker\r\n                showTime\r\n                defaultValue={dttmToMoment(sinceDatetime)}\r\n                onChange={(datetime: Moment) =>\r\n                  onChange('sinceDatetime', datetime.format(MOMENT_FORMAT))\r\n                }\r\n                allowClear={false}\r\n              />\r\n            </Row>\r\n          )}\r\n          {sinceMode === 'relative' && (\r\n            <Row gutter={8}>\r\n              <Col span={11}>\r\n                {/* Make sure sinceGrainValue looks like a positive integer */}\r\n                <InputNumber\r\n                  placeholder={t('Relative quantity')}\r\n                  value={Math.abs(sinceGrainValue)}\r\n                  min={1}\r\n                  defaultValue={1}\r\n                  onChange={value =>\r\n                    onGrainValue('sinceGrainValue', value || 1)\r\n                  }\r\n                  onStep={value => onGrainValue('sinceGrainValue', value || 1)}\r\n                />\r\n              </Col>\r\n              <Col span={13}>\r\n                <Select\r\n                  options={SINCE_GRAIN_OPTIONS}\r\n                  value={SINCE_GRAIN_OPTIONS.filter(\r\n                    option => option.value === sinceGrain,\r\n                  )}\r\n                  onChange={(option: SelectOptionType) =>\r\n                    onChange('sinceGrain', option.value)\r\n                  }\r\n                />\r\n              </Col>\r\n            </Row>\r\n          )}\r\n        </Col>\r\n        <Col span={12}>\r\n          <div className=\"control-label\">\r\n            {t('END (EXCLUSIVE)')}{' '}\r\n            <InfoTooltipWithTrigger\r\n              tooltip={t('End date excluded from time range')}\r\n              placement=\"right\"\r\n            />\r\n          </div>\r\n          <Select\r\n            options={UNTIL_MODE_OPTIONS}\r\n            value={UNTIL_MODE_OPTIONS.filter(\r\n              option => option.value === untilMode,\r\n            )}\r\n            onChange={(option: SelectOptionType) =>\r\n              onChange('untilMode', option.value)\r\n            }\r\n          />\r\n          {untilMode === 'specific' && (\r\n            <Row>\r\n              <DatePicker\r\n                showTime\r\n                defaultValue={dttmToMoment(untilDatetime)}\r\n                onChange={(datetime: Moment) =>\r\n                  onChange('untilDatetime', datetime.format(MOMENT_FORMAT))\r\n                }\r\n                allowClear={false}\r\n              />\r\n            </Row>\r\n          )}\r\n          {untilMode === 'relative' && (\r\n            <Row gutter={8}>\r\n              <Col span={11}>\r\n                <InputNumber\r\n                  placeholder={t('Relative quantity')}\r\n                  value={untilGrainValue}\r\n                  min={1}\r\n                  defaultValue={1}\r\n                  onChange={value =>\r\n                    onGrainValue('untilGrainValue', value || 1)\r\n                  }\r\n                  onStep={value => onGrainValue('untilGrainValue', value || 1)}\r\n                />\r\n              </Col>\r\n              <Col span={13}>\r\n                <Select\r\n                  options={UNTIL_GRAIN_OPTIONS}\r\n                  value={UNTIL_GRAIN_OPTIONS.filter(\r\n                    option => option.value === untilGrain,\r\n                  )}\r\n                  onChange={(option: SelectOptionType) =>\r\n                    onChange('untilGrain', option.value)\r\n                  }\r\n                />\r\n              </Col>\r\n            </Row>\r\n          )}\r\n        </Col>\r\n      </Row>\r\n      {sinceMode === 'relative' && untilMode === 'relative' && (\r\n        <div className=\"control-anchor-to\">\r\n          <div className=\"control-label\">{t('Anchor to')}</div>\r\n          <Row align=\"middle\">\r\n            <Col>\r\n              <Radio.Group\r\n                onChange={onAnchorMode}\r\n                defaultValue=\"now\"\r\n                value={anchorMode}\r\n              >\r\n                <Radio key=\"now\" value=\"now\">\r\n                  {t('NOW')}\r\n                </Radio>\r\n                <Radio key=\"specific\" value=\"specific\">\r\n                  {t('Date/Time')}\r\n                </Radio>\r\n              </Radio.Group>\r\n            </Col>\r\n            {anchorMode !== 'now' && (\r\n              <Col>\r\n                <DatePicker\r\n                  showTime\r\n                  defaultValue={dttmToMoment(anchorValue)}\r\n                  onChange={(datetime: Moment) =>\r\n                    onChange('anchorValue', datetime.format(MOMENT_FORMAT))\r\n                  }\r\n                  allowClear={false}\r\n                  className=\"control-anchor-to-datetime\"\r\n                />\r\n              </Col>\r\n            )}\r\n          </Row>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { useTheme, t } from '@superset-ui/core';\r\n\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport { ClassNames } from '@emotion/react';\r\n\r\nconst TIME_PICKER_HELPER = (\r\n  <>\r\n    <div>\r\n      <h3>DATETIME</h3>\r\n      <p>{t('Return to specific datetime.')}</p>\r\n      <h4>{t('Syntax')}</h4>\r\n      <pre>\r\n        <code>datetime([string])</code>\r\n      </pre>\r\n      <h4>{t('Example')}</h4>\r\n      <pre>\r\n        <code>{`datetime(\"2020-03-01 12:00:00\")\r\ndatetime(\"now\")\r\ndatetime(\"last year\")`}</code>\r\n      </pre>\r\n    </div>\r\n    <div>\r\n      <h3>DATEADD</h3>\r\n      <p>{t('Moves the given set of dates by a specified interval.')}</p>\r\n      <h4>{t('Syntax')}</h4>\r\n      <pre>\r\n        <code>{`dateadd([datetime], [integer], [dateunit])\r\ndateunit = (year | quarter | month | week | day | hour | minute | second)`}</code>\r\n      </pre>\r\n      <h4>{t('Example')}</h4>\r\n      <pre>\r\n        <code>{`dateadd(datetime(\"today\"), -13, day)\r\ndateadd(datetime(\"2020-03-01\"), 2, day)`}</code>\r\n      </pre>\r\n    </div>\r\n    <div>\r\n      <h3>DATETRUNC</h3>\r\n      <p>\r\n        {t(\r\n          'Truncates the specified date to the accuracy specified by the date unit.',\r\n        )}\r\n      </p>\r\n      <h4>{t('Syntax')}</h4>\r\n      <pre>\r\n        <code>{`datetrunc([datetime], [dateunit])\r\ndateunit = (year | month | week)`}</code>\r\n      </pre>\r\n      <h4>{t('Example')}</h4>\r\n      <pre>\r\n        <code>{`datetrunc(datetime(\"2020-03-01\"), week)\r\ndatetrunc(datetime(\"2020-03-01\"), month)`}</code>\r\n      </pre>\r\n    </div>\r\n    <div>\r\n      <h3>LASTDAY</h3>\r\n      <p>{t('Get the last date by the date unit.')}</p>\r\n      <h4>{t('Syntax')}</h4>\r\n      <pre>\r\n        <code>{`lastday([datetime], [dateunit])\r\ndateunit = (year | month | week)`}</code>\r\n      </pre>\r\n      <h4>{t('Example')}</h4>\r\n      <pre>\r\n        <code>lastday(datetime(\"today\"), month)</code>\r\n      </pre>\r\n    </div>\r\n    <div>\r\n      <h3>HOLIDAY</h3>\r\n      <p>{t('Get the specify date for the holiday')}</p>\r\n      <h4>{t('Syntax')}</h4>\r\n      <pre>\r\n        <code>{`holiday([string])\r\nholiday([holiday string], [datetime])\r\nholiday([holiday string], [datetime], [country name])`}</code>\r\n      </pre>\r\n      <h4>{t('Example')}</h4>\r\n      <pre>\r\n        <code>{`holiday(\"new year\")\r\nholiday(\"christmas\", datetime(\"2019\"))\r\nholiday(\"christmas\", dateadd(datetime(\"2019\"), 1, year))\r\nholiday(\"christmas\", datetime(\"2 years ago\"))\r\nholiday(\"Easter Monday\", datetime(\"2019\"), \"UK\")`}</code>\r\n      </pre>\r\n    </div>\r\n  </>\r\n);\r\n\r\nconst StyledTooltip = (props: any) => {\r\n  const theme = useTheme();\r\n  return (\r\n    <ClassNames>\r\n      {({ css }) => (\r\n        <Tooltip\r\n          overlayClassName={css`\r\n            .ant-tooltip-content {\r\n              min-width: ${theme.gridUnit * 125}px;\r\n              max-height: 410px;\r\n              overflow-y: scroll;\r\n\r\n              .ant-tooltip-inner {\r\n                max-width: ${theme.gridUnit * 125}px;\r\n                h3 {\r\n                  font-size: ${theme.typography.sizes.m}px;\r\n                  font-weight: ${theme.typography.weights.bold};\r\n                }\r\n                h4 {\r\n                  font-size: ${theme.typography.sizes.m}px;\r\n                  font-weight: ${theme.typography.weights.bold};\r\n                }\r\n                pre {\r\n                  border: none;\r\n                  text-align: left;\r\n                  word-break: break-word;\r\n                  font-size: ${theme.typography.sizes.s}px;\r\n                }\r\n              }\r\n            }\r\n          `}\r\n          {...props}\r\n        />\r\n      )}\r\n    </ClassNames>\r\n  );\r\n};\r\n\r\nexport default function DateFunctionTooltip(props: any) {\r\n  return <StyledTooltip title={TIME_PICKER_HELPER} {...props} />;\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport { CommonFrame } from './CommonFrame';\r\nexport { CalendarFrame } from './CalendarFrame';\r\nexport { CustomFrame } from './CustomFrame';\r\nexport { AdvancedFrame } from './AdvancedFrame';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport { default } from './DateFilterLabel';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport type SelectOptionType = {\r\n  value: string;\r\n  label: string;\r\n};\r\n\r\nexport type FrameType =\r\n  | 'Common'\r\n  | 'Calendar'\r\n  | 'Custom'\r\n  | 'Advanced'\r\n  | 'No filter';\r\n\r\nexport type DateTimeGrainType =\r\n  | 'second'\r\n  | 'minite'\r\n  | 'hour'\r\n  | 'day'\r\n  | 'week'\r\n  | 'month'\r\n  | 'quarter'\r\n  | 'year';\r\n\r\nexport type CustomRangeKey =\r\n  | 'sinceMode'\r\n  | 'sinceDatetime'\r\n  | 'sinceGrain'\r\n  | 'sinceGrainValue'\r\n  | 'untilMode'\r\n  | 'untilDatetime'\r\n  | 'untilGrain'\r\n  | 'untilGrainValue'\r\n  | 'anchorMode'\r\n  | 'anchorValue';\r\n\r\nexport type DateTimeModeType = 'specific' | 'relative' | 'now' | 'today';\r\n\r\nexport type CustomRangeType = {\r\n  sinceMode: DateTimeModeType;\r\n  sinceDatetime: string;\r\n  sinceGrain: DateTimeGrainType;\r\n  sinceGrainValue: number;\r\n  untilMode: DateTimeModeType;\r\n  untilDatetime: string;\r\n  untilGrain: DateTimeGrainType;\r\n  untilGrainValue: number;\r\n  anchorMode: 'now' | 'specific';\r\n  anchorValue: string;\r\n};\r\n\r\nexport type CustomRangeDecodeType = {\r\n  customRange: CustomRangeType;\r\n  matchedFlag: boolean;\r\n};\r\n\r\nexport type CommonRangeType =\r\n  | 'Last day'\r\n  | 'Last week'\r\n  | 'Last month'\r\n  | 'Last quarter'\r\n  | 'Last year';\r\n\r\nexport const PreviousCalendarWeek = 'previous calendar week';\r\nexport const PreviousCalendarMonth = 'previous calendar month';\r\nexport const PreviousCalendarYear = 'previous calendar year';\r\nexport type CalendarRangeType =\r\n  | typeof PreviousCalendarWeek\r\n  | typeof PreviousCalendarMonth\r\n  | typeof PreviousCalendarYear;\r\n\r\nexport type FrameComponentProps = {\r\n  onChange: (timeRange: string) => void;\r\n  value: string;\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport moment from 'moment';\r\nimport { t } from '@superset-ui/core';\r\nimport {\r\n  SelectOptionType,\r\n  PreviousCalendarWeek,\r\n  PreviousCalendarMonth,\r\n  PreviousCalendarYear,\r\n  CommonRangeType,\r\n  CalendarRangeType,\r\n} from 'src/explore/components/controls/DateFilterControl/types';\r\n\r\nexport const FRAME_OPTIONS: SelectOptionType[] = [\r\n  { value: 'Common', label: t('Last') },\r\n  { value: 'Calendar', label: t('Previous') },\r\n  { value: 'Custom', label: t('Custom') },\r\n  { value: 'Advanced', label: t('Advanced') },\r\n  { value: 'No filter', label: t('No filter') },\r\n];\r\n\r\nexport const COMMON_RANGE_OPTIONS: SelectOptionType[] = [\r\n  { value: 'Last day', label: t('last day') },\r\n  { value: 'Last week', label: t('last week') },\r\n  { value: 'Last month', label: t('last month') },\r\n  { value: 'Last quarter', label: t('last quarter') },\r\n  { value: 'Last year', label: t('last year') },\r\n];\r\nexport const COMMON_RANGE_VALUES_SET = new Set(\r\n  COMMON_RANGE_OPTIONS.map(({ value }) => value),\r\n);\r\n\r\nexport const CALENDAR_RANGE_OPTIONS: SelectOptionType[] = [\r\n  { value: PreviousCalendarWeek, label: t('previous calendar week') },\r\n  { value: PreviousCalendarMonth, label: t('previous calendar month') },\r\n  { value: PreviousCalendarYear, label: t('previous calendar year') },\r\n];\r\nexport const CALENDAR_RANGE_VALUES_SET = new Set(\r\n  CALENDAR_RANGE_OPTIONS.map(({ value }) => value),\r\n);\r\n\r\nconst GRAIN_OPTIONS = [\r\n  { value: 'second', label: (rel: string) => `${t('Seconds')} ${rel}` },\r\n  { value: 'minute', label: (rel: string) => `${t('Minutes')} ${rel}` },\r\n  { value: 'hour', label: (rel: string) => `${t('Hours')} ${rel}` },\r\n  { value: 'day', label: (rel: string) => `${t('Days')} ${rel}` },\r\n  { value: 'week', label: (rel: string) => `${t('Weeks')} ${rel}` },\r\n  { value: 'month', label: (rel: string) => `${t('Months')} ${rel}` },\r\n  { value: 'quarter', label: (rel: string) => `${t('Quarters')} ${rel}` },\r\n  { value: 'year', label: (rel: string) => `${t('Years')} ${rel}` },\r\n];\r\n\r\nexport const SINCE_GRAIN_OPTIONS: SelectOptionType[] = GRAIN_OPTIONS.map(\r\n  item => ({\r\n    value: item.value,\r\n    label: item.label(t('Before')),\r\n  }),\r\n);\r\n\r\nexport const UNTIL_GRAIN_OPTIONS: SelectOptionType[] = GRAIN_OPTIONS.map(\r\n  item => ({\r\n    value: item.value,\r\n    label: item.label(t('After')),\r\n  }),\r\n);\r\n\r\nexport const SINCE_MODE_OPTIONS: SelectOptionType[] = [\r\n  { value: 'specific', label: t('Specific Date/Time') },\r\n  { value: 'relative', label: t('Relative Date/Time') },\r\n  { value: 'now', label: t('Now') },\r\n  { value: 'today', label: t('Midnight') },\r\n];\r\n\r\nexport const UNTIL_MODE_OPTIONS: SelectOptionType[] = SINCE_MODE_OPTIONS.slice();\r\n\r\nexport const COMMON_RANGE_SET: Set<CommonRangeType> = new Set([\r\n  'Last day',\r\n  'Last week',\r\n  'Last month',\r\n  'Last quarter',\r\n  'Last year',\r\n]);\r\n\r\nexport const CALENDAR_RANGE_SET: Set<CalendarRangeType> = new Set([\r\n  PreviousCalendarWeek,\r\n  PreviousCalendarMonth,\r\n  PreviousCalendarYear,\r\n]);\r\n\r\nexport const MOMENT_FORMAT = 'YYYY-MM-DD[T]HH:mm:ss';\r\nexport const SEVEN_DAYS_AGO = moment()\r\n  .utc()\r\n  .startOf('day')\r\n  .subtract(7, 'days')\r\n  .format(MOMENT_FORMAT);\r\nexport const MIDNIGHT = moment().utc().startOf('day').format(MOMENT_FORMAT);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { TimeRangeEndpoints } from '@superset-ui/core';\r\n\r\nexport const SEPARATOR = ' : ';\r\n\r\nexport const buildTimeRangeString = (since: string, until: string): string =>\r\n  `${since}${SEPARATOR}${until}`;\r\n\r\nconst formatDateEndpoint = (dttm: string, isStart?: boolean): string =>\r\n  dttm.replace('T00:00:00', '') || (isStart ? '-∞' : '∞');\r\n\r\nexport const formatTimeRange = (\r\n  timeRange: string,\r\n  endpoints?: TimeRangeEndpoints,\r\n) => {\r\n  const splitDateRange = timeRange.split(SEPARATOR);\r\n  if (splitDateRange.length === 1) return timeRange;\r\n  const formattedEndpoints = (\r\n    endpoints || ['unknown', 'unknown']\r\n  ).map((endpoint: string) => (endpoint === 'inclusive' ? '≤' : '<'));\r\n\r\n  return `${formatDateEndpoint(splitDateRange[0], true)} ${\r\n    formattedEndpoints[0]\r\n  } col ${formattedEndpoints[1]} ${formatDateEndpoint(splitDateRange[1])}`;\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport moment, { Moment } from 'moment';\r\nimport {\r\n  CustomRangeDecodeType,\r\n  CustomRangeType,\r\n  DateTimeGrainType,\r\n  DateTimeModeType,\r\n} from 'src/explore/components/controls/DateFilterControl/types';\r\nimport { SEPARATOR } from './dateFilterUtils';\r\nimport { SEVEN_DAYS_AGO, MIDNIGHT, MOMENT_FORMAT } from './constants';\r\n\r\n/**\r\n * RegExp to test a string for a full ISO 8601 Date\r\n * Does not do any sort of date validation, only checks if the string is according to the ISO 8601 spec.\r\n *  YYYY-MM-DDThh:mm:ss\r\n *  YYYY-MM-DDThh:mm:ssTZD\r\n *  YYYY-MM-DDThh:mm:ss.sTZD\r\n * @see: https://www.w3.org/TR/NOTE-datetime\r\n */\r\nconst iso8601 = String.raw`\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.\\d+)?(?:(?:[+-]\\d\\d:\\d\\d)|Z)?`;\r\nconst datetimeConstant = String.raw`TODAY|NOW`;\r\nconst grainValue = String.raw`[+-]?[1-9][0-9]*`;\r\nconst grain = String.raw`YEAR|QUARTER|MONTH|WEEK|DAY|HOUR|MINUTE|SECOND`;\r\nconst CUSTOM_RANGE_EXPRESSION = RegExp(\r\n  String.raw`^DATEADD\\(DATETIME\\(\"(${iso8601}|${datetimeConstant})\"\\),\\s(${grainValue}),\\s(${grain})\\)$`,\r\n  'i',\r\n);\r\nexport const ISO8601_AND_CONSTANT = RegExp(\r\n  String.raw`^${iso8601}$|^${datetimeConstant}$`,\r\n  'i',\r\n);\r\nconst DATETIME_CONSTANT = ['now', 'today'];\r\nconst defaultCustomRange: CustomRangeType = {\r\n  sinceDatetime: SEVEN_DAYS_AGO,\r\n  sinceMode: 'relative',\r\n  sinceGrain: 'day',\r\n  sinceGrainValue: -7,\r\n  untilDatetime: MIDNIGHT,\r\n  untilMode: 'specific',\r\n  untilGrain: 'day',\r\n  untilGrainValue: 7,\r\n  anchorMode: 'now',\r\n  anchorValue: 'now',\r\n};\r\nconst SPECIFIC_MODE = ['specific', 'today', 'now'];\r\n\r\nexport const dttmToMoment = (dttm: string): Moment => {\r\n  if (dttm === 'now') {\r\n    return moment().utc().startOf('second');\r\n  }\r\n  if (dttm === 'today') {\r\n    return moment().utc().startOf('day');\r\n  }\r\n  return moment(dttm);\r\n};\r\n\r\nexport const dttmToString = (dttm: string): string =>\r\n  dttmToMoment(dttm).format(MOMENT_FORMAT);\r\n\r\nexport const customTimeRangeDecode = (\r\n  timeRange: string,\r\n): CustomRangeDecodeType => {\r\n  const splitDateRange = timeRange.split(SEPARATOR);\r\n\r\n  if (splitDateRange.length === 2) {\r\n    const [since, until] = splitDateRange;\r\n\r\n    // specific : specific\r\n    if (ISO8601_AND_CONSTANT.test(since) && ISO8601_AND_CONSTANT.test(until)) {\r\n      const sinceMode = (DATETIME_CONSTANT.includes(since)\r\n        ? since\r\n        : 'specific') as DateTimeModeType;\r\n      const untilMode = (DATETIME_CONSTANT.includes(until)\r\n        ? until\r\n        : 'specific') as DateTimeModeType;\r\n      return {\r\n        customRange: {\r\n          ...defaultCustomRange,\r\n          sinceDatetime: since,\r\n          untilDatetime: until,\r\n          sinceMode,\r\n          untilMode,\r\n        },\r\n        matchedFlag: true,\r\n      };\r\n    }\r\n\r\n    // relative : specific\r\n    const sinceCapturedGroup = since.match(CUSTOM_RANGE_EXPRESSION);\r\n    if (\r\n      sinceCapturedGroup &&\r\n      ISO8601_AND_CONSTANT.test(until) &&\r\n      since.includes(until)\r\n    ) {\r\n      const [dttm, grainValue, grain] = sinceCapturedGroup.slice(1);\r\n      const untilMode = (DATETIME_CONSTANT.includes(until)\r\n        ? until\r\n        : 'specific') as DateTimeModeType;\r\n      return {\r\n        customRange: {\r\n          ...defaultCustomRange,\r\n          sinceGrain: grain as DateTimeGrainType,\r\n          sinceGrainValue: parseInt(grainValue, 10),\r\n          sinceDatetime: dttm,\r\n          untilDatetime: dttm,\r\n          sinceMode: 'relative',\r\n          untilMode,\r\n        },\r\n        matchedFlag: true,\r\n      };\r\n    }\r\n\r\n    // specific : relative\r\n    const untilCapturedGroup = until.match(CUSTOM_RANGE_EXPRESSION);\r\n    if (\r\n      ISO8601_AND_CONSTANT.test(since) &&\r\n      untilCapturedGroup &&\r\n      until.includes(since)\r\n    ) {\r\n      const [dttm, grainValue, grain] = [...untilCapturedGroup.slice(1)];\r\n      const sinceMode = (DATETIME_CONSTANT.includes(since)\r\n        ? since\r\n        : 'specific') as DateTimeModeType;\r\n      return {\r\n        customRange: {\r\n          ...defaultCustomRange,\r\n          untilGrain: grain as DateTimeGrainType,\r\n          untilGrainValue: parseInt(grainValue, 10),\r\n          sinceDatetime: dttm,\r\n          untilDatetime: dttm,\r\n          untilMode: 'relative',\r\n          sinceMode,\r\n        },\r\n        matchedFlag: true,\r\n      };\r\n    }\r\n\r\n    // relative : relative\r\n    if (sinceCapturedGroup && untilCapturedGroup) {\r\n      const [sinceDttm, sinceGrainValue, sinceGrain] = [\r\n        ...sinceCapturedGroup.slice(1),\r\n      ];\r\n      const [untileDttm, untilGrainValue, untilGrain] = [\r\n        ...untilCapturedGroup.slice(1),\r\n      ];\r\n      if (sinceDttm === untileDttm) {\r\n        return {\r\n          customRange: {\r\n            ...defaultCustomRange,\r\n            sinceGrain: sinceGrain as DateTimeGrainType,\r\n            sinceGrainValue: parseInt(sinceGrainValue, 10),\r\n            sinceDatetime: sinceDttm,\r\n            untilGrain: untilGrain as DateTimeGrainType,\r\n            untilGrainValue: parseInt(untilGrainValue, 10),\r\n            untilDatetime: untileDttm,\r\n            anchorValue: sinceDttm,\r\n            sinceMode: 'relative',\r\n            untilMode: 'relative',\r\n            anchorMode: sinceDttm === 'now' ? 'now' : 'specific',\r\n          },\r\n          matchedFlag: true,\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    customRange: defaultCustomRange,\r\n    matchedFlag: false,\r\n  };\r\n};\r\n\r\nexport const customTimeRangeEncode = (customRange: CustomRangeType): string => {\r\n  const {\r\n    sinceDatetime,\r\n    sinceMode,\r\n    sinceGrain,\r\n    sinceGrainValue,\r\n    untilDatetime,\r\n    untilMode,\r\n    untilGrain,\r\n    untilGrainValue,\r\n    anchorValue,\r\n  } = { ...customRange };\r\n  // specific : specific\r\n  if (SPECIFIC_MODE.includes(sinceMode) && SPECIFIC_MODE.includes(untilMode)) {\r\n    const since =\r\n      sinceMode === 'specific' ? dttmToString(sinceDatetime) : sinceMode;\r\n    const until =\r\n      untilMode === 'specific' ? dttmToString(untilDatetime) : untilMode;\r\n    return `${since} : ${until}`;\r\n  }\r\n\r\n  // specific : relative\r\n  if (SPECIFIC_MODE.includes(sinceMode) && untilMode === 'relative') {\r\n    const since =\r\n      sinceMode === 'specific' ? dttmToString(sinceDatetime) : sinceMode;\r\n    const until = `DATEADD(DATETIME(\"${since}\"), ${untilGrainValue}, ${untilGrain})`;\r\n    return `${since} : ${until}`;\r\n  }\r\n\r\n  // relative : specific\r\n  if (sinceMode === 'relative' && SPECIFIC_MODE.includes(untilMode)) {\r\n    const until =\r\n      untilMode === 'specific' ? dttmToString(untilDatetime) : untilMode;\r\n    const since = `DATEADD(DATETIME(\"${until}\"), ${-Math.abs(\r\n      sinceGrainValue,\r\n    )}, ${sinceGrain})`;\r\n    return `${since} : ${until}`;\r\n  }\r\n\r\n  // relative : relative\r\n  const since = `DATEADD(DATETIME(\"${anchorValue}\"), ${-Math.abs(\r\n    sinceGrainValue,\r\n  )}, ${sinceGrain})`;\r\n  const until = `DATEADD(DATETIME(\"${anchorValue}\"), ${untilGrainValue}, ${untilGrain})`;\r\n  return `${since} : ${until}`;\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport * from './dateParser';\r\nexport * from './constants';\r\nexport * from './dateFilterUtils';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState } from 'react';\r\nimport { tn } from '@superset-ui/core';\r\nimport { ColumnMeta } from '@superset-ui/chart-controls';\r\nimport { isEmpty } from 'lodash';\r\nimport { LabelProps } from 'src/explore/components/controls/DndColumnSelectControl/types';\r\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\r\nimport OptionWrapper from 'src/explore/components/controls/DndColumnSelectControl/OptionWrapper';\r\nimport { OptionSelector } from 'src/explore/components/controls/DndColumnSelectControl/utils';\r\nimport { DatasourcePanelDndItem } from 'src/explore/components/DatasourcePanel/types';\r\nimport { DndItemType } from 'src/explore/components/DndItemType';\r\nimport { StyledColumnOption } from 'src/explore/components/optionRenderers';\r\n\r\nexport const DndColumnSelect = (props: LabelProps) => {\r\n  const { value, options, multi = true } = props;\r\n  const optionSelector = new OptionSelector(options, value);\r\n  const [values, setValues] = useState<ColumnMeta[]>(optionSelector.values);\r\n\r\n  const onDrop = (item: DatasourcePanelDndItem) => {\r\n    const column = item.value as ColumnMeta;\r\n    if (!optionSelector.isArray && !isEmpty(optionSelector.values)) {\r\n      optionSelector.replace(0, column.column_name);\r\n    } else {\r\n      optionSelector.add(column.column_name);\r\n    }\r\n    setValues(optionSelector.values);\r\n    props.onChange(optionSelector.getValues());\r\n  };\r\n\r\n  const canDrop = (item: DatasourcePanelDndItem) =>\r\n    (multi || optionSelector.values.length === 0) &&\r\n    !optionSelector.has((item.value as ColumnMeta).column_name);\r\n\r\n  const onClickClose = (index: number) => {\r\n    optionSelector.del(index);\r\n    setValues(optionSelector.values);\r\n    props.onChange(optionSelector.getValues());\r\n  };\r\n\r\n  const onShiftOptions = (dragIndex: number, hoverIndex: number) => {\r\n    optionSelector.swap(dragIndex, hoverIndex);\r\n    setValues(optionSelector.values);\r\n    props.onChange(optionSelector.getValues());\r\n  };\r\n\r\n  const valuesRenderer = () =>\r\n    values.map((column, idx) => (\r\n      <OptionWrapper\r\n        key={idx}\r\n        index={idx}\r\n        clickClose={onClickClose}\r\n        onShiftOptions={onShiftOptions}\r\n        type={DndItemType.ColumnOption}\r\n      >\r\n        <StyledColumnOption column={column} showType />\r\n      </OptionWrapper>\r\n    ));\r\n\r\n  return (\r\n    <DndSelectLabel<string | string[], ColumnMeta[]>\r\n      onDrop={onDrop}\r\n      canDrop={canDrop}\r\n      valuesRenderer={valuesRenderer}\r\n      accept={DndItemType.Column}\r\n      displayGhostButton={multi || optionSelector.values.length === 0}\r\n      ghostButtonText={tn('Drop column', 'Drop columns', multi ? 2 : 1)}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with work for additional information\r\n * regarding copyright ownership.  The ASF licenses file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { logging, SupersetClient, t, Metric } from '@superset-ui/core';\r\nimport { ColumnMeta } from '@superset-ui/chart-controls';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport { OPERATORS } from 'src/explore/constants';\r\nimport { OptionSortType } from 'src/explore/types';\r\nimport {\r\n  DndFilterSelectProps,\r\n  OptionValueType,\r\n} from 'src/explore/components/controls/DndColumnSelectControl/types';\r\nimport AdhocFilterPopoverTrigger from 'src/explore/components/controls/FilterControl/AdhocFilterPopoverTrigger';\r\nimport OptionWrapper from 'src/explore/components/controls/DndColumnSelectControl/OptionWrapper';\r\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\r\nimport AdhocFilter, {\r\n  CLAUSES,\r\n  EXPRESSION_TYPES,\r\n} from 'src/explore/components/controls/FilterControl/AdhocFilter';\r\nimport AdhocMetric from 'src/explore/components/controls/MetricControl/AdhocMetric';\r\nimport {\r\n  DatasourcePanelDndItem,\r\n  DndItemValue,\r\n} from 'src/explore/components/DatasourcePanel/types';\r\nimport { DndItemType } from 'src/explore/components/DndItemType';\r\n\r\nconst isDictionaryForAdhocFilter = (value: OptionValueType) =>\r\n  !(value instanceof AdhocFilter) && value?.expressionType;\r\n\r\nexport const DndFilterSelect = (props: DndFilterSelectProps) => {\r\n  const propsValues = Array.from(props.value ?? []);\r\n  const [values, setValues] = useState(\r\n    propsValues.map((filter: OptionValueType) =>\r\n      isDictionaryForAdhocFilter(filter) ? new AdhocFilter(filter) : filter,\r\n    ),\r\n  );\r\n  const [partitionColumn, setPartitionColumn] = useState(undefined);\r\n  const [newFilterPopoverVisible, setNewFilterPopoverVisible] = useState(false);\r\n  const [droppedItem, setDroppedItem] = useState<DndItemValue | null>(null);\r\n\r\n  const optionsForSelect = (\r\n    columns: ColumnMeta[],\r\n    formData: Record<string, any>,\r\n  ) => {\r\n    const options: OptionSortType[] = [\r\n      ...columns,\r\n      ...[...(formData?.metrics || []), formData?.metric].map(\r\n        metric =>\r\n          metric &&\r\n          (typeof metric === 'string'\r\n            ? { saved_metric_name: metric }\r\n            : new AdhocMetric(metric)),\r\n      ),\r\n    ].filter(option => option);\r\n\r\n    return options\r\n      .reduce(\r\n        (\r\n          results: (OptionSortType & { filterOptionName: string })[],\r\n          option,\r\n        ) => {\r\n          if ('saved_metric_name' in option && option.saved_metric_name) {\r\n            results.push({\r\n              ...option,\r\n              filterOptionName: option.saved_metric_name,\r\n            });\r\n          } else if ('column_name' in option && option.column_name) {\r\n            results.push({\r\n              ...option,\r\n              filterOptionName: `_col_${option.column_name}`,\r\n            });\r\n          } else if (option instanceof AdhocMetric) {\r\n            results.push({\r\n              ...option,\r\n              filterOptionName: `_adhocmetric_${option.label}`,\r\n            });\r\n          }\r\n          return results;\r\n        },\r\n        [],\r\n      )\r\n      .sort(\r\n        (a: OptionSortType, b: OptionSortType) =>\r\n          (a.saved_metric_name || a.column_name || a.label)?.localeCompare(\r\n            b.saved_metric_name || b.column_name || b.label || '',\r\n          ) ?? 0,\r\n      );\r\n  };\r\n  const [options, setOptions] = useState(\r\n    optionsForSelect(props.columns, props.formData),\r\n  );\r\n\r\n  useEffect(() => {\r\n    const { datasource } = props;\r\n    if (datasource && datasource.type === 'table') {\r\n      const dbId = datasource.database?.id;\r\n      const {\r\n        datasource_name: name,\r\n        schema,\r\n        is_sqllab_view: isSqllabView,\r\n      } = datasource;\r\n\r\n      if (!isSqllabView && dbId && name && schema) {\r\n        SupersetClient.get({\r\n          endpoint: `/superset/extra_table_metadata/${dbId}/${name}/${schema}/`,\r\n        })\r\n          .then(({ json }: { json: Record<string, any> }) => {\r\n            if (json && json.partitions) {\r\n              const { partitions } = json;\r\n              // for now only show latest_partition option\r\n              // when table datasource has only 1 partition key.\r\n              if (\r\n                partitions &&\r\n                partitions.cols &&\r\n                Object.keys(partitions.cols).length === 1\r\n              ) {\r\n                setPartitionColumn(partitions.cols[0]);\r\n              }\r\n            }\r\n          })\r\n          .catch((error: Record<string, any>) => {\r\n            logging.error('fetch extra_table_metadata:', error.statusText);\r\n          });\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setOptions(optionsForSelect(props.columns, props.formData));\r\n  }, [props.columns, props.formData]);\r\n\r\n  useEffect(() => {\r\n    setValues(\r\n      (props.value || []).map((filter: OptionValueType) =>\r\n        isDictionaryForAdhocFilter(filter) ? new AdhocFilter(filter) : filter,\r\n      ),\r\n    );\r\n  }, [props.value]);\r\n\r\n  const onClickClose = (index: number) => {\r\n    const valuesCopy = [...values];\r\n    valuesCopy.splice(index, 1);\r\n    setValues(valuesCopy);\r\n    props.onChange(valuesCopy);\r\n  };\r\n\r\n  const onShiftOptions = (dragIndex: number, hoverIndex: number) => {\r\n    const newValues = [...values];\r\n    [newValues[hoverIndex], newValues[dragIndex]] = [\r\n      newValues[dragIndex],\r\n      newValues[hoverIndex],\r\n    ];\r\n    setValues(newValues);\r\n  };\r\n\r\n  const getMetricExpression = (savedMetricName: string) =>\r\n    props.savedMetrics.find(\r\n      (savedMetric: Metric) => savedMetric.metric_name === savedMetricName,\r\n    )?.expression;\r\n\r\n  const mapOption = (option: OptionValueType) => {\r\n    // already a AdhocFilter, skip\r\n    if (option instanceof AdhocFilter) {\r\n      return option;\r\n    }\r\n    const filterOptions = option as Record<string, any>;\r\n    // via datasource saved metric\r\n    if (filterOptions.saved_metric_name) {\r\n      return new AdhocFilter({\r\n        expressionType:\r\n          props.datasource.type === 'druid'\r\n            ? EXPRESSION_TYPES.SIMPLE\r\n            : EXPRESSION_TYPES.SQL,\r\n        subject:\r\n          props.datasource.type === 'druid'\r\n            ? filterOptions.saved_metric_name\r\n            : getMetricExpression(filterOptions.saved_metric_name),\r\n        operator: OPERATORS['>'],\r\n        comparator: 0,\r\n        clause: CLAUSES.HAVING,\r\n      });\r\n    }\r\n    // has a custom label, meaning it's custom column\r\n    if (filterOptions.label) {\r\n      return new AdhocFilter({\r\n        expressionType:\r\n          props.datasource.type === 'druid'\r\n            ? EXPRESSION_TYPES.SIMPLE\r\n            : EXPRESSION_TYPES.SQL,\r\n        subject:\r\n          props.datasource.type === 'druid'\r\n            ? filterOptions.label\r\n            : new AdhocMetric(option).translateToSql(),\r\n        operator: OPERATORS['>'],\r\n        comparator: 0,\r\n        clause: CLAUSES.HAVING,\r\n      });\r\n    }\r\n    // add a new filter item\r\n    if (filterOptions.column_name) {\r\n      return new AdhocFilter({\r\n        expressionType: EXPRESSION_TYPES.SIMPLE,\r\n        subject: filterOptions.column_name,\r\n        operator: OPERATORS['=='],\r\n        comparator: '',\r\n        clause: CLAUSES.WHERE,\r\n        isNew: true,\r\n      });\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const onFilterEdit = (changedFilter: AdhocFilter) => {\r\n    props.onChange(\r\n      values.map((value: AdhocFilter) => {\r\n        if (value.filterOptionName === changedFilter.filterOptionName) {\r\n          return changedFilter;\r\n        }\r\n        return value;\r\n      }),\r\n    );\r\n  };\r\n\r\n  const onNewFilter = (newFilter: AdhocFilter) => {\r\n    const mappedOption = mapOption(newFilter);\r\n    if (mappedOption) {\r\n      const newValues = [...values, mappedOption];\r\n      setValues(newValues);\r\n      props.onChange(newValues);\r\n    }\r\n  };\r\n\r\n  const togglePopover = (visible: boolean) => {\r\n    setNewFilterPopoverVisible(visible);\r\n  };\r\n\r\n  const closePopover = () => {\r\n    togglePopover(false);\r\n  };\r\n\r\n  const valuesRenderer = () =>\r\n    values.map((adhocFilter: AdhocFilter, index: number) => {\r\n      const label = adhocFilter.getDefaultLabel();\r\n      return (\r\n        <AdhocFilterPopoverTrigger\r\n          key={index}\r\n          adhocFilter={adhocFilter}\r\n          options={options}\r\n          datasource={props.datasource}\r\n          onFilterEdit={onFilterEdit}\r\n          partitionColumn={partitionColumn}\r\n        >\r\n          <OptionWrapper\r\n            key={index}\r\n            index={index}\r\n            clickClose={onClickClose}\r\n            onShiftOptions={onShiftOptions}\r\n            type={DndItemType.FilterOption}\r\n            withCaret\r\n          >\r\n            <Tooltip title={label}>{label}</Tooltip>\r\n          </OptionWrapper>\r\n        </AdhocFilterPopoverTrigger>\r\n      );\r\n    });\r\n\r\n  const adhocFilter = useMemo(() => {\r\n    if (droppedItem?.metric_name) {\r\n      return new AdhocFilter({\r\n        expressionType: EXPRESSION_TYPES.SQL,\r\n        clause: CLAUSES.HAVING,\r\n        sqlExpression: droppedItem?.expression,\r\n      });\r\n    }\r\n    if (droppedItem instanceof AdhocMetric) {\r\n      return new AdhocFilter({\r\n        expressionType: EXPRESSION_TYPES.SQL,\r\n        clause: CLAUSES.HAVING,\r\n        sqlExpression: (droppedItem as AdhocMetric)?.translateToSql(),\r\n      });\r\n    }\r\n    return new AdhocFilter({\r\n      subject: (droppedItem as ColumnMeta)?.column_name,\r\n    });\r\n  }, [droppedItem]);\r\n\r\n  return (\r\n    <>\r\n      <DndSelectLabel<OptionValueType, OptionValueType[]>\r\n        onDrop={(item: DatasourcePanelDndItem) => {\r\n          setDroppedItem(item.value);\r\n          togglePopover(true);\r\n        }}\r\n        canDrop={() => true}\r\n        valuesRenderer={valuesRenderer}\r\n        accept={[\r\n          DndItemType.Column,\r\n          DndItemType.Metric,\r\n          DndItemType.MetricOption,\r\n          DndItemType.AdhocMetricOption,\r\n        ]}\r\n        ghostButtonText={t('Drop columns or metrics')}\r\n        {...props}\r\n      />\r\n      <AdhocFilterPopoverTrigger\r\n        adhocFilter={adhocFilter}\r\n        options={options}\r\n        datasource={props.datasource}\r\n        onFilterEdit={onNewFilter}\r\n        partitionColumn={partitionColumn}\r\n        isControlledComponent\r\n        visible={newFilterPopoverVisible}\r\n        togglePopover={togglePopover}\r\n        closePopover={closePopover}\r\n        createNew\r\n      >\r\n        <div />\r\n      </AdhocFilterPopoverTrigger>\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with work for additional information\r\n * regarding copyright ownership.  The ASF licenses file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { ensureIsArray, Metric, tn } from '@superset-ui/core';\r\nimport { ColumnMeta } from '@superset-ui/chart-controls';\r\nimport { isEqual } from 'lodash';\r\nimport { usePrevious } from 'src/common/hooks/usePrevious';\r\nimport AdhocMetric from 'src/explore/components/controls/MetricControl/AdhocMetric';\r\nimport AdhocMetricPopoverTrigger from 'src/explore/components/controls/MetricControl/AdhocMetricPopoverTrigger';\r\nimport MetricDefinitionValue from 'src/explore/components/controls/MetricControl/MetricDefinitionValue';\r\nimport { OptionValueType } from 'src/explore/components/controls/DndColumnSelectControl/types';\r\nimport { DatasourcePanelDndItem } from 'src/explore/components/DatasourcePanel/types';\r\nimport { DndItemType } from 'src/explore/components/DndItemType';\r\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\r\nimport { savedMetricType } from 'src/explore/components/controls/MetricControl/types';\r\n\r\nconst isDictionaryForAdhocMetric = (value: any) =>\r\n  value && !(value instanceof AdhocMetric) && value.expressionType;\r\n\r\nconst coerceAdhocMetrics = (value: any) => {\r\n  if (!value) {\r\n    return [];\r\n  }\r\n  if (!Array.isArray(value)) {\r\n    if (isDictionaryForAdhocMetric(value)) {\r\n      return [new AdhocMetric(value)];\r\n    }\r\n    return [value];\r\n  }\r\n  return value.map(val => {\r\n    if (isDictionaryForAdhocMetric(val)) {\r\n      return new AdhocMetric(val);\r\n    }\r\n    return val;\r\n  });\r\n};\r\n\r\nconst getOptionsForSavedMetrics = (\r\n  savedMetrics: savedMetricType[],\r\n  currentMetricValues: (string | AdhocMetric)[],\r\n  currentMetric?: string,\r\n) =>\r\n  savedMetrics?.filter(savedMetric =>\r\n    Array.isArray(currentMetricValues)\r\n      ? !currentMetricValues.includes(savedMetric.metric_name ?? '') ||\r\n        savedMetric.metric_name === currentMetric\r\n      : savedMetric,\r\n  ) ?? [];\r\n\r\nconst columnsContainAllMetrics = (\r\n  value: (string | AdhocMetric | ColumnMeta)[],\r\n  columns: ColumnMeta[],\r\n  savedMetrics: savedMetricType[],\r\n) => {\r\n  const columnNames = new Set(\r\n    [...(columns || []), ...(savedMetrics || [])]\r\n      // eslint-disable-next-line camelcase\r\n      .map(\r\n        item =>\r\n          (item as ColumnMeta).column_name ||\r\n          (item as savedMetricType).metric_name,\r\n      ),\r\n  );\r\n\r\n  return (\r\n    ensureIsArray(value)\r\n      .filter(metric => metric)\r\n      // find column names\r\n      .map(metric =>\r\n        (metric as AdhocMetric).column\r\n          ? (metric as AdhocMetric).column.column_name\r\n          : (metric as ColumnMeta).column_name || metric,\r\n      )\r\n      .filter(name => name && typeof name === 'string')\r\n      .every(name => columnNames.has(name))\r\n  );\r\n};\r\n\r\nexport const DndMetricSelect = (props: any) => {\r\n  const { onChange, multi, columns, savedMetrics } = props;\r\n\r\n  const handleChange = useCallback(\r\n    opts => {\r\n      // if clear out options\r\n      if (opts === null) {\r\n        onChange(null);\r\n        return;\r\n      }\r\n\r\n      const transformedOpts = ensureIsArray(opts);\r\n      const optionValues = transformedOpts\r\n        .map(option => {\r\n          // pre-defined metric\r\n          if (option.metric_name) {\r\n            return option.metric_name;\r\n          }\r\n          return option;\r\n        })\r\n        .filter(option => option);\r\n      onChange(multi ? optionValues : optionValues[0]);\r\n    },\r\n    [multi, onChange],\r\n  );\r\n\r\n  const [value, setValue] = useState<(AdhocMetric | Metric | string)[]>(\r\n    coerceAdhocMetrics(props.value),\r\n  );\r\n  const [droppedItem, setDroppedItem] = useState<DatasourcePanelDndItem | null>(\r\n    null,\r\n  );\r\n  const [newMetricPopoverVisible, setNewMetricPopoverVisible] = useState(false);\r\n  const prevColumns = usePrevious(columns);\r\n  const prevSavedMetrics = usePrevious(savedMetrics);\r\n\r\n  useEffect(() => {\r\n    setValue(coerceAdhocMetrics(props.value));\r\n  }, [JSON.stringify(props.value)]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      !isEqual(prevColumns, columns) ||\r\n      !isEqual(prevSavedMetrics, savedMetrics)\r\n    ) {\r\n      // Remove all metrics if selected value no longer a valid column\r\n      // in the dataset. Must use `nextProps` here because Redux reducers may\r\n      // have already updated the value for this control.\r\n      if (!columnsContainAllMetrics(props.value, columns, savedMetrics)) {\r\n        onChange([]);\r\n      }\r\n    }\r\n  }, [\r\n    prevColumns,\r\n    columns,\r\n    prevSavedMetrics,\r\n    savedMetrics,\r\n    props.value,\r\n    onChange,\r\n  ]);\r\n\r\n  const canDrop = (item: DatasourcePanelDndItem) => {\r\n    const isMetricAlreadyInValues =\r\n      item.type === 'metric' ? value.includes(item.value.metric_name) : false;\r\n    return (props.multi || value.length === 0) && !isMetricAlreadyInValues;\r\n  };\r\n\r\n  const onNewMetric = (newMetric: Metric) => {\r\n    const newValue = [...value, newMetric];\r\n    setValue(newValue);\r\n    handleChange(newValue);\r\n  };\r\n\r\n  const onMetricEdit = (\r\n    changedMetric: Metric | AdhocMetric,\r\n    oldMetric: Metric | AdhocMetric,\r\n  ) => {\r\n    const newValue = value.map(value => {\r\n      if (\r\n        // compare saved metrics\r\n        value === (oldMetric as Metric).metric_name ||\r\n        // compare adhoc metrics\r\n        typeof (value as AdhocMetric).optionName !== 'undefined'\r\n          ? (value as AdhocMetric).optionName ===\r\n            (oldMetric as AdhocMetric).optionName\r\n          : false\r\n      ) {\r\n        return changedMetric;\r\n      }\r\n      return value;\r\n    });\r\n    setValue(newValue);\r\n    handleChange(newValue);\r\n  };\r\n\r\n  const onRemoveMetric = (index: number) => {\r\n    if (!Array.isArray(value)) {\r\n      return;\r\n    }\r\n    const valuesCopy = [...value];\r\n    valuesCopy.splice(index, 1);\r\n    setValue(valuesCopy);\r\n    onChange(valuesCopy);\r\n  };\r\n\r\n  const moveLabel = (dragIndex: number, hoverIndex: number) => {\r\n    const newValues = [...value];\r\n    [newValues[hoverIndex], newValues[dragIndex]] = [\r\n      newValues[dragIndex],\r\n      newValues[hoverIndex],\r\n    ];\r\n    setValue(newValues);\r\n  };\r\n\r\n  const valueRenderer = (\r\n    option: Metric | AdhocMetric | string,\r\n    index: number,\r\n  ) => (\r\n    <MetricDefinitionValue\r\n      key={index}\r\n      index={index}\r\n      option={option}\r\n      onMetricEdit={onMetricEdit}\r\n      onRemoveMetric={() => onRemoveMetric(index)}\r\n      columns={props.columns}\r\n      savedMetrics={props.savedMetrics}\r\n      savedMetricsOptions={getOptionsForSavedMetrics(\r\n        props.savedMetrics,\r\n        props.value,\r\n        props.value?.[index],\r\n      )}\r\n      datasourceType={props.datasourceType}\r\n      onMoveLabel={moveLabel}\r\n      onDropLabel={() => onChange(value)}\r\n    />\r\n  );\r\n\r\n  const valuesRenderer = () =>\r\n    value.map((value, index) => valueRenderer(value, index));\r\n\r\n  const togglePopover = (visible: boolean) => {\r\n    setNewMetricPopoverVisible(visible);\r\n  };\r\n\r\n  const closePopover = () => {\r\n    togglePopover(false);\r\n  };\r\n\r\n  const handleDrop = (item: DatasourcePanelDndItem) => {\r\n    if (item.type === DndItemType.Metric) {\r\n      onNewMetric(item.value as Metric);\r\n    }\r\n    if (item.type === DndItemType.Column) {\r\n      setDroppedItem(item);\r\n      togglePopover(true);\r\n    }\r\n  };\r\n\r\n  const adhocMetric = useMemo(() => {\r\n    if (droppedItem?.type === DndItemType.Column) {\r\n      const itemValue = droppedItem?.value as ColumnMeta;\r\n      return new AdhocMetric({\r\n        column: { column_name: itemValue?.column_name },\r\n      });\r\n    }\r\n    return new AdhocMetric({ isNew: true });\r\n  }, [droppedItem?.type, droppedItem?.value]);\r\n\r\n  return (\r\n    <div className=\"metrics-select\">\r\n      <DndSelectLabel<OptionValueType, OptionValueType[]>\r\n        onDrop={handleDrop}\r\n        canDrop={canDrop}\r\n        valuesRenderer={valuesRenderer}\r\n        accept={[DndItemType.Column, DndItemType.Metric]}\r\n        ghostButtonText={tn(\r\n          'Drop column or metric',\r\n          'Drop columns or metrics',\r\n          multi ? 2 : 1,\r\n        )}\r\n        displayGhostButton={multi || value.length === 0}\r\n        {...props}\r\n      />\r\n      <AdhocMetricPopoverTrigger\r\n        adhocMetric={adhocMetric}\r\n        onMetricEdit={onNewMetric}\r\n        columns={props.columns}\r\n        savedMetricsOptions={getOptionsForSavedMetrics(\r\n          props.savedMetrics,\r\n          props.value,\r\n        )}\r\n        savedMetric={{} as savedMetricType}\r\n        datasourceType={props.datasourceType}\r\n        isControlledComponent\r\n        visible={newMetricPopoverVisible}\r\n        togglePopover={togglePopover}\r\n        closePopover={closePopover}\r\n        createNew\r\n      >\r\n        <div />\r\n      </AdhocMetricPopoverTrigger>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport { t, useTheme } from '@superset-ui/core';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\nimport {\r\n  AddControlLabel,\r\n  DndLabelsContainer,\r\n  HeaderContainer,\r\n} from 'src/explore/components/controls/OptionControls';\r\nimport { DatasourcePanelDndItem } from 'src/explore/components/DatasourcePanel/types';\r\nimport Icons from 'src/components/Icons';\r\nimport { DndColumnSelectProps } from './types';\r\n\r\nexport default function DndSelectLabel<T, O>({\r\n  displayGhostButton = true,\r\n  ...props\r\n}: DndColumnSelectProps<T, O>) {\r\n  const theme = useTheme();\r\n\r\n  const [{ isOver, canDrop }, datasourcePanelDrop] = useDrop({\r\n    accept: props.accept,\r\n\r\n    drop: (item: DatasourcePanelDndItem) => {\r\n      props.onDrop(item);\r\n    },\r\n\r\n    canDrop: (item: DatasourcePanelDndItem) => props.canDrop(item),\r\n\r\n    collect: monitor => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop(),\r\n      type: monitor.getItemType(),\r\n    }),\r\n  });\r\n\r\n  function renderGhostButton() {\r\n    return (\r\n      <AddControlLabel cancelHover>\r\n        <Icons.PlusSmall iconColor={theme.colors.grayscale.light1} />\r\n        {t(props.ghostButtonText || 'Drop columns')}\r\n      </AddControlLabel>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div ref={datasourcePanelDrop}>\r\n      <HeaderContainer>\r\n        <ControlHeader {...props} />\r\n      </HeaderContainer>\r\n      <DndLabelsContainer canDrop={canDrop} isOver={isOver}>\r\n        {props.valuesRenderer()}\r\n        {displayGhostButton && renderGhostButton()}\r\n      </DndLabelsContainer>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { useTheme } from '@superset-ui/core';\r\nimport Icons from 'src/components/Icons';\r\nimport {\r\n  CaretContainer,\r\n  CloseContainer,\r\n  OptionControlContainer,\r\n  Label,\r\n} from 'src/explore/components/controls/OptionControls';\r\nimport { OptionProps } from 'src/explore/components/controls/DndColumnSelectControl/types';\r\n\r\nexport default function Option(props: OptionProps) {\r\n  const theme = useTheme();\r\n  return (\r\n    <OptionControlContainer\r\n      data-test=\"option-label\"\r\n      withCaret={props.withCaret}\r\n    >\r\n      <CloseContainer\r\n        role=\"button\"\r\n        data-test=\"remove-control-button\"\r\n        onClick={() => props.clickClose(props.index)}\r\n      >\r\n        <Icons.XSmall iconColor={theme.colors.grayscale.light1} />\r\n      </CloseContainer>\r\n      <Label data-test=\"control-label\">{props.children}</Label>\r\n      {props.withCaret && (\r\n        <CaretContainer>\r\n          <Icons.CaretRight iconColor={theme.colors.grayscale.light1} />\r\n        </CaretContainer>\r\n      )}\r\n    </OptionControlContainer>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useRef } from 'react';\r\nimport {\r\n  useDrag,\r\n  useDrop,\r\n  DropTargetMonitor,\r\n  DragSourceMonitor,\r\n} from 'react-dnd';\r\nimport { DragContainer } from 'src/explore/components/controls/OptionControls';\r\nimport { DndItemType } from 'src/explore/components/DndItemType';\r\nimport {\r\n  OptionProps,\r\n  OptionItemInterface,\r\n} from 'src/explore/components/controls/DndColumnSelectControl/types';\r\nimport Option from './Option';\r\n\r\nexport default function OptionWrapper(\r\n  props: OptionProps & {\r\n    type: DndItemType;\r\n    onShiftOptions: (dragIndex: number, hoverIndex: number) => void;\r\n  },\r\n) {\r\n  const {\r\n    index,\r\n    type,\r\n    onShiftOptions,\r\n    clickClose,\r\n    withCaret,\r\n    children,\r\n    ...rest\r\n  } = props;\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  const item: OptionItemInterface = {\r\n    dragIndex: index,\r\n    type,\r\n  };\r\n  const [, drag] = useDrag({\r\n    item,\r\n    collect: (monitor: DragSourceMonitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const [, drop] = useDrop({\r\n    accept: type,\r\n\r\n    hover: (item: OptionItemInterface, monitor: DropTargetMonitor) => {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const { dragIndex } = item;\r\n      const hoverIndex = index;\r\n\r\n      // Don't replace items with themselves\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      // Determine rectangle on screen\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      // Get vertical middle\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      // Determine mouse position\r\n      const clientOffset = monitor.getClientOffset();\r\n      // Get pixels to the top\r\n      const hoverClientY = clientOffset?.y\r\n        ? clientOffset?.y - hoverBoundingRect.top\r\n        : 0;\r\n      // Only perform the move when the mouse has crossed half of the items height\r\n      // When dragging downwards, only move when the cursor is below 50%\r\n      // When dragging upwards, only move when the cursor is above 50%\r\n      // Dragging downwards\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      // Dragging upwards\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n\r\n      // Time to actually perform the action\r\n      onShiftOptions(dragIndex, hoverIndex);\r\n      // eslint-disable-next-line no-param-reassign\r\n      item.dragIndex = hoverIndex;\r\n    },\r\n  });\r\n\r\n  drag(drop(ref));\r\n\r\n  return (\r\n    <DragContainer ref={ref} {...rest}>\r\n      <Option index={index} clickClose={clickClose} withCaret={withCaret}>\r\n        {children}\r\n      </Option>\r\n    </DragContainer>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport { default } from './DndSelectLabel';\r\nexport * from './DndColumnSelect';\r\nexport * from './DndFilterSelect';\r\nexport * from './DndMetricSelect';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport * from './optionSelector';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { ColumnMeta } from '@superset-ui/chart-controls';\r\n\r\nexport class OptionSelector {\r\n  values: ColumnMeta[];\r\n\r\n  options: { string: ColumnMeta };\r\n\r\n  isArray: boolean;\r\n\r\n  constructor(\r\n    options: { string: ColumnMeta },\r\n    initialValues?: string[] | string,\r\n  ) {\r\n    this.options = options;\r\n    let values: string[];\r\n    if (Array.isArray(initialValues)) {\r\n      values = initialValues;\r\n      this.isArray = true;\r\n    } else {\r\n      values = initialValues ? [initialValues] : [];\r\n      this.isArray = false;\r\n    }\r\n    this.values = values\r\n      .map(value => {\r\n        if (value in options) {\r\n          return options[value];\r\n        }\r\n        return null;\r\n      })\r\n      .filter(Boolean);\r\n  }\r\n\r\n  add(value: string) {\r\n    if (value in this.options) {\r\n      this.values.push(this.options[value]);\r\n    }\r\n  }\r\n\r\n  del(idx: number) {\r\n    this.values.splice(idx, 1);\r\n  }\r\n\r\n  replace(idx: number, value: string) {\r\n    if (this.values[idx]) {\r\n      this.values[idx] = this.options[value];\r\n    }\r\n  }\r\n\r\n  swap(a: number, b: number) {\r\n    [this.values[a], this.values[b]] = [this.values[b], this.values[a]];\r\n  }\r\n\r\n  has(groupBy: string): boolean {\r\n    return !!this.getValues()?.includes(groupBy);\r\n  }\r\n\r\n  getValues(): string[] | string | undefined {\r\n    if (!this.isArray) {\r\n      return this.values.length > 0 ? this.values[0].column_name : undefined;\r\n    }\r\n    return this.values.map(option => option.column_name);\r\n  }\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { t } from '@superset-ui/core';\r\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\r\n\r\nimport Popover from 'src/components/Popover';\r\nimport FormRow from 'src/components/FormRow';\r\nimport SelectControl from 'src/explore/components/controls/SelectControl';\r\nimport CheckboxControl from 'src/explore/components/controls/CheckboxControl';\r\nimport TextControl from 'src/explore/components/controls/TextControl';\r\nimport { FILTER_CONFIG_ATTRIBUTES } from 'src/explore/constants';\r\n\r\nconst INTEGRAL_TYPES = new Set([\r\n  'TINYINT',\r\n  'SMALLINT',\r\n  'INT',\r\n  'INTEGER',\r\n  'BIGINT',\r\n  'LONG',\r\n]);\r\nconst DECIMAL_TYPES = new Set([\r\n  'FLOAT',\r\n  'DOUBLE',\r\n  'REAL',\r\n  'NUMERIC',\r\n  'DECIMAL',\r\n  'MONEY',\r\n]);\r\n\r\nconst propTypes = {\r\n  datasource: PropTypes.object.isRequired,\r\n  onChange: PropTypes.func,\r\n  asc: PropTypes.bool,\r\n  clearable: PropTypes.bool,\r\n  multiple: PropTypes.bool,\r\n  column: PropTypes.string,\r\n  label: PropTypes.string,\r\n  metric: PropTypes.string,\r\n  searchAllOptions: PropTypes.bool,\r\n  defaultValue: PropTypes.string,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  asc: true,\r\n  clearable: true,\r\n  multiple: true,\r\n  searchAllOptions: false,\r\n};\r\n\r\nconst STYLE_WIDTH = { width: 350 };\r\n\r\nexport default class FilterBoxItemControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const {\r\n      column,\r\n      metric,\r\n      asc,\r\n      clearable,\r\n      multiple,\r\n      searchAllOptions,\r\n      label,\r\n      defaultValue,\r\n    } = props;\r\n    this.state = {\r\n      column,\r\n      metric,\r\n      label,\r\n      asc,\r\n      clearable,\r\n      multiple,\r\n      searchAllOptions,\r\n      defaultValue,\r\n    };\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onControlChange = this.onControlChange.bind(this);\r\n  }\r\n\r\n  onChange() {\r\n    this.props.onChange(this.state);\r\n  }\r\n\r\n  onControlChange(attr, value) {\r\n    let typedValue = value;\r\n    const { column: selectedColumnName, multiple } = this.state;\r\n    if (value && !multiple && attr === FILTER_CONFIG_ATTRIBUTES.DEFAULT_VALUE) {\r\n      // if single value filter_box,\r\n      // convert input value string to the column's data type\r\n      const { datasource } = this.props;\r\n      const selectedColumn = datasource.columns.find(\r\n        col => col.column_name === selectedColumnName,\r\n      );\r\n\r\n      if (selectedColumn && selectedColumn.type) {\r\n        const type = selectedColumn.type.toUpperCase();\r\n        if (type === 'BOOLEAN') {\r\n          typedValue = value === 'true';\r\n        } else if (INTEGRAL_TYPES.has(type)) {\r\n          typedValue = Number.isNaN(Number(value)) ? null : parseInt(value, 10);\r\n        } else if (DECIMAL_TYPES.has(type)) {\r\n          typedValue = Number.isNaN(Number(value)) ? null : parseFloat(value);\r\n        }\r\n      }\r\n    }\r\n    this.setState({ [attr]: typedValue }, this.onChange);\r\n  }\r\n\r\n  setType() {}\r\n\r\n  textSummary() {\r\n    return this.state.column || 'N/A';\r\n  }\r\n\r\n  renderForm() {\r\n    return (\r\n      <div>\r\n        <FormRow\r\n          label={t('Column')}\r\n          control={\r\n            <SelectControl\r\n              value={this.state.column}\r\n              name=\"column\"\r\n              clearable={false}\r\n              options={this.props.datasource.columns\r\n                .filter(col => col !== this.state.column)\r\n                .map(col => ({\r\n                  value: col.column_name,\r\n                  label: col.column_name,\r\n                }))\r\n                .concat([\r\n                  { value: this.state.column, label: this.state.column },\r\n                ])}\r\n              onChange={v => this.onControlChange('column', v)}\r\n            />\r\n          }\r\n        />\r\n        <FormRow\r\n          label={t('Label')}\r\n          control={\r\n            <TextControl\r\n              value={this.state.label}\r\n              name=\"label\"\r\n              onChange={v => this.onControlChange('label', v)}\r\n            />\r\n          }\r\n        />\r\n        <FormRow\r\n          label={t('Default')}\r\n          tooltip={t(\r\n            '(optional) default value for the filter, when using ' +\r\n              'the multiple option, you can use a semicolon-delimited list ' +\r\n              'of options.',\r\n          )}\r\n          control={\r\n            <TextControl\r\n              value={this.state.defaultValue}\r\n              name=\"defaultValue\"\r\n              onChange={v =>\r\n                this.onControlChange(FILTER_CONFIG_ATTRIBUTES.DEFAULT_VALUE, v)\r\n              }\r\n            />\r\n          }\r\n        />\r\n        <FormRow\r\n          label={t('Sort metric')}\r\n          tooltip={t('Metric to sort the results by')}\r\n          control={\r\n            <SelectControl\r\n              value={this.state.metric}\r\n              name=\"column\"\r\n              options={this.props.datasource.metrics\r\n                .filter(metric => metric !== this.state.metric)\r\n                .map(m => ({\r\n                  value: m.metric_name,\r\n                  label: m.metric_name,\r\n                }))\r\n                .concat([\r\n                  { value: this.state.metric, label: this.state.metric },\r\n                ])}\r\n              onChange={v => this.onControlChange('metric', v)}\r\n            />\r\n          }\r\n        />\r\n        <FormRow\r\n          label={t('Sort ascending')}\r\n          tooltip={t('Check for sorting ascending')}\r\n          isCheckbox\r\n          control={\r\n            <CheckboxControl\r\n              value={this.state.asc}\r\n              onChange={v => this.onControlChange('asc', v)}\r\n            />\r\n          }\r\n        />\r\n        <FormRow\r\n          label={t('Allow multiple selections')}\r\n          isCheckbox\r\n          tooltip={t(\r\n            'Multiple selections allowed, otherwise filter ' +\r\n              'is limited to a single value',\r\n          )}\r\n          control={\r\n            <CheckboxControl\r\n              value={this.state.multiple}\r\n              onChange={v =>\r\n                this.onControlChange(FILTER_CONFIG_ATTRIBUTES.MULTIPLE, v)\r\n              }\r\n            />\r\n          }\r\n        />\r\n        <FormRow\r\n          label={t('Search all filter options')}\r\n          tooltip={t(\r\n            'By default, each filter loads at most 1000 choices at the initial page load. ' +\r\n              'Check this box if you have more than 1000 filter values and want to enable dynamically ' +\r\n              'searching that loads filter values as users type (may add stress to your database).',\r\n          )}\r\n          isCheckbox\r\n          control={\r\n            <CheckboxControl\r\n              value={this.state.searchAllOptions}\r\n              onChange={v =>\r\n                this.onControlChange(\r\n                  FILTER_CONFIG_ATTRIBUTES.SEARCH_ALL_OPTIONS,\r\n                  v,\r\n                )\r\n              }\r\n            />\r\n          }\r\n        />\r\n        <FormRow\r\n          label={t('Required')}\r\n          tooltip={t('User must select a value for this filter')}\r\n          isCheckbox\r\n          control={\r\n            <CheckboxControl\r\n              value={!this.state.clearable}\r\n              onChange={v => this.onControlChange('clearable', !v)}\r\n            />\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderPopover() {\r\n    return (\r\n      <div id=\"ts-col-popo\" style={STYLE_WIDTH}>\r\n        {this.renderForm()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <span data-test=\"FilterBoxItemControl\">\r\n        {this.textSummary()}{' '}\r\n        <Popover\r\n          trigger=\"click\"\r\n          placement=\"right\"\r\n          content={this.renderPopover()}\r\n          title={t('Filter configuration')}\r\n        >\r\n          <InfoTooltipWithTrigger\r\n            icon=\"edit\"\r\n            className=\"text-primary\"\r\n            label=\"edit-ts-column\"\r\n          />\r\n        </Popover>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nFilterBoxItemControl.propTypes = propTypes;\r\nFilterBoxItemControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { CUSTOM_OPERATORS, OPERATORS } from 'src/explore/constants';\r\nimport { getSimpleSQLExpression } from 'src/explore/exploreUtils';\r\n\r\nexport const EXPRESSION_TYPES = {\r\n  SIMPLE: 'SIMPLE',\r\n  SQL: 'SQL',\r\n};\r\n\r\nexport const CLAUSES = {\r\n  HAVING: 'HAVING',\r\n  WHERE: 'WHERE',\r\n};\r\n\r\nconst OPERATORS_TO_SQL = {\r\n  '==': '=',\r\n  '!=': '<>',\r\n  '>': '>',\r\n  '<': '<',\r\n  '>=': '>=',\r\n  '<=': '<=',\r\n  IN: 'IN',\r\n  'NOT IN': 'NOT IN',\r\n  LIKE: 'LIKE',\r\n  ILIKE: 'ILIKE',\r\n  REGEX: 'REGEX',\r\n  'IS NOT NULL': 'IS NOT NULL',\r\n  'IS NULL': 'IS NULL',\r\n  'IS TRUE': 'IS TRUE',\r\n  'IS FALSE': 'IS FALSE',\r\n  'LATEST PARTITION': ({ datasource }) =>\r\n    `= '{{ presto.latest_partition('${datasource.schema}.${datasource.datasource_name}') }}'`,\r\n};\r\n\r\nfunction translateToSql(adhocMetric, { useSimple } = {}) {\r\n  if (adhocMetric.expressionType === EXPRESSION_TYPES.SIMPLE || useSimple) {\r\n    const { subject, comparator } = adhocMetric;\r\n    const operator =\r\n      adhocMetric.operator && CUSTOM_OPERATORS.has(adhocMetric.operator)\r\n        ? OPERATORS_TO_SQL[adhocMetric.operator](adhocMetric)\r\n        : OPERATORS_TO_SQL[adhocMetric.operator];\r\n    return getSimpleSQLExpression(subject, operator, comparator);\r\n  }\r\n  if (adhocMetric.expressionType === EXPRESSION_TYPES.SQL) {\r\n    return adhocMetric.sqlExpression;\r\n  }\r\n  return '';\r\n}\r\n\r\nexport default class AdhocFilter {\r\n  constructor(adhocFilter) {\r\n    this.expressionType = adhocFilter.expressionType || EXPRESSION_TYPES.SIMPLE;\r\n    if (this.expressionType === EXPRESSION_TYPES.SIMPLE) {\r\n      this.subject = adhocFilter.subject;\r\n      this.operator = adhocFilter.operator?.toUpperCase();\r\n      this.comparator = adhocFilter.comparator;\r\n      this.clause = adhocFilter.clause || CLAUSES.WHERE;\r\n      this.sqlExpression = null;\r\n    } else if (this.expressionType === EXPRESSION_TYPES.SQL) {\r\n      this.sqlExpression =\r\n        typeof adhocFilter.sqlExpression === 'string'\r\n          ? adhocFilter.sqlExpression\r\n          : translateToSql(adhocFilter, { useSimple: true });\r\n      this.clause = adhocFilter.clause;\r\n      if (adhocFilter.operator && CUSTOM_OPERATORS.has(adhocFilter.operator)) {\r\n        this.subject = adhocFilter.subject;\r\n        this.operator = adhocFilter.operator;\r\n      } else {\r\n        this.subject = null;\r\n        this.operator = null;\r\n      }\r\n      this.comparator = null;\r\n    }\r\n    this.isExtra = !!adhocFilter.isExtra;\r\n    this.isNew = !!adhocFilter.isNew;\r\n\r\n    this.filterOptionName =\r\n      adhocFilter.filterOptionName ||\r\n      `filter_${Math.random()\r\n        .toString(36)\r\n        .substring(2, 15)}_${Math.random().toString(36).substring(2, 15)}`;\r\n  }\r\n\r\n  duplicateWith(nextFields) {\r\n    return new AdhocFilter({\r\n      ...this,\r\n      // all duplicated fields are not new (i.e. will not open popup automatically)\r\n      isNew: false,\r\n      ...nextFields,\r\n    });\r\n  }\r\n\r\n  equals(adhocFilter) {\r\n    return (\r\n      adhocFilter.expressionType === this.expressionType &&\r\n      adhocFilter.sqlExpression === this.sqlExpression &&\r\n      adhocFilter.operator === this.operator &&\r\n      adhocFilter.comparator === this.comparator &&\r\n      adhocFilter.subject === this.subject\r\n    );\r\n  }\r\n\r\n  isValid() {\r\n    if (this.expressionType === EXPRESSION_TYPES.SIMPLE) {\r\n      if (\r\n        [\r\n          OPERATORS['IS TRUE'],\r\n          OPERATORS['IS FALSE'],\r\n          OPERATORS['IS NULL'],\r\n          OPERATORS['IS NOT NULL'],\r\n        ].indexOf(this.operator) >= 0\r\n      ) {\r\n        return !!(this.operator && this.subject);\r\n      }\r\n\r\n      if (this.operator && this.subject && this.clause) {\r\n        if (Array.isArray(this.comparator)) {\r\n          if (this.comparator.length > 0) {\r\n            // A non-empty array of values ('IN' or 'NOT IN' clauses)\r\n            return true;\r\n          }\r\n        } else if (this.comparator !== null) {\r\n          // A value has been selected or typed\r\n          return true;\r\n        }\r\n      }\r\n    } else if (this.expressionType === EXPRESSION_TYPES.SQL) {\r\n      return !!(this.sqlExpression && this.clause);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getDefaultLabel() {\r\n    const label = this.translateToSql();\r\n    return label.length < 43 ? label : `${label.substring(0, 40)}...`;\r\n  }\r\n\r\n  getTooltipTitle() {\r\n    return this.translateToSql();\r\n  }\r\n\r\n  translateToSql() {\r\n    return translateToSql(this);\r\n  }\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  t,\r\n  logging,\r\n  SupersetClient,\r\n  withTheme,\r\n  ensureIsArray,\r\n} from '@superset-ui/core';\r\n\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\nimport adhocMetricType from 'src/explore/components/controls/MetricControl/adhocMetricType';\r\nimport savedMetricType from 'src/explore/components/controls/MetricControl/savedMetricType';\r\nimport AdhocMetric from 'src/explore/components/controls/MetricControl/AdhocMetric';\r\nimport { OPERATORS } from 'src/explore/constants';\r\nimport FilterDefinitionOption from 'src/explore/components/controls/MetricControl/FilterDefinitionOption';\r\nimport {\r\n  AddControlLabel,\r\n  AddIconButton,\r\n  HeaderContainer,\r\n  LabelsContainer,\r\n} from 'src/explore/components/controls/OptionControls';\r\nimport Icons from 'src/components/Icons';\r\nimport AdhocFilterPopoverTrigger from 'src/explore/components/controls/FilterControl/AdhocFilterPopoverTrigger';\r\nimport AdhocFilterOption from 'src/explore/components/controls/FilterControl/AdhocFilterOption';\r\nimport AdhocFilter, {\r\n  CLAUSES,\r\n  EXPRESSION_TYPES,\r\n} from 'src/explore/components/controls/FilterControl/AdhocFilter';\r\nimport adhocFilterType from 'src/explore/components/controls/FilterControl/adhocFilterType';\r\nimport columnType from 'src/explore/components/controls/FilterControl/columnType';\r\n\r\nconst selectedMetricType = PropTypes.oneOfType([\r\n  PropTypes.string,\r\n  adhocMetricType,\r\n]);\r\n\r\nconst propTypes = {\r\n  label: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\r\n  name: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.arrayOf(adhocFilterType),\r\n  datasource: PropTypes.object,\r\n  columns: PropTypes.arrayOf(columnType),\r\n  savedMetrics: PropTypes.arrayOf(savedMetricType),\r\n  selectedMetrics: PropTypes.oneOfType([\r\n    selectedMetricType,\r\n    PropTypes.arrayOf(selectedMetricType),\r\n  ]),\r\n  isLoading: PropTypes.bool,\r\n};\r\n\r\nconst defaultProps = {\r\n  name: '',\r\n  onChange: () => {},\r\n  columns: [],\r\n  savedMetrics: [],\r\n  selectedMetrics: [],\r\n};\r\n\r\nfunction isDictionaryForAdhocFilter(value) {\r\n  return value && !(value instanceof AdhocFilter) && value.expressionType;\r\n}\r\n\r\nclass AdhocFilterControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.optionsForSelect = this.optionsForSelect.bind(this);\r\n    this.onRemoveFilter = this.onRemoveFilter.bind(this);\r\n    this.onNewFilter = this.onNewFilter.bind(this);\r\n    this.onFilterEdit = this.onFilterEdit.bind(this);\r\n    this.moveLabel = this.moveLabel.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.mapOption = this.mapOption.bind(this);\r\n    this.getMetricExpression = this.getMetricExpression.bind(this);\r\n\r\n    const filters = (this.props.value || []).map(filter =>\r\n      isDictionaryForAdhocFilter(filter) ? new AdhocFilter(filter) : filter,\r\n    );\r\n\r\n    this.optionRenderer = option => <FilterDefinitionOption option={option} />;\r\n    this.valueRenderer = (adhocFilter, index) => (\r\n      <AdhocFilterOption\r\n        key={index}\r\n        index={index}\r\n        adhocFilter={adhocFilter}\r\n        onFilterEdit={this.onFilterEdit}\r\n        options={this.state.options}\r\n        datasource={this.props.datasource}\r\n        onRemoveFilter={() => this.onRemoveFilter(index)}\r\n        onMoveLabel={this.moveLabel}\r\n        onDropLabel={() => this.props.onChange(this.state.values)}\r\n        partitionColumn={this.state.partitionColumn}\r\n      />\r\n    );\r\n    this.state = {\r\n      values: filters,\r\n      options: this.optionsForSelect(this.props),\r\n      partitionColumn: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { datasource } = this.props;\r\n    if (datasource && datasource.type === 'table') {\r\n      const dbId = datasource.database?.id;\r\n      const {\r\n        datasource_name: name,\r\n        schema,\r\n        is_sqllab_view: isSqllabView,\r\n      } = datasource;\r\n\r\n      if (!isSqllabView && dbId && name && schema) {\r\n        SupersetClient.get({\r\n          endpoint: `/superset/extra_table_metadata/${dbId}/${name}/${schema}/`,\r\n        })\r\n          .then(({ json }) => {\r\n            if (json && json.partitions) {\r\n              const { partitions } = json;\r\n              // for now only show latest_partition option\r\n              // when table datasource has only 1 partition key.\r\n              if (\r\n                partitions &&\r\n                partitions.cols &&\r\n                Object.keys(partitions.cols).length === 1\r\n              ) {\r\n                this.setState({ partitionColumn: partitions.cols[0] });\r\n              }\r\n            }\r\n          })\r\n          .catch(error => {\r\n            logging.error('fetch extra_table_metadata:', error.statusText);\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.columns !== nextProps.columns) {\r\n      this.setState({ options: this.optionsForSelect(nextProps) });\r\n    }\r\n    if (this.props.value !== nextProps.value) {\r\n      this.setState({\r\n        values: (nextProps.value || []).map(filter =>\r\n          isDictionaryForAdhocFilter(filter) ? new AdhocFilter(filter) : filter,\r\n        ),\r\n      });\r\n    }\r\n  }\r\n\r\n  onRemoveFilter(index) {\r\n    const valuesCopy = [...this.state.values];\r\n    valuesCopy.splice(index, 1);\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      values: valuesCopy,\r\n    }));\r\n    this.props.onChange(valuesCopy);\r\n  }\r\n\r\n  onNewFilter(newFilter) {\r\n    const mappedOption = this.mapOption(newFilter);\r\n    if (mappedOption) {\r\n      this.setState(\r\n        prevState => ({\r\n          ...prevState,\r\n          values: [...prevState.values, mappedOption],\r\n        }),\r\n        () => {\r\n          this.props.onChange(this.state.values);\r\n        },\r\n      );\r\n    }\r\n  }\r\n\r\n  onFilterEdit(changedFilter) {\r\n    this.props.onChange(\r\n      this.state.values.map(value => {\r\n        if (value.filterOptionName === changedFilter.filterOptionName) {\r\n          return changedFilter;\r\n        }\r\n        return value;\r\n      }),\r\n    );\r\n  }\r\n\r\n  onChange(opts) {\r\n    const options = (opts || [])\r\n      .map(option => this.mapOption(option))\r\n      .filter(option => option);\r\n    this.props.onChange(options);\r\n  }\r\n\r\n  getMetricExpression(savedMetricName) {\r\n    return this.props.savedMetrics.find(\r\n      savedMetric => savedMetric.metric_name === savedMetricName,\r\n    ).expression;\r\n  }\r\n\r\n  moveLabel(dragIndex, hoverIndex) {\r\n    const { values } = this.state;\r\n\r\n    const newValues = [...values];\r\n    [newValues[hoverIndex], newValues[dragIndex]] = [\r\n      newValues[dragIndex],\r\n      newValues[hoverIndex],\r\n    ];\r\n    this.setState({ values: newValues });\r\n  }\r\n\r\n  mapOption(option) {\r\n    // already a AdhocFilter, skip\r\n    if (option instanceof AdhocFilter) {\r\n      return option;\r\n    }\r\n    // via datasource saved metric\r\n    if (option.saved_metric_name) {\r\n      return new AdhocFilter({\r\n        expressionType:\r\n          this.props.datasource.type === 'druid'\r\n            ? EXPRESSION_TYPES.SIMPLE\r\n            : EXPRESSION_TYPES.SQL,\r\n        subject:\r\n          this.props.datasource.type === 'druid'\r\n            ? option.saved_metric_name\r\n            : this.getMetricExpression(option.saved_metric_name),\r\n        operator: OPERATORS['>'],\r\n        comparator: 0,\r\n        clause: CLAUSES.HAVING,\r\n      });\r\n    }\r\n    // has a custom label, meaning it's custom column\r\n    if (option.label) {\r\n      return new AdhocFilter({\r\n        expressionType:\r\n          this.props.datasource.type === 'druid'\r\n            ? EXPRESSION_TYPES.SIMPLE\r\n            : EXPRESSION_TYPES.SQL,\r\n        subject:\r\n          this.props.datasource.type === 'druid'\r\n            ? option.label\r\n            : new AdhocMetric(option).translateToSql(),\r\n        operator: OPERATORS['>'],\r\n        comparator: 0,\r\n        clause: CLAUSES.HAVING,\r\n      });\r\n    }\r\n    // add a new filter item\r\n    if (option.column_name) {\r\n      return new AdhocFilter({\r\n        expressionType: EXPRESSION_TYPES.SIMPLE,\r\n        subject: option.column_name,\r\n        operator: OPERATORS['=='],\r\n        comparator: '',\r\n        clause: CLAUSES.WHERE,\r\n        isNew: true,\r\n      });\r\n    }\r\n    return null;\r\n  }\r\n\r\n  optionsForSelect(props) {\r\n    const options = [\r\n      ...props.columns,\r\n      ...ensureIsArray(props.selectedMetrics).map(\r\n        metric =>\r\n          metric &&\r\n          (typeof metric === 'string'\r\n            ? { saved_metric_name: metric }\r\n            : new AdhocMetric(metric)),\r\n      ),\r\n    ].filter(option => option);\r\n\r\n    return options\r\n      .reduce((results, option) => {\r\n        if (option.saved_metric_name) {\r\n          results.push({\r\n            ...option,\r\n            filterOptionName: option.saved_metric_name,\r\n          });\r\n        } else if (option.column_name) {\r\n          results.push({\r\n            ...option,\r\n            filterOptionName: `_col_${option.column_name}`,\r\n          });\r\n        } else if (option instanceof AdhocMetric) {\r\n          results.push({\r\n            ...option,\r\n            filterOptionName: `_adhocmetric_${option.label}`,\r\n          });\r\n        }\r\n        return results;\r\n      }, [])\r\n      .sort((a, b) =>\r\n        (a.saved_metric_name || a.column_name || a.label).localeCompare(\r\n          b.saved_metric_name || b.column_name || b.label,\r\n        ),\r\n      );\r\n  }\r\n\r\n  addNewFilterPopoverTrigger(trigger) {\r\n    return (\r\n      <AdhocFilterPopoverTrigger\r\n        adhocFilter={new AdhocFilter({})}\r\n        datasource={this.props.datasource}\r\n        options={this.state.options}\r\n        onFilterEdit={this.onNewFilter}\r\n        partitionColumn={this.state.partitionColumn}\r\n        createNew\r\n      >\r\n        {trigger}\r\n      </AdhocFilterPopoverTrigger>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { theme } = this.props;\r\n    return (\r\n      <div className=\"metrics-select\" data-test=\"adhoc-filter-control\">\r\n        <HeaderContainer>\r\n          <ControlHeader {...this.props} />\r\n          {this.addNewFilterPopoverTrigger(\r\n            <AddIconButton data-test=\"add-filter-button\">\r\n              <Icons.PlusLarge\r\n                iconSize=\"s\"\r\n                iconColor={theme.colors.grayscale.light5}\r\n              />\r\n            </AddIconButton>,\r\n          )}\r\n        </HeaderContainer>\r\n        <LabelsContainer>\r\n          {this.state.values.length > 0\r\n            ? this.state.values.map((value, index) =>\r\n                this.valueRenderer(value, index),\r\n              )\r\n            : this.addNewFilterPopoverTrigger(\r\n                <AddControlLabel>\r\n                  <Icons.PlusSmall iconColor={theme.colors.grayscale.light1} />\r\n                  {t('Add filter')}\r\n                </AddControlLabel>,\r\n              )}\r\n        </LabelsContainer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAdhocFilterControl.propTypes = propTypes;\r\nAdhocFilterControl.defaultProps = defaultProps;\r\n\r\nexport default withTheme(AdhocFilterControl);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from 'src/components/Button';\r\nimport { styled, t } from '@superset-ui/core';\r\n\r\nimport ErrorBoundary from 'src/components/ErrorBoundary';\r\nimport Tabs from 'src/components/Tabs';\r\nimport adhocMetricType from 'src/explore/components/controls/MetricControl/adhocMetricType';\r\nimport AdhocFilter, {\r\n  EXPRESSION_TYPES,\r\n} from 'src/explore/components/controls/FilterControl/AdhocFilter';\r\nimport AdhocFilterEditPopoverSimpleTabContent from 'src/explore/components/controls/FilterControl/AdhocFilterEditPopoverSimpleTabContent';\r\nimport AdhocFilterEditPopoverSqlTabContent from 'src/explore/components/controls/FilterControl/AdhocFilterEditPopoverSqlTabContent';\r\nimport columnType from 'src/explore/components/controls/FilterControl/columnType';\r\n\r\nconst propTypes = {\r\n  adhocFilter: PropTypes.instanceOf(AdhocFilter).isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onResize: PropTypes.func.isRequired,\r\n  options: PropTypes.arrayOf(\r\n    PropTypes.oneOfType([\r\n      columnType,\r\n      PropTypes.shape({ saved_metric_name: PropTypes.string.isRequired }),\r\n      adhocMetricType,\r\n    ]),\r\n  ).isRequired,\r\n  datasource: PropTypes.object,\r\n  partitionColumn: PropTypes.string,\r\n  theme: PropTypes.object,\r\n};\r\n\r\nconst ResizeIcon = styled.i`\r\n  margin-left: ${({ theme }) => theme.gridUnit * 2}px;\r\n`;\r\n\r\nconst startingWidth = 320;\r\nconst startingHeight = 240;\r\n\r\nconst FilterPopoverContentContainer = styled.div`\r\n  .adhoc-filter-edit-tabs > .nav-tabs {\r\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\r\n\r\n    & > li > a {\r\n      padding: ${({ theme }) => theme.gridUnit}px;\r\n    }\r\n  }\r\n\r\n  #filter-edit-popover {\r\n    max-width: none;\r\n  }\r\n\r\n  .filter-edit-clause-dropdown {\r\n    width: ${({ theme }) => theme.gridUnit * 30}px;\r\n    margin-right: ${({ theme }) => theme.gridUnit}px;\r\n  }\r\n\r\n  .filter-edit-clause-info {\r\n    font-size: ${({ theme }) => theme.typography.sizes.xs}px;\r\n    padding-left: ${({ theme }) => theme.gridUnit}px;\r\n  }\r\n\r\n  .filter-edit-clause-section {\r\n    display: inline-flex;\r\n  }\r\n\r\n  .adhoc-filter-simple-column-dropdown {\r\n    margin-top: ${({ theme }) => theme.gridUnit * 5}px;\r\n  }\r\n`;\r\n\r\nexport default class AdhocFilterEditPopover extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onSave = this.onSave.bind(this);\r\n    this.onDragDown = this.onDragDown.bind(this);\r\n    this.onMouseMove = this.onMouseMove.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.onAdhocFilterChange = this.onAdhocFilterChange.bind(this);\r\n    this.adjustHeight = this.adjustHeight.bind(this);\r\n    this.onTabChange = this.onTabChange.bind(this);\r\n\r\n    this.state = {\r\n      adhocFilter: this.props.adhocFilter,\r\n      width: startingWidth,\r\n      height: startingHeight,\r\n      activeKey: this.props?.adhocFilter?.expressionType || 'SIMPLE',\r\n    };\r\n\r\n    this.popoverContentRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('mouseup', this.onMouseUp);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mouseup', this.onMouseUp);\r\n    document.removeEventListener('mousemove', this.onMouseMove);\r\n  }\r\n\r\n  onAdhocFilterChange(adhocFilter) {\r\n    this.setState({ adhocFilter });\r\n  }\r\n\r\n  onSave() {\r\n    this.props.onChange(this.state.adhocFilter);\r\n    this.props.onClose();\r\n  }\r\n\r\n  onDragDown(e) {\r\n    this.dragStartX = e.clientX;\r\n    this.dragStartY = e.clientY;\r\n    this.dragStartWidth = this.state.width;\r\n    this.dragStartHeight = this.state.height;\r\n    document.addEventListener('mousemove', this.onMouseMove);\r\n  }\r\n\r\n  onMouseMove(e) {\r\n    this.props.onResize();\r\n    this.setState({\r\n      width: Math.max(\r\n        this.dragStartWidth + (e.clientX - this.dragStartX),\r\n        startingWidth,\r\n      ),\r\n      height: Math.max(\r\n        this.dragStartHeight + (e.clientY - this.dragStartY) * 2,\r\n        startingHeight,\r\n      ),\r\n    });\r\n  }\r\n\r\n  onMouseUp() {\r\n    document.removeEventListener('mousemove', this.onMouseMove);\r\n  }\r\n\r\n  onTabChange(activeKey) {\r\n    this.setState({\r\n      activeKey,\r\n    });\r\n  }\r\n\r\n  adjustHeight(heightDifference) {\r\n    this.setState(state => ({ height: state.height + heightDifference }));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      adhocFilter: propsAdhocFilter,\r\n      options,\r\n      onChange,\r\n      onClose,\r\n      onResize,\r\n      datasource,\r\n      partitionColumn,\r\n      theme,\r\n      ...popoverProps\r\n    } = this.props;\r\n\r\n    const { adhocFilter } = this.state;\r\n\r\n    const stateIsValid = adhocFilter.isValid();\r\n    const hasUnsavedChanges = !adhocFilter.equals(propsAdhocFilter);\r\n\r\n    return (\r\n      <FilterPopoverContentContainer\r\n        id=\"filter-edit-popover\"\r\n        {...popoverProps}\r\n        data-test=\"filter-edit-popover\"\r\n        ref={this.popoverContentRef}\r\n      >\r\n        <Tabs\r\n          id=\"adhoc-filter-edit-tabs\"\r\n          defaultActiveKey={adhocFilter.expressionType}\r\n          className=\"adhoc-filter-edit-tabs\"\r\n          data-test=\"adhoc-filter-edit-tabs\"\r\n          style={{ minHeight: this.state.height, width: this.state.width }}\r\n          allowOverflow\r\n          onChange={this.onTabChange}\r\n        >\r\n          <Tabs.TabPane\r\n            className=\"adhoc-filter-edit-tab\"\r\n            key={EXPRESSION_TYPES.SIMPLE}\r\n            tab={t('Simple')}\r\n          >\r\n            <ErrorBoundary>\r\n              <AdhocFilterEditPopoverSimpleTabContent\r\n                adhocFilter={this.state.adhocFilter}\r\n                onChange={this.onAdhocFilterChange}\r\n                options={options}\r\n                datasource={datasource}\r\n                onHeightChange={this.adjustHeight}\r\n                partitionColumn={partitionColumn}\r\n                popoverRef={this.popoverContentRef.current}\r\n              />\r\n            </ErrorBoundary>\r\n          </Tabs.TabPane>\r\n          <Tabs.TabPane\r\n            className=\"adhoc-filter-edit-tab\"\r\n            key={EXPRESSION_TYPES.SQL}\r\n            tab={t('Custom SQL')}\r\n          >\r\n            <ErrorBoundary>\r\n              {!this.props.datasource ||\r\n              this.props.datasource.type !== 'druid' ? (\r\n                <AdhocFilterEditPopoverSqlTabContent\r\n                  adhocFilter={this.state.adhocFilter}\r\n                  onChange={this.onAdhocFilterChange}\r\n                  options={this.props.options}\r\n                  height={this.state.height}\r\n                  activeKey={this.state.activeKey}\r\n                />\r\n              ) : (\r\n                <div className=\"custom-sql-disabled-message\">\r\n                  Custom SQL Filters are not available on druid datasources\r\n                </div>\r\n              )}\r\n            </ErrorBoundary>\r\n          </Tabs.TabPane>\r\n        </Tabs>\r\n        <div>\r\n          <Button buttonSize=\"small\" onClick={this.props.onClose} cta>\r\n            {t('Close')}\r\n          </Button>\r\n          <Button\r\n            data-test=\"adhoc-filter-edit-popover-save-button\"\r\n            disabled={!stateIsValid}\r\n            buttonStyle={\r\n              hasUnsavedChanges && stateIsValid ? 'primary' : 'default'\r\n            }\r\n            buttonSize=\"small\"\r\n            className=\"m-r-5\"\r\n            onClick={this.onSave}\r\n            cta\r\n          >\r\n            {t('Save')}\r\n          </Button>\r\n          <ResizeIcon\r\n            role=\"button\"\r\n            aria-label=\"Resize\"\r\n            tabIndex={0}\r\n            onMouseDown={this.onDragDown}\r\n            className=\"fa fa-expand edit-popover-resize text-muted\"\r\n          />\r\n        </div>\r\n      </FilterPopoverContentContainer>\r\n    );\r\n  }\r\n}\r\n\r\nAdhocFilterEditPopover.propTypes = propTypes;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { NativeSelect as Select } from 'src/components/Select';\r\nimport { Input } from 'src/common/components';\r\nimport { t, SupersetClient, styled } from '@superset-ui/core';\r\n\r\nimport adhocMetricType from 'src/explore/components/controls/MetricControl/adhocMetricType';\r\nimport {\r\n  OPERATORS,\r\n  OPERATORS_OPTIONS,\r\n  TABLE_ONLY_OPERATORS,\r\n  DRUID_ONLY_OPERATORS,\r\n  HAVING_OPERATORS,\r\n  MULTI_OPERATORS,\r\n  CUSTOM_OPERATORS,\r\n  DISABLE_INPUT_OPERATORS,\r\n} from 'src/explore/constants';\r\nimport FilterDefinitionOption from 'src/explore/components/controls/MetricControl/FilterDefinitionOption';\r\nimport AdhocFilter, {\r\n  EXPRESSION_TYPES,\r\n  CLAUSES,\r\n} from 'src/explore/components/controls/FilterControl/AdhocFilter';\r\nimport columnType from 'src/explore/components/controls/FilterControl/columnType';\r\nimport Icons from 'src/components/Icons';\r\n\r\nconst SelectWithLabel = styled(Select)`\r\n  .ant-select-selector {\r\n    margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\r\n  }\r\n\r\n  .ant-select-selector::after {\r\n    content: '${({ labelText }) => labelText || '\\\\A0'}';\r\n    display: inline-block;\r\n    white-space: nowrap;\r\n    color: ${({ theme }) => theme.colors.grayscale.light1};\r\n    width: max-content;\r\n  }\r\n`;\r\n\r\nconst propTypes = {\r\n  adhocFilter: PropTypes.instanceOf(AdhocFilter).isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  options: PropTypes.arrayOf(\r\n    PropTypes.oneOfType([\r\n      columnType,\r\n      PropTypes.shape({ saved_metric_name: PropTypes.string.isRequired }),\r\n      adhocMetricType,\r\n    ]),\r\n  ).isRequired,\r\n  onHeightChange: PropTypes.func.isRequired,\r\n  datasource: PropTypes.object,\r\n  partitionColumn: PropTypes.string,\r\n  popoverRef: PropTypes.object,\r\n};\r\n\r\nconst defaultProps = {\r\n  datasource: {},\r\n};\r\n\r\nfunction translateOperator(operator) {\r\n  if (operator === OPERATORS['==']) {\r\n    return 'equals';\r\n  }\r\n  if (operator === OPERATORS['!=']) {\r\n    return 'not equal to';\r\n  }\r\n  if (operator === OPERATORS.LIKE) {\r\n    return 'LIKE';\r\n  }\r\n  if (operator === OPERATORS.ILIKE) {\r\n    return 'LIKE (case insensitive)';\r\n  }\r\n  if (operator === OPERATORS['LATEST PARTITION']) {\r\n    return 'use latest_partition template';\r\n  }\r\n  return operator;\r\n}\r\n\r\nexport default class AdhocFilterEditPopoverSimpleTabContent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onSubjectChange = this.onSubjectChange.bind(this);\r\n    this.onOperatorChange = this.onOperatorChange.bind(this);\r\n    this.onComparatorChange = this.onComparatorChange.bind(this);\r\n    this.onInputComparatorChange = this.onInputComparatorChange.bind(this);\r\n    this.isOperatorRelevant = this.isOperatorRelevant.bind(this);\r\n    this.refreshComparatorSuggestions = this.refreshComparatorSuggestions.bind(\r\n      this,\r\n    );\r\n    this.clearSuggestionSearch = this.clearSuggestionSearch.bind(this);\r\n\r\n    this.state = {\r\n      suggestions: [],\r\n      abortActiveRequest: null,\r\n      currentSuggestionSearch: '',\r\n    };\r\n\r\n    this.selectProps = {\r\n      name: 'select-column',\r\n      showSearch: true,\r\n    };\r\n  }\r\n\r\n  UNSAFE_componentWillMount() {\r\n    this.refreshComparatorSuggestions();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.adhocFilter.subject !== this.props.adhocFilter.subject) {\r\n      this.refreshComparatorSuggestions();\r\n    }\r\n  }\r\n\r\n  onSubjectChange(id) {\r\n    const option = this.props.options.find(\r\n      option => option.id === id || option.optionName === id,\r\n    );\r\n\r\n    let subject;\r\n    let clause;\r\n    // infer the new clause based on what subject was selected.\r\n    if (option && option.column_name) {\r\n      subject = option.column_name;\r\n      clause = CLAUSES.WHERE;\r\n    } else if (option && (option.saved_metric_name || option.label)) {\r\n      subject = option.saved_metric_name || option.label;\r\n      clause = CLAUSES.HAVING;\r\n    }\r\n    const { operator } = this.props.adhocFilter;\r\n    this.props.onChange(\r\n      this.props.adhocFilter.duplicateWith({\r\n        subject,\r\n        clause,\r\n        operator:\r\n          operator && this.isOperatorRelevant(operator, subject)\r\n            ? operator\r\n            : null,\r\n        expressionType: EXPRESSION_TYPES.SIMPLE,\r\n      }),\r\n    );\r\n  }\r\n\r\n  onOperatorChange(operator) {\r\n    const currentComparator = this.props.adhocFilter.comparator;\r\n    let newComparator;\r\n    // convert between list of comparators and individual comparators\r\n    // (e.g. `in ('North America', 'Africa')` to `== 'North America'`)\r\n    if (MULTI_OPERATORS.has(operator)) {\r\n      newComparator = Array.isArray(currentComparator)\r\n        ? currentComparator\r\n        : [currentComparator].filter(element => element);\r\n    } else {\r\n      newComparator = Array.isArray(currentComparator)\r\n        ? currentComparator[0]\r\n        : currentComparator;\r\n    }\r\n\r\n    if (operator && CUSTOM_OPERATORS.has(operator)) {\r\n      this.props.onChange(\r\n        this.props.adhocFilter.duplicateWith({\r\n          subject: this.props.adhocFilter.subject,\r\n          clause: CLAUSES.WHERE,\r\n          operator,\r\n          expressionType: EXPRESSION_TYPES.SQL,\r\n          datasource: this.props.datasource,\r\n        }),\r\n      );\r\n    } else {\r\n      this.props.onChange(\r\n        this.props.adhocFilter.duplicateWith({\r\n          operator,\r\n          comparator: newComparator,\r\n          expressionType: EXPRESSION_TYPES.SIMPLE,\r\n        }),\r\n      );\r\n    }\r\n  }\r\n\r\n  onInputComparatorChange(event) {\r\n    this.onComparatorChange(event.target.value);\r\n  }\r\n\r\n  onComparatorChange(comparator) {\r\n    this.props.onChange(\r\n      this.props.adhocFilter.duplicateWith({\r\n        comparator,\r\n        expressionType: EXPRESSION_TYPES.SIMPLE,\r\n      }),\r\n    );\r\n  }\r\n\r\n  refreshComparatorSuggestions() {\r\n    const { datasource } = this.props;\r\n    const col = this.props.adhocFilter.subject;\r\n    const having = this.props.adhocFilter.clause === CLAUSES.HAVING;\r\n\r\n    if (col && datasource && datasource.filter_select && !having) {\r\n      if (this.state.abortActiveRequest) {\r\n        this.state.abortActiveRequest();\r\n      }\r\n\r\n      const controller = new AbortController();\r\n      const { signal } = controller;\r\n      this.setState({ abortActiveRequest: controller.abort, loading: true });\r\n\r\n      SupersetClient.get({\r\n        signal,\r\n        endpoint: `/superset/filter/${datasource.type}/${datasource.id}/${col}/`,\r\n      })\r\n        .then(({ json }) => {\r\n          this.setState(() => ({\r\n            suggestions: json,\r\n            abortActiveRequest: null,\r\n            loading: false,\r\n          }));\r\n        })\r\n        .catch(() => {\r\n          this.setState(() => ({\r\n            suggestions: [],\r\n            abortActiveRequest: null,\r\n            loading: false,\r\n          }));\r\n        });\r\n    }\r\n  }\r\n\r\n  isOperatorRelevant(operator, subject) {\r\n    const column = this.props.datasource.columns?.find(\r\n      col => col.column_name === subject,\r\n    );\r\n    const isColumnBoolean =\r\n      !!column && (column.type === 'BOOL' || column.type === 'BOOLEAN');\r\n    const isColumnNumber = !!column && column.type === 'INT';\r\n    const isColumnFunction = !!column && !!column.expression;\r\n\r\n    if (operator && CUSTOM_OPERATORS.has(operator)) {\r\n      const { partitionColumn } = this.props;\r\n      return partitionColumn && subject && subject === partitionColumn;\r\n    }\r\n    if (\r\n      operator === OPERATORS['IS TRUE'] ||\r\n      operator === OPERATORS['IS FALSE']\r\n    ) {\r\n      return isColumnBoolean || isColumnNumber || isColumnFunction;\r\n    }\r\n    if (isColumnBoolean) {\r\n      return (\r\n        operator === OPERATORS['IS NULL'] ||\r\n        operator === OPERATORS['IS NOT NULL']\r\n      );\r\n    }\r\n    return !(\r\n      (this.props.datasource.type === 'druid' &&\r\n        TABLE_ONLY_OPERATORS.indexOf(operator) >= 0) ||\r\n      (this.props.datasource.type === 'table' &&\r\n        DRUID_ONLY_OPERATORS.indexOf(operator) >= 0) ||\r\n      (this.props.adhocFilter.clause === CLAUSES.HAVING &&\r\n        HAVING_OPERATORS.indexOf(operator) === -1)\r\n    );\r\n  }\r\n\r\n  focusComparator(ref, shouldFocus) {\r\n    if (ref && shouldFocus) {\r\n      ref.focus();\r\n    }\r\n  }\r\n\r\n  optionsRemaining() {\r\n    const { suggestions } = this.state;\r\n    const { comparator } = this.props.adhocFilter;\r\n    // if select is multi/value is array, we show the options not selected\r\n    const valuesFromSuggestionsLength = Array.isArray(comparator)\r\n      ? comparator.filter(v => suggestions.includes(v)).length\r\n      : 0;\r\n    return suggestions?.length - valuesFromSuggestionsLength ?? 0;\r\n  }\r\n\r\n  createSuggestionsPlaceholder() {\r\n    const optionsRemaining = this.optionsRemaining();\r\n    const placeholder = t('%s option(s)', optionsRemaining);\r\n    return optionsRemaining ? placeholder : '';\r\n  }\r\n\r\n  renderSubjectOptionLabel(option) {\r\n    return <FilterDefinitionOption option={option} />;\r\n  }\r\n\r\n  clearSuggestionSearch() {\r\n    this.setState({ currentSuggestionSearch: '' });\r\n  }\r\n\r\n  render() {\r\n    const { adhocFilter, options, datasource } = this.props;\r\n    const { currentSuggestionSearch } = this.state;\r\n    let columns = options;\r\n    const { subject, operator, comparator } = adhocFilter;\r\n    const subjectSelectProps = {\r\n      value: subject ?? undefined,\r\n      onChange: this.onSubjectChange,\r\n      notFoundContent: t(\r\n        'No such column found. To filter on a metric, try the Custom SQL tab.',\r\n      ),\r\n      filterOption: (input, option) =>\r\n        option.filterBy.toLowerCase().indexOf(input.toLowerCase()) >= 0,\r\n      autoFocus: !subject,\r\n    };\r\n\r\n    if (datasource.type === 'druid') {\r\n      subjectSelectProps.placeholder = t(\r\n        '%s column(s) and metric(s)',\r\n        columns.length,\r\n      );\r\n    } else {\r\n      // we cannot support simple ad-hoc filters for metrics because we don't know what type\r\n      // the value should be cast to (without knowing the output type of the aggregate, which\r\n      // becomes a rather complicated problem)\r\n      subjectSelectProps.placeholder =\r\n        adhocFilter.clause === CLAUSES.WHERE\r\n          ? t('%s column(s)', columns.length)\r\n          : t('To filter on a metric, use Custom SQL tab.');\r\n      columns = options.filter(option => option.column_name);\r\n    }\r\n\r\n    const operatorSelectProps = {\r\n      placeholder: t(\r\n        '%s operator(s)',\r\n        OPERATORS_OPTIONS.filter(op => this.isOperatorRelevant(op, subject))\r\n          .length,\r\n      ),\r\n      // like AGGREGATES_OPTIONS, operator options are string\r\n      value: operator,\r\n      onChange: this.onOperatorChange,\r\n      filterOption: (input, option) =>\r\n        option.value.toLowerCase().indexOf(input.toLowerCase()) >= 0,\r\n      autoFocus: !!subjectSelectProps.value && !operator,\r\n    };\r\n\r\n    const focusComparator =\r\n      !!subjectSelectProps.value && !!operatorSelectProps.value;\r\n    const comparatorSelectProps = {\r\n      allowClear: true,\r\n      showSearch: true,\r\n      mode: MULTI_OPERATORS.has(operator) && 'tags',\r\n      tokenSeparators: [',', '\\n', '\\t', ';'],\r\n      loading: this.state.loading,\r\n      value: comparator,\r\n      onChange: this.onComparatorChange,\r\n      notFoundContent: t('Type a value here'),\r\n      disabled: DISABLE_INPUT_OPERATORS.includes(operator),\r\n      placeholder: this.createSuggestionsPlaceholder(),\r\n      labelText: comparator?.length > 0 && this.createSuggestionsPlaceholder(),\r\n      autoFocus: focusComparator,\r\n    };\r\n    const Icon =\r\n      operator === 'NOT IN' ? Icons.StopOutlined : Icons.CheckOutlined;\r\n\r\n    return (\r\n      <>\r\n        <Select\r\n          css={theme => ({\r\n            marginTop: theme.gridUnit * 4,\r\n            marginBottom: theme.gridUnit * 4,\r\n          })}\r\n          {...this.selectProps}\r\n          {...subjectSelectProps}\r\n          name=\"filter-column\"\r\n          getPopupContainer={triggerNode => triggerNode.parentNode}\r\n        >\r\n          {columns.map(column => (\r\n            <Select.Option\r\n              value={column.id || column.optionName}\r\n              filterBy={\r\n                column.saved_metric_name || column.column_name || column.label\r\n              }\r\n              key={column.id || column.optionName}\r\n            >\r\n              {this.renderSubjectOptionLabel(column)}\r\n            </Select.Option>\r\n          ))}\r\n        </Select>\r\n        <Select\r\n          css={theme => ({ marginBottom: theme.gridUnit * 4 })}\r\n          {...this.selectProps}\r\n          {...operatorSelectProps}\r\n          getPopupContainer={triggerNode => triggerNode.parentNode}\r\n          name=\"filter-operator\"\r\n        >\r\n          {OPERATORS_OPTIONS.filter(op =>\r\n            this.isOperatorRelevant(op, subject),\r\n          ).map(option => (\r\n            <Select.Option value={option} key={option}>\r\n              {translateOperator(option)}\r\n            </Select.Option>\r\n          ))}\r\n        </Select>\r\n        {MULTI_OPERATORS.has(operator) || this.state.suggestions.length > 0 ? (\r\n          <SelectWithLabel\r\n            data-test=\"adhoc-filter-simple-value\"\r\n            name=\"filter-value\"\r\n            {...comparatorSelectProps}\r\n            getPopupContainer={triggerNode => triggerNode.parentNode}\r\n            onSearch={val => this.setState({ currentSuggestionSearch: val })}\r\n            onSelect={this.clearSuggestionSearch}\r\n            onBlur={this.clearSuggestionSearch}\r\n            menuItemSelectedIcon={<Icon iconSize=\"m\" />}\r\n          >\r\n            {this.state.suggestions.map(suggestion => (\r\n              <Select.Option value={suggestion} key={suggestion}>\r\n                {suggestion}\r\n              </Select.Option>\r\n            ))}\r\n\r\n            {/* enable selecting an option not included in suggestions */}\r\n            {currentSuggestionSearch &&\r\n              !this.state.suggestions.some(\r\n                suggestion => suggestion === currentSuggestionSearch,\r\n              ) && (\r\n                <Select.Option value={currentSuggestionSearch}>\r\n                  {`${t('Create \"%s\"', currentSuggestionSearch)}`}\r\n                </Select.Option>\r\n              )}\r\n          </SelectWithLabel>\r\n        ) : (\r\n          <Input\r\n            data-test=\"adhoc-filter-simple-value\"\r\n            name=\"filter-value\"\r\n            ref={ref => this.focusComparator(ref, focusComparator)}\r\n            onChange={this.onInputComparatorChange}\r\n            value={comparator}\r\n            placeholder={t('Filter value (case sensitive)')}\r\n            disabled={DISABLE_INPUT_OPERATORS.includes(operator)}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\nAdhocFilterEditPopoverSimpleTabContent.propTypes = propTypes;\r\nAdhocFilterEditPopoverSimpleTabContent.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { NativeSelect as Select } from 'src/components/Select';\r\nimport { t } from '@superset-ui/core';\r\nimport { SQLEditor } from 'src/components/AsyncAceEditor';\r\nimport sqlKeywords from 'src/SqlLab/utils/sqlKeywords';\r\n\r\nimport adhocMetricType from 'src/explore/components/controls/MetricControl/adhocMetricType';\r\nimport columnType from 'src/explore/components/controls/FilterControl/columnType';\r\nimport AdhocFilter, {\r\n  EXPRESSION_TYPES,\r\n  CLAUSES,\r\n} from 'src/explore/components/controls/FilterControl/AdhocFilter';\r\n\r\nconst propTypes = {\r\n  adhocFilter: PropTypes.instanceOf(AdhocFilter).isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  options: PropTypes.arrayOf(\r\n    PropTypes.oneOfType([\r\n      columnType,\r\n      PropTypes.shape({ saved_metric_name: PropTypes.string.isRequired }),\r\n      adhocMetricType,\r\n    ]),\r\n  ).isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  activeKey: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default class AdhocFilterEditPopoverSqlTabContent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onSqlExpressionChange = this.onSqlExpressionChange.bind(this);\r\n    this.onSqlExpressionClauseChange = this.onSqlExpressionClauseChange.bind(\r\n      this,\r\n    );\r\n    this.handleAceEditorRef = this.handleAceEditorRef.bind(this);\r\n\r\n    this.selectProps = {\r\n      name: 'select-column',\r\n    };\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.aceEditorRef) {\r\n      this.aceEditorRef.editor.resize();\r\n    }\r\n  }\r\n\r\n  onSqlExpressionClauseChange(clause) {\r\n    this.props.onChange(\r\n      this.props.adhocFilter.duplicateWith({\r\n        clause,\r\n        expressionType: EXPRESSION_TYPES.SQL,\r\n      }),\r\n    );\r\n  }\r\n\r\n  onSqlExpressionChange(sqlExpression) {\r\n    this.props.onChange(\r\n      this.props.adhocFilter.duplicateWith({\r\n        sqlExpression,\r\n        expressionType: EXPRESSION_TYPES.SQL,\r\n      }),\r\n    );\r\n  }\r\n\r\n  handleAceEditorRef(ref) {\r\n    if (ref) {\r\n      this.aceEditorRef = ref;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { adhocFilter, height, options } = this.props;\r\n\r\n    const clauseSelectProps = {\r\n      placeholder: t('choose WHERE or HAVING...'),\r\n      value: adhocFilter.clause,\r\n      onChange: this.onSqlExpressionClauseChange,\r\n    };\r\n    const keywords = sqlKeywords.concat(\r\n      options\r\n        .map(option => {\r\n          if (option.column_name) {\r\n            return {\r\n              name: option.column_name,\r\n              value: option.column_name,\r\n              score: 50,\r\n              meta: 'option',\r\n            };\r\n          }\r\n          return null;\r\n        })\r\n        .filter(Boolean),\r\n    );\r\n\r\n    return (\r\n      <span>\r\n        <div className=\"filter-edit-clause-section\">\r\n          <Select\r\n            {...this.selectProps}\r\n            {...clauseSelectProps}\r\n            className=\"filter-edit-clause-dropdown\"\r\n            getPopupContainer={triggerNode => triggerNode.parentNode}\r\n          >\r\n            {Object.keys(CLAUSES).map(clause => (\r\n              <Select.Option value={clause} key={clause}>\r\n                {clause}\r\n              </Select.Option>\r\n            ))}\r\n          </Select>\r\n          <span className=\"filter-edit-clause-info\">\r\n            <strong>WHERE</strong> {t('Filters by columns')}\r\n            <br />\r\n            <strong>HAVING</strong> {t('Filters by metrics')}\r\n          </span>\r\n        </div>\r\n        <div css={theme => ({ marginTop: theme.gridUnit * 4 })}>\r\n          <SQLEditor\r\n            ref={this.handleAceEditorRef}\r\n            keywords={keywords}\r\n            height={`${height - 130}px`}\r\n            onChange={this.onSqlExpressionChange}\r\n            width=\"100%\"\r\n            showGutter={false}\r\n            value={adhocFilter.sqlExpression || adhocFilter.translateToSql()}\r\n            editorProps={{ $blockScrolling: true }}\r\n            enableLiveAutocompletion\r\n            className=\"filter-sql-editor\"\r\n            wrapEnabled\r\n          />\r\n        </div>\r\n      </span>\r\n    );\r\n  }\r\n}\r\nAdhocFilterEditPopoverSqlTabContent.propTypes = propTypes;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport adhocMetricType from 'src/explore/components/controls/MetricControl/adhocMetricType';\r\nimport { OptionControlLabel } from 'src/explore/components/controls/OptionControls';\r\nimport { DndItemType } from 'src/explore/components/DndItemType';\r\nimport columnType from 'src/explore/components/controls/FilterControl/columnType';\r\nimport AdhocFilterPopoverTrigger from 'src/explore/components/controls/FilterControl/AdhocFilterPopoverTrigger';\r\nimport AdhocFilter from 'src/explore/components/controls/FilterControl/AdhocFilter';\r\n\r\nconst propTypes = {\r\n  adhocFilter: PropTypes.instanceOf(AdhocFilter).isRequired,\r\n  onFilterEdit: PropTypes.func.isRequired,\r\n  onRemoveFilter: PropTypes.func,\r\n  options: PropTypes.arrayOf(\r\n    PropTypes.oneOfType([\r\n      columnType,\r\n      PropTypes.shape({ saved_metric_name: PropTypes.string.isRequired }),\r\n      adhocMetricType,\r\n    ]),\r\n  ).isRequired,\r\n  datasource: PropTypes.object,\r\n  partitionColumn: PropTypes.string,\r\n  onMoveLabel: PropTypes.func,\r\n  onDropLabel: PropTypes.func,\r\n  index: PropTypes.number,\r\n};\r\n\r\nconst AdhocFilterOption = ({\r\n  adhocFilter,\r\n  options,\r\n  datasource,\r\n  onFilterEdit,\r\n  onRemoveFilter,\r\n  partitionColumn,\r\n  onMoveLabel,\r\n  onDropLabel,\r\n  index,\r\n}) => (\r\n  <AdhocFilterPopoverTrigger\r\n    adhocFilter={adhocFilter}\r\n    options={options}\r\n    datasource={datasource}\r\n    onFilterEdit={onFilterEdit}\r\n    partitionColumn={partitionColumn}\r\n  >\r\n    <OptionControlLabel\r\n      label={adhocFilter.getDefaultLabel()}\r\n      tooltipTitle={adhocFilter.getTooltipTitle()}\r\n      onRemove={onRemoveFilter}\r\n      onMoveLabel={onMoveLabel}\r\n      onDropLabel={onDropLabel}\r\n      index={index}\r\n      type={DndItemType.FilterOption}\r\n      withCaret\r\n      isExtra={adhocFilter.isExtra}\r\n    />\r\n  </AdhocFilterPopoverTrigger>\r\n);\r\n\r\nexport default AdhocFilterOption;\r\n\r\nAdhocFilterOption.propTypes = propTypes;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport Popover from 'src/components/Popover';\r\nimport { OptionSortType } from 'src/explore/types';\r\nimport AdhocFilterEditPopover from 'src/explore/components/controls/FilterControl/AdhocFilterEditPopover';\r\nimport AdhocFilter from 'src/explore/components/controls/FilterControl/AdhocFilter';\r\nimport { ExplorePopoverContent } from 'src/explore/components/ExploreContentPopover';\r\n\r\ninterface AdhocFilterPopoverTriggerProps {\r\n  adhocFilter: AdhocFilter;\r\n  options: OptionSortType[];\r\n  datasource: Record<string, any>;\r\n  onFilterEdit: (editedFilter: AdhocFilter) => void;\r\n  partitionColumn?: string;\r\n  createNew?: boolean;\r\n  isControlledComponent?: boolean;\r\n  visible?: boolean;\r\n  togglePopover?: (visible: boolean) => void;\r\n  closePopover?: () => void;\r\n}\r\n\r\ninterface AdhocFilterPopoverTriggerState {\r\n  popoverVisible: boolean;\r\n}\r\n\r\nclass AdhocFilterPopoverTrigger extends React.PureComponent<\r\n  AdhocFilterPopoverTriggerProps,\r\n  AdhocFilterPopoverTriggerState\r\n> {\r\n  constructor(props: AdhocFilterPopoverTriggerProps) {\r\n    super(props);\r\n    this.onPopoverResize = this.onPopoverResize.bind(this);\r\n    this.closePopover = this.closePopover.bind(this);\r\n    this.togglePopover = this.togglePopover.bind(this);\r\n    this.state = {\r\n      popoverVisible: false,\r\n    };\r\n  }\r\n\r\n  onPopoverResize() {\r\n    this.forceUpdate();\r\n  }\r\n\r\n  closePopover() {\r\n    this.togglePopover(false);\r\n  }\r\n\r\n  togglePopover(visible: boolean) {\r\n    this.setState({\r\n      popoverVisible: visible,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { adhocFilter, isControlledComponent } = this.props;\r\n\r\n    const { visible, togglePopover, closePopover } = isControlledComponent\r\n      ? {\r\n          visible: this.props.visible,\r\n          togglePopover: this.props.togglePopover,\r\n          closePopover: this.props.closePopover,\r\n        }\r\n      : {\r\n          visible: this.state.popoverVisible,\r\n          togglePopover: this.togglePopover,\r\n          closePopover: this.closePopover,\r\n        };\r\n    const overlayContent = (\r\n      <ExplorePopoverContent>\r\n        <AdhocFilterEditPopover\r\n          adhocFilter={adhocFilter}\r\n          options={this.props.options}\r\n          datasource={this.props.datasource}\r\n          partitionColumn={this.props.partitionColumn}\r\n          onResize={this.onPopoverResize}\r\n          onClose={closePopover}\r\n          onChange={this.props.onFilterEdit}\r\n        />\r\n      </ExplorePopoverContent>\r\n    );\r\n\r\n    return (\r\n      <Popover\r\n        placement=\"right\"\r\n        trigger=\"click\"\r\n        content={overlayContent}\r\n        defaultVisible={visible}\r\n        visible={visible}\r\n        onVisibleChange={togglePopover}\r\n        destroyTooltipOnHide={this.props.createNew}\r\n      >\r\n        {this.props.children}\r\n      </Popover>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AdhocFilterPopoverTrigger;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { OPERATORS } from 'src/explore/constants';\r\nimport { EXPRESSION_TYPES, CLAUSES } from './AdhocFilter';\r\n\r\nexport default PropTypes.oneOfType([\r\n  PropTypes.shape({\r\n    expressionType: PropTypes.oneOf([EXPRESSION_TYPES.SIMPLE]).isRequired,\r\n    clause: PropTypes.oneOf([CLAUSES.HAVING, CLAUSES.WHERE]).isRequired,\r\n    subject: PropTypes.string.isRequired,\r\n    operator: PropTypes.oneOf(Object.keys(OPERATORS)).isRequired,\r\n    comparator: PropTypes.oneOfType([\r\n      PropTypes.string,\r\n      PropTypes.arrayOf(PropTypes.string),\r\n    ]).isRequired,\r\n  }),\r\n  PropTypes.shape({\r\n    expressionType: PropTypes.oneOf([EXPRESSION_TYPES.SQL]).isRequired,\r\n    clause: PropTypes.oneOf([CLAUSES.WHERE, CLAUSES.HAVING]).isRequired,\r\n    sqlExpression: PropTypes.string.isRequired,\r\n  }),\r\n]);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.shape({\r\n  column_name: PropTypes.string.isRequired,\r\n  type: PropTypes.string,\r\n});\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { css } from '@emotion/react';\r\nimport { t } from '@superset-ui/core';\r\nimport Label from 'src/components/Label';\r\nimport Collapse from 'src/components/Collapse';\r\nimport TextControl from 'src/explore/components/controls/TextControl';\r\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\nimport PopoverSection from 'src/components/PopoverSection';\r\n\r\nconst controlTypes = {\r\n  fixed: 'fix',\r\n  metric: 'metric',\r\n};\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.object,\r\n  isFloat: PropTypes.bool,\r\n  datasource: PropTypes.object.isRequired,\r\n  default: PropTypes.shape({\r\n    type: PropTypes.oneOf(['fix', 'metric']),\r\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  }),\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  default: { type: controlTypes.fixed, value: 5 },\r\n};\r\n\r\nexport default class FixedOrMetricControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.setType = this.setType.bind(this);\r\n    this.setFixedValue = this.setFixedValue.bind(this);\r\n    this.setMetric = this.setMetric.bind(this);\r\n    const type =\r\n      (props.value ? props.value.type : props.default.type) ||\r\n      controlTypes.fixed;\r\n    const value =\r\n      (props.value ? props.value.value : props.default.value) || '100';\r\n    this.state = {\r\n      type,\r\n      fixedValue: type === controlTypes.fixed ? value : '',\r\n      metricValue: type === controlTypes.metric ? value : null,\r\n    };\r\n  }\r\n\r\n  onChange() {\r\n    this.props.onChange({\r\n      type: this.state.type,\r\n      value:\r\n        this.state.type === controlTypes.fixed\r\n          ? this.state.fixedValue\r\n          : this.state.metricValue,\r\n    });\r\n  }\r\n\r\n  setType(type) {\r\n    this.setState({ type }, this.onChange);\r\n  }\r\n\r\n  setFixedValue(fixedValue) {\r\n    this.setState({ fixedValue }, this.onChange);\r\n  }\r\n\r\n  setMetric(metricValue) {\r\n    this.setState({ metricValue }, this.onChange);\r\n  }\r\n\r\n  render() {\r\n    const value = this.props.value || this.props.default;\r\n    const type = value.type || controlTypes.fixed;\r\n    const columns = this.props.datasource\r\n      ? this.props.datasource.columns\r\n      : null;\r\n    const metrics = this.props.datasource\r\n      ? this.props.datasource.metrics\r\n      : null;\r\n    return (\r\n      <div>\r\n        <ControlHeader {...this.props} />\r\n        <Collapse\r\n          ghost\r\n          css={theme => css`\r\n            &.ant-collapse\r\n              > .ant-collapse-item.ant-collapse-no-arrow\r\n              > .ant-collapse-header {\r\n              border: 0px;\r\n              padding: 0px 0px ${theme.gridUnit * 2}px 0px;\r\n              display: inline-block;\r\n            }\r\n            &.ant-collapse-ghost\r\n              > .ant-collapse-item\r\n              > .ant-collapse-content\r\n              > .ant-collapse-content-box {\r\n              padding: 0px;\r\n\r\n              & .well {\r\n                margin-bottom: 0px;\r\n                padding: ${theme.gridUnit * 2}px;\r\n              }\r\n            }\r\n          `}\r\n        >\r\n          <Collapse.Panel\r\n            showArrow={false}\r\n            header={\r\n              <Label onClick={() => undefined}>\r\n                {this.state.type === controlTypes.fixed && (\r\n                  <span>{this.state.fixedValue}</span>\r\n                )}\r\n                {this.state.type === controlTypes.metric && (\r\n                  <span>\r\n                    <span>metric: </span>\r\n                    <strong>\r\n                      {this.state.metricValue\r\n                        ? this.state.metricValue.label\r\n                        : null}\r\n                    </strong>\r\n                  </span>\r\n                )}\r\n              </Label>\r\n            }\r\n          >\r\n            <div className=\"well\">\r\n              <PopoverSection\r\n                title={t('Fixed')}\r\n                isSelected={type === controlTypes.fixed}\r\n                onSelect={() => {\r\n                  this.setType(controlTypes.fixed);\r\n                }}\r\n              >\r\n                <TextControl\r\n                  isFloat\r\n                  onChange={this.setFixedValue}\r\n                  onFocus={() => {\r\n                    this.setType(controlTypes.fixed);\r\n                  }}\r\n                  value={this.state.fixedValue}\r\n                />\r\n              </PopoverSection>\r\n              <PopoverSection\r\n                title={t('Based on a metric')}\r\n                isSelected={type === controlTypes.metric}\r\n                onSelect={() => {\r\n                  this.setType(controlTypes.metric);\r\n                }}\r\n              >\r\n                <MetricsControl\r\n                  name=\"metric\"\r\n                  columns={columns}\r\n                  savedMetrics={metrics}\r\n                  multi={false}\r\n                  onFocus={() => {\r\n                    this.setType(controlTypes.metric);\r\n                  }}\r\n                  onChange={this.setMetric}\r\n                  value={this.state.metricValue}\r\n                />\r\n              </PopoverSection>\r\n            </div>\r\n          </Collapse.Panel>\r\n        </Collapse>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFixedOrMetricControl.propTypes = propTypes;\r\nFixedOrMetricControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Input } from 'src/common/components';\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.number,\r\n    PropTypes.object,\r\n    PropTypes.bool,\r\n    PropTypes.array,\r\n    PropTypes.func,\r\n  ]),\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n};\r\n\r\nexport default function HiddenControl(props) {\r\n  // This wouldn't be necessary but might as well\r\n  return <Input type=\"hidden\" value={props.value} />;\r\n}\r\n\r\nHiddenControl.propTypes = propTypes;\r\nHiddenControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { sqlaAutoGeneratedMetricRegex } from 'src/explore/constants';\r\n\r\nexport const EXPRESSION_TYPES = {\r\n  SIMPLE: 'SIMPLE',\r\n  SQL: 'SQL',\r\n};\r\n\r\nfunction inferSqlExpressionColumn(adhocMetric) {\r\n  if (\r\n    adhocMetric.sqlExpression &&\r\n    sqlaAutoGeneratedMetricRegex.test(adhocMetric.sqlExpression)\r\n  ) {\r\n    const indexFirstCloseParen = adhocMetric.sqlExpression.indexOf(')');\r\n    const indexPairedOpenParen = adhocMetric.sqlExpression\r\n      .substring(0, indexFirstCloseParen)\r\n      .lastIndexOf('(');\r\n    if (indexFirstCloseParen > 0 && indexPairedOpenParen > 0) {\r\n      return adhocMetric.sqlExpression.substring(\r\n        indexPairedOpenParen + 1,\r\n        indexFirstCloseParen,\r\n      );\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction inferSqlExpressionAggregate(adhocMetric) {\r\n  if (\r\n    adhocMetric.sqlExpression &&\r\n    sqlaAutoGeneratedMetricRegex.test(adhocMetric.sqlExpression)\r\n  ) {\r\n    const indexFirstOpenParen = adhocMetric.sqlExpression.indexOf('(');\r\n    if (indexFirstOpenParen > 0) {\r\n      return adhocMetric.sqlExpression.substring(0, indexFirstOpenParen);\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default class AdhocMetric {\r\n  constructor(adhocMetric) {\r\n    this.expressionType = adhocMetric.expressionType || EXPRESSION_TYPES.SIMPLE;\r\n    if (this.expressionType === EXPRESSION_TYPES.SIMPLE) {\r\n      // try to be clever in the case of transitioning from Sql expression back to simple expression\r\n      const inferredColumn = inferSqlExpressionColumn(adhocMetric);\r\n      this.column =\r\n        adhocMetric.column ||\r\n        (inferredColumn && { column_name: inferredColumn });\r\n      this.aggregate =\r\n        adhocMetric.aggregate || inferSqlExpressionAggregate(adhocMetric);\r\n      this.sqlExpression = null;\r\n    } else if (this.expressionType === EXPRESSION_TYPES.SQL) {\r\n      this.sqlExpression = adhocMetric.sqlExpression;\r\n      this.column = null;\r\n      this.aggregate = null;\r\n    }\r\n    this.isNew = !!adhocMetric.isNew;\r\n    this.hasCustomLabel = !!(adhocMetric.hasCustomLabel && adhocMetric.label);\r\n    this.label = this.hasCustomLabel\r\n      ? adhocMetric.label\r\n      : this.getDefaultLabel();\r\n\r\n    this.optionName =\r\n      adhocMetric.optionName ||\r\n      `metric_${Math.random()\r\n        .toString(36)\r\n        .substring(2, 15)}_${Math.random().toString(36).substring(2, 15)}`;\r\n  }\r\n\r\n  getDefaultLabel() {\r\n    const label = this.translateToSql();\r\n    return label.length < 43 ? label : `${label.substring(0, 40)}...`;\r\n  }\r\n\r\n  translateToSql() {\r\n    if (this.expressionType === EXPRESSION_TYPES.SIMPLE) {\r\n      const aggregate = this.aggregate || '';\r\n      // eslint-disable-next-line camelcase\r\n      const column = this.column?.column_name\r\n        ? `(${this.column.column_name})`\r\n        : '';\r\n      return aggregate + column;\r\n    }\r\n    if (this.expressionType === EXPRESSION_TYPES.SQL) {\r\n      return this.sqlExpression;\r\n    }\r\n    return '';\r\n  }\r\n\r\n  duplicateWith(nextFields) {\r\n    return new AdhocMetric({\r\n      ...this,\r\n      // all duplicate metrics are not considered new by default\r\n      isNew: false,\r\n      // but still overriddable by nextFields\r\n      ...nextFields,\r\n    });\r\n  }\r\n\r\n  equals(adhocMetric) {\r\n    return (\r\n      adhocMetric.label === this.label &&\r\n      adhocMetric.expressionType === this.expressionType &&\r\n      adhocMetric.sqlExpression === this.sqlExpression &&\r\n      adhocMetric.aggregate === this.aggregate &&\r\n      (adhocMetric.column && adhocMetric.column.column_name) ===\r\n        (this.column && this.column.column_name)\r\n    );\r\n  }\r\n\r\n  isValid() {\r\n    if (this.expressionType === EXPRESSION_TYPES.SIMPLE) {\r\n      return !!(this.column && this.aggregate);\r\n    }\r\n    if (this.expressionType === EXPRESSION_TYPES.SQL) {\r\n      return !!this.sqlExpression;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  inferSqlExpressionAggregate() {\r\n    return inferSqlExpressionAggregate(this);\r\n  }\r\n\r\n  inferSqlExpressionColumn() {\r\n    return inferSqlExpressionColumn(this);\r\n  }\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n/* eslint-disable camelcase */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Tabs from 'src/components/Tabs';\r\nimport Button from 'src/components/Button';\r\nimport { NativeSelect as Select } from 'src/components/Select';\r\nimport { t, styled } from '@superset-ui/core';\r\n\r\nimport { Form, FormItem } from 'src/components/Form';\r\nimport { SQLEditor } from 'src/components/AsyncAceEditor';\r\nimport sqlKeywords from 'src/SqlLab/utils/sqlKeywords';\r\nimport { noOp } from 'src/utils/common';\r\n\r\nimport { AGGREGATES_OPTIONS } from 'src/explore/constants';\r\nimport columnType from 'src/explore/components/controls/MetricControl/columnType';\r\nimport savedMetricType from 'src/explore/components/controls/MetricControl/savedMetricType';\r\nimport AdhocMetric, {\r\n  EXPRESSION_TYPES,\r\n} from 'src/explore/components/controls/MetricControl/AdhocMetric';\r\nimport {\r\n  StyledMetricOption,\r\n  StyledColumnOption,\r\n} from 'src/explore/components/optionRenderers';\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onResize: PropTypes.func.isRequired,\r\n  getCurrentTab: PropTypes.func,\r\n  getCurrentLabel: PropTypes.func,\r\n  adhocMetric: PropTypes.instanceOf(AdhocMetric).isRequired,\r\n  columns: PropTypes.arrayOf(columnType),\r\n  savedMetricsOptions: PropTypes.arrayOf(savedMetricType),\r\n  savedMetric: savedMetricType,\r\n  datasourceType: PropTypes.string,\r\n};\r\n\r\nconst defaultProps = {\r\n  columns: [],\r\n  getCurrentTab: noOp,\r\n};\r\n\r\nconst StyledSelect = styled(Select)`\r\n  .metric-option {\r\n    & > svg {\r\n      min-width: ${({ theme }) => `${theme.gridUnit * 4}px`};\r\n    }\r\n    & > .option-label {\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SAVED_TAB_KEY = 'SAVED';\r\n\r\nconst startingWidth = 320;\r\nconst startingHeight = 240;\r\n\r\nexport default class AdhocMetricEditPopover extends React.PureComponent {\r\n  // \"Saved\" is a default tab unless there are no saved metrics for dataset\r\n  defaultActiveTabKey =\r\n    (this.props.savedMetric.metric_name || this.props.adhocMetric.isNew) &&\r\n    Array.isArray(this.props.savedMetricsOptions) &&\r\n    this.props.savedMetricsOptions.length > 0\r\n      ? SAVED_TAB_KEY\r\n      : this.props.adhocMetric.expressionType;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onSave = this.onSave.bind(this);\r\n    this.onResetStateAndClose = this.onResetStateAndClose.bind(this);\r\n    this.onColumnChange = this.onColumnChange.bind(this);\r\n    this.onAggregateChange = this.onAggregateChange.bind(this);\r\n    this.onSavedMetricChange = this.onSavedMetricChange.bind(this);\r\n    this.onSqlExpressionChange = this.onSqlExpressionChange.bind(this);\r\n    this.onDragDown = this.onDragDown.bind(this);\r\n    this.onMouseMove = this.onMouseMove.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.onTabChange = this.onTabChange.bind(this);\r\n    this.handleAceEditorRef = this.handleAceEditorRef.bind(this);\r\n    this.refreshAceEditor = this.refreshAceEditor.bind(this);\r\n\r\n    this.state = {\r\n      adhocMetric: this.props.adhocMetric,\r\n      savedMetric: this.props.savedMetric,\r\n      width: startingWidth,\r\n      height: startingHeight,\r\n    };\r\n\r\n    document.addEventListener('mouseup', this.onMouseUp);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.getCurrentTab(this.defaultActiveTabKey);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevState.adhocMetric?.sqlExpression !==\r\n        this.state.adhocMetric?.sqlExpression ||\r\n      prevState.adhocMetric?.aggregate !== this.state.adhocMetric?.aggregate ||\r\n      prevState.adhocMetric?.column?.column_name !==\r\n        this.state.adhocMetric?.column?.column_name ||\r\n      prevState.savedMetric?.metric_name !== this.state.savedMetric?.metric_name\r\n    ) {\r\n      this.props.getCurrentLabel({\r\n        savedMetricLabel:\r\n          this.state.savedMetric?.verbose_name ||\r\n          this.state.savedMetric?.metric_name,\r\n        adhocMetricLabel: this.state.adhocMetric?.getDefaultLabel(),\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mouseup', this.onMouseUp);\r\n    document.removeEventListener('mousemove', this.onMouseMove);\r\n  }\r\n\r\n  onSave() {\r\n    const { adhocMetric, savedMetric } = this.state;\r\n\r\n    const metric = savedMetric?.metric_name ? savedMetric : adhocMetric;\r\n    const oldMetric = this.props.savedMetric?.metric_name\r\n      ? this.props.savedMetric\r\n      : this.props.adhocMetric;\r\n    this.props.onChange(\r\n      {\r\n        ...metric,\r\n      },\r\n      oldMetric,\r\n    );\r\n    this.props.onClose();\r\n  }\r\n\r\n  onResetStateAndClose() {\r\n    this.setState(\r\n      {\r\n        adhocMetric: this.props.adhocMetric,\r\n        savedMetric: this.props.savedMetric,\r\n      },\r\n      this.props.onClose,\r\n    );\r\n  }\r\n\r\n  onColumnChange(columnId) {\r\n    const column = this.props.columns.find(column => column.id === columnId);\r\n    this.setState(prevState => ({\r\n      adhocMetric: prevState.adhocMetric.duplicateWith({\r\n        column,\r\n        expressionType: EXPRESSION_TYPES.SIMPLE,\r\n      }),\r\n      savedMetric: undefined,\r\n    }));\r\n  }\r\n\r\n  onAggregateChange(aggregate) {\r\n    // we construct this object explicitly to overwrite the value in the case aggregate is null\r\n    this.setState(prevState => ({\r\n      adhocMetric: prevState.adhocMetric.duplicateWith({\r\n        aggregate,\r\n        expressionType: EXPRESSION_TYPES.SIMPLE,\r\n      }),\r\n      savedMetric: undefined,\r\n    }));\r\n  }\r\n\r\n  onSavedMetricChange(savedMetricId) {\r\n    const savedMetric = this.props.savedMetricsOptions.find(\r\n      metric => metric.id === savedMetricId,\r\n    );\r\n    this.setState(prevState => ({\r\n      savedMetric,\r\n      adhocMetric: prevState.adhocMetric.duplicateWith({\r\n        column: undefined,\r\n        aggregate: undefined,\r\n        sqlExpression: undefined,\r\n        expressionType: EXPRESSION_TYPES.SIMPLE,\r\n      }),\r\n    }));\r\n  }\r\n\r\n  onSqlExpressionChange(sqlExpression) {\r\n    this.setState(prevState => ({\r\n      adhocMetric: prevState.adhocMetric.duplicateWith({\r\n        sqlExpression,\r\n        expressionType: EXPRESSION_TYPES.SQL,\r\n      }),\r\n      savedMetric: undefined,\r\n    }));\r\n  }\r\n\r\n  onDragDown(e) {\r\n    this.dragStartX = e.clientX;\r\n    this.dragStartY = e.clientY;\r\n    this.dragStartWidth = this.state.width;\r\n    this.dragStartHeight = this.state.height;\r\n    document.addEventListener('mousemove', this.onMouseMove);\r\n  }\r\n\r\n  onMouseMove(e) {\r\n    this.props.onResize();\r\n    this.setState({\r\n      width: Math.max(\r\n        this.dragStartWidth + (e.clientX - this.dragStartX),\r\n        startingWidth,\r\n      ),\r\n      height: Math.max(\r\n        this.dragStartHeight + (e.clientY - this.dragStartY) * 2,\r\n        startingHeight,\r\n      ),\r\n    });\r\n  }\r\n\r\n  onMouseUp() {\r\n    document.removeEventListener('mousemove', this.onMouseMove);\r\n  }\r\n\r\n  onTabChange(tab) {\r\n    this.refreshAceEditor();\r\n    this.props.getCurrentTab(tab);\r\n  }\r\n\r\n  handleAceEditorRef(ref) {\r\n    if (ref) {\r\n      this.aceEditorRef = ref;\r\n    }\r\n  }\r\n\r\n  refreshAceEditor() {\r\n    setTimeout(() => {\r\n      if (this.aceEditorRef) {\r\n        this.aceEditorRef.editor.resize();\r\n      }\r\n    }, 0);\r\n  }\r\n\r\n  renderColumnOption(option) {\r\n    const column = { ...option };\r\n    if (column.metric_name && !column.verbose_name) {\r\n      column.verbose_name = column.metric_name;\r\n    }\r\n    return <StyledColumnOption column={column} showType />;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      adhocMetric: propsAdhocMetric,\r\n      savedMetric: propsSavedMetric,\r\n      columns,\r\n      savedMetricsOptions,\r\n      onChange,\r\n      onClose,\r\n      onResize,\r\n      datasourceType,\r\n      ...popoverProps\r\n    } = this.props;\r\n    const { adhocMetric, savedMetric } = this.state;\r\n    const keywords = sqlKeywords.concat(\r\n      columns.map(column => ({\r\n        name: column.column_name,\r\n        value: column.column_name,\r\n        score: 50,\r\n        meta: 'column',\r\n      })),\r\n    );\r\n\r\n    const columnValue =\r\n      (adhocMetric.column && adhocMetric.column.column_name) ||\r\n      adhocMetric.inferSqlExpressionColumn();\r\n\r\n    // autofocus on column if there's no value in column; otherwise autofocus on aggregate\r\n    const columnSelectProps = {\r\n      placeholder: t('%s column(s)', columns.length),\r\n      value: columnValue,\r\n      onChange: this.onColumnChange,\r\n      allowClear: true,\r\n      showSearch: true,\r\n      autoFocus: !columnValue,\r\n      filterOption: (input, option) =>\r\n        option.filterBy.toLowerCase().indexOf(input.toLowerCase()) >= 0,\r\n    };\r\n\r\n    const aggregateSelectProps = {\r\n      placeholder: t('%s aggregates(s)', AGGREGATES_OPTIONS.length),\r\n      value: adhocMetric.aggregate || adhocMetric.inferSqlExpressionAggregate(),\r\n      onChange: this.onAggregateChange,\r\n      allowClear: true,\r\n      autoFocus: !!columnValue,\r\n      showSearch: true,\r\n    };\r\n\r\n    const savedSelectProps = {\r\n      placeholder: t('%s saved metric(s)', savedMetricsOptions?.length ?? 0),\r\n      value: savedMetric?.verbose_name || savedMetric?.metric_name,\r\n      onChange: this.onSavedMetricChange,\r\n      allowClear: true,\r\n      showSearch: true,\r\n      autoFocus: true,\r\n      filterOption: (input, option) =>\r\n        option.filterBy.toLowerCase().indexOf(input.toLowerCase()) >= 0,\r\n    };\r\n\r\n    if (this.props.datasourceType === 'druid' && aggregateSelectProps.options) {\r\n      aggregateSelectProps.options = aggregateSelectProps.options.filter(\r\n        aggregate => aggregate !== 'AVG',\r\n      );\r\n    }\r\n\r\n    const stateIsValid = adhocMetric.isValid() || savedMetric?.metric_name;\r\n    const hasUnsavedChanges =\r\n      !adhocMetric.equals(propsAdhocMetric) ||\r\n      (!(\r\n        typeof savedMetric?.metric_name === 'undefined' &&\r\n        typeof propsSavedMetric?.metric_name === 'undefined'\r\n      ) &&\r\n        savedMetric?.metric_name !== propsSavedMetric?.metric_name);\r\n\r\n    return (\r\n      <Form\r\n        layout=\"vertical\"\r\n        id=\"metrics-edit-popover\"\r\n        data-test=\"metrics-edit-popover\"\r\n        {...popoverProps}\r\n      >\r\n        <Tabs\r\n          id=\"adhoc-metric-edit-tabs\"\r\n          data-test=\"adhoc-metric-edit-tabs\"\r\n          defaultActiveKey={this.defaultActiveTabKey}\r\n          className=\"adhoc-metric-edit-tabs\"\r\n          style={{ height: this.state.height, width: this.state.width }}\r\n          onChange={this.onTabChange}\r\n          allowOverflow\r\n        >\r\n          <Tabs.TabPane key={SAVED_TAB_KEY} tab={t('Saved')}>\r\n            <FormItem label={t('Saved metric')}>\r\n              <StyledSelect\r\n                {...savedSelectProps}\r\n                name=\"select-saved\"\r\n                getPopupContainer={triggerNode => triggerNode.parentNode}\r\n              >\r\n                {Array.isArray(savedMetricsOptions) &&\r\n                  savedMetricsOptions.map(savedMetric => (\r\n                    <Select.Option\r\n                      value={savedMetric.id}\r\n                      filterBy={\r\n                        savedMetric.verbose_name || savedMetric.metric_name\r\n                      }\r\n                      key={savedMetric.id}\r\n                    >\r\n                      <StyledMetricOption metric={savedMetric} showType />\r\n                    </Select.Option>\r\n                  ))}\r\n              </StyledSelect>\r\n            </FormItem>\r\n          </Tabs.TabPane>\r\n          <Tabs.TabPane key={EXPRESSION_TYPES.SIMPLE} tab={t('Simple')}>\r\n            <FormItem label={t('column')}>\r\n              <Select\r\n                {...columnSelectProps}\r\n                name=\"select-column\"\r\n                getPopupContainer={triggerNode => triggerNode.parentNode}\r\n              >\r\n                {columns.map(column => (\r\n                  <Select.Option\r\n                    value={column.id}\r\n                    filterBy={column.verbose_name || column.column_name}\r\n                    key={column.id}\r\n                  >\r\n                    {this.renderColumnOption(column)}\r\n                  </Select.Option>\r\n                ))}\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label={t('aggregate')}>\r\n              <Select\r\n                {...aggregateSelectProps}\r\n                name=\"select-aggregate\"\r\n                getPopupContainer={triggerNode => triggerNode.parentNode}\r\n              >\r\n                {AGGREGATES_OPTIONS.map(option => (\r\n                  <Select.Option value={option} key={option}>\r\n                    {option}\r\n                  </Select.Option>\r\n                ))}\r\n              </Select>\r\n            </FormItem>\r\n          </Tabs.TabPane>\r\n          <Tabs.TabPane\r\n            key={EXPRESSION_TYPES.SQL}\r\n            tab={t('Custom SQL')}\r\n            data-test=\"adhoc-metric-edit-tab#custom\"\r\n          >\r\n            {this.props.datasourceType !== 'druid' ? (\r\n              <SQLEditor\r\n                data-test=\"sql-editor\"\r\n                showLoadingForImport\r\n                ref={this.handleAceEditorRef}\r\n                keywords={keywords}\r\n                height={`${this.state.height - 80}px`}\r\n                onChange={this.onSqlExpressionChange}\r\n                width=\"100%\"\r\n                showGutter={false}\r\n                value={\r\n                  adhocMetric.sqlExpression || adhocMetric.translateToSql()\r\n                }\r\n                editorProps={{ $blockScrolling: true }}\r\n                enableLiveAutocompletion\r\n                className=\"filter-sql-editor\"\r\n                wrapEnabled\r\n              />\r\n            ) : (\r\n              <div className=\"custom-sql-disabled-message\">\r\n                Custom SQL Metrics are not available on druid datasources\r\n              </div>\r\n            )}\r\n          </Tabs.TabPane>\r\n        </Tabs>\r\n        <div>\r\n          <Button\r\n            buttonSize=\"small\"\r\n            onClick={this.onResetStateAndClose}\r\n            data-test=\"AdhocMetricEdit#cancel\"\r\n            cta\r\n          >\r\n            {t('Close')}\r\n          </Button>\r\n          <Button\r\n            disabled={!stateIsValid}\r\n            buttonStyle={\r\n              hasUnsavedChanges && stateIsValid ? 'primary' : 'default'\r\n            }\r\n            buttonSize=\"small\"\r\n            data-test=\"AdhocMetricEdit#save\"\r\n            onClick={this.onSave}\r\n            cta\r\n          >\r\n            {t('Save')}\r\n          </Button>\r\n          <i\r\n            role=\"button\"\r\n            aria-label=\"Resize\"\r\n            tabIndex={0}\r\n            onMouseDown={this.onDragDown}\r\n            className=\"fa fa-expand edit-popover-resize text-muted\"\r\n          />\r\n        </div>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\nAdhocMetricEditPopover.propTypes = propTypes;\r\nAdhocMetricEditPopover.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { t } from '@superset-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport { Input } from 'src/common/components';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\n\r\nconst propTypes = {\r\n  title: PropTypes.shape({\r\n    label: PropTypes.string,\r\n    hasCustomLabel: PropTypes.bool,\r\n  }),\r\n  onChange: PropTypes.func.isRequired,\r\n  isEditDisabled: PropTypes.bool,\r\n};\r\n\r\nexport default class AdhocMetricEditPopoverTitle extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onMouseOver = this.onMouseOver.bind(this);\r\n    this.onMouseOut = this.onMouseOut.bind(this);\r\n    this.onClick = this.onClick.bind(this);\r\n    this.onBlur = this.onBlur.bind(this);\r\n    this.onInputBlur = this.onInputBlur.bind(this);\r\n    this.state = {\r\n      isHovered: false,\r\n      isEditMode: false,\r\n    };\r\n  }\r\n\r\n  onMouseOver() {\r\n    this.setState({ isHovered: true });\r\n  }\r\n\r\n  onMouseOut() {\r\n    this.setState({ isHovered: false });\r\n  }\r\n\r\n  onClick() {\r\n    this.setState({ isEditMode: true });\r\n  }\r\n\r\n  onBlur() {\r\n    this.setState({ isEditMode: false });\r\n  }\r\n\r\n  onInputBlur(e) {\r\n    if (e.target.value === '') {\r\n      this.props.onChange(e);\r\n    }\r\n    this.onBlur();\r\n  }\r\n\r\n  render() {\r\n    const { title, onChange, isEditDisabled } = this.props;\r\n    const defaultLabel = t('My metric');\r\n\r\n    if (isEditDisabled) {\r\n      return (\r\n        <span data-test=\"AdhocMetricTitle\">{title.label || defaultLabel}</span>\r\n      );\r\n    }\r\n\r\n    return this.state.isEditMode ? (\r\n      <Input\r\n        className=\"metric-edit-popover-label-input\"\r\n        type=\"text\"\r\n        placeholder={title.label}\r\n        value={title.hasCustomLabel ? title.label : ''}\r\n        autoFocus\r\n        onChange={onChange}\r\n        onBlur={this.onInputBlur}\r\n        data-test=\"AdhocMetricEditTitle#input\"\r\n      />\r\n    ) : (\r\n      <Tooltip placement=\"top\" title=\"Click to edit label\">\r\n        <span\r\n          className=\"AdhocMetricEditPopoverTitle inline-editable\"\r\n          data-test=\"AdhocMetricEditTitle#trigger\"\r\n          onMouseOver={this.onMouseOver}\r\n          onMouseOut={this.onMouseOut}\r\n          onClick={this.onClick}\r\n          onBlur={this.onBlur}\r\n          role=\"button\"\r\n          tabIndex={0}\r\n        >\r\n          {title.label || defaultLabel}\r\n          &nbsp;\r\n          <i\r\n            className=\"fa fa-pencil\"\r\n            style={{ color: this.state.isHovered ? 'black' : 'grey' }}\r\n          />\r\n        </span>\r\n      </Tooltip>\r\n    );\r\n  }\r\n}\r\nAdhocMetricEditPopoverTitle.propTypes = propTypes;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { OptionControlLabel } from 'src/explore/components/controls/OptionControls';\r\nimport { DndItemType } from 'src/explore/components/DndItemType';\r\nimport columnType from './columnType';\r\nimport AdhocMetric from './AdhocMetric';\r\nimport savedMetricType from './savedMetricType';\r\nimport AdhocMetricPopoverTrigger from './AdhocMetricPopoverTrigger';\r\n\r\nconst propTypes = {\r\n  adhocMetric: PropTypes.instanceOf(AdhocMetric),\r\n  onMetricEdit: PropTypes.func.isRequired,\r\n  onRemoveMetric: PropTypes.func,\r\n  columns: PropTypes.arrayOf(columnType),\r\n  savedMetricsOptions: PropTypes.arrayOf(savedMetricType),\r\n  savedMetric: savedMetricType,\r\n  datasourceType: PropTypes.string,\r\n  onMoveLabel: PropTypes.func,\r\n  onDropLabel: PropTypes.func,\r\n  index: PropTypes.number,\r\n};\r\n\r\nclass AdhocMetricOption extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onRemoveMetric = this.onRemoveMetric.bind(this);\r\n  }\r\n\r\n  onRemoveMetric(e) {\r\n    e.stopPropagation();\r\n    this.props.onRemoveMetric();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      adhocMetric,\r\n      onMetricEdit,\r\n      columns,\r\n      savedMetricsOptions,\r\n      savedMetric,\r\n      datasourceType,\r\n      onMoveLabel,\r\n      onDropLabel,\r\n      index,\r\n    } = this.props;\r\n\r\n    return (\r\n      <AdhocMetricPopoverTrigger\r\n        adhocMetric={adhocMetric}\r\n        onMetricEdit={onMetricEdit}\r\n        columns={columns}\r\n        savedMetricsOptions={savedMetricsOptions}\r\n        savedMetric={savedMetric}\r\n        datasourceType={datasourceType}\r\n      >\r\n        <OptionControlLabel\r\n          savedMetric={savedMetric}\r\n          adhocMetric={adhocMetric}\r\n          label={adhocMetric.label}\r\n          onRemove={this.onRemoveMetric}\r\n          onMoveLabel={onMoveLabel}\r\n          onDropLabel={onDropLabel}\r\n          index={index}\r\n          type={DndItemType.AdhocMetricOption}\r\n          withCaret\r\n          isFunction\r\n        />\r\n      </AdhocMetricPopoverTrigger>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AdhocMetricOption;\r\n\r\nAdhocMetricOption.propTypes = propTypes;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { ReactNode } from 'react';\r\nimport { Metric } from '@superset-ui/core';\r\nimport Popover from 'src/components/Popover';\r\nimport AdhocMetricEditPopoverTitle from 'src/explore/components/controls/MetricControl/AdhocMetricEditPopoverTitle';\r\nimport { ExplorePopoverContent } from 'src/explore/components/ExploreContentPopover';\r\nimport AdhocMetricEditPopover, {\r\n  SAVED_TAB_KEY,\r\n} from './AdhocMetricEditPopover';\r\nimport AdhocMetric from './AdhocMetric';\r\nimport { savedMetricType } from './types';\r\n\r\nexport type AdhocMetricPopoverTriggerProps = {\r\n  adhocMetric: AdhocMetric;\r\n  onMetricEdit(newMetric: Metric, oldMetric: Metric): void;\r\n  columns: { column_name: string; type: string }[];\r\n  savedMetricsOptions: savedMetricType[];\r\n  savedMetric: savedMetricType;\r\n  datasourceType: string;\r\n  children: ReactNode;\r\n  createNew?: boolean;\r\n  isControlledComponent?: boolean;\r\n  visible?: boolean;\r\n  togglePopover?: (visible: boolean) => void;\r\n  closePopover?: () => void;\r\n};\r\n\r\nexport type AdhocMetricPopoverTriggerState = {\r\n  popoverVisible: boolean;\r\n  title: { label: string; hasCustomLabel: boolean };\r\n  currentLabel: string;\r\n  labelModified: boolean;\r\n  isTitleEditDisabled: boolean;\r\n};\r\n\r\nclass AdhocMetricPopoverTrigger extends React.PureComponent<\r\n  AdhocMetricPopoverTriggerProps,\r\n  AdhocMetricPopoverTriggerState\r\n> {\r\n  constructor(props: AdhocMetricPopoverTriggerProps) {\r\n    super(props);\r\n    this.onPopoverResize = this.onPopoverResize.bind(this);\r\n    this.onLabelChange = this.onLabelChange.bind(this);\r\n    this.closePopover = this.closePopover.bind(this);\r\n    this.togglePopover = this.togglePopover.bind(this);\r\n    this.getCurrentTab = this.getCurrentTab.bind(this);\r\n    this.getCurrentLabel = this.getCurrentLabel.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    this.state = {\r\n      popoverVisible: false,\r\n      title: {\r\n        label: props.adhocMetric.label,\r\n        hasCustomLabel: props.adhocMetric.hasCustomLabel,\r\n      },\r\n      currentLabel: '',\r\n      labelModified: false,\r\n      isTitleEditDisabled: false,\r\n    };\r\n  }\r\n\r\n  onLabelChange(e: any) {\r\n    const { verbose_name, metric_name } = this.props.savedMetric;\r\n    const defaultMetricLabel = this.props.adhocMetric?.getDefaultLabel();\r\n    const label = e.target.value;\r\n    this.setState(state => ({\r\n      title: {\r\n        label:\r\n          label ||\r\n          state.currentLabel ||\r\n          verbose_name ||\r\n          metric_name ||\r\n          defaultMetricLabel,\r\n        hasCustomLabel: !!label,\r\n      },\r\n      labelModified: true,\r\n    }));\r\n  }\r\n\r\n  onPopoverResize() {\r\n    this.forceUpdate();\r\n  }\r\n\r\n  closePopover() {\r\n    this.togglePopover(false);\r\n    this.setState({\r\n      labelModified: false,\r\n    });\r\n  }\r\n\r\n  togglePopover(visible: boolean) {\r\n    this.setState({\r\n      popoverVisible: visible,\r\n    });\r\n  }\r\n\r\n  getCurrentTab(tab: string) {\r\n    this.setState({\r\n      isTitleEditDisabled: tab === SAVED_TAB_KEY,\r\n    });\r\n  }\r\n\r\n  getCurrentLabel({\r\n    savedMetricLabel,\r\n    adhocMetricLabel,\r\n  }: {\r\n    savedMetricLabel: string;\r\n    adhocMetricLabel: string;\r\n  }) {\r\n    const currentLabel = savedMetricLabel || adhocMetricLabel;\r\n    this.setState({\r\n      currentLabel,\r\n      labelModified: true,\r\n    });\r\n    if (savedMetricLabel || !this.state.title.hasCustomLabel) {\r\n      this.setState({\r\n        title: {\r\n          label: currentLabel,\r\n          hasCustomLabel: false,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  onChange(newMetric: Metric, oldMetric: Metric) {\r\n    this.props.onMetricEdit({ ...newMetric, ...this.state.title }, oldMetric);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      adhocMetric,\r\n      savedMetric,\r\n      columns,\r\n      savedMetricsOptions,\r\n      datasourceType,\r\n      isControlledComponent,\r\n    } = this.props;\r\n    const { verbose_name, metric_name } = savedMetric;\r\n    const { hasCustomLabel, label } = adhocMetric;\r\n    const adhocMetricLabel = hasCustomLabel\r\n      ? label\r\n      : adhocMetric.getDefaultLabel();\r\n    const title = this.state.labelModified\r\n      ? this.state.title\r\n      : {\r\n          label: verbose_name || metric_name || adhocMetricLabel,\r\n          hasCustomLabel,\r\n        };\r\n\r\n    const { visible, togglePopover, closePopover } = isControlledComponent\r\n      ? {\r\n          visible: this.props.visible,\r\n          togglePopover: this.props.togglePopover,\r\n          closePopover: this.props.closePopover,\r\n        }\r\n      : {\r\n          visible: this.state.popoverVisible,\r\n          togglePopover: this.togglePopover,\r\n          closePopover: this.closePopover,\r\n        };\r\n\r\n    const overlayContent = (\r\n      <ExplorePopoverContent>\r\n        <AdhocMetricEditPopover\r\n          adhocMetric={adhocMetric}\r\n          title={title}\r\n          columns={columns}\r\n          savedMetricsOptions={savedMetricsOptions}\r\n          savedMetric={savedMetric}\r\n          datasourceType={datasourceType}\r\n          onResize={this.onPopoverResize}\r\n          onClose={closePopover}\r\n          onChange={this.onChange}\r\n          getCurrentTab={this.getCurrentTab}\r\n          getCurrentLabel={this.getCurrentLabel}\r\n        />\r\n      </ExplorePopoverContent>\r\n    );\r\n\r\n    const popoverTitle = (\r\n      <AdhocMetricEditPopoverTitle\r\n        title={title}\r\n        onChange={this.onLabelChange}\r\n        isEditDisabled={this.state.isTitleEditDisabled}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <Popover\r\n        placement=\"right\"\r\n        trigger=\"click\"\r\n        content={overlayContent}\r\n        defaultVisible={visible}\r\n        visible={visible}\r\n        onVisibleChange={togglePopover}\r\n        title={popoverTitle}\r\n        destroyTooltipOnHide={this.props.createNew}\r\n      >\r\n        {this.props.children}\r\n      </Popover>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AdhocMetricPopoverTrigger;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ColumnTypeLabel } from '@superset-ui/chart-controls';\r\n\r\nimport aggregateOptionType from './aggregateOptionType';\r\n\r\nconst propTypes = {\r\n  aggregate: aggregateOptionType,\r\n  showType: PropTypes.bool,\r\n};\r\n\r\nexport default function AggregateOption({ aggregate, showType }) {\r\n  return (\r\n    <div>\r\n      {showType && <ColumnTypeLabel type=\"aggregate\" />}\r\n      <span className=\"m-r-5 option-label\">{aggregate.aggregate_name}</span>\r\n    </div>\r\n  );\r\n}\r\nAggregateOption.propTypes = propTypes;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport columnType from './columnType';\r\nimport adhocMetricType from './adhocMetricType';\r\nimport { StyledColumnOption } from '../../optionRenderers';\r\n\r\nconst propTypes = {\r\n  option: PropTypes.oneOfType([\r\n    columnType,\r\n    PropTypes.shape({ saved_metric_name: PropTypes.string.isRequired }),\r\n    adhocMetricType,\r\n  ]).isRequired,\r\n};\r\n\r\nexport default function FilterDefinitionOption({ option }) {\r\n  if (option.saved_metric_name) {\r\n    return (\r\n      <StyledColumnOption\r\n        column={{ column_name: option.saved_metric_name, type: 'expression' }}\r\n        showType\r\n      />\r\n    );\r\n  }\r\n  if (option.column_name) {\r\n    return <StyledColumnOption column={option} showType />;\r\n  }\r\n  if (option.label) {\r\n    return (\r\n      <StyledColumnOption\r\n        column={{ column_name: option.label, type: 'expression' }}\r\n        showType\r\n      />\r\n    );\r\n  }\r\n}\r\nFilterDefinitionOption.propTypes = propTypes;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\r\nimport {\r\n  StyledColumnOption,\r\n  StyledMetricOption,\r\n} from 'src/explore/components/optionRenderers';\r\nimport AggregateOption from './AggregateOption';\r\nimport columnType from './columnType';\r\nimport aggregateOptionType from './aggregateOptionType';\r\nimport savedMetricType from './savedMetricType';\r\n\r\nconst propTypes = {\r\n  option: PropTypes.oneOfType([\r\n    columnType,\r\n    savedMetricType,\r\n    aggregateOptionType,\r\n  ]).isRequired,\r\n  addWarningToast: PropTypes.func.isRequired,\r\n};\r\n\r\nfunction MetricDefinitionOption({ option, addWarningToast }) {\r\n  if (option.metric_name) {\r\n    return <StyledMetricOption metric={option} showType />;\r\n  }\r\n  if (option.column_name) {\r\n    return <StyledColumnOption column={option} showType />;\r\n  }\r\n  if (option.aggregate_name) {\r\n    return <AggregateOption aggregate={option} showType />;\r\n  }\r\n  addWarningToast(\r\n    'You must supply either a saved metric, column or aggregate to MetricDefinitionOption',\r\n  );\r\n  return null;\r\n}\r\n\r\nMetricDefinitionOption.propTypes = propTypes;\r\n\r\nexport default withToasts(MetricDefinitionOption);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport columnType from './columnType';\r\nimport AdhocMetricOption from './AdhocMetricOption';\r\nimport AdhocMetric from './AdhocMetric';\r\nimport savedMetricType from './savedMetricType';\r\n\r\nconst propTypes = {\r\n  option: PropTypes.oneOfType([PropTypes.object, PropTypes.string]).isRequired,\r\n  index: PropTypes.number.isRequired,\r\n  onMetricEdit: PropTypes.func,\r\n  onRemoveMetric: PropTypes.func,\r\n  onMoveLabel: PropTypes.func,\r\n  onDropLabel: PropTypes.func,\r\n  columns: PropTypes.arrayOf(columnType),\r\n  savedMetrics: PropTypes.arrayOf(savedMetricType),\r\n  savedMetricsOptions: PropTypes.arrayOf(savedMetricType),\r\n  multi: PropTypes.bool,\r\n  datasourceType: PropTypes.string,\r\n};\r\n\r\nexport default function MetricDefinitionValue({\r\n  option,\r\n  onMetricEdit,\r\n  onRemoveMetric,\r\n  columns,\r\n  savedMetrics,\r\n  savedMetricsOptions,\r\n  datasourceType,\r\n  onMoveLabel,\r\n  onDropLabel,\r\n  index,\r\n}) {\r\n  const getSavedMetricByName = metricName =>\r\n    savedMetrics.find(metric => metric.metric_name === metricName);\r\n\r\n  let savedMetric;\r\n  if (typeof option === 'string') {\r\n    savedMetric = getSavedMetricByName(option);\r\n  } else if (option.metric_name) {\r\n    savedMetric = option;\r\n  }\r\n\r\n  if (option instanceof AdhocMetric || savedMetric) {\r\n    const adhocMetric =\r\n      option instanceof AdhocMetric ? option : new AdhocMetric({ isNew: true });\r\n\r\n    const metricOptionProps = {\r\n      onMetricEdit,\r\n      onRemoveMetric,\r\n      columns,\r\n      savedMetricsOptions,\r\n      datasourceType,\r\n      adhocMetric,\r\n      onMoveLabel,\r\n      onDropLabel,\r\n      index,\r\n      savedMetric: savedMetric ?? {},\r\n    };\r\n\r\n    return <AdhocMetricOption {...metricOptionProps} />;\r\n  }\r\n  return null;\r\n}\r\nMetricDefinitionValue.propTypes = propTypes;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { t, withTheme } from '@superset-ui/core';\r\nimport { isEqual } from 'lodash';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\nimport {\r\n  AGGREGATES_OPTIONS,\r\n  sqlaAutoGeneratedMetricNameRegex,\r\n  druidAutoGeneratedMetricRegex,\r\n} from 'src/explore/constants';\r\nimport Icons from 'src/components/Icons';\r\nimport {\r\n  AddIconButton,\r\n  AddControlLabel,\r\n  HeaderContainer,\r\n  LabelsContainer,\r\n} from 'src/explore/components/controls/OptionControls';\r\nimport columnType from './columnType';\r\nimport MetricDefinitionOption from './MetricDefinitionOption';\r\nimport MetricDefinitionValue from './MetricDefinitionValue';\r\nimport AdhocMetric from './AdhocMetric';\r\nimport savedMetricType from './savedMetricType';\r\nimport adhocMetricType from './adhocMetricType';\r\nimport AdhocMetricPopoverTrigger from './AdhocMetricPopoverTrigger';\r\n\r\nconst propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, adhocMetricType])),\r\n    PropTypes.oneOfType([PropTypes.string, adhocMetricType]),\r\n  ]),\r\n  columns: PropTypes.arrayOf(columnType),\r\n  savedMetrics: PropTypes.arrayOf(savedMetricType),\r\n  isLoading: PropTypes.bool,\r\n  multi: PropTypes.bool,\r\n  clearable: PropTypes.bool,\r\n  datasourceType: PropTypes.string,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  clearable: true,\r\n  savedMetrics: [],\r\n  columns: [],\r\n};\r\n\r\nfunction getOptionsForSavedMetrics(\r\n  savedMetrics,\r\n  currentMetricValues,\r\n  currentMetric,\r\n) {\r\n  return (\r\n    savedMetrics?.filter(savedMetric =>\r\n      Array.isArray(currentMetricValues)\r\n        ? !currentMetricValues.includes(savedMetric.metric_name) ||\r\n          savedMetric.metric_name === currentMetric\r\n        : savedMetric,\r\n    ) ?? []\r\n  );\r\n}\r\n\r\nfunction isDictionaryForAdhocMetric(value) {\r\n  return value && !(value instanceof AdhocMetric) && value.expressionType;\r\n}\r\n\r\nfunction columnsContainAllMetrics(value, nextProps) {\r\n  const columnNames = new Set(\r\n    [...(nextProps.columns || []), ...(nextProps.savedMetrics || [])]\r\n      // eslint-disable-next-line camelcase\r\n      .map(({ column_name, metric_name }) => column_name || metric_name),\r\n  );\r\n\r\n  return (\r\n    (Array.isArray(value) ? value : [value])\r\n      .filter(metric => metric)\r\n      // find column names\r\n      .map(metric =>\r\n        metric.column\r\n          ? metric.column.column_name\r\n          : metric.column_name || metric,\r\n      )\r\n      .filter(name => name && typeof name === 'string')\r\n      .every(name => columnNames.has(name))\r\n  );\r\n}\r\n\r\n// adhoc metrics are stored as dictionaries in URL params. We convert them back into the\r\n// AdhocMetric class for typechecking, consistency and instance method access.\r\nfunction coerceAdhocMetrics(value) {\r\n  if (!value) {\r\n    return [];\r\n  }\r\n  if (!Array.isArray(value)) {\r\n    if (isDictionaryForAdhocMetric(value)) {\r\n      return [new AdhocMetric(value)];\r\n    }\r\n    return [value];\r\n  }\r\n  return value.map(val => {\r\n    if (isDictionaryForAdhocMetric(val)) {\r\n      return new AdhocMetric(val);\r\n    }\r\n    return val;\r\n  });\r\n}\r\n\r\nclass MetricsControl extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onMetricEdit = this.onMetricEdit.bind(this);\r\n    this.onNewMetric = this.onNewMetric.bind(this);\r\n    this.onRemoveMetric = this.onRemoveMetric.bind(this);\r\n    this.moveLabel = this.moveLabel.bind(this);\r\n    this.checkIfAggregateInInput = this.checkIfAggregateInInput.bind(this);\r\n    this.optionsForSelect = this.optionsForSelect.bind(this);\r\n    this.selectFilterOption = this.selectFilterOption.bind(this);\r\n    this.isAutoGeneratedMetric = this.isAutoGeneratedMetric.bind(this);\r\n    this.optionRenderer = option => <MetricDefinitionOption option={option} />;\r\n    this.valueRenderer = (option, index) => (\r\n      <MetricDefinitionValue\r\n        key={index}\r\n        index={index}\r\n        option={option}\r\n        onMetricEdit={this.onMetricEdit}\r\n        onRemoveMetric={() => this.onRemoveMetric(index)}\r\n        columns={this.props.columns}\r\n        datasource={this.props.datasource}\r\n        savedMetrics={this.props.savedMetrics}\r\n        savedMetricsOptions={getOptionsForSavedMetrics(\r\n          this.props.savedMetrics,\r\n          this.props.value,\r\n          this.props.value?.[index],\r\n        )}\r\n        datasourceType={this.props.datasourceType}\r\n        onMoveLabel={this.moveLabel}\r\n        onDropLabel={() => this.props.onChange(this.state.value)}\r\n      />\r\n    );\r\n    this.select = null;\r\n    this.selectRef = ref => {\r\n      if (ref) {\r\n        this.select = ref.select;\r\n      } else {\r\n        this.select = null;\r\n      }\r\n    };\r\n    this.state = {\r\n      aggregateInInput: null,\r\n      options: this.optionsForSelect(this.props),\r\n      value: coerceAdhocMetrics(this.props.value),\r\n    };\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    const { value } = this.props;\r\n    if (\r\n      !isEqual(this.props.columns, nextProps.columns) ||\r\n      !isEqual(this.props.savedMetrics, nextProps.savedMetrics)\r\n    ) {\r\n      this.setState({ options: this.optionsForSelect(nextProps) });\r\n\r\n      // Remove all metrics if selected value no longer a valid column\r\n      // in the dataset. Must use `nextProps` here because Redux reducers may\r\n      // have already updated the value for this control.\r\n      if (!columnsContainAllMetrics(nextProps.value, nextProps)) {\r\n        this.props.onChange([]);\r\n      }\r\n    }\r\n    if (value !== nextProps.value) {\r\n      this.setState({ value: coerceAdhocMetrics(nextProps.value) });\r\n    }\r\n  }\r\n\r\n  onNewMetric(newMetric) {\r\n    this.setState(\r\n      prevState => ({\r\n        ...prevState,\r\n        value: [...prevState.value, newMetric],\r\n      }),\r\n      () => {\r\n        this.onChange(this.state.value);\r\n      },\r\n    );\r\n  }\r\n\r\n  onMetricEdit(changedMetric, oldMetric) {\r\n    this.setState(\r\n      prevState => ({\r\n        value: prevState.value.map(value => {\r\n          if (\r\n            // compare saved metrics\r\n            value === oldMetric.metric_name ||\r\n            // compare adhoc metrics\r\n            typeof value.optionName !== 'undefined'\r\n              ? value.optionName === oldMetric.optionName\r\n              : false\r\n          ) {\r\n            return changedMetric;\r\n          }\r\n          return value;\r\n        }),\r\n      }),\r\n      () => {\r\n        this.onChange(this.state.value);\r\n      },\r\n    );\r\n  }\r\n\r\n  onRemoveMetric(index) {\r\n    if (!Array.isArray(this.state.value)) {\r\n      return;\r\n    }\r\n    const valuesCopy = [...this.state.value];\r\n    valuesCopy.splice(index, 1);\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      value: valuesCopy,\r\n    }));\r\n    this.props.onChange(valuesCopy);\r\n  }\r\n\r\n  onChange(opts) {\r\n    // if clear out options\r\n    if (opts === null) {\r\n      this.props.onChange(null);\r\n      return;\r\n    }\r\n\r\n    let transformedOpts;\r\n    if (Array.isArray(opts)) {\r\n      transformedOpts = opts;\r\n    } else {\r\n      transformedOpts = opts ? [opts] : [];\r\n    }\r\n    const optionValues = transformedOpts\r\n      .map(option => {\r\n        // pre-defined metric\r\n        if (option.metric_name) {\r\n          return option.metric_name;\r\n        }\r\n        return option;\r\n      })\r\n      .filter(option => option);\r\n    this.props.onChange(this.props.multi ? optionValues : optionValues[0]);\r\n  }\r\n\r\n  moveLabel(dragIndex, hoverIndex) {\r\n    const { value } = this.state;\r\n\r\n    const newValues = [...value];\r\n    [newValues[hoverIndex], newValues[dragIndex]] = [\r\n      newValues[dragIndex],\r\n      newValues[hoverIndex],\r\n    ];\r\n    this.setState({ value: newValues });\r\n  }\r\n\r\n  isAddNewMetricDisabled() {\r\n    return !this.props.multi && this.state.value.length > 0;\r\n  }\r\n\r\n  addNewMetricPopoverTrigger(trigger) {\r\n    if (this.isAddNewMetricDisabled()) {\r\n      return trigger;\r\n    }\r\n    return (\r\n      <AdhocMetricPopoverTrigger\r\n        adhocMetric={new AdhocMetric({ isNew: true })}\r\n        onMetricEdit={this.onNewMetric}\r\n        columns={this.props.columns}\r\n        savedMetricsOptions={getOptionsForSavedMetrics(\r\n          this.props.savedMetrics,\r\n          this.props.value,\r\n          null,\r\n        )}\r\n        datasource={this.props.datasource}\r\n        savedMetric={{ metric_name: '', expression: '' }}\r\n        datasourceType={this.props.datasourceType}\r\n        createNew\r\n      >\r\n        {trigger}\r\n      </AdhocMetricPopoverTrigger>\r\n    );\r\n  }\r\n\r\n  checkIfAggregateInInput(input) {\r\n    const lowercaseInput = input.toLowerCase();\r\n    const aggregateInInput =\r\n      AGGREGATES_OPTIONS.find(x =>\r\n        lowercaseInput.startsWith(`${x.toLowerCase()}(`),\r\n      ) || null;\r\n    this.clearedAggregateInInput = this.state.aggregateInInput;\r\n    this.setState({ aggregateInInput });\r\n  }\r\n\r\n  optionsForSelect(props) {\r\n    const { columns, savedMetrics } = props;\r\n    const aggregates =\r\n      columns && columns.length\r\n        ? AGGREGATES_OPTIONS.map(aggregate => ({\r\n            aggregate_name: aggregate,\r\n          }))\r\n        : [];\r\n    const options = [\r\n      ...(columns || []),\r\n      ...aggregates,\r\n      ...(savedMetrics || []),\r\n    ];\r\n\r\n    return options.reduce((results, option) => {\r\n      if (option.metric_name) {\r\n        results.push({ ...option, optionName: option.metric_name });\r\n      } else if (option.column_name) {\r\n        results.push({ ...option, optionName: `_col_${option.column_name}` });\r\n      } else if (option.aggregate_name) {\r\n        results.push({\r\n          ...option,\r\n          optionName: `_aggregate_${option.aggregate_name}`,\r\n        });\r\n      }\r\n      return results;\r\n    }, []);\r\n  }\r\n\r\n  isAutoGeneratedMetric(savedMetric) {\r\n    if (this.props.datasourceType === 'druid') {\r\n      return druidAutoGeneratedMetricRegex.test(savedMetric.verbose_name);\r\n    }\r\n    return sqlaAutoGeneratedMetricNameRegex.test(savedMetric.metric_name);\r\n  }\r\n\r\n  selectFilterOption({ data: option }, filterValue) {\r\n    if (this.state.aggregateInInput) {\r\n      let endIndex = filterValue.length;\r\n      if (filterValue.endsWith(')')) {\r\n        endIndex = filterValue.length - 1;\r\n      }\r\n      const valueAfterAggregate = filterValue.substring(\r\n        filterValue.indexOf('(') + 1,\r\n        endIndex,\r\n      );\r\n      return (\r\n        option.column_name &&\r\n        option.column_name.toLowerCase().indexOf(valueAfterAggregate) >= 0\r\n      );\r\n    }\r\n    return (\r\n      option.optionName &&\r\n      (!option.metric_name ||\r\n        !this.isAutoGeneratedMetric(option) ||\r\n        option.verbose_name) &&\r\n      (option.optionName.toLowerCase().indexOf(filterValue) >= 0 ||\r\n        (option.verbose_name &&\r\n          option.verbose_name.toLowerCase().indexOf(filterValue) >= 0))\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { theme } = this.props;\r\n    return (\r\n      <div className=\"metrics-select\">\r\n        <HeaderContainer>\r\n          <ControlHeader {...this.props} />\r\n          {this.addNewMetricPopoverTrigger(\r\n            <AddIconButton\r\n              disabled={this.isAddNewMetricDisabled()}\r\n              data-test=\"add-metric-button\"\r\n            >\r\n              <Icons.PlusLarge\r\n                iconSize=\"s\"\r\n                iconColor={theme.colors.grayscale.light5}\r\n              />\r\n            </AddIconButton>,\r\n          )}\r\n        </HeaderContainer>\r\n        <LabelsContainer>\r\n          {this.state.value.length > 0\r\n            ? this.state.value.map((value, index) =>\r\n                this.valueRenderer(value, index),\r\n              )\r\n            : this.addNewMetricPopoverTrigger(\r\n                <AddControlLabel>\r\n                  <Icons.PlusSmall iconColor={theme.colors.grayscale.light1} />\r\n                  {t('Add metric')}\r\n                </AddControlLabel>,\r\n              )}\r\n        </LabelsContainer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMetricsControl.propTypes = propTypes;\r\nMetricsControl.defaultProps = defaultProps;\r\n\r\nexport default withTheme(MetricsControl);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { AGGREGATES } from 'src/explore/constants';\r\nimport columnType from './columnType';\r\nimport { EXPRESSION_TYPES } from './AdhocMetric';\r\n\r\nexport default PropTypes.oneOfType([\r\n  PropTypes.shape({\r\n    expressionType: PropTypes.oneOf([EXPRESSION_TYPES.SIMPLE]).isRequired,\r\n    column: columnType.isRequired,\r\n    aggregate: PropTypes.oneOf(Object.keys(AGGREGATES)).isRequired,\r\n    label: PropTypes.string.isRequired,\r\n  }),\r\n  PropTypes.shape({\r\n    expressionType: PropTypes.oneOf([EXPRESSION_TYPES.SQL]).isRequired,\r\n    sqlExpression: PropTypes.string.isRequired,\r\n    label: PropTypes.string.isRequired,\r\n  }),\r\n]);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.shape({\r\n  aggregate_name: PropTypes.string.isRequired,\r\n});\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.shape({\r\n  column_name: PropTypes.string.isRequired,\r\n  type: PropTypes.string,\r\n});\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.shape({\r\n  metric_name: PropTypes.string.isRequired,\r\n  verbose_name: PropTypes.string,\r\n  expression: PropTypes.string.isRequired,\r\n});\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useRef } from 'react';\r\nimport { useDrag, useDrop, DropTargetMonitor } from 'react-dnd';\r\nimport { styled, t, useTheme } from '@superset-ui/core';\r\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport Icons from 'src/components/Icons';\r\nimport { savedMetricType } from 'src/explore/components/controls/MetricControl/types';\r\nimport AdhocMetric from 'src/explore/components/controls/MetricControl/AdhocMetric';\r\nimport { StyledMetricOption } from '../../optionRenderers';\r\n\r\nexport const DragContainer = styled.div`\r\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\r\n  :last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nexport const OptionControlContainer = styled.div<{\r\n  withCaret?: boolean;\r\n}>`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n  height: ${({ theme }) => theme.gridUnit * 6}px;\r\n  background-color: ${({ theme }) => theme.colors.grayscale.light3};\r\n  border-radius: 3px;\r\n  cursor: ${({ withCaret }) => (withCaret ? 'pointer' : 'default')};\r\n`;\r\n\r\nexport const Label = styled.div`\r\n  ${({ theme }) => `\r\n    display: flex;\r\n    max-width: 100%;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    align-items: center;\r\n    white-space: nowrap;\r\n    padding-left: ${theme.gridUnit}px;\r\n    svg {\r\n      margin-right: ${theme.gridUnit}px;\r\n      margin-left: ${theme.gridUnit}px;\r\n    }\r\n    .type-label {\r\n      margin-right: ${theme.gridUnit * 2}px;\r\n      margin-left: ${theme.gridUnit}px;\r\n      font-weight: ${theme.typography.weights.normal};\r\n      width: auto;\r\n    }\r\n    .option-label {\r\n      display: inline;\r\n    }\r\n  `}\r\n`;\r\n\r\nexport const CaretContainer = styled.div`\r\n  height: 100%;\r\n  border-left: solid 1px ${({ theme }) => theme.colors.grayscale.dark2}0C;\r\n  margin-left: auto;\r\n`;\r\n\r\nexport const CloseContainer = styled.div`\r\n  height: 100%;\r\n  width: ${({ theme }) => theme.gridUnit * 6}px;\r\n  border-right: solid 1px ${({ theme }) => theme.colors.grayscale.dark2}0C;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst StyledInfoTooltipWithTrigger = styled(InfoTooltipWithTrigger)`\r\n  margin: 0 ${({ theme }) => theme.gridUnit}px;\r\n`;\r\n\r\nexport const HeaderContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const LabelsContainer = styled.div`\r\n  padding: ${({ theme }) => theme.gridUnit}px;\r\n  border: solid 1px ${({ theme }) => theme.colors.grayscale.light2};\r\n  border-radius: ${({ theme }) => theme.gridUnit}px;\r\n`;\r\n\r\nexport const DndLabelsContainer = styled.div<{\r\n  canDrop?: boolean;\r\n  isOver?: boolean;\r\n}>`\r\n  padding: ${({ theme }) => theme.gridUnit}px;\r\n  border: ${({ canDrop, isOver, theme }) => {\r\n    if (canDrop) {\r\n      return `dashed 1px ${theme.colors.info.dark1}`;\r\n    }\r\n    if (isOver && !canDrop) {\r\n      return `dashed 1px ${theme.colors.error.dark1}`;\r\n    }\r\n    return `solid 1px ${theme.colors.grayscale.light2}`;\r\n  }};\r\n  border-radius: ${({ theme }) => theme.gridUnit}px;\r\n`;\r\n\r\nexport const AddControlLabel = styled.div<{\r\n  cancelHover?: boolean;\r\n}>`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: ${({ theme }) => theme.gridUnit * 6}px;\r\n  padding-left: ${({ theme }) => theme.gridUnit}px;\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n  color: ${({ theme }) => theme.colors.grayscale.light1};\r\n  border: dashed 1px ${({ theme }) => theme.colors.grayscale.light2};\r\n  border-radius: ${({ theme }) => theme.gridUnit}px;\r\n  cursor: ${({ cancelHover }) => (cancelHover ? 'inherit' : 'pointer')};\r\n\r\n  :hover {\r\n    background-color: ${({ cancelHover, theme }) =>\r\n      cancelHover ? 'inherit' : theme.colors.grayscale.light4};\r\n  }\r\n\r\n  :active {\r\n    background-color: ${({ cancelHover, theme }) =>\r\n      cancelHover ? 'inherit' : theme.colors.grayscale.light3};\r\n  }\r\n`;\r\n\r\nexport const AddIconButton = styled.button`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: ${({ theme }) => theme.gridUnit * 4}px;\r\n  width: ${({ theme }) => theme.gridUnit * 4}px;\r\n  padding: 0;\r\n  background-color: ${({ theme }) => theme.colors.primary.dark1};\r\n  border: none;\r\n  border-radius: 2px;\r\n\r\n  :disabled {\r\n    cursor: not-allowed;\r\n    background-color: ${({ theme }) => theme.colors.grayscale.light1};\r\n  }\r\n`;\r\n\r\ninterface DragItem {\r\n  index: number;\r\n  type: string;\r\n}\r\n\r\nexport const OptionControlLabel = ({\r\n  label,\r\n  savedMetric,\r\n  adhocMetric,\r\n  onRemove,\r\n  onMoveLabel,\r\n  onDropLabel,\r\n  withCaret,\r\n  isFunction,\r\n  type,\r\n  index,\r\n  isExtra,\r\n  tooltipTitle,\r\n  ...props\r\n}: {\r\n  label: string | React.ReactNode;\r\n  savedMetric?: savedMetricType;\r\n  adhocMetric?: AdhocMetric;\r\n  onRemove: () => void;\r\n  onMoveLabel: (dragIndex: number, hoverIndex: number) => void;\r\n  onDropLabel: () => void;\r\n  withCaret?: boolean;\r\n  isFunction?: boolean;\r\n  isDraggable?: boolean;\r\n  type: string;\r\n  index: number;\r\n  isExtra?: boolean;\r\n  tooltipTitle: string;\r\n}) => {\r\n  const theme = useTheme();\r\n  const ref = useRef<HTMLDivElement>(null);\r\n  const [, drop] = useDrop({\r\n    accept: type,\r\n    drop() {\r\n      onDropLabel?.();\r\n    },\r\n    hover(item: DragItem, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index;\r\n      const hoverIndex = index;\r\n      // Don't replace items with themselves\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      // Determine rectangle on screen\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      // Get vertical middle\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      // Determine mouse position\r\n      const clientOffset = monitor.getClientOffset();\r\n      // Get pixels to the top\r\n      const hoverClientY = clientOffset?.y\r\n        ? clientOffset?.y - hoverBoundingRect.top\r\n        : 0;\r\n      // Only perform the move when the mouse has crossed half of the items height\r\n      // When dragging downwards, only move when the cursor is below 50%\r\n      // When dragging upwards, only move when the cursor is above 50%\r\n      // Dragging downwards\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      // Dragging upwards\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n      // Time to actually perform the action\r\n      onMoveLabel?.(dragIndex, hoverIndex);\r\n      // Note: we're mutating the monitor item here!\r\n      // Generally it's better to avoid mutations,\r\n      // but it's good here for the sake of performance\r\n      // to avoid expensive index searches.\r\n      // eslint-disable-next-line no-param-reassign\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n  const [, drag] = useDrag({\r\n    item: {\r\n      type,\r\n      index,\r\n      value: savedMetric?.metric_name ? savedMetric : adhocMetric,\r\n    },\r\n    collect: monitor => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const getLabelContent = () => {\r\n    if (savedMetric?.metric_name) {\r\n      return <StyledMetricOption metric={savedMetric} />;\r\n    }\r\n    return <Tooltip title={tooltipTitle}>{label}</Tooltip>;\r\n  };\r\n\r\n  const getOptionControlContent = () => (\r\n    <OptionControlContainer\r\n      withCaret={withCaret}\r\n      data-test=\"option-label\"\r\n      {...props}\r\n    >\r\n      <CloseContainer\r\n        role=\"button\"\r\n        data-test=\"remove-control-button\"\r\n        onClick={onRemove}\r\n      >\r\n        <Icons.XSmall iconColor={theme.colors.grayscale.light1} />\r\n      </CloseContainer>\r\n      <Label data-test=\"control-label\">\r\n        {isFunction && <Icons.FunctionX viewBox=\"0 0 16 11\" iconSize=\"l\" />}\r\n        {getLabelContent()}\r\n      </Label>\r\n      {isExtra && (\r\n        <StyledInfoTooltipWithTrigger\r\n          icon=\"exclamation-triangle\"\r\n          placement=\"top\"\r\n          bsStyle=\"warning\"\r\n          tooltip={t(`\r\n                This filter was inherited from the dashboard's context.\r\n                It won't be saved when saving the chart.\r\n              `)}\r\n        />\r\n      )}\r\n      {withCaret && (\r\n        <CaretContainer>\r\n          <Icons.CaretRight iconColor={theme.colors.grayscale.light1} />\r\n        </CaretContainer>\r\n      )}\r\n    </OptionControlContainer>\r\n  );\r\n\r\n  drag(drop(ref));\r\n  return <DragContainer ref={ref}>{getOptionControlContent()}</DragContainer>;\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { t } from '@superset-ui/core';\r\n\r\nimport Select from 'src/components/AsyncSelect';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\r\n\r\nconst propTypes = {\r\n  dataEndpoint: PropTypes.string.isRequired,\r\n  multi: PropTypes.bool,\r\n  mutator: PropTypes.func,\r\n  onAsyncErrorMessage: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  placeholder: PropTypes.string,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.number,\r\n    PropTypes.arrayOf(PropTypes.string),\r\n    PropTypes.arrayOf(PropTypes.number),\r\n  ]),\r\n  addDangerToast: PropTypes.func.isRequired,\r\n};\r\n\r\nconst defaultProps = {\r\n  multi: true,\r\n  onAsyncErrorMessage: t('Error while fetching data'),\r\n  onChange: () => {},\r\n  placeholder: t('Select ...'),\r\n};\r\n\r\nconst SelectAsyncControl = props => {\r\n  const {\r\n    value,\r\n    onChange,\r\n    dataEndpoint,\r\n    multi,\r\n    mutator,\r\n    placeholder,\r\n    onAsyncErrorMessage,\r\n  } = props;\r\n  const onSelectionChange = options => {\r\n    let val;\r\n    if (multi) {\r\n      val = options?.map(option => option.value) ?? null;\r\n    } else {\r\n      val = options?.value ?? null;\r\n    }\r\n    onChange(val);\r\n  };\r\n\r\n  return (\r\n    <div data-test=\"SelectAsyncControl\">\r\n      <ControlHeader {...props} />\r\n      <Select\r\n        dataEndpoint={dataEndpoint}\r\n        onChange={onSelectionChange}\r\n        onAsyncError={errorMsg =>\r\n          props.addDangerToast(`${onAsyncErrorMessage}: ${errorMsg}`)\r\n        }\r\n        mutator={mutator}\r\n        multi={multi}\r\n        value={value}\r\n        placeholder={placeholder}\r\n        valueRenderer={v => <div>{v.label}</div>}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nSelectAsyncControl.propTypes = propTypes;\r\nSelectAsyncControl.defaultProps = defaultProps;\r\n\r\nexport default withToasts(SelectAsyncControl);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { t, css } from '@superset-ui/core';\r\nimport { Select, CreatableSelect, OnPasteSelect } from 'src/components/Select';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\n\r\nconst propTypes = {\r\n  autoFocus: PropTypes.bool,\r\n  choices: PropTypes.array,\r\n  clearable: PropTypes.bool,\r\n  description: PropTypes.string,\r\n  disabled: PropTypes.bool,\r\n  freeForm: PropTypes.bool,\r\n  isLoading: PropTypes.bool,\r\n  label: PropTypes.string,\r\n  multi: PropTypes.bool,\r\n  isMulti: PropTypes.bool,\r\n  allowAll: PropTypes.bool,\r\n  name: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func,\r\n  onFocus: PropTypes.func,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.number,\r\n    PropTypes.array,\r\n  ]),\r\n  showHeader: PropTypes.bool,\r\n  optionRenderer: PropTypes.func,\r\n  valueRenderer: PropTypes.func,\r\n  valueKey: PropTypes.string,\r\n  options: PropTypes.array,\r\n  placeholder: PropTypes.string,\r\n  noResultsText: PropTypes.string,\r\n  selectRef: PropTypes.func,\r\n  filterOption: PropTypes.func,\r\n  promptTextCreator: PropTypes.func,\r\n  commaChoosesOption: PropTypes.bool,\r\n  menuPortalTarget: PropTypes.element,\r\n  menuPosition: PropTypes.string,\r\n  menuPlacement: PropTypes.string,\r\n  forceOverflow: PropTypes.bool,\r\n};\r\n\r\nconst defaultProps = {\r\n  autoFocus: false,\r\n  choices: [],\r\n  clearable: true,\r\n  description: null,\r\n  disabled: false,\r\n  freeForm: false,\r\n  isLoading: false,\r\n  label: null,\r\n  multi: false,\r\n  onChange: () => {},\r\n  onFocus: () => {},\r\n  showHeader: true,\r\n  valueKey: 'value',\r\n  noResultsText: t('No results found'),\r\n  promptTextCreator: label => `Create Option ${label}`,\r\n  commaChoosesOption: true,\r\n  allowAll: false,\r\n};\r\n\r\nexport default class SelectControl extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      options: this.getOptions(props),\r\n      value: this.props.value,\r\n    };\r\n    this.onChange = this.onChange.bind(this);\r\n    this.createMetaSelectAllOption = this.createMetaSelectAllOption.bind(this);\r\n    this.select = null; // pointer to the react-select instance\r\n    this.getSelectRef = this.getSelectRef.bind(this);\r\n    this.handleKeyDownForCreate = this.handleKeyDownForCreate.bind(this);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.choices !== this.props.choices ||\r\n      nextProps.options !== this.props.options\r\n    ) {\r\n      const options = this.getOptions(nextProps);\r\n      this.setState({ options });\r\n    }\r\n  }\r\n\r\n  // Beware: This is acting like an on-click instead of an on-change\r\n  // (firing every time user chooses vs firing only if a new option is chosen).\r\n  onChange(opt, actionMeta) {\r\n    let optionValue = this.props.multi ? [] : null;\r\n    if (opt) {\r\n      if (this.props.multi) {\r\n        opt.forEach(o => {\r\n          // select all options\r\n          if (o.meta === true) {\r\n            optionValue = this.getOptions(this.props)\r\n              .filter(x => !x.meta)\r\n              .map(x => x[this.props.valueKey]);\r\n            return;\r\n          }\r\n          optionValue.push(o[this.props.valueKey] || o);\r\n        });\r\n      } else if (opt.meta === true) {\r\n        return;\r\n      } else {\r\n        optionValue = opt[this.props.valueKey];\r\n      }\r\n    }\r\n    // will eventually call `exploreReducer`: SET_FIELD_VALUE\r\n    this.props.onChange(optionValue, [], actionMeta);\r\n  }\r\n\r\n  getSelectRef(instance) {\r\n    this.select = instance;\r\n    if (this.props.selectRef) {\r\n      this.props.selectRef(instance);\r\n    }\r\n  }\r\n\r\n  getOptions(props) {\r\n    let options = [];\r\n    if (props.options) {\r\n      options = props.options.map(x => x);\r\n    } else if (props.choices) {\r\n      // Accepts different formats of input\r\n      options = props.choices.map(c => {\r\n        if (Array.isArray(c)) {\r\n          const [value, label] = c.length > 1 ? c : [c[0], c[0]];\r\n          return { label, [props.valueKey]: value };\r\n        }\r\n        if (Object.is(c)) {\r\n          return c;\r\n        }\r\n        return { label: c, [props.valueKey]: c };\r\n      });\r\n    }\r\n    // For FreeFormSelect, insert newly created values into options\r\n    if (props.freeForm && props.value) {\r\n      const existingOptionValues = new Set(options.map(c => c[props.valueKey]));\r\n      const selectedValues = Array.isArray(props.value)\r\n        ? props.value\r\n        : [props.value];\r\n      selectedValues.forEach(v => {\r\n        if (!existingOptionValues.has(v)) {\r\n          // place the newly created options at the top\r\n          options.unshift({ label: v, [props.valueKey]: v });\r\n        }\r\n      });\r\n    }\r\n    if (props.allowAll === true && props.multi === true) {\r\n      if (!this.optionsIncludesSelectAll(options)) {\r\n        options.unshift(this.createMetaSelectAllOption());\r\n      }\r\n    } else {\r\n      options = options.filter(o => !this.isMetaSelectAllOption(o));\r\n    }\r\n    return options;\r\n  }\r\n\r\n  handleKeyDownForCreate(event) {\r\n    const { key } = event;\r\n    if (key === 'Tab' || (this.props.commaChoosesOption && key === ',')) {\r\n      // simulate an Enter event\r\n      if (this.select) {\r\n        this.select.onKeyDown({ ...event, key: 'Enter' });\r\n      }\r\n    }\r\n  }\r\n\r\n  isMetaSelectAllOption(o) {\r\n    return o.meta && o.meta === true && o.label === 'Select all';\r\n  }\r\n\r\n  optionsIncludesSelectAll(o) {\r\n    return o.findIndex(o => this.isMetaSelectAllOption(o)) >= 0;\r\n  }\r\n\r\n  optionsRemaining() {\r\n    const { options } = this.state;\r\n    const { value } = this.props;\r\n    // if select is multi/value is array, we show the options not selected\r\n    let remainingOptions = Array.isArray(value)\r\n      ? options.length - value.length\r\n      : options.length;\r\n    if (this.optionsIncludesSelectAll(options)) {\r\n      remainingOptions -= 1;\r\n    }\r\n    return remainingOptions < 0 ? 0 : remainingOptions;\r\n  }\r\n\r\n  createMetaSelectAllOption() {\r\n    const option = { label: 'Select all', meta: true };\r\n    option[this.props.valueKey] = 'Select all';\r\n    return option;\r\n  }\r\n\r\n  render() {\r\n    //  Tab, comma or Enter will trigger a new option created for FreeFormSelect\r\n    const {\r\n      autoFocus,\r\n      clearable,\r\n      disabled,\r\n      filterOption,\r\n      isLoading,\r\n      label,\r\n      menuPlacement,\r\n      name,\r\n      noResultsText,\r\n      onFocus,\r\n      optionRenderer,\r\n      promptTextCreator,\r\n      value,\r\n      valueKey,\r\n      valueRenderer,\r\n      forceOverflow,\r\n      menuPortalTarget,\r\n      menuPosition,\r\n    } = this.props;\r\n\r\n    const optionsRemaining = this.optionsRemaining();\r\n    const optionRemaingText = optionsRemaining\r\n      ? t('%s option(s)', optionsRemaining)\r\n      : '';\r\n    const placeholder = this.props.placeholder || optionRemaingText;\r\n    const isMulti = this.props.isMulti || this.props.multi;\r\n\r\n    let assistiveText;\r\n    if (\r\n      isMulti &&\r\n      optionsRemaining &&\r\n      Array.isArray(this.state.value) &&\r\n      Array.isArray(value) &&\r\n      !!value.length\r\n    ) {\r\n      assistiveText = optionRemaingText;\r\n    }\r\n\r\n    const selectProps = {\r\n      autoFocus,\r\n      'aria-label': label,\r\n      clearable,\r\n      disabled,\r\n      filterOption,\r\n      ignoreAccents: false,\r\n      isLoading,\r\n      isMulti,\r\n      labelKey: 'label',\r\n      menuPlacement,\r\n      forceOverflow,\r\n      menuPortalTarget,\r\n      menuPosition,\r\n      name: `select-${name}`,\r\n      noResultsText,\r\n      onChange: this.onChange,\r\n      onFocus,\r\n      optionRenderer,\r\n      value,\r\n      options: this.state.options,\r\n      placeholder,\r\n      assistiveText,\r\n      promptTextCreator,\r\n      selectRef: this.getSelectRef,\r\n      valueKey,\r\n      valueRenderer,\r\n    };\r\n\r\n    let SelectComponent;\r\n    if (this.props.freeForm) {\r\n      SelectComponent = CreatableSelect;\r\n      // Don't create functions in `render` because React relies on shallow\r\n      // compare to decide weathere to rerender child components.\r\n      selectProps.onKeyDown = this.handleKeyDownForCreate;\r\n    } else {\r\n      SelectComponent = Select;\r\n    }\r\n\r\n    return (\r\n      <div\r\n        css={theme => css`\r\n          .type-label {\r\n            margin-right: ${theme.gridUnit * 2}px;\r\n          }\r\n        `}\r\n      >\r\n        {this.props.showHeader && <ControlHeader {...this.props} />}\r\n        {isMulti ? (\r\n          <OnPasteSelect {...selectProps} selectWrap={SelectComponent} />\r\n        ) : (\r\n          <SelectComponent {...selectProps} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSelectControl.propTypes = propTypes;\r\nSelectControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Slider from 'src/components/Slider';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n};\r\n\r\nexport default function SliderControl(props) {\r\n  return (\r\n    <>\r\n      <ControlHeader {...props} />\r\n      <Slider {...props} defaultValue={props.default} />\r\n    </>\r\n  );\r\n}\r\n\r\nSliderControl.propTypes = propTypes;\r\nSliderControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Row, Col } from 'src/common/components';\r\nimport { t } from '@superset-ui/core';\r\n\r\nimport Label from 'src/components/Label';\r\nimport Popover from 'src/components/Popover';\r\nimport PopoverSection from 'src/components/PopoverSection';\r\nimport Checkbox from 'src/components/Checkbox';\r\nimport ControlHeader from '../ControlHeader';\r\nimport SelectControl from './SelectControl';\r\n\r\nconst spatialTypes = {\r\n  latlong: 'latlong',\r\n  delimited: 'delimited',\r\n  geohash: 'geohash',\r\n};\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.object,\r\n  animation: PropTypes.bool,\r\n  choices: PropTypes.array,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  animation: true,\r\n  choices: [],\r\n};\r\n\r\nexport default class SpatialControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const v = props.value || {};\r\n    let defaultCol;\r\n    if (props.choices.length > 0) {\r\n      defaultCol = props.choices[0][0];\r\n    }\r\n    this.state = {\r\n      type: v.type || spatialTypes.latlong,\r\n      delimiter: v.delimiter || ',',\r\n      latCol: v.latCol || defaultCol,\r\n      lonCol: v.lonCol || defaultCol,\r\n      lonlatCol: v.lonlatCol || defaultCol,\r\n      reverseCheckbox: v.reverseCheckbox || false,\r\n      geohashCol: v.geohashCol || defaultCol,\r\n      value: null,\r\n      errors: [],\r\n    };\r\n    this.toggleCheckbox = this.toggleCheckbox.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.renderReverseCheckbox = this.renderReverseCheckbox.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.onChange();\r\n  }\r\n\r\n  onChange() {\r\n    const { type } = this.state;\r\n    const value = { type };\r\n    const errors = [];\r\n    const errMsg = t('Invalid lat/long configuration.');\r\n    if (type === spatialTypes.latlong) {\r\n      value.latCol = this.state.latCol;\r\n      value.lonCol = this.state.lonCol;\r\n      if (!value.lonCol || !value.latCol) {\r\n        errors.push(errMsg);\r\n      }\r\n    } else if (type === spatialTypes.delimited) {\r\n      value.lonlatCol = this.state.lonlatCol;\r\n      value.delimiter = this.state.delimiter;\r\n      value.reverseCheckbox = this.state.reverseCheckbox;\r\n      if (!value.lonlatCol || !value.delimiter) {\r\n        errors.push(errMsg);\r\n      }\r\n    } else if (type === spatialTypes.geohash) {\r\n      value.geohashCol = this.state.geohashCol;\r\n      value.reverseCheckbox = this.state.reverseCheckbox;\r\n      if (!value.geohashCol) {\r\n        errors.push(errMsg);\r\n      }\r\n    }\r\n    this.setState({ value, errors });\r\n    this.props.onChange(value, errors);\r\n  }\r\n\r\n  setType(type) {\r\n    this.setState({ type }, this.onChange);\r\n  }\r\n\r\n  toggleCheckbox() {\r\n    this.setState(\r\n      prevState => ({ reverseCheckbox: !prevState.reverseCheckbox }),\r\n      this.onChange,\r\n    );\r\n  }\r\n\r\n  renderLabelContent() {\r\n    if (this.state.errors.length > 0) {\r\n      return 'N/A';\r\n    }\r\n    if (this.state.type === spatialTypes.latlong) {\r\n      return `${this.state.lonCol} | ${this.state.latCol}`;\r\n    }\r\n    if (this.state.type === spatialTypes.delimited) {\r\n      return `${this.state.lonlatCol}`;\r\n    }\r\n    if (this.state.type === spatialTypes.geohash) {\r\n      return `${this.state.geohashCol}`;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  renderSelect(name, type) {\r\n    return (\r\n      <SelectControl\r\n        name={name}\r\n        choices={this.props.choices}\r\n        value={this.state[name]}\r\n        clearable={false}\r\n        onFocus={() => {\r\n          this.setType(type);\r\n        }}\r\n        onChange={value => {\r\n          this.setState({ [name]: value }, this.onChange);\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderReverseCheckbox() {\r\n    return (\r\n      <span>\r\n        {t('Reverse lat/long ')}\r\n        <Checkbox\r\n          checked={this.state.reverseCheckbox}\r\n          onChange={this.toggleCheckbox}\r\n        />\r\n      </span>\r\n    );\r\n  }\r\n\r\n  renderPopoverContent() {\r\n    return (\r\n      <div style={{ width: '300px' }}>\r\n        <PopoverSection\r\n          title={t('Longitude & Latitude columns')}\r\n          isSelected={this.state.type === spatialTypes.latlong}\r\n          onSelect={this.setType.bind(this, spatialTypes.latlong)}\r\n        >\r\n          <Row gutter={16}>\r\n            <Col xs={24} md={12}>\r\n              Longitude\r\n              {this.renderSelect('lonCol', spatialTypes.latlong)}\r\n            </Col>\r\n            <Col xs={24} md={12}>\r\n              Latitude\r\n              {this.renderSelect('latCol', spatialTypes.latlong)}\r\n            </Col>\r\n          </Row>\r\n        </PopoverSection>\r\n        <PopoverSection\r\n          title={t('Delimited long & lat single column')}\r\n          info={t(\r\n            'Multiple formats accepted, look the geopy.points ' +\r\n              'Python library for more details',\r\n          )}\r\n          isSelected={this.state.type === spatialTypes.delimited}\r\n          onSelect={this.setType.bind(this, spatialTypes.delimited)}\r\n        >\r\n          <Row gutter={16}>\r\n            <Col xs={24} md={12}>\r\n              {t('Column')}\r\n              {this.renderSelect('lonlatCol', spatialTypes.delimited)}\r\n            </Col>\r\n            <Col xs={24} md={12}>\r\n              {this.renderReverseCheckbox()}\r\n            </Col>\r\n          </Row>\r\n        </PopoverSection>\r\n        <PopoverSection\r\n          title={t('Geohash')}\r\n          isSelected={this.state.type === spatialTypes.geohash}\r\n          onSelect={this.setType.bind(this, spatialTypes.geohash)}\r\n        >\r\n          <Row gutter={16}>\r\n            <Col xs={24} md={12}>\r\n              Column\r\n              {this.renderSelect('geohashCol', spatialTypes.geohash)}\r\n            </Col>\r\n            <Col xs={24} md={12}>\r\n              {this.renderReverseCheckbox()}\r\n            </Col>\r\n          </Row>\r\n        </PopoverSection>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ControlHeader {...this.props} />\r\n        <Popover\r\n          content={this.renderPopoverContent()}\r\n          placement=\"topLeft\" // so that popover doesn't move when label changes\r\n          trigger=\"click\"\r\n        >\r\n          <Label className=\"pointer\">{this.renderLabelContent()}</Label>\r\n        </Popover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSpatialControl.propTypes = propTypes;\r\nSpatialControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { TextArea } from 'src/common/components';\r\nimport { debounce } from 'lodash';\r\nimport { t } from '@superset-ui/core';\r\n\r\nimport { FAST_DEBOUNCE } from 'src/constants';\r\nimport Button from 'src/components/Button';\r\nimport { TextAreaEditor } from 'src/components/AsyncAceEditor';\r\nimport ModalTrigger from 'src/components/ModalTrigger';\r\n\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\n\r\nconst propTypes = {\r\n  name: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.string,\r\n  height: PropTypes.number,\r\n  minLines: PropTypes.number,\r\n  maxLines: PropTypes.number,\r\n  offerEditInModal: PropTypes.bool,\r\n  language: PropTypes.oneOf([\r\n    null,\r\n    'json',\r\n    'html',\r\n    'sql',\r\n    'markdown',\r\n    'javascript',\r\n  ]),\r\n  aboveEditorSection: PropTypes.node,\r\n  readOnly: PropTypes.bool,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  value: '',\r\n  height: 250,\r\n  minLines: 3,\r\n  maxLines: 10,\r\n  offerEditInModal: true,\r\n  readOnly: false,\r\n};\r\n\r\nexport default class TextAreaControl extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.onAceChangeDebounce = debounce(value => {\r\n      this.onAceChange(value);\r\n    }, FAST_DEBOUNCE);\r\n  }\r\n\r\n  onControlChange(event) {\r\n    this.props.onChange(event.target.value);\r\n  }\r\n\r\n  onAceChange(value) {\r\n    this.props.onChange(value);\r\n  }\r\n\r\n  renderEditor(inModal = false) {\r\n    const value = this.props.value || '';\r\n    const minLines = inModal ? 40 : this.props.minLines || 12;\r\n    if (this.props.language) {\r\n      const style = { border: '1px solid #CCC' };\r\n      if (this.props.readOnly) {\r\n        style.backgroundColor = '#f2f2f2';\r\n      }\r\n      return (\r\n        <TextAreaEditor\r\n          mode={this.props.language}\r\n          style={style}\r\n          minLines={minLines}\r\n          maxLines={inModal ? 1000 : this.props.maxLines}\r\n          onChange={this.onAceChangeDebounce}\r\n          width=\"100%\"\r\n          height={`${minLines}em`}\r\n          editorProps={{ $blockScrolling: true }}\r\n          value={value}\r\n          readOnly={this.props.readOnly}\r\n        />\r\n      );\r\n    }\r\n    return (\r\n      <TextArea\r\n        placeholder={t('textarea')}\r\n        onChange={this.onControlChange.bind(this)}\r\n        value={value}\r\n        disabled={this.props.readOnly}\r\n        style={{ height: this.props.height }}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderModalBody() {\r\n    return (\r\n      <div>\r\n        <div>{this.props.aboveEditorSection}</div>\r\n        {this.renderEditor(true)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const controlHeader = <ControlHeader {...this.props} />;\r\n    return (\r\n      <div>\r\n        {controlHeader}\r\n        {this.renderEditor()}\r\n        {this.props.offerEditInModal && (\r\n          <ModalTrigger\r\n            modalTitle={controlHeader}\r\n            triggerNode={\r\n              <Button buttonSize=\"small\" className=\"m-t-5\">\r\n                {t('Edit')} <strong>{this.props.language}</strong>{' '}\r\n                {t('in modal')}\r\n              </Button>\r\n            }\r\n            modalBody={this.renderModalBody(true)}\r\n            responsive\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTextAreaControl.propTypes = propTypes;\r\nTextAreaControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { legacyValidateNumber, legacyValidateInteger } from '@superset-ui/core';\r\nimport debounce from 'lodash/debounce';\r\nimport { FAST_DEBOUNCE } from 'src/constants';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\nimport { Input } from 'src/common/components';\r\n\r\ntype InputValueType = string | number;\r\n\r\nexport interface TextControlProps<T extends InputValueType = InputValueType> {\r\n  label?: string;\r\n  disabled?: boolean;\r\n  isFloat?: boolean;\r\n  isInt?: boolean;\r\n  onChange?: (value: T, errors: any) => {};\r\n  onFocus?: () => {};\r\n  placeholder?: string;\r\n  value?: T | null;\r\n  controlId?: string;\r\n  renderTrigger?: boolean;\r\n}\r\n\r\nexport interface TextControlState {\r\n  value: string;\r\n}\r\n\r\nconst safeStringify = (value?: InputValueType | null) =>\r\n  value == null ? '' : String(value);\r\n\r\nexport default class TextControl<\r\n  T extends InputValueType = InputValueType\r\n> extends React.Component<TextControlProps<T>, TextControlState> {\r\n  initialValue?: TextControlProps['value'];\r\n\r\n  constructor(props: TextControlProps<T>) {\r\n    super(props);\r\n    this.initialValue = props.value;\r\n    this.state = {\r\n      value: safeStringify(this.initialValue),\r\n    };\r\n  }\r\n\r\n  onChange = (inputValue: string) => {\r\n    let parsedValue: InputValueType = inputValue;\r\n    // Validation & casting\r\n    const errors = [];\r\n    if (inputValue !== '' && this.props.isFloat) {\r\n      const error = legacyValidateNumber(inputValue);\r\n      if (error) {\r\n        errors.push(error);\r\n      } else {\r\n        parsedValue = inputValue.match(/.*([.0])$/g)\r\n          ? inputValue\r\n          : parseFloat(inputValue);\r\n      }\r\n    }\r\n    if (inputValue !== '' && this.props.isInt) {\r\n      const error = legacyValidateInteger(inputValue);\r\n      if (error) {\r\n        errors.push(error);\r\n      } else {\r\n        parsedValue = parseInt(inputValue, 10);\r\n      }\r\n    }\r\n    this.props.onChange?.(parsedValue as T, errors);\r\n  };\r\n\r\n  debouncedOnChange = debounce((inputValue: string) => {\r\n    this.onChange(inputValue);\r\n  }, FAST_DEBOUNCE);\r\n\r\n  onChangeWrapper = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { value } = event.target;\r\n    this.setState({ value }, () => {\r\n      this.debouncedOnChange(value);\r\n    });\r\n  };\r\n\r\n  render = () => {\r\n    let { value } = this.state;\r\n    if (this.initialValue !== this.props.value) {\r\n      this.initialValue = this.props.value;\r\n      value = safeStringify(this.props.value);\r\n    }\r\n    return (\r\n      <div>\r\n        <ControlHeader {...this.props} />\r\n        <Input\r\n          type=\"text\"\r\n          data-test=\"inline-name\"\r\n          placeholder={this.props.placeholder}\r\n          onChange={this.onChangeWrapper}\r\n          onFocus={this.props.onFocus}\r\n          value={value}\r\n          disabled={this.props.disabled}\r\n          aria-label={this.props.label}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Row, Col, Input } from 'src/common/components';\r\nimport Button from 'src/components/Button';\r\nimport Popover from 'src/components/Popover';\r\nimport Select from 'src/components/Select';\r\nimport { t, styled } from '@superset-ui/core';\r\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\r\nimport BoundsControl from '../BoundsControl';\r\nimport CheckboxControl from '../CheckboxControl';\r\n\r\nconst propTypes = {\r\n  label: PropTypes.string,\r\n  tooltip: PropTypes.string,\r\n  colType: PropTypes.string,\r\n  width: PropTypes.string,\r\n  height: PropTypes.string,\r\n  timeLag: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  timeRatio: PropTypes.string,\r\n  comparisonType: PropTypes.string,\r\n  showYAxis: PropTypes.bool,\r\n  yAxisBounds: PropTypes.array,\r\n  bounds: PropTypes.array,\r\n  d3format: PropTypes.string,\r\n  dateFormat: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n};\r\n\r\nconst defaultProps = {\r\n  label: t('Time series columns'),\r\n  tooltip: '',\r\n  colType: '',\r\n  width: '',\r\n  height: '',\r\n  timeLag: '',\r\n  timeRatio: '',\r\n  comparisonType: '',\r\n  showYAxis: false,\r\n  yAxisBounds: [null, null],\r\n  bounds: [null, null],\r\n  d3format: '',\r\n  dateFormat: '',\r\n};\r\n\r\nconst comparisonTypeOptions = [\r\n  { value: 'value', label: 'Actual value' },\r\n  { value: 'diff', label: 'Difference' },\r\n  { value: 'perc', label: 'Percentage' },\r\n  { value: 'perc_change', label: 'Percentage change' },\r\n];\r\n\r\nconst colTypeOptions = [\r\n  { value: 'time', label: 'Time comparison' },\r\n  { value: 'contrib', label: 'Contribution' },\r\n  { value: 'spark', label: 'Sparkline' },\r\n  { value: 'avg', label: 'Period average' },\r\n];\r\n\r\nconst StyledRow = styled(Row)`\r\n  margin-top: ${({ theme }) => theme.gridUnit * 2}px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst StyledCol = styled(Col)`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst StyledTooltip = styled(InfoTooltipWithTrigger)`\r\n  margin-left: ${({ theme }) => theme.gridUnit}px;\r\n  color: ${({ theme }) => theme.colors.grayscale.light1};\r\n`;\r\n\r\nconst ButtonBar = styled.div`\r\n  margin-top: ${({ theme }) => theme.gridUnit * 5}px;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default class TimeSeriesColumnControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.onSave = this.onSave.bind(this);\r\n    this.onClose = this.onClose.bind(this);\r\n    this.resetState = this.resetState.bind(this);\r\n    this.initialState = this.initialState.bind(this);\r\n    this.onPopoverVisibleChange = this.onPopoverVisibleChange.bind(this);\r\n\r\n    this.state = this.initialState();\r\n  }\r\n\r\n  initialState() {\r\n    return {\r\n      label: this.props.label,\r\n      tooltip: this.props.tooltip,\r\n      colType: this.props.colType,\r\n      width: this.props.width,\r\n      height: this.props.height,\r\n      timeLag: this.props.timeLag || 0,\r\n      timeRatio: this.props.timeRatio,\r\n      comparisonType: this.props.comparisonType,\r\n      showYAxis: this.props.showYAxis,\r\n      yAxisBounds: this.props.yAxisBounds,\r\n      bounds: this.props.bounds,\r\n      d3format: this.props.d3format,\r\n      dateFormat: this.props.dateFormat,\r\n      popoverVisible: false,\r\n    };\r\n  }\r\n\r\n  resetState() {\r\n    const initialState = this.initialState();\r\n    this.setState({ ...initialState });\r\n  }\r\n\r\n  onSave() {\r\n    this.props.onChange(this.state);\r\n    this.setState({ popoverVisible: false });\r\n  }\r\n\r\n  onClose() {\r\n    this.resetState();\r\n  }\r\n\r\n  onSelectChange(attr, opt) {\r\n    this.setState({ [attr]: opt.value });\r\n  }\r\n\r\n  onTextInputChange(attr, event) {\r\n    this.setState({ [attr]: event.target.value });\r\n  }\r\n\r\n  onCheckboxChange(attr, value) {\r\n    this.setState({ [attr]: value });\r\n  }\r\n\r\n  onBoundsChange(bounds) {\r\n    this.setState({ bounds });\r\n  }\r\n\r\n  onPopoverVisibleChange(popoverVisible) {\r\n    if (popoverVisible) {\r\n      this.setState({ popoverVisible });\r\n    } else {\r\n      this.resetState();\r\n    }\r\n  }\r\n\r\n  onYAxisBoundsChange(yAxisBounds) {\r\n    this.setState({ yAxisBounds });\r\n  }\r\n\r\n  textSummary() {\r\n    return `${this.props.label}`;\r\n  }\r\n\r\n  formRow(label, tooltip, ttLabel, control) {\r\n    return (\r\n      <StyledRow>\r\n        <StyledCol xs={24} md={11}>\r\n          {label}\r\n          <StyledTooltip placement=\"top\" tooltip={tooltip} label={ttLabel} />\r\n        </StyledCol>\r\n        <Col xs={24} md={13}>\r\n          {control}\r\n        </Col>\r\n      </StyledRow>\r\n    );\r\n  }\r\n\r\n  renderPopover() {\r\n    return (\r\n      <div id=\"ts-col-popo\" style={{ width: 320 }}>\r\n        {this.formRow(\r\n          'Label',\r\n          'The column header label',\r\n          'time-lag',\r\n          <Input\r\n            value={this.state.label}\r\n            onChange={this.onTextInputChange.bind(this, 'label')}\r\n            placeholder=\"Label\"\r\n          />,\r\n        )}\r\n        {this.formRow(\r\n          'Tooltip',\r\n          'Column header tooltip',\r\n          'col-tooltip',\r\n          <Input\r\n            value={this.state.tooltip}\r\n            onChange={this.onTextInputChange.bind(this, 'tooltip')}\r\n            placeholder=\"Tooltip\"\r\n          />,\r\n        )}\r\n        {this.formRow(\r\n          'Type',\r\n          'Type of comparison, value difference or percentage',\r\n          'col-type',\r\n          <Select\r\n            value={this.state.colType}\r\n            clearable={false}\r\n            onChange={this.onSelectChange.bind(this, 'colType')}\r\n            options={colTypeOptions}\r\n          />,\r\n        )}\r\n        <hr />\r\n        {this.state.colType === 'spark' &&\r\n          this.formRow(\r\n            'Width',\r\n            'Width of the sparkline',\r\n            'spark-width',\r\n            <Input\r\n              value={this.state.width}\r\n              onChange={this.onTextInputChange.bind(this, 'width')}\r\n              placeholder=\"Width\"\r\n            />,\r\n          )}\r\n        {this.state.colType === 'spark' &&\r\n          this.formRow(\r\n            'Height',\r\n            'Height of the sparkline',\r\n            'spark-width',\r\n            <Input\r\n              value={this.state.height}\r\n              onChange={this.onTextInputChange.bind(this, 'height')}\r\n              placeholder=\"Height\"\r\n            />,\r\n          )}\r\n        {['time', 'avg'].indexOf(this.state.colType) >= 0 &&\r\n          this.formRow(\r\n            'Time lag',\r\n            'Number of periods to compare against',\r\n            'time-lag',\r\n            <Input\r\n              value={this.state.timeLag}\r\n              onChange={this.onTextInputChange.bind(this, 'timeLag')}\r\n              placeholder=\"Time Lag\"\r\n            />,\r\n          )}\r\n        {['spark'].indexOf(this.state.colType) >= 0 &&\r\n          this.formRow(\r\n            'Time ratio',\r\n            'Number of periods to ratio against',\r\n            'time-ratio',\r\n            <Input\r\n              value={this.state.timeRatio}\r\n              onChange={this.onTextInputChange.bind(this, 'timeRatio')}\r\n              placeholder=\"Time Ratio\"\r\n            />,\r\n          )}\r\n        {this.state.colType === 'time' &&\r\n          this.formRow(\r\n            'Type',\r\n            'Type of comparison, value difference or percentage',\r\n            'comp-type',\r\n            <Select\r\n              value={this.state.comparisonType}\r\n              clearable={false}\r\n              onChange={this.onSelectChange.bind(this, 'comparisonType')}\r\n              options={comparisonTypeOptions}\r\n            />,\r\n          )}\r\n        {this.state.colType === 'spark' &&\r\n          this.formRow(\r\n            'Show Y-axis',\r\n            'Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise.',\r\n            'show-y-axis-bounds',\r\n            <CheckboxControl\r\n              value={this.state.showYAxis}\r\n              onChange={this.onCheckboxChange.bind(this, 'showYAxis')}\r\n            />,\r\n          )}\r\n        {this.state.colType === 'spark' &&\r\n          this.formRow(\r\n            'Y-axis bounds',\r\n            'Manually set min/max values for the y-axis.',\r\n            'y-axis-bounds',\r\n            <BoundsControl\r\n              value={this.state.yAxisBounds}\r\n              onChange={this.onYAxisBoundsChange.bind(this)}\r\n            />,\r\n          )}\r\n        {this.state.colType !== 'spark' &&\r\n          this.formRow(\r\n            'Color bounds',\r\n            `Number bounds used for color encoding from red to blue.\r\n              Reverse the numbers for blue to red. To get pure red or blue,\r\n              you can enter either only min or max.`,\r\n            'bounds',\r\n            <BoundsControl\r\n              value={this.state.bounds}\r\n              onChange={this.onBoundsChange.bind(this)}\r\n            />,\r\n          )}\r\n        {this.formRow(\r\n          'Number format',\r\n          'Optional d3 number format string',\r\n          'd3-format',\r\n          <Input\r\n            value={this.state.d3format}\r\n            onChange={this.onTextInputChange.bind(this, 'd3format')}\r\n            placeholder=\"Number format string\"\r\n          />,\r\n        )}\r\n        {this.state.colType === 'spark' &&\r\n          this.formRow(\r\n            'Date format',\r\n            'Optional d3 date format string',\r\n            'date-format',\r\n            <Input\r\n              value={this.state.dateFormat}\r\n              onChange={this.onTextInputChange.bind(this, 'dateFormat')}\r\n              placeholder=\"Date format string\"\r\n            />,\r\n          )}\r\n        <ButtonBar>\r\n          <Button buttonSize=\"small\" onClick={this.onClose} cta>\r\n            {t('Close')}\r\n          </Button>\r\n          <Button\r\n            buttonStyle=\"primary\"\r\n            buttonSize=\"small\"\r\n            onClick={this.onSave}\r\n            cta\r\n          >\r\n            {t('Save')}\r\n          </Button>\r\n        </ButtonBar>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <span>\r\n        {this.textSummary()}{' '}\r\n        <Popover\r\n          trigger=\"click\"\r\n          placement=\"right\"\r\n          content={this.renderPopover()}\r\n          title=\"Column Configuration\"\r\n          visible={this.state.popoverVisible}\r\n          onVisibleChange={this.onPopoverVisibleChange}\r\n        >\r\n          <InfoTooltipWithTrigger\r\n            icon=\"edit\"\r\n            className=\"text-primary\"\r\n            label=\"edit-ts-column\"\r\n          />\r\n        </Popover>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nTimeSeriesColumnControl.propTypes = propTypes;\r\nTimeSeriesColumnControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Popover from 'src/components/Popover';\r\nimport { decimal2sexagesimal } from 'geolib';\r\n\r\nimport Label from 'src/components/Label';\r\nimport { FormLabel } from 'src/components/Form';\r\nimport TextControl from './TextControl';\r\nimport ControlHeader from '../ControlHeader';\r\n\r\nexport const DEFAULT_VIEWPORT = {\r\n  longitude: 6.85236157047845,\r\n  latitude: 31.222656842808707,\r\n  zoom: 1,\r\n  bearing: 0,\r\n  pitch: 0,\r\n};\r\n\r\nconst PARAMS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\r\n\r\nconst propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.shape({\r\n    longitude: PropTypes.number,\r\n    latitude: PropTypes.number,\r\n    zoom: PropTypes.number,\r\n    bearing: PropTypes.number,\r\n    pitch: PropTypes.number,\r\n  }),\r\n  default: PropTypes.object,\r\n  name: PropTypes.string.isRequired,\r\n};\r\n\r\nconst defaultProps = {\r\n  onChange: () => {},\r\n  default: { type: 'fix', value: 5 },\r\n  value: DEFAULT_VIEWPORT,\r\n};\r\n\r\nexport default class ViewportControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  onChange(ctrl, value) {\r\n    this.props.onChange({\r\n      ...this.props.value,\r\n      [ctrl]: value,\r\n    });\r\n  }\r\n\r\n  renderTextControl(ctrl) {\r\n    return (\r\n      <div key={ctrl}>\r\n        <FormLabel>{ctrl}</FormLabel>\r\n        <TextControl\r\n          value={this.props.value[ctrl]}\r\n          onChange={this.onChange.bind(this, ctrl)}\r\n          isFloat\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderPopover() {\r\n    return (\r\n      <div id={`filter-popover-${this.props.name}`}>\r\n        {PARAMS.map(ctrl => this.renderTextControl(ctrl))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderLabel() {\r\n    if (this.props.value.longitude && this.props.value.latitude) {\r\n      return `${decimal2sexagesimal(\r\n        this.props.value.longitude,\r\n      )} | ${decimal2sexagesimal(this.props.value.latitude)}`;\r\n    }\r\n    return 'N/A';\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ControlHeader {...this.props} />\r\n        <Popover\r\n          container={document.body}\r\n          trigger=\"click\"\r\n          placement=\"right\"\r\n          content={this.renderPopover()}\r\n          title=\"Viewport\"\r\n        >\r\n          <Label className=\"pointer\">{this.renderLabel()}</Label>\r\n        </Popover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nViewportControl.propTypes = propTypes;\r\nViewportControl.defaultProps = defaultProps;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { sharedControlComponents } from '@superset-ui/chart-controls';\r\nimport AnnotationLayerControl from './AnnotationLayerControl';\r\nimport BoundsControl from './BoundsControl';\r\nimport CheckboxControl from './CheckboxControl';\r\nimport CollectionControl from './CollectionControl';\r\nimport ColorMapControl from './ColorMapControl';\r\nimport ColorPickerControl from './ColorPickerControl';\r\nimport ColorSchemeControl from './ColorSchemeControl';\r\nimport DatasourceControl from './DatasourceControl';\r\nimport DateFilterControl from './DateFilterControl';\r\nimport FixedOrMetricControl from './FixedOrMetricControl';\r\nimport HiddenControl from './HiddenControl';\r\nimport SelectAsyncControl from './SelectAsyncControl';\r\nimport SelectControl from './SelectControl';\r\nimport SliderControl from './SliderControl';\r\nimport SpatialControl from './SpatialControl';\r\nimport TextAreaControl from './TextAreaControl';\r\nimport TextControl from './TextControl';\r\nimport TimeSeriesColumnControl from './TimeSeriesColumnControl';\r\nimport ViewportControl from './ViewportControl';\r\nimport VizTypeControl from './VizTypeControl';\r\nimport MetricsControl from './MetricControl/MetricsControl';\r\nimport AdhocFilterControl from './FilterControl/AdhocFilterControl';\r\nimport FilterBoxItemControl from './FilterBoxItemControl';\r\nimport DndColumnSelectControl, {\r\n  DndColumnSelect,\r\n  DndFilterSelect,\r\n  DndMetricSelect,\r\n} from './DndColumnSelectControl';\r\n\r\nconst controlMap = {\r\n  AnnotationLayerControl,\r\n  BoundsControl,\r\n  CheckboxControl,\r\n  CollectionControl,\r\n  ColorMapControl,\r\n  ColorPickerControl,\r\n  ColorSchemeControl,\r\n  DatasourceControl,\r\n  DateFilterControl,\r\n  DndColumnSelectControl,\r\n  DndColumnSelect,\r\n  DndFilterSelect,\r\n  DndMetricSelect,\r\n  FixedOrMetricControl,\r\n  HiddenControl,\r\n  SelectAsyncControl,\r\n  SelectControl,\r\n  SliderControl,\r\n  SpatialControl,\r\n  TextAreaControl,\r\n  TextControl,\r\n  TimeSeriesColumnControl,\r\n  ViewportControl,\r\n  VizTypeControl,\r\n  MetricsControl,\r\n  AdhocFilterControl,\r\n  FilterBoxItemControl,\r\n  ...sharedControlComponents,\r\n};\r\nexport default controlMap;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React from 'react';\r\nimport { styled } from '@superset-ui/core';\r\nimport {\r\n  MetricOption,\r\n  ColumnOption,\r\n  MetricOptionProps,\r\n  ColumnOptionProps,\r\n} from '@superset-ui/chart-controls';\r\n\r\nconst OptionContainer = styled.div`\r\n  > span {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .option-label {\r\n    display: inline-block;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    & ~ i {\r\n      margin-left: ${({ theme }) => theme.gridUnit}px;\r\n    }\r\n  }\r\n  .type-label {\r\n    margin-right: ${({ theme }) => theme.gridUnit * 3}px;\r\n    width: ${({ theme }) => theme.gridUnit * 7}px;\r\n    display: inline-block;\r\n    text-align: center;\r\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\r\n  }\r\n`;\r\n\r\nexport const StyledMetricOption = (props: MetricOptionProps) => (\r\n  <OptionContainer>\r\n    <MetricOption {...props} />\r\n  </OptionContainer>\r\n);\r\n\r\nexport const StyledColumnOption = (props: ColumnOptionProps) => (\r\n  <OptionContainer>\r\n    <ColumnOption {...props} />\r\n  </OptionContainer>\r\n);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { t } from '@superset-ui/core';\r\n\r\nexport const AGGREGATES = {\r\n  AVG: 'AVG',\r\n  COUNT: 'COUNT',\r\n  COUNT_DISTINCT: 'COUNT_DISTINCT',\r\n  MAX: 'MAX',\r\n  MIN: 'MIN',\r\n  SUM: 'SUM',\r\n};\r\nexport const AGGREGATES_OPTIONS = Object.values(AGGREGATES);\r\n\r\nexport const OPERATORS = {\r\n  '==': '==',\r\n  '!=': '!=',\r\n  '>': '>',\r\n  '<': '<',\r\n  '>=': '>=',\r\n  '<=': '<=',\r\n  IN: 'IN',\r\n  'NOT IN': 'NOT IN',\r\n  ILIKE: 'ILIKE',\r\n  LIKE: 'LIKE',\r\n  REGEX: 'REGEX',\r\n  'IS NOT NULL': 'IS NOT NULL',\r\n  'IS NULL': 'IS NULL',\r\n  'LATEST PARTITION': 'LATEST PARTITION',\r\n  'IS TRUE': 'IS TRUE',\r\n  'IS FALSE': 'IS FALSE',\r\n};\r\n\r\nexport const OPERATORS_OPTIONS = Object.values(OPERATORS);\r\n\r\nexport const TABLE_ONLY_OPERATORS = [OPERATORS.LIKE, OPERATORS.ILIKE];\r\nexport const DRUID_ONLY_OPERATORS = [OPERATORS.REGEX];\r\nexport const HAVING_OPERATORS = [\r\n  OPERATORS['=='],\r\n  OPERATORS['!='],\r\n  OPERATORS['>'],\r\n  OPERATORS['<'],\r\n  OPERATORS['>='],\r\n  OPERATORS['<='],\r\n];\r\nexport const MULTI_OPERATORS = new Set([OPERATORS.IN, OPERATORS['NOT IN']]);\r\n// CUSTOM_OPERATORS will show operator in simple mode,\r\n// but will generate customized sqlExpression\r\nexport const CUSTOM_OPERATORS = new Set([OPERATORS['LATEST PARTITION']]);\r\n// DISABLE_INPUT_OPERATORS will disable filter value input\r\n// in adhocFilter control\r\nexport const DISABLE_INPUT_OPERATORS = [\r\n  OPERATORS['IS NOT NULL'],\r\n  OPERATORS['IS NULL'],\r\n  OPERATORS['LATEST PARTITION'],\r\n  OPERATORS['IS TRUE'],\r\n  OPERATORS['IS FALSE'],\r\n];\r\n\r\nexport const sqlaAutoGeneratedMetricNameRegex = /^(sum|min|max|avg|count|count_distinct)__.*$/i;\r\nexport const sqlaAutoGeneratedMetricRegex = /^(LONG|DOUBLE|FLOAT)?(SUM|AVG|MAX|MIN|COUNT)\\([A-Z0-9_.\"]*\\)$/i;\r\nexport const druidAutoGeneratedMetricRegex = /^(LONG|DOUBLE|FLOAT)?(SUM|MAX|MIN|COUNT)\\([A-Z0-9_.\"]*\\)$/i;\r\n\r\nexport const TIME_FILTER_LABELS = {\r\n  time_range: t('Time range'),\r\n  granularity_sqla: t('Time column'),\r\n  time_grain_sqla: t('Time grain'),\r\n  druid_time_origin: t('Origin'),\r\n  granularity: t('Time granularity'),\r\n};\r\n\r\nexport const FILTER_CONFIG_ATTRIBUTES = {\r\n  DEFAULT_VALUE: 'defaultValue',\r\n  MULTIPLE: 'multiple',\r\n  SEARCH_ALL_OPTIONS: 'searchAllOptions',\r\n  CLEARABLE: 'clearable',\r\n};\r\n\r\nexport const FILTER_OPTIONS_LIMIT = 1000;\r\n\r\n/**\r\n * Map control names to their key in extra_filters\r\n */\r\nexport const TIME_FILTER_MAP = {\r\n  time_range: '__time_range',\r\n  granularity_sqla: '__time_col',\r\n  time_grain_sqla: '__time_grain',\r\n  druid_time_origin: '__time_origin',\r\n  granularity: '__granularity',\r\n};\r\n\r\n// TODO: make this configurable per Superset installation\r\nexport const DEFAULT_TIME_RANGE = 'No filter';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { t } from '@superset-ui/core';\r\nimport { ControlPanelSectionConfig } from '@superset-ui/chart-controls';\r\nimport { formatSelectOptions } from 'src/modules/utils';\r\n\r\nexport const druidTimeSeries: ControlPanelSectionConfig = {\r\n  label: t('Time'),\r\n  expanded: true,\r\n  description: t('Time related form attributes'),\r\n  controlSetRows: [['time_range']],\r\n};\r\n\r\nexport const datasourceAndVizType: ControlPanelSectionConfig = {\r\n  label: t('Chart type'),\r\n  expanded: true,\r\n  controlSetRows: [\r\n    ['datasource'],\r\n    ['viz_type'],\r\n    [\r\n      {\r\n        name: 'slice_id',\r\n        config: {\r\n          type: 'HiddenControl',\r\n          label: t('Chart ID'),\r\n          hidden: true,\r\n          description: t('The id of the active chart'),\r\n        },\r\n      },\r\n      {\r\n        name: 'cache_timeout',\r\n        config: {\r\n          type: 'HiddenControl',\r\n          label: t('Cache Timeout (seconds)'),\r\n          hidden: true,\r\n          description: t('The number of seconds before expiring the cache'),\r\n        },\r\n      },\r\n      {\r\n        name: 'url_params',\r\n        config: {\r\n          type: 'HiddenControl',\r\n          label: t('URL parameters'),\r\n          hidden: true,\r\n          description: t('Extra parameters for use in jinja templated queries'),\r\n        },\r\n      },\r\n      {\r\n        name: 'time_range_endpoints',\r\n        config: {\r\n          type: 'HiddenControl',\r\n          label: t('Time range endpoints'),\r\n          hidden: true,\r\n          description: t('Time range endpoints (SIP-15)'),\r\n        },\r\n      },\r\n    ],\r\n  ],\r\n};\r\n\r\nexport const colorScheme: ControlPanelSectionConfig = {\r\n  label: t('Color scheme'),\r\n  controlSetRows: [['color_scheme', 'label_colors']],\r\n};\r\n\r\nexport const sqlaTimeSeries: ControlPanelSectionConfig = {\r\n  label: t('Time'),\r\n  description: t('Time related form attributes'),\r\n  expanded: true,\r\n  controlSetRows: [['granularity_sqla'], ['time_range']],\r\n};\r\n\r\nexport const annotations: ControlPanelSectionConfig = {\r\n  label: t('Annotations and layers'),\r\n  tabOverride: 'data',\r\n  expanded: true,\r\n  controlSetRows: [\r\n    [\r\n      {\r\n        name: 'annotation_layers',\r\n        config: {\r\n          type: 'AnnotationLayerControl',\r\n          label: '',\r\n          default: [],\r\n          description: 'Annotation layers',\r\n          renderTrigger: true,\r\n          tabOverride: 'data',\r\n        },\r\n      },\r\n    ],\r\n  ],\r\n};\r\n\r\nexport const NVD3TimeSeries: ControlPanelSectionConfig[] = [\r\n  {\r\n    label: t('Query'),\r\n    expanded: true,\r\n    controlSetRows: [\r\n      ['metrics'],\r\n      ['adhoc_filters'],\r\n      ['groupby'],\r\n      ['limit', 'timeseries_limit_metric'],\r\n      [\r\n        {\r\n          name: 'order_desc',\r\n          config: {\r\n            type: 'CheckboxControl',\r\n            label: t('Sort descending'),\r\n            default: true,\r\n            description: t('Whether to sort descending or ascending'),\r\n          },\r\n        },\r\n        {\r\n          name: 'contribution',\r\n          config: {\r\n            type: 'CheckboxControl',\r\n            label: t('Contribution'),\r\n            default: false,\r\n            description: t('Compute the contribution to the total'),\r\n          },\r\n        },\r\n      ],\r\n      ['row_limit', null],\r\n    ],\r\n  },\r\n  {\r\n    label: t('Advanced analytics'),\r\n    tabOverride: 'data',\r\n    description: t(\r\n      'This section contains options ' +\r\n        'that allow for advanced analytical post processing ' +\r\n        'of query results',\r\n    ),\r\n    controlSetRows: [\r\n      [<h1 className=\"section-header\">{t('Rolling window')}</h1>],\r\n      [\r\n        {\r\n          name: 'rolling_type',\r\n          config: {\r\n            type: 'SelectControl',\r\n            label: t('Rolling function'),\r\n            default: 'None',\r\n            choices: formatSelectOptions([\r\n              'None',\r\n              'mean',\r\n              'sum',\r\n              'std',\r\n              'cumsum',\r\n            ]),\r\n            description: t(\r\n              'Defines a rolling window function to apply, works along ' +\r\n                'with the [Periods] text box',\r\n            ),\r\n          },\r\n        },\r\n        {\r\n          name: 'rolling_periods',\r\n          config: {\r\n            type: 'TextControl',\r\n            label: t('Periods'),\r\n            isInt: true,\r\n            description: t(\r\n              'Defines the size of the rolling window function, ' +\r\n                'relative to the time granularity selected',\r\n            ),\r\n          },\r\n        },\r\n        {\r\n          name: 'min_periods',\r\n          config: {\r\n            type: 'TextControl',\r\n            label: t('Min periods'),\r\n            isInt: true,\r\n            description: t(\r\n              'The minimum number of rolling periods required to show ' +\r\n                'a value. For instance if you do a cumulative sum on 7 days ' +\r\n                'you may want your \"Min Period\" to be 7, so that all data points ' +\r\n                'shown are the total of 7 periods. This will hide the \"ramp up\" ' +\r\n                'taking place over the first 7 periods',\r\n            ),\r\n          },\r\n        },\r\n      ],\r\n      [<h1 className=\"section-header\">{t('Time comparison')}</h1>],\r\n      [\r\n        {\r\n          name: 'time_compare',\r\n          config: {\r\n            type: 'SelectControl',\r\n            multi: true,\r\n            freeForm: true,\r\n            label: t('Time shift'),\r\n            choices: formatSelectOptions([\r\n              '1 day',\r\n              '1 week',\r\n              '28 days',\r\n              '30 days',\r\n              '52 weeks',\r\n              '1 year',\r\n              '104 weeks',\r\n              '2 years',\r\n            ]),\r\n            description: t(\r\n              'Overlay one or more timeseries from a ' +\r\n                'relative time period. Expects relative time deltas ' +\r\n                'in natural language (example:  24 hours, 7 days, ' +\r\n                '52 weeks, 365 days). Free text is supported.',\r\n            ),\r\n          },\r\n        },\r\n        {\r\n          name: 'comparison_type',\r\n          config: {\r\n            type: 'SelectControl',\r\n            label: t('Calculation type'),\r\n            default: 'values',\r\n            choices: [\r\n              ['values', 'Actual values'],\r\n              ['absolute', 'Absolute difference'],\r\n              ['percentage', 'Percentage change'],\r\n              ['ratio', 'Ratio'],\r\n            ],\r\n            description: t(\r\n              'How to display time shifts: as individual lines; as the ' +\r\n                'absolute difference between the main time series and each time shift; ' +\r\n                'as the percentage change; or as the ratio between series and time shifts.',\r\n            ),\r\n          },\r\n        },\r\n      ],\r\n      [<h1 className=\"section-header\">{t('Python functions')}</h1>],\r\n      // eslint-disable-next-line jsx-a11y/heading-has-content\r\n      [<h2 className=\"section-header\">pandas.resample</h2>],\r\n      [\r\n        {\r\n          name: 'resample_rule',\r\n          config: {\r\n            type: 'SelectControl',\r\n            freeForm: true,\r\n            label: t('Rule'),\r\n            default: null,\r\n            choices: formatSelectOptions(['1T', '1H', '1D', '7D', '1M', '1AS']),\r\n            description: t('Pandas resample rule'),\r\n          },\r\n        },\r\n        {\r\n          name: 'resample_method',\r\n          config: {\r\n            type: 'SelectControl',\r\n            freeForm: true,\r\n            label: t('Method'),\r\n            default: null,\r\n            choices: formatSelectOptions([\r\n              'asfreq',\r\n              'bfill',\r\n              'ffill',\r\n              'median',\r\n              'mean',\r\n              'sum',\r\n            ]),\r\n            description: t('Pandas resample method'),\r\n          },\r\n        },\r\n      ],\r\n    ],\r\n  },\r\n];\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport memoizeOne from 'memoize-one';\r\nimport { getChartControlPanelRegistry } from '@superset-ui/core';\r\nimport {\r\n  ControlPanelSectionConfig,\r\n  expandControlConfig,\r\n} from '@superset-ui/chart-controls';\r\n\r\n/**\r\n * Find control item from control panel config.\r\n */\r\nexport function findControlItem(\r\n  controlPanelSections: ControlPanelSectionConfig[],\r\n  controlKey: string,\r\n) {\r\n  return (\r\n    controlPanelSections\r\n      .map(section => section.controlSetRows)\r\n      .flat(2)\r\n      .find(\r\n        control =>\r\n          controlKey === control ||\r\n          (control !== null &&\r\n            typeof control === 'object' &&\r\n            'name' in control &&\r\n            control.name === controlKey),\r\n      ) ?? null\r\n  );\r\n}\r\n\r\nconst getMemoizedControlConfig = memoizeOne(\r\n  (controlKey, controlPanelConfig) => {\r\n    const {\r\n      controlOverrides = {},\r\n      controlPanelSections = [],\r\n    } = controlPanelConfig;\r\n    const control = expandControlConfig(\r\n      findControlItem(controlPanelSections, controlKey),\r\n      controlOverrides,\r\n    );\r\n    return control && 'config' in control ? control.config : control;\r\n  },\r\n);\r\n\r\nexport const getControlConfig = function getControlConfig(\r\n  controlKey: string,\r\n  vizType: string,\r\n) {\r\n  const controlPanelConfig = getChartControlPanelRegistry().get(vizType) || {};\r\n  return getMemoizedControlConfig(controlKey, controlPanelConfig);\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { ReactNode } from 'react';\r\nimport {\r\n  DatasourceType,\r\n  ensureIsArray,\r\n  JsonValue,\r\n  QueryFormData,\r\n} from '@superset-ui/core';\r\nimport {\r\n  ControlConfig,\r\n  ControlPanelState,\r\n  ControlState,\r\n  ControlType,\r\n  ControlValueValidator,\r\n} from '@superset-ui/chart-controls';\r\nimport { getSectionsToRender } from './getSectionsToRender';\r\nimport { getControlConfig } from './getControlConfig';\r\n\r\ntype ValidationError = JsonValue;\r\n\r\nfunction execControlValidator<T = ControlType>(\r\n  control: ControlState<T>,\r\n  processedState: ControlState<T>,\r\n) {\r\n  const validators = control.validators as ControlValueValidator[] | undefined;\r\n  const { externalValidationErrors = [] } = control;\r\n  const errors: ValidationError[] = [];\r\n  if (validators && validators.length > 0) {\r\n    validators.forEach(validator => {\r\n      const error = validator.call(control, control.value, processedState);\r\n      if (error) {\r\n        errors.push(error);\r\n      }\r\n    });\r\n  }\r\n  const validationErrors = [...errors, ...externalValidationErrors];\r\n  // always reset validation errors even when there is no validator\r\n  return { ...control, validationErrors };\r\n}\r\n\r\n/**\r\n * Clear control values that are no longer in the `choices` list.\r\n */\r\nfunction handleMissingChoice<T = ControlType>(control: ControlState<T>) {\r\n  // If the value is not valid anymore based on choices, clear it\r\n  if (\r\n    control.type === 'SelectControl' &&\r\n    !control.freeForm &&\r\n    control.choices &&\r\n    control.value\r\n  ) {\r\n    const alteredControl = { ...control };\r\n    const choices = control.choices as [JsonValue, ReactNode][];\r\n    const value = ensureIsArray(control.value);\r\n    const choiceValues = choices.map(c => c[0]);\r\n    if (control.multi && value.length > 0) {\r\n      alteredControl.value = value.filter(el => choiceValues.includes(el));\r\n      return alteredControl;\r\n    }\r\n    if (!control.multi && !choiceValues.includes(value[0])) {\r\n      alteredControl.value = null;\r\n      return alteredControl;\r\n    }\r\n  }\r\n  return control;\r\n}\r\n\r\nexport function applyMapStateToPropsToControl<T = ControlType>(\r\n  controlState: ControlState<T>,\r\n  controlPanelState: Partial<ControlPanelState>,\r\n) {\r\n  const { mapStateToProps } = controlState;\r\n  let state = { ...controlState };\r\n  let { value } = state; // value is current user-input value\r\n  if (mapStateToProps && controlPanelState) {\r\n    state = {\r\n      ...controlState,\r\n      ...mapStateToProps.call(controlState, controlPanelState, controlState),\r\n    };\r\n    // `mapStateToProps` may also provide a value\r\n    value = value || state.value;\r\n  }\r\n  // If default is a function, evaluate it\r\n  if (typeof state.default === 'function') {\r\n    state.default = state.default(state, controlPanelState);\r\n    // if default is still a function, discard\r\n    if (typeof state.default === 'function') {\r\n      delete state.default;\r\n    }\r\n  }\r\n  // If no current value, set it as default\r\n  if (state.default && value === undefined) {\r\n    value = state.default;\r\n  }\r\n  // If a choice control went from multi=false to true, wrap value in array\r\n  if (value && state.multi && !Array.isArray(value)) {\r\n    value = [value];\r\n  }\r\n  state.value = value;\r\n  return execControlValidator(handleMissingChoice(state), state);\r\n}\r\n\r\nexport function getControlStateFromControlConfig<T = ControlType>(\r\n  controlConfig: ControlConfig<T> | null,\r\n  controlPanelState: Partial<ControlPanelState>,\r\n  value?: JsonValue,\r\n) {\r\n  // skip invalid config values\r\n  if (!controlConfig) {\r\n    return null;\r\n  }\r\n  const controlState = { ...controlConfig, value } as ControlState<T>;\r\n  // only apply mapStateToProps when control states have been initialized\r\n  // or when explicitly didn't provide control panel state (mostly for testing)\r\n  if (\r\n    (controlPanelState && controlPanelState.controls) ||\r\n    controlPanelState === null\r\n  ) {\r\n    return applyMapStateToPropsToControl(controlState, controlPanelState);\r\n  }\r\n  return controlState;\r\n}\r\n\r\nexport function getControlState(\r\n  controlKey: string,\r\n  vizType: string,\r\n  state: Partial<ControlPanelState>,\r\n  value?: JsonValue,\r\n) {\r\n  return getControlStateFromControlConfig(\r\n    getControlConfig(controlKey, vizType),\r\n    state,\r\n    value,\r\n  );\r\n}\r\n\r\nexport function getAllControlsState(\r\n  vizType: string,\r\n  datasourceType: DatasourceType,\r\n  state: ControlPanelState,\r\n  formData: QueryFormData,\r\n) {\r\n  const controlsState = {};\r\n  getSectionsToRender(vizType, datasourceType).forEach(section =>\r\n    section.controlSetRows.forEach(fieldsetRow =>\r\n      fieldsetRow.forEach(field => {\r\n        if (field && 'config' in field && field.config && field.name) {\r\n          const { config, name } = field;\r\n          controlsState[name] = getControlStateFromControlConfig(\r\n            config,\r\n            state,\r\n            formData[name],\r\n          );\r\n        }\r\n      }),\r\n    ),\r\n  );\r\n  return controlsState;\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { QueryFormData } from '@superset-ui/core';\r\nimport { ControlStateMapping } from '@superset-ui/chart-controls';\r\n\r\nexport function getFormDataFromControls(\r\n  controlsState: ControlStateMapping,\r\n): QueryFormData {\r\n  const formData: QueryFormData = {\r\n    viz_type: 'table',\r\n    datasource: '',\r\n  };\r\n  Object.keys(controlsState).forEach(controlName => {\r\n    const control = controlsState[controlName];\r\n    formData[controlName] = control.value;\r\n  });\r\n  return formData;\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport memoizeOne from 'memoize-one';\r\nimport {\r\n  DatasourceType,\r\n  getChartControlPanelRegistry,\r\n} from '@superset-ui/core';\r\nimport {\r\n  ControlPanelConfig,\r\n  expandControlConfig,\r\n} from '@superset-ui/chart-controls';\r\n\r\nimport * as SECTIONS from 'src/explore/controlPanels/sections';\r\n\r\nconst getMemoizedSectionsToRender = memoizeOne(\r\n  (datasourceType: DatasourceType, controlPanelConfig: ControlPanelConfig) => {\r\n    const {\r\n      sectionOverrides = {},\r\n      controlOverrides,\r\n      controlPanelSections = [],\r\n    } = controlPanelConfig;\r\n\r\n    // default control panel sections\r\n    const sections = { ...SECTIONS };\r\n\r\n    // apply section overrides\r\n    Object.entries(sectionOverrides).forEach(([section, overrides]) => {\r\n      if (typeof overrides === 'object' && overrides.constructor === Object) {\r\n        sections[section] = {\r\n          ...sections[section],\r\n          ...overrides,\r\n        };\r\n      } else {\r\n        sections[section] = overrides;\r\n      }\r\n    });\r\n\r\n    const { datasourceAndVizType } = sections;\r\n\r\n    // list of datasource-specific controls that should be removed\r\n    const invalidControls =\r\n      datasourceType === 'table'\r\n        ? ['granularity', 'druid_time_origin']\r\n        : ['granularity_sqla', 'time_grain_sqla'];\r\n\r\n    return [datasourceAndVizType]\r\n      .concat(controlPanelSections)\r\n      .filter(section => !!section)\r\n      .map(section => {\r\n        const { controlSetRows } = section;\r\n        return {\r\n          ...section,\r\n          controlSetRows:\r\n            controlSetRows?.map(row =>\r\n              row\r\n                .filter(\r\n                  control =>\r\n                    typeof control !== 'string' ||\r\n                    !invalidControls.includes(control),\r\n                )\r\n                .map(item => expandControlConfig(item, controlOverrides)),\r\n            ) || [],\r\n        };\r\n      });\r\n  },\r\n);\r\n\r\n/**\r\n * Get the clean and processed control panel sections\r\n */\r\nexport function getSectionsToRender(\r\n  vizType: string,\r\n  datasourceType: DatasourceType,\r\n) {\r\n  const controlPanelConfig =\r\n    // TODO: update `chartControlPanelRegistry` type to use ControlPanelConfig\r\n    (getChartControlPanelRegistry().get(vizType) as ControlPanelConfig) || {};\r\n  return getMemoizedSectionsToRender(datasourceType, controlPanelConfig);\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport * from './getSectionsToRender';\r\nexport * from './getControlConfig';\r\nexport * from './getControlState';\r\nexport * from './getFormDataFromControls';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n/**\r\n * This file exports all controls available for use in the different visualization types\r\n *\r\n * While the React components located in `controls/components` represent different\r\n * types of controls (CheckboxControl, SelectControl, TextControl, ...), the controls here\r\n * represent instances of control types, that can be reused across visualization types.\r\n *\r\n * When controls are reused across viz types, their values are carried over as a user\r\n * changes the chart types.\r\n *\r\n * While the keys defined in the control itself get passed to the controlType as props,\r\n * here's a list of the keys that are common to all controls, and as a result define the\r\n * control interface:\r\n *\r\n * - type: the control type, referencing a React component of the same name\r\n * - label: the label as shown in the control's header\r\n * - description: shown in the info tooltip of the control's header\r\n * - default: the default value when opening a new chart, or changing visualization type\r\n * - renderTrigger: a bool that defines whether the visualization should be re-rendered\r\n     when changed. This should `true` for controls that only affect the rendering (client side)\r\n     and don't affect the query or backend data processing as those require to re run a query\r\n     and fetch the data\r\n * - validators: an array of functions that will receive the value of the component and\r\n     should return error messages when the value is not valid. The error message gets\r\n     bubbled up to the control header, section header and query panel header.\r\n * - warning: text shown as a tooltip on a warning icon in the control's header\r\n * - error: text shown as a tooltip on a error icon in the control's header\r\n * - mapStateToProps: a function that receives the App's state and return an object of k/v\r\n     to overwrite configuration at runtime. This is useful to alter a component based on\r\n     anything external to it, like another control's value. For instance it's possible to\r\n     show a warning based on the value of another component. It's also possible to bind\r\n     arbitrary data from the redux store to the component this way.\r\n * - tabOverride: set to 'data' if you want to force a renderTrigger to show up on the `Data`\r\n     tab, otherwise `renderTrigger: true` components will show up on the `Style` tab.\r\n *\r\n * Note that the keys defined in controls in this file that are not listed above represent\r\n * props specific for the React component defined as `type`. Also note that this module work\r\n * in tandem with `controlPanels/index.js` that defines how controls are composed into sections for\r\n * each and every visualization type.\r\n */\r\nimport React from 'react';\r\nimport {\r\n  t,\r\n  getCategoricalSchemeRegistry,\r\n  getSequentialSchemeRegistry,\r\n  legacyValidateInteger,\r\n  validateNonEmpty,\r\n} from '@superset-ui/core';\r\nimport { formatSelectOptions } from 'src/modules/utils';\r\nimport { TIME_FILTER_LABELS } from './constants';\r\nimport { StyledColumnOption } from './components/optionRenderers';\r\n\r\nconst categoricalSchemeRegistry = getCategoricalSchemeRegistry();\r\nconst sequentialSchemeRegistry = getSequentialSchemeRegistry();\r\n\r\nexport const PRIMARY_COLOR = { r: 0, g: 122, b: 135, a: 1 };\r\n\r\n// input choices & options\r\nexport const D3_FORMAT_OPTIONS = [\r\n  ['SMART_NUMBER', 'Adaptative formating'],\r\n  ['~g', 'Original value'],\r\n  [',d', ',d (12345.432 => 12,345)'],\r\n  ['.1s', '.1s (12345.432 => 10k)'],\r\n  ['.3s', '.3s (12345.432 => 12.3k)'],\r\n  [',.1%', ',.1% (12345.432 => 1,234,543.2%)'],\r\n  ['.3%', '.3% (12345.432 => 1234543.200%)'],\r\n  ['.4r', '.4r (12345.432 => 12350)'],\r\n  [',.3f', ',.3f (12345.432 => 12,345.432)'],\r\n  ['+,', '+, (12345.432 => +12,345.432)'],\r\n  ['$,.2f', '$,.2f (12345.432 => $12,345.43)'],\r\n  ['DURATION', 'Duration in ms (66000 => 1m 6s)'],\r\n  ['DURATION_SUB', 'Duration in ms (100.40008 => 100ms 400µs 80ns)'],\r\n];\r\n\r\nconst ROW_LIMIT_OPTIONS = [10, 50, 100, 250, 500, 1000, 5000, 10000, 50000];\r\n\r\nconst SERIES_LIMITS = [0, 5, 10, 25, 50, 100, 500];\r\n\r\nexport const D3_FORMAT_DOCS =\r\n  'D3 format syntax: https://github.com/d3/d3-format';\r\n\r\nexport const D3_TIME_FORMAT_OPTIONS = [\r\n  ['smart_date', 'Adaptative formating'],\r\n  ['%d/%m/%Y', '%d/%m/%Y | 14/01/2019'],\r\n  ['%m/%d/%Y', '%m/%d/%Y | 01/14/2019'],\r\n  ['%Y-%m-%d', '%Y-%m-%d | 2019-01-14'],\r\n  ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S | 2019-01-14 01:32:10'],\r\n  ['%d-%m-%Y %H:%M:%S', '%Y-%m-%d %H:%M:%S | 14-01-2019 01:32:10'],\r\n  ['%H:%M:%S', '%H:%M:%S | 01:32:10'],\r\n];\r\n\r\nconst timeColumnOption = {\r\n  verbose_name: 'Time',\r\n  column_name: '__timestamp',\r\n  description: t(\r\n    'A reference to the [Time] configuration, taking granularity into ' +\r\n      'account',\r\n  ),\r\n};\r\n\r\nconst groupByControl = {\r\n  type: 'SelectControl',\r\n  multi: true,\r\n  freeForm: true,\r\n  label: t('Group by'),\r\n  default: [],\r\n  includeTime: false,\r\n  description: t('One or many controls to group by'),\r\n  optionRenderer: c => <StyledColumnOption column={c} showType />,\r\n  valueRenderer: c => <StyledColumnOption column={c} />,\r\n  valueKey: 'column_name',\r\n  allowAll: true,\r\n  filterOption: ({ data: opt }, text) =>\r\n    (opt.column_name &&\r\n      opt.column_name.toLowerCase().indexOf(text.toLowerCase()) >= 0) ||\r\n    (opt.verbose_name &&\r\n      opt.verbose_name.toLowerCase().indexOf(text.toLowerCase()) >= 0),\r\n  promptTextCreator: label => label,\r\n  mapStateToProps: (state, control) => {\r\n    const newState = {};\r\n    if (state.datasource) {\r\n      newState.options = state.datasource.columns.filter(c => c.groupby);\r\n      if (control && control.includeTime) {\r\n        newState.options.push(timeColumnOption);\r\n      }\r\n    }\r\n    return newState;\r\n  },\r\n  commaChoosesOption: false,\r\n};\r\n\r\nconst metrics = {\r\n  type: 'MetricsControl',\r\n  multi: true,\r\n  label: t('Metrics'),\r\n  validators: [validateNonEmpty],\r\n  mapStateToProps: state => {\r\n    const { datasource } = state;\r\n    return {\r\n      columns: datasource ? datasource.columns : [],\r\n      savedMetrics: datasource ? datasource.metrics : [],\r\n      datasourceType: datasource && datasource.type,\r\n    };\r\n  },\r\n  description: t('One or many metrics to display'),\r\n};\r\nconst metric = {\r\n  ...metrics,\r\n  multi: false,\r\n  label: t('Metric'),\r\n  description: t('Metric'),\r\n};\r\n\r\nexport function columnChoices(datasource) {\r\n  if (datasource && datasource.columns) {\r\n    return datasource.columns\r\n      .map(col => [col.column_name, col.verbose_name || col.column_name])\r\n      .sort((opt1, opt2) =>\r\n        opt1[1].toLowerCase() > opt2[1].toLowerCase() ? 1 : -1,\r\n      );\r\n  }\r\n  return [];\r\n}\r\n\r\nexport const controls = {\r\n  metrics,\r\n\r\n  metric,\r\n\r\n  datasource: {\r\n    type: 'DatasourceControl',\r\n    label: t('Dataset'),\r\n    default: null,\r\n    description: null,\r\n    mapStateToProps: ({ datasource }) => ({\r\n      datasource,\r\n      isEditable: !!datasource,\r\n    }),\r\n  },\r\n\r\n  viz_type: {\r\n    type: 'VizTypeControl',\r\n    label: t('Visualization type'),\r\n    default: 'table',\r\n    description: t('The type of visualization to display'),\r\n  },\r\n\r\n  color_picker: {\r\n    label: t('Fixed color'),\r\n    description: t('Use this to define a static color for all circles'),\r\n    type: 'ColorPickerControl',\r\n    default: PRIMARY_COLOR,\r\n    renderTrigger: true,\r\n  },\r\n\r\n  metric_2: {\r\n    ...metric,\r\n    label: t('Right axis metric'),\r\n    clearable: true,\r\n    description: t('Choose a metric for right axis'),\r\n  },\r\n\r\n  linear_color_scheme: {\r\n    type: 'ColorSchemeControl',\r\n    label: t('Linear color scheme'),\r\n    choices: () =>\r\n      sequentialSchemeRegistry.values().map(value => [value.id, value.label]),\r\n    default: sequentialSchemeRegistry.getDefaultKey(),\r\n    clearable: false,\r\n    description: '',\r\n    renderTrigger: true,\r\n    schemes: () => sequentialSchemeRegistry.getMap(),\r\n    isLinear: true,\r\n  },\r\n\r\n  secondary_metric: {\r\n    ...metric,\r\n    label: t('Color metric'),\r\n    default: null,\r\n    validators: [],\r\n    description: t('A metric to use for color'),\r\n  },\r\n\r\n  groupby: groupByControl,\r\n\r\n  columns: {\r\n    ...groupByControl,\r\n    label: t('Columns'),\r\n    description: t('One or many controls to pivot as columns'),\r\n  },\r\n\r\n  druid_time_origin: {\r\n    type: 'SelectControl',\r\n    freeForm: true,\r\n    label: TIME_FILTER_LABELS.druid_time_origin,\r\n    choices: [\r\n      ['', 'default'],\r\n      ['now', 'now'],\r\n    ],\r\n    default: null,\r\n    description: t(\r\n      'Defines the origin where time buckets start, ' +\r\n        'accepts natural dates as in `now`, `sunday` or `1970-01-01`',\r\n    ),\r\n  },\r\n\r\n  granularity: {\r\n    type: 'SelectControl',\r\n    freeForm: true,\r\n    label: TIME_FILTER_LABELS.granularity,\r\n    default: 'one day',\r\n    choices: [\r\n      [null, 'all'],\r\n      ['PT5S', '5 seconds'],\r\n      ['PT30S', '30 seconds'],\r\n      ['PT1M', '1 minute'],\r\n      ['PT5M', '5 minutes'],\r\n      ['PT30M', '30 minutes'],\r\n      ['PT1H', '1 hour'],\r\n      ['PT6H', '6 hour'],\r\n      ['P1D', '1 day'],\r\n      ['P7D', '7 days'],\r\n      ['P1W', 'week'],\r\n      ['week_starting_sunday', 'week starting Sunday'],\r\n      ['week_ending_saturday', 'week ending Saturday'],\r\n      ['P1M', 'month'],\r\n      ['P3M', 'quarter'],\r\n      ['P1Y', 'year'],\r\n    ],\r\n    description: t(\r\n      'The time granularity for the visualization. Note that you ' +\r\n        'can type and use simple natural language as in `10 seconds`, ' +\r\n        '`1 day` or `56 weeks`',\r\n    ),\r\n  },\r\n\r\n  granularity_sqla: {\r\n    type: 'SelectControl',\r\n    label: TIME_FILTER_LABELS.granularity_sqla,\r\n    description: t(\r\n      'The time column for the visualization. Note that you ' +\r\n        'can define arbitrary expression that return a DATETIME ' +\r\n        'column in the table. Also note that the ' +\r\n        'filter below is applied against this column or ' +\r\n        'expression',\r\n    ),\r\n    clearable: false,\r\n    optionRenderer: c => <StyledColumnOption column={c} showType />,\r\n    valueRenderer: c => <StyledColumnOption column={c} />,\r\n    valueKey: 'column_name',\r\n    mapStateToProps: state => {\r\n      const props = {};\r\n      if (state.datasource) {\r\n        props.choices = state.datasource.granularity_sqla;\r\n        props.default = null;\r\n        if (state.datasource.main_dttm_col) {\r\n          props.default = state.datasource.main_dttm_col;\r\n        } else if (props.choices && props.choices.length > 0) {\r\n          props.default = props.choices[0].column_name;\r\n        }\r\n      }\r\n      return props;\r\n    },\r\n  },\r\n\r\n  time_grain_sqla: {\r\n    type: 'SelectControl',\r\n    label: TIME_FILTER_LABELS.time_grain_sqla,\r\n    default: 'P1D',\r\n    description: t(\r\n      'The time granularity for the visualization. This ' +\r\n        'applies a date transformation to alter ' +\r\n        'your time column and defines a new time granularity. ' +\r\n        'The options here are defined on a per database ' +\r\n        'engine basis in the Superset source code.',\r\n    ),\r\n    mapStateToProps: state => ({\r\n      choices: state.datasource ? state.datasource.time_grain_sqla : null,\r\n    }),\r\n  },\r\n\r\n  time_range: {\r\n    type: 'DateFilterControl',\r\n    freeForm: true,\r\n    label: TIME_FILTER_LABELS.time_range,\r\n    default: t('No filter'), // this value is translated, but the backend wouldn't understand a translated value?\r\n    description: t(\r\n      'The time range for the visualization. All relative times, e.g. \"Last month\", ' +\r\n        '\"Last 7 days\", \"now\", etc. are evaluated on the server using the server\\'s ' +\r\n        'local time (sans timezone). All tooltips and placeholder times are expressed ' +\r\n        'in UTC (sans timezone). The timestamps are then evaluated by the database ' +\r\n        \"using the engine's local timezone. Note one can explicitly set the timezone \" +\r\n        'per the ISO 8601 format if specifying either the start and/or end time.',\r\n    ),\r\n    mapStateToProps: ({ form_data: formData }) => ({\r\n      // eslint-disable-next-line camelcase\r\n      endpoints: formData?.time_range_endpoints,\r\n    }),\r\n  },\r\n\r\n  row_limit: {\r\n    type: 'SelectControl',\r\n    freeForm: true,\r\n    label: t('Row limit'),\r\n    validators: [legacyValidateInteger],\r\n    default: 10000,\r\n    choices: formatSelectOptions(ROW_LIMIT_OPTIONS),\r\n  },\r\n\r\n  limit: {\r\n    type: 'SelectControl',\r\n    freeForm: true,\r\n    label: t('Series limit'),\r\n    validators: [legacyValidateInteger],\r\n    choices: formatSelectOptions(SERIES_LIMITS),\r\n    description: t(\r\n      'Limits the number of time series that get displayed. A sub query ' +\r\n        '(or an extra phase where sub queries are not supported) is applied to limit ' +\r\n        'the number of time series that get fetched and displayed. This feature is useful ' +\r\n        'when grouping by high cardinality dimension(s).',\r\n    ),\r\n  },\r\n\r\n  timeseries_limit_metric: {\r\n    type: 'MetricsControl',\r\n    label: t('Sort by'),\r\n    default: null,\r\n    clearable: true,\r\n    description: t('Metric used to define the top series'),\r\n    mapStateToProps: state => ({\r\n      columns: state.datasource ? state.datasource.columns : [],\r\n      savedMetrics: state.datasource ? state.datasource.metrics : [],\r\n      datasourceType: state.datasource && state.datasource.type,\r\n    }),\r\n  },\r\n\r\n  series: {\r\n    ...groupByControl,\r\n    label: t('Series'),\r\n    multi: false,\r\n    default: null,\r\n    description: t(\r\n      'Defines the grouping of entities. ' +\r\n        'Each series is shown as a specific color on the chart and ' +\r\n        'has a legend toggle',\r\n    ),\r\n  },\r\n\r\n  entity: {\r\n    ...groupByControl,\r\n    label: t('Entity'),\r\n    default: null,\r\n    multi: false,\r\n    validators: [validateNonEmpty],\r\n    description: t('This defines the element to be plotted on the chart'),\r\n  },\r\n\r\n  x: {\r\n    ...metric,\r\n    label: t('X Axis'),\r\n    description: t('Metric assigned to the [X] axis'),\r\n    default: null,\r\n  },\r\n\r\n  y: {\r\n    ...metric,\r\n    label: t('Y Axis'),\r\n    default: null,\r\n    description: t('Metric assigned to the [Y] axis'),\r\n  },\r\n\r\n  size: {\r\n    ...metric,\r\n    label: t('Bubble size'),\r\n    default: null,\r\n  },\r\n\r\n  y_axis_format: {\r\n    type: 'SelectControl',\r\n    freeForm: true,\r\n    label: t('Y Axis Format'),\r\n    renderTrigger: true,\r\n    default: 'SMART_NUMBER',\r\n    choices: D3_FORMAT_OPTIONS,\r\n    description: D3_FORMAT_DOCS,\r\n    mapStateToProps: state => {\r\n      const showWarning =\r\n        state.controls &&\r\n        state.controls.comparison_type &&\r\n        state.controls.comparison_type.value === 'percentage';\r\n      return {\r\n        warning: showWarning\r\n          ? t(\r\n              'When `Calculation type` is set to \"Percentage change\", the Y ' +\r\n                'Axis Format is forced to `.1%`',\r\n            )\r\n          : null,\r\n        disabled: showWarning,\r\n      };\r\n    },\r\n  },\r\n\r\n  adhoc_filters: {\r\n    type: 'AdhocFilterControl',\r\n    label: t('Filters'),\r\n    default: null,\r\n    description: '',\r\n    mapStateToProps: state => ({\r\n      columns: state.datasource\r\n        ? state.datasource.columns.filter(c => c.filterable)\r\n        : [],\r\n      savedMetrics: state.datasource ? state.datasource.metrics : [],\r\n      datasource: state.datasource,\r\n    }),\r\n  },\r\n\r\n  color_scheme: {\r\n    type: 'ColorSchemeControl',\r\n    label: t('Color scheme'),\r\n    default: categoricalSchemeRegistry.getDefaultKey(),\r\n    renderTrigger: true,\r\n    choices: () => categoricalSchemeRegistry.keys().map(s => [s, s]),\r\n    description: t('The color scheme for rendering chart'),\r\n    schemes: () => categoricalSchemeRegistry.getMap(),\r\n  },\r\n\r\n  label_colors: {\r\n    type: 'ColorMapControl',\r\n    label: t('Color map'),\r\n    default: {},\r\n    renderTrigger: true,\r\n    mapStateToProps: state => ({\r\n      colorNamespace: state.form_data.color_namespace,\r\n      colorScheme: state.form_data.color_scheme,\r\n    }),\r\n  },\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport { useCallback, useEffect } from 'react';\r\n/* eslint camelcase: 0 */\r\nimport URI from 'urijs';\r\nimport {\r\n  buildQueryContext,\r\n  ensureIsArray,\r\n  getChartBuildQueryRegistry,\r\n  getChartMetadataRegistry,\r\n} from '@superset-ui/core';\r\nimport { availableDomains } from 'src/utils/hostNamesConfig';\r\nimport { safeStringify } from 'src/utils/safeStringify';\r\nimport { URL_PARAMS } from 'src/constants';\r\nimport { MULTI_OPERATORS } from 'src/explore/constants';\r\nimport { DashboardStandaloneMode } from 'src/dashboard/util/constants';\r\n\r\nconst MAX_URL_LENGTH = 8000;\r\n\r\nexport function getChartKey(explore) {\r\n  const { slice } = explore;\r\n  return slice ? slice.slice_id : 0;\r\n}\r\n\r\nlet requestCounter = 0;\r\nexport function getHostName(allowDomainSharding = false) {\r\n  let currentIndex = 0;\r\n  if (allowDomainSharding) {\r\n    currentIndex = requestCounter % availableDomains.length;\r\n    requestCounter += 1;\r\n\r\n    // if domain sharding is enabled, skip main domain for fetching chart API\r\n    // leave main domain free for other calls like fav star, save change, etc.\r\n    // to make dashboard be responsive when it's loading large number of charts\r\n    if (currentIndex === 0) {\r\n      currentIndex += 1;\r\n      requestCounter += 1;\r\n    }\r\n  }\r\n  return availableDomains[currentIndex];\r\n}\r\n\r\nexport function getAnnotationJsonUrl(slice_id, form_data, isNative, force) {\r\n  if (slice_id === null || slice_id === undefined) {\r\n    return null;\r\n  }\r\n  const uri = URI(window.location.search);\r\n  const endpoint = isNative ? 'annotation_json' : 'slice_json';\r\n  return uri\r\n    .pathname(`/superset/${endpoint}/${slice_id}`)\r\n    .search({\r\n      form_data: safeStringify(form_data, (key, value) =>\r\n        value === null ? undefined : value,\r\n      ),\r\n      force,\r\n    })\r\n    .toString();\r\n}\r\n\r\nexport function getURIDirectory(endpointType = 'base') {\r\n  // Building the directory part of the URI\r\n  if (\r\n    ['full', 'json', 'csv', 'query', 'results', 'samples'].includes(\r\n      endpointType,\r\n    )\r\n  ) {\r\n    return '/superset/explore_json/';\r\n  }\r\n  return '/superset/explore/';\r\n}\r\n\r\nexport function getExploreLongUrl(\r\n  formData,\r\n  endpointType,\r\n  allowOverflow = true,\r\n  extraSearch = {},\r\n) {\r\n  if (!formData.datasource) {\r\n    return null;\r\n  }\r\n\r\n  const uri = new URI('/');\r\n  const directory = getURIDirectory(endpointType);\r\n  const search = uri.search(true);\r\n  Object.keys(extraSearch).forEach(key => {\r\n    search[key] = extraSearch[key];\r\n  });\r\n  search.form_data = safeStringify(formData);\r\n  if (endpointType === URL_PARAMS.standalone.name) {\r\n    search.standalone = DashboardStandaloneMode.HIDE_NAV;\r\n  }\r\n  const url = uri.directory(directory).search(search).toString();\r\n  if (!allowOverflow && url.length > MAX_URL_LENGTH) {\r\n    const minimalFormData = {\r\n      datasource: formData.datasource,\r\n      viz_type: formData.viz_type,\r\n    };\r\n    return getExploreLongUrl(minimalFormData, endpointType, false, {\r\n      URL_IS_TOO_LONG_TO_SHARE: null,\r\n    });\r\n  }\r\n  return url;\r\n}\r\n\r\nexport function getChartDataUri({ path, qs, allowDomainSharding = false }) {\r\n  // The search params from the window.location are carried through,\r\n  // but can be specified with curUrl (used for unit tests to spoof\r\n  // the window.location).\r\n  let uri = new URI({\r\n    protocol: window.location.protocol.slice(0, -1),\r\n    hostname: getHostName(allowDomainSharding),\r\n    port: window.location.port ? window.location.port : '',\r\n    path,\r\n  });\r\n  if (qs) {\r\n    uri = uri.search(qs);\r\n  }\r\n  return uri;\r\n}\r\n\r\nexport function getExploreUrl({\r\n  formData,\r\n  endpointType = 'base',\r\n  force = false,\r\n  curUrl = null,\r\n  requestParams = {},\r\n  allowDomainSharding = false,\r\n  method = 'POST',\r\n}) {\r\n  if (!formData.datasource) {\r\n    return null;\r\n  }\r\n  let uri = getChartDataUri({ path: '/', allowDomainSharding });\r\n  if (curUrl) {\r\n    uri = URI(URI(curUrl).search());\r\n  }\r\n\r\n  const directory = getURIDirectory(endpointType);\r\n\r\n  // Building the querystring (search) part of the URI\r\n  const search = uri.search(true);\r\n  const { slice_id, extra_filters, adhoc_filters, viz_type } = formData;\r\n  if (slice_id) {\r\n    const form_data = { slice_id };\r\n    if (method === 'GET') {\r\n      form_data.viz_type = viz_type;\r\n      if (extra_filters && extra_filters.length) {\r\n        form_data.extra_filters = extra_filters;\r\n      }\r\n      if (adhoc_filters && adhoc_filters.length) {\r\n        form_data.adhoc_filters = adhoc_filters;\r\n      }\r\n    }\r\n    search.form_data = safeStringify(form_data);\r\n  }\r\n  if (force) {\r\n    search.force = 'true';\r\n  }\r\n  if (endpointType === 'csv') {\r\n    search.csv = 'true';\r\n  }\r\n  if (endpointType === URL_PARAMS.standalone.name) {\r\n    search.standalone = '1';\r\n  }\r\n  if (endpointType === 'query') {\r\n    search.query = 'true';\r\n  }\r\n  if (endpointType === 'results') {\r\n    search.results = 'true';\r\n  }\r\n  if (endpointType === 'samples') {\r\n    search.samples = 'true';\r\n  }\r\n  const paramNames = Object.keys(requestParams);\r\n  if (paramNames.length) {\r\n    paramNames.forEach(name => {\r\n      if (requestParams.hasOwnProperty(name)) {\r\n        search[name] = requestParams[name];\r\n      }\r\n    });\r\n  }\r\n  return uri.search(search).directory(directory).toString();\r\n}\r\n\r\nexport const shouldUseLegacyApi = formData => {\r\n  const vizMetadata = getChartMetadataRegistry().get(formData.viz_type);\r\n  return vizMetadata ? vizMetadata.useLegacyApi : false;\r\n};\r\n\r\nexport const buildV1ChartDataPayload = ({\r\n  formData,\r\n  force,\r\n  resultFormat,\r\n  resultType,\r\n  setDataMask,\r\n  ownState,\r\n}) => {\r\n  const buildQuery =\r\n    getChartBuildQueryRegistry().get(formData.viz_type) ??\r\n    (buildQueryformData =>\r\n      buildQueryContext(buildQueryformData, baseQueryObject => [\r\n        {\r\n          ...baseQueryObject,\r\n        },\r\n      ]));\r\n  return buildQuery(\r\n    {\r\n      ...formData,\r\n      force,\r\n      result_format: resultFormat,\r\n      result_type: resultType,\r\n    },\r\n    {\r\n      ownState,\r\n      hooks: {\r\n        setDataMask,\r\n      },\r\n    },\r\n  );\r\n};\r\n\r\nexport const getLegacyEndpointType = ({ resultType, resultFormat }) =>\r\n  resultFormat === 'csv' ? resultFormat : resultType;\r\n\r\nexport function postForm(url, payload, target = '_blank') {\r\n  if (!url) {\r\n    return;\r\n  }\r\n\r\n  const hiddenForm = document.createElement('form');\r\n  hiddenForm.action = url;\r\n  hiddenForm.method = 'POST';\r\n  hiddenForm.target = target;\r\n  const token = document.createElement('input');\r\n  token.type = 'hidden';\r\n  token.name = 'csrf_token';\r\n  token.value = (document.getElementById('csrf_token') || {}).value;\r\n  hiddenForm.appendChild(token);\r\n  const data = document.createElement('input');\r\n  data.type = 'hidden';\r\n  data.name = 'form_data';\r\n  data.value = safeStringify(payload);\r\n  hiddenForm.appendChild(data);\r\n\r\n  document.body.appendChild(hiddenForm);\r\n  hiddenForm.submit();\r\n  document.body.removeChild(hiddenForm);\r\n}\r\n\r\nexport const exportChart = ({\r\n  formData,\r\n  resultFormat = 'json',\r\n  resultType = 'full',\r\n  force = false,\r\n  ownState = {},\r\n}) => {\r\n  let url;\r\n  let payload;\r\n  if (shouldUseLegacyApi(formData)) {\r\n    const endpointType = getLegacyEndpointType({ resultFormat, resultType });\r\n    url = getExploreUrl({\r\n      formData,\r\n      endpointType,\r\n      allowDomainSharding: false,\r\n    });\r\n    payload = formData;\r\n  } else {\r\n    url = '/api/v1/chart/data';\r\n    payload = buildV1ChartDataPayload({\r\n      formData,\r\n      force,\r\n      resultFormat,\r\n      resultType,\r\n      ownState,\r\n    });\r\n  }\r\n  postForm(url, payload);\r\n};\r\n\r\nexport const exploreChart = formData => {\r\n  const url = getExploreUrl({\r\n    formData,\r\n    endpointType: 'base',\r\n    allowDomainSharding: false,\r\n  });\r\n  postForm(url, formData);\r\n};\r\n\r\nexport const useDebouncedEffect = (effect, delay, deps) => {\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const callback = useCallback(effect, deps);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      callback();\r\n    }, delay);\r\n\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [callback, delay]);\r\n};\r\n\r\nexport const getSimpleSQLExpression = (subject, operator, comparator) => {\r\n  const isMulti = MULTI_OPERATORS.has(operator);\r\n  let expression = subject ?? '';\r\n  if (subject && operator) {\r\n    expression += ` ${operator}`;\r\n    const firstValue =\r\n      isMulti && Array.isArray(comparator) ? comparator[0] : comparator;\r\n    const comparatorArray = ensureIsArray(comparator);\r\n    const isString =\r\n      firstValue !== undefined && Number.isNaN(Number(firstValue));\r\n    const quote = isString ? \"'\" : '';\r\n    const [prefix, suffix] = isMulti ? ['(', ')'] : ['', ''];\r\n    const formattedComparators = comparatorArray.map(\r\n      val =>\r\n        `${quote}${isString ? String(val).replace(\"'\", \"''\") : val}${quote}`,\r\n    );\r\n    if (comparatorArray.length > 0) {\r\n      expression += ` ${prefix}${formattedComparators.join(', ')}${suffix}`;\r\n    }\r\n  }\r\n  return expression;\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n/* eslint camelcase: 0 */\r\nimport { getChartControlPanelRegistry } from '@superset-ui/core';\r\nimport { getAllControlsState, getFormDataFromControls } from './controlUtils';\r\nimport { controls } from './controls';\r\n\r\nfunction handleDeprecatedControls(formData) {\r\n  // Reacffectation / handling of deprecated controls\r\n  /* eslint-disable no-param-reassign */\r\n\r\n  // y_axis_zero was a boolean forcing 0 to be part of the Y Axis\r\n  if (formData.y_axis_zero) {\r\n    formData.y_axis_bounds = [0, null];\r\n  }\r\n}\r\n\r\nexport function getControlsState(state, inputFormData) {\r\n  /*\r\n   * Gets a new controls object to put in the state. The controls object\r\n   * is similar to the configuration control with only the controls\r\n   * related to the current viz_type, materializes mapStateToProps functions,\r\n   * adds value keys coming from inputFormData passed here. This can't be an action creator\r\n   * just yet because it's used in both the explore and dashboard views.\r\n   * */\r\n  // Getting a list of active control names for the current viz\r\n  const formData = { ...inputFormData };\r\n  const vizType =\r\n    formData.viz_type || state.common.conf.DEFAULT_VIZ_TYPE || 'table';\r\n\r\n  handleDeprecatedControls(formData);\r\n\r\n  const controlsState = getAllControlsState(\r\n    vizType,\r\n    state.datasource.type,\r\n    state,\r\n    formData,\r\n  );\r\n\r\n  const controlPanelConfig = getChartControlPanelRegistry().get(vizType) || {};\r\n  if (controlPanelConfig.onInit) {\r\n    return controlPanelConfig.onInit(controlsState);\r\n  }\r\n\r\n  return controlsState;\r\n}\r\n\r\nexport function applyDefaultFormData(inputFormData) {\r\n  const datasourceType = inputFormData.datasource.split('__')[1];\r\n  const vizType = inputFormData.viz_type;\r\n  const controlsState = getAllControlsState(vizType, datasourceType, null, {\r\n    ...inputFormData,\r\n  });\r\n  const controlFormData = getFormDataFromControls(controlsState);\r\n\r\n  const formData = {};\r\n  Object.keys(controlsState)\r\n    .concat(Object.keys(inputFormData))\r\n    .forEach(controlName => {\r\n      if (inputFormData[controlName] === undefined) {\r\n        formData[controlName] = controlFormData[controlName];\r\n      } else {\r\n        formData[controlName] = inputFormData[controlName];\r\n      }\r\n    });\r\n\r\n  return formData;\r\n}\r\n\r\nconst defaultControls = { ...controls };\r\nObject.keys(controls).forEach(f => {\r\n  defaultControls[f].value = controls[f].default;\r\n});\r\n\r\nconst defaultState = {\r\n  controls: defaultControls,\r\n  form_data: getFormDataFromControls(defaultControls),\r\n};\r\n\r\nexport { defaultControls, defaultState };\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n// Log event names ------------------------------------------------------------\r\nexport const LOG_ACTIONS_LOAD_CHART = 'load_chart';\r\nexport const LOG_ACTIONS_RENDER_CHART = 'render_chart';\r\nexport const LOG_ACTIONS_HIDE_BROWSER_TAB = 'hide_browser_tab';\r\n\r\nexport const LOG_ACTIONS_MOUNT_DASHBOARD = 'mount_dashboard';\r\nexport const LOG_ACTIONS_MOUNT_EXPLORER = 'mount_explorer';\r\n\r\nexport const LOG_ACTIONS_SELECT_DASHBOARD_TAB = 'select_dashboard_tab';\r\nexport const LOG_ACTIONS_FORCE_REFRESH_CHART = 'force_refresh_chart';\r\nexport const LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS = 'change_explore_controls';\r\nexport const LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD = 'toggle_edit_dashboard';\r\nexport const LOG_ACTIONS_FORCE_REFRESH_DASHBOARD = 'force_refresh_dashboard';\r\nexport const LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD =\r\n  'periodic_render_dashboard';\r\nexport const LOG_ACTIONS_EXPLORE_DASHBOARD_CHART = 'explore_dashboard_chart';\r\nexport const LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART =\r\n  'export_csv_dashboard_chart';\r\nexport const LOG_ACTIONS_CHANGE_DASHBOARD_FILTER = 'change_dashboard_filter';\r\nexport const LOG_ACTIONS_OMNIBAR_TRIGGERED = 'omnibar_triggered';\r\n\r\n// Log event types --------------------------------------------------------------\r\nexport const LOG_EVENT_TYPE_TIMING = new Set([\r\n  LOG_ACTIONS_LOAD_CHART,\r\n  LOG_ACTIONS_RENDER_CHART,\r\n  LOG_ACTIONS_HIDE_BROWSER_TAB,\r\n]);\r\nexport const LOG_EVENT_TYPE_USER = new Set([\r\n  LOG_ACTIONS_MOUNT_DASHBOARD,\r\n  LOG_ACTIONS_SELECT_DASHBOARD_TAB,\r\n  LOG_ACTIONS_EXPLORE_DASHBOARD_CHART,\r\n  LOG_ACTIONS_FORCE_REFRESH_CHART,\r\n  LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART,\r\n  LOG_ACTIONS_CHANGE_DASHBOARD_FILTER,\r\n  LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS,\r\n  LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD,\r\n  LOG_ACTIONS_FORCE_REFRESH_DASHBOARD,\r\n  LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD,\r\n  LOG_ACTIONS_OMNIBAR_TRIGGERED,\r\n  LOG_ACTIONS_MOUNT_EXPLORER,\r\n]);\r\n\r\nexport const Logger = {\r\n  // note that this returns ms since page load, NOT ms since epoch\r\n  getTimestamp() {\r\n    return Math.round(window.performance.now());\r\n  },\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { Dispatch } from 'redux';\r\n\r\nexport const LOG_EVENT = 'LOG_EVENT';\r\n\r\nexport function logEvent(eventName: string, eventData: Record<string, any>) {\r\n  return (dispatch: Dispatch) =>\r\n    dispatch({\r\n      type: LOG_EVENT,\r\n      payload: {\r\n        eventName,\r\n        eventData,\r\n      },\r\n    });\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { ensureIsArray, makeApi, SupersetClient } from '@superset-ui/core';\r\nimport { SupersetError } from 'src/components/ErrorMessage/types';\r\nimport { FeatureFlag, isFeatureEnabled } from '../featureFlags';\r\nimport {\r\n  getClientErrorObject,\r\n  parseErrorJson,\r\n} from '../utils/getClientErrorObject';\r\n\r\ntype AsyncEvent = {\r\n  id?: string | null;\r\n  channel_id: string;\r\n  job_id: string;\r\n  user_id?: string;\r\n  status: string;\r\n  errors?: SupersetError[];\r\n  result_url: string | null;\r\n};\r\n\r\ntype CachedDataResponse = {\r\n  status: string;\r\n  data: any;\r\n};\r\ntype AppConfig = Record<string, any>;\r\ntype ListenerFn = (asyncEvent: AsyncEvent) => Promise<any>;\r\n\r\nconst TRANSPORT_POLLING = 'polling';\r\nconst TRANSPORT_WS = 'ws';\r\nconst JOB_STATUS = {\r\n  PENDING: 'pending',\r\n  RUNNING: 'running',\r\n  ERROR: 'error',\r\n  DONE: 'done',\r\n};\r\nconst LOCALSTORAGE_KEY = 'last_async_event_id';\r\nconst POLLING_URL = '/api/v1/async_event/';\r\nconst MAX_RETRIES = 6;\r\nconst RETRY_DELAY = 100;\r\n\r\nlet config: AppConfig;\r\nlet transport: string;\r\nlet pollingDelayMs: number;\r\nlet pollingTimeoutId: number;\r\nlet listenersByJobId: Record<string, ListenerFn>;\r\nlet retriesByJobId: Record<string, number>;\r\nlet lastReceivedEventId: string | null | undefined;\r\n\r\nexport const init = (appConfig?: AppConfig) => {\r\n  if (!isFeatureEnabled(FeatureFlag.GLOBAL_ASYNC_QUERIES)) return;\r\n  if (pollingTimeoutId) clearTimeout(pollingTimeoutId);\r\n\r\n  listenersByJobId = {};\r\n  retriesByJobId = {};\r\n  lastReceivedEventId = null;\r\n\r\n  if (appConfig) {\r\n    config = appConfig;\r\n  } else {\r\n    // load bootstrap data from DOM\r\n    const appContainer = document.getElementById('app');\r\n    if (appContainer) {\r\n      const bootstrapData = JSON.parse(\r\n        appContainer?.getAttribute('data-bootstrap') || '{}',\r\n      );\r\n      config = bootstrapData?.common?.conf;\r\n    } else {\r\n      config = {};\r\n      console.warn('asyncEvent: app config data not found');\r\n    }\r\n  }\r\n  transport = config.GLOBAL_ASYNC_QUERIES_TRANSPORT || TRANSPORT_POLLING;\r\n  pollingDelayMs = config.GLOBAL_ASYNC_QUERIES_POLLING_DELAY || 500;\r\n\r\n  try {\r\n    lastReceivedEventId = localStorage.getItem(LOCALSTORAGE_KEY);\r\n  } catch (err) {\r\n    console.warn('Failed to fetch last event Id from localStorage');\r\n  }\r\n\r\n  if (transport === TRANSPORT_POLLING) {\r\n    loadEventsFromApi();\r\n  }\r\n  if (transport === TRANSPORT_WS) {\r\n    wsConnect();\r\n  }\r\n};\r\n\r\nconst addListener = (id: string, fn: any) => {\r\n  listenersByJobId[id] = fn;\r\n};\r\n\r\nconst removeListener = (id: string) => {\r\n  if (!listenersByJobId[id]) return;\r\n  delete listenersByJobId[id];\r\n};\r\n\r\nexport const waitForAsyncData = async (asyncResponse: AsyncEvent) =>\r\n  new Promise((resolve, reject) => {\r\n    const jobId = asyncResponse.job_id;\r\n    const listener = async (asyncEvent: AsyncEvent) => {\r\n      switch (asyncEvent.status) {\r\n        case JOB_STATUS.DONE: {\r\n          let { data, status } = await fetchCachedData(asyncEvent); // eslint-disable-line prefer-const\r\n          data = ensureIsArray(data);\r\n          if (status === 'success') {\r\n            resolve(data);\r\n          } else {\r\n            reject(data);\r\n          }\r\n          break;\r\n        }\r\n        case JOB_STATUS.ERROR: {\r\n          const err = parseErrorJson(asyncEvent);\r\n          reject(err);\r\n          break;\r\n        }\r\n        default: {\r\n          console.warn('received event with status', asyncEvent.status);\r\n        }\r\n      }\r\n      removeListener(jobId);\r\n    };\r\n    addListener(jobId, listener);\r\n  });\r\n\r\nconst fetchEvents = makeApi<\r\n  { last_id?: string | null },\r\n  { result: AsyncEvent[] }\r\n>({\r\n  method: 'GET',\r\n  endpoint: POLLING_URL,\r\n});\r\n\r\nconst fetchCachedData = async (\r\n  asyncEvent: AsyncEvent,\r\n): Promise<CachedDataResponse> => {\r\n  let status = 'success';\r\n  let data;\r\n  try {\r\n    const { json } = await SupersetClient.get({\r\n      endpoint: String(asyncEvent.result_url),\r\n    });\r\n    data = 'result' in json ? json.result : json;\r\n  } catch (response) {\r\n    status = 'error';\r\n    data = await getClientErrorObject(response);\r\n  }\r\n\r\n  return { status, data };\r\n};\r\n\r\nconst setLastId = (asyncEvent: AsyncEvent) => {\r\n  lastReceivedEventId = asyncEvent.id;\r\n  try {\r\n    localStorage.setItem(LOCALSTORAGE_KEY, lastReceivedEventId as string);\r\n  } catch (err) {\r\n    console.warn('Error saving event Id to localStorage', err);\r\n  }\r\n};\r\n\r\nconst loadEventsFromApi = async () => {\r\n  const eventArgs = lastReceivedEventId ? { last_id: lastReceivedEventId } : {};\r\n  if (Object.keys(listenersByJobId).length) {\r\n    try {\r\n      const { result: events } = await fetchEvents(eventArgs);\r\n      if (events && events.length) await processEvents(events);\r\n    } catch (err) {\r\n      console.warn(err);\r\n    }\r\n  }\r\n\r\n  if (transport === TRANSPORT_POLLING) {\r\n    pollingTimeoutId = window.setTimeout(loadEventsFromApi, pollingDelayMs);\r\n  }\r\n};\r\n\r\nexport const processEvents = async (events: AsyncEvent[]) => {\r\n  events.forEach((asyncEvent: AsyncEvent) => {\r\n    const jobId = asyncEvent.job_id;\r\n    const listener = listenersByJobId[jobId];\r\n    if (listener) {\r\n      listener(asyncEvent);\r\n      delete retriesByJobId[jobId];\r\n    } else {\r\n      // handle race condition where event is received\r\n      // before listener is registered\r\n      if (!retriesByJobId[jobId]) retriesByJobId[jobId] = 0;\r\n      retriesByJobId[jobId] += 1;\r\n\r\n      if (retriesByJobId[jobId] <= MAX_RETRIES) {\r\n        setTimeout(() => {\r\n          processEvents([asyncEvent]);\r\n        }, RETRY_DELAY * retriesByJobId[jobId]);\r\n      } else {\r\n        delete retriesByJobId[jobId];\r\n        console.warn('listener not found for job_id', asyncEvent.job_id);\r\n      }\r\n    }\r\n    setLastId(asyncEvent);\r\n  });\r\n};\r\n\r\nconst wsConnectMaxRetries = 6;\r\nconst wsConnectErrorDelay = 2500;\r\nlet wsConnectRetries = 0;\r\nlet wsConnectTimeout: any;\r\nlet ws: WebSocket;\r\n\r\nconst wsConnect = (): void => {\r\n  let url = config.GLOBAL_ASYNC_QUERIES_WEBSOCKET_URL;\r\n  if (lastReceivedEventId) url += `?last_id=${lastReceivedEventId}`;\r\n  ws = new WebSocket(url);\r\n\r\n  ws.addEventListener('open', event => {\r\n    console.log('WebSocket connected');\r\n    clearTimeout(wsConnectTimeout);\r\n    wsConnectRetries = 0;\r\n  });\r\n\r\n  ws.addEventListener('close', event => {\r\n    wsConnectTimeout = setTimeout(() => {\r\n      wsConnectRetries += 1;\r\n      if (wsConnectRetries <= wsConnectMaxRetries) {\r\n        wsConnect();\r\n      } else {\r\n        console.warn('WebSocket not available, falling back to async polling');\r\n        loadEventsFromApi();\r\n      }\r\n    }, wsConnectErrorDelay);\r\n  });\r\n\r\n  ws.addEventListener('error', event => {\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/readyState\r\n    if (ws.readyState < 2) ws.close();\r\n  });\r\n\r\n  ws.addEventListener('message', async event => {\r\n    let events: AsyncEvent[] = [];\r\n    try {\r\n      events = [JSON.parse(event.data)];\r\n      await processEvents(events);\r\n    } catch (err) {\r\n      console.warn(err);\r\n    }\r\n  });\r\n};\r\n\r\ninit();\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nfunction extractTypes(metadata) {\r\n  return Object.keys(metadata).reduce((prev, key) => {\r\n    const result = prev;\r\n    result[key] = key;\r\n    return result;\r\n  }, {});\r\n}\r\n\r\nexport const ANNOTATION_TYPES_METADATA = {\r\n  FORMULA: {\r\n    value: 'FORMULA',\r\n    label: 'Formula',\r\n  },\r\n  EVENT: {\r\n    value: 'EVENT',\r\n    label: 'Event',\r\n    supportNativeSource: true,\r\n  },\r\n  INTERVAL: {\r\n    value: 'INTERVAL',\r\n    label: 'Interval',\r\n    supportNativeSource: true,\r\n  },\r\n  TIME_SERIES: {\r\n    value: 'TIME_SERIES',\r\n    label: 'Time series',\r\n  },\r\n};\r\n\r\nexport const ANNOTATION_TYPES = extractTypes(ANNOTATION_TYPES_METADATA);\r\n\r\nexport const DEFAULT_ANNOTATION_TYPE = ANNOTATION_TYPES.FORMULA;\r\n\r\nexport const ANNOTATION_SOURCE_TYPES_METADATA = {\r\n  NATIVE: {\r\n    value: 'NATIVE',\r\n    label: 'Superset annotation',\r\n  },\r\n};\r\n\r\nexport const ANNOTATION_SOURCE_TYPES = extractTypes(\r\n  ANNOTATION_SOURCE_TYPES_METADATA,\r\n);\r\n\r\nexport function requiresQuery(annotationSourceType) {\r\n  return !!annotationSourceType;\r\n}\r\n\r\nconst NATIVE_COLUMN_NAMES = {\r\n  timeColumn: 'start_dttm',\r\n  intervalEndColumn: 'end_dttm',\r\n  titleColumn: 'short_descr',\r\n  descriptionColumns: ['long_descr'],\r\n};\r\n\r\nexport function applyNativeColumns(annotation) {\r\n  if (annotation.sourceType === ANNOTATION_SOURCE_TYPES.NATIVE) {\r\n    return { ...annotation, ...NATIVE_COLUMN_NAMES };\r\n  }\r\n  return annotation;\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport {\r\n  initFeatureFlags,\r\n  isFeatureEnabled,\r\n  FeatureFlag,\r\n} from 'src/featureFlags';\r\n\r\nfunction getDomainsConfig() {\r\n  const appContainer = document.getElementById('app');\r\n  if (!appContainer) {\r\n    return [];\r\n  }\r\n\r\n  const bootstrapData = JSON.parse(appContainer.getAttribute('data-bootstrap'));\r\n  // this module is a little special, it may be loaded before index.jsx,\r\n  // where window.featureFlags get initialized\r\n  // eslint-disable-next-line camelcase\r\n  initFeatureFlags(bootstrapData?.common?.feature_flags);\r\n  const availableDomains = new Set([window.location.hostname]);\r\n  if (\r\n    isFeatureEnabled(FeatureFlag.ALLOW_DASHBOARD_DOMAIN_SHARDING) &&\r\n    bootstrapData &&\r\n    bootstrapData.common &&\r\n    bootstrapData.common.conf &&\r\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS\r\n  ) {\r\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach(hostName => {\r\n      availableDomains.add(hostName);\r\n    });\r\n  }\r\n  return Array.from(availableDomains);\r\n}\r\n\r\nexport const availableDomains = getDomainsConfig();\r\n\r\nexport const allowCrossDomain = availableDomains.length > 1;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\n/**\r\n * A Stringify function that will not crash when it runs into circular JSON references,\r\n * unlike JSON.stringify. Any circular references are simply omitted, as if there had\r\n * been no data present\r\n * @param object any JSON object to be stringified\r\n */\r\nexport function safeStringify(object: any): string {\r\n  const cache = new Set();\r\n  return JSON.stringify(object, (key, value) => {\r\n    if (typeof value === 'object' && value !== null) {\r\n      if (cache.has(value)) {\r\n        // We've seen this object before\r\n        try {\r\n          // Quick deep copy to duplicate if this is a repeat rather than a circle.\r\n          return JSON.parse(JSON.stringify(value));\r\n        } catch (err) {\r\n          // Discard key if value cannot be duplicated.\r\n          return; // eslint-disable-line consistent-return\r\n        }\r\n      }\r\n      // Store the value in our cache.\r\n      cache.add(value);\r\n    }\r\n    return value;\r\n  });\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { JsonObject } from '@superset-ui/core';\r\n\r\ntype TestWithIdType<T> = T extends string ? string : { 'data-test': string };\r\n\r\n// Using bem standard\r\nexport const testWithId = <T extends string | JsonObject = JsonObject>(\r\n  prefix?: string,\r\n  idOnly = false,\r\n) => (id?: string): TestWithIdType<T> => {\r\n  if (!id && prefix) {\r\n    return (idOnly ? prefix : { 'data-test': prefix }) as TestWithIdType<T>;\r\n  }\r\n  if (id && !prefix) {\r\n    return (idOnly ? id : { 'data-test': id }) as TestWithIdType<T>;\r\n  }\r\n  if (!id && !prefix) {\r\n    console.warn('testWithId function has missed \"prefix\" and \"id\" params');\r\n    return (idOnly ? '' : { 'data-test': '' }) as TestWithIdType<T>;\r\n  }\r\n  const newId = `${prefix}__${id}`;\r\n  return (idOnly ? newId : { 'data-test': newId }) as TestWithIdType<T>;\r\n};\r\n","/* Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\n/* eslint-disable global-require */\r\nconst loadModule = () => {\r\n  let module;\r\n  try {\r\n    // @ts-ignore\r\n    module = require('../../../superset_text'); // eslint-disable-line import/no-unresolved\r\n  } catch (e) {\r\n    module = {};\r\n  }\r\n  return module;\r\n};\r\n\r\nconst supersetText = loadModule();\r\n\r\nexport default supersetText;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport rison from 'rison';\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { makeApi, SupersetClient, t, JsonObject } from '@superset-ui/core';\r\n\r\nimport { createErrorHandler } from 'src/views/CRUD/utils';\r\nimport { FetchDataConfig } from 'src/components/ListView';\r\nimport { FilterValue } from 'src/components/ListView/types';\r\nimport Chart, { Slice } from 'src/types/Chart';\r\nimport copyTextToClipboard from 'src/utils/copy';\r\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\r\nimport { FavoriteStatus, ImportResourceName, DatabaseObject } from './types';\r\n\r\ninterface ListViewResourceState<D extends object = any> {\r\n  loading: boolean;\r\n  collection: D[];\r\n  count: number;\r\n  permissions: string[];\r\n  lastFetchDataConfig: FetchDataConfig | null;\r\n  bulkSelectEnabled: boolean;\r\n  lastFetched?: string;\r\n}\r\n\r\nconst parsedErrorMessage = (\r\n  errorMessage: Record<string, string[] | string> | string,\r\n) => {\r\n  if (typeof errorMessage === 'string') {\r\n    return errorMessage;\r\n  }\r\n  return Object.entries(errorMessage)\r\n    .map(([key, value]) => {\r\n      if (Array.isArray(value)) {\r\n        return `(${key}) ${value.join(', ')}`;\r\n      }\r\n      return `(${key}) ${value}`;\r\n    })\r\n    .join('\\n');\r\n};\r\n\r\nexport function useListViewResource<D extends object = any>(\r\n  resource: string,\r\n  resourceLabel: string, // resourceLabel for translations\r\n  handleErrorMsg: (errorMsg: string) => void,\r\n  infoEnable = true,\r\n  defaultCollectionValue: D[] = [],\r\n  baseFilters?: FilterValue[], // must be memoized\r\n  initialLoadingState = true,\r\n) {\r\n  const [state, setState] = useState<ListViewResourceState<D>>({\r\n    count: 0,\r\n    collection: defaultCollectionValue,\r\n    loading: initialLoadingState,\r\n    lastFetchDataConfig: null,\r\n    permissions: [],\r\n    bulkSelectEnabled: false,\r\n  });\r\n\r\n  function updateState(update: Partial<ListViewResourceState<D>>) {\r\n    setState(currentState => ({ ...currentState, ...update }));\r\n  }\r\n\r\n  function toggleBulkSelect() {\r\n    updateState({ bulkSelectEnabled: !state.bulkSelectEnabled });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!infoEnable) return;\r\n    SupersetClient.get({\r\n      endpoint: `/api/v1/${resource}/_info?q=${rison.encode({\r\n        keys: ['permissions'],\r\n      })}`,\r\n    }).then(\r\n      ({ json: infoJson = {} }) => {\r\n        updateState({\r\n          permissions: infoJson.permissions,\r\n        });\r\n      },\r\n      createErrorHandler(errMsg =>\r\n        handleErrorMsg(\r\n          t(\r\n            'An error occurred while fetching %s info: %s',\r\n            resourceLabel,\r\n            errMsg,\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }, []);\r\n\r\n  function hasPerm(perm: string) {\r\n    if (!state.permissions.length) {\r\n      return false;\r\n    }\r\n\r\n    return Boolean(state.permissions.find(p => p === perm));\r\n  }\r\n\r\n  const fetchData = useCallback(\r\n    ({\r\n      pageIndex,\r\n      pageSize,\r\n      sortBy,\r\n      filters: filterValues,\r\n    }: FetchDataConfig) => {\r\n      // set loading state, cache the last config for refreshing data.\r\n      updateState({\r\n        lastFetchDataConfig: {\r\n          filters: filterValues,\r\n          pageIndex,\r\n          pageSize,\r\n          sortBy,\r\n        },\r\n        loading: true,\r\n      });\r\n\r\n      const filterExps = (baseFilters || [])\r\n        .concat(filterValues)\r\n        .map(({ id, operator: opr, value }) => ({\r\n          col: id,\r\n          opr,\r\n          value,\r\n        }));\r\n\r\n      const queryParams = rison.encode({\r\n        order_column: sortBy[0].id,\r\n        order_direction: sortBy[0].desc ? 'desc' : 'asc',\r\n        page: pageIndex,\r\n        page_size: pageSize,\r\n        ...(filterExps.length ? { filters: filterExps } : {}),\r\n      });\r\n\r\n      return SupersetClient.get({\r\n        endpoint: `/api/v1/${resource}/?q=${queryParams}`,\r\n      })\r\n        .then(\r\n          ({ json = {} }) => {\r\n            updateState({\r\n              collection: json.result,\r\n              count: json.count,\r\n              lastFetched: new Date().toISOString(),\r\n            });\r\n          },\r\n          createErrorHandler(errMsg =>\r\n            handleErrorMsg(\r\n              t(\r\n                'An error occurred while fetching %ss: %s',\r\n                resourceLabel,\r\n                errMsg,\r\n              ),\r\n            ),\r\n          ),\r\n        )\r\n        .finally(() => {\r\n          updateState({ loading: false });\r\n        });\r\n    },\r\n    [baseFilters],\r\n  );\r\n\r\n  return {\r\n    state: {\r\n      loading: state.loading,\r\n      resourceCount: state.count,\r\n      resourceCollection: state.collection,\r\n      bulkSelectEnabled: state.bulkSelectEnabled,\r\n      lastFetched: state.lastFetched,\r\n    },\r\n    setResourceCollection: (update: D[]) =>\r\n      updateState({\r\n        collection: update,\r\n      }),\r\n    hasPerm,\r\n    fetchData,\r\n    toggleBulkSelect,\r\n    refreshData: (provideConfig?: FetchDataConfig) => {\r\n      if (state.lastFetchDataConfig) {\r\n        return fetchData(state.lastFetchDataConfig);\r\n      }\r\n      if (provideConfig) {\r\n        return fetchData(provideConfig);\r\n      }\r\n      return null;\r\n    },\r\n  };\r\n}\r\n\r\n// In the same vein as above, a hook for viewing a single instance of a resource (given id)\r\ninterface SingleViewResourceState<D extends object = any> {\r\n  loading: boolean;\r\n  resource: D | null;\r\n  error: string | Record<string, string[] | string> | null;\r\n}\r\n\r\nexport function useSingleViewResource<D extends object = any>(\r\n  resourceName: string,\r\n  resourceLabel: string, // resourceLabel for translations\r\n  handleErrorMsg: (errorMsg: string) => void,\r\n) {\r\n  const [state, setState] = useState<SingleViewResourceState<D>>({\r\n    loading: false,\r\n    resource: null,\r\n    error: null,\r\n  });\r\n\r\n  function updateState(update: Partial<SingleViewResourceState<D>>) {\r\n    setState(currentState => ({ ...currentState, ...update }));\r\n  }\r\n\r\n  const fetchResource = useCallback(\r\n    (resourceID: number) => {\r\n      // Set loading state\r\n      updateState({\r\n        loading: true,\r\n      });\r\n\r\n      return SupersetClient.get({\r\n        endpoint: `/api/v1/${resourceName}/${resourceID}`,\r\n      })\r\n        .then(\r\n          ({ json = {} }) => {\r\n            updateState({\r\n              resource: json.result,\r\n              error: null,\r\n            });\r\n            return json.result;\r\n          },\r\n          createErrorHandler((errMsg: Record<string, string[] | string>) => {\r\n            handleErrorMsg(\r\n              t(\r\n                'An error occurred while fetching %ss: %s',\r\n                resourceLabel,\r\n                parsedErrorMessage(errMsg),\r\n              ),\r\n            );\r\n\r\n            updateState({\r\n              error: errMsg,\r\n            });\r\n          }),\r\n        )\r\n        .finally(() => {\r\n          updateState({ loading: false });\r\n        });\r\n    },\r\n    [handleErrorMsg, resourceName, resourceLabel],\r\n  );\r\n\r\n  const createResource = useCallback(\r\n    (resource: D) => {\r\n      // Set loading state\r\n      updateState({\r\n        loading: true,\r\n      });\r\n\r\n      return SupersetClient.post({\r\n        endpoint: `/api/v1/${resourceName}/`,\r\n        body: JSON.stringify(resource),\r\n        headers: { 'Content-Type': 'application/json' },\r\n      })\r\n        .then(\r\n          ({ json = {} }) => {\r\n            updateState({\r\n              resource: { id: json.id, ...json.result },\r\n              error: null,\r\n            });\r\n            return json.id;\r\n          },\r\n          createErrorHandler((errMsg: Record<string, string[] | string>) => {\r\n            handleErrorMsg(\r\n              t(\r\n                'An error occurred while creating %ss: %s',\r\n                resourceLabel,\r\n                parsedErrorMessage(errMsg),\r\n              ),\r\n            );\r\n\r\n            updateState({\r\n              error: errMsg,\r\n            });\r\n          }),\r\n        )\r\n        .finally(() => {\r\n          updateState({ loading: false });\r\n        });\r\n    },\r\n    [handleErrorMsg, resourceName, resourceLabel],\r\n  );\r\n\r\n  const updateResource = useCallback(\r\n    (resourceID: number, resource: D) => {\r\n      // Set loading state\r\n      updateState({\r\n        loading: true,\r\n      });\r\n\r\n      return SupersetClient.put({\r\n        endpoint: `/api/v1/${resourceName}/${resourceID}`,\r\n        body: JSON.stringify(resource),\r\n        headers: { 'Content-Type': 'application/json' },\r\n      })\r\n        .then(\r\n          ({ json = {} }) => {\r\n            updateState({\r\n              resource: json.result,\r\n              error: null,\r\n            });\r\n            return json.result;\r\n          },\r\n          createErrorHandler(errMsg => {\r\n            handleErrorMsg(\r\n              t(\r\n                'An error occurred while fetching %ss: %s',\r\n                resourceLabel,\r\n                JSON.stringify(errMsg),\r\n              ),\r\n            );\r\n\r\n            updateState({\r\n              error: errMsg,\r\n            });\r\n\r\n            return errMsg;\r\n          }),\r\n        )\r\n        .finally(() => {\r\n          updateState({ loading: false });\r\n        });\r\n    },\r\n    [handleErrorMsg, resourceName, resourceLabel],\r\n  );\r\n  const clearError = () =>\r\n    updateState({\r\n      error: null,\r\n    });\r\n\r\n  return {\r\n    state,\r\n    setResource: (update: D) =>\r\n      updateState({\r\n        resource: update,\r\n      }),\r\n    fetchResource,\r\n    createResource,\r\n    updateResource,\r\n    clearError,\r\n  };\r\n}\r\n\r\ninterface ImportResourceState {\r\n  loading: boolean;\r\n  passwordsNeeded: string[];\r\n  alreadyExists: string[];\r\n}\r\n\r\nexport function useImportResource(\r\n  resourceName: ImportResourceName,\r\n  resourceLabel: string, // resourceLabel for translations\r\n  handleErrorMsg: (errorMsg: string) => void,\r\n) {\r\n  const [state, setState] = useState<ImportResourceState>({\r\n    loading: false,\r\n    passwordsNeeded: [],\r\n    alreadyExists: [],\r\n  });\r\n\r\n  function updateState(update: Partial<ImportResourceState>) {\r\n    setState(currentState => ({ ...currentState, ...update }));\r\n  }\r\n\r\n  /* eslint-disable no-underscore-dangle */\r\n  const isNeedsPassword = (payload: any) =>\r\n    typeof payload === 'object' &&\r\n    Array.isArray(payload._schema) &&\r\n    payload._schema.length === 1 &&\r\n    payload._schema[0] === 'Must provide a password for the database';\r\n\r\n  const isAlreadyExists = (payload: any) =>\r\n    typeof payload === 'string' &&\r\n    payload.includes('already exists and `overwrite=true` was not passed');\r\n\r\n  const getPasswordsNeeded = (\r\n    errMsg: Record<string, Record<string, string[] | string>>,\r\n  ) =>\r\n    Object.entries(errMsg)\r\n      .filter(([, validationErrors]) => isNeedsPassword(validationErrors))\r\n      .map(([fileName]) => fileName);\r\n\r\n  const getAlreadyExists = (\r\n    errMsg: Record<string, Record<string, string[] | string>>,\r\n  ) =>\r\n    Object.entries(errMsg)\r\n      .filter(([, validationErrors]) => isAlreadyExists(validationErrors))\r\n      .map(([fileName]) => fileName);\r\n\r\n  const hasTerminalValidation = (\r\n    errMsg: Record<string, Record<string, string[] | string>>,\r\n  ) =>\r\n    Object.values(errMsg).some(\r\n      validationErrors =>\r\n        !isNeedsPassword(validationErrors) &&\r\n        !isAlreadyExists(validationErrors),\r\n    );\r\n\r\n  const importResource = useCallback(\r\n    (\r\n      bundle: File,\r\n      databasePasswords: Record<string, string> = {},\r\n      overwrite = false,\r\n    ) => {\r\n      // Set loading state\r\n      updateState({\r\n        loading: true,\r\n      });\r\n\r\n      const formData = new FormData();\r\n      formData.append('formData', bundle);\r\n\r\n      /* The import bundle never contains database passwords; if required\r\n       * they should be provided by the user during import.\r\n       */\r\n      if (databasePasswords) {\r\n        formData.append('passwords', JSON.stringify(databasePasswords));\r\n      }\r\n      /* If the imported model already exists the user needs to confirm\r\n       * that they want to overwrite it.\r\n       */\r\n      if (overwrite) {\r\n        formData.append('overwrite', 'true');\r\n      }\r\n\r\n      return SupersetClient.post({\r\n        endpoint: `/api/v1/${resourceName}/import/`,\r\n        body: formData,\r\n      })\r\n        .then(() => true)\r\n        .catch(response =>\r\n          getClientErrorObject(response).then(error => {\r\n            const errMsg = error.message || error.error;\r\n            if (typeof errMsg === 'string') {\r\n              handleErrorMsg(\r\n                t(\r\n                  'An error occurred while importing %s: %s',\r\n                  resourceLabel,\r\n                  parsedErrorMessage(errMsg),\r\n                ),\r\n              );\r\n              return false;\r\n            }\r\n            if (hasTerminalValidation(errMsg)) {\r\n              handleErrorMsg(\r\n                t(\r\n                  'An error occurred while importing %s: %s',\r\n                  resourceLabel,\r\n                  parsedErrorMessage(errMsg),\r\n                ),\r\n              );\r\n            } else {\r\n              updateState({\r\n                passwordsNeeded: getPasswordsNeeded(errMsg),\r\n                alreadyExists: getAlreadyExists(errMsg),\r\n              });\r\n            }\r\n            return false;\r\n          }),\r\n        )\r\n        .finally(() => {\r\n          updateState({ loading: false });\r\n        });\r\n    },\r\n    [],\r\n  );\r\n\r\n  return { state, importResource };\r\n}\r\n\r\nenum FavStarClassName {\r\n  CHART = 'slice',\r\n  DASHBOARD = 'Dashboard',\r\n}\r\n\r\ntype FavoriteStatusResponse = {\r\n  result: Array<{\r\n    id: string;\r\n    value: boolean;\r\n  }>;\r\n};\r\n\r\nconst favoriteApis = {\r\n  chart: makeApi<Array<string | number>, FavoriteStatusResponse>({\r\n    requestType: 'rison',\r\n    method: 'GET',\r\n    endpoint: '/api/v1/chart/favorite_status/',\r\n  }),\r\n  dashboard: makeApi<Array<string | number>, FavoriteStatusResponse>({\r\n    requestType: 'rison',\r\n    method: 'GET',\r\n    endpoint: '/api/v1/dashboard/favorite_status/',\r\n  }),\r\n};\r\n\r\nexport function useFavoriteStatus(\r\n  type: 'chart' | 'dashboard',\r\n  ids: Array<string | number>,\r\n  handleErrorMsg: (message: string) => void,\r\n) {\r\n  const [favoriteStatus, setFavoriteStatus] = useState<FavoriteStatus>({});\r\n\r\n  const updateFavoriteStatus = (update: FavoriteStatus) =>\r\n    setFavoriteStatus(currentState => ({ ...currentState, ...update }));\r\n\r\n  useEffect(() => {\r\n    if (!ids.length) {\r\n      return;\r\n    }\r\n    favoriteApis[type](ids).then(\r\n      ({ result }) => {\r\n        const update = result.reduce((acc, element) => {\r\n          acc[element.id] = element.value;\r\n          return acc;\r\n        }, {});\r\n        updateFavoriteStatus(update);\r\n      },\r\n      createErrorHandler(errMsg =>\r\n        handleErrorMsg(\r\n          t('There was an error fetching the favorite status: %s', errMsg),\r\n        ),\r\n      ),\r\n    );\r\n  }, [ids, type, handleErrorMsg]);\r\n\r\n  const saveFaveStar = useCallback(\r\n    (id: number, isStarred: boolean) => {\r\n      const urlSuffix = isStarred ? 'unselect' : 'select';\r\n      SupersetClient.get({\r\n        endpoint: `/superset/favstar/${\r\n          type === 'chart' ? FavStarClassName.CHART : FavStarClassName.DASHBOARD\r\n        }/${id}/${urlSuffix}/`,\r\n      }).then(\r\n        ({ json }) => {\r\n          updateFavoriteStatus({\r\n            [id]: (json as { count: number })?.count > 0,\r\n          });\r\n        },\r\n        createErrorHandler(errMsg =>\r\n          handleErrorMsg(\r\n            t('There was an error saving the favorite status: %s', errMsg),\r\n          ),\r\n        ),\r\n      );\r\n    },\r\n    [type],\r\n  );\r\n\r\n  return [saveFaveStar, favoriteStatus] as const;\r\n}\r\n\r\nexport const useChartEditModal = (\r\n  setCharts: (charts: Array<Chart>) => void,\r\n  charts: Array<Chart>,\r\n) => {\r\n  const [\r\n    sliceCurrentlyEditing,\r\n    setSliceCurrentlyEditing,\r\n  ] = useState<Slice | null>(null);\r\n\r\n  function openChartEditModal(chart: Chart) {\r\n    setSliceCurrentlyEditing({\r\n      slice_id: chart.id,\r\n      slice_name: chart.slice_name,\r\n      description: chart.description,\r\n      cache_timeout: chart.cache_timeout,\r\n    });\r\n  }\r\n\r\n  function closeChartEditModal() {\r\n    setSliceCurrentlyEditing(null);\r\n  }\r\n\r\n  function handleChartUpdated(edits: Chart) {\r\n    // update the chart in our state with the edited info\r\n    const newCharts = charts.map((chart: Chart) =>\r\n      chart.id === edits.id ? { ...chart, ...edits } : chart,\r\n    );\r\n    setCharts(newCharts);\r\n  }\r\n\r\n  return {\r\n    sliceCurrentlyEditing,\r\n    handleChartUpdated,\r\n    openChartEditModal,\r\n    closeChartEditModal,\r\n  };\r\n};\r\n\r\nexport const copyQueryLink = (\r\n  id: number,\r\n  addDangerToast: (arg0: string) => void,\r\n  addSuccessToast: (arg0: string) => void,\r\n) => {\r\n  copyTextToClipboard(\r\n    `${window.location.origin}/superset/sqllab?savedQueryId=${id}`,\r\n  )\r\n    .then(() => {\r\n      addSuccessToast(t('Link Copied!'));\r\n    })\r\n    .catch(() => {\r\n      addDangerToast(t('Sorry, your browser does not support copying.'));\r\n    });\r\n};\r\n\r\nexport const testDatabaseConnection = (\r\n  connection: DatabaseObject,\r\n  handleErrorMsg: (errorMsg: string) => void,\r\n  addSuccessToast: (arg0: string) => void,\r\n) => {\r\n  SupersetClient.post({\r\n    endpoint: 'api/v1/database/test_connection',\r\n    body: JSON.stringify(connection),\r\n    headers: { 'Content-Type': 'application/json' },\r\n  }).then(\r\n    () => {\r\n      addSuccessToast(t('Connection looks good!'));\r\n    },\r\n    createErrorHandler((errMsg: Record<string, string[] | string> | string) => {\r\n      handleErrorMsg(t(`${t('ERROR: ')}${parsedErrorMessage(errMsg)}`));\r\n    }),\r\n  );\r\n};\r\n\r\nexport function useAvailableDatabases() {\r\n  const [availableDbs, setAvailableDbs] = useState<JsonObject | null>(null);\r\n\r\n  const getAvailable = useCallback(() => {\r\n    SupersetClient.get({\r\n      endpoint: `/api/v1/database/available`,\r\n    }).then(({ json }) => {\r\n      setAvailableDbs(json);\r\n    });\r\n  }, [setAvailableDbs]);\r\n\r\n  return [availableDbs, getAvailable] as const;\r\n}\r\n\r\nexport function useDatabaseValidation() {\r\n  const [validationErrors, setValidationErrors] = useState<JsonObject | null>(\r\n    null,\r\n  );\r\n  const getValidation = useCallback(\r\n    (database: Partial<DatabaseObject> | null) => {\r\n      SupersetClient.post({\r\n        endpoint: '/api/v1/database/validate_parameters',\r\n        body: JSON.stringify(database),\r\n        headers: { 'Content-Type': 'application/json' },\r\n      })\r\n        .then(() => {\r\n          setValidationErrors(null);\r\n        })\r\n        .catch(e => {\r\n          if (typeof e.json === 'function') {\r\n            e.json().then(({ errors = [] }: JsonObject) => {\r\n              const parsedErrors = errors\r\n                .filter(\r\n                  (error: { error_type: string }) =>\r\n                    error.error_type !== 'CONNECTION_MISSING_PARAMETERS_ERROR',\r\n                )\r\n                .reduce(\r\n                  (\r\n                    obj: {},\r\n                    {\r\n                      extra,\r\n                      message,\r\n                    }: {\r\n                      extra: { invalid?: string[] };\r\n                      message: string;\r\n                    },\r\n                  ) => {\r\n                    // if extra.invalid doesn't exist then the\r\n                    // error can't be mapped to a parameter\r\n                    // so leave it alone\r\n                    if (extra.invalid) {\r\n                      return { ...obj, [extra.invalid[0]]: message };\r\n                    }\r\n                    return obj;\r\n                  },\r\n                  {},\r\n                );\r\n              setValidationErrors(parsedErrors);\r\n            });\r\n          } else {\r\n            // eslint-disable-next-line no-console\r\n            console.error(e);\r\n          }\r\n        });\r\n    },\r\n    [setValidationErrors],\r\n  );\r\n\r\n  return [validationErrors, getValidation] as const;\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport {\r\n  t,\r\n  SupersetClient,\r\n  SupersetClientResponse,\r\n  logging,\r\n  styled,\r\n} from '@superset-ui/core';\r\nimport Chart from 'src/types/Chart';\r\nimport rison from 'rison';\r\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\r\nimport { FetchDataConfig } from 'src/components/ListView';\r\nimport SupersetText from 'src/utils/textUtils';\r\nimport { Dashboard, Filters, SavedQueryObject } from './types';\r\n\r\nconst createFetchResourceMethod = (method: string) => (\r\n  resource: string,\r\n  relation: string,\r\n  handleError: (error: Response) => void,\r\n  userId?: string | number,\r\n) => async (filterValue = '', pageIndex?: number, pageSize?: number) => {\r\n  const resourceEndpoint = `/api/v1/${resource}/${method}/${relation}`;\r\n  const options =\r\n    userId && pageIndex === 0 ? [{ label: 'me', value: userId }] : [];\r\n  try {\r\n    const queryParams = rison.encode({\r\n      ...(pageIndex ? { page: pageIndex } : {}),\r\n      ...(pageSize ? { page_size: pageSize } : {}),\r\n      ...(filterValue ? { filter: filterValue } : {}),\r\n    });\r\n    const { json = {} } = await SupersetClient.get({\r\n      endpoint: `${resourceEndpoint}?q=${queryParams}`,\r\n    });\r\n    const data = json?.result?.map(\r\n      ({ text: label, value }: { text: string; value: any }) => ({\r\n        label,\r\n        value,\r\n      }),\r\n    );\r\n\r\n    return options.concat(data);\r\n  } catch (e) {\r\n    handleError(e);\r\n  }\r\n  return [];\r\n};\r\n\r\nconst getParams = (filters?: Array<Filters>) => {\r\n  const params = {\r\n    order_column: 'changed_on_delta_humanized',\r\n    order_direction: 'desc',\r\n    page: 0,\r\n    page_size: 3,\r\n    filters,\r\n  };\r\n  if (!filters) delete params.filters;\r\n  return rison.encode(params);\r\n};\r\n\r\nexport const getEditedObjects = (userId: string | number) => {\r\n  const filters = {\r\n    edited: [\r\n      {\r\n        col: 'changed_by',\r\n        opr: 'rel_o_m',\r\n        value: `${userId}`,\r\n      },\r\n    ],\r\n  };\r\n  const batch = [\r\n    SupersetClient.get({\r\n      endpoint: `/api/v1/dashboard/?q=${getParams(filters.edited)}`,\r\n    }),\r\n    SupersetClient.get({\r\n      endpoint: `/api/v1/chart/?q=${getParams(filters.edited)}`,\r\n    }),\r\n  ];\r\n  return Promise.all(batch)\r\n    .then(([editedCharts, editedDashboards]) => {\r\n      const res = {\r\n        editedDash: editedDashboards.json?.result.slice(0, 3),\r\n        editedChart: editedCharts.json?.result.slice(0, 3),\r\n      };\r\n      return res;\r\n    })\r\n    .catch(err => err);\r\n};\r\n\r\nexport const getUserOwnedObjects = (\r\n  userId: string | number,\r\n  resource: string,\r\n) => {\r\n  const filters = {\r\n    created: [\r\n      {\r\n        col: 'created_by',\r\n        opr: 'rel_o_m',\r\n        value: `${userId}`,\r\n      },\r\n    ],\r\n  };\r\n  return SupersetClient.get({\r\n    endpoint: `/api/v1/${resource}/?q=${getParams(filters.created)}`,\r\n  }).then(res => res.json?.result);\r\n};\r\n\r\nexport const getRecentAcitivtyObjs = (\r\n  userId: string | number,\r\n  recent: string,\r\n  addDangerToast: (arg1: string, arg2: any) => any,\r\n) =>\r\n  SupersetClient.get({ endpoint: recent }).then(recentsRes => {\r\n    const res: any = {};\r\n    if (recentsRes.json.length === 0) {\r\n      const newBatch = [\r\n        SupersetClient.get({ endpoint: `/api/v1/chart/?q=${getParams()}` }),\r\n        SupersetClient.get({\r\n          endpoint: `/api/v1/dashboard/?q=${getParams()}`,\r\n        }),\r\n      ];\r\n      return Promise.all(newBatch)\r\n        .then(([chartRes, dashboardRes]) => {\r\n          res.examples = [...chartRes.json.result, ...dashboardRes.json.result];\r\n          return res;\r\n        })\r\n        .catch(errMsg =>\r\n          addDangerToast(\r\n            t('There was an error fetching your recent activity:'),\r\n            errMsg,\r\n          ),\r\n        );\r\n    }\r\n    res.viewed = recentsRes.json;\r\n    return res;\r\n  });\r\n\r\nexport const createFetchRelated = createFetchResourceMethod('related');\r\nexport const createFetchDistinct = createFetchResourceMethod('distinct');\r\n\r\nexport function createErrorHandler(\r\n  handleErrorFunc: (\r\n    errMsg?: string | Record<string, string[] | string>,\r\n  ) => void,\r\n) {\r\n  return async (e: SupersetClientResponse | string) => {\r\n    const parsedError = await getClientErrorObject(e);\r\n    // Taking the first error returned from the API\r\n    // @ts-ignore\r\n    const errorsArray = parsedError?.errors;\r\n    const config = await SupersetText;\r\n    if (\r\n      errorsArray &&\r\n      errorsArray.length &&\r\n      config &&\r\n      config.ERRORS &&\r\n      errorsArray[0].error_type in config.ERRORS\r\n    ) {\r\n      parsedError.message = config.ERRORS[errorsArray[0].error_type];\r\n    }\r\n    logging.error(e);\r\n    handleErrorFunc(parsedError.message || parsedError.error);\r\n  };\r\n}\r\n\r\nexport function handleChartDelete(\r\n  { id, slice_name: sliceName }: Chart,\r\n  addSuccessToast: (arg0: string) => void,\r\n  addDangerToast: (arg0: string) => void,\r\n  refreshData: (arg0?: FetchDataConfig | null) => void,\r\n  chartFilter?: string,\r\n  userId?: number,\r\n) {\r\n  const filters = {\r\n    pageIndex: 0,\r\n    pageSize: 3,\r\n    sortBy: [\r\n      {\r\n        id: 'changed_on_delta_humanized',\r\n        desc: true,\r\n      },\r\n    ],\r\n    filters: [\r\n      {\r\n        id: 'created_by',\r\n        operator: 'rel_o_m',\r\n        value: `${userId}`,\r\n      },\r\n    ],\r\n  };\r\n  SupersetClient.delete({\r\n    endpoint: `/api/v1/chart/${id}`,\r\n  }).then(\r\n    () => {\r\n      if (chartFilter === 'Mine') refreshData(filters);\r\n      else refreshData();\r\n      addSuccessToast(t('Deleted: %s', sliceName));\r\n    },\r\n    () => {\r\n      addDangerToast(t('There was an issue deleting: %s', sliceName));\r\n    },\r\n  );\r\n}\r\n\r\nexport function handleBulkChartExport(chartsToExport: Chart[]) {\r\n  return window.location.assign(\r\n    `/api/v1/chart/export/?q=${rison.encode(\r\n      chartsToExport.map(({ id }) => id),\r\n    )}`,\r\n  );\r\n}\r\n\r\nexport function handleBulkDashboardExport(dashboardsToExport: Dashboard[]) {\r\n  return window.location.assign(\r\n    `/api/v1/dashboard/export/?q=${rison.encode(\r\n      dashboardsToExport.map(({ id }) => id),\r\n    )}`,\r\n  );\r\n}\r\n\r\nexport function handleBulkSavedQueryExport(\r\n  savedQueriesToExport: SavedQueryObject[],\r\n) {\r\n  return window.location.assign(\r\n    `/api/v1/saved_query/export/?q=${rison.encode(\r\n      savedQueriesToExport.map(({ id }) => id),\r\n    )}`,\r\n  );\r\n}\r\n\r\nexport function handleDashboardDelete(\r\n  { id, dashboard_title: dashboardTitle }: Dashboard,\r\n  refreshData: (config?: FetchDataConfig | null) => void,\r\n  addSuccessToast: (arg0: string) => void,\r\n  addDangerToast: (arg0: string) => void,\r\n  dashboardFilter?: string,\r\n  userId?: number,\r\n) {\r\n  return SupersetClient.delete({\r\n    endpoint: `/api/v1/dashboard/${id}`,\r\n  }).then(\r\n    () => {\r\n      const filters = {\r\n        pageIndex: 0,\r\n        pageSize: 3,\r\n        sortBy: [\r\n          {\r\n            id: 'changed_on_delta_humanized',\r\n            desc: true,\r\n          },\r\n        ],\r\n        filters: [\r\n          {\r\n            id: 'owners',\r\n            operator: 'rel_m_m',\r\n            value: `${userId}`,\r\n          },\r\n        ],\r\n      };\r\n      if (dashboardFilter === 'Mine') refreshData(filters);\r\n      else refreshData();\r\n      addSuccessToast(t('Deleted: %s', dashboardTitle));\r\n    },\r\n    createErrorHandler(errMsg =>\r\n      addDangerToast(\r\n        t('There was an issue deleting %s: %s', dashboardTitle, errMsg),\r\n      ),\r\n    ),\r\n  );\r\n}\r\n\r\nexport function shortenSQL(sql: string, maxLines: number) {\r\n  let lines: string[] = sql.split('\\n');\r\n  if (lines.length >= maxLines) {\r\n    lines = lines.slice(0, maxLines);\r\n    lines.push('...');\r\n  }\r\n  return lines.join('\\n');\r\n}\r\n\r\nconst breakpoints = [576, 768, 992, 1200];\r\nexport const mq = breakpoints.map(bp => `@media (max-width: ${bp}px)`);\r\n\r\nexport const CardContainer = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(31%, 31%));\r\n  ${mq[3]} {\r\n    grid-template-columns: repeat(auto-fit, minmax(31%, 31%));\r\n  }\r\n  ${mq[2]} {\r\n    grid-template-columns: repeat(auto-fit, minmax(48%, 48%));\r\n  }\r\n  ${mq[1]} {\r\n    grid-template-columns: repeat(auto-fit, minmax(50%, 80%));\r\n  }\r\n  grid-gap: ${({ theme }) => theme.gridUnit * 8}px;\r\n  justify-content: left;\r\n  padding: ${({ theme }) => theme.gridUnit * 6}px;\r\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\r\n`;\r\n\r\nexport const CardStyles = styled.div`\r\n  cursor: pointer;\r\n  a {\r\n    text-decoration: none;\r\n  }\r\n`;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { debounce } from 'lodash';\r\nimport { max as d3Max } from 'd3-array';\r\nimport { AsyncCreatableSelect, CreatableSelect } from 'src/components/Select';\r\nimport Button from 'src/components/Button';\r\nimport { t, SupersetClient, ensureIsArray } from '@superset-ui/core';\r\n\r\nimport {\r\n  BOOL_FALSE_DISPLAY,\r\n  BOOL_TRUE_DISPLAY,\r\n  SLOW_DEBOUNCE,\r\n} from 'src/constants';\r\nimport { FormLabel } from 'src/components/Form';\r\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\r\nimport ControlRow from 'src/explore/components/ControlRow';\r\nimport Control from 'src/explore/components/Control';\r\nimport { controls } from 'src/explore/controls';\r\nimport { getExploreUrl } from 'src/explore/exploreUtils';\r\nimport OnPasteSelect from 'src/components/Select/OnPasteSelect';\r\nimport {\r\n  FILTER_CONFIG_ATTRIBUTES,\r\n  FILTER_OPTIONS_LIMIT,\r\n  TIME_FILTER_LABELS,\r\n  TIME_FILTER_MAP,\r\n} from 'src/explore/constants';\r\n\r\nimport './FilterBox.less';\r\n\r\n// a shortcut to a map key, used by many components\r\nexport const TIME_RANGE = TIME_FILTER_MAP.time_range;\r\n\r\nconst propTypes = {\r\n  chartId: PropTypes.number.isRequired,\r\n  origSelectedValues: PropTypes.object,\r\n  datasource: PropTypes.object.isRequired,\r\n  instantFiltering: PropTypes.bool,\r\n  filtersFields: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      field: PropTypes.string,\r\n      label: PropTypes.string,\r\n    }),\r\n  ),\r\n  filtersChoices: PropTypes.objectOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.string,\r\n        text: PropTypes.string,\r\n        filter: PropTypes.string,\r\n        metric: PropTypes.number,\r\n      }),\r\n    ),\r\n  ),\r\n  onChange: PropTypes.func,\r\n  onFilterMenuOpen: PropTypes.func,\r\n  onFilterMenuClose: PropTypes.func,\r\n  showDateFilter: PropTypes.bool,\r\n  showSqlaTimeGrain: PropTypes.bool,\r\n  showSqlaTimeColumn: PropTypes.bool,\r\n  showDruidTimeGrain: PropTypes.bool,\r\n  showDruidTimeOrigin: PropTypes.bool,\r\n};\r\nconst defaultProps = {\r\n  origSelectedValues: {},\r\n  onChange: () => {},\r\n  onFilterMenuOpen: () => {},\r\n  onFilterMenuClose: () => {},\r\n  showDateFilter: false,\r\n  showSqlaTimeGrain: false,\r\n  showSqlaTimeColumn: false,\r\n  showDruidTimeGrain: false,\r\n  showDruidTimeOrigin: false,\r\n  instantFiltering: false,\r\n};\r\n\r\nclass FilterBox extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedValues: props.origSelectedValues,\r\n      // this flag is used by non-instant filter, to make the apply button enabled/disabled\r\n      hasChanged: false,\r\n    };\r\n    this.debouncerCache = {};\r\n    this.maxValueCache = {};\r\n    this.changeFilter = this.changeFilter.bind(this);\r\n    this.onFilterMenuOpen = this.onFilterMenuOpen.bind(this);\r\n    this.onOpenDateFilterControl = this.onOpenDateFilterControl.bind(this);\r\n    this.onFilterMenuClose = this.onFilterMenuClose.bind(this);\r\n  }\r\n\r\n  onFilterMenuOpen(column) {\r\n    return this.props.onFilterMenuOpen(this.props.chartId, column);\r\n  }\r\n\r\n  onFilterMenuClose(column) {\r\n    return this.props.onFilterMenuClose(this.props.chartId, column);\r\n  }\r\n\r\n  onOpenDateFilterControl() {\r\n    return this.onFilterMenuOpen(TIME_RANGE);\r\n  }\r\n\r\n  onCloseDateFilterControl = () => this.onFilterMenuClose(TIME_RANGE);\r\n\r\n  getControlData(controlName) {\r\n    const { selectedValues } = this.state;\r\n    const control = {\r\n      ...controls[controlName], // TODO: make these controls ('druid_time_origin', 'granularity', 'granularity_sqla', 'time_grain_sqla') accessible from getControlsForVizType.\r\n      name: controlName,\r\n      key: `control-${controlName}`,\r\n      value: selectedValues[TIME_FILTER_MAP[controlName]],\r\n      actions: { setControlValue: this.changeFilter },\r\n    };\r\n    const mapFunc = control.mapStateToProps;\r\n    return mapFunc ? { ...control, ...mapFunc(this.props) } : control;\r\n  }\r\n\r\n  /**\r\n   * Get known max value of a column\r\n   */\r\n  getKnownMax(key, choices) {\r\n    this.maxValueCache[key] = Math.max(\r\n      this.maxValueCache[key] || 0,\r\n      d3Max(choices || this.props.filtersChoices[key] || [], x => x.metric),\r\n    );\r\n    return this.maxValueCache[key];\r\n  }\r\n\r\n  clickApply() {\r\n    const { selectedValues } = this.state;\r\n    this.setState({ hasChanged: false }, () => {\r\n      this.props.onChange(selectedValues, false);\r\n    });\r\n  }\r\n\r\n  changeFilter(filter, options) {\r\n    const fltr = TIME_FILTER_MAP[filter] || filter;\r\n    let vals = null;\r\n    if (options !== null) {\r\n      if (Array.isArray(options)) {\r\n        vals = options.map(opt => (typeof opt === 'string' ? opt : opt.value));\r\n      } else if (Object.values(TIME_FILTER_MAP).includes(fltr)) {\r\n        vals = options.value ?? options;\r\n      } else {\r\n        // must use array member for legacy extra_filters's value\r\n        vals = ensureIsArray(options.value ?? options);\r\n      }\r\n    }\r\n\r\n    this.setState(\r\n      prevState => ({\r\n        selectedValues: {\r\n          ...prevState.selectedValues,\r\n          [fltr]: vals,\r\n        },\r\n        hasChanged: true,\r\n      }),\r\n      () => {\r\n        if (this.props.instantFiltering) {\r\n          this.props.onChange({ [fltr]: vals }, false);\r\n        }\r\n      },\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Generate a debounce function that loads options for a specific column\r\n   */\r\n  debounceLoadOptions(key) {\r\n    if (!(key in this.debouncerCache)) {\r\n      this.debouncerCache[key] = debounce((input, callback) => {\r\n        this.loadOptions(key, input).then(callback);\r\n      }, SLOW_DEBOUNCE);\r\n    }\r\n    return this.debouncerCache[key];\r\n  }\r\n\r\n  /**\r\n   * Transform select options, add bar background\r\n   */\r\n  transformOptions(options, max) {\r\n    const maxValue = max === undefined ? d3Max(options, x => x.metric) : max;\r\n    return options.map(opt => {\r\n      const perc = Math.round((opt.metric / maxValue) * 100);\r\n      const color = 'lightgrey';\r\n      const backgroundImage = `linear-gradient(to right, ${color}, ${color} ${perc}%, rgba(0,0,0,0) ${perc}%`;\r\n      const style = { backgroundImage };\r\n      let label = opt.id;\r\n      if (label === true) {\r\n        label = BOOL_TRUE_DISPLAY;\r\n      } else if (label === false) {\r\n        label = BOOL_FALSE_DISPLAY;\r\n      }\r\n      return { value: opt.id, label, style };\r\n    });\r\n  }\r\n\r\n  async loadOptions(key, inputValue = '') {\r\n    const input = inputValue.toLowerCase();\r\n    const sortAsc = this.props.filtersFields.find(x => x.key === key).asc;\r\n    const formData = {\r\n      ...this.props.rawFormData,\r\n      adhoc_filters: inputValue\r\n        ? [\r\n            {\r\n              clause: 'WHERE',\r\n              expressionType: 'SIMPLE',\r\n              subject: key,\r\n              operator: 'ILIKE',\r\n              comparator: `%${input}%`,\r\n            },\r\n          ]\r\n        : null,\r\n    };\r\n\r\n    const { json } = await SupersetClient.get({\r\n      url: getExploreUrl({\r\n        formData,\r\n        endpointType: 'json',\r\n        method: 'GET',\r\n      }),\r\n    });\r\n    const options = (json?.data?.[key] || []).filter(x => x.id);\r\n    if (!options || options.length === 0) {\r\n      return [];\r\n    }\r\n    if (input) {\r\n      // sort those starts with search query to front\r\n      options.sort((a, b) => {\r\n        const labelA = a.id.toLowerCase();\r\n        const labelB = b.id.toLowerCase();\r\n        const textOrder = labelB.startsWith(input) - labelA.startsWith(input);\r\n        return textOrder === 0\r\n          ? (a.metric - b.metric) * (sortAsc ? 1 : -1)\r\n          : textOrder;\r\n      });\r\n    }\r\n    return this.transformOptions(options, this.getKnownMax(key, options));\r\n  }\r\n\r\n  renderDateFilter() {\r\n    const { showDateFilter } = this.props;\r\n    const label = TIME_FILTER_LABELS.time_range;\r\n    if (showDateFilter) {\r\n      return (\r\n        <div className=\"row space-1\">\r\n          <div\r\n            className=\"col-lg-12 col-xs-12\"\r\n            data-test=\"date-filter-container\"\r\n          >\r\n            <DateFilterControl\r\n              name={TIME_RANGE}\r\n              label={label}\r\n              description={t('Select start and end date')}\r\n              onChange={newValue => {\r\n                this.changeFilter(TIME_RANGE, newValue);\r\n              }}\r\n              onOpenDateFilterControl={this.onOpenDateFilterControl}\r\n              onCloseDateFilterControl={this.onCloseDateFilterControl}\r\n              value={this.state.selectedValues[TIME_RANGE] || 'No filter'}\r\n            />\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  renderDatasourceFilters() {\r\n    const {\r\n      showSqlaTimeGrain,\r\n      showSqlaTimeColumn,\r\n      showDruidTimeGrain,\r\n      showDruidTimeOrigin,\r\n    } = this.props;\r\n    const datasourceFilters = [];\r\n    const sqlaFilters = [];\r\n    const druidFilters = [];\r\n    if (showSqlaTimeGrain) sqlaFilters.push('time_grain_sqla');\r\n    if (showSqlaTimeColumn) sqlaFilters.push('granularity_sqla');\r\n    if (showDruidTimeGrain) druidFilters.push('granularity');\r\n    if (showDruidTimeOrigin) druidFilters.push('druid_time_origin');\r\n    if (sqlaFilters.length) {\r\n      datasourceFilters.push(\r\n        <ControlRow\r\n          key=\"sqla-filters\"\r\n          controls={sqlaFilters.map(control => (\r\n            <Control {...this.getControlData(control)} />\r\n          ))}\r\n        />,\r\n      );\r\n    }\r\n    if (druidFilters.length) {\r\n      datasourceFilters.push(\r\n        <ControlRow\r\n          key=\"druid-filters\"\r\n          controls={druidFilters.map(control => (\r\n            <Control {...this.getControlData(control)} />\r\n          ))}\r\n        />,\r\n      );\r\n    }\r\n    return datasourceFilters;\r\n  }\r\n\r\n  renderSelect(filterConfig) {\r\n    const { filtersChoices } = this.props;\r\n    const { selectedValues } = this.state;\r\n    this.debouncerCache = {};\r\n    this.maxValueCache = {};\r\n\r\n    // Add created options to filtersChoices, even though it doesn't exist,\r\n    // or these options will exist in query sql but invisible to end user.\r\n    Object.keys(selectedValues)\r\n      .filter(key => key in filtersChoices)\r\n      .forEach(key => {\r\n        // empty values are ignored\r\n        if (!selectedValues[key]) {\r\n          return;\r\n        }\r\n        const choices = filtersChoices[key] || (filtersChoices[key] = []);\r\n        const choiceIds = new Set(choices.map(f => f.id));\r\n        const selectedValuesForKey = Array.isArray(selectedValues[key])\r\n          ? selectedValues[key]\r\n          : [selectedValues[key]];\r\n        selectedValuesForKey\r\n          .filter(value => value !== null && !choiceIds.has(value))\r\n          .forEach(value => {\r\n            choices.unshift({\r\n              filter: key,\r\n              id: value,\r\n              text: value,\r\n              metric: 0,\r\n            });\r\n          });\r\n      });\r\n    const {\r\n      key,\r\n      label,\r\n      [FILTER_CONFIG_ATTRIBUTES.MULTIPLE]: isMultiple,\r\n      [FILTER_CONFIG_ATTRIBUTES.DEFAULT_VALUE]: defaultValue,\r\n      [FILTER_CONFIG_ATTRIBUTES.CLEARABLE]: isClearable,\r\n      [FILTER_CONFIG_ATTRIBUTES.SEARCH_ALL_OPTIONS]: searchAllOptions,\r\n    } = filterConfig;\r\n    const data = filtersChoices[key] || [];\r\n    let value = selectedValues[key] || null;\r\n\r\n    // Assign default value if required\r\n    if (value === undefined && defaultValue) {\r\n      // multiple values are separated by semicolons\r\n      value = isMultiple ? defaultValue.split(';') : defaultValue;\r\n    }\r\n\r\n    return (\r\n      <OnPasteSelect\r\n        cacheOptions\r\n        loadOptions={this.debounceLoadOptions(key)}\r\n        defaultOptions={this.transformOptions(data)}\r\n        key={key}\r\n        placeholder={t('Type or Select [%s]', label)}\r\n        isMulti={isMultiple}\r\n        isClearable={isClearable}\r\n        value={value}\r\n        options={this.transformOptions(data)}\r\n        onChange={newValue => {\r\n          // avoid excessive re-renders\r\n          if (newValue !== value) {\r\n            this.changeFilter(key, newValue);\r\n          }\r\n        }}\r\n        // TODO try putting this back once react-select is upgraded\r\n        // onFocus={() => this.onFilterMenuOpen(key)}\r\n        onMenuOpen={() => this.onFilterMenuOpen(key)}\r\n        onBlur={() => this.onFilterMenuClose(key)}\r\n        onMenuClose={() => this.onFilterMenuClose(key)}\r\n        selectWrap={\r\n          searchAllOptions && data.length >= FILTER_OPTIONS_LIMIT\r\n            ? AsyncCreatableSelect\r\n            : CreatableSelect\r\n        }\r\n        noResultsText={t('No results found')}\r\n        forceOverflow\r\n      />\r\n    );\r\n  }\r\n\r\n  renderFilters() {\r\n    const { filtersFields = [] } = this.props;\r\n    return filtersFields.map(filterConfig => {\r\n      const { label, key } = filterConfig;\r\n      return (\r\n        <div key={key} className=\"m-b-5 filter-container\">\r\n          <FormLabel htmlFor={`LABEL-${key}`}>{label}</FormLabel>\r\n          {this.renderSelect(filterConfig)}\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { instantFiltering, width, height } = this.props;\r\n    return (\r\n      <div style={{ width, height, overflow: 'auto' }}>\r\n        {this.renderDateFilter()}\r\n        {this.renderDatasourceFilters()}\r\n        {this.renderFilters()}\r\n        {!instantFiltering && (\r\n          <Button\r\n            buttonSize=\"small\"\r\n            buttonStyle=\"primary\"\r\n            onClick={this.clickApply.bind(this)}\r\n            disabled={!this.state.hasChanged}\r\n          >\r\n            {t('Apply')}\r\n          </Button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFilterBox.propTypes = propTypes;\r\nFilterBox.defaultProps = defaultProps;\r\n\r\nexport default FilterBox;\r\n","var content = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/less-loader/dist/cjs.js??ref--8-2!./FilterBox.less\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n"],"sourceRoot":""}