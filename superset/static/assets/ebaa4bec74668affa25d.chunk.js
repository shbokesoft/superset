/*! For license information please see ebaa4bec74668affa25d.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1301:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return F})),n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return M})),n.d(t,"f",(function(){return P}));var r=n(42),o=n.n(r),i=n(12),a=n.n(i),s=n(38),l=n.n(s),c=n(91),d=n.n(c),u=n(137),h=n.n(u),p=n(34),f=n.n(p),b=n(0),m=n(68),g=n(18),v=n(120),y=n.n(v),O=n(21),S=n(182),C=n(63),j=n(361),x=n(362),w=n(3530),k=n(1);const R=Object(m.g)(C.a)`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;

  // needed to override button's first-of-type margin: 0
  && {
    margin: 0 ${({theme:e})=>2*e.gridUnit}px;
  }

  i {
    padding: 0 ${({theme:e})=>e.gridUnit}px;
  }
`,T=Object(k.d)(R,{buttonSize:"xsmall"},Object(k.d)("i",{className:"fa fa-clipboard"})),_=({data:e})=>Object(k.d)(x.a,{text:e?Object(j.g)(e):"",wrapped:!1,copyNode:T}),F=({onChangeHandler:e})=>{const t=y()(e,S.e);return Object(k.d)(O.l,{placeholder:Object(g.e)("Search"),onChange:e=>{const n=e.target.value;t(n)}})},I=({data:e,loading:t})=>{var n;return Object(k.d)(w.a,{rowcount:null!=(n=null==e?void 0:e.length)?n:0,loading:t,suffix:Object(g.e)("rows retrieved")})},M=(e,t)=>Object(b.useMemo)(()=>{if(null==t||!t.length)return[];const n=Object(j.d)(t);return f()(n).call(n,t=>{var n;return h()(n=d()(t)).call(n,t=>{var n;return null==t?void 0:l()(n=t.toString().toLowerCase()).call(n,e.toLowerCase())})})},[t,e]),P=(e,t)=>Object(b.useMemo)(()=>{var n;return null!=e&&e.length?a()(n=o()(e[0])).call(n,e=>({accessor:e,Header:e,Cell:({value:e})=>!0===e?S.b:!1===e?S.a:String(e),...null==t?void 0:t[e]})):[]},[e,t])},1472:function(e,t){function n(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),a=t.get(i);return void 0===a&&(a=e.call(this,r),t.set(i,a)),a}function r(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function o(e,t,n,r,o){return n.bind(t,e,r,o)}function i(e,t){return o(e,this,1===e.length?n:r,t.cache.create(),t.serializer)}function a(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null)}s.prototype.has=function(e){return e in this.cache},s.prototype.get=function(e){return this.cache[e]},s.prototype.set=function(e,t){this.cache[e]=t};var l={create:function(){return new s}};e.exports=function(e,t){var n=t&&t.cache?t.cache:l,r=t&&t.serializer?t.serializer:a;return(t&&t.strategy?t.strategy:i)(e,{cache:n,serializer:r})},e.exports.strategies={variadic:function(e,t){return o(e,this,r,t.cache.create(),t.serializer)},monadic:function(e,t){return o(e,this,n,t.cache.create(),t.serializer)}}},1484:function(e,t,n){e.exports=n(3540)},1727:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(1);var o={name:"1qbe4ct",styles:"& :nth-child(1):not(:nth-last-child(1)){border-top-right-radius:0;border-bottom-right-radius:0;border-right:0;margin-left:0;}& :not(:nth-child(1)):not(:nth-last-child(1)){border-radius:0;border-right:0;margin-left:0;}& :nth-last-child(1):not(:nth-child(1)){border-top-left-radius:0;border-bottom-left-radius:0;margin-left:0;}"};function i(e){const{className:t,children:n}=e;return Object(r.d)("div",{role:"group",className:t,css:o},n)}},1737:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"f",(function(){return S}));var r=n(12),o=n.n(r),i=n(91),a=n.n(i),s=n(5),l=n.n(s),c=n(102),d=n(3539),u=n(3639);const h=l.a.shape({id:l.a.string.isRequired,type:l.a.oneOf(a()(c.m)).isRequired,parents:l.a.arrayOf(l.a.string),children:l.a.arrayOf(l.a.string),meta:l.a.shape({width:l.a.number,height:l.a.number,headerSize:l.a.oneOf(o()(u.a).call(u.a,e=>e.value)),background:l.a.oneOf(o()(d.a).call(d.a,e=>e.value)),chartId:l.a.number})}),p=l.a.shape({id:l.a.number.isRequired,chartAlert:l.a.string,chartStatus:l.a.string,chartUpdateEndTime:l.a.number,chartUpdateStartTime:l.a.number,latestQueryFormData:l.a.object,queryController:l.a.shape({abort:l.a.func}),queriesResponse:l.a.arrayOf(l.a.object),triggerQuery:l.a.bool,lastRendered:l.a.number}),f=l.a.shape({slice_id:l.a.number.isRequired,slice_url:l.a.string.isRequired,slice_name:l.a.string.isRequired,datasource:l.a.string,datasource_name:l.a.string,datasource_link:l.a.string,changed_on:l.a.number.isRequired,modified:l.a.string.isRequired,viz_type:l.a.string.isRequired,description:l.a.string,description_markeddown:l.a.string,owners:l.a.arrayOf(l.a.string)}),b=l.a.shape({chartId:l.a.number.isRequired,componentId:l.a.string.isRequired,filterName:l.a.string.isRequired,datasourceId:l.a.string.isRequired,directPathToFilter:l.a.arrayOf(l.a.string).isRequired,isDateFilter:l.a.bool.isRequired,isInstantFilter:l.a.bool.isRequired,columns:l.a.object,labels:l.a.object,scopes:l.a.object}),m=l.a.shape({sliceIds:l.a.arrayOf(l.a.number).isRequired,expandedSlices:l.a.object,editMode:l.a.bool,isPublished:l.a.bool.isRequired,colorNamespace:l.a.string,colorScheme:l.a.string,updatedColorScheme:l.a.bool,hasUnsavedChanges:l.a.bool}),g=l.a.shape({id:l.a.number.isRequired,metadata:l.a.object,slug:l.a.string,dash_edit_perm:l.a.bool.isRequired,dash_save_perm:l.a.bool.isRequired,common:l.a.object,userId:l.a.string.isRequired}),v=e=>()=>e().apply(void 0,arguments),y=l.a.shape({value:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string.isRequired}),O={value:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string.isRequired,children:l.a.arrayOf(l.a.oneOfType([l.a.shape(v(()=>O)),y]))},S=l.a.oneOfType([l.a.shape(O),y])},1738:function(e,t,n){var r=n(342),o=n(263),i=n(1309);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},3525:function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function o(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function i(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=e.displayName||e.name,c="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=o),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var d=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;d.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",(function(){return a})),r.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},3530:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(0);var r=n(5),o=n.n(r),i=n(18),a=n(446),s=n(186),l=n(72),c=n(1);const d={rowcount:o.a.number,limit:o.a.number,rows:o.a.string,suffix:o.a.string,loading:o.a.bool},u={suffix:Object(i.e)("rows")};function h({rowcount:e,limit:t,suffix:n,loading:r}){const o=e===t,d=o||0===e&&!r?"danger":"default",u=Object(a.c)()(e),h=Object(c.d)("span",null,o&&Object(c.d)("div",null,Object(i.e)("Limit reached")),r?"Loading":e);return Object(c.d)(l.a,{id:"tt-rowcount-tooltip",title:h},Object(c.d)(s.a,{type:d},r?"Loading...":`${u} ${n}`))}h.propTypes=d,h.defaultProps=u},3539:function(e,t,n){"use strict";var r=n(18),o=n(82);t.a=[{value:o.b,label:Object(r.e)("Transparent"),className:"background--transparent"},{value:o.c,label:Object(r.e)("White"),className:"background--white"}]},3540:function(e,t,n){n(1012);var r=n(106);e.exports=r.setInterval},3634:function(e,t,n){n(3635),e.exports=n(263).Object.keys},3635:function(e,t,n){var r=n(1285),o=n(1739);n(1738)("keys",(function(){return function(e){return o(r(e))}}))},3636:function(e,t,n){n(3637),e.exports=n(263).Object.getPrototypeOf},3637:function(e,t,n){var r=n(1285),o=n(3640);n(1738)("getPrototypeOf",(function(){return function(e){return o(r(e))}}))},3639:function(e,t,n){"use strict";var r=n(18),o=n(82);t.a=[{value:o.E,label:Object(r.e)("Small"),className:"header-style-option header-small"},{value:o.s,label:Object(r.e)("Medium"),className:"header-style-option header-medium"},{value:o.r,label:Object(r.e)("Large"),className:"header-style-option header-large"}]},3641:function(e,t,n){"use strict";var r;function o(){return r||((r=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),r}n.d(t,"a",(function(){return o}))},3818:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r,o=n(0),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s={top:{width:"100%",height:"10px",top:"-5px",left:"0px",cursor:"row-resize"},right:{width:"10px",height:"100%",top:"0px",right:"-5px",cursor:"col-resize"},bottom:{width:"100%",height:"10px",bottom:"-5px",left:"0px",cursor:"row-resize"},left:{width:"10px",height:"100%",top:"0px",left:"-5px",cursor:"col-resize"},topRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",top:"-10px",cursor:"ne-resize"},bottomRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",bottom:"-10px",cursor:"se-resize"},bottomLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",bottom:"-10px",cursor:"sw-resize"},topLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",top:"-10px",cursor:"nw-resize"}},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return i(t,e),t.prototype.render=function(){return o.createElement("div",{className:this.props.className||"",style:a(a({position:"absolute",userSelect:"none"},s[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(o.PureComponent),c=n(1472),d=n.n(c),u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p={width:"auto",height:"auto"},f=d()((function(e,t,n){return Math.max(Math.min(e,n),t)})),b=d()((function(e,t){return Math.round(e/t)*t})),m=d()((function(e,t){return new RegExp(e,"i").test(t)})),g=function(e){return Boolean(e.touches&&e.touches.length)},v=d()((function(e,t,n){void 0===n&&(n=0);var r=t.reduce((function(n,r,o){return Math.abs(r-e)<Math.abs(t[n]-e)?o:n}),0),o=Math.abs(t[r]-e);return 0===n||o<n?t[r]:e})),y=d()((function(e,t){return e.substr(e.length-t.length,t.length)===t})),O=d()((function(e){return"auto"===(e=e.toString())?e:y(e,"px")?e:y(e,"%")?e:y(e,"vh")?e:y(e,"vw")?e:y(e,"vmax")?e:y(e,"vmin")?e:e+"px"})),S=function(e,t,n,r){if(e&&"string"==typeof e){if(y(e,"px"))return Number(e.replace("px",""));if(y(e,"%"))return t*(Number(e.replace("%",""))/100);if(y(e,"vw"))return n*(Number(e.replace("vw",""))/100);if(y(e,"vh"))return r*(Number(e.replace("vh",""))/100)}return e},C=d()((function(e,t,n,r,o,i,a){return r=S(r,e.width,t,n),o=S(o,e.height,t,n),i=S(i,e.width,t,n),a=S(a,e.height,t,n),{maxWidth:void 0===r?void 0:Number(r),maxHeight:void 0===o?void 0:Number(o),minWidth:void 0===i?void 0:Number(i),minHeight:void 0===a?void 0:Number(a)}})),j=["as","style","className","grid","snap","bounds","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],x=function(e){function t(t){var n=e.call(this,t)||this;return n.ratio=1,n.resizable=null,n.parentLeft=0,n.parentTop=0,n.resizableLeft=0,n.resizableTop=0,n.targetLeft=0,n.targetTop=0,n.appendBase=function(){if(!n.resizable||!n.window)return null;var e=n.parentNode;if(!e)return null;var t=n.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0",t.classList?t.classList.add("__resizable_base__"):t.className+="__resizable_base__",e.appendChild(t),t},n.removeBase=function(e){var t=n.parentNode;t&&t.removeChild(e)},n.ref=function(e){e&&(n.resizable=e)},n.state={isResizing:!1,width:void 0===(n.propsSize&&n.propsSize.width)?"auto":n.propsSize&&n.propsSize.width,height:void 0===(n.propsSize&&n.propsSize.height)?"auto":n.propsSize&&n.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n}return u(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||p},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,o=this.resizable.style.position;"relative"!==o&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=o}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&y(e.propsSize[t].toString(),"%")){if(y(e.state[t].toString(),"%"))return e.state[t].toString();var n=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/n[t]*100+"%"}return O(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?O(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?O(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&"auto"!==n?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){if("parent"===this.props.bounds){var n=this.parentNode;if(n){var r=n.offsetWidth+(this.parentLeft-this.resizableLeft),o=n.offsetHeight+(this.parentTop-this.resizableTop);e=e&&e<r?e:r,t=t&&t<o?t:o}}else if("window"===this.props.bounds){if(this.window){r=this.window.innerWidth-this.resizableLeft,o=this.window.innerHeight-this.resizableTop;e=e&&e<r?e:r,t=t&&t<o?t:o}}else if(this.props.bounds){r=this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),o=this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop);e=e&&e<r?e:r,t=t&&t<o?t:o}return{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,r=this.props.resizeRatio||1,o=this.state,i=o.direction,a=o.original,s=this.props,l=s.lockAspectRatio,c=s.lockAspectRatioExtraHeight,d=s.lockAspectRatioExtraWidth,u=a.width,h=a.height,p=c||0,f=d||0;return m("right",i)&&(u=a.width+(e-a.x)*r/n,l&&(h=(u-f)/this.ratio+p)),m("left",i)&&(u=a.width-(e-a.x)*r/n,l&&(h=(u-f)/this.ratio+p)),m("bottom",i)&&(h=a.height+(t-a.y)*r/n,l&&(u=(h-p)*this.ratio+f)),m("top",i)&&(h=a.height-(t-a.y)*r/n,l&&(u=(h-p)*this.ratio+f)),{newWidth:u,newHeight:h}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var o=this.props,i=o.lockAspectRatio,a=o.lockAspectRatioExtraHeight,s=o.lockAspectRatioExtraWidth,l=void 0===r.width?10:r.width,c=void 0===n.width||n.width<0?e:n.width,d=void 0===r.height?10:r.height,u=void 0===n.height||n.height<0?t:n.height,h=a||0,p=s||0;if(i){var b=(d-h)*this.ratio+p,m=(u-h)*this.ratio+p,g=(l-p)/this.ratio+h,v=(c-p)/this.ratio+h,y=Math.max(l,b),O=Math.min(c,m),S=Math.max(d,g),C=Math.min(u,v);e=f(e,y,O),t=f(t,S,C)}else e=f(e,l,c),t=f(t,d,u);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),o=r.left,i=r.top;this.resizableLeft=o,this.resizableTop=i}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n,r=0,o=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)){if(r=e.nativeEvent.clientX,o=e.nativeEvent.clientY,3===e.nativeEvent.which)return}else e.nativeEvent&&g(e.nativeEvent)&&(r=e.nativeEvent.touches[0].clientX,o=e.nativeEvent.touches[0].clientY);if(this.props.onResizeStart)if(this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var i=this.window.getComputedStyle(this.resizable);if("auto"!==i.flexBasis){var a=this.parentNode;if(a){var s=this.window.getComputedStyle(a).flexDirection;this.flexDir=s.startsWith("row")?"row":"column",n=i.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var l={original:{x:r,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:h(h({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(l)}},t.prototype.onMouseMove=function(e){if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&g(e))try{e.preventDefault(),e.stopPropagation()}catch(e){}var t=this.props,n=t.maxWidth,r=t.maxHeight,o=t.minWidth,i=t.minHeight,a=g(e)?e.touches[0].clientX:e.clientX,s=g(e)?e.touches[0].clientY:e.clientY,l=this.state,c=l.direction,d=l.original,u=l.width,h=l.height,p=this.getParentSize(),f=C(p,this.window.innerWidth,this.window.innerHeight,n,r,o,i);n=f.maxWidth,r=f.maxHeight,o=f.minWidth,i=f.minHeight;var m=this.calculateNewSizeFromDirection(a,s),O=m.newHeight,S=m.newWidth,j=this.calculateNewMaxFromBoundary(n,r),x=this.calculateNewSizeFromAspectRatio(S,O,{width:j.maxWidth,height:j.maxHeight},{width:o,height:i});if(S=x.newWidth,O=x.newHeight,this.props.grid){var w=b(S,this.props.grid[0]),k=b(O,this.props.grid[1]),R=this.props.snapGap||0;S=0===R||Math.abs(w-S)<=R?w:S,O=0===R||Math.abs(k-O)<=R?k:O}this.props.snap&&this.props.snap.x&&(S=v(S,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(O=v(O,this.props.snap.y,this.props.snapGap));var T={width:S-d.width,height:O-d.height};if(u&&"string"==typeof u)if(y(u,"%"))S=S/p.width*100+"%";else if(y(u,"vw")){S=S/this.window.innerWidth*100+"vw"}else if(y(u,"vh")){S=S/this.window.innerHeight*100+"vh"}if(h&&"string"==typeof h)if(y(h,"%"))O=O/p.height*100+"%";else if(y(h,"vw")){O=O/this.window.innerWidth*100+"vw"}else if(y(h,"vh")){O=O/this.window.innerHeight*100+"vh"}var _={width:this.createSizeForCssProperty(S,"width"),height:this.createSizeForCssProperty(O,"height")};"row"===this.flexDir?_.flexBasis=_.width:"column"===this.flexDir&&(_.flexBasis=_.height),this.setState(_),this.props.onResize&&this.props.onResize(e,c,this.resizable,T)}},t.prototype.onMouseUp=function(e){var t=this.state,n=t.isResizing,r=t.direction,o=t.original;if(n&&this.resizable){var i={width:this.size.width-o.width,height:this.size.height-o.height};this.props.onResizeStop&&this.props.onResizeStop(e,r,this.resizable,i),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:h(h({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,i=t.handleClasses,a=t.handleWrapperStyle,s=t.handleWrapperClass,c=t.handleComponent;if(!n)return null;var d=Object.keys(n).map((function(t){return!1!==n[t]?o.createElement(l,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:i&&i[t]},c&&c[t]?c[t]:null):null}));return o.createElement("span",{className:s,style:a},d)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==j.indexOf(n)?t:(t[n]=e.props[n],t)}),{}),n=h(h(h({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return o.createElement(r,h({ref:this.ref,style:n,className:this.props.className},t),this.state.isResizing&&o.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(o.PureComponent)},3823:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(43);var r=n(188),o=n.n(r),i=n(0),a=n(7),s=n.n(a),l=n(18),c=n(72),d=n(1);function u({canEdit:e=!1,editing:t=!1,extraClasses:n,multiLine:r=!1,noPermitTooltip:a,onSaveTitle:u,showTooltip:h=!0,style:p,title:f="",defaultTitle:b="",placeholder:m=""}){const[g,v]=Object(i.useState)(t),[y,O]=Object(i.useState)(f),[S,C]=Object(i.useState)(f),[j,x]=Object(i.useState)(null),w=Object(i.useRef)();function k(){if(!e||g)return;const t=w.current?w.current.getBoundingClientRect():null;v(!0),x(t)}function R(){const t=o()(y).call(y);e&&(v(!1),t.length?(S!==t&&C(t),f!==t&&u(t)):O(S))}function T(e){" "===e.key&&e.stopPropagation(),"Enter"===e.key&&(e.preventDefault(),R())}function _(t){e&&O(t.target.value)}function F(e){"Enter"===e.key&&(e.preventDefault(),R())}let I;Object(i.useEffect)(()=>{f!==y&&(C(y),O(f))},[f]),Object(i.useEffect)(()=>{g&&w.current.focus()},[g]),I=y,g||y||(I=b||f);const M=g&&j?{height:`${j.height}px`}:void 0;let P=r&&g?Object(d.d)("textarea",{ref:w,value:I,className:f?void 0:"text-muted",onKeyDown:T,onChange:_,onBlur:R,onClick:k,onKeyPress:F,placeholder:m,style:M}):Object(d.d)("input",{ref:w,type:g?"text":"button",value:I,className:f?void 0:"text-muted",onKeyDown:T,onChange:_,onBlur:R,onClick:k,onKeyPress:F,placeholder:m});return h&&!g&&(P=Object(d.d)(c.a,{id:"title-tooltip",title:e?Object(l.e)("Click to edit"):a||Object(l.e)("You don't have the rights to alter this title.")},P)),e||(P=Object(d.d)("span",{title:I},I)),Object(d.d)("span",{className:s()("editable-title",n,e&&"editable-title--editable",g&&"editable-title--editing"),style:p},P)}},3824:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4042)).default;t.default=o},3825:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4043)).default;t.default=o},3826:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4044)).default;t.default=o},3832:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(300);var r=n(3981),o=n.n(r),i=n(584),a=n.n(i),s=n(18),l=n(111);function c(e,t,n={},r=!1){return i=>{const c=r?document.querySelector(e):i.currentTarget.closest(e);return c?o.a.toJpeg(c,{quality:.95,bgcolor:"#F5F5F5",filter:e=>"mapboxgl-control-container"!==e.className,...n}).then(e=>{const n=document.createElement("a");n.download=`${((e,t=new Date)=>`${a()(e)}-${t.toISOString().replace(/[: ]/g,"-")}`)(t)}.jpg`,n.href=e,n.click()}).catch(e=>{console.error("Creating image failed",e)}):Object(l.g)(Object(s.e)("Image download failed, please refresh and try again."))}}},3979:function(e,t,n){var r=n(825)((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));e.exports=r},3980:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(43);var r=n(0),o=n(925);function i(e){const[t,n]=Object(r.useState)(!1),[i,a]=Object(r.useState)("");return Object(r.useEffect)(()=>n(!0),[e]),async function(){if(t){const t=await Object(o.a)(e);return a(t),n(!1),t}return i}}},3981:function(e,t,n){!function(t){"use strict";var n=function(){return{escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){var n=t(e).toLowerCase();return(r="application/font-woff",{woff:r,woff2:r,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var r},dataAsUrl:function(e,t){return"data:"+t+";base64,"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(e){return e.toBlob?new Promise((function(t){e.toBlob(t)})):function(e){return new Promise((function(t){for(var n=window.atob(e.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);t(new Blob([o],{type:"image/png"}))}))}(e)},resolveUrl:function(e,t){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var o=n.createElement("a");return n.body.appendChild(o),r.href=t,o.href=e,o.href},getAndEncode:function(e){s.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());return new Promise((function(t){var n,r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4!==r.readyState)return;if(200!==r.status)return void(n?t(n):i("cannot fetch resource: "+e+", status: "+r.status));var o=new FileReader;o.onloadend=function(){var e=o.result.split(/,/)[1];t(e)},o.readAsDataURL(r.response)},r.ontimeout=function(){n?t(n):i("timeout of 30000ms occured while fetching resource: "+e)},r.responseType="blob",r.timeout=3e4,r.open("GET",e,!0),r.send(),s.impl.options.imagePlaceholder){var o=s.impl.options.imagePlaceholder.split(/,/);o&&o[1]&&(n=o[1])}function i(e){console.error(e),t("")}}))},uid:(e=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++}),delay:function(e){return function(t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}},asArray:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t},escapeXhtml:function(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src=e}))},width:function(e){var t=n(e,"border-left-width"),r=n(e,"border-right-width");return e.scrollWidth+t+r},height:function(e){var t=n(e,"border-top-width"),r=n(e,"border-bottom-width");return e.scrollHeight+t+r}};var e;function t(e){var t=/\.([^\.\/]*?)$/g.exec(e);return t?t[1]:""}function n(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}}(),r=function(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,n,i){return function(){return!t(e)}()?Promise.resolve(e):Promise.resolve(e).then(r).then((function(t){var r=Promise.resolve(e);return t.forEach((function(e){r=r.then((function(t){return o(t,e,n,i)}))})),r}))},shouldProcess:t,impl:{readUrls:r,inline:o}};function t(t){return-1!==t.search(e)}function r(t){for(var r,o=[];null!==(r=e.exec(t));)o.push(r[1]);return o.filter((function(e){return!n.isDataUrl(e)}))}function o(e,t,r,o){return Promise.resolve(t).then((function(e){return r?n.resolveUrl(e,r):e})).then(o||n.getAndEncode).then((function(e){return n.dataAsUrl(e,n.mimeType(t))})).then((function(r){return e.replace(function(e){return new RegExp("(url\\(['\"]?)("+n.escape(e)+")(['\"]?\\))","g")}(t),"$1"+r+"$3")}))}}(),o=function(){return{resolveAll:function(){return e(document).then((function(e){return Promise.all(e.map((function(e){return e.resolve()})))})).then((function(e){return e.join("\n")}))},impl:{readAll:e}};function e(){return Promise.resolve(n.asArray(document.styleSheets)).then((function(e){var t=[];return e.forEach((function(e){try{n.asArray(e.cssRules||[]).forEach(t.push.bind(t))}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}})),t})).then((function(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return r.shouldProcess(e.style.getPropertyValue("src"))}))})).then((function(t){return t.map(e)}));function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return r.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}}(),i=function(){return{inlineAll:function t(o){return o instanceof Element?function(e){var t=e.style.getPropertyValue("background");return t?r.inlineAll(t).then((function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))})).then((function(){return e})):Promise.resolve(e)}(o).then((function(){return o instanceof HTMLImageElement?e(o).inline():Promise.all(n.asArray(o.childNodes).map((function(e){return t(e)})))})):Promise.resolve(o)},impl:{newImage:e}};function e(e){return{inline:function(t){return n.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(t||n.getAndEncode).then((function(t){return n.dataAsUrl(t,n.mimeType(e.src))})).then((function(t){return new Promise((function(n,r){e.onload=n,e.onerror=r,e.src=t}))}))}}}}(),a={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:l,toPng:function(e,t){return c(e,t||{}).then((function(e){return e.toDataURL()}))},toJpeg:function(e,t){return c(e,t=t||{}).then((function(e){return e.toDataURL("image/jpeg",t.quality||1)}))},toBlob:function(e,t){return c(e,t||{}).then(n.canvasToBlob)},toPixelData:function(e,t){return c(e,t||{}).then((function(t){return t.getContext("2d").getImageData(0,0,n.width(e),n.height(e)).data}))},impl:{fontFaces:o,images:i,util:n,inliner:r,options:{}}};function l(e,t){return function(e){void 0===e.imagePlaceholder?s.impl.options.imagePlaceholder=a.imagePlaceholder:s.impl.options.imagePlaceholder=e.imagePlaceholder;void 0===e.cacheBust?s.impl.options.cacheBust=a.cacheBust:s.impl.options.cacheBust=e.cacheBust}(t=t||{}),Promise.resolve(e).then((function(e){return function e(t,r,o){return o||!r||r(t)?Promise.resolve(t).then((function(e){return e instanceof HTMLCanvasElement?n.makeImage(e.toDataURL()):e.cloneNode(!1)})).then((function(e){return i(t,e,r)})).then((function(e){return function(e,t){return t instanceof Element?Promise.resolve().then(r).then(o).then(i).then(a).then((function(){return t})):t;function r(){var r,o;r=window.getComputedStyle(e),o=t.style,r.cssText?o.cssText=r.cssText:function(e,t){n.asArray(e).forEach((function(n){t.setProperty(n,e.getPropertyValue(n),e.getPropertyPriority(n))}))}(r,o)}function o(){[":before",":after"].forEach((function(r){!function(r){var o=window.getComputedStyle(e,r),i=o.getPropertyValue("content");if(""===i||"none"===i)return;var a=n.uid();t.className=t.className+" "+a;var s=document.createElement("style");s.appendChild(function(e,t,r){var o="."+e+":"+t,i=r.cssText?function(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}(r):function(e){return n.asArray(e).map((function(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")})).join("; ")+";"}(r);return document.createTextNode(o+"{"+i+"}")}(a,r,o)),t.appendChild(s)}(r)}))}function i(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}function a(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement&&["width","height"].forEach((function(e){var n=t.getAttribute(e);n&&t.style.setProperty(e,n)})))}}(t,e)})):Promise.resolve();function i(t,r,o){var i=t.childNodes;return 0===i.length?Promise.resolve(r):a(r,n.asArray(i),o).then((function(){return r}));function a(t,n,r){var o=Promise.resolve();return n.forEach((function(n){o=o.then((function(){return e(n,r)})).then((function(e){e&&t.appendChild(e)}))})),o}}}(e,t.filter,!0)})).then(d).then(u).then((function(e){t.bgcolor&&(e.style.backgroundColor=t.bgcolor);t.width&&(e.style.width=t.width+"px");t.height&&(e.style.height=t.height+"px");t.style&&Object.keys(t.style).forEach((function(n){e.style[n]=t.style[n]}));return e})).then((function(r){return function(e,t,r){return Promise.resolve(e).then((function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)})).then(n.escapeXhtml).then((function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"})).then((function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+r+'">'+e+"</svg>"})).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}))}(r,t.width||n.width(e),t.height||n.height(e))}))}function c(e,t){return l(e,t).then(n.makeImage).then(n.delay(100)).then((function(r){var o=function(e){var r=document.createElement("canvas");if(r.width=t.width||n.width(e),r.height=t.height||n.height(e),t.bgcolor){var o=r.getContext("2d");o.fillStyle=t.bgcolor,o.fillRect(0,0,r.width,r.height)}return r}(e);return o.getContext("2d").drawImage(r,0,0),o}))}function d(e){return o.resolveAll().then((function(t){var n=document.createElement("style");return e.appendChild(n),n.appendChild(document.createTextNode(t)),e}))}function u(e){return i.inlineAll(e).then((function(){return e}))}e.exports=s}()},3982:function(e,t,n){"use strict";n(43);var r=n(0),o=n(68),i=n(18),a=n(571),s=n.n(a),l=n(1002),c=n.n(l),d=n(362),u=n(214),h=n(1301),p=n(103),f=n(174),b=n(3824),m=n.n(b),g=n(3825),v=n.n(g),y=n(1291),O=n.n(y),S=n(3826),C=n.n(S),j=n(1);const x=Object(o.g)(h.a)`
  && {
    margin: 0 0 ${({theme:e})=>e.gridUnit}px;
  }
`;s.a.registerLanguage("markdown",m.a),s.a.registerLanguage("html",v.a),s.a.registerLanguage("sql",O.a),s.a.registerLanguage("json",C.a);t.a=e=>{const[t,n]=Object(r.useState)(null),[o,a]=Object(r.useState)(null),[l,h]=Object(r.useState)(!1),[b,m]=Object(r.useState)(null);return Object(r.useEffect)(()=>{var t;t="query",h(!0),Object(f.getChartDataRequest)({formData:e.latestQueryFormData,resultFormat:"json",resultType:t}).then(e=>{const t=e.result[0];n(t.language),a(t.query),h(!1),m(null)}).catch(e=>{Object(p.a)(e).then(({error:t,message:n})=>{m(t||n||e.statusText||Object(i.e)("Sorry, An error occurred")),h(!1)})})},[e.latestQueryFormData]),l?Object(j.d)(u.a,null):b?Object(j.d)("pre",null,b):o?Object(j.d)("div",null,Object(j.d)(d.a,{text:o,shouldShowText:!1,copyNode:Object(j.d)(x,{buttonSize:"xsmall"},Object(j.d)("i",{className:"fa fa-clipboard"}))}),Object(j.d)(s.a,{language:t||void 0,style:c.a},o)):null}},3986:function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=function(e){if((!o&&0!==o||e)&&i.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),o=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return o};var o,i=r(n(4049));e.exports=t.default},3987:function(e,t,n){"use strict";var r=n(138),o=n(99),i=n(174),a=n(870),s=n(12),l=n.n(s),c=n(17),d=n.n(c),u=n(5),h=n.n(u),p=n(0),f=n.n(p),b=n(336),m=n(68),g=n(254),v=n(18),y=n(51),O=n(63),S=n(214),C=n(767),j=(n(43),n(88)),x=n.n(j),w=n(3979),k=n.n(w),R=n(1449),T=n(478),_=n(337),F=n(1);const I={annotationData:h.a.object,actions:h.a.object,chartId:h.a.number.isRequired,datasource:h.a.object.isRequired,initialValues:h.a.object,formData:h.a.object.isRequired,height:h.a.number,width:h.a.number,setControlValue:h.a.func,vizType:h.a.string.isRequired,triggerRender:h.a.bool,chartAlert:h.a.string,chartStatus:h.a.string,queriesResponse:h.a.arrayOf(h.a.object),triggerQuery:h.a.bool,refreshOverlayVisible:h.a.bool,addFilter:h.a.func,setDataMask:h.a.func,onFilterMenuOpen:h.a.func,onFilterMenuClose:h.a.func,ownState:h.a.object},M={},P={addFilter:()=>M,onFilterMenuOpen:()=>M,onFilterMenuClose:()=>M,initialValues:M,setControlValue(){},triggerRender:!1};class z extends f.a.Component{constructor(e){var t,n,r,o;super(e),this.hasQueryResponseChange=!1,this.handleAddFilter=d()(t=this.handleAddFilter).call(t,this),this.handleRenderSuccess=d()(n=this.handleRenderSuccess).call(n,this),this.handleRenderFailure=d()(r=this.handleRenderFailure).call(r,this),this.handleSetControlValue=d()(o=this.handleSetControlValue).call(o,this),this.hooks={onAddFilter:this.handleAddFilter,onError:this.handleRenderFailure,setControlValue:this.handleSetControlValue,onFilterMenuOpen:this.props.onFilterMenuOpen,onFilterMenuClose:this.props.onFilterMenuClose,setDataMask:e=>{var t;null==(t=this.props.actions)||t.updateDataMask(this.props.chartId,e)}}}shouldComponentUpdate(e){var t,n,r;return!(!(e.queriesResponse&&x()(t=["success","rendered"]).call(t,e.chartStatus)>-1)||null!=(n=e.queriesResponse)&&null!=(r=n[0])&&r.error||e.refreshOverlayVisible)&&(this.hasQueryResponseChange=e.queriesResponse!==this.props.queriesResponse,this.hasQueryResponseChange||e.annotationData!==this.props.annotationData||e.ownState!==this.props.ownState||e.filterState!==this.props.filterState||e.height!==this.props.height||e.width!==this.props.width||e.triggerRender||e.formData.color_scheme!==this.props.formData.color_scheme||e.cacheBusterProp!==this.props.cacheBusterProp)}handleAddFilter(e,t,n=!0,r=!0){this.props.addFilter(e,t,n,r)}handleRenderSuccess(){var e;const{actions:t,chartStatus:n,chartId:r,vizType:o}=this.props;x()(e=["loading","rendered"]).call(e,n)<0&&t.chartRenderingSucceeded(r),this.hasQueryResponseChange&&t.logEvent(_.m,{slice_id:r,viz_type:o,start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:_.q.getTimestamp()-this.renderStartTime})}handleRenderFailure(e,t){const{actions:n,chartId:r}=this.props;g.a.warn(e),n.chartRenderingFailed(e.toString(),r,t?t.componentStack:null),this.hasQueryResponseChange&&n.logEvent(_.m,{slice_id:r,has_err:!0,error_details:e.toString(),start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:_.q.getTimestamp()-this.renderStartTime})}handleSetControlValue(...e){const{setControlValue:t}=this.props;t&&t(...e)}render(){const{chartAlert:e,chartStatus:t,vizType:n,chartId:r,refreshOverlayVisible:o}=this.props;if(o||"loading"===t||e||null===t)return null;this.renderStartTime=_.q.getTimestamp();const{width:i,height:a,annotationData:s,datasource:l,initialValues:c,ownState:d,filterState:u,formData:h,queriesResponse:p}=this.props,f=k()(n),b="table"===n?`superset-chart-${f}`:f;return Object(F.d)(R.a,{disableErrorBoundary:!0,key:`${r}`,id:`chart-id-${r}`,className:b,chartType:n,width:i,height:a,annotationData:s,datasource:l,initialValues:c,formData:h,ownState:d,filterState:u,hooks:this.hooks,behaviors:[T.b.INTERACTIVE_CHART],queriesData:p,onRenderSuccess:this.handleRenderSuccess,onRenderFailure:this.handleRenderFailure})}}z.propTypes=I,z.defaultProps=P;var E=z,D=n(32),N=n.n(D),q=n(3975),A=n(1296);const L=({chartId:e,error:t,...n})=>{const{result:r}=Object(q.a)(e),o=t&&{...t,extra:{...t.extra,owners:r}};return Object(F.d)(A.a,N()({},n,{error:o}))},U={annotationData:h.a.object,actions:h.a.object,chartId:h.a.number.isRequired,datasource:h.a.object.isRequired,dashboardId:h.a.number,initialValues:h.a.object,formData:h.a.object.isRequired,width:h.a.number,height:h.a.number,setControlValue:h.a.func,timeout:h.a.number,vizType:h.a.string.isRequired,triggerRender:h.a.bool,isFiltersInitialized:h.a.bool,chartAlert:h.a.string,chartStatus:h.a.string,chartStackTrace:h.a.string,queriesResponse:h.a.arrayOf(h.a.object),triggerQuery:h.a.bool,refreshOverlayVisible:h.a.bool,errorMessage:h.a.node,addFilter:h.a.func,onQuery:h.a.func,onFilterMenuOpen:h.a.func,onFilterMenuClose:h.a.func,ownState:h.a.object},$={},H={addFilter:()=>$,onFilterMenuOpen:()=>$,onFilterMenuClose:()=>$,initialValues:$,setControlValue(){},triggerRender:!1,dashboardId:null,chartStackTrace:null},B=m.g.div`
  min-height: ${e=>e.height}px;
  position: relative;

  .chart-tooltip {
    opacity: 0.75;
    font-size: ${({theme:e})=>e.typography.sizes.s}px;
  }
`,W=m.g.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
`;class V extends f.a.PureComponent{constructor(e){var t;super(e),this.handleRenderContainerFailure=d()(t=this.handleRenderContainerFailure).call(t,this)}componentDidMount(){this.props.triggerQuery&&this.runQuery()}componentDidUpdate(){this.props.triggerQuery&&this.runQuery()}runQuery(){this.props.chartId>0&&Object(y.c)(y.a.CLIENT_CACHE)?this.props.actions.getSavedChart(this.props.formData,!1,this.props.timeout,this.props.chartId,this.props.dashboardId,this.props.ownState):this.props.actions.postChartFormData(this.props.formData,!1,this.props.timeout,this.props.chartId,this.props.dashboardId,this.props.ownState)}handleRenderContainerFailure(e,t){const{actions:n,chartId:r}=this.props;g.a.warn(e),n.chartRenderingFailed(e.toString(),r,t?t.componentStack:null),n.logEvent(_.m,{slice_id:r,has_err:!0,error_details:e.toString(),start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:_.q.getTimestamp()-this.renderStartTime})}renderErrorMessage(e){var t;const{chartId:n,chartAlert:r,chartStackTrace:o,dashboardId:i}=this.props,a=null==e?void 0:null==(t=e.errors)?void 0:t[0],s=r||(null==e?void 0:e.message);return Object(F.d)(L,{chartId:n,error:a,subtitle:s,copyText:s,link:e?e.link:null,source:i?"dashboard":"explore",stackTrace:o})}render(){const{height:e,chartAlert:t,chartStatus:n,errorMessage:r,onQuery:o,refreshOverlayVisible:i,queriesResponse:a=[]}=this.props,s="loading"===n,c=i&&!r;return this.renderContainerStartTime=_.q.getTimestamp(),"failed"===n?l()(a).call(a,e=>this.renderErrorMessage(e)):r?Object(F.d)(b.a,{message:r,type:"warning"}):Object(F.d)(C.a,{onError:this.handleRenderContainerFailure,showMessage:!1},Object(F.d)(B,{"data-ui-anchor":"chart",className:"chart-container",height:e},Object(F.d)("div",{className:`slice_container ${c?" faded":""}`},Object(F.d)(E,this.props)),!s&&!t&&c&&Object(F.d)(W,null,Object(F.d)(O.a,{onClick:o,buttonStyle:"primary"},Object(v.e)("Run query"))),s&&Object(F.d)(S.a,null)))}}V.propTypes=U,V.defaultProps=H;var G=V,K=n(568);t.a=Object(r.b)(null,(function(e){return{actions:Object(o.b)({...i,updateDataMask:K.e,logEvent:a.logEvent},e)}}))(G)},4042:function(e,t){e.exports=function(e){const t={begin:"<",end:">",subLanguage:"xml",relevance:0},n={begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},r={className:"strong",contains:[],variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},o={className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{begin:/_(?!_)/,end:/_/,relevance:0}]};r.contains.push(o),o.contains.push(r);var i=[t,n];return r.contains=r.contains.concat(i),o.contains=o.contains.concat(i),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:i=i.concat(r,o)},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:i}]}]},t,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},r,o,{className:"quote",begin:"^>\\s+",contains:i,end:"$"},{className:"code",variants:[{begin:"(`{3,})(.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})(.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},n,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}}},4043:function(e,t){function n(...e){return e.map(e=>{return(t=e)?"string"==typeof t?t:t.source:null;var t}).join("")}e.exports=function(e){const t=function(e){const t={"builtin-name":["action","bindattr","collection","component","concat","debugger","each","each-in","get","hash","if","in","input","link-to","loc","log","lookup","mut","outlet","partial","query-params","render","template","textarea","unbound","unless","view","with","yield"].join(" ")},r={literal:["true","false","undefined","null"].join(" ")},o=/\[.*?\]/,i=/[^\s!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~]+/,a=n("(",/'.*?'/,"|",/".*?"/,"|",o,"|",i,"|",/\.|\//,")+"),s=n("(",o,"|",i,")(?==)"),l={begin:a,lexemes:/[\w.\/]+/},c=e.inherit(l,{keywords:r}),d={begin:/\(/,end:/\)/},u={className:"attr",begin:s,relevance:0,starts:{begin:/=/,end:/=/,starts:{contains:[e.NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,c,d]}}},h={contains:[e.NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:/as\s+\|/,keywords:{keyword:"as"},end:/\|/,contains:[{begin:/\w+/}]},u,c,d],returnEnd:!0},p=e.inherit(l,{className:"name",keywords:t,starts:e.inherit(h,{end:/\)/})});d.contains=[p];const f=e.inherit(l,{keywords:t,className:"name",starts:e.inherit(h,{end:/}}/})}),b=e.inherit(l,{keywords:t,className:"name"}),m=e.inherit(l,{className:"name",keywords:t,starts:e.inherit(h,{end:/}}/})});return{name:"Handlebars",aliases:["hbs","html.hbs","html.handlebars","htmlbars"],case_insensitive:!0,subLanguage:"xml",contains:[{begin:/\\\{\{/,skip:!0},{begin:/\\\\(?=\{\{)/,skip:!0},e.COMMENT(/\{\{!--/,/--\}\}/),e.COMMENT(/\{\{!/,/\}\}/),{className:"template-tag",begin:/\{\{\{\{(?!\/)/,end:/\}\}\}\}/,contains:[f],starts:{end:/\{\{\{\{\//,returnEnd:!0,subLanguage:"xml"}},{className:"template-tag",begin:/\{\{\{\{\//,end:/\}\}\}\}/,contains:[b]},{className:"template-tag",begin:/\{\{#/,end:/\}\}/,contains:[f]},{className:"template-tag",begin:/\{\{(?=else\}\})/,end:/\}\}/,keywords:"else"},{className:"template-tag",begin:/\{\{(?=else if)/,end:/\}\}/,keywords:"else if"},{className:"template-tag",begin:/\{\{\//,end:/\}\}/,contains:[b]},{className:"template-variable",begin:/\{\{\{/,end:/\}\}\}/,contains:[m]},{className:"template-variable",begin:/\{\{/,end:/\}\}/,contains:[m]}]}}(e);return t.name="HTMLbars",e.getLanguage("handlebars")&&(t.disableAutodetect=!0),t}},4044:function(e,t){e.exports=function(e){var t={literal:"true false null"},n=[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],r=[e.QUOTE_STRING_MODE,e.C_NUMBER_MODE],o={end:",",endsWithParent:!0,excludeEnd:!0,contains:r,keywords:t},i={begin:"{",end:"}",contains:[{className:"attr",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE],illegal:"\\n"},e.inherit(o,{begin:/:/})].concat(n),illegal:"\\S"},a={begin:"\\[",end:"\\]",contains:[e.inherit(o)],illegal:"\\S"};return r.push(i,a),n.forEach((function(e){r.push(e)})),{name:"JSON",contains:r,keywords:t,illegal:"\\S"}}},4049:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=r,e.exports=t.default},4283:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e){var t=e.cellCount,n=e.overscanCellsCount,r=e.scrollDirection,o=e.startIndex,i=e.stopIndex;return n=Math.max(1,n),1===r?{overscanStartIndex:Math.max(0,o-1),overscanStopIndex:Math.min(t-1,i+n)}:{overscanStartIndex:Math.max(0,o-n),overscanStopIndex:Math.min(t-1,i+1)}}},4284:function(e,t,n){"use strict";var r=n(1297),o=n.n(r),i=n(133),a=n.n(i),s=n(464),l=n.n(s),c=n(339),d=n.n(c),u=n(439),h=n.n(u),p=n(422),f=n.n(p),b=n(423),m=n.n(b),g=n(0),v=n(7),y=n.n(v);function O(e){var t=e.cellCount,n=e.cellSize,r=e.computeMetadataCallback,o=e.computeMetadataCallbackProps,i=e.nextCellsCount,a=e.nextCellSize,s=e.nextScrollToIndex,l=e.scrollToIndex,c=e.updateScrollOffsetForScrollToIndex;t===i&&("number"!=typeof n&&"number"!=typeof a||n===a)||(r(o),l>=0&&l===s&&c())}var S=n(492),C=n.n(S),j=function(){function e(t){var n=t.cellCount,r=t.cellSizeGetter,o=t.estimatedCellSize;d()(this,e),this._cellSizeAndPositionData={},this._lastMeasuredIndex=-1,this._lastBatchedIndex=-1,this._cellSizeGetter=r,this._cellCount=n,this._estimatedCellSize=o}return h()(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize,r=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=n,this._cellSizeGetter=r}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index "+e+" is outside of range 0.."+this._cellCount);if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,r=this._lastMeasuredIndex+1;r<=e;r++){var o=this._cellSizeGetter({index:r});if(void 0===o||isNaN(o))throw Error("Invalid size returned for cell "+r+" of value "+o);null===o?(this._cellSizeAndPositionData[r]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[r]={offset:n,size:o},n+=o,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,r=e.containerSize,o=e.currentOffset,i=e.targetIndex;if(r<=0)return 0;var a=this.getSizeAndPositionOfCell(i),s=a.offset,l=s-r+a.size,c=void 0;switch(n){case"start":c=s;break;case"end":c=l;break;case"center":c=s-(r-a.size)/2;break;default:c=Math.max(l,Math.min(s,o))}var d=this.getTotalSize();return Math.max(0,Math.min(d-r,c))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;if(0===this.getTotalSize())return{};var r=n+t,o=this._findNearestCell(n),i=this.getSizeAndPositionOfCell(o);n=i.offset+i.size;for(var a=o;n<r&&a<this._cellCount-1;)a++,n+=this.getSizeAndPositionOfCell(a).size;return{start:o,stop:a}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,n){for(;t<=e;){var r=t+Math.floor((e-t)/2),o=this.getSizeAndPositionOfCell(r).offset;if(o===n)return r;o<n?t=r+1:o>n&&(e=r-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var n=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=n,n*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(n,0,e):this._exponentialSearch(n,e)}}]),e}(),x=function(){return"undefined"!=typeof window&&window.chrome&&window.chrome.webstore?16777100:15e5},w=function(){function e(t){var n=t.maxScrollSize,r=void 0===n?x():n,o=C()(t,["maxScrollSize"]);d()(this,e),this._cellSizeAndPositionManager=new j(o),this._maxScrollSize=r}return h()(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),o=this.getTotalSize(),i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:o});return Math.round(i*(o-r))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,r=e.containerSize,o=e.currentOffset,i=e.targetIndex;o=this._safeOffsetToOffset({containerSize:r,offset:o});var a=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:r,currentOffset:o,targetIndex:i});return this._offsetToSafeOffset({containerSize:r,offset:a})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,r=e.totalSize;return r<=t?0:n/(r-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),o=this.getTotalSize();if(r===o)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(o-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),o=this.getTotalSize();if(r===o)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:o});return Math.round(i*(r-t))}}]),e}(),k=n(498),R=n.n(k);function T(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var r=n.callback,o=n.indices,i=R()(o),a=!e||i.every((function(e){var t=o[e];return Array.isArray(t)?t.length>0:t>=0})),s=i.length!==R()(t).length||i.some((function(e){var n=t[e],r=o[e];return Array.isArray(r)?n.join(",")!==r.join(","):n!==r}));t=o,a&&s&&r(o)}}function _(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,r=e.previousCellsCount,o=e.previousCellSize,i=e.previousScrollToAlignment,a=e.previousScrollToIndex,s=e.previousSize,l=e.scrollOffset,c=e.scrollToAlignment,d=e.scrollToIndex,u=e.size,h=e.sizeJustIncreasedFromZero,p=e.updateScrollIndexCallback,f=n.getCellCount(),b=d>=0&&d<f;b&&(u!==s||h||!o||"number"==typeof t&&t!==o||c!==i||d!==a)?p(d):!b&&f>0&&(u<s||f<r)&&l>n.getTotalSize()-u&&p(f-1)}var F=n(3986),I=n.n(F),M=n(3525),P=void 0,z=(P="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||P.webkitRequestAnimationFrame||P.mozRequestAnimationFrame||P.oRequestAnimationFrame||P.msRequestAnimationFrame||function(e){return P.setTimeout(e,1e3/60)},E=P.cancelAnimationFrame||P.webkitCancelAnimationFrame||P.mozCancelAnimationFrame||P.oCancelAnimationFrame||P.msCancelAnimationFrame||function(e){P.clearTimeout(e)},D=z,N=E,q=(n(5),function(e){return N(e.id)}),A="observed",L="requested",U=function(e){function t(e){d()(this,t);var n=f()(this,(t.__proto__||l()(t)).call(this,e));n._onGridRenderedMemoizer=T(),n._onScrollMemoizer=T(!1),n._deferredInvalidateColumnIndex=null,n._deferredInvalidateRowIndex=null,n._recomputeScrollLeftFlag=!1,n._recomputeScrollTopFlag=!1,n._horizontalScrollBarSize=0,n._verticalScrollBarSize=0,n._scrollbarPresenceChanged=!1,n._renderedColumnStartIndex=0,n._renderedColumnStopIndex=0,n._renderedRowStartIndex=0,n._renderedRowStopIndex=0,n._styleCache={},n._cellCache={},n._debounceScrollEndedCallback=function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})},n._invokeOnGridRenderedHelper=function(){var e=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})},n._setScrollingContainerRef=function(e){n._scrollingContainer=e},n._onScroll=function(e){e.target===n._scrollingContainer&&n.handleScrollEvent(e.target)};var r=new w({cellCount:e.columnCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.columnWidth)(n)},estimatedCellSize:t._getEstimatedColumnSize(e)}),o=new w({cellCount:e.rowCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.rowHeight)(n)},estimatedCellSize:t._getEstimatedRowSize(e)});return n.state={instanceProps:{columnSizeAndPositionManager:r,rowSizeAndPositionManager:o,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(n._initialScrollTop=n._getCalculatedScrollTop(e,n.state)),e.scrollToColumn>0&&(n._initialScrollLeft=n._getCalculatedScrollLeft(e,n.state)),n}return m()(t,e),h()(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?this.props.scrollToAlignment:t,r=e.columnIndex,o=void 0===r?this.props.scrollToColumn:r,i=e.rowIndex,s=void 0===i?this.props.scrollToRow:i,l=a()({},this.props,{scrollToAlignment:n,scrollToColumn:o,scrollToRow:s});return{scrollLeft:this._getCalculatedScrollLeft(l),scrollTop:this._getCalculatedScrollTop(l)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,n=void 0===t?0:t,r=e.scrollTop,o=void 0===r?0:r;if(!(o<0)){this._debounceScrollEnded();var i=this.props,a=i.autoHeight,s=i.autoWidth,l=i.height,c=i.width,d=this.state.instanceProps,u=d.scrollbarSize,h=d.rowSizeAndPositionManager.getTotalSize(),p=d.columnSizeAndPositionManager.getTotalSize(),f=Math.min(Math.max(0,p-c+u),n),b=Math.min(Math.max(0,h-l+u),o);if(this.state.scrollLeft!==f||this.state.scrollTop!==b){var m={isScrolling:!0,scrollDirectionHorizontal:f!==this.state.scrollLeft?f>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:b!==this.state.scrollTop?b>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:A};a||(m.scrollTop=b),s||(m.scrollLeft=f),m.needToResetStyleCache=!1,this.setState(m)}this._invokeOnScrollMemoizer({scrollLeft:f,scrollTop:b,totalColumnsWidth:p,totalRowsHeight:h})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,n):n}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount,r=this.state.instanceProps;r.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),r.rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,o=void 0===r?0:r,i=this.props,a=i.scrollToColumn,s=i.scrollToRow,l=this.state.instanceProps;l.columnSizeAndPositionManager.resetCell(n),l.rowSizeAndPositionManager.resetCell(o),this._recomputeScrollLeftFlag=a>=0&&n<=a,this._recomputeScrollTopFlag=s>=0&&o<=s,this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=e.rowIndex,r=this.props.columnCount,o=this.props;r>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(a()({},o,{scrollToColumn:t})),void 0!==n&&this._updateScrollTopForScrollToRow(a()({},o,{scrollToRow:n}))}},{key:"componentDidMount",value:function(){var e=this.props,n=e.getScrollbarSize,r=e.height,o=e.scrollLeft,i=e.scrollToColumn,a=e.scrollTop,s=e.scrollToRow,l=e.width,c=this.state.instanceProps;this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),c.scrollbarSizeMeasured||this.setState((function(e){return e.instanceProps.scrollbarSize=n(),e.instanceProps.scrollbarSizeMeasured=!0,e.needToResetStyleCache=!1,e})),("number"==typeof o&&o>=0||"number"==typeof a&&a>=0)&&this.setState((function(e){var n=t._getScrollToPositionStateUpdate({prevState:e,scrollLeft:o,scrollTop:a});return n?(n.needToResetStyleCache=!1,n):null})),this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop);var d=r>0&&l>0;i>=0&&d&&this._updateScrollLeftForScrollToColumn(),s>=0&&d&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:o||0,scrollTop:a||0,totalColumnsWidth:c.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:c.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props,o=r.autoHeight,i=r.autoWidth,a=r.columnCount,s=r.height,l=r.rowCount,c=r.scrollToAlignment,d=r.scrollToColumn,u=r.scrollToRow,h=r.width,p=this.state,f=p.scrollLeft,b=p.scrollPositionChangeReason,m=p.scrollTop,g=p.instanceProps;this._handleInvalidatedGridSize();var v=a>0&&0===e.columnCount||l>0&&0===e.rowCount;b===L&&(!i&&f>=0&&(f!==this._scrollingContainer.scrollLeft||v)&&(this._scrollingContainer.scrollLeft=f),!o&&m>=0&&(m!==this._scrollingContainer.scrollTop||v)&&(this._scrollingContainer.scrollTop=m));var y=(0===e.width||0===e.height)&&s>0&&h>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):_({cellSizeAndPositionManager:g.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:f,scrollToAlignment:c,scrollToIndex:d,size:h,sizeJustIncreasedFromZero:y,updateScrollIndexCallback:function(){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):_({cellSizeAndPositionManager:g.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:m,scrollToAlignment:c,scrollToIndex:u,size:s,sizeJustIncreasedFromZero:y,updateScrollIndexCallback:function(){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),f!==t.scrollLeft||m!==t.scrollTop){var O=g.rowSizeAndPositionManager.getTotalSize(),S=g.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:f,scrollTop:m,totalColumnsWidth:S,totalRowsHeight:O})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&q(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,n=e.autoHeight,r=e.autoWidth,o=e.className,i=e.containerProps,s=e.containerRole,l=e.containerStyle,c=e.height,d=e.id,u=e.noContentRenderer,h=e.role,p=e.style,f=e.tabIndex,b=e.width,m=this.state,v=m.instanceProps,O=m.needToResetStyleCache,S=this._isScrolling(),C={boxSizing:"border-box",direction:"ltr",height:n?"auto":c,position:"relative",width:r?"auto":b,WebkitOverflowScrolling:"touch",willChange:"transform"};O&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var j=v.columnSizeAndPositionManager.getTotalSize(),x=v.rowSizeAndPositionManager.getTotalSize(),w=x>c?v.scrollbarSize:0,k=j>b?v.scrollbarSize:0;k===this._horizontalScrollBarSize&&w===this._verticalScrollBarSize||(this._horizontalScrollBarSize=k,this._verticalScrollBarSize=w,this._scrollbarPresenceChanged=!0),C.overflowX=j+w<=b?"hidden":"auto",C.overflowY=x+k<=c?"hidden":"auto";var R=this._childrenToDisplay,T=0===R.length&&c>0&&b>0;return g.createElement("div",a()({ref:this._setScrollingContainerRef},i,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:y()("ReactVirtualized__Grid",o),id:d,onScroll:this._onScroll,role:h,style:a()({},C,p),tabIndex:f}),R.length>0&&g.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:s,style:a()({width:t?"auto":j,height:x,maxWidth:j,maxHeight:x,overflow:"hidden",pointerEvents:S?"none":"",position:"relative"},l)},R),T&&u())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,r=e.cellRangeRenderer,o=e.columnCount,i=e.deferredMeasurementCache,a=e.height,s=e.overscanColumnCount,l=e.overscanIndicesGetter,c=e.overscanRowCount,d=e.rowCount,u=e.width,h=t.scrollDirectionHorizontal,p=t.scrollDirectionVertical,f=t.instanceProps,b=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,m=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,g=this._isScrolling(e,t);if(this._childrenToDisplay=[],a>0&&u>0){var v=f.columnSizeAndPositionManager.getVisibleCellRange({containerSize:u,offset:m}),y=f.rowSizeAndPositionManager.getVisibleCellRange({containerSize:a,offset:b}),O=f.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:u,offset:m}),S=f.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:a,offset:b});this._renderedColumnStartIndex=v.start,this._renderedColumnStopIndex=v.stop,this._renderedRowStartIndex=y.start,this._renderedRowStopIndex=y.stop;var C=l({direction:"horizontal",cellCount:o,overscanCellsCount:s,scrollDirection:h,startIndex:"number"==typeof v.start?v.start:0,stopIndex:"number"==typeof v.stop?v.stop:-1}),j=l({direction:"vertical",cellCount:d,overscanCellsCount:c,scrollDirection:p,startIndex:"number"==typeof y.start?y.start:0,stopIndex:"number"==typeof y.stop?y.stop:-1}),x=C.overscanStartIndex,w=C.overscanStopIndex,k=j.overscanStartIndex,R=j.overscanStopIndex;if(i){if(!i.hasFixedHeight())for(var T=k;T<=R;T++)if(!i.has(T,0)){x=0,w=o-1;break}if(!i.hasFixedWidth())for(var _=x;_<=w;_++)if(!i.has(0,_)){k=0,R=d-1;break}}this._childrenToDisplay=r({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:f.columnSizeAndPositionManager,columnStartIndex:x,columnStopIndex:w,deferredMeasurementCache:i,horizontalOffsetAdjustment:O,isScrolling:g,parent:this,rowSizeAndPositionManager:f.rowSizeAndPositionManager,rowStartIndex:k,rowStopIndex:R,scrollLeft:m,scrollTop:b,styleCache:this._styleCache,verticalOffsetAdjustment:S,visibleColumnIndices:v,visibleRowIndices:y}),this._columnStartIndex=x,this._columnStopIndex=w,this._rowStartIndex=k,this._rowStopIndex=R}}},{key:"_debounceScrollEnded",value:function(){var e,t,n,r,o=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&q(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=(e=this._debounceScrollEndedCallback,t=o,n=Date.now(),r={id:D((function o(){Date.now()-n>=t?e.call():r.id=D(o)}))})}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,r=e.scrollTop,o=e.totalColumnsWidth,i=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,r=e.scrollTop,a=t.props,s=a.height;(0,a.onScroll)({clientHeight:s,clientWidth:a.width,scrollHeight:i,scrollLeft:n,scrollTop:r,scrollWidth:o})},indices:{scrollLeft:n,scrollTop:r}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var n=e.scrollLeft,r=e.scrollTop;this.setState((function(e){var o=t._getScrollToPositionStateUpdate({prevState:e,scrollLeft:n,scrollTop:r});return o?(o.needToResetStyleCache=!1,o):null}))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,n)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,r=t._getScrollLeftForScrollToColumnStateUpdate(e,n);r&&(r.needToResetStyleCache=!1),this.setState(r)}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,n)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache;this._cellCache={},this._styleCache={};for(var t=this._rowStartIndex;t<=this._rowStopIndex;t++)for(var n=this._columnStartIndex;n<=this._columnStopIndex;n++){var r=t+"-"+n;this._styleCache[r]=e[r]}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,r=t._getScrollTopForScrollToRowStateUpdate(e,n);r&&(r.needToResetStyleCache=!1),this.setState(r)}}],[{key:"getDerivedStateFromProps",value:function(e,n){var r={};0===e.columnCount&&0!==n.scrollLeft||0===e.rowCount&&0!==n.scrollTop?(r.scrollLeft=0,r.scrollTop=0):e.scrollLeft===n.scrollLeft&&e.scrollTop===n.scrollTop||e.scrollToColumn>0&&n.scrollLeft&&0===e.scrollLeft||e.scrollToRow>0&&n.scrollTop&&0===e.scrollTop||o()(r,t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var i=n.instanceProps;r.needToResetStyleCache=!1,e.columnWidth===i.prevColumnWidth&&e.rowHeight===i.prevRowHeight||(r.needToResetStyleCache=!0),i.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),i.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==i.prevColumnCount&&0!==i.prevRowCount||(i.prevColumnCount=0,i.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===i.prevIsScrolling&&o()(r,{isScrolling:!1});var s=void 0,l=void 0;return O({cellCount:i.prevColumnCount,cellSize:"number"==typeof i.prevColumnWidth?i.prevColumnWidth:null,computeMetadataCallback:function(){return i.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:i.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){s=t._getScrollLeftForScrollToColumnStateUpdate(e,n)}}),O({cellCount:i.prevRowCount,cellSize:"number"==typeof i.prevRowHeight?i.prevRowHeight:null,computeMetadataCallback:function(){return i.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:i.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){l=t._getScrollTopForScrollToRowStateUpdate(e,n)}}),i.prevColumnCount=e.columnCount,i.prevColumnWidth=e.columnWidth,i.prevIsScrolling=!0===e.isScrolling,i.prevRowCount=e.rowCount,i.prevRowHeight=e.rowHeight,i.prevScrollToColumn=e.scrollToColumn,i.prevScrollToRow=e.scrollToRow,i.scrollbarSize=e.getScrollbarSize(),void 0===i.scrollbarSize?(i.scrollbarSizeMeasured=!1,i.scrollbarSize=0):i.scrollbarSizeMeasured=!0,r.instanceProps=i,a()({},r,s,l)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,n=e.scrollLeft,r=e.scrollTop,o={scrollPositionChangeReason:L};return"number"==typeof n&&n>=0&&(o.scrollDirectionHorizontal=n>t.scrollLeft?1:-1,o.scrollLeft=n),"number"==typeof r&&r>=0&&(o.scrollDirectionVertical=r>t.scrollTop?1:-1,o.scrollTop=r),"number"==typeof n&&n>=0&&n!==t.scrollLeft||"number"==typeof r&&r>=0&&r!==t.scrollTop?o:null}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var n=e.columnCount,r=e.height,o=e.scrollToAlignment,i=e.scrollToColumn,a=e.width,s=t.scrollLeft,l=t.instanceProps;if(n>0){var c=n-1,d=i<0?c:Math.min(c,i),u=l.rowSizeAndPositionManager.getTotalSize(),h=l.scrollbarSizeMeasured&&u>r?l.scrollbarSize:0;return l.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:a-h,currentOffset:s,targetIndex:d})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,n){var r=n.scrollLeft,o=t._getCalculatedScrollLeft(e,n);return"number"==typeof o&&o>=0&&r!==o?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:o,scrollTop:-1}):null}},{key:"_getCalculatedScrollTop",value:function(e,t){var n=e.height,r=e.rowCount,o=e.scrollToAlignment,i=e.scrollToRow,a=e.width,s=t.scrollTop,l=t.instanceProps;if(r>0){var c=r-1,d=i<0?c:Math.min(c,i),u=l.columnSizeAndPositionManager.getTotalSize(),h=l.scrollbarSizeMeasured&&u>a?l.scrollbarSize:0;return l.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:n-h,currentOffset:s,targetIndex:d})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,n){var r=n.scrollTop,o=t._getCalculatedScrollTop(e,n);return"number"==typeof o&&o>=0&&r!==o?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:-1,scrollTop:o}):null}}]),t}(g.PureComponent);U.defaultProps={"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,n=e.cellRenderer,r=e.columnSizeAndPositionManager,o=e.columnStartIndex,i=e.columnStopIndex,a=e.deferredMeasurementCache,s=e.horizontalOffsetAdjustment,l=e.isScrolling,c=e.parent,d=e.rowSizeAndPositionManager,u=e.rowStartIndex,h=e.rowStopIndex,p=e.styleCache,f=e.verticalOffsetAdjustment,b=e.visibleColumnIndices,m=e.visibleRowIndices,g=[],v=r.areOffsetsAdjusted()||d.areOffsetsAdjusted(),y=!l&&!v,O=u;O<=h;O++)for(var S=d.getSizeAndPositionOfCell(O),C=o;C<=i;C++){var j=r.getSizeAndPositionOfCell(C),x=C>=b.start&&C<=b.stop&&O>=m.start&&O<=m.stop,w=O+"-"+C,k=void 0;y&&p[w]?k=p[w]:a&&!a.has(O,C)?k={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(k={height:S.size,left:j.offset+s,position:"absolute",top:S.offset+f,width:j.size},p[w]=k);var R={columnIndex:C,isScrolling:l,isVisible:x,key:w,parent:c,rowIndex:O,style:k},T=void 0;!l||s||f?T=n(R):(t[w]||(t[w]=n(R)),T=t[w]),null!=T&&!1!==T&&g.push(T)}return g},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:I.a,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(e){var t=e.cellCount,n=e.overscanCellsCount,r=e.scrollDirection,o=e.startIndex,i=e.stopIndex;return 1===r?{overscanStartIndex:Math.max(0,o),overscanStopIndex:Math.min(t-1,i+n)}:{overscanStartIndex:Math.max(0,o-n),overscanStopIndex:Math.min(t-1,i)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0},U.propTypes=null,Object(M.polyfill)(U);t.a=U},4469:function(e,t,n){var r=n(1009),o=n(3542),i=n(4544),a=n(1010),s=n(4545),l=n(1006);e.exports=function(e,t,n){var c=-1,d=o,u=e.length,h=!0,p=[],f=p;if(n)h=!1,d=i;else if(u>=200){var b=t?null:s(e);if(b)return l(b);h=!1,d=a,f=new r}else f=t?[]:p;e:for(;++c<u;){var m=e[c],g=t?t(m):m;if(m=n||0!==m?m:0,h&&g==g){for(var v=f.length;v--;)if(f[v]===g)continue e;t&&f.push(g),p.push(m)}else d(f,g,n)||(f!==p&&f.push(g),p.push(m))}return p}},4499:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(3375),o=n(0);function i(e){var t=Object(o.useState)(e),n=t[1];return[t[0],Object(o.useCallback)((function(e){n(Object(r.a)(e))}),[])]}function a(e,t,n){var i=Object(o.useMemo)((function(){return Object(r.a)(e)}),[e]);return Object(o.useReducer)(i,t,n)}},4544:function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},4545:function(e,t,n){var r=n(1011),o=n(3541),i=n(1006),a=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=a},4550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyContainer=t.Sticky=void 0;var r=i(n(5164)),o=i(n(5165));function i(e){return e&&e.__esModule?e:{default:e}}t.Sticky=r.default,t.StickyContainer=o.default,t.default=r.default},464:function(e,t,n){e.exports={default:n(3636),__esModule:!0}},4708:function(e,t,n){var r;window,e.exports=(r=n(0),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t,n){e.exports=n(96)()},function(e,t){e.exports=r},function(e,t,n){var r=n(16),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){var r=n(41),o=n(47);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(31),o=n(32),i=n(33),a=n(34),s=n(35);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(14);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(12),o=n(43),i=n(44),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},function(e,t,n){var r=n(3)(Object,"create");e.exports=r},function(e,t,n){var r=n(56);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var a=o.apply(null,r);a&&e.push(a)}else if("object"===i)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r=n(3)(n(2),"Map");e.exports=r},function(e,t,n){var r=n(2).Symbol;e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(6),o=n(17);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(42))},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(48),o=n(55),i=n(57),a=n(58),s=n(59);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(60),o=n(63),i=n(64);e.exports=function(e,t,n,a,s,l){var c=1&n,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(e);if(h&&l.get(t))return h==t;var p=-1,f=!0,b=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<d;){var m=e[p],g=t[p];if(a)var v=c?a(g,m,p,t,e,l):a(m,g,p,e,t,l);if(void 0!==v){if(v)continue;f=!1;break}if(b){if(!o(t,(function(e,t){if(!i(b,t)&&(m===e||s(m,e,n,a,l)))return b.push(t)}))){f=!1;break}}else if(m!==g&&!s(m,g,n,a,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},function(e,t,n){(function(e){var r=n(2),o=n(81),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;e.exports=l}).call(this,n(22)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(83),o=n(84),i=n(85),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var r=n(28);e.exports=function(e,t){return r(e,t)}},function(e,t,n){var r=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var t="",n=r.getRandomValues(new Uint8Array(e));0<e--;)t+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-"[63&n[e]];return t}},function(e,t,n){e.exports=n(98).default},function(e,t,n){var r=n(29),o=n(9);e.exports=function e(t,n,i,a,s){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,i,a,e,s))}},function(e,t,n){var r=n(30),o=n(20),i=n(65),a=n(69),s=n(91),l=n(13),c=n(21),d=n(23),u="[object Arguments]",h="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,b,m,g){var v=l(e),y=l(t),O=v?h:s(e),S=y?h:s(t),C=(O=O==u?p:O)==p,j=(S=S==u?p:S)==p,x=O==S;if(x&&c(e)){if(!c(t))return!1;v=!0,C=!1}if(x&&!C)return g||(g=new r),v||d(e)?o(e,t,n,b,m,g):i(e,t,O,n,b,m,g);if(!(1&n)){var w=C&&f.call(e,"__wrapped__"),k=j&&f.call(t,"__wrapped__");if(w||k){var R=w?e.value():e,T=k?t.value():t;return g||(g=new r),m(R,T,n,b,g)}}return!!x&&(g||(g=new r),a(e,t,n,b,m,g))}},function(e,t,n){var r=n(4),o=n(36),i=n(37),a=n(38),s=n(39),l=n(40);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(5),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(5);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(5);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(5);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(4);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(4),o=n(11),i=n(19);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(15),o=n(45),i=n(17),a=n(18),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?h:s).test(a(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(12),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,o=n(46),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(2)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(49),o=n(4),i=n(11);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(e,t,n){var r=n(50),o=n(51),i=n(52),a=n(53),s=n(54);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(7);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(7),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(7),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(7);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(8);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(8);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(8);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(8);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t,n){var r=n(19),o=n(61),i=n(62);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(12),o=n(66),i=n(14),a=n(20),s=n(67),l=n(68),c=r?r.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,u,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=l),e.size!=t.size&&!f)return!1;var b=h.get(e);if(b)return b==t;r|=2,h.set(e,t);var m=a(p(e),p(t),r,c,u,h);return h.delete(e),m;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},function(e,t,n){var r=n(2).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(70),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,a,s){var l=1&n,c=r(e),d=c.length;if(d!=r(t).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in t:o.call(t,h)))return!1}var p=s.get(e);if(p&&s.get(t))return p==t;var f=!0;s.set(e,t),s.set(t,e);for(var b=l;++u<d;){var m=e[h=c[u]],g=t[h];if(i)var v=l?i(g,m,h,t,e,s):i(m,g,h,e,t,s);if(!(void 0===v?m===g||a(m,g,n,i,s):v)){f=!1;break}b||(b="constructor"==h)}if(f&&!b){var y=e.constructor,O=t.constructor;y!=O&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof O&&O instanceof O)&&(f=!1)}return s.delete(e),s.delete(t),f}},function(e,t,n){var r=n(71),o=n(73),i=n(76);e.exports=function(e){return r(e,i,o)}},function(e,t,n){var r=n(72),o=n(13);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(74),o=n(75),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(77),o=n(86),i=n(90);e.exports=function(e){return i(e)?r(e):o(e)}},function(e,t,n){var r=n(78),o=n(79),i=n(13),a=n(21),s=n(82),l=n(23),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),d=!n&&o(e),u=!n&&!d&&a(e),h=!n&&!d&&!u&&l(e),p=n||d||u||h,f=p?r(e.length,String):[],b=f.length;for(var m in e)!t&&!c.call(e,m)||p&&("length"==m||u&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,b))||f.push(m);return f}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(80),o=n(9),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){var r=n(6),o=n(9);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(6),o=n(24),i=n(9),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(16),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,s=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n(22)(e))},function(e,t,n){var r=n(87),o=n(88),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(89)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(15),o=n(24);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){var r=n(92),o=n(11),i=n(93),a=n(94),s=n(95),l=n(6),c=n(18),d=c(r),u=c(o),h=c(i),p=c(a),f=c(s),b=l;(r&&"[object DataView]"!=b(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=b(new o)||i&&"[object Promise]"!=b(i.resolve())||a&&"[object Set]"!=b(new a)||s&&"[object WeakMap]"!=b(new s))&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case d:return"[object DataView]";case u:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case f:return"[object WeakMap]"}return t}),e.exports=b},function(e,t,n){var r=n(3)(n(2),"DataView");e.exports=r},function(e,t,n){var r=n(3)(n(2),"Promise");e.exports=r},function(e,t,n){var r=n(3)(n(2),"Set");e.exports=r},function(e,t,n){var r=n(3)(n(2),"WeakMap");e.exports=r},function(e,t,n){"use strict";var r=n(97);function o(){}e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(10),o=n.n(r),i=n(25),a=n.n(i),s=n(26),l=n.n(s),c=n(0),d=n.n(c),u=n(1),h=n.n(u);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,g(t).apply(this,arguments))}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,h.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["children","title"]);return h.a.createElement("button",f({"aria-label":n,title:n,type:"button"},r),t)}}])&&b(n.prototype,r),t}();y(O,"propTypes",{children:d.a.node.isRequired,title:d.a.string}),y(O,"defaultProps",{title:null});var S=O;function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t,this.flatNodes=n}var t,n;return t=e,(n=[{key:"setProps",value:function(e){this.props=e}},{key:"clone",value:function(){var t=this,n={};return Object.keys(this.flatNodes).forEach((function(e){var r=t.flatNodes[e];n[e]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}({},r)})),new e(this.props,n)}},{key:"getNode",value:function(e){return this.flatNodes[e]}},{key:"flattenNodes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Array.isArray(e)&&0!==e.length){var o=this.props,i=o.disabled,a=o.noCascade;e.forEach((function(e,o){var s=t.nodeHasChildren(e);t.flatNodes[e.value]={label:e.label,value:e.value,children:e.children,parent:n,isParent:s,isLeaf:!s,showCheckbox:void 0===e.showCheckbox||e.showCheckbox,disabled:t.getDisabledState(e,n,i,a),treeDepth:r,index:o},t.flattenNodes(e.children,e,r+1)}))}}},{key:"nodeHasChildren",value:function(e){return Array.isArray(e.children)&&e.children.length>0}},{key:"getDisabledState",value:function(e,t,n,r){return!!n||!(r||!t.disabled)||Boolean(e.disabled)}},{key:"deserializeLists",value:function(e){var t=this,n=["checked","expanded"];Object.keys(this.flatNodes).forEach((function(e){n.forEach((function(n){t.flatNodes[e][n]=!1}))})),n.forEach((function(n){e[n].forEach((function(e){void 0!==t.flatNodes[e]&&(t.flatNodes[e][n]=!0)}))}))}},{key:"serializeList",value:function(e){var t=this,n=[];return Object.keys(this.flatNodes).forEach((function(r){t.flatNodes[r][e]&&n.push(r)})),n}},{key:"expandAllNodes",value:function(e){var t=this;return Object.keys(this.flatNodes).forEach((function(n){t.flatNodes[n].isParent&&(t.flatNodes[n].expanded=e)})),this}},{key:"toggleChecked",value:function(e,t,n){var r=this,o=this.flatNodes[e.value];if(o.isLeaf||n){if(e.disabled)return this;this.toggleNode(e.value,"checked",t)}else o.children.forEach((function(e){r.toggleChecked(e,t,n)}));return this}},{key:"toggleNode",value:function(e,t,n){return this.flatNodes[e][t]=n,this}}])&&j(t.prototype,n),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,_(t).apply(this,arguments))}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,h.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.updateDeterminateProperty()}},{key:"componentDidUpdate",value:function(){this.updateDeterminateProperty()}},{key:"updateDeterminateProperty",value:function(){var e=this.props.indeterminate;this.checkbox.indeterminate=e}},{key:"render",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}({},this.props);return delete t.indeterminate,h.a.createElement("input",k({},t,{ref:function(t){e.checkbox=t},type:"checkbox"}))}}])&&R(n.prototype,r),t}();I(M,"propTypes",{indeterminate:d.a.bool}),I(M,"defaultProps",{indeterminate:!1});var P=M,z=d.a.shape({check:d.a.node,uncheck:d.a.node,halfCheck:d.a.node,expandClose:d.a.node,expandOpen:d.a.node,expandAll:d.a.node,collapseAll:d.a.node,parentClose:d.a.node,parentOpen:d.a.node,leaf:d.a.node}),E=d.a.shape({collapseAll:d.a.string.isRequired,expandAll:d.a.string.isRequired,toggle:d.a.string.isRequired});function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=!(r=q(t).call(this,e))||"object"!==D(r)&&"function"!=typeof r?L(this):r).onCheck=n.onCheck.bind(L(L(n))),n.onClick=n.onClick.bind(L(L(n))),n.onExpand=n.onExpand.bind(L(L(n))),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,h.a.Component),n=t,(r=[{key:"onCheck",value:function(){var e=this.props,t=e.value;(0,e.onCheck)({value:t,checked:this.getCheckState({toggle:!0})})}},{key:"onClick",value:function(){var e=this.props,t=e.expandOnClick,n=e.isParent,r=e.value,o=e.onClick;n&&t&&this.onExpand(),o({value:r,checked:this.getCheckState({toggle:!1})})}},{key:"onExpand",value:function(){var e=this.props,t=e.expanded,n=e.value;(0,e.onExpand)({value:n,expanded:!t})}},{key:"getCheckState",value:function(e){var t=e.toggle,n=this.props,r=n.checked,o=n.optimisticToggle;return!(0!==r||!t)||1===r&&!t||2===r&&o}},{key:"renderCollapseButton",value:function(){var e=this.props,t=e.expandDisabled,n=e.isLeaf,r=e.lang;return n?h.a.createElement("span",{className:"rct-collapse"},h.a.createElement("span",{className:"rct-icon"})):h.a.createElement(S,{className:"rct-collapse rct-collapse-btn",disabled:t,title:r.toggle,onClick:this.onExpand},this.renderCollapseIcon())}},{key:"renderCollapseIcon",value:function(){var e=this.props,t=e.expanded,n=e.icons,r=n.expandClose,o=n.expandOpen;return t?o:r}},{key:"renderCheckboxIcon",value:function(){var e=this.props,t=e.checked,n=e.icons,r=n.uncheck,o=n.check,i=n.halfCheck;return 0===t?r:1===t?o:i}},{key:"renderNodeIcon",value:function(){var e=this.props,t=e.expanded,n=e.icon,r=e.icons,o=r.leaf,i=r.parentClose,a=r.parentOpen,s=e.isLeaf;return null!==n?n:s?o:t?a:i}},{key:"renderBareLabel",value:function(e){var t=this.props,n=t.onClick,r=t.title,o=null!==n;return h.a.createElement("span",{className:"rct-bare-label",title:r},o?h.a.createElement("span",{className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},e):e)}},{key:"renderCheckboxLabel",value:function(e){var t=this.props,n=t.checked,r=t.disabled,o=t.title,i=t.treeId,a=t.value,s=null!==t.onClick,l="".concat(i,"-").concat(String(a).split(" ").join("_")),c=[h.a.createElement("label",{key:0,htmlFor:l,title:o},h.a.createElement(P,{checked:1===n,disabled:r,id:l,indeterminate:2===n,onClick:this.onCheck,onChange:function(){}}),h.a.createElement("span",{className:"rct-checkbox"},this.renderCheckboxIcon()),s?null:e)];return s&&c.push(h.a.createElement("span",{key:1,className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"link",tabIndex:0},e)),c}},{key:"renderLabel",value:function(){var e=this.props,t=e.label,n=e.showCheckbox,r=[e.showNodeIcon?h.a.createElement("span",{key:0,className:"rct-node-icon"},this.renderNodeIcon()):null,h.a.createElement("span",{key:1,className:"rct-title"},t)];return n?this.renderCheckboxLabel(r):this.renderBareLabel(r)}},{key:"renderChildren",value:function(){return this.props.expanded?this.props.children:null}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.disabled,r=e.expanded,i=e.isLeaf,a=o()({"rct-node":!0,"rct-node-leaf":i,"rct-node-parent":!i,"rct-node-expanded":!i&&r,"rct-node-collapsed":!i&&!r,"rct-disabled":n},t);return h.a.createElement("li",{className:a},h.a.createElement("span",{className:"rct-text"},this.renderCollapseButton(),this.renderLabel()),this.renderChildren())}}])&&N(n.prototype,r),t}();U($,"propTypes",{checked:d.a.number.isRequired,disabled:d.a.bool.isRequired,expandDisabled:d.a.bool.isRequired,expanded:d.a.bool.isRequired,icons:z.isRequired,isLeaf:d.a.bool.isRequired,isParent:d.a.bool.isRequired,label:d.a.node.isRequired,lang:E.isRequired,optimisticToggle:d.a.bool.isRequired,showNodeIcon:d.a.bool.isRequired,treeId:d.a.string.isRequired,value:d.a.oneOfType([d.a.string,d.a.number]).isRequired,onCheck:d.a.func.isRequired,onExpand:d.a.func.isRequired,children:d.a.node,className:d.a.string,expandOnClick:d.a.bool,icon:d.a.node,showCheckbox:d.a.bool,title:d.a.string,onClick:d.a.func}),U($,"defaultProps",{children:null,className:null,expandOnClick:!1,icon:null,showCheckbox:!0,title:null,onClick:function(){}});var H=$,B=d.a.oneOfType([d.a.arrayOf(d.a.string),d.a.arrayOf(d.a.number)]);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V={label:d.a.node.isRequired,value:d.a.oneOfType([d.a.string,d.a.number]).isRequired,disabled:d.a.bool,icon:d.a.node,showCheckbox:d.a.bool,title:d.a.string},G=d.a.oneOfType([d.a.shape(V),d.a.shape(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}({},V,{children:d.a.arrayOf(V).isRequired}))]);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ee(e,t,n[t])}))}return e}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){function t(e){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=!(r=J(t).call(this,e))||"object"!==K(r)&&"function"!=typeof r?Z(this):r;var o=new x(e);return o.flattenNodes(e.nodes),o.deserializeLists({checked:e.checked,expanded:e.expanded}),n.state={id:e.id||"rct-".concat(l()(7)),model:o,prevProps:e},n.onCheck=n.onCheck.bind(Z(Z(n))),n.onExpand=n.onExpand.bind(Z(Z(n))),n.onNodeClick=n.onNodeClick.bind(Z(Z(n))),n.onExpandAll=n.onExpandAll.bind(Z(Z(n))),n.onCollapseAll=n.onCollapseAll.bind(Z(Z(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,h.a.Component),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.model,r=t.prevProps,o=e.disabled,i=e.id,s=e.nodes,l=Q({},t,{prevProps:e});return n.setProps(e),a()(r.nodes,s)&&r.disabled===o||n.flattenNodes(s),null!==i&&(l=Q({},l,{id:i})),n.deserializeLists({checked:e.checked,expanded:e.expanded}),l}}],(r=[{key:"onCheck",value:function(e){var t=this.props,n=t.noCascade,r=t.onCheck,o=this.state.model.clone(),i=o.getNode(e.value);o.toggleChecked(e,e.checked,n),r(o.serializeList("checked"),Q({},i,e))}},{key:"onExpand",value:function(e){var t=this.props.onExpand,n=this.state.model.clone(),r=n.getNode(e.value);n.toggleNode(e.value,"expanded",e.expanded),t(n.serializeList("expanded"),Q({},r,e))}},{key:"onNodeClick",value:function(e){(0,this.props.onClick)(Q({},this.state.model.getNode(e.value),e))}},{key:"onExpandAll",value:function(){this.expandAllNodes()}},{key:"onCollapseAll",value:function(){this.expandAllNodes(!1)}},{key:"expandAllNodes",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,this.props.onExpand)(this.state.model.clone().expandAllNodes(e).serializeList("expanded"))}},{key:"determineShallowCheckState",value:function(e,t){var n=this.state.model.getNode(e.value);return n.isLeaf||t?n.checked?1:0:this.isEveryChildChecked(e)?1:this.isSomeChildChecked(e)?2:0}},{key:"isEveryChildChecked",value:function(e){var t=this;return e.children.every((function(e){return 1===t.state.model.getNode(e.value).checkState}))}},{key:"isSomeChildChecked",value:function(e){var t=this;return e.children.some((function(e){return t.state.model.getNode(e.value).checkState>0}))}},{key:"renderTreeNodes",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.props,i=o.expandDisabled,a=o.expandOnClick,s=o.icons,l=o.lang,c=o.noCascade,d=o.onClick,u=o.onlyLeafCheckboxes,p=o.optimisticToggle,f=o.showNodeTitle,b=o.showNodeIcon,m=this.state,g=m.id,v=m.model,y=t.defaultProps.icons,O=e.map((function(e){var t=e.value,o=v.getNode(e.value),m=o.isParent?n.renderTreeNodes(e.children,e):null;o.checkState=n.determineShallowCheckState(e,c);var O=u?o.isLeaf:o.showCheckbox;return!r.value||v.getNode(r.value).expanded?h.a.createElement(H,{key:t,checked:o.checkState,className:e.className,disabled:o.disabled,expandDisabled:i,expandOnClick:a,expanded:o.expanded,icon:e.icon,icons:Q({},y,s),label:e.label,lang:l,optimisticToggle:p,isLeaf:o.isLeaf,isParent:o.isParent,showCheckbox:O,showNodeIcon:b,title:f?e.title||e.label:e.title,treeId:g,value:e.value,onCheck:n.onCheck,onClick:d&&n.onNodeClick,onExpand:n.onExpand},m):null}));return h.a.createElement("ol",null,O)}},{key:"renderExpandAll",value:function(){var e=this.props,t=e.icons,n=t.expandAll,r=t.collapseAll,o=e.lang;return e.showExpandAll?h.a.createElement("div",{className:"rct-options"},h.a.createElement(S,{className:"rct-option rct-option-expand-all",title:o.expandAll,onClick:this.onExpandAll},n),h.a.createElement(S,{className:"rct-option rct-option-collapse-all",title:o.collapseAll,onClick:this.onCollapseAll},r)):null}},{key:"renderHiddenInput",value:function(){var e=this.props,t=e.name,n=e.nameAsArray;return void 0===t?null:n?this.renderArrayHiddenInput():this.renderJoinedHiddenInput()}},{key:"renderArrayHiddenInput",value:function(){var e=this.props,t=e.checked,n=e.name;return t.map((function(e){var t="".concat(n,"[]");return h.a.createElement("input",{key:e,name:t,type:"hidden",value:e})}))}},{key:"renderJoinedHiddenInput",value:function(){var e=this.props,t=e.checked,n=e.name,r=t.join(",");return h.a.createElement("input",{name:n,type:"hidden",value:r})}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.nodes,r=e.nativeCheckboxes,i=this.renderTreeNodes(n),a=o()({"react-checkbox-tree":!0,"rct-disabled":t,"rct-native-display":r});return h.a.createElement("div",{className:a},this.renderExpandAll(),this.renderHiddenInput(),i)}}])&&Y(n.prototype,r),i&&Y(n,i),t}();ee(te,"propTypes",{nodes:d.a.arrayOf(G).isRequired,checked:B,disabled:d.a.bool,expandDisabled:d.a.bool,expandOnClick:d.a.bool,expanded:B,icons:z,id:d.a.string,lang:E,name:d.a.string,nameAsArray:d.a.bool,nativeCheckboxes:d.a.bool,noCascade:d.a.bool,onlyLeafCheckboxes:d.a.bool,optimisticToggle:d.a.bool,showExpandAll:d.a.bool,showNodeIcon:d.a.bool,showNodeTitle:d.a.bool,onCheck:d.a.func,onClick:d.a.func,onExpand:d.a.func}),ee(te,"defaultProps",{checked:[],disabled:!1,expandDisabled:!1,expandOnClick:!1,expanded:[],icons:{check:h.a.createElement("span",{className:"rct-icon rct-icon-check"}),uncheck:h.a.createElement("span",{className:"rct-icon rct-icon-uncheck"}),halfCheck:h.a.createElement("span",{className:"rct-icon rct-icon-half-check"}),expandClose:h.a.createElement("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:h.a.createElement("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:h.a.createElement("span",{className:"rct-icon rct-icon-expand-all"}),collapseAll:h.a.createElement("span",{className:"rct-icon rct-icon-collapse-all"}),parentClose:h.a.createElement("span",{className:"rct-icon rct-icon-parent-close"}),parentOpen:h.a.createElement("span",{className:"rct-icon rct-icon-parent-open"}),leaf:h.a.createElement("span",{className:"rct-icon rct-icon-leaf"})},id:null,lang:{collapseAll:"Collapse all",expandAll:"Expand all",toggle:"Toggle"},name:void 0,nameAsArray:!1,nativeCheckboxes:!1,noCascade:!1,onlyLeafCheckboxes:!1,optimisticToggle:!0,showExpandAll:!1,showNodeIcon:!0,showNodeTitle:!1,onCheck:function(){},onClick:null,onExpand:function(){}}),t.default=te}]))},4709:function(e,t,n){e.exports=n(5180)},492:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},498:function(e,t,n){e.exports={default:n(3634),__esModule:!0}},5164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=l(o),a=l(n(27)),s=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;c(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isSticky:!1,wasSticky:!1,style:{}},r.handleContainerEvent=function(e){var t=e.distanceFromTop,n=e.distanceFromBottom,o=e.eventSource,i=r.context.getParent(),a=!1;r.props.relative&&(a=o!==i,t=-(o.scrollTop+o.offsetTop)+r.placeholder.offsetTop);var s=r.placeholder.getBoundingClientRect(),l=r.content.getBoundingClientRect().height,c=n-r.props.bottomOffset-l,d=!!r.state.isSticky,u=a?d:t<=-r.props.topOffset&&n>-r.props.bottomOffset;n=(r.props.relative?i.scrollHeight-i.scrollTop:n)-l;var h=u?{position:"fixed",top:c>0?r.props.relative?i.offsetTop-i.offsetParent.scrollTop:0:c,left:s.left,width:s.width}:{};r.props.disableHardwareAcceleration||(h.transform="translateZ(0)"),r.setState({isSticky:u,wasSticky:d,distanceFromTop:t,distanceFromBottom:n,calculatedHeight:l,style:h})},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){if(!this.context.subscribe)throw new TypeError("Expected Sticky to be mounted within StickyContainer");this.context.subscribe(this.handleContainerEvent)}},{key:"componentWillUnmount",value:function(){this.context.unsubscribe(this.handleContainerEvent)}},{key:"componentDidUpdate",value:function(){this.placeholder.style.paddingBottom=this.props.disableCompensation?0:(this.state.isSticky?this.state.calculatedHeight:0)+"px"}},{key:"render",value:function(){var e=this,t=i.default.cloneElement(this.props.children({isSticky:this.state.isSticky,wasSticky:this.state.wasSticky,distanceFromTop:this.state.distanceFromTop,distanceFromBottom:this.state.distanceFromBottom,calculatedHeight:this.state.calculatedHeight,style:this.state.style}),{ref:function(t){e.content=a.default.findDOMNode(t)}});return i.default.createElement("div",null,i.default.createElement("div",{ref:function(t){return e.placeholder=t}}),t)}}]),t}(o.Component);u.propTypes={topOffset:s.default.number,bottomOffset:s.default.number,relative:s.default.bool,children:s.default.func.isRequired},u.defaultProps={relative:!1,topOffset:0,bottomOffset:0,disableCompensation:!1,disableHardwareAcceleration:!1},u.contextTypes={subscribe:s.default.func,unsubscribe:s.default.func,getParent:s.default.func},t.default=u},5165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=c(i),s=c(n(5)),l=c(n(5166));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var e,n,r;d(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.events=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],r.subscribers=[],r.rafHandle=null,r.subscribe=function(e){r.subscribers=r.subscribers.concat(e)},r.unsubscribe=function(e){r.subscribers=r.subscribers.filter((function(t){return t!==e}))},r.notifySubscribers=function(e){if(!r.framePending){var t=e.currentTarget;r.rafHandle=(0,l.default)((function(){r.framePending=!1;var e=r.node.getBoundingClientRect(),n=e.top,o=e.bottom;r.subscribers.forEach((function(e){return e({distanceFromTop:n,distanceFromBottom:o,eventSource:t===window?document.body:r.node})}))})),r.framePending=!0}},r.getParent=function(){return r.node},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"getChildContext",value:function(){return{subscribe:this.subscribe,unsubscribe:this.unsubscribe,getParent:this.getParent}}},{key:"componentDidMount",value:function(){var e=this;this.events.forEach((function(t){return window.addEventListener(t,e.notifySubscribers)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.rafHandle&&(l.default.cancel(this.rafHandle),this.rafHandle=null),this.events.forEach((function(t){return window.removeEventListener(t,e.notifySubscribers)}))}},{key:"render",value:function(){var e=this;return a.default.createElement("div",r({},this.props,{ref:function(t){return e.node=t},onScroll:this.notifySubscribers,onTouchStart:this.notifySubscribers,onTouchMove:this.notifySubscribers,onTouchEnd:this.notifySubscribers}))}}]),t}(i.PureComponent);h.childContextTypes={subscribe:s.default.func,unsubscribe:s.default.func,getParent:s.default.func},t.default=h},5166:function(e,t,n){(function(t){for(var r=n(5167),o="undefined"==typeof window?t:window,i=["moz","webkit"],a="AnimationFrame",s=o["request"+a],l=o["cancel"+a]||o["cancelRequest"+a],c=0;!s&&c<i.length;c++)s=o[i[c]+"Request"+a],l=o[i[c]+"Cancel"+a]||o[i[c]+"CancelRequest"+a];if(!s||!l){var d=0,u=0,h=[];s=function(e){if(0===h.length){var t=r(),n=Math.max(0,1e3/60-(t-d));d=n+t,setTimeout((function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(d)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return h.push({handle:++u,callback:e,cancelled:!1}),u},l=function(e){for(var t=0;t<h.length;t++)h[t].handle===e&&(h[t].cancelled=!0)}}e.exports=function(e){return s.call(o,e)},e.exports.cancel=function(){l.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}}).call(this,n(156))},5167:function(e,t,n){(function(t){(function(){var n,r,o,i,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},r=t.hrtime,i=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*t.uptime(),a=i-s):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,n(547))},5168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFilter=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=l(o),a=l(n(5)),s=n(5169);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={searchTerm:n.props.value||""},n.updateSearch=n.updateSearch.bind(n),n.filter=n.filter.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){if(void 0!==e.value&&e.value!==this.props.value){var t={target:{value:e.value}};this.updateSearch(t)}}},{key:"render",value:function(){var e=this.props,t=e.className,n=(e.onChange,e.caseSensitive,e.sortResults,e.throttle,e.filterKeys,e.value,e.fuzzy,e.inputClassName),r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","onChange","caseSensitive","sortResults","throttle","filterKeys","value","fuzzy","inputClassName"]);return r.type=r.type||"search",r.value=this.state.searchTerm,r.onChange=this.updateSearch,r.className=n,r.placeholder=r.placeholder||"Search",i.default.createElement("div",{className:t},i.default.createElement("input",r))}},{key:"updateSearch",value:function(e){var t=this,n=e.target.value;this.setState({searchTerm:n},(function(){t._throttleTimeout&&clearTimeout(t._throttleTimeout),t._throttleTimeout=setTimeout((function(){return t.props.onChange(n)}),t.props.throttle)}))}},{key:"filter",value:function(e){var t=this.props,n=t.filterKeys,r=t.caseSensitive,o=t.fuzzy,i=t.sortResults;return(0,s.createFilter)(this.state.searchTerm,e||n,{caseSensitive:r,fuzzy:o,sortResults:i})}}]),t}(o.Component);c.defaultProps={className:"",onChange:function(){},caseSensitive:!1,fuzzy:!1,throttle:200},c.propTypes={className:a.default.string,inputClassName:a.default.string,onChange:a.default.func,caseSensitive:a.default.bool,sortResults:a.default.bool,fuzzy:a.default.bool,throttle:a.default.number,filterKeys:a.default.oneOf([a.default.string,a.default.arrayOf(a.default.string)]),value:a.default.string},t.default=c,t.createFilter=s.createFilter},5169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValuesForKey=a,t.searchStrings=s,t.createFilter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(""===e)return!0;n.caseSensitive||(e=e.toLowerCase());var o=e.split(" ");return t?("string"==typeof t&&(t=[t]),o.every((function(e){var o=void 0;if(-1!==e.indexOf(":")){var i=e.split(":")[0];e=e.split(":")[1],o=t.filter((function(e){return e.toLowerCase().indexOf(i)>-1}))}else o=t;return o.some((function(t){return s(a(t,r),e,n)}))}))):o.every((function(e){return s([r],e,n)}))}};var r,o=n(5170),i=(r=o)&&r.__esModule?r:{default:r};function a(e,t){var n=e.split("."),r=[t];return n.forEach((function(e){var t=[];r.forEach((function(n){if(n)if(n instanceof Array){var r=parseInt(e,10);if(!isNaN(r))return t.push(n[r]);n.forEach((function(n){t.push(n[e])}))}else n&&"function"==typeof n.get?t.push(n.get(e)):t.push(n[e])})),r=t})),(r=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])}(r=r.map((function(e){return e&&e.push&&e.toArray?e.toArray():e})))).filter((function(e){return"string"==typeof e||"number"==typeof e}))}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.caseSensitive,o=n.fuzzy,a=n.sortResults,s=n.exactMatch;e=e.map((function(e){return e.toString()}));try{if(o){"function"==typeof e.toJS&&(e=e.toJS());var l=new i.default(e.map((function(e){return{id:e}})),{keys:["id"],id:"id",caseSensitive:r,shouldSort:a});return l.search(t).length}return e.some((function(e){try{return r||(e=e.toLowerCase()),s&&(t=new RegExp("^"+t+"$","i")),!(!e||-1===e.search(t))}catch(e){return!1}}))}catch(e){return!1}}},5170:function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";e.exports=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),i=n(7),a=n(4),s=function(){function e(t,n){var r=n.location,o=void 0===r?0:r,i=n.distance,s=void 0===i?100:i,l=n.threshold,c=void 0===l?.6:l,d=n.maxPatternLength,u=void 0===d?32:d,h=n.isCaseSensitive,p=void 0!==h&&h,f=n.tokenSeparator,b=void 0===f?/ +/g:f,m=n.findAllMatches,g=void 0!==m&&m,v=n.minMatchCharLength,y=void 0===v?1:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:o,distance:s,threshold:c,maxPatternLength:u,isCaseSensitive:p,tokenSeparator:b,findAllMatches:g,minMatchCharLength:y},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=a(this.pattern))}return r(e,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>n)return o(e,this.pattern,r);var a=this.options,s=a.location,l=a.distance,c=a.threshold,d=a.findAllMatches,u=a.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:s,distance:l,threshold:c,findAllMatches:d,minMatchCharLength:u})}}]),e}();e.exports=s},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){return function e(t,n,o){if(n){var i=n.indexOf("."),a=n,s=null;-1!==i&&(a=n.slice(0,i),s=n.slice(i+1));var l=t[a];if(null!=l)if(s||"string"!=typeof l&&"number"!=typeof l)if(r(l))for(var c=0,d=l.length;c<d;c+=1)e(l[c],s,o);else s&&e(l,s,o);else o.push(l.toString())}else o.push(t);return o}(e,t,[])}},function(e,t,n){"use strict";e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,o=-1,i=0,a=e.length;i<a;i+=1){var s=e[i];s&&-1===r?r=i:s||-1===r||((o=i-1)-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}},function(e,t,n){"use strict";e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var o=0;o<n;o+=1)t[e.charAt(o)]|=1<<n-o-1;return t}},function(e,t,n){"use strict";var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(t.replace(r,"\\$&").replace(n,"|")),i=e.match(o),a=!!i,s=[];if(a)for(var l=0,c=i.length;l<c;l+=1){var d=i[l];s.push([e.indexOf(d),d.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,o=t.currentLocation,i=void 0===o?0:o,a=t.expectedLocation,s=void 0===a?0:a,l=t.distance,c=void 0===l?100:l,d=r/e.length,u=Math.abs(s-i);return c?d+u/c:u?1:d}},function(e,t,n){"use strict";var r=n(6),o=n(3);e.exports=function(e,t,n,i){for(var a=i.location,s=void 0===a?0:a,l=i.distance,c=void 0===l?100:l,d=i.threshold,u=void 0===d?.6:d,h=i.findAllMatches,p=void 0!==h&&h,f=i.minMatchCharLength,b=void 0===f?1:f,m=s,g=e.length,v=u,y=e.indexOf(t,m),O=t.length,S=[],C=0;C<g;C+=1)S[C]=0;if(-1!==y){var j=r(t,{errors:0,currentLocation:y,expectedLocation:m,distance:c});if(v=Math.min(j,v),-1!==(y=e.lastIndexOf(t,m+O))){var x=r(t,{errors:0,currentLocation:y,expectedLocation:m,distance:c});v=Math.min(x,v)}}y=-1;for(var w=[],k=1,R=O+g,T=1<<O-1,_=0;_<O;_+=1){for(var F=0,I=R;F<I;)r(t,{errors:_,currentLocation:m+I,expectedLocation:m,distance:c})<=v?F=I:R=I,I=Math.floor((R-F)/2+F);R=I;var M=Math.max(1,m-I+1),P=p?g:Math.min(m+I,g)+O,z=Array(P+2);z[P+1]=(1<<_)-1;for(var E=P;E>=M;E-=1){var D=E-1,N=n[e.charAt(D)];if(N&&(S[D]=1),z[E]=(z[E+1]<<1|1)&N,0!==_&&(z[E]|=(w[E+1]|w[E])<<1|1|w[E+1]),z[E]&T&&(k=r(t,{errors:_,currentLocation:D,expectedLocation:m,distance:c}))<=v){if(v=k,(y=D)<=m)break;M=Math.max(1,2*m-y)}}if(r(t,{errors:_+1,currentLocation:m,expectedLocation:m,distance:c})>v)break;w=z}return{isMatch:y>=0,score:0===k?.001:k,matchedIndices:o(S,b)}}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i=n(2),a=n(0),s=function(){function e(t,n){var r=n.location,o=void 0===r?0:r,a=n.distance,s=void 0===a?100:a,l=n.threshold,c=void 0===l?.6:l,d=n.maxPatternLength,u=void 0===d?32:d,h=n.caseSensitive,p=void 0!==h&&h,f=n.tokenSeparator,b=void 0===f?/ +/g:f,m=n.findAllMatches,g=void 0!==m&&m,v=n.minMatchCharLength,y=void 0===v?1:v,O=n.id,S=void 0===O?null:O,C=n.keys,j=void 0===C?[]:C,x=n.shouldSort,w=void 0===x||x,k=n.getFn,R=void 0===k?i:k,T=n.sortFn,_=void 0===T?function(e,t){return e.score-t.score}:T,F=n.tokenize,I=void 0!==F&&F,M=n.matchAllTokens,P=void 0!==M&&M,z=n.includeMatches,E=void 0!==z&&z,D=n.includeScore,N=void 0!==D&&D,q=n.verbose,A=void 0!==q&&q;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:o,distance:s,threshold:c,maxPatternLength:u,isCaseSensitive:p,tokenSeparator:b,findAllMatches:g,minMatchCharLength:y,id:S,keys:j,includeMatches:E,includeScore:N,shouldSort:w,getFn:R,sortFn:_,verbose:A,tokenize:I,matchAllTokens:P},this.setCollection(t)}return r(e,[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){this._log('---------\nSearch pattern: "'+e+'"');var t=this._prepareSearchers(e),n=t.tokenSearchers,r=t.fullSearcher,o=this._search(n,r),i=o.weights,a=o.results;return this._computeScore(i,a),this.options.shouldSort&&this._sort(a),this._format(a)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,i=n.length;r<i;r+=1)t.push(new o(n[r],this.options));var a=new o(e,this.options);return{tokenSearchers:t,fullSearcher:a}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=this.list,r={},o=[];if("string"==typeof n[0]){for(var i=0,a=n.length;i<a;i+=1)this._analyze({key:"",value:n[i],record:i,index:i},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t});return{weights:null,results:o}}for(var s={},l=0,c=n.length;l<c;l+=1)for(var d=n[l],u=0,h=this.options.keys.length;u<h;u+=1){var p=this.options.keys[u];if("string"!=typeof p){if(s[p.name]={weight:1-p.weight||1},p.weight<=0||p.weight>1)throw new Error("Key weight has to be > 0 and <= 1");p=p.name}else s[p]={weight:1};this._analyze({key:p,value:this.options.getFn(d,p),record:d,index:l},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:o}}},{key:"_analyze",value:function(e,t){var n=e.key,r=e.arrayIndex,o=void 0===r?-1:r,i=e.value,s=e.record,l=e.index,c=t.tokenSearchers,d=void 0===c?[]:c,u=t.fullSearcher,h=void 0===u?[]:u,p=t.resultMap,f=void 0===p?{}:p,b=t.results,m=void 0===b?[]:b;if(null!=i){var g=!1,v=-1,y=0;if("string"==typeof i){this._log("\nKey: "+(""===n?"-":n));var O=h.search(i);if(this._log('Full text: "'+i+'", score: '+O.score),this.options.tokenize){for(var S=i.split(this.options.tokenSeparator),C=[],j=0;j<d.length;j+=1){var x=d[j];this._log('\nPattern: "'+x.pattern+'"');for(var w=!1,k=0;k<S.length;k+=1){var R=S[k],T=x.search(R),_={};T.isMatch?(_[R]=T.score,g=!0,w=!0,C.push(T.score)):(_[R]=1,this.options.matchAllTokens||C.push(1)),this._log('Token: "'+R+'", score: '+_[R])}w&&(y+=1)}v=C[0];for(var F=C.length,I=1;I<F;I+=1)v+=C[I];v/=F,this._log("Token score average:",v)}var M=O.score;v>-1&&(M=(M+v)/2),this._log("Score average:",M);var P=!this.options.tokenize||!this.options.matchAllTokens||y>=d.length;if(this._log("\nCheck Matches: "+P),(g||O.isMatch)&&P){var z=f[l];z?z.output.push({key:n,arrayIndex:o,value:i,score:M,matchedIndices:O.matchedIndices}):(f[l]={item:s,output:[{key:n,arrayIndex:o,value:i,score:M,matchedIndices:O.matchedIndices}]},m.push(f[l]))}}else if(a(i))for(var E=0,D=i.length;E<D;E+=1)this._analyze({key:n,arrayIndex:E,value:i[E],record:s,index:l},{resultMap:f,results:m,tokenSearchers:d,fullSearcher:h})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var n=0,r=t.length;n<r;n+=1){for(var o=t[n].output,i=o.length,a=1,s=1,l=0;l<i;l+=1){var c=e?e[o[l].key].weight:1,d=(1===c?o[l].score:o[l].score||.001)*c;1!==c?s=Math.min(s,d):(o[l].nScore=d,a*=d)}t[n].score=1===s?a:s,this._log(t[n])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];this.options.verbose&&this._log("\n\nOutput:\n\n",JSON.stringify(e));var n=[];this.options.includeMatches&&n.push((function(e,t){var n=e.output;t.matches=[];for(var r=0,o=n.length;r<o;r+=1){var i=n[r];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(a.arrayIndex=i.arrayIndex),t.matches.push(a)}}})),this.options.includeScore&&n.push((function(e,t){t.score=e.score}));for(var r=0,o=e.length;r<o;r+=1){var i=e[r];if(this.options.id&&(i.item=this.options.getFn(i.item,this.options.id)[0]),n.length){for(var a={item:i.item},s=0,l=n.length;s<l;s+=1)n[s](i,a);t.push(a)}else t.push(i.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}]),e}();e.exports=s}])},e.exports=r()},5171:function(e,t,n){e.exports={default:n(5172),__esModule:!0}},5172:function(e,t,n){n(5173);var r=n(263).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},5173:function(e,t,n){var r=n(1740),o=n(3985).f;n(1738)("getOwnPropertyDescriptor",(function(){return function(e,t){return o(r(e),t)}}))},5174:function(e,t,n){var r=n(3555),o=n(587);e.exports=function(e,t){return r(o(e,t),1)}},5175:function(e,t,n){},5176:function(e,t,n){var r=n(3555),o=n(587);e.exports=function(e,t){return r(o(e,t),1/0)}},5177:function(e,t,n){var r=n(4469);e.exports=function(e){return e&&e.length?r(e):[]}},5178:function(e,t,n){var r=n(3638),o=n(340),i=n(1479),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var c=l-1;return void 0!==n&&(c=i(n),c=n<0?a(l+c,0):s(c,l-1)),r(e,o(t,3),c,!0)}},5179:function(e,t,n){var r=n(4469);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?r(e,void 0,t):[]}},5180:function(e,t,n){var r=n(5181);e.exports=r},5181:function(e,t,n){var r=n(5182),o=Array.prototype;e.exports=function(e){var t=e.fill;return e===o||e instanceof Array&&t===o.fill?r:t}},5182:function(e,t,n){n(5183);var r=n(84);e.exports=r("Array").fill},5183:function(e,t,n){var r=n(52),o=n(5184),i=n(302);r({target:"Array",proto:!0},{fill:o}),i("fill")},5184:function(e,t,n){"use strict";var r=n(166),o=n(1286),i=n(171);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:o(l,n);c>s;)t[s++]=e;return t}},5185:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5186),o=n(0),i="#000",a="#ddd",s="#eee",l="#fff",c=13,d=38,u=40,h={borderColor:a,borderStyle:"solid",borderWidth:1,boxSizing:"border-box",fontSize:24,height:50,lineHeight:"24px",outline:0,paddingLeft:15,paddingRight:15,width:"100%"},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.style,n=r.__rest(e,["style"]);return o.createElement("input",r.__assign({type:"text",style:r.__assign({},h,t)},n))},t}(o.PureComponent),f={borderBottomWidth:1,borderColor:a,borderLeftWidth:1,borderRightWidth:1,borderStyle:"solid",borderTopWidth:0,boxSizing:"border-box",color:i,display:"block",fontSize:24,height:50,lineHeight:"50px",paddingLeft:15,paddingRight:15,textDecoration:"none"};function b(e){var t=e.item,n=e.isSelected,i=e.isHighlighted,l=e.style,c=r.__rest(e,["item","isSelected","isHighlighted","style"]),d=r.__assign({},f,l);return n&&(d.backgroundColor=s),i&&(d.backgroundColor=a),o.createElement("a",r.__assign({href:t.url,style:d},c),t.title)}var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isHighlighted:!1},t.handleMouseEnter=function(e){t.setState({isHighlighted:!0}),t.props.onMouseEnter&&t.props.onMouseEnter(e)},t.handleMouseLeave=function(e){t.setState({isHighlighted:!1}),t.props.onMouseLeave&&t.props.onMouseLeave(e)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.item;return(this.props.children?this.props.children:b)({style:this.props.style,item:e,isSelected:this.props.isSelected,isHighlighted:this.state.isHighlighted,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.props.onClickItem})},t.defaultProps={isSelected:!1},t}(o.PureComponent),g={position:"absolute",width:"100%",zIndex:2,listStyleType:"none",margin:0,padding:0,backgroundColor:l};function v(e){var t=r.__assign({},g,e.style);function n(e,t){return e.bind(this,t)}return e.maxHeight&&(t.maxHeight=e.maxHeight,t.borderBottomWidth=1,t.borderBottomColor=s,t.borderBottomStyle="solid",t.overflow="auto"),o.createElement("ul",{style:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},e.items.map((function(t,r){return o.createElement(m,{key:r,children:e.children,item:t,isSelected:e.selectedIndex===r,onMouseEnter:e.onMouseEnterItem&&n(e.onMouseEnterItem,r),onMouseLeave:e.onMouseLeaveItem&&n(e.onMouseLeaveItem,r),onClickItem:e.onClickItem})})))}function y(e){e.url&&(window.location.href=e.url)}var O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={displayResults:!1,hoveredIndex:-1,results:[],selectedIndex:0},n.query=function(e){n.props.extensions.length>0&&function(e,t){for(var n=[],r=0,o=t;r<o.length;r++){var i=o[r];"function"==typeof i&&n.push(i.call(null,e))}return Promise.all(n).then((function(e){return e.reduce((function(e,t){return e.concat(t)}),[])}))}(e,n.props.extensions).then((function(e){n.setState({results:n.props.maxResults>0?e.slice(0,n.props.maxResults):e,displayResults:e.length>0}),n.props.onQuery&&n.props.onQuery(e)}))},n.prev=function(){n.setState((function(e){var t=e.selectedIndex-1;if(t>=0)return{selectedIndex:t}}))},n.next=function(){n.setState((function(e){var t=e.selectedIndex+1;if(t<e.results.length)return{selectedIndex:t}}))},n.action=function(){var e=n.state.hoveredIndex>-1?n.state.hoveredIndex:n.state.selectedIndex,t=n.state.results[e];(n.props.onAction||y).call(null,t)},n.handleChange=function(e){var t=e.target.value;t?n.query(t):n.reset()},n.handleKeyDown=function(e){switch(e.keyCode){case d:n.prev();break;case u:n.next();break;case c:n.action()}},n.handleMouseEnterItem=function(e){n.setState({hoveredIndex:e})},n.handleMouseLeave=function(){n.setState({hoveredIndex:-1})},n.handleBlur=function(){setTimeout((function(){return n.setState({displayResults:!1})}),200)},n.handleFocus=function(){n.setState({displayResults:!0})},n.handleClickItem=function(e){e.preventDefault(),n.state.hoveredIndex>-1&&n.action()},n.query=function(e,t){var n=this,r=null;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=n,s=function(){r=null,e.apply(a,o)};clearTimeout(r),r=setTimeout(s,t)}}(n.query,n.props.inputDelay),n}return r.__extends(t,e),t.prototype.reset=function(){this.setState({results:[],displayResults:!1})},t.prototype.render=function(){var e=this.props,t=e.children,n=e.render,i=(e.maxResults,e.maxViewableResults),a=(e.extensions,e.inputDelay,e.rootStyle),s=e.resultStyle,l=(e.onQuery,e.onAction,r.__rest(e,["children","render","maxResults","maxViewableResults","extensions","inputDelay","rootStyle","resultStyle","onQuery","onAction"])),c=i?50*i:null;return n||(n=t),o.createElement("div",{style:a},o.createElement(p,r.__assign({},l,{onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown})),this.state.displayResults&&o.createElement(v,{children:n,items:this.state.results,maxHeight:c,onClickItem:this.handleClickItem,onMouseEnterItem:this.handleMouseEnterItem,onMouseLeave:this.handleMouseLeave,selectedIndex:this.state.selectedIndex,style:s}))},t.defaultProps={children:null,extensions:[],inputDelay:100,maxResults:null,maxViewableResults:null,render:null,resultStyle:{},rootStyle:{position:"relative"}},t}(o.PureComponent);function S(e){var t=e.active?"#000":"#ccc";return o.createElement("svg",{width:e.width,height:e.height,fill:t,x:"0px",y:"0px",viewBox:"0 0 490.9 490.9"},o.createElement("g",null,o.createElement("g",null,o.createElement("path",{d:"M245.5,322.9c53,0,96.2-43.2,96.2-96.2V96.2c0-53-43.2-96.2-96.2-96.2s-96.2,43.2-96.2,96.2v130.5C149.3,279.8,192.5,322.9,245.5,322.9z M173.8,96.2c0-39.5,32.2-71.7,71.7-71.7s71.7,32.2,71.7,71.7v130.5c0,39.5-32.2,71.7-71.7,71.7s-71.7-32.2-71.7-71.7V96.2z"}),o.createElement("path",{d:"M94.4,214.5c-6.8,0-12.3,5.5-12.3,12.3c0,85.9,66.7,156.6,151.1,162.8v76.7h-63.9c-6.8,0-12.3,5.5-12.3,12.3s5.5,12.3,12.3,12.3h152.3c6.8,0,12.3-5.5,12.3-12.3s-5.5-12.3-12.3-12.3h-63.9v-76.7c84.4-6.3,151.1-76.9,151.1-162.8c0-6.8-5.5-12.3-12.3-12.3s-12.3,5.5-12.3,12.3c0,76.6-62.3,138.9-138.9,138.9s-138.9-62.3-138.9-138.9C106.6,220,101.2,214.5,94.4,214.5z"}))),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null),o.createElement("g",null))}t.default=O,t.command=function(e,t){var n=new RegExp("^"+t+"\\s","i");return function(r){var o=t.toLowerCase(),i=r.toLowerCase();return o===i?[]:i.startsWith(o+" ")?e(r.replace(n,"").trim()):[]}},t.compose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(void 0,n))}}))},t.withExtensions=function(e){return function(t){return function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return r.__extends(i,n),i.prototype.render=function(){return o.createElement(t,r.__assign({extensions:e},this.props))},i}(o.Component)}},t.withVoice=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.state={value:"",isSpeaking:!1},n.recognition=null,n.speak=function(){n.recognition.lang="en-US",n.setState({isSpeaking:!0}),n.recognition.start()},n.recognition=null,n}return r.__extends(n,t),n.prototype.componentDidMount=function(){var e=this;if("webkitSpeechRecognition"in window){var t=new webkitSpeechRecognition;t.continuous=!0,t.onresult=function(t){for(var n=t.resultIndex;n<t.results.length;++n)e.setState({value:t.results[n][0].transcript})},this.recognition=t}},n.prototype.render=function(){var t={position:"absolute",right:0,top:0,border:0,backgroundColor:"transparent",lineHeight:"50px",fontSize:24,paddingRight:15,paddingTop:0,paddingBottom:0,paddingLeft:15},n=this.props.style||{};return this.state.isSpeaking&&(n.backgroundColor="rgba(0, 255, 0, 0.075)"),o.createElement("div",{style:{position:"relative"}},o.createElement(e,r.__assign({},this.props,{value:this.state.value,style:n})),o.createElement("button",{onClick:this.speak,style:t},o.createElement(S,{width:24,height:24,active:this.state.isSpeaking})))},n}(o.Component)}},5186:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return i})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return l})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return d})),n.d(t,"__generator",(function(){return u})),n.d(t,"__exportStar",(function(){return h})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return f})),n.d(t,"__spread",(function(){return b})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return y})),n.d(t,"__asyncValues",(function(){return O})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return C})),n.d(t,"__importDefault",(function(){return j})),n.d(t,"__classPrivateFieldGet",(function(){return x})),n.d(t,"__classPrivateFieldSet",(function(){return w}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function h(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(l,c):d(i[0][2],n)}catch(e){d(i[0][3],e)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function d(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function j(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function w(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},5187:function(e,t,n){},5188:function(e,t,n){"use strict";n.r(t);var r=n(99),o=n(138),i=(n(43),n(96)),a=n.n(i),s=n(38),l=n.n(s),c=n(71),d=n.n(c),u=n(75),h=n.n(u),p=n(42),f=n.n(p),b=n(91),m=n.n(b),g=n(19),v=n.n(g),y=n(88),O=n.n(y),S=n(34),C=n.n(S),j=n(17),x=n.n(j),w=n(0),k=n.n(w),R=n(5),T=n.n(R),_=n(18),F=n(273),I=n(585),M=n(214),P=n(53),z=n.n(P),E=n(102);function D(e){var t;return z()(t=m()(e)).call(t,(e,t)=>(t&&t.type===E.a&&t.meta&&t.meta.chartId&&e.push(t.meta.chartId),e),[])}var N=n(86),q=n.n(N);var A=n(7),L=n.n(A),U=n(4550),$=n(68),H=n(767),B=n(261),W=n(120),V=n.n(W),G=n(204);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(e){var t,n;function r(t){var n;return Y(Q(n=e.call(this,t)||this),"animationFrameID",void 0),Y(Q(n),"resizeObserver",void 0),Y(Q(n),"target",null),Y(Q(n),"resize",(function(e){var t=e.width,r=e.height,o=e.top,i=e.left;n.setState((function(){return{width:t,height:r,top:o,left:i}}))})),Y(Q(n),"setTarget",(function(e){n.target=e})),n.state={width:0,height:0,top:0,left:0},n.resize=V()(n.resize,t.debounceTime),n.animationFrameID=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){var e=this;this.resizeObserver=new G.a((function(t){void 0===t&&(t=[]),t.forEach((function(t){var n=t.contentRect,r=n.left,o=n.top,i=n.width,a=n.height;e.animationFrameID=window.requestAnimationFrame((function(){e.resize({width:i,height:a,top:o,left:r})}))}))})),this.target&&this.resizeObserver.observe(this.target)},o.componentWillUnmount=function(){this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeObserver&&this.resizeObserver.disconnect()},o.render=function(){var e=this.props,t=e.className,n=e.children,r=(e.debounceTime,e.parentSizeStyles),o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["className","children","debounceTime","parentSizeStyles"]);return k.a.createElement("div",K({style:r,ref:this.setTarget,className:t},o),n(K({},this.state,{ref:this.target,resize:this.resize})))},r}(k.a.Component);Y(J,"propTypes",{className:T.a.string,debounceTime:T.a.number,children:T.a.func.isRequired}),Y(J,"defaultProps",{debounceTime:300,parentSizeStyles:{width:"100%",height:"100%"}});var X=n(82),Z=n(3641),ee=n(77);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e){return"function"==typeof e}function re(){}function oe(e){if(!function(e){return"object"===te(e)&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ie(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}function ae(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||function(e){var t,n=e;return"Symbol(react.forward_ref)"===(null==n?void 0:null===(t=n.$$typeof)||void 0===t?void 0:t.toString())}(e);var t}var se=n(872),le=n(262),ce=n.n(le),de=n(1257);function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}var fe,be=((fe=function(){function e(t){ue(this,e),this.isDisposed=!1,this.action=ne(t)?t:re}return pe(e,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}],[{key:"isDisposable",value:function(e){return Boolean(e&&ne(e.dispose))}},{key:"_fixup",value:function(t){return e.isDisposable(t)?t:e.empty}},{key:"create",value:function(t){return new e(t)}}]),e}()).empty={dispose:re},fe),me=function(){function e(){ue(this,e),this.isDisposed=!1;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.disposables=n}return pe(e,[{key:"add",value:function(e){this.isDisposed?e.dispose():this.disposables.push(e)}},{key:"remove",value:function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),e.dispose())}return t}},{key:"clear",value:function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(var r=0;r<e;r++)t[r].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(var r=0;r<e;r++)t[r].dispose()}}}]),e}(),ge=function(){function e(){ue(this,e),this.isDisposed=!1}return pe(e,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e,n&&n.dispose()}t&&e&&e.dispose()}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}}}]),e}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var o=we(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xe(this,n)}}function xe(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){var t=e.DecoratedComponent,n=e.createHandler,r=e.createMonitor,o=e.createConnector,i=e.registerHandler,a=e.containerDisplayName,s=e.getType,l=e.collect,c=e.options.arePropsEqual,d=void 0===c?se.a:c,u=t,h=t.displayName||t.name||"Component",p=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(f,e);var t,a,c,p=je(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=p.call(this,e)).decoratedRef=w.createRef(),t.handleChange=function(){var e=t.getCurrentState();Object(se.a)(e,t.state)||t.setState(e)},t.disposable=new ge,t.receiveProps(e),t.dispose(),t}return t=f,(a=[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return Object(ee.a)(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current}},{key:"shouldComponentUpdate",value:function(e,t){return!d(e,this.props)||!Object(se.a)(t,this.state)}},{key:"componentDidMount",value:function(){this.disposable=new ge,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()}},{key:"componentDidUpdate",value:function(e){d(this.props,e)||(this.receiveProps(this.props),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose()}},{key:"receiveProps",value:function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(s(e)))}},{key:"receiveType",value:function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=ye(i(e,this.handler,this.manager),2),n=t[0],r=t[1];this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new me(new be(o),new be(r)))}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)}},{key:"getCurrentState",value:function(){return this.handlerConnector?l(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}}},{key:"render",value:function(){var e=this;return w.createElement(de.a.Consumer,null,(function(t){var n=t.dragDropManager;return e.receiveDragDropManager(n),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame((function(){var t;return null===(t=e.handlerConnector)||void 0===t?void 0:t.reconnect()})),w.createElement(u,Object.assign({},e.props,e.getCurrentState(),{ref:ae(u)?e.decoratedRef:null}))}))}},{key:"receiveDragDropManager",value:function(e){void 0===this.manager&&(Object(ee.a)(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",h,h),void 0!==e&&(this.manager=e,this.handlerMonitor=r(e),this.handlerConnector=o(e.getBackend()),this.handler=n(this.handlerMonitor,this.decoratedRef)))}}])&&Se(t.prototype,a),c&&Se(t,c),f}(w.Component);return e.DecoratedComponent=t,e.displayName="".concat(a,"(").concat(h,")"),e}();return ce()(p,t)}var Re=n(1308),Te=n(3368),_e=n(3369);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){return"string"==typeof e||"symbol"===Fe(e)||!!t&&Array.isArray(e)&&e.every((function(e){return Ie(e,!1)}))}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pe=["canDrag","beginDrag","isDragging","endDrag"],ze=["beginDrag"],Ee=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=null,this.beginDrag=function(){if(o.props)return o.spec.beginDrag(o.props,o.monitor,o.ref.current)},this.spec=t,this.monitor=n,this.ref=r}var t,n,r;return t=e,(n=[{key:"receiveProps",value:function(e){this.props=e}},{key:"canDrag",value:function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))}},{key:"isDragging",value:function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())}},{key:"endDrag",value:function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,ie(this.ref))}}])&&Me(t.prototype,n),r&&Me(t,r),e}();function De(e){return Object.keys(e).forEach((function(t){Object(ee.a)(Pe.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',Pe.join(", "),t),Object(ee.a)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),ze.forEach((function(t){Object(ee.a)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),function(t,n){return new Ee(e,t,n)}}var Ne=n(3367),qe=n(3366);function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Le=["canDrop","hover","drop"],Ue=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=null,this.spec=t,this.monitor=n,this.ref=r}var t,n,r;return t=e,(n=[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"canDrop",value:function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){this.spec.hover&&this.props&&this.spec.hover(this.props,this.monitor,ie(this.ref))}},{key:"drop",value:function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)}}])&&Ae(t.prototype,n),r&&Ae(t,r),e}();function $e(e){return Object.keys(e).forEach((function(t){Object(ee.a)(Le.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',Le.join(", "),t),Object(ee.a)("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])})),function(t,n){return new Ue(e,t,n)}}var He=n(1737),Be=n(1418),We=n.n(Be),Ve=n(298),Ge=n.n(Ve);const Ke=X.g+1,Qe=X.g+2,Ye=X.g+3,Je=X.g+4,Xe=X.g+5,Ze={[E.e]:{[E.k]:X.g,[E.c]:X.g},[E.c]:{[E.a]:Ke,[E.h]:Ke,[E.b]:Ke,[E.f]:Ke,[E.g]:Ke,[E.j]:Ke,[E.k]:Ke},[E.j]:{[E.a]:Je,[E.h]:Je,[E.b]:Je},[E.k]:{[E.l]:Qe},[E.l]:{[E.a]:Qe,[E.h]:Qe,[E.b]:Qe,[E.f]:Qe,[E.g]:Qe,[E.j]:Qe,[E.k]:Qe},[E.b]:{[E.a]:Xe,[E.g]:Xe,[E.h]:Xe,[E.j]:Ye,[E.f]:Ye},[E.a]:{},[E.f]:{},[E.g]:{},[E.h]:{}};function et(e){const{parentType:t,childType:n,parentDepth:r}=e;if(!t||!n||"number"!=typeof r)return!1;const o=(Ze[t]||{})[n];return"number"==typeof o&&r<=o}let tt={};function nt(e,t){var n;const{depth:r,parentComponent:o,component:i,orientation:a,isDraggingOverShallow:s}=t.props,l=e.getItem();if(!l||l.id===i.id)return null;if(l.type===E.k&&i.type===E.l&&2===r)return null;const c=et({parentType:i.type,parentDepth:r,childType:l.type}),d=o&&o.type,u=et({parentType:d,parentDepth:r+(d===E.l||d===E.k?0:-1),childType:l.type});if(!c&&!u)return null;const h=(i.children||[]).length>0,p="row"===a?"vertical":"horizontal",f="row"===a?"horizontal":"vertical";if(s&&c&&!u)return"vertical"===p?h?"DROP_RIGHT":"DROP_LEFT":h?"DROP_BOTTOM":"DROP_TOP";const b=t.ref.getBoundingClientRect(),m=e.getClientOffset()||tt[i.id];if(!m||!b)return null;tt[i.id]=m;const g=Math.abs(m.y-b.top),v=Math.abs(m.y-b.bottom),y=Math.abs(m.x-b.left),O=Math.abs(m.x-b.right);if(!s&&Ge()(n=[g,v,y,O]).call(n,e=>e>20))return null;if(u&&!c){if("vertical"===f){const e=b.left+(b.right-b.left)/2;return m.x<e?"DROP_LEFT":"DROP_RIGHT"}const e=b.top+(b.bottom-b.top)/2;return m.y<e?"DROP_TOP":"DROP_BOTTOM"}if(u&&c){if("vertical"===f){if(y<20)return"DROP_LEFT";if(O<20)return"DROP_RIGHT"}else{if(g<20)return"DROP_TOP";if(v<20)return"DROP_BOTTOM"}return"vertical"===p?h?"DROP_RIGHT":"DROP_LEFT":h?"DROP_BOTTOM":"DROP_TOP"}return null}var rt=n(1484),ot=n.n(rt);let it;var at=We()((function(e,t,n){var r,o;if(!n.mounted)return;const i=nt(t,n);!function(e){const t="SCROLL_TOP"===e&&!it&&0!==document.documentElement.scrollTop,n=it&&("SCROLL_TOP"!==e||0===document.documentElement.scrollTop);t?it=ot()(()=>{if(0===document.documentElement.scrollTop)return clearInterval(it),void(it=null);let e=document.documentElement.scrollTop-120;e<0&&(e=0),window.scroll({top:e,behavior:"smooth"})},50):n&&(clearInterval(it),it=null)}((null==n?void 0:null==(r=n.props)?void 0:null==(o=r.component)?void 0:o.type)===E.e?"SCROLL_TOP":null),i?n.setState(()=>({dropIndicator:i})):n.setState(()=>({dropIndicator:null}))}),100);function st(e,t,n){if(!n.mounted)return;n.setState(()=>({dropIndicator:null}));const r=nt(t,n);if(!r)return;const{parentComponent:o,component:i,index:a,onDrop:s,orientation:l}=n.props,c=t.getItem(),d="row"===l&&("DROP_TOP"===r||"DROP_BOTTOM"===r)||"column"===l&&("DROP_LEFT"===r||"DROP_RIGHT"===r)?"sibling":"child",u={source:{id:c.parentId,type:c.parentType,index:c.index},dragging:{id:c.id,type:c.type,meta:c.meta}};if("child"===d)u.destination={id:i.id,type:i.type,index:i.children.length};else{let e=o&&c.parentId===o.id&&c.index<a?a-1:a;"DROP_BOTTOM"!==r&&"DROP_RIGHT"!==r||(e+=1),u.destination={id:o.id,type:o.type,index:e}}return s(u),tt={},u}const lt="DRAG_DROPPABLE",ct=[lt,{canDrag:e=>!e.disableDragDrop,beginDrag(e){const{component:t,index:n,parentComponent:r={}}=e;return{type:t.type,id:t.id,meta:t.meta,index:n,parentId:r.id,parentType:r.type}}},function(e,t){return{dragSourceRef:e.dragSource(),dragPreviewRef:e.dragPreview(),isDragging:t.isDragging()}}],dt=[lt,{hover(e,t,n){n&&n.mounted&&at(e,t,n)},drop(e,t,n){const r=t.getDropResult();if((!r||!r.destination)&&n.mounted)return st(0,t,n)}},function(e,t){return{droppableRef:e.dropTarget(),isDraggingOver:t.isOver(),isDraggingOverShallow:t.isOver({shallow:!0})}}];var ut=n(1);const ht={children:T.a.func,className:T.a.string,component:He.b.isRequired,parentComponent:He.b,depth:T.a.number.isRequired,disableDragdrop:T.a.bool,orientation:T.a.oneOf(["row","column"]),index:T.a.number.isRequired,style:T.a.object,onDrop:T.a.func,editMode:T.a.bool.isRequired,useEmptyDragPreview:T.a.bool,isDragging:T.a.bool.isRequired,isDraggingOver:T.a.bool.isRequired,isDraggingOverShallow:T.a.bool.isRequired,droppableRef:T.a.func.isRequired,dragSourceRef:T.a.func.isRequired,dragPreviewRef:T.a.func.isRequired},pt={className:null,style:null,parentComponent:null,disableDragdrop:!1,children(){},onDrop(){},orientation:"row",useEmptyDragPreview:!1};class ft extends k.a.Component{constructor(e){var t;super(e),this.state={dropIndicator:null},this.setRef=x()(t=this.setRef).call(t,this)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}setRef(e){this.ref=e,this.props.useEmptyDragPreview?this.props.dragPreviewRef(Object(Z.a)(),{captureDraggingState:!0}):this.props.dragPreviewRef(e),this.props.droppableRef(e)}render(){const{children:e,className:t,orientation:n,dragSourceRef:r,isDragging:o,isDraggingOver:i,style:a,editMode:s}=this.props,{dropIndicator:l}=this.state,c=i&&l?{className:L()("drop-indicator","DROP_TOP"===l&&"drop-indicator--top","DROP_BOTTOM"===l&&"drop-indicator--bottom","DROP_LEFT"===l&&"drop-indicator--left","DROP_RIGHT"===l&&"drop-indicator--right")}:null,d=s?{dragSourceRef:r,dropIndicatorProps:c}:{};return Object(ut.d)("div",{style:a,ref:this.setRef,className:L()("dragdroppable","row"===n&&"dragdroppable-row","column"===n&&"dragdroppable-column",o&&"dragdroppable--dragging",t)},e(d))}}ft.propTypes=ht,ft.defaultProps=pt;var bt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e;"function"!=typeof e&&(Object(ee.a)(Ie(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),o=function(){return e}),Object(ee.a)(oe(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var i=De(t);return Object(ee.a)("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),Object(ee.a)(oe(r),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),function(e){return ke({containerDisplayName:"DragSource",createHandler:i,registerHandler:Re.a,createConnector:function(e){return new _e.a(e)},createMonitor:function(e){return new Te.a(e)},DecoratedComponent:e,getType:o,collect:n,options:r})}}(...ct)(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e;"function"!=typeof e&&(Object(ee.a)(Ie(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),o=function(){return e}),Object(ee.a)(oe(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var i=$e(t);return Object(ee.a)("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),Object(ee.a)(oe(r),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),function(e){return ke({containerDisplayName:"DropTarget",createHandler:i,registerHandler:Re.b,createMonitor:function(e){return new qe.a(e)},createConnector:function(e){return new Ne.a(e)},DecoratedComponent:e,getType:o,collect:n,options:r})}}(...dt)(ft));const mt={id:T.a.string.isRequired,type:T.a.string.isRequired,label:T.a.string.isRequired,className:T.a.string};class gt extends k.a.PureComponent{render(){const{label:e,id:t,type:n,className:r}=this.props;return Object(ut.d)(bt,{component:{type:n,id:t},parentComponent:{id:X.v,type:E.i},index:0,depth:0,editMode:!0},({dragSourceRef:t})=>Object(ut.d)("div",{ref:t,className:"new-component"},Object(ut.d)("div",{className:L()("new-component-placeholder",r)}),e))}}function vt(){return Object(ut.d)(gt,{id:X.u,type:E.b,label:Object(_.e)("Column"),className:"fa fa-long-arrow-down"})}function yt(){return Object(ut.d)(gt,{id:X.w,type:E.f,label:Object(_.e)("Divider"),className:"divider-placeholder"})}function Ot(){return Object(ut.d)(gt,{id:X.x,type:E.g,label:Object(_.e)("Header"),className:"fa fa-header"})}function St(){return Object(ut.d)(gt,{id:X.z,type:E.j,label:Object(_.e)("Row"),className:"fa fa-long-arrow-right"})}function Ct(){return Object(ut.d)(gt,{id:X.A,type:E.k,label:Object(_.e)("Tabs"),className:"fa fa-window-restore"})}function jt(){return Object(ut.d)(gt,{id:X.y,type:E.h,label:"Markdown",className:"fa fa-code"})}gt.propTypes=mt,gt.defaultProps={className:null};var xt=n(1409),wt=n(154),kt=n.n(wt),Rt=n(12),Tt=n.n(Rt),_t=n(260),Ft=n.n(_t),It=n(133),Mt=n.n(It),Pt=n(5171),zt=n.n(Pt),Et=n(464),Dt=n.n(Et),Nt=n(339),qt=n.n(Nt),At=n(439),Lt=n.n(At),Ut=n(422),$t=n.n(Ut),Ht=n(423),Bt=n.n(Ht),Wt=n(4284),Vt=n(4283),Gt=function(e){function t(){var e,n,r,o;qt()(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=$t()(this,(e=t.__proto__||Dt()(t)).call.apply(e,[this].concat(a))),r._cellRenderer=function(e){var t=e.parent,n=e.rowIndex,o=e.style,i=e.isScrolling,a=e.isVisible,s=e.key,l=r.props.rowRenderer;return zt()(o,"width").writable&&(o.width="100%"),l({index:n,style:o,isScrolling:i,isVisible:a,key:s,parent:t})},r._setRef=function(e){r.Grid=e},r._onScroll=function(e){var t=e.clientHeight,n=e.scrollHeight,o=e.scrollTop;(0,r.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:o})},r._onSectionRendered=function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,o=e.rowStartIndex,i=e.rowStopIndex;(0,r.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:o,stopIndex:i})},o=n,$t()(r,o)}return Bt()(t,e),Lt()(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:n,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,o=void 0===r?0:r;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.noRowsRenderer,r=e.scrollToIndex,o=e.width,i=L()("ReactVirtualized__List",t);return w.createElement(Wt.a,Mt()({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:i,columnWidth:o,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:r}))}}]),t}(w.PureComponent);Gt.defaultProps={autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:Vt.a,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}},Gt.propTypes=null;var Kt=Gt,Qt=n(5168),Yt=n(21),Jt=n(79);const Xt={datasourceUrl:T.a.string,datasourceName:T.a.string,innerRef:T.a.func,isSelected:T.a.bool,lastModified:T.a.string,sliceName:T.a.string.isRequired,style:T.a.object,visType:T.a.string.isRequired},Zt=$.g.div`
  ${({theme:e})=>`\n    .chart-card {\n      border: 1px solid ${e.colors.grayscale.light2};\n      border-radius: ${e.gridUnit}px;\n      background: ${e.colors.grayscale.light5};\n      font-weight: ${e.typography.weights.light};\n      padding: ${2*e.gridUnit}px;\n      margin: 0 ${3*e.gridUnit}px\n        ${3*e.gridUnit}px\n        ${3*e.gridUnit}px;\n      position: relative;\n      cursor: move;\n      white-space: nowrap;\n      overflow: hidden;\n\n      &:hover {\n        background: ${e.colors.grayscale.light4};\n      }\n    }\n\n    .chart-card.is-selected {\n      cursor: not-allowed;\n      opacity: 0.4;\n    }\n\n    .card-title {\n      margin-right: 60px;\n      margin-bottom: ${2*e.gridUnit}px;\n      font-weight: ${e.typography.weights.bold};\n    }\n\n    .card-body {\n      display: flex;\n      flex-direction: column;\n\n      .item {\n        span {\n          word-break: break-all;\n\n          &:first-child {\n            font-weight: ${e.typography.weights.normal};\n          }\n        }\n      }\n    }\n\n    .is-added-label {\n      background: ${e.colors.grayscale.base};\n      border-radius: ${e.gridUnit}px;\n      color: ${e.colors.grayscale.light5};\n      font-size: ${e.typography.sizes.s}px;\n      text-transform: uppercase;\n      position: absolute;\n      padding: ${e.gridUnit}px\n        ${2*e.gridUnit}px;\n      top: ${8*e.gridUnit}px;\n      right: ${8*e.gridUnit}px;\n      pointer-events: none;\n    }\n  `}
`;function en({datasourceUrl:e,datasourceName:t,innerRef:n,isSelected:r,lastModified:o,sliceName:i,style:a,visType:s}){return Object(ut.d)(Zt,{ref:n,style:a},Object(ut.d)("div",{className:L()("chart-card",r&&"is-selected")},Object(ut.d)("div",{className:"card-title"},i),Object(ut.d)("div",{className:"card-body"},Object(ut.d)("div",{className:"item"},Object(ut.d)("span",null,Object(_.e)("Modified")," "),Object(ut.d)("span",null,o)),Object(ut.d)("div",{className:"item"},Object(ut.d)("span",null,Object(_.e)("Visualization")," "),Object(ut.d)("span",null,s)),Object(ut.d)("div",{className:"item"},Object(ut.d)("span",null,Object(_.e)("Data source")," "),Object(ut.d)("a",{href:e},t)))),r&&Object(ut.d)("div",{className:"is-added-label"},Object(_.e)("Added")))}en.propTypes=Xt,en.defaultProps={datasourceUrl:null,datasourceName:"-",innerRef:null,isSelected:!1,style:null,lastModified:null};var tn=en;function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t,n){return t&&on(e.prototype,t),n&&on(e,n),e}function sn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=un(e);if(t){var o=un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dn(this,n)}}function dn(e,t){return!t||"object"!==nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const hn={position:"fixed",pointerEvents:"none",top:0,left:0,zIndex:101,width:344},pn={dragItem:T.a.shape({index:T.a.number.isRequired}),slices:T.a.arrayOf(He.g),isDragging:T.a.bool.isRequired,currentOffset:T.a.shape({x:T.a.number.isRequired,y:T.a.number.isRequired})};function fn({dragItem:e,slices:t,isDragging:n,currentOffset:r}){if(!(n&&r&&e&&t))return null;const o=t[e.index];return o&&e.parentType===E.i&&e.type===E.a?Object(ut.d)(tn,{style:{...hn,transform:`translate(${r.x}px, ${r.y}px)`},sliceName:o.slice_name,lastModified:o.changed_on_humanized,visType:o.viz_type,datasourceUrl:o.datasource_url,datasourceName:o.datasource_name}):null}fn.propTypes=pn,fn.defaultProps={currentOffset:null,dragItem:null,slices:null};var bn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ee.a)("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),Object(ee.a)(oe(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(n){var r=n,o=t.arePropsEqual,i=void 0===o?se.a:o,a=r.displayName||r.name||"Component",s=function(){var t=function(t){sn(o,t);var n=cn(o);function o(){var e;return rn(this,o),(e=n.apply(this,arguments)).isCurrentlyMounted=!1,e.ref=w.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();Object(se.a)(t,e.state)||e.setState(t)}},e}return an(o,[{key:"getDecoratedComponentInstance",value:function(){return Object(ee.a)(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current}},{key:"shouldComponentUpdate",value:function(e,t){return!i(e,this.props)||!Object(se.a)(t,this.state)}},{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)}},{key:"render",value:function(){var e=this;return w.createElement(de.a.Consumer,null,(function(t){var n=t.dragDropManager;return void 0===n?null:(e.receiveDragDropManager(n),e.isCurrentlyMounted?w.createElement(r,Object.assign({},e.props,e.state,{ref:ae(r)?e.ref:null})):null)}))}},{key:"receiveDragDropManager",value:function(e){if(void 0===this.manager){this.manager=e,Object(ee.a)("object"===nn(e),"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",a,a);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}}},{key:"getCurrentState",value:function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)}}]),o}(w.Component);return t.displayName="DragLayer(".concat(a,")"),t.DecoratedComponent=n,t}();return ce()(s,n)}}(e=>({dragItem:e.getItem(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}))(fn);const mn={fetchAllSlices:T.a.func.isRequired,isLoading:T.a.bool.isRequired,slices:T.a.objectOf(He.g).isRequired,lastUpdated:T.a.number.isRequired,errorMessage:T.a.string,userId:T.a.string.isRequired,selectedSliceIds:T.a.arrayOf(T.a.number),editMode:T.a.bool,height:T.a.number},gn={selectedSliceIds:[],editMode:!1,errorMessage:"",height:window.innerHeight},vn=["slice_name","viz_type","datasource_name"],yn={slice_name:"Name",viz_type:"Vis type",datasource_name:"Dataset",changed_on:"Recent"},On=$.g.div`
  display: flex;
  flex-direction: row;
  padding: ${({theme:e})=>3*e.gridUnit}px;
`,Sn=Object($.g)(Jt.i)`
  margin-left: ${({theme:e})=>2*e.gridUnit}px;
  min-width: 150px;
`;class Cn extends k.a.Component{static sortByComparator(e){const t="changed_on"===e?-1:1;return(n,r)=>n[e]<r[e]?-1*t:n[e]>r[e]?1*t:0}constructor(e){var t,n,r,o,i;super(e),this.state={filteredSlices:[],searchTerm:"",sortBy:"changed_on",selectedSliceIdsSet:new h.a(e.selectedSliceIds)},this.rowRenderer=x()(t=this.rowRenderer).call(t,this),this.searchUpdated=x()(n=this.searchUpdated).call(n,this),this.handleKeyPress=x()(r=this.handleKeyPress).call(r,this),this.handleChange=x()(o=this.handleChange).call(o,this),this.handleSelect=x()(i=this.handleSelect).call(i,this)}componentDidMount(){this.slicesRequest=this.props.fetchAllSlices(this.props.userId)}UNSAFE_componentWillReceiveProps(e){const t={};var n,r;e.lastUpdated!==this.props.lastUpdated&&(t.filteredSlices=Ft()(n=C()(r=m()(e.slices)).call(r,Object(Qt.createFilter)(this.state.searchTerm,vn))).call(n,Cn.sortByComparator(this.state.sortBy)));e.selectedSliceIds!==this.props.selectedSliceIds&&(t.selectedSliceIdsSet=new h.a(e.selectedSliceIds)),f()(t).length&&this.setState(t)}componentWillUnmount(){this.slicesRequest&&this.slicesRequest.abort&&this.slicesRequest.abort()}getFilteredSortedSlices(e,t){var n,r;return Ft()(n=C()(r=m()(this.props.slices)).call(r,Object(Qt.createFilter)(e,vn))).call(n,Cn.sortByComparator(t))}handleKeyPress(e){"Enter"===e.key&&(e.preventDefault(),this.searchUpdated(e.target.value))}handleChange(e){this.searchUpdated(e.target.value)}searchUpdated(e){this.setState(t=>({searchTerm:e,filteredSlices:this.getFilteredSortedSlices(e,t.sortBy)}))}handleSelect(e){const t=e.value;this.setState(e=>({sortBy:t,filteredSlices:this.getFilteredSortedSlices(e.searchTerm,t)}))}rowRenderer({key:e,index:t,style:n}){const{filteredSlices:r,selectedSliceIdsSet:o}=this.state,i=r[t],a=o.has(i.slice_id),s=E.a,l=X.t,c={chartId:i.slice_id,sliceName:i.slice_name};return Object(ut.d)(bt,{key:e,component:{type:s,id:l,meta:c},parentComponent:{id:X.v,type:E.i},index:t,depth:0,disableDragDrop:a,editMode:this.props.editMode,useEmptyDragPreview:!0,style:{}},({dragSourceRef:e})=>Object(ut.d)(tn,{innerRef:e,style:n,sliceName:i.slice_name,lastModified:i.changed_on_humanized,visType:i.viz_type,datasourceUrl:i.datasource_url,datasourceName:i.datasource_name,isSelected:a}))}render(){var e;const t=this.props.height-30-64-16;return Object(ut.d)("div",{className:"slice-adder-container"},Object(ut.d)(On,null,Object(ut.d)(Yt.l,{placeholder:Object(_.e)("Filter your charts"),className:"search-input",onChange:this.handleChange,onKeyPress:this.handleKeyPress}),Object(ut.d)(Sn,{id:"slice-adder-sortby",value:this.state.sortBy,onChange:this.handleSelect,options:Tt()(e=kt()(yn)).call(e,([e,t])=>({label:`${Object(_.e)("Sort by")} ${t}`,value:e})),placeholder:Object(_.e)("Sort by")})),this.props.isLoading&&Object(ut.d)(M.a,null),!this.props.isLoading&&this.state.filteredSlices.length>0&&Object(ut.d)(Kt,{width:376,height:t,rowCount:this.state.filteredSlices.length,rowHeight:112,rowRenderer:this.rowRenderer,searchTerm:this.state.searchTerm,sortBy:this.state.sortBy,selectedSliceIds:this.props.selectedSliceIds}),this.props.errorMessage&&Object(ut.d)("div",{className:"error-message"},this.props.errorMessage),Object(ut.d)(bn,{slices:this.state.filteredSlices}))}}Cn.propTypes=mn,Cn.defaultProps=gn;var jn=Cn;var xn=Object(o.b)((function({sliceEntities:e,dashboardInfo:t,dashboardState:n}){return{userId:t.userId,selectedSliceIds:n.sliceIds,slices:e.slices,isLoading:e.isLoading,errorMessage:e.errorMessage,lastUpdated:e.lastUpdated,editMode:n.editMode}}),(function(e){return Object(r.b)({fetchAllSlices:xt.d},e)}))(jn);const wn=Object($.g)(B.c)`
  line-height: inherit;
  margin-top: ${({theme:e})=>2*e.gridUnit}px;
`;var kn=({topOffset:e=0})=>Object(ut.d)("div",{className:"dashboard-builder-sidepane",style:{height:`calc(100vh - ${e+59}px)`}},Object(ut.d)(J,null,({height:t})=>Object(ut.d)(U.StickyContainer,null,Object(ut.d)(U.Sticky,{topOffset:-e,bottomOffset:1/0},({style:n,isSticky:r})=>Object(ut.d)("div",{className:"viewport",style:r?{...n,top:e}:null},Object(ut.d)(wn,{id:"tabs",className:"tabs-components"},Object(ut.d)(B.c.TabPane,{key:1,tab:Object(_.e)("Components")},Object(ut.d)(Ct,null),Object(ut.d)(St,null),Object(ut.d)(vt,null),Object(ut.d)(Ot,null),Object(ut.d)(jt,null),Object(ut.d)(yt,null)),Object(ut.d)(B.c.TabPane,{key:2,tab:Object(_.e)("Charts"),className:"tab-charts"},Object(ut.d)(xn,{height:t+(r?59:0)})))))))),Rn=n(168),Tn=n.n(Rn),_n=n(13),Fn=n.n(_n),In=n(1448),Mn=n(1727),Pn=n(337),zn=n(76),En=n(63),Dn=n(3823),Nn=n(1687),qn=n(409),An=(n(300),n(135)),Ln=n(182),Un=n(32),$n=n.n(Un),Hn=n(3980),Bn=n(536);var Wn=e=>{const{url:t,copyMenuItemTitle:n,emailMenuItemTitle:r,emailSubject:o,emailBody:i,addDangerToast:a,addSuccessToast:s,...l}=e,c=Object(Hn.a)(t);return Object(ut.d)(k.a.Fragment,null,Object(ut.d)(Yt.p.Item,$n()({key:"copy-url"},l),Object(ut.d)("div",{onClick:async function(){try{const e=await c();await Object(Bn.a)(e),s(Object(_.e)("Copied to clipboard!"))}catch(e){a(Object(_.e)("Sorry, your browser does not support copying."))}},role:"button",tabIndex:0},n)),Object(ut.d)(Yt.p.Item,$n()({key:"share-by-email"},l),Object(ut.d)("div",{onClick:async function(){try{const e=await c(),t=`${i}${e}`;window.location.href=`mailto:?Subject=${o}%20&Body=${t}`}catch(e){a(Object(_.e)("Sorry, something went wrong. Try again later."))}},role:"button",tabIndex:0},r)))},Vn=n(417),Gn=n(515);const Kn={initialCss:T.a.string,triggerNode:T.a.node.isRequired,onChange:T.a.func,templates:T.a.array};class Qn extends k.a.PureComponent{constructor(e){var t,n;super(e),this.state={css:e.initialCss},this.changeCss=x()(t=this.changeCss).call(t,this),this.changeCssTemplate=x()(n=this.changeCssTemplate).call(n,this)}componentDidMount(){Gn.b.preload()}changeCss(e){this.setState({css:e},()=>{this.props.onChange(e)})}changeCssTemplate(e){this.changeCss(e.css)}renderTemplateSelector(){return this.props.templates?Object(ut.d)("div",{style:{zIndex:10}},Object(ut.d)("h5",null,Object(_.e)("Load a template")),Object(ut.d)(Jt.i,{options:this.props.templates,placeholder:Object(_.e)("Load a CSS template"),onChange:this.changeCssTemplate})):null}render(){return Object(ut.d)(Vn.a,{triggerNode:this.props.triggerNode,modalTitle:Object(_.e)("CSS"),modalBody:Object(ut.d)("div",null,this.renderTemplateSelector(),Object(ut.d)("div",{style:{zIndex:1}},Object(ut.d)("h5",null,Object(_.e)("Live CSS editor")),Object(ut.d)("div",{style:{border:"solid 1px grey"}},Object(ut.d)(Gn.b,{minLines:12,maxLines:30,onChange:this.changeCss,height:"200px",width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,value:this.state.css||""}))))})}}Qn.propTypes=Kn,Qn.defaultProps={initialCss:"",onChange:()=>{}};var Yn,Jn=Qn,Xn=n(336),Zn=n(139);const er=Tt()(Yn=[[0,Object(_.e)("Don't refresh")],[10,Object(_.e)("10 seconds")],[30,Object(_.e)("30 seconds")],[60,Object(_.e)("1 minute")],[300,Object(_.e)("5 minutes")],[1800,Object(_.e)("30 minutes")],[3600,Object(_.e)("1 hour")],[21600,Object(_.e)("6 hours")],[43200,Object(_.e)("12 hours")],[86400,Object(_.e)("24 hours")]]).call(Yn,e=>({value:e[0],label:e[1]})),tr=Object($.g)(Vn.a)`
  .ant-modal-body {
    overflow: visible;
  }
`,nr=$.g.div`
  margin-top: ${({theme:e})=>6*e.gridUnit}px;
`;class rr extends k.a.PureComponent{constructor(e){var t,n,r;super(e),this.modalRef=k.a.createRef(),this.state={refreshFrequency:e.refreshFrequency},this.handleFrequencyChange=x()(t=this.handleFrequencyChange).call(t,this),this.onSave=x()(n=this.onSave).call(n,this),this.onCancel=x()(r=this.onCancel).call(r,this)}onSave(){var e;this.props.onChange(this.state.refreshFrequency,this.props.editMode),null==(e=this.modalRef.current)||e.close()}onCancel(){var e;this.setState({refreshFrequency:this.props.refreshFrequency}),null==(e=this.modalRef.current)||e.close()}handleFrequencyChange(e){const t=e?e.value:er[0].value;this.setState({refreshFrequency:t})}render(){const{refreshLimit:e=0,refreshWarning:t,editMode:n}=this.props,{refreshFrequency:r=0}=this.state,o=!!r&&!!t&&r<e;return Object(ut.d)(tr,{ref:this.modalRef,triggerNode:this.props.triggerNode,modalTitle:Object(_.e)("Refresh interval"),modalBody:Object(ut.d)("div",null,Object(ut.d)(Zn.c,null,Object(_.e)("Refresh frequency")),Object(ut.d)(Jt.i,{options:er,value:{value:r},onChange:this.handleFrequencyChange,forceOverflow:!0}),o&&Object(ut.d)(nr,null,Object(ut.d)(Xn.a,{type:"warning",message:Object(ut.d)(k.a.Fragment,null,Object(ut.d)("div",null,t),Object(ut.d)("br",null),Object(ut.d)("strong",null,Object(_.e)("Are you sure you want to proceed?")))}))),modalFooter:Object(ut.d)(k.a.Fragment,null,Object(ut.d)(En.a,{buttonStyle:"primary",buttonSize:"small",onClick:this.onSave},n?Object(_.e)("Save"):Object(_.e)("Save for this session")),Object(ut.d)(En.a,{onClick:this.onCancel,buttonSize:"small"},Object(_.e)("Cancel")))})}}rr.defaultProps={refreshLimit:0,refreshWarning:null};var or=rr,ir=n(363),ar=n(1395);const sr={saveType:X.D,colorNamespace:void 0,colorScheme:void 0,shouldPersistRefreshFrequency:!1};class lr extends k.a.PureComponent{constructor(e){var t,n,r,o,i,a;super(e),this.state={saveType:e.saveType,newDashName:`${e.dashboardTitle} [copy]`,duplicateSlices:!1},this.modal=null,this.handleSaveTypeChange=x()(t=this.handleSaveTypeChange).call(t,this),this.handleNameChange=x()(n=this.handleNameChange).call(n,this),this.saveDashboard=x()(r=this.saveDashboard).call(r,this),this.setModalRef=x()(o=this.setModalRef).call(o,this),this.toggleDuplicateSlices=x()(i=this.toggleDuplicateSlices).call(i,this),this.onSave=x()(a=this.props.onSave).call(a,this)}setModalRef(e){this.modal=e}toggleDuplicateSlices(){this.setState(e=>({duplicateSlices:!e.duplicateSlices}))}handleSaveTypeChange(e){this.setState({saveType:e.target.value})}handleNameChange(e){this.setState({newDashName:e,saveType:X.C})}saveDashboard(){var e;const{saveType:t,newDashName:n}=this.state,{dashboardTitle:r,dashboardInfo:o,layout:i,customCss:a,colorNamespace:s,colorScheme:l,expandedSlices:c,dashboardId:d,refreshFrequency:u,shouldPersistRefreshFrequency:h,lastModifiedTime:p}=this.props,f=In.b.getScale(l,s),b=l?f.getColorMap():{},m=h?u:null==(e=o.metadata)?void 0:e.refresh_frequency,g={positions:i,css:a,color_namespace:s,color_scheme:l,label_colors:b,expanded_slices:c,dashboard_title:t===X.C?n:r,duplicate_slices:this.state.duplicateSlices,refresh_frequency:m,last_modified_time:p};var v;t!==X.C||n?(this.onSave(g,d,t).then(e=>{t===X.C&&e&&e.json&&e.json.id&&(window.location.href=`/superset/dashboard/${e.json.id}/`)}),null==(v=this.modal)||v.close()):this.props.addDangerToast(Object(_.e)("You must pick a name for the new dashboard"))}render(){return Object(ut.d)(Vn.a,{ref:this.setModalRef,triggerNode:this.props.triggerNode,modalTitle:Object(_.e)("Save dashboard"),modalBody:Object(ut.d)("div",null,Object(ut.d)(ir.a,{value:X.D,onChange:this.handleSaveTypeChange,checked:this.state.saveType===X.D,disabled:!this.props.canOverwrite},Object(_.e)("Overwrite Dashboard [%s]",this.props.dashboardTitle)),Object(ut.d)("hr",null),Object(ut.d)(ir.a,{value:X.C,onChange:this.handleSaveTypeChange,checked:this.state.saveType===X.C},Object(_.e)("Save as:")),Object(ut.d)(Yt.l,{type:"text",placeholder:Object(_.e)("[dashboard name]"),value:this.state.newDashName,onFocus:e=>this.handleNameChange(e.target.value),onChange:e=>this.handleNameChange(e.target.value)}),Object(ut.d)("div",{className:"m-l-25 m-t-5"},Object(ut.d)(ar.c,{checked:this.state.duplicateSlices,onChange:()=>this.toggleDuplicateSlices()}),Object(ut.d)("span",{className:"m-l-5"},Object(_.e)("also copy (duplicate) charts")))),modalFooter:Object(ut.d)("div",null,Object(ut.d)(En.a,{buttonStyle:"primary",onClick:this.saveDashboard},Object(_.e)("Save")))})}}lr.defaultProps=sr;var cr=lr,dr=n(4703),ur=n(413),hr=n(504),pr=n(1001),fr=n.n(pr);const br=[E.l,E.e];function mr({components:e={},filterFields:t=[],selectedChartId:n}){if(fr()(e))return[];return[{...function e({currentNode:t={},components:n={},filterFields:r=[],selectedChartId:o}){if(!t)return null;const{type:i}=t;if(E.a===i&&t&&t.meta&&t.meta.chartId){const e={value:t.meta.chartId,label:t.meta.sliceName||`${i} ${t.meta.chartId}`,type:i,showCheckbox:o!==t.meta.chartId};return{...e,children:Tt()(r).call(r,n=>({value:`${t.meta.chartId}:${n}`,label:`${e.label}`,type:"filter_box",showCheckbox:!1}))}}let a=[];var s;if(t.children&&t.children.length&&v()(s=t.children).call(s,t=>{const i=e({currentNode:n[t],components:n,filterFields:r,selectedChartId:o}),s=n[t].type;l()(br).call(br,s)?a.push(i):a=d()(a).call(a,i)}),l()(br).call(br,i)){let e=null;return e=i===E.e?Object(_.e)("All charts"):t.meta&&t.meta.text?t.meta.text:`${i} ${t.id}`,{value:t.id,label:e,type:i,children:a}}return a}({currentNode:e[X.h],components:e,filterFields:t,selectedChartId:n})}]}function gr(e=[],t=-1){const n=[],r=(e,o)=>{var i;e&&(e.children&&(-1===t||o<t)&&(n.push(e.value),v()(i=e.children).call(i,e=>r(e,o+1))))};return e.length>0&&v()(e).call(e,e=>{r(e,0)}),n}function vr({activeFilterField:e,checkedFilterFields:t}){return Object(qn.a)(e?[e]:t)}var yr=n(137),Or=n.n(yr),Sr=n(977);function Cr({activeFilterField:e,checkedFilterFields:t}){if(e)return Object(Sr.a)(e).chartId;if(t.length){const{chartId:e}=Object(Sr.a)(t[0]);return Or()(t).call(t,t=>Object(Sr.a)(t).chartId!==e)?null:e}return null}function jr({checkedFilterFields:e=[],activeFilterField:t,filterScopeMap:n={},layout:r={}}){const o=vr({checkedFilterFields:e,activeFilterField:t}),i=t?[t]:e,a=mr({components:r,filterFields:i,selectedChartId:Cr({checkedFilterFields:e,activeFilterField:t})}),s=new h.a;v()(i).call(i,e=>{var t;v()(t=n[e].checked||[]).call(t,t=>{s.add(`${t}:${e}`)})});const l=[...s],c=n[o]?n[o].expanded:gr(a,1);return{[o]:{nodes:a,nodesFiltered:[...a],checked:l,expanded:c}}}var xr=n(5174),wr=n.n(xr),kr=n(3512),Rr=n.n(kr),Tr=n(3510),_r=n.n(Tr),Fr=n(3511),Ir=n.n(Fr);function Mr({tabScopes:e,parentNodeValue:t,forceAggregate:n=!1,hasChartSiblings:r=!1,tabChildren:o=[],immuneChartSiblings:i=[]}){var a,s,c;if(n||!r&&Ge()(a=kt()(e)).call(a,([e,{scope:t}])=>t&&t.length&&e===t[0])){const n=function({tabs:e=[],tabsInScope:t=[]}){const n=[];return v()(e).call(e,({value:e,children:r})=>{r&&!l()(t).call(t,e)&&v()(r).call(r,({value:e,children:r})=>{r&&!l()(t).call(t,e)&&n.push(...C()(r).call(r,({type:e})=>e===E.a))})}),Tt()(n).call(n,({value:e})=>e)}({tabs:o,tabsInScope:wr()(e,({scope:e})=>e)}),r=wr()(m()(e),({immune:e})=>e);return{scope:[t],immune:[...new h.a([...n,...r])]}}const u=C()(s=m()(e)).call(s,({scope:e})=>e&&e.length);return{scope:wr()(u,({scope:e})=>e),immune:u.length?wr()(u,({immune:e})=>e):d()(c=wr()(m()(e),({immune:e})=>e)).call(c,i)}}function Pr({filterKey:e,nodes:t=[],checkedChartIds:n=[]}){if(t.length){const{chartId:r}=Object(Sr.a)(e);return function e({currentNode:t={},filterId:n,checkedChartIds:r=[]}){var o;if(!t)return{};const{value:i,children:a}=t,s=C()(a).call(a,({type:e})=>e===E.a),c=C()(a).call(a,({type:e})=>e===E.l),u=Tt()(o=C()(s).call(s,({value:e})=>n!==e&&!l()(r).call(r,e))).call(o,({value:e})=>e),h=Ir()(_r()(e=>e.value),Rr()(t=>e({currentNode:t,filterId:n,checkedChartIds:r})))(c);if(!fr()(s)&&Or()(s).call(s,({value:e})=>l()(r).call(r,e))){if(fr()(c))return{scope:[i],immune:u};const{scope:e,immune:t}=Mr({tabScopes:h,parentNodeValue:i,forceAggregate:!0,tabChildren:c});return{scope:e,immune:d()(u).call(u,t)}}return c.length?Mr({tabScopes:h,parentNodeValue:i,hasChartSiblings:!fr()(s),tabChildren:c,immuneChartSiblings:u}):{scope:[],immune:u}}({currentNode:t[0],filterId:r,checkedChartIds:n})}return{}}var zr=n(127),Er=n.n(zr);var Dr=n(766),Nr=n(4708),qr=n.n(Nr);var Ar=()=>Object(ut.d)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(ut.d)("rect",{x:"0.5",y:"0.5",width:"17",height:"17",rx:"2.5",fill:"#EFF9F9",stroke:"#B3DADC"}),Object(ut.d)("rect",{x:"8",y:"4",width:"2",height:"10",rx:"1",fill:"#B3DADC"}),Object(ut.d)("rect",{x:"12",y:"10",width:"2",height:"4",rx:"1",fill:"#B3DADC"}),Object(ut.d)("rect",{x:"4",y:"6",width:"2",height:"8",rx:"1",fill:"#B3DADC"}));function Lr({nodes:e,selectedChartId:t}){return e?Tt()(e).call(e,e=>function e({currentNode:t={},selectedChartId:n}){if(!t)return null;const{label:r,value:o,type:i,children:a}=t;if(a&&a.length){const s=Tt()(a).call(a,t=>e({currentNode:t,selectedChartId:n}));return{...t,label:Object(ut.d)("span",{className:L()(`filter-scope-type ${i.toLowerCase()}`,{"selected-filter":n===o})},i===E.a&&Object(ut.d)("span",{className:"type-indicator"},Object(ut.d)(Ar,null)),r),children:s}}return{...t,label:Object(ut.d)("span",{className:L()(`filter-scope-type ${i.toLowerCase()}`,{"selected-filter":n===o})},r)}}({currentNode:e,selectedChartId:t})):[]}n(5175);var Ur=n(1810);var $r={check:Object(ut.d)(Ur.a,null),uncheck:Object(ut.d)(Ur.c,null),halfCheck:Object(ut.d)(Ur.b,null),expandClose:Object(ut.d)("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:Object(ut.d)("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:Object(ut.d)("span",{className:"rct-icon rct-icon-expand-all"},Object(_.e)("Expand all")),collapseAll:Object(ut.d)("span",{className:"rct-icon rct-icon-collapse-all"},Object(_.e)("Collapse all")),parentClose:Object(ut.d)("span",{className:"rct-icon rct-icon-parent-close"}),parentOpen:Object(ut.d)("span",{className:"rct-icon rct-icon-parent-open"}),leaf:Object(ut.d)("span",{className:"rct-icon rct-icon-leaf"})};const Hr={nodes:T.a.arrayOf(He.f).isRequired,checked:T.a.arrayOf(T.a.oneOfType([T.a.number,T.a.string])).isRequired,expanded:T.a.arrayOf(T.a.oneOfType([T.a.number,T.a.string])).isRequired,onCheck:T.a.func.isRequired,onExpand:T.a.func.isRequired,selectedChartId:T.a.number},Br=()=>{};function Wr({nodes:e=[],checked:t=[],expanded:n=[],onCheck:r,onExpand:o,selectedChartId:i}){return Object(ut.d)(qr.a,{showExpandAll:!0,expandOnClick:!0,showNodeIcon:!1,nodes:Lr({nodes:e,selectedChartId:i}),checked:t,expanded:n,onCheck:r,onExpand:o,onClick:Br,icons:$r})}Wr.propTypes=Hr,Wr.defaultProps={selectedChartId:null};const Vr={label:T.a.string.isRequired,isSelected:T.a.bool.isRequired};function Gr({label:e,isSelected:t}){return Object(ut.d)("span",{className:L()("filter-field-item filter-container",{"is-selected":t})},Object(ut.d)(Zn.c,{htmlFor:e},e))}function Kr({nodes:e,activeKey:t}){if(!e)return[];const n=e[0],r=n.children,o=Tt()(r).call(r,e=>{var n;return{...e,children:Tt()(n=e.children).call(n,e=>{const{label:n,value:r}=e;return{...e,label:Object(ut.d)(Gr,{isSelected:r===t,label:n})}})}});return[{...n,label:Object(ut.d)("span",{className:"root"},n.label),children:o}]}Gr.propTypes=Vr;const Qr={activeKey:T.a.string,nodes:T.a.arrayOf(He.f).isRequired,checked:T.a.arrayOf(T.a.oneOfType([T.a.number,T.a.string])).isRequired,expanded:T.a.arrayOf(T.a.oneOfType([T.a.number,T.a.string])).isRequired,onCheck:T.a.func.isRequired,onExpand:T.a.func.isRequired,onClick:T.a.func.isRequired};function Yr({activeKey:e,nodes:t=[],checked:n=[],expanded:r=[],onClick:o,onCheck:i,onExpand:a}){return Object(ut.d)(qr.a,{showExpandAll:!0,showNodeIcon:!1,expandOnClick:!0,nodes:Kr({nodes:t,activeKey:e}),checked:n,expanded:r,onClick:o,onCheck:i,onExpand:a,icons:$r})}Yr.propTypes=Qr,Yr.defaultProps={activeKey:null};const Jr={dashboardFilters:T.a.objectOf(He.c).isRequired,layout:T.a.object.isRequired,updateDashboardFiltersScope:T.a.func.isRequired,setUnsavedChanges:T.a.func.isRequired,onCloseModal:T.a.func.isRequired},Xr=$.g.div`
  height: ${({theme:e})=>16*e.gridUnit}px;

  // TODO: replace hardcoded color with theme variable after refactoring filter-scope-selector.less to Emotion
  border-top: ${({theme:e})=>e.gridUnit/4}px solid #cfd8dc;
  padding: ${({theme:e})=>6*e.gridUnit}px;
  margin: 0 0 0 ${({theme:e})=>6*-e.gridUnit}px;
  text-align: right;

  .btn {
    margin-right: ${({theme:e})=>4*e.gridUnit}px;

    &:last-child {
      margin-right: 0;
    }
  }
`;class Zr extends k.a.PureComponent{constructor(e){var t,n,r,o,i,a,s,l,c;super(e);const{dashboardFilters:u,layout:h}=e;if(f()(u).length>0){var p,b;const e=function({dashboardFilters:e={}}){var t;const n=Tt()(t=m()(e)).call(t,e=>{var t;const{chartId:n,filterName:r,columns:o,labels:i}=e,a=Tt()(t=f()(o)).call(t,e=>({value:Object(Sr.b)({chartId:n,column:e}),label:i[e]||e}));return{value:n,label:r,children:a,showCheckbox:!0}});return[{value:X.a,type:E.e,label:Object(_.e)("All filters"),children:n}]}({dashboardFilters:u}),t=e[0].children;this.allfilterFields=[],v()(t).call(t,({children:e})=>{v()(e).call(e,e=>{this.allfilterFields.push(e.value)})}),this.defaultFilterKey=t[0].children[0].value;const n=z()(p=m()(u)).call(p,(e,{chartId:t,columns:n})=>{var r;return{...e,...z()(r=f()(n)).call(r,(e,n)=>{var r;const o=Object(Sr.b)({chartId:t,column:n}),i=mr({components:h,filterFields:[o],selectedChartId:t}),a=gr(i,1),s=C()(r=Object(Dr.d)({filterScope:u[t].scopes[n]})||[]).call(r,e=>e!==t);return{...e,[o]:{nodes:i,nodesFiltered:[...i],checked:s,expanded:a}}},{})}},{}),{chartId:r}=Object(Sr.a)(this.defaultFilterKey),o=[],i=this.defaultFilterKey,a=d()(b=[X.a]).call(b,r),s=jr({checkedFilterFields:o,activeFilterField:i,filterScopeMap:n,layout:h});this.state={showSelector:!0,activeFilterField:i,searchText:"",filterScopeMap:{...n,...s},filterFieldNodes:e,checkedFilterFields:o,expandedFilterIds:a}}else this.state={showSelector:!1};this.filterNodes=x()(t=this.filterNodes).call(t,this),this.onChangeFilterField=x()(n=this.onChangeFilterField).call(n,this),this.onCheckFilterScope=x()(r=this.onCheckFilterScope).call(r,this),this.onExpandFilterScope=x()(o=this.onExpandFilterScope).call(o,this),this.onSearchInputChange=x()(i=this.onSearchInputChange).call(i,this),this.onCheckFilterField=x()(a=this.onCheckFilterField).call(a,this),this.onExpandFilterField=x()(s=this.onExpandFilterField).call(s,this),this.onClose=x()(l=this.onClose).call(l,this),this.onSave=x()(c=this.onSave).call(c,this)}onCheckFilterScope(e=[]){const{activeFilterField:t,filterScopeMap:n,checkedFilterFields:r}=this.state,o=vr({activeFilterField:t,checkedFilterFields:r}),i=t?[t]:r,a={...n[o],checked:e},s=function({checked:e=[],filterFields:t=[],filterScopeMap:n={}}){const r=z()(e).call(e,(e,t)=>{var n;const[r,o]=t.split(":");return{...e,[o]:d()(n=e[o]||[]).call(n,Er()(r,10))}},{});return z()(t).call(t,(e,t)=>{var o;const{chartId:i}=Object(Sr.a)(t),a=C()(o=r[t]||[]).call(o,e=>e!==i);return{...e,[t]:{...n[t],checked:a}}},{})}({checked:e,filterFields:i,filterScopeMap:n});this.setState(()=>({filterScopeMap:{...n,...s,[o]:a}}))}onExpandFilterScope(e=[]){const{activeFilterField:t,checkedFilterFields:n,filterScopeMap:r}=this.state,o=vr({activeFilterField:t,checkedFilterFields:n}),i={...r[o],expanded:e};this.setState(()=>({filterScopeMap:{...r,[o]:i}}))}onCheckFilterField(e=[]){const{layout:t}=this.props,{filterScopeMap:n}=this.state,r=jr({checkedFilterFields:e,activeFilterField:null,filterScopeMap:n,layout:t});this.setState(()=>({activeFilterField:null,checkedFilterFields:e,filterScopeMap:{...n,...r}}))}onExpandFilterField(e=[]){this.setState(()=>({expandedFilterIds:e}))}onChangeFilterField(e={}){var t;const{layout:n}=this.props,r=e.value,{activeFilterField:o,checkedFilterFields:i,filterScopeMap:a}=this.state;if(r===o){const e=jr({checkedFilterFields:i,activeFilterField:null,filterScopeMap:a,layout:n});this.setState({activeFilterField:null,filterScopeMap:{...a,...e}})}else if(l()(t=this.allfilterFields).call(t,r)){const e=jr({checkedFilterFields:i,activeFilterField:r,filterScopeMap:a,layout:n});this.setState({activeFilterField:r,filterScopeMap:{...a,...e}})}}onSearchInputChange(e){this.setState({searchText:e.target.value},this.filterTree)}onClose(){this.props.onCloseModal()}onSave(){var e;const{filterScopeMap:t}=this.state,n=z()(e=this.allfilterFields).call(e,(e,n)=>{const{nodes:r}=t[n];return{...e,[n]:Pr({filterKey:n,nodes:r,checkedChartIds:t[n].checked})}},{});this.props.updateDashboardFiltersScope(n),this.props.setUnsavedChanges(!0),this.props.onCloseModal()}filterTree(){if(this.state.searchText){const e=e=>{var t;const{activeFilterField:n,checkedFilterFields:r,filterScopeMap:o}=e,i=vr({activeFilterField:n,checkedFilterFields:r}),a=z()(t=o[i].nodes).call(t,this.filterNodes,[]),s=gr([...a]),l={...o[i],nodesFiltered:a,expanded:s};return{filterScopeMap:{...o,[i]:l}}};this.setState(e)}else this.setState(e=>{const{activeFilterField:t,checkedFilterFields:n,filterScopeMap:r}=e,o=vr({activeFilterField:t,checkedFilterFields:n}),i={...r[o],nodesFiltered:r[o].nodes};return{filterScopeMap:{...r,[o]:i}}})}filterNodes(e=[],t={}){var n,r;const{searchText:o}=this.state,i=z()(n=t.children||[]).call(n,this.filterNodes,[]);return(O()(r=t.label.toLocaleLowerCase()).call(r,o.toLocaleLowerCase())>-1||i.length)&&e.push({...t,children:i}),e}renderFilterFieldList(){const{activeFilterField:e,filterFieldNodes:t,checkedFilterFields:n,expandedFilterIds:r}=this.state;return Object(ut.d)(Yr,{activeKey:e,nodes:t,checked:n,expanded:r,onClick:this.onChangeFilterField,onCheck:this.onCheckFilterField,onExpand:this.onExpandFilterField})}renderFilterScopeTree(){const{filterScopeMap:e,activeFilterField:t,checkedFilterFields:n,searchText:r}=this.state,o=vr({activeFilterField:t,checkedFilterFields:n}),i=Cr({activeFilterField:t,checkedFilterFields:n});return Object(ut.d)(k.a.Fragment,null,Object(ut.d)("input",{className:"filter-text scope-search multi-edit-mode",placeholder:Object(_.e)("Search..."),type:"text",value:r,onChange:this.onSearchInputChange}),Object(ut.d)(Wr,{nodes:e[o].nodesFiltered,checked:e[o].checked,expanded:e[o].expanded,onCheck:this.onCheckFilterScope,onExpand:this.onExpandFilterScope,selectedChartId:i}))}renderEditingFiltersName(){var e,t;const{dashboardFilters:n}=this.props,{activeFilterField:r,checkedFilterFields:o}=this.state,i=Tt()(e=d()(t=[]).call(t,r||o)).call(e,e=>{const{chartId:t,column:r}=Object(Sr.a)(e);return n[t].labels[r]||r});return Object(ut.d)("div",{className:"selected-fields multi-edit-mode"},0===i.length&&Object(_.e)("No filter is selected."),1===i.length&&Object(_.e)("Editing 1 filter:"),i.length>1&&Object(_.e)("Batch editing %d filters:",i.length),Object(ut.d)("span",{className:"selected-scopes"},i.join(", ")))}render(){const{showSelector:e}=this.state;return Object(ut.d)("div",{className:"filter-scope-container"},Object(ut.d)("div",{className:"filter-scope-header"},Object(ut.d)("h4",null,Object(_.e)("Configure filter scopes")),e&&this.renderEditingFiltersName()),Object(ut.d)("div",{className:"filter-scope-body"},e?Object(ut.d)("div",{className:"filters-scope-selector"},Object(ut.d)("div",{className:L()("filter-field-pane multi-edit-mode")},this.renderFilterFieldList()),Object(ut.d)("div",{className:"filter-scope-pane multi-edit-mode"},this.renderFilterScopeTree())):Object(ut.d)("div",{className:"warning-message"},Object(_.e)("There are no filters in this dashboard."))),Object(ut.d)(Xr,null,Object(ut.d)(En.a,{buttonSize:"small",onClick:this.onClose},Object(_.e)("Close")),e&&Object(ut.d)(En.a,{buttonSize:"small",buttonStyle:"primary",onClick:this.onSave},Object(_.e)("Save"))))}}Zr.propTypes=Jr;var eo=Object(o.b)((function({dashboardLayout:e,dashboardFilters:t}){return{dashboardFilters:t,layout:e.present}}),(function(e){return Object(r.b)({updateDashboardFiltersScope:ur.j,setUnsavedChanges:hr.I},e)}))(Zr);const to=$.g.div(({theme:{gridUnit:e}})=>({padding:2*e,paddingBottom:3*e}));class no extends k.a.PureComponent{constructor(e){var t;super(e),this.modal=k.a.createRef(),this.handleCloseModal=x()(t=this.handleCloseModal).call(t,this)}handleCloseModal(){this.modal.current&&this.modal.current.close()}render(){const e={onCloseModal:this.handleCloseModal};return Object(ut.d)(Vn.a,{ref:this.modal,triggerNode:this.props.triggerNode,modalBody:Object(ut.d)(to,null,Object(ut.d)(eo,e)),width:"80%"})}}var ro=n(3832),oo=n(83),io=n.n(oo),ao=n(1453),so=n.n(ao),lo=n(4010);function co(e,t={},n="",r){const o=new so.a;o.set(Ln.g.preselectFilters.name,io()(Object(lo.a)(t))),r&&o.set(Ln.g.standalone.name,r.toString());const i=n?`#${n}`:"";return`${e}?${o.toString()}${i}`}var uo=n(925);const ho={addSuccessToast:T.a.func.isRequired,addDangerToast:T.a.func.isRequired,dashboardInfo:T.a.object.isRequired,dashboardId:T.a.number.isRequired,dashboardTitle:T.a.string.isRequired,customCss:T.a.string.isRequired,colorNamespace:T.a.string,colorScheme:T.a.string,onChange:T.a.func.isRequired,updateCss:T.a.func.isRequired,forceRefreshAllCharts:T.a.func.isRequired,refreshFrequency:T.a.number.isRequired,shouldPersistRefreshFrequency:T.a.bool.isRequired,setRefreshFrequency:T.a.func.isRequired,startPeriodicRender:T.a.func.isRequired,editMode:T.a.bool.isRequired,userCanEdit:T.a.bool.isRequired,userCanShare:T.a.bool.isRequired,userCanSave:T.a.bool.isRequired,isLoading:T.a.bool.isRequired,layout:T.a.object.isRequired,expandedSlices:T.a.object.isRequired,onSave:T.a.func.isRequired,showPropertiesModal:T.a.func.isRequired,refreshLimit:T.a.number,refreshWarning:T.a.string,lastModifiedTime:T.a.number.isRequired},po={colorNamespace:void 0,colorScheme:void 0,refreshLimit:0,refreshWarning:null},fo="save-modal",bo="refresh-dashboard",mo="autorefresh-modal",go="set-filter-mapping",vo="edit-properties",yo="edit-css",Oo="download-as-image",So="toggle-fullscreen",Co=$.g.div`
  margin-left: ${({theme:e})=>2.5*e.gridUnit}px;
`;class jo extends k.a.PureComponent{static discardChanges(){window.location.reload()}constructor(e){var t,n,r;super(e),this.state={css:e.customCss,cssTemplates:[]},this.changeCss=x()(t=this.changeCss).call(t,this),this.changeRefreshInterval=x()(n=this.changeRefreshInterval).call(n,this),this.handleMenuClick=x()(r=this.handleMenuClick).call(r,this)}UNSAFE_componentWillMount(){Object(dr.a)(this.state.css),An.a.get({endpoint:"/csstemplateasyncmodelview/api/read"}).then(({json:e})=>{var t;const n=Tt()(t=e.result).call(t,e=>({value:e.template_name,css:e.css,label:e.template_name}));this.setState({cssTemplates:n})}).catch(()=>{this.props.addDangerToast(Object(_.e)("An error occurred while fetching available CSS templates"))})}changeCss(e){this.setState({css:e},()=>{Object(dr.a)(e)}),this.props.onChange(),this.props.updateCss(e)}changeRefreshInterval(e,t){this.props.setRefreshFrequency(e,t),this.props.startPeriodicRender(1e3*e)}handleMenuClick({key:e,domEvent:t}){switch(e){case bo:this.props.forceRefreshAllCharts();break;case vo:this.props.showPropertiesModal();break;case Oo:{const e=document.querySelector(".ant-dropdown:not(.ant-dropdown-hidden)");e.style.visibility="hidden",Object(ro.a)(".dashboard",this.props.dashboardTitle)(t).then(()=>{e.style.visibility="visible"});break}case So:{const e=co(window.location.pathname,Object(Dr.b)(),window.location.hash,!Object(uo.b)(Ln.g.standalone));window.location.replace(e);break}}}render(){const{dashboardTitle:e,dashboardId:t,dashboardInfo:n,refreshFrequency:r,shouldPersistRefreshFrequency:o,editMode:i,customCss:a,colorNamespace:s,colorScheme:l,layout:c,expandedSlices:d,onSave:u,userCanEdit:h,userCanShare:p,userCanSave:f,isLoading:b,refreshLimit:m,refreshWarning:g,lastModifiedTime:v,addSuccessToast:y,addDangerToast:O}=this.props,S=`${Object(_.e)("Superset dashboard")} ${e}`,C=Object(_.e)("Check out this dashboard: "),j=co(window.location.pathname,Object(Dr.b)(),window.location.hash),x=Object(ut.d)(Yt.p,{onClick:this.handleMenuClick,selectable:!1},f&&Object(ut.d)(Yt.p.Item,{key:fo},Object(ut.d)(cr,{addSuccessToast:this.props.addSuccessToast,addDangerToast:this.props.addDangerToast,dashboardId:t,dashboardTitle:e,dashboardInfo:n,saveType:X.C,layout:c,expandedSlices:d,refreshFrequency:r,shouldPersistRefreshFrequency:o,lastModifiedTime:v,customCss:a,colorNamespace:s,colorScheme:l,onSave:u,triggerNode:Object(ut.d)("span",null,Object(_.e)("Save as")),canOverwrite:h})),p&&Object(ut.d)(Wn,{url:j,copyMenuItemTitle:Object(_.e)("Copy dashboard URL"),emailMenuItemTitle:Object(_.e)("Share dashboard by email"),emailSubject:S,emailBody:C,addSuccessToast:y,addDangerToast:O}),Object(ut.d)(Yt.p.Item,{key:bo,disabled:b},Object(_.e)("Refresh dashboard")),Object(ut.d)(Yt.p.Divider,null),Object(ut.d)(Yt.p.Item,{key:mo},Object(ut.d)(or,{refreshFrequency:r,refreshLimit:m,refreshWarning:g,onChange:this.changeRefreshInterval,editMode:i,triggerNode:Object(ut.d)("span",null,Object(_.e)("Set auto-refresh interval"))})),i&&Object(ut.d)(Yt.p.Item,{key:go},Object(ut.d)(no,{className:"m-r-5",triggerNode:Object(_.e)("Set filter mapping")})),i&&Object(ut.d)(Yt.p.Item,{key:vo},Object(_.e)("Edit dashboard properties")),i&&Object(ut.d)(Yt.p.Item,{key:yo},Object(ut.d)(Jn,{triggerNode:Object(ut.d)("span",null,Object(_.e)("Edit CSS")),initialCss:this.state.css,templates:this.state.cssTemplates,onChange:this.changeCss})),!i&&Object(ut.d)(Yt.p.Item,{key:Oo},Object(_.e)("Download as image")),!i&&Object(ut.d)(Yt.p.Item,{key:So},Object(_.e)("Toggle fullscreen")));return Object(ut.d)(Yt.r,{overlay:x,trigger:["click"],getPopupContainer:e=>e.closest(".dashboard-header")},Object(ut.d)(Co,{id:"save-dash-split-button",role:"button"},Object(ut.d)(zn.a,{name:"more-horiz"})))}}jo.propTypes=ho,jo.defaultProps=po;var xo=jo,wo=n(72),ko=n(186);const Ro={dashboardId:T.a.number.isRequired,isPublished:T.a.bool.isRequired,savePublished:T.a.func.isRequired,canEdit:T.a.bool.isRequired,canSave:T.a.bool.isRequired},To=Object(_.e)("This dashboard is not published, it will not show up in the list of dashboards. Click here to publish this dashboard."),_o=Object(_.e)("This dashboard is not published which means it will not show up in the list of dashboards. Favorite it to see it there or access it by using the URL directly."),Fo=Object(_.e)("This dashboard is published. Click to make it a draft.");class Io extends k.a.Component{componentDidMount(){var e;this.togglePublished=x()(e=this.togglePublished).call(e,this)}togglePublished(){this.props.savePublished(this.props.dashboardId,!this.props.isPublished)}render(){return this.props.isPublished?this.props.canEdit&&this.props.canSave?Object(ut.d)(wo.a,{id:"published-dashboard-tooltip",placement:"bottom",title:Fo},Object(ut.d)(ko.a,{onClick:()=>{this.togglePublished()}},Object(_.e)("Published"))):null:this.props.canEdit&&this.props.canSave?Object(ut.d)(wo.a,{id:"unpublished-dashboard-tooltip",placement:"bottom",title:To},Object(ut.d)(ko.a,{onClick:()=>{this.togglePublished()}},Object(_.e)("Draft"))):Object(ut.d)(wo.a,{id:"unpublished-dashboard-tooltip",placement:"bottom",title:_o},Object(ut.d)(ko.a,null,Object(_.e)("Draft")))}}Io.propTypes=Ro;const Mo={onUndo:T.a.func.isRequired,onRedo:T.a.func.isRequired};class Po extends k.a.PureComponent{constructor(e){var t;super(e),this.handleKeydown=x()(t=this.handleKeydown).call(t,this)}componentDidMount(){document.addEventListener("keydown",this.handleKeydown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown)}handleKeydown(e){if(e.ctrlKey||e.metaKey){const t="z"===e.key||90===e.keyCode,n="y"===e.key||89===e.keyCode;if(!(document&&document.querySelector(".dashboard-markdown--editing"))&&(t||n)){e.preventDefault(),(t?this.props.onUndo:this.props.onRedo)()}}}render(){return null}}Po.propTypes=Mo;var zo=Po,Eo=n(3988);function Do({interval:e=0,periodicRender:t,refreshTimer:n}){return(e=>{e&&clearInterval(e)})(n),e>0?ot()(t,e):0}const No={addSuccessToast:T.a.func.isRequired,addDangerToast:T.a.func.isRequired,addWarningToast:T.a.func.isRequired,dashboardInfo:T.a.object.isRequired,dashboardTitle:T.a.string.isRequired,charts:T.a.objectOf(He.a).isRequired,layout:T.a.object.isRequired,expandedSlices:T.a.object.isRequired,customCss:T.a.string.isRequired,colorNamespace:T.a.string,colorScheme:T.a.string,setColorSchemeAndUnsavedChanges:T.a.func.isRequired,isStarred:T.a.bool.isRequired,isPublished:T.a.bool.isRequired,isLoading:T.a.bool.isRequired,onSave:T.a.func.isRequired,onChange:T.a.func.isRequired,fetchFaveStar:T.a.func.isRequired,fetchCharts:T.a.func.isRequired,saveFaveStar:T.a.func.isRequired,savePublished:T.a.func.isRequired,updateDashboardTitle:T.a.func.isRequired,editMode:T.a.bool.isRequired,setEditMode:T.a.func.isRequired,showBuilderPane:T.a.func.isRequired,updateCss:T.a.func.isRequired,logEvent:T.a.func.isRequired,hasUnsavedChanges:T.a.bool.isRequired,maxUndoHistoryExceeded:T.a.bool.isRequired,lastModifiedTime:T.a.number.isRequired,onUndo:T.a.func.isRequired,onRedo:T.a.func.isRequired,undoLength:T.a.number.isRequired,redoLength:T.a.number.isRequired,setMaxUndoHistoryExceeded:T.a.func.isRequired,maxUndoHistoryToast:T.a.func.isRequired,refreshFrequency:T.a.number.isRequired,shouldPersistRefreshFrequency:T.a.bool.isRequired,setRefreshFrequency:T.a.func.isRequired,dashboardInfoChanged:T.a.func.isRequired,dashboardTitleChanged:T.a.func.isRequired},qo={colorNamespace:void 0,colorScheme:void 0},Ao=$.g.div`
  background: ${({theme:e})=>e.colors.grayscale.light5};
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 0 ${({theme:e})=>6*e.gridUnit}px;
  border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};

  button,
  .fave-unfave-icon {
    margin-left: ${({theme:e})=>2*e.gridUnit}px;
  }
  .button-container {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    .action-button {
      font-size: ${({theme:e})=>e.typography.sizes.xl}px;
    }
  }
`;class Lo extends k.a.PureComponent{static discardChanges(){window.location.reload()}constructor(e){var t,n,r,o,i,a,s,l,c;super(e),this.state={didNotifyMaxUndoHistoryToast:!1,emphasizeUndo:!1,showingPropertiesModal:!1},this.handleChangeText=x()(t=this.handleChangeText).call(t,this),this.handleCtrlZ=x()(n=this.handleCtrlZ).call(n,this),this.handleCtrlY=x()(r=this.handleCtrlY).call(r,this),this.toggleEditMode=x()(o=this.toggleEditMode).call(o,this),this.forceRefresh=x()(i=this.forceRefresh).call(i,this),this.startPeriodicRender=x()(a=this.startPeriodicRender).call(a,this),this.overwriteDashboard=x()(s=this.overwriteDashboard).call(s,this),this.showPropertiesModal=x()(l=this.showPropertiesModal).call(l,this),this.hidePropertiesModal=x()(c=this.hidePropertiesModal).call(c,this)}componentDidMount(){const{refreshFrequency:e}=this.props;this.startPeriodicRender(1e3*e)}UNSAFE_componentWillReceiveProps(e){X.F-e.undoLength<=0&&!this.state.didNotifyMaxUndoHistoryToast&&(this.setState(()=>({didNotifyMaxUndoHistoryToast:!0})),this.props.maxUndoHistoryToast()),e.undoLength>X.F&&!this.props.maxUndoHistoryExceeded&&this.props.setMaxUndoHistoryExceeded()}componentWillUnmount(){clearTimeout(this.ctrlYTimeout),clearTimeout(this.ctrlZTimeout)}handleChangeText(e){const{updateDashboardTitle:t,onChange:n}=this.props;e&&this.props.dashboardTitle!==e&&(t(e),n())}handleCtrlY(){this.props.onRedo(),this.setState({emphasizeRedo:!0},()=>{this.ctrlYTimeout&&clearTimeout(this.ctrlYTimeout),this.ctrlYTimeout=Tn()(()=>{this.setState({emphasizeRedo:!1})},100)})}handleCtrlZ(){this.props.onUndo(),this.setState({emphasizeUndo:!0},()=>{this.ctrlZTimeout&&clearTimeout(this.ctrlZTimeout),this.ctrlZTimeout=Tn()(()=>{this.setState({emphasizeUndo:!1})},100)})}forceRefresh(){if(!this.props.isLoading){const e=f()(this.props.charts);return this.props.logEvent(Pn.f,{force:!0,interval:0,chartCount:e.length}),this.props.fetchCharts(e,!0,0,this.props.dashboardInfo.id)}return!1}startPeriodicRender(e){let t;if(e){const n=q()(er).call(er,t=>t.value===e/1e3);t=n?n.label:Fn.a.duration(e,"millisecond").humanize()}this.refreshTimer=Do({interval:e,periodicRender:()=>{var n,r;const{fetchCharts:o,logEvent:i,charts:a,dashboardInfo:s}=this.props,{metadata:l}=s,c=l.timed_refresh_immune_slices||[],d=Tt()(n=C()(r=m()(a)).call(r,e=>-1===O()(c).call(c,e.id))).call(n,e=>e.id);return i(Pn.l,{interval:e,chartCount:d.length}),this.props.addWarningToast(Object(_.e)("This dashboard is currently force refreshing; the next force refresh will be in %s.",t)),o(d,!0,.2*e,s.id)},refreshTimer:this.refreshTimer})}toggleEditMode(){this.props.logEvent(Pn.o,{edit_mode:!this.props.editMode}),this.props.setEditMode(!this.props.editMode)}overwriteDashboard(){var e,t;const{dashboardTitle:n,layout:r,expandedSlices:o,customCss:i,colorNamespace:a,colorScheme:s,dashboardInfo:l,refreshFrequency:c,shouldPersistRefreshFrequency:d,lastModifiedTime:u}=this.props,h=In.b.getScale(s,a);let p=s?h.getColorMap():{};const f=null==(e=l.metadata)?void 0:e.label_colors;f&&(p={...p,...f});const b={positions:r,expanded_slices:o,css:i,color_namespace:a,color_scheme:s,label_colors:p,dashboard_title:n,refresh_frequency:d?c:null==(t=l.metadata)?void 0:t.refresh_frequency,last_modified_time:u},m=Object(qn.a)(r).length,g=l.common.conf.SUPERSET_DASHBOARD_POSITION_DATA_LIMIT||X.f;m>=g?this.props.addDangerToast(Object(_.e)("Your dashboard is too large. Please reduce the size before save it.")):(m>=.9*g&&this.props.addWarningToast("Your dashboard is near the size limit."),this.props.onSave(b,l.id,X.D))}showPropertiesModal(){this.setState({showingPropertiesModal:!0})}hidePropertiesModal(){this.setState({showingPropertiesModal:!1})}render(){const{dashboardTitle:e,layout:t,expandedSlices:n,customCss:r,colorNamespace:o,setColorSchemeAndUnsavedChanges:i,colorScheme:a,onUndo:s,onRedo:l,undoLength:c,redoLength:d,onChange:u,onSave:h,updateCss:p,editMode:f,isPublished:b,dashboardInfo:m,hasUnsavedChanges:g,isLoading:v,refreshFrequency:y,shouldPersistRefreshFrequency:O,setRefreshFrequency:S,lastModifiedTime:C}=this.props,j=m.dash_edit_perm,x=m.dash_share_perm,w=m.dash_save_perm,R=m.common.conf.SUPERSET_DASHBOARD_PERIODICAL_REFRESH_LIMIT,T=m.common.conf.SUPERSET_DASHBOARD_PERIODICAL_REFRESH_WARNING_MESSAGE;return Object(ut.d)(Ao,{className:"dashboard-header","data-test-id":`${m.id}`},Object(ut.d)("div",{className:"dashboard-component-header header-large"},Object(ut.d)(Dn.a,{title:e,canEdit:j&&f,onSaveTitle:this.handleChangeText,showTooltip:!1}),Object(ut.d)(Io,{dashboardId:m.id,isPublished:b,savePublished:this.props.savePublished,canEdit:j,canSave:w}),m.userId&&Object(ut.d)(Nn.a,{itemId:m.id,fetchFaveStar:this.props.fetchFaveStar,saveFaveStar:this.props.saveFaveStar,isStarred:this.props.isStarred,showTooltip:!0})),Object(ut.d)("div",{className:"button-container"},w&&Object(ut.d)("div",{className:"button-container"},f&&Object(ut.d)(k.a.Fragment,null,Object(ut.d)(Mn.a,{className:"m-r-5"},Object(ut.d)(En.a,{buttonSize:"small",onClick:s,disabled:c<1,buttonStyle:this.state.emphasizeUndo?"primary":void 0},Object(ut.d)("i",{title:"Undo",className:"undo-action fa fa-reply"})," "),Object(ut.d)(En.a,{buttonSize:"small",onClick:l,disabled:d<1,buttonStyle:this.state.emphasizeRedo?"primary":void 0}," ",Object(ut.d)("i",{title:"Redo",className:"redo-action fa fa-share"}))),Object(ut.d)(En.a,{buttonSize:"small",className:"m-r-5",onClick:this.constructor.discardChanges,buttonStyle:"default"},Object(_.e)("Discard changes")),Object(ut.d)(En.a,{buttonSize:"small",disabled:!g,buttonStyle:"primary",onClick:this.overwriteDashboard},Object(_.e)("Save")))),f&&Object(ut.d)(zo,{onUndo:this.handleCtrlZ,onRedo:this.handleCtrlY}),!f&&j&&Object(ut.d)(k.a.Fragment,null,Object(ut.d)("span",{role:"button",title:Object(_.e)("Edit dashboard"),tabIndex:0,className:"action-button",onClick:this.toggleEditMode},Object(ut.d)(zn.a,{name:"edit-alt"}))),this.state.showingPropertiesModal&&Object(ut.d)(Eo.a,{dashboardId:m.id,show:this.state.showingPropertiesModal,onHide:this.hidePropertiesModal,colorScheme:this.props.colorScheme,onSubmit:e=>{const{dashboardInfoChanged:t,dashboardTitleChanged:n}=this.props;t({slug:e.slug,metadata:JSON.parse(e.jsonMetadata)}),i(e.colorScheme),n(e.title),e.slug&&window.history.pushState({event:"dashboard_properties_changed"},"",`/superset/dashboard/${e.slug}/`)}}),Object(ut.d)(xo,{addSuccessToast:this.props.addSuccessToast,addDangerToast:this.props.addDangerToast,dashboardId:m.id,dashboardTitle:e,dashboardInfo:m,layout:t,expandedSlices:n,customCss:r,colorNamespace:o,colorScheme:a,onSave:h,onChange:u,forceRefreshAllCharts:this.forceRefresh,startPeriodicRender:this.startPeriodicRender,refreshFrequency:y,shouldPersistRefreshFrequency:O,setRefreshFrequency:S,updateCss:p,editMode:f,hasUnsavedChanges:g,userCanEdit:j,userCanShare:x,userCanSave:w,isLoading:v,showPropertiesModal:this.showPropertiesModal,refreshLimit:R,refreshWarning:T,lastModifiedTime:C})))}}Lo.propTypes=No,Lo.defaultProps=qo;var Uo=Lo;function $o(e){var t;return Or()(t=m()(e)).call(t,e=>e.chartUpdateStartTime>(e.chartUpdateEndTime||0))}var Ho=n(1277),Bo=n(544),Wo=n(111),Vo=n(870);var Go=Object(o.b)((function({dashboardLayout:e,dashboardState:t,dashboardInfo:n,charts:r}){return{dashboardInfo:n,undoLength:e.past.length,redoLength:e.future.length,layout:e.present,dashboardTitle:((e.present[X.e]||{}).meta||{}).text,expandedSlices:t.expandedSlices,refreshFrequency:t.refreshFrequency,shouldPersistRefreshFrequency:!!t.shouldPersistRefreshFrequency,customCss:t.css,colorNamespace:t.colorNamespace,colorScheme:t.colorScheme,charts:r,userId:n.userId,isStarred:!!t.isStarred,isPublished:!!t.isPublished,isLoading:$o(r),hasUnsavedChanges:!!t.hasUnsavedChanges,maxUndoHistoryExceeded:!!t.maxUndoHistoryExceeded,lastModifiedTime:Math.max(t.lastModifiedTime,n.last_modified_time),editMode:!!t.editMode,slug:n.slug,metadata:n.metadata}}),(function(e){return Object(r.b)({addSuccessToast:Wo.e,addDangerToast:Wo.c,addWarningToast:Wo.g,onUndo:Bo.r,onRedo:Bo.p,setEditMode:hr.D,showBuilderPane:hr.J,setColorSchemeAndUnsavedChanges:hr.B,fetchFaveStar:hr.u,saveFaveStar:hr.z,savePublished:hr.A,fetchCharts:hr.t,updateDashboardTitle:Bo.t,updateCss:hr.M,onChange:hr.w,onSave:hr.y,setMaxUndoHistoryExceeded:hr.G,maxUndoHistoryToast:hr.v,logEvent:Vo.logEvent,setRefreshFrequency:hr.H,dashboardInfoChanged:Ho.b,dashboardTitleChanged:Bo.l},e)}))(Uo);const Ko={onClick:T.a.func.isRequired,className:T.a.string,label:T.a.string};class Qo extends k.a.PureComponent{constructor(e){var t;super(e),this.handleClick=x()(t=this.handleClick).call(t,this)}handleClick(e){e.preventDefault();const{onClick:t}=this.props;t(e)}render(){const{className:e,label:t}=this.props;return Object(ut.d)("div",{className:"icon-button",onClick:this.handleClick,tabIndex:"0",role:"button"},Object(ut.d)("span",{className:e}),t&&Object(ut.d)("span",{className:"icon-button-label"},t))}}Qo.propTypes=Ko,Qo.defaultProps={className:null,label:null};var Yo=n(174),Jo=n(196),Xo=n.n(Jo),Zo=n(978),ei=n(64),ti=n.n(ei);function ni(e){var t,n;return C()(t=Tt()(n=kt()(e)).call(n,([e,t])=>({col:e,op:ti()(t)?"IN":"==",val:t}))).call(t,e=>null!==e.val)}const ri=({child:e,layout:t,scope:n,activeFilters:r,filterId:o,extraFormData:i})=>{var a,s,c;const d=null==(a=t[e])?void 0:null==(s=a.meta)?void 0:s.chartId;if(t[e].type===E.a){var u;if(l()(u=n.excluded).call(u,d))return;return r[o]||(r[o]={scope:[],values:i}),void r[o].scope.push(d)}v()(c=t[e].children).call(c,e=>ri({child:e,layout:t,scope:n,activeFilters:r,filterId:o,extraFormData:i}))},oi=(e,t)=>{var n,r;return z()(n=C()(r=m()(e)).call(r,e=>e[t])).call(n,(e,n)=>({...e,[n.id]:t?n[t]:n}),{})},ii=({chartConfiguration:e,nativeFilters:t,dataMask:n,layout:r})=>{var o;const i={};return v()(o=m()(n)).call(o,({id:n,extraFormData:o})=>{var a,s,l,c,d,u;const h=null!=(a=null!=(s=null==t?void 0:null==(l=t[n])?void 0:l.scope)?s:null==e?void 0:null==(c=e[n])?void 0:null==(d=c.crossFilters)?void 0:d.scope)?a:{rootPath:[X.h],excluded:[n]};v()(u=h.rootPath).call(u,e=>{var t;v()(t=r[e].children).call(t,e=>{ri({child:e,layout:r,scope:h,activeFilters:i,filterId:n,extraFormData:o})})})}),i},ai={},si={};var li,ci=n(67),di=n.n(ci),ui=n(148),hi=n(309),pi=n(478),fi=n(51),bi=n(167);!function(e){e[e.all=0]="all",e[e.specific=1]="specific"}(li||(li={}));const mi=({type:e,meta:t},n)=>{var r,o;return!(e!==E.l&&e!==E.a&&e!==E.e||n&&"filter_box"===(null==(r=n[null==t?void 0:t.chartId])?void 0:null==(o=r.formData)?void 0:o.viz_type))},gi=(e,t,n,r,o)=>{var i;let a=t;if(mi(e,r)&&e.type!==E.e&&l()(o).call(o,e.id)){const n={key:e.id,title:e.meta.sliceNameOverride||e.meta.sliceName||e.meta.text||e.id.toString(),children:[]};t.children.push(n),a=n}v()(i=e.children).call(i,e=>gi(n[e],a,n,r,o))},vi=(e,t,n,r)=>{v()(n).call(n,n=>{var o,i;vi(e,t,((e,t)=>{var n,r,o;return[...(null==(n=e[t])?void 0:n.children)||[],...Tt()(r=C()(o=m()(e)).call(o,n=>n.parents&&n.parents[n.parents.length-1]===t&&!mi(e[n.parents[n.parents.length-1]]))).call(r,({id:e})=>e)]})(t,n),r),(null==(o=t[n])?void 0:o.type)!==E.a||l()(r).call(r,null==(i=t[n])?void 0:i.meta.chartId)||e.push(n)})},yi=(e,t)=>{const n=[];return vi(n,t,[...e.rootPath],[...e.excluded]),[...new h.a(n)]},Oi=(e,t)=>{var n,r;if(!e.length)return{rootPath:[],excluded:[]};const o=Tt()(n=C()(e).call(e,e=>{var n;return(null==(n=t[e])?void 0:n.type)===E.a})).call(n,e=>{var n;const r=[X.h,...(null==(n=t[e])?void 0:n.parents)||[]];return C()(r).call(r,e=>mi(t[e]))});Ft()(o).call(o,(e,t)=>e.length-t.length);const i=Tt()(o).call(o,e=>e[o[0].length-1]),a=[];return v()(r=kt()(t)).call(r,([t,n])=>{var r;const o=n.parents||[];n.type===E.a&&null!=(r=[X.h,...o])&&q()(r).call(r,n=>((t,n)=>l()(i).call(i,t)&&!l()(e).call(e,n))(n,t))&&a.push(n.meta.chartId)}),{rootPath:[...new h.a(i)],excluded:a}},Si=e=>({rootPath:[X.h],excluded:e?[e]:[]});var Ci=({formScope:e,initialScope:t,forceUpdate:n,updateFormValues:r,chartId:i})=>{const[a,s]=Object(w.useState)([X.h]),{treeData:l,layout:c}=function(e){const t=Object(o.d)(({dashboardLayout:{present:e}})=>e),n=Object(o.d)(({charts:e})=>e),r={children:[],key:X.h,type:E.e,title:Object(_.e)("All panels")},i=Object(w.useMemo)(()=>{var n;return z()(n=m()(t)).call(n,(t,n)=>{const{id:r,parents:o=[],type:i,meta:a}=n;return i===E.a&&e!==(null==a?void 0:a.chartId)?[...new h.a([...t,...o,r])]:t},[])},[t,e]);return Object(w.useMemo)(()=>{gi(t[X.h],r,t,n,i)},[n,t,r]),{treeData:[r],layout:t}}(i),[d,u]=Object(w.useState)(!0),p=Object(w.useMemo)(()=>yi({...e||t},c),[e,t,c]);return Object(ut.d)(Yt.C,{checkable:!0,selectable:!1,onExpand:e=>{s(e),u(!1)},expandedKeys:a,autoExpandParent:d,onCheck:e=>{n();const t=Oi(e,c);void 0!==i&&(t.excluded=[...new h.a([...t.excluded,i])]),r({scope:t})},checkedKeys:p,treeData:l})};const ji=$.g.div`
  display: flex;
  flex-direction: column;
  & > * {
    margin-bottom: ${({theme:e})=>e.gridUnit}px;
  }
`,xi=Object($.g)(Yt.k.Item)`
  margin-bottom: 0;
`;var wi=({pathToFormValue:e=[],formScoping:t,formScope:n,forceUpdate:r,scope:o,updateFormValues:i,chartId:a})=>{const s=o||Si(a),l=((e,t)=>{var n;return!e||e.rootPath[0]===X.h&&!C()(n=e.excluded).call(n,e=>e!==t).length})(s,a)?li.all:li.specific;return Object(ut.d)(ji,null,Object(ut.d)(xi,{name:[...e,"scoping"],initialValue:l},Object(ut.d)(ir.a.Group,{onChange:({target:{value:e}})=>{if(e===li.all){const e=Si(a);i({scope:e})}r()}},Object(ut.d)(ir.a,{value:li.all},Object(_.e)("Apply to all panels")),Object(ut.d)(ir.a,{value:li.specific},Object(_.e)("Apply to specific panels")))),Object(ut.d)(Yt.D.Text,{type:"secondary"},(null!=t?t:l)===li.specific?Object(_.e)("Only selected panels will be affected by this filter"):Object(_.e)("All panels with this column will be affected by this filter")),(null!=t?t:l)===li.specific&&Object(ut.d)(Ci,{updateFormValues:i,initialScope:s,formScope:n,forceUpdate:r,chartId:a}),Object(ut.d)(xi,{name:[...e,"scope"],hidden:!0,initialValue:s}))};var ki=n(5176),Ri=n.n(ki);const Ti=()=>{const[,e]=k.a.useState({});return k.a.useCallback(()=>e({}),[])},_i=(e,t,n)=>{const r=e.getFieldValue("filters")||{};e.setFields([{name:"filters",value:{...r,[t]:{...r[t],...n}}}])},Fi=e=>({value:e.id,label:e.table_name});var Ii=({form:e,scope:t,chartId:n})=>{const r=Ti(),o=e.getFieldValue("scope"),i=e.getFieldValue("scoping");return Object(ut.d)(wi,{updateFormValues:t=>{((e,t)=>{e.setFieldsValue({...t})})(e,{...t})},scope:t,chartId:n,formScope:o,forceUpdate:r,formScoping:i})},Mi=n(5177),Pi=n.n(Mi),zi=n(3363);const Ei=[];function Di(){return Object(o.d)(e=>{var t,n;return(null==(t=e.dashboardInfo)?void 0:null==(n=t.metadata)?void 0:n.native_filter_configuration)||Ei})}var Ni=n(3374);var qi={name:"ihui0v",styles:"text-align:left;& .ant-alert-action{align-self:center;}"},Ai={name:"zjik7",styles:"display:flex"};function Li({title:e,onConfirm:t,onDismiss:n,children:r}){return Object(ut.d)(Xn.a,{closable:!1,type:"warning",key:"alert",message:e,css:qi,description:r,action:Object(ut.d)("div",{css:Ai},Object(ut.d)(En.a,{key:"cancel",buttonSize:"small",buttonStyle:"secondary",onClick:n},Object(_.e)("Keep editing")),Object(ut.d)(En.a,{key:"submit",buttonSize:"small",buttonStyle:"primary",onClick:t},Object(_.e)("Yes, cancel")))})}var Ui=({onCancel:e,handleSave:t,onDismiss:n,onConfirmCancel:r,getFilterTitle:o,unsavedFiltersIds:i,saveAlertVisible:a})=>a?Object(ut.d)(Li,{key:"cancel-confirm",title:`${i.length} ${Object(_.e)("unsaved filters")}`,onConfirm:r,onDismiss:n},Object(_.e)("Are you sure you want to cancel?")," ",(()=>{const e=Tt()(i).call(i,e=>`"${o(e)}"`);if(0===e.length)return"";if(1===e.length)return e[0];const t=e.pop();return`${e.join(", ")} ${Object(_.e)("and")} ${t}`})()," ",Object(_.e)("will not be saved.")):Object(ut.d)(k.a.Fragment,null,Object(ut.d)(En.a,{key:"cancel",buttonStyle:"secondary",onClick:e},Object(_.e)("Cancel")),Object(ut.d)(En.a,{key:"submit",buttonStyle:"primary",onClick:t},Object(_.e)("Save"))),$i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Hi=n(14),Bi=n(10),Wi=n(28),Vi=n(9),Gi=n(818),Ki={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var Qi=function(e){var t=e.icon,n=e.className,r=e.onClick,o=e.style,i=e.primaryColor,a=e.secondaryColor,s=Object(Wi.a)(e,["icon","className","onClick","style","primaryColor","secondaryColor"]),l=Ki;if(i&&(l={primaryColor:i,secondaryColor:a||Object(Gi.b)(i)}),Object(Gi.f)(),Object(Gi.g)(Object(Gi.c)(t),"icon should be icon definiton, but got ".concat(t)),!Object(Gi.c)(t))return null;var c=t;return c&&"function"==typeof c.icon&&(c=Object(Vi.a)(Object(Vi.a)({},c),{},{icon:c.icon(l.primaryColor,l.secondaryColor)})),Object(Gi.a)(c.icon,"svg-".concat(c.name),Object(Vi.a)({className:n,onClick:r,style:o,"data-icon":c.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s))};Qi.displayName="IconReact",Qi.getTwoToneColors=function(){return Object(Vi.a)({},Ki)},Qi.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Ki.primaryColor=t,Ki.secondaryColor=n||Object(Gi.b)(t),Ki.calculated=!!n};var Yi=Qi;function Ji(e){var t=Object(Gi.d)(e),n=Object(Hi.a)(t,2),r=n[0],o=n[1];return Yi.setTwoToneColors({primaryColor:r,secondaryColor:o})}Ji("#1890ff");var Xi=w.forwardRef((function(e,t){var n=e.className,r=e.icon,o=e.spin,i=e.rotate,a=e.tabIndex,s=e.onClick,l=e.twoToneColor,c=Object(Wi.a)(e,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),d=L()("anticon",Object(Bi.a)({},"anticon-".concat(r.name),Boolean(r.name)),n),u=L()({"anticon-spin":!!o||"loading"===r.name}),h=a;void 0===h&&s&&(h=-1);var p=i?{msTransform:"rotate(".concat(i,"deg)"),transform:"rotate(".concat(i,"deg)")}:void 0,f=Object(Gi.d)(l),b=Object(Hi.a)(f,2),m=b[0],g=b[1];return w.createElement("span",Object.assign({role:"img","aria-label":r.name},c,{ref:t,tabIndex:h,onClick:s,className:d}),w.createElement(Yi,{className:u,icon:r,primaryColor:m,secondaryColor:g,style:p}))}));Xi.displayName="AntdIcon",Xi.getTwoToneColor=function(){var e=Yi.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Xi.setTwoToneColor=Ji;var Zi=Xi,ea=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:$i}))};ea.displayName="PlusOutlined";var ta=w.forwardRef(ea);const na=$.g.span`
  cursor: pointer;
  color: ${({theme:e})=>e.colors.primary.dark1};
  &:hover {
    color: ${({theme:e})=>e.colors.primary.dark2};
  }
`,ra=$.g.span`
  width: ${180}px;
  white-space: normal;
  color: ${({theme:e})=>e.colors.grayscale.dark1};
`,oa=$.g.div`
  color: ${({theme:e})=>e.colors.primary.dark1};
  padding: ${({theme:e})=>2*e.gridUnit}px;
  border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  cursor: pointer;

  &:hover {
    color: ${({theme:e})=>e.colors.primary.base};
  }
`,ia=Object($.g)(zn.a)`
  color: ${({theme:e})=>e.colors.grayscale.light3};
`,aa=$.g.span`
  transition: color ${({theme:e})=>e.transitionTiming}s;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;

  @keyframes tabTitleRemovalAnimation {
    0%,
    90% {
      opacity: 1;
    }
    95%,
    100% {
      opacity: 0;
    }
  }

  &.removed {
    color: ${({theme:e})=>e.colors.warning.dark1};
    transform-origin: top;
    animation-name: tabTitleRemovalAnimation;
    animation-duration: ${Ni.b}s;
  }
`,sa=Object($.g)(B.b)`
  ${({theme:e})=>`\n    height: 100%;\n\n    & > .ant-tabs-content-holder {\n      border-left: 1px solid ${e.colors.grayscale.light2};\n      padding-right: ${4*e.gridUnit}px;\n      overflow-x: hidden;\n      overflow-y: auto;\n    }\n\n    & > .ant-tabs-content-holder ~ .ant-tabs-content-holder {\n      border: none;\n    }\n\n    &.ant-tabs-card > .ant-tabs-nav .ant-tabs-ink-bar {\n      visibility: hidden;\n    }\n\n    &.ant-tabs-left\n      > .ant-tabs-content-holder\n      > .ant-tabs-content\n      > .ant-tabs-tabpane {\n      padding-left: ${4*e.gridUnit}px;\n      margin-top: ${4*e.gridUnit}px;\n    }\n\n    .ant-tabs-nav-list {\n      overflow-x: hidden;\n      overflow-y: auto;\n      padding-top: ${2*e.gridUnit}px;\n      padding-right: ${e.gridUnit}px;\n      padding-bottom: ${3*e.gridUnit}px;\n      padding-left: ${3*e.gridUnit}px;\n      width: 270px;\n    }\n\n    // extra selector specificity:\n    &.ant-tabs-card > .ant-tabs-nav .ant-tabs-tab {\n      min-width: 180px;\n      margin: 0 ${2*e.gridUnit}px 0 0;\n      padding: ${e.gridUnit}px\n        ${2*e.gridUnit}px;\n\n      &:hover,\n      &-active {\n        color: ${e.colors.grayscale.dark1};\n        border-radius: ${e.borderRadius}px;\n        background-color: ${e.colors.secondary.light4};\n\n        .ant-tabs-tab-remove > svg {\n          color: ${e.colors.grayscale.base};\n          transition: all 0.3s;\n        }\n      }\n    }\n\n    .ant-tabs-tab-btn {\n      text-align: left;\n      justify-content: space-between;\n      text-transform: unset;\n    }\n\n    .ant-tabs-nav-more {\n      display: none;\n    }\n\n    .ant-tabs-extra-content {\n      width: 100%;\n    }\n  `}
`,la=$.g.div`
  ${({theme:e})=>`\n    color: ${e.colors.grayscale.dark1};\n    font-size: ${e.typography.sizes.l}px;\n    padding-top: ${4*e.gridUnit}px;\n    padding-right: ${4*e.gridUnit}px;\n    padding-left: ${4*e.gridUnit}px;\n  `}
`;var ca=({onEdit:e,getFilterTitle:t,onChange:n,currentFilterId:r,filterIds:o=[],removedFilters:i=[],restoreFilter:a,children:s})=>Object(ut.d)(sa,{id:"native-filters-tabs",type:"editable-card",tabPosition:"left",onChange:n,activeKey:r,onEdit:e,hideAdd:!0,tabBarExtraContent:{left:Object(ut.d)(la,null,Object(_.e)("Filters")),right:Object(ut.d)(oa,{onClick:()=>{e("","add"),Tn()(()=>{const e=document.getElementById("native-filters-tabs");if(e){const t=e.getElementsByClassName("ant-tabs-nav-list")[0];t.scrollTop=t.scrollHeight}},0)}},Object(ut.d)(ta,null)," ",Object(ut.d)("span",{"aria-label":"Add filter"},Object(_.e)("Add filter")))}},Tt()(o).call(o,e=>Object(ut.d)(B.b.TabPane,{tab:Object(ut.d)(aa,{className:i[e]?"removed":""},Object(ut.d)(ra,null,i[e]?Object(_.e)("(Removed)"):t(e)),i[e]&&Object(ut.d)(na,{role:"button",tabIndex:0,onClick:()=>a(e)},Object(_.e)("Undo?"))),key:e,closeIcon:i[e]?Object(ut.d)(k.a.Fragment,null):Object(ut.d)(ia,{name:"trash"})},s(e)))),da=n(90),ua=n.n(da),ha=n(539),pa=n.n(ha),fa=n(183),ba=n.n(fa),ma=n(103);const ga=(e,t,n=((...e)=>io()([...e])))=>(...r)=>{const o=n(...r);if(t.has(o))return t.get(o);const i=e(...r);return t.set(o,i),i},va=new pa.a,ya=ga(An.a.get,va,({endpoint:e})=>e||"");function Oa({value:e,initialId:t,onChange:n,isMulti:r,resource:o,searchColumn:i,transformItem:a,onError:s,defaultOptions:l=!0}){return Object(w.useEffect)(()=>{null!=t&&ya({endpoint:`/api/v1/${o}/${t}`}).then(e=>{const{result:t}=e.json,r=a?a(t):t;n&&n(r)}).catch(e=>{404===(null==e?void 0:e.status)&&n&&n(void 0)})},[o,t]),Object(ut.d)(Jt.b,{value:e,onChange:n,isMulti:r,loadOptions:function(t){const n=i?ba.a.encode({filters:[{col:i,opr:"ct",value:t}]}):ba.a.encode({filter:e});return ya({endpoint:`/api/v1/${o}/?q=${n}`}).then(e=>{var t,n;return Ft()(t=Tt()(n=e.json.result).call(n,a)).call(t,(e,t)=>e.label.localeCompare(t.label))},async e=>(s(await Object(ma.a)(e)),[]))},defaultOptions:l,cacheOptions:!0,filterOption:null})}var Sa=n(3376),Ca=n(1310),ja=n(871),xa=n(218),wa=n(3364),ka=n(1299);var Ra=n(194);const Ta=new pa.a,_a=ga(An.a.get,Ta,({endpoint:e})=>e||"");function Fa({form:e,filterId:t,datasetId:n,value:r,onChange:o}){const{addDangerToast:i}=Object(Ra.b)(),a=Object(w.useCallback)(()=>{e.setFields([{name:["filters",t,"column"],touched:!1,value:null}])},[e,t]);return function(e,t){const n=Object(ka.a)(e);Object(w.useEffect)(()=>{e!==n&&t(n,e)},[e,n,t])}(n,e=>{null!=e&&a()}),Object(ut.d)(Jt.b,{key:null==n?"*no dataset*":n,isDisabled:null==n,value:r,onChange:o,isMulti:!1,loadOptions:function(){return null==n?[]:_a({endpoint:`/api/v1/dataset/${n}`}).then(({json:{result:e}})=>{var t,n;const o=Ft()(t=Tt()(n=e.columns).call(n,e=>e.column_name)).call(t,(e,t)=>e.localeCompare(t));return l()(o).call(o,r)||a(),o},async e=>{const{error:t,message:n}=await Object(ma.a)(e);let r=n||t||Object(_.e)("An error has occurred");return"Forbidden"===n&&(r=Object(_.e)("You do not have permission to edit this dashboard")),i(r),[]})},defaultOptions:!0,cacheOptions:!0})}var Ia=n(179),Ma=n(569);const Pa=Object($.g)(Zn.b)`
  margin-bottom: 0;
`;function za({disabled:e,forceUpdate:t,form:n,filterId:r,filterType:o,filterToEdit:i,formFilter:a}){var s,l;const c=null!=(s=((e={})=>{var t,n;return null!=(t=null==(n=Ri()(e.controlPanelSections))?void 0:z()(n).call(n,(e,{controlSetRows:t=[]})=>[...e,...Ri()(t)],[]))?t:[]})(Object(Ma.a)().get(o)))?s:[],d={};return v()(l=C()(c).call(c,e=>{var t;return(null==e?void 0:null==(t=e.config)?void 0:t.renderTrigger)&&"sortAscending"!==e.name})).call(l,o=>{var s,l,c,u;const h=null!=(s=null==i?void 0:null==(l=i.controlValues)?void 0:l[o.name])?s:null==o?void 0:null==(c=o.config)?void 0:c.default,p=Object(ut.d)(k.a.Fragment,null,Object(ut.d)(Pa,{name:["filters",r,"requiredFirst",o.name],hidden:!0,initialValue:(null==o?void 0:null==(u=o.config)?void 0:u.requiredFirst)&&(null==i?void 0:i.requiredFirst)}),Object(ut.d)(wo.a,{key:o.name,placement:"left",title:o.config.affectsDataMask&&e&&Object(_.e)('Populate "Default value" to enable this control')},Object(ut.d)(Wa,{key:o.name,name:["filters",r,"controlValues",o.name],initialValue:h,valuePropName:"checked",colon:!1},Object(ut.d)(Yt.e,{disabled:o.config.affectsDataMask&&e,onChange:({target:{checked:e}})=>{o.config.requiredFirst&&_i(n,r,{requiredFirst:{...null==a?void 0:a.requiredFirst,[o.name]:e}}),o.config.resetConfig&&_i(n,r,{defaultDataMask:null}),t()}},o.config.label," ",o.config.description&&Object(ut.d)(Ia.a,{placement:"top",label:o.config.name,tooltip:o.config.description})))));d[o.name]={element:p,checked:h}}),d}const Ea=$.g.div`
  display: flex;
  flex-direction: column;
  height: 400px; // arbitrary
  text-align: center;
  justify-content: center;
  align-items: center;
  color: ${({theme:e})=>e.colors.grayscale.base};
`;var Da=({onClick:e})=>Object(ut.d)(Ea,null,Object(ut.d)("p",null,Object(_.e)("You have removed this filter.")),Object(ut.d)("div",null,Object(ut.d)(En.a,{buttonStyle:"primary",onClick:e},Object(_.e)("Restore Filter")))),Na=n(1449);var qa=({filterId:e,hasDataset:t,form:n,setDataMask:r,formData:o,enableNoResults:i})=>{var a;const[s,l]=Object(w.useState)(t),c=(n.getFieldValue("filters")||{})[e],d=null==c?void 0:c.defaultValueQueriesData;return Object(w.useEffect)(()=>{l(!(!t||null!==d))},[t,d]),s?Object(ut.d)(M.a,{position:"inline-centered"}):Object(ut.d)(Na.a,{height:25,width:250,appSection:pi.a.FILTER_CONFIG_MODAL,behaviors:[pi.b.NATIVE_FILTER],formData:o,queriesData:t?null==c?void 0:c.defaultValueQueriesData:[{data:[{}]}],chartType:null==c?void 0:c.filterType,hooks:{setDataMask:r},enableNoResults:i,filterState:null==(a=c.defaultDataMask)?void 0:a.filterState})};const Aa=$.g.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  min-height: ${({theme:e})=>10*e.gridUnit}px;
  padding-top: ${({theme:e})=>2*e.gridUnit+2}px;

  .checkbox {
    margin-bottom: ${({theme:e,checked:t})=>t?e.gridUnit:0}px;
  }

  & > div {
    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  }
`,La=e=>{const{checked:t=!1,title:n,children:r,onChange:o}=e,[i,a]=Object(w.useState)(t);return Object(ut.d)(Aa,{checked:i},Object(ut.d)(Yt.e,{className:"checkbox",checked:i,onChange:e=>{const t=e.target.checked;a(t),o&&o(t)}},n),i&&r)},{TabPane:Ua}=B.c,$a=$.g.div`
  display: flex;
  flex-direction: row-reverse;
  justify-content: space-between;
`,Ha=$.g.div`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  width: 100%;
`,Ba=Object($.g)(Zn.b)`
  width: 49%;
  margin-bottom: ${({theme:e})=>4*e.gridUnit}px;

  & .ant-form-item-label {
    padding-bottom: 0px;
  }

  & .ant-form-item-control-input {
    min-height: ${({theme:e})=>10*e.gridUnit}px;
  }
`,Wa=Object($.g)(Zn.b)`
  margin-bottom: 0px;
  padding-bottom: 0px;
  min-width: 50%;

  & .ant-form-item-label {
    padding-bottom: 0px;
  }

  .ant-form-item-control-input-content > div > div {
    height: auto;
  }

  & .ant-form-item-control-input {
    min-height: ${({theme:e})=>10*e.gridUnit}px;
  }
`,Va=$.g.span`
  color: ${({theme:e})=>e.colors.grayscale.base};
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  text-transform: uppercase;
`,Ga=Object($.g)(Zn.b)`
  margin-bottom: 0;
`,Ka=Object($.g)(xa.a)`
  margin-left: ${({theme:e})=>-4*e.gridUnit-1}px;
  margin-right: ${({theme:e})=>-4*e.gridUnit}px;
  border-left: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  border-radius: 0px;

  .ant-collapse-header {
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    margin-top: -1px;
    border-radius: 0px;
  }

  .ant-collapse-content {
    border: 0px;
  }

  .ant-collapse-content-box {
    padding-top: ${({theme:e})=>2*e.gridUnit}px;
  }

  &.ant-collapse > .ant-collapse-item {
    border: 0px;
    border-radius: 0px;
  }
`,Qa=Object($.g)(B.c)`
  .ant-tabs-nav {
    position: sticky;
    top: 0px;
    background: white;
    z-index: 1;
  }

  .ant-tabs-nav-list {
    padding: 0px;
  }

  .ant-form-item-label {
    padding-bottom: 0px;
  }
`,Ya=$.g.span`
  color: ${({theme:e})=>e.colors.error.base};
  font-family: SimSun, sans-serif;
  margin-right: ${({theme:e})=>e.gridUnit-1}px;
  &:before {
    content: '*';
  }
`,Ja={configuration:{key:"configuration",name:Object(_.e)("Configuration")},scoping:{key:"scoping",name:Object(_.e)("Scoping")}},Xa={basic:{key:"basic",name:Object(_.e)("Basic")},advanced:{key:"advanced",name:Object(_.e)("Advanced")}},Za=["filter_timegrain","filter_timecolumn","filter_groupby"],es=["filter_select","filter_range"],ts=["enableEmptyFilter","multiSelect"],ns={[Object(_.e)("Select filter")]:Object(_.e)("Value"),[Object(_.e)("Range filter")]:Object(_.e)("Numerical range"),[Object(_.e)("Time filter")]:Object(_.e)("Time range"),[Object(_.e)("Time column")]:Object(_.e)("Time column"),[Object(_.e)("Time grain")]:Object(_.e)("Time grain"),[Object(_.e)("Group By")]:Object(_.e)("Group by")},rs=({filterId:e,filterToEdit:t,removed:n,restoreFilter:r,form:i,parentFilters:a},s)=>{var c,d,u,h,p,b,g,v,y,O,S,j,x,k,R,T,F,I,M,P,z,E,D,N;const[A,L]=Object(w.useState)([]),[U,$]=Object(w.useState)(Ja.configuration.key),[H,B]=Object(w.useState)(Xa.basic.key),[W,V]=Object(w.useState)(!(null==t||null==(c=t.defaultDataMask)||null==(d=c.filterState)||!d.value)),G=Ti(),[K,Q]=Object(w.useState)(),Y=Object(w.useMemo)(()=>{},[]),J=(null==(u=i.getFieldValue("filters"))?void 0:u[e])||Y,X=Object(hi.a)().items,Z=Tt()(h=C()(p=kt()(X)).call(p,([,{value:e}])=>{var t;return null==(t=e.behaviors)?void 0:l()(t).call(t,pi.b.NATIVE_FILTER)})).call(h,([e])=>e),ee=Object(o.d)(({datasources:e})=>e),te=!(null==(b=X[null==J?void 0:J.filterType])||null==(g=b.value)||!g.datasourceCount),ne=te&&!l()(Za).call(Za,null==J?void 0:J.filterType),re=!(null==(v=X[null==J?void 0:J.filterType])||null==(y=v.value)||!y.enableNoResults),oe=null==J?void 0:null==(O=J.dataset)?void 0:O.value;Object(w.useEffect)(()=>{oe&&ne&&ya({endpoint:`/api/v1/dataset/${oe}`}).then(e=>{var t,n,r;L(null==(t=e.json)?void 0:null==(n=t.result)?void 0:n.metrics);const o=null==(r=e.json)?void 0:r.result;o.type=o.datasource_type,o.filter_select=!0,Q(o)}).catch(e=>{Object(Wo.c)(e.message)})},[oe,ne]),Object(w.useImperativeHandle)(s,()=>({changeTab(e){$(e)}}));const ie=ne&&!!A.length,ae=!te||oe&&((null==J?void 0:J.column)||!ne),se=l()(es).call(es,null==J?void 0:J.filterType),le=l()(us).call(us,null==J?void 0:J.filterType),ce=null==(S=null==J?void 0:J.isDataDirty)||S;((e,t)=>{var n;const r=Ti(),o=(e.getFieldValue("filters")||{})[t];Object(w.useEffect)(()=>{_i(e,t,{isDataDirty:!0,defaultValueQueriesData:null}),r()},[e,null==o?void 0:o.filterType,null==o?void 0:o.column,null==o?void 0:null==(n=o.dataset)?void 0:n.value,io()(null==o?void 0:o.adhoc_filters),null==o?void 0:o.time_range,r,t])})(i,e);const de=Object(w.useCallback)(()=>{var t,n;if(!te||null==J||null==(t=J.dataset)||!t.value)return void G();const r=Object(Zo.c)({datasetId:null==J?void 0:null==(n=J.dataset)?void 0:n.value,groupby:null==J?void 0:J.column,...J});_i(i,e,{defaultValueQueriesData:null,isDataDirty:!1}),G(),Object(Yo.getChartDataRequest)({formData:r,force:!1,requestParams:{dashboardId:0}}).then(t=>{if(Object(fi.c)(fi.a.GLOBAL_ASYNC_QUERIES)){const n="result"in t?t.result[0]:t;Object(wa.a)(n).then(t=>{_i(i,e,{defaultValueQueriesData:t}),G()}).catch(e=>{console.error(e.message||e.error||Object(_.e)("Check configuration"))})}else _i(i,e,{defaultValueQueriesData:t.result}),G()})},[e,G,i,J,te]),ue=Tt()(j=m()(ee)).call(j,Fi),he=null!=(x=null==t?void 0:null==(k=t.targets[0])?void 0:k.datasetId)?x:1===ue.length?ue[0].value:void 0,pe=null==t?void 0:null==(R=t.targets[0])?void 0:null==(T=R.column)?void 0:T.name,fe=Object(Zo.c)({datasetId:oe,groupby:ne?null==J?void 0:J.column:void 0,...J});Object(w.useEffect)(()=>{te&&ae&&W&&ce&&de()},[te,ae,W,J,ce,de]);const be=Object(w.useCallback)(({error:e,message:t})=>{let n=t||e||Object(_.e)("An error has occurred");"Forbidden"===t&&(n=Object(_.e)("You do not have permission to edit this dashboard")),Object(Wo.c)(n)},[]),me=Tt()(a).call(a,e=>({value:e.id,label:e.title})),ge=q()(me).call(me,({value:e})=>e===(null==t?void 0:t.cascadeParentIds[0])),ve=!!ge,ye=!(null==t||!t.adhoc_filters)||!(null==t||!t.time_range),Oe="boolean"==typeof(null==t?void 0:null==(F=t.controlValues)?void 0:F.sortAscending),Se=!te||!ce&&ae,Ce=J?za({disabled:!1,forceUpdate:G,form:i,filterId:e,filterType:J.filterType,filterToEdit:t,formFilter:J}):{},je=t=>{var n;const r=null==(n=i.getFieldValue("filters"))?void 0:n[e].controlValues;_i(i,e,{controlValues:{...r,sortAscending:t}}),G()};let xe=ve||ye||Oe;var we,ke;xe||(xe=Or()(we=C()(ke=f()(Ce)).call(ke,e=>!l()(ts).call(ts,e))).call(we,e=>Ce[e].checked));return Object(w.useEffect)(()=>{const e=[Xa.basic.key];xe&&e.push(Xa.advanced.key),B(e)},[xe]),n?Object(ut.d)(Da,{onClick:()=>r(e)}):Object(ut.d)(Qa,{activeKey:U,onChange:e=>$(e),centered:!0},Object(ut.d)(Ua,{tab:Ja.configuration.name,key:Ja.configuration.key,forceRender:!0},Object(ut.d)($a,null,Object(ut.d)(Ba,{name:["filters",e,"name"],label:Object(ut.d)(Va,null,Object(_.e)("Filter name")),initialValue:null==t?void 0:t.name,rules:[{required:!n,message:Object(_.e)("Name is required")}]},Object(ut.d)(Yt.l,ds("name-input"))),Object(ut.d)(Ba,$n()({name:["filters",e,"filterType"],rules:[{required:!n,message:Object(_.e)("Name is required")}],initialValue:(null==t?void 0:t.filterType)||"filter_select",label:Object(ut.d)(Va,null,Object(_.e)("Filter Type"))},ds("filter-type")),Object(ut.d)(Jt.h,{options:Tt()(Z).call(Z,e=>{var t;const n=null==(t=X[e])?void 0:t.value.name;return{value:e,label:(n?ns[n]:void 0)||n}}),onChange:({value:t})=>{_i(i,e,{filterType:t,defaultDataMask:null}),G()}}))),te&&Object(ut.d)(Ha,null,Object(ut.d)(Ba,$n()({name:["filters",e,"dataset"],initialValue:{value:he},label:Object(ut.d)(Va,null,Object(_.e)("Dataset")),rules:[{required:!n,message:Object(_.e)("Dataset is required")}]},ds("datasource-input")),Object(ut.d)(Oa,{initialId:he,resource:"dataset",searchColumn:"table_name",transformItem:Fi,isMulti:!1,onError:be,defaultOptions:Tt()(I=m()(ee)).call(I,Fi),onChange:t=>{oe&&(null==t?void 0:t.value)!==oe&&_i(i,e,{defaultDataMask:null,column:null}),G()}})),ne&&Object(ut.d)(Ba,{name:["filters",e,"column"],initialValue:pe,label:Object(ut.d)(Va,null,Object(_.e)("Column")),rules:[{required:!n,message:Object(_.e)("Field is required")}]},Object(ut.d)(Fa,{form:i,filterId:e,datasetId:oe,onChange:()=>{_i(i,e,{defaultDataMask:null}),G()}}))),Object(ut.d)(Ka,{activeKey:H,onChange:e=>B(e),expandIconPosition:"right"},Object(ut.d)(xa.a.Panel,{forceRender:!0,header:Xa.basic.name,key:Xa.basic.key},ae&&Object(ut.d)(Ga,{name:["filters",e,"defaultValueFormData"],hidden:!0,initialValue:fe}),Object(ut.d)(Ga,{name:["filters",e,"defaultValueQueriesData"],hidden:!0,initialValue:null}),Object(ut.d)(La,{title:Object(_.e)("Filter has default value"),checked:W,onChange:e=>V(e)},Object(ut.d)(Wa,{name:["filters",e,"defaultDataMask"],initialValue:null==t?void 0:t.defaultDataMask,label:Object(ut.d)(Va,null,Object(_.e)("Default Value")),required:!0,rules:[{required:!0},{validator:(e,t)=>{var n,r;return!(null==(n=t.filterState)||!n.value)||null!=(r=J.controlValues)&&r.defaultToFirstItem?ua.a.resolve():ua.a.reject(new Error(Object(_.e)("Default value is required")))}}]},Se?Object(ut.d)(qa,{setDataMask:t=>{_i(i,e,{defaultDataMask:t}),i.validateFields([["filters",e,"defaultDataMask"]]),G()},filterId:e,hasDataset:te,form:i,formData:fe,enableNoResults:re}):Object(_.e)('Fill all required fields to enable "Default Value"'))),Tt()(M=C()(P=f()(Ce)).call(P,e=>l()(ts).call(ts,e))).call(M,e=>Ce[e].element),Object(ut.d)(Wa,{name:["filters",e,"isInstant"],initialValue:(null==t?void 0:t.isInstant)||!1,valuePropName:"checked",colon:!1},Object(ut.d)(Yt.e,null,Object(_.e)("Apply changes instantly")))),(te&&se||ie)&&Object(ut.d)(xa.a.Panel,{forceRender:!0,header:Xa.advanced.name,key:Xa.advanced.key},le&&Object(ut.d)(La,{title:Object(_.e)("Filter is hierarchical"),checked:ve,onChange:t=>{t&&Tn()(()=>i.validateFields([["filters",e,"parentFilter"]]),0)}},Object(ut.d)(Wa,{name:["filters",e,"parentFilter"],label:Object(ut.d)(Va,null,Object(_.e)("Parent filter")),initialValue:ge,required:!0,rules:[{required:!0,message:Object(_.e)("Parent filter is required")}]},Object(ut.d)(Jt.h,{placeholder:Object(_.e)("None"),options:me,isClearable:!0}))),Tt()(z=C()(E=f()(Ce)).call(E,e=>!l()(ts).call(ts,e))).call(z,e=>Ce[e].element),te&&se&&Object(ut.d)(La,{title:Object(_.e)("Pre-filter available values"),checked:ye,onChange:t=>{t&&Tn()(()=>i.validateFields([["filters",e,"adhoc_filters"]]),0)}},Object(ut.d)(Wa,{name:["filters",e,"adhoc_filters"],initialValue:null==t?void 0:t.adhoc_filters,required:!0,rules:[{required:!0,message:Object(_.e)("Pre-filter is required")}]},Object(ut.d)(Sa.a,{columns:(null==K?void 0:null==(D=K.columns)?void 0:C()(D).call(D,e=>e.filterable))||[],savedMetrics:(null==K?void 0:K.metrics)||[],datasource:K,onChange:t=>{_i(i,e,{adhoc_filters:t}),G()},label:Object(ut.d)("span",null,Object(ut.d)(Ya,null),Object(ut.d)(Va,null,Object(_.e)("Pre-filter")))})),Object(ut.d)(Wa,{name:["filters",e,"time_range"],label:Object(ut.d)(Va,null,Object(_.e)("Time range")),initialValue:(null==t?void 0:t.time_range)||"No filter"},Object(ut.d)(Ca.a,{name:"time_range",onChange:t=>{_i(i,e,{time_range:t}),G()}}))),"filter_range"!==(null==J?void 0:J.filterType)&&Object(ut.d)(La,{title:Object(_.e)("Sort filter values"),onChange:e=>je(e||void 0),checked:Oe},Object(ut.d)(Ha,null,Object(ut.d)(Ba,{name:["filters",e,"controlValues","sortAscending"],initialValue:null==t?void 0:null==(N=t.controlValues)?void 0:N.sortAscending,label:Object(ut.d)(Va,null,Object(_.e)("Sort type"))},Object(ut.d)(Jt.h,{form:i,filterId:e,name:"sortAscending",options:[{value:!0,label:Object(_.e)("Sort ascending")},{value:!1,label:Object(_.e)("Sort descending")}],onChange:({value:e})=>je(e)})),ie&&Object(ut.d)(Ba,{name:["filters",e,"sortMetric"],initialValue:null==t?void 0:t.sortMetric,label:Object(ut.d)(Va,null,Object(_.e)("Sort Metric"))},Object(ut.d)(ja.a,{form:i,filterId:e,name:"sortMetric",options:Tt()(A).call(A,e=>{var t;return{value:e.metric_name,label:null!=(t=e.verbose_name)?t:e.metric_name}}),onChange:t=>{void 0!==t&&(_i(i,e,{sortMetric:t}),G())}}))))))),Object(ut.d)(Ua,{tab:Ja.scoping.name,key:Ja.scoping.key,forceRender:!0},Object(ut.d)(wi,{updateFormValues:t=>_i(i,e,t),pathToFormValue:["filters",e],forceUpdate:G,scope:null==t?void 0:t.scope,formScope:null==J?void 0:J.scope,formScoping:null==J?void 0:J.scoping})))};var os=Object(w.forwardRef)(rs),is=n(5178),as=n.n(is);const ss=Object($.g)(bi.a)`
  min-width: 700px;
  .ant-modal-body {
    padding: 0px;
  }
`,ls=$.g.div`
  display: flex;
  height: 700px;
  flex-direction: row;
  .filters-list {
    width: ${({theme:e})=>50*e.gridUnit}px;
    overflow: auto;
  }
`,cs=Object($.g)(Yt.k)`
  width: 100%;
`,ds=Object(zi.a)("filters-config-modal"),us=["filter_select"];function hs({isOpen:e,initialFilterId:t,createNewOnOpen:n,onSave:r,onCancel:o}){const[i]=Yt.k.useForm(),a=Object(w.useRef)(),s=Di(),c=function(){const e=Di();return Object(w.useMemo)(()=>z()(e).call(e,(e,t)=>(e[t.id]=t,e),{}),[e])}(),[d,u]=Object(w.useState)([]),[h,p]=Object(w.useState)({}),[f,b]=Object(w.useState)(!1),g=Object(w.useMemo)(()=>{var e;return C()(e=Pi()([...Object(Ni.f)(s),...d])).call(e,e=>{var t;return!h[e]||(null==(t=h[e])?void 0:t.isPending)})},[s,d,h]),v=null!=t?t:g[0],[y,O]=Object(w.useState)(v),[S,j]=Object(w.useState)({filters:{}}),x=C()(d).call(d,e=>!h[e]),k=e=>{const t=h[e];null!=t&&t.isPending&&clearTimeout(t.timerId),p(t=>({...t,[e]:null}))},R=Object(w.useCallback)(()=>{const e=Object(Ni.e)();u([...d,e]),O(e),b(!1)},[d,O]);((e,t,n)=>{const r=Object(ka.a)(e);Object(w.useEffect)(()=>{n&&e&&!r&&t()},[n,e,r,t])})(e,R,n),((e,t,n,r)=>{Object(w.useEffect)(()=>{const o=e[t];if(o&&!o.isPending){const o=as()(n,n=>!e[n]&&n!==t);-1!==o&&r(n[o])}},[t,e,n])})(h,y,g,O);const T=Object(Ni.d)(p,b,R),F=()=>{i.resetFields(),u([]),O(v),p({}),b(!1)},I=e=>{var t,n,r,o;return null!=(t=null!=(n=null==(r=S.filters[e])?void 0:r.name)?n:null==(o=c[e])?void 0:o.name)?t:Object(_.e)("New filter")},M=e=>{var t,n;return Tt()(t=C()(n=C()(g).call(g,t=>t!==e&&!h[t])).call(n,e=>{var t;return l()(us).call(us,S.filters[e]?S.filters[e].filterType:null==(t=c[e])?void 0:t.filterType)})).call(t,e=>({id:e,title:I(e)}))},P=async()=>{const e=await Object(Ni.g)(i,y,c,g,h,O);e?Object(Ni.c)(c,g,h,F,r,e)():a.current.changeTab("configuration")},E=()=>{F(),o()},D=()=>{x.length>0?b(!0):E()};return Object(ut.d)(ss,{visible:e,maskClosable:!1,title:Object(_.e)("Filters configuration"),width:"50%",destroyOnClose:!0,onCancel:D,onOk:P,centered:!0,footer:Object(ut.d)(Ui,{onDismiss:()=>b(!1),onCancel:D,getFilterTitle:I,handleSave:P,saveAlertVisible:f,unsavedFiltersIds:x,onConfirmCancel:E})},Object(ut.d)(H.a,null,Object(ut.d)(ls,null,Object(ut.d)(cs,{preserve:!1,form:i,onValuesChange:(e,t)=>{var n;e.filters&&Or()(n=m()(e.filters)).call(n,e=>null!=e.name)&&j(t),b(!1)},layout:"vertical"},Object(ut.d)(ca,{onEdit:T,onChange:O,getFilterTitle:I,currentFilterId:y,filterIds:g,removedFilters:h,restoreFilter:k},e=>Object(ut.d)(os,{ref:a,form:i,filterId:e,filterToEdit:c[e],removed:!!h[e],restoreFilter:k,parentFilters:M(e)}))))))}var ps=({isOpen:e,chartId:t,onClose:n})=>{var r,i;const a=Object(o.c)(),[s]=Yt.k.useForm(),l=Object(o.d)(({dashboardInfo:e})=>{var t;return null==e?void 0:null==(t=e.metadata)?void 0:t.chart_configuration}),c=null==l?void 0:null==(r=l[t])?void 0:null==(i=r.crossFilters)?void 0:i.scope,d=()=>{a(Object(Ho.c)({...l,[t]:{id:t,crossFilters:{scope:s.getFieldValue("scope")}}})),n()};return Object(ut.d)(bi.a,{visible:e,maskClosable:!1,title:Object(_.e)("Cross Filter Scoping"),width:"55%",destroyOnClose:!0,onCancel:n,onOk:d,centered:!0,footer:Object(ut.d)(k.a.Fragment,null,Object(ut.d)(En.a,{key:"cancel",buttonStyle:"secondary",onClick:n},Object(_.e)("Cancel")),Object(ut.d)(En.a,{key:"submit",buttonStyle:"primary",onClick:d},Object(_.e)("Save")))},Object(ut.d)(cs,{preserve:!1,form:s,layout:"vertical"},Object(ut.d)(Ii,{form:s,scope:c,chartId:t})))},fs=n(104),bs=n(3982);const ms={slice:T.a.object.isRequired,componentId:T.a.string.isRequired,dashboardId:T.a.number.isRequired,addDangerToast:T.a.func.isRequired,isCached:T.a.arrayOf(T.a.bool),cachedDttm:T.a.arrayOf(T.a.string),isExpanded:T.a.bool,updatedDttm:T.a.number,supersetCanExplore:T.a.bool,supersetCanShare:T.a.bool,supersetCanCSV:T.a.bool,sliceCanEdit:T.a.bool,toggleExpandSlice:T.a.func,forceRefresh:T.a.func,exploreChart:T.a.func,exportCSV:T.a.func},gs="cross_filter_scoping",vs="force_refresh",ys="toggle_chart_description",Os="explore_chart",Ss="export_csv",Cs="resize_label",js="download_as_image",xs="view_query",ws=$.g.div`
  padding: ${({theme:e})=>e.gridUnit/4}px
    ${({theme:e})=>1.5*e.gridUnit}px;

  .dot {
    display: block;
  }

  &:hover {
    cursor: pointer;
  }
`,ks=$.g.div`
  height: auto;
  margin: ${({theme:e})=>e.gridUnit}px 0;
  color: ${({theme:e})=>e.colors.grayscale.base};
  line-height: ${({theme:e})=>1.5*e.typography.sizes.m}px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
`,Rs=()=>Object(ut.d)(ws,null,Object(ut.d)("span",{className:"dot"}),Object(ut.d)("span",{className:"dot"}),Object(ut.d)("span",{className:"dot"}));class Ts extends k.a.PureComponent{constructor(e){var t,n,r;super(e),this.toggleControls=x()(t=this.toggleControls).call(t,this),this.refreshChart=x()(n=this.refreshChart).call(n,this),this.handleMenuClick=x()(r=this.handleMenuClick).call(r,this),this.state={showControls:!1,showCrossFilterScopingModal:!1}}refreshChart(){this.props.updatedDttm&&this.props.forceRefresh(di()(this.props).slice_id,this.props.dashboardId)}toggleControls(){this.setState(e=>({showControls:!e.showControls}))}handleMenuClick({key:e,domEvent:t}){switch(e){case vs:this.refreshChart();break;case gs:this.setState({showCrossFilterScopingModal:!0});break;case ys:this.props.toggleExpandSlice(di()(this.props).slice_id);break;case Os:this.props.exploreChart(di()(this.props).slice_id);break;case Ss:this.props.exportCSV(di()(this.props).slice_id);break;case Cs:this.props.handleToggleFullSize();break;case js:{const e=document.querySelector(".ant-dropdown:not(.ant-dropdown-hidden)");e.style.visibility="hidden",Object(ro.a)(".dashboard-component-chart-holder",di()(this.props).slice_name)(t).then(()=>{e.style.visibility="visible"});break}}}render(){var e,t;const{slice:n,isCached:r,cachedDttm:o,updatedDttm:i,componentId:a,addSuccessToast:s,addDangerToast:c,isFullSize:d,supersetCanShare:u}=this.props,p=Object(hi.a)().items,f=q()(e=C()(t=kt()(p)).call(t,([,{value:e}])=>{var t;return null==(t=e.behaviors)?void 0:l()(t).call(t,pi.b.INTERACTIVE_CHART)})).call(e,([e])=>e===n.viz_type),b=Tt()(o).call(o,e=>Fn.a.utc(e).fromNow()),m=i?Fn.a.utc(i).fromNow():"",g=Tt()(r).call(r,e=>e?Object(_.e)("Cached %s",b):m?Object(_.e)("Fetched %s",m):"")||"";let v=[...new h.a(g)];v=Tt()(v).call(v,(e,t)=>Object(ut.d)("div",{key:`tooltip-${t}`},v.length>1?`${Object(_.e)("Query")} ${t+1}: ${e}`:e));const y=d?Object(_.e)("Minimize chart"):Object(_.e)("Maximize chart"),O=Object(ut.d)(Yt.p,{onClick:this.handleMenuClick,selectable:!1},Object(ut.d)(Yt.p.Item,{key:vs,disabled:"loading"===this.props.chartStatus,style:{height:"auto",lineHeight:"initial"}},Object(_.e)("Force refresh"),Object(ut.d)(ks,null,v)),Object(ut.d)(Yt.p.Divider,null),n.description&&Object(ut.d)(Yt.p.Item,{key:ys},Object(_.e)("Toggle chart description")),this.props.supersetCanExplore&&Object(ut.d)(Yt.p.Item,{key:Os},Object(_.e)("View chart in Explore")),this.props.supersetCanExplore&&Object(ut.d)(Yt.p.Item,{key:xs},Object(ut.d)(Vn.a,{triggerNode:Object(ut.d)("span",null,Object(_.e)("View query")),modalTitle:Object(_.e)("View query"),modalBody:Object(ut.d)(bs.a,{latestQueryFormData:this.props.formData}),responsive:!0})),u&&Object(ut.d)(Wn,{url:co(window.location.pathname,Object(Dr.b)(),a),copyMenuItemTitle:Object(_.e)("Copy chart URL"),emailMenuItemTitle:Object(_.e)("Share chart by email"),emailSubject:Object(_.e)("Superset chart"),emailBody:Object(_.e)("Check out this chart: "),addSuccessToast:s,addDangerToast:c}),Object(ut.d)(Yt.p.Item,{key:Cs},y),Object(ut.d)(Yt.p.Item,{key:js},Object(_.e)("Download as image")),this.props.supersetCanCSV&&Object(ut.d)(Yt.p.Item,{key:Ss},Object(_.e)("Export CSV")),Object(fi.c)(fi.a.DASHBOARD_CROSS_FILTERS)&&f&&Object(ut.d)(Yt.p.Item,{key:gs},Object(_.e)("Cross-filter scoping")));return Object(ut.d)(k.a.Fragment,null,Object(ut.d)(ps,{chartId:n.slice_id,isOpen:this.state.showCrossFilterScopingModal,onClose:()=>this.setState({showCrossFilterScopingModal:!1})}),d&&Object(ut.d)(fs.a.FullscreenExitOutlined,{style:{fontSize:22},onClick:()=>{this.props.handleToggleFullSize()}}),Object(ut.d)(Yt.r,{overlay:O,trigger:["click"],placement:"bottomRight",dropdownAlign:{offset:[-40,4]},getPopupContainer:e=>e.closest(".dashboard-component-chart-holder")},Object(ut.d)("span",{id:`slice_${n.slice_id}-controls`,role:"button","aria-label":"More Options"},Object(ut.d)(Rs,null))))}}Ts.propTypes=ms,Ts.defaultProps={forceRefresh:()=>({}),toggleExpandSlice:()=>({}),exploreChart:()=>({}),exportCSV:()=>({}),cachedDttm:[],updatedDttm:null,isCached:[],isExpanded:!1,supersetCanExplore:!1,supersetCanShare:!1,supersetCanCSV:!1,sliceCanEdit:!1};var _s,Fs,Is=Ts,Ms=n(5179),Ps=n.n(Ms),zs=n(50);!function(e){e.NativeFilters="nativeFilters",e.CrossFilters="crossFilters"}(_s||(_s={})),function(e){e.Unset="UNSET",e.Applied="APPLIED",e.Incompatible="INCOMPATIBLE",e.CrossFilterApplied="CROSS_FILTER_APPLIED"}(Fs||(Fs={}));const Es=new h.a(m()(zs.o)),Ds=(e,t,n)=>{const r=t.columns[e],o=ti()(r)?r:[r];if(null==r||t.isDateFilter&&"No filter"===r||0===o.length)return[];if(t.isDateFilter&&Es.has(e)){var i;const t=z()(i=(e===zs.o.time_grain_sqla?n.time_grain_sqla:n.granularity)||[]).call(i,(e,[t,n])=>({...e,[t]:n}),{});return Tt()(o).call(o,e=>t[e]||e)}return o},Ns=e=>{var t,n,r;return new h.a(Tt()(t=(null==e?void 0:null==(n=e.queriesResponse)?void 0:null==(r=n[0])?void 0:r.applied_filters)||[]).call(t,e=>e.column))},qs=e=>{var t,n,r;return new h.a(Tt()(t=(null==e?void 0:null==(n=e.queriesResponse)?void 0:null==(r=n[0])?void 0:r.rejected_filters)||[]).call(t,e=>e.column))},As=(e,t,n,r)=>{var o,i;const a=r[e];if("loading"===a.chartStatus)return[];const s=Ns(a),c=qs(a),u=z()(o=C()(i=m()(t)).call(i,t=>t.chartId!==e)).call(o,(t,r)=>d()(t).call(t,((e,t,n,r,o)=>{var i,a;const s=(e,t)=>r.has(e)&&t.columns[e]?Fs.Applied:o.has(e)?Fs.Incompatible:Fs.Unset;return Tt()(i=C()(a=f()(t.columns)).call(a,n=>{var r;return l()(r=Object(Dr.d)({filterScope:t.scopes[n]})).call(r,e)})).call(i,e=>({column:e,name:t.labels[e]||e,value:Ds(e,t,n),status:s(e,t),path:t.directPathToFilter}))})(e,r,n[r.datasourceId]||{},s,c)),[]);return Ft()(u).call(u,(e,t)=>e.name.localeCompare(t.name)),u};var Ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},Us=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:Ls}))};Us.displayName="CheckCircleFilled";var $s=w.forwardRef(Us),Hs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},Bs=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:Hs}))};Bs.displayName="ExclamationCircleFilled";var Ws=w.forwardRef(Bs),Vs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]},name:"minus-circle",theme:"filled"},Gs=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:Vs}))};Gs.displayName="MinusCircleFilled";var Ks=w.forwardRef(Gs),Qs=n(235);const Ys=$.g.div`
  display: inline-block;
  color: ${({theme:e})=>e.colors.grayscale.light5};
  background: ${({theme:e})=>e.colors.grayscale.base};
  border-radius: 1em;
  vertical-align: text-top;
  padding: ${({theme:e})=>`${e.gridUnit}px ${2*e.gridUnit}px`};
  font-size: ${({theme:e})=>e.typography.sizes.m}px;
  font-weight: bold;
  min-width: 1em;
  min-height: 1em;
  line-height: 1em;
  vertical-align: middle;
  white-space: nowrap;

  svg {
    position: relative;
    top: -1px;
    color: ${({theme:e})=>e.colors.grayscale.light5};
    width: 1em;
    height: 1em;
    display: inline-block;
    vertical-align: middle;
  }

  &:hover {
    cursor: pointer;
    background: ${({theme:e})=>e.colors.grayscale.dark1};
  }

  &.has-cross-filters {
    background: ${({theme:e})=>e.colors.primary.base};
    &:hover {
      background: ${({theme:e})=>e.colors.primary.dark1};
    }
  }

  &.has-incompatible-filters {
    color: ${({theme:e})=>e.colors.grayscale.dark2};
    background: ${({theme:e})=>e.colors.alert.base};
    &:hover {
      background: ${({theme:e})=>e.colors.alert.dark1};
    }
    svg {
      color: ${({theme:e})=>e.colors.grayscale.dark2};
    }
  }

  &.filters-inactive {
    color: ${({theme:e})=>e.colors.grayscale.light5};
    background: ${({theme:e})=>e.colors.grayscale.light1};
    padding: ${({theme:e})=>e.gridUnit}px;
    text-align: center;
    height: 22px;
    width: 22px;

    &:hover {
      background: ${({theme:e})=>e.colors.grayscale.base};
    }
  }
`,Js=$.g.span`
  position: relative;
  margin-right: ${({theme:e})=>e.gridUnit}px;
  font-weight: ${({bold:e,theme:t})=>e?t.typography.weights.bold:"auto"};
  color: ${({color:e,theme:t})=>e||t.colors.grayscale.light5};
  display: flex;
  align-items: center;
  & > * {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`,Xs=$.g.i`
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: -${({theme:e})=>5*e.gridUnit}px;
`,Zs=$.g.button`
  cursor: pointer;
  display: flex;
  flex-wrap: wrap;
  text-align: left;
  padding: 0;
  border: none;
  background: none;
  outline: none;
  width: 100%;

  &::-moz-focus-inner {
    border: 0;
  }

  & i svg {
    color: transparent;
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }

  &:hover i svg {
    color: inherit;
  }
`,el=$.g.div`
  margin: 0 -${({theme:e})=>4*e.gridUnit}px;
`,tl=$.g.div`
  padding-left: ${({theme:e})=>6*e.gridUnit}px;
  margin: -${({theme:e})=>3*e.gridUnit}px 0;
`,nl=$.g.div`
  min-width: 200px;
  max-width: 300px;
  overflow-x: hidden;
`,rl=$.g.div`
  max-width: 100%;
  flex-grow: 1;
  overflow: auto;
  color: ${({theme:e})=>e.colors.grayscale.light5};
`;var ol={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},il=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:ol}))};il.displayName="SearchOutlined";var al=w.forwardRef(il),sl=n(147),ll=n.n(sl),cl=n(126);const dl=Object(_.e)("Please apply filter changes"),ul=e=>null==e?"":"string"==typeof e||"number"==typeof e?`${e}`:ti()(e)?e.join(", "):"object"==typeof e?io()(e):Object(_.e)("Unknown value"),hl=({filterSetFilterValues:e,dataMaskSelected:t})=>q()(e).call(e,({dataMask:e={}})=>{const n=kt()(t);return Ge()(n).call(n,([t,r])=>{var o;const i=Object(cl.f)(r.filterState,null==e?void 0:null==(o=e[t])?void 0:o.filterState),a=n.length===f()(null!=e?e:{}).length;return i&&a})});var pl=({indicator:{column:e,name:t,value:n,path:r=[]},onClick:o=(()=>{})})=>{const i=ul(n);return Object(ut.d)(Zs,{onClick:()=>o([...r,`LABEL-${e}`])},Object(ut.d)(Js,{bold:!0},Object(ut.d)(Xs,null,Object(ut.d)(al,null)),t,i?": ":""),Object(ut.d)(rl,null,i))};var fl=({appliedCrossFilterIndicators:e=[],appliedIndicators:t=[],incompatibleIndicators:n=[],unsetIndicators:r=[],onHighlightFilterSource:o,children:i})=>{const a=Object($.i)(),s=()=>{const r=[];return e.length&&r.push("appliedCrossFilters"),t.length&&r.push("applied"),n.length&&r.push("incompatible"),r.length?r:["unset"]},[l,c]=Object(w.useState)(()=>[...s()]);const d=e=>`${e.column} - ${e.name}`,u=Object(ut.d)(nl,null,Object(ut.d)(ut.b,{styles:Object(ut.c)(".filterStatusPopover{.ant-popover-inner{background-color:",a.colors.grayscale.dark2,"cc;.ant-popover-inner-content{padding-top:0;padding-bottom:0;}}&.ant-popover-placement-bottom,&.ant-popover-placement-bottomLeft,&.ant-popover-placement-bottomRight{&>.ant-popover-content>.ant-popover-arrow{border-top-color:",a.colors.grayscale.dark2,"cc;border-left-color:",a.colors.grayscale.dark2,"cc;}}&.ant-popover-placement-top,&.ant-popover-placement-topLeft,&.ant-popover-placement-topRight{&>.ant-popover-content>.ant-popover-arrow{border-bottom-color:",a.colors.grayscale.dark2,"cc;border-right-color:",a.colors.grayscale.dark2,"cc;}}&.ant-popover-placement-left,&.ant-popover-placement-leftTop,&.ant-popover-placement-leftBottom{&>.ant-popover-content>.ant-popover-arrow{border-top-color:",a.colors.grayscale.dark2,"cc;border-right-color:",a.colors.grayscale.dark2,"cc;}}&.ant-popover-placement-right,&.ant-popover-placement-rightTop,&.ant-popover-placement-rightBottom{&>.ant-popover-content>.ant-popover-arrow{border-bottom-color:",a.colors.grayscale.dark2,"cc;border-left-color:",a.colors.grayscale.dark2,"cc;}}&.ant-popover{color:",a.colors.grayscale.light4,";}}","")}),Object(ut.d)(el,null,Object(ut.d)(xa.a,{ghost:!0,light:!0,activeKey:l,onChange:function(e){c("string"==typeof e?[e]:e)}},e.length?Object(ut.d)(xa.a.Panel,{key:"appliedCrossFilters",header:Object(ut.d)(Js,{bold:!0,color:a.colors.primary.light1},Object(ut.d)(zn.a,{name:"cross-filter-badge",css:Object(ut.c)({fill:a.colors.primary.light1},"","")}),Object(_.e)("Applied Cross Filters (%d)",e.length))},Object(ut.d)(tl,{css:Object(ut.c)({paddingBottom:3*a.gridUnit},"","")},Tt()(e).call(e,e=>Object(ut.d)(pl,{key:d(e),indicator:e,onClick:o})))):null,t.length?Object(ut.d)(xa.a.Panel,{key:"applied",header:Object(ut.d)(Js,{bold:!0,color:a.colors.success.base},Object(ut.d)($s,null)," ",Object(_.e)("Applied Filters (%d)",t.length))},Object(ut.d)(tl,{css:Object(ut.c)({paddingBottom:3*a.gridUnit},"","")},Tt()(t).call(t,e=>Object(ut.d)(pl,{key:d(e),indicator:e,onClick:o})))):null,n.length?Object(ut.d)(xa.a.Panel,{key:"incompatible",header:Object(ut.d)(Js,{bold:!0,color:a.colors.alert.base},Object(ut.d)(Ws,null)," ",Object(_.e)("Incompatible Filters (%d)",n.length))},Object(ut.d)(tl,{css:Object(ut.c)({paddingBottom:3*a.gridUnit},"","")},Tt()(n).call(n,e=>Object(ut.d)(pl,{key:d(e),indicator:e,onClick:o})))):null,r.length?Object(ut.d)(xa.a.Panel,{key:"unset",header:Object(ut.d)(Js,{bold:!0,color:a.colors.grayscale.light1},Object(ut.d)(Ks,null)," ",Object(_.e)("Unset Filters (%d)",r.length)),disabled:!r.length},Object(ut.d)(tl,{css:Object(ut.c)({paddingBottom:3*a.gridUnit},"","")},Tt()(r).call(r,e=>Object(ut.d)(pl,{key:d(e),indicator:e,onClick:o})))):null)));return Object(ut.d)(Qs.a,{overlayClassName:"filterStatusPopover",content:u,onVisibleChange:function(e){e&&c(s())},placement:"bottom",trigger:"click"},i)};var bl=({appliedCrossFilterIndicators:e,appliedIndicators:t,unsetIndicators:n,incompatibleIndicators:r,onHighlightFilterSource:o})=>{if(!(e.length||t.length||r.length||n.length))return null;const i=!e.length&&!t.length&&!r.length;return Object(ut.d)(fl,{appliedCrossFilterIndicators:e,appliedIndicators:t,unsetIndicators:n,incompatibleIndicators:r,onHighlightFilterSource:o},Object(ut.d)(Ys,{className:L()("filter-counts",!!r.length&&"has-incompatible-filters",!!e.length&&"has-cross-filters",i&&"filters-inactive")},Object(ut.d)(zn.a,{name:"filter"}),!i&&Object(ut.d)("span",null,t.length+e.length),r.length?Object(ut.d)(k.a.Fragment,null," ",Object(ut.d)(fs.a.AlertSolid,null),Object(ut.d)("span",null,r.length)):null))};var ml=Object(o.b)(({datasources:e,dashboardFilters:t,nativeFilters:n,dashboardInfo:r,charts:o,dataMask:i,dashboardLayout:{present:a}},{chartId:s})=>{var l;const c=As(s,t,e,o),u=((e,t,n,r,o,i={})=>{const a=r[n],s=Ns(a),l=qs(a),c=({value:e,column:t,type:n=_s.NativeFilters})=>{const r=null!==e;return n===_s.CrossFilters&&r?Fs.CrossFilterApplied:!t&&r?Fs.Applied:t&&l.has(t)?Fs.Incompatible:t&&s.has(t)&&r?Fs.Applied:Fs.Unset};let u=[];var h,p;Object(F.b)(F.a.DASHBOARD_NATIVE_FILTERS)&&(u=Tt()(h=C()(p=m()(e.filters)).call(p,e=>{var t;return Or()(t=yi(e.scope,o)).call(t,e=>{var t,r;return(null==(t=o[e])?void 0:null==(r=t.meta)?void 0:r.chartId)===n})})).call(h,e=>{var n,r,o,i,a,s,l,d;const u=null==(n=e.targets[0])?void 0:null==(r=n.column)?void 0:r.name;let h=null!=(o=null!=(i=null==(a=t[e.id])?void 0:null==(s=a.filterState)?void 0:s.label)?i:null==(l=t[e.id])?void 0:null==(d=l.filterState)?void 0:d.value)?o:null;return ti()(h)||null===h||(h=[h]),{column:u,name:e.name,path:[e.id],status:c({value:h,column:u}),value:h}}));let f=[];var b,g,v;Object(F.b)(F.a.DASHBOARD_CROSS_FILTERS)&&(f=C()(b=Tt()(g=C()(v=m()(i)).call(v,e=>{var t,r;return Or()(t=yi(null==e?void 0:null==(r=e.crossFilters)?void 0:r.scope,o)).call(t,e=>{var t,r;return(null==(t=o[e])?void 0:null==(r=t.meta)?void 0:r.chartId)===n})})).call(g,e=>{var n,r,i,a,s,l,d,u,h;let p=null!=(n=null!=(r=null==(i=t[e.id])?void 0:null==(a=i.filterState)?void 0:a.label)?r:null==(s=t[e.id])?void 0:null==(l=s.filterState)?void 0:l.value)?n:null;return ti()(p)||null===p||(p=[p]),{name:null==(d=q()(h=m()(o)).call(h,t=>{var n;return(null==t?void 0:null==(n=t.meta)?void 0:n.chartId)===e.id}))?void 0:null==(u=d.meta)?void 0:u.sliceName,path:[`${e.id}`],status:c({value:p,type:_s.CrossFilters}),value:p}})).call(b,e=>e.status===Fs.CrossFilterApplied));return d()(f).call(f,u)})(n,i,s,o,a,null==(l=r.metadata)?void 0:l.chart_configuration),h=Ps()((e=>{const t=[Fs.Applied,Fs.Unset,Fs.Incompatible];return Ft()(e).call(e,(e,n)=>O()(t).call(t,e.status)-O()(t).call(t,n.status))})([...c,...u]),(e,t)=>e.column===t.column&&e.name===t.name&&(e.status!==Fs.Applied||t.status!==Fs.Applied)),p=C()(h).call(h,e=>e.status===Fs.CrossFilterApplied);return{chartId:s,appliedIndicators:C()(h).call(h,e=>e.status===Fs.Applied),appliedCrossFilterIndicators:p,unsetIndicators:C()(h).call(h,e=>e.status===Fs.Unset),incompatibleIndicators:C()(h).call(h,e=>e.status===Fs.Incompatible)}},e=>Object(r.b)({onHighlightFilterSource:hr.C},e))(bl);const gl=Object(_.e)("Annotation layers are still loading."),vl=Object(_.e)("One ore more annotation layers failed loading."),yl=Object($.g)(zn.a)`
  fill: ${({theme:e})=>e.colors.grayscale.light5};
  & circle {
    fill: ${({theme:e})=>e.colors.primary.base};
  }
`;var Ol=({innerRef:e=null,forceRefresh:t=(()=>({})),updateSliceName:n=(()=>({})),toggleExpandSlice:r=(()=>({})),exploreChart:i=(()=>({})),exportCSV:a=(()=>({})),editMode:s=!1,annotationQuery:l={},annotationError:c={},cachedDttm:d=null,updatedDttm:u=null,isCached:h=[],isExpanded:p=[],sliceName:f="",supersetCanExplore:b=!1,supersetCanShare:g=!1,supersetCanCSV:v=!1,sliceCanEdit:y=!1,slice:O,componentId:S,dashboardId:C,addSuccessToast:j,addDangerToast:x,handleToggleFullSize:w,isFullSize:R,chartStatus:T,formData:F})=>{const I=Object(o.d)(e=>{var t,n;return null==(t=e.dataMask[null==O?void 0:O.slice_id])?void 0:null==(n=t.filterState)?void 0:n.value});return Object(ut.d)("div",{className:"chart-header",ref:e},Object(ut.d)("div",{className:"header-title"},Object(ut.d)(Dn.a,{title:f||(s?"---":""),canEdit:s,emptyText:"",onSaveTitle:n,showTooltip:!1}),!!m()(l).length&&Object(ut.d)(wo.a,{id:"annotations-loading-tooltip",placement:"top",title:gl},Object(ut.d)("i",{role:"img","aria-label":gl,className:"fa fa-refresh warning"})),!!m()(c).length&&Object(ut.d)(wo.a,{id:"annoation-errors-tooltip",placement:"top",title:vl},Object(ut.d)("i",{role:"img","aria-label":vl,className:"fa fa-exclamation-circle danger"}))),Object(ut.d)("div",{className:"header-controls"},!s&&Object(ut.d)(k.a.Fragment,null,I&&Object(ut.d)(wo.a,{placement:"top",title:Object(ut.d)(pl,{indicator:{value:I,name:Object(_.e)("Emitted values")}})},Object(ut.d)(yl,{name:"cross-filter-badge"})),Object(ut.d)(ml,{chartId:O.slice_id}),Object(ut.d)(Is,{slice:O,isCached:h,isExpanded:p,cachedDttm:d,updatedDttm:u,toggleExpandSlice:r,forceRefresh:t,exploreChart:i,exportCSV:a,supersetCanExplore:b,supersetCanShare:g,supersetCanCSV:v,sliceCanEdit:y,componentId:S,dashboardId:C,addSuccessToast:j,addDangerToast:x,handleToggleFullSize:w,isFullSize:R,chartStatus:T,formData:F}))))},Sl=n(3987);const Cl={height:T.a.number.isRequired};function jl({height:e}){return Object(ut.d)("div",{className:"missing-chart-container",style:{height:e+20}},Object(ut.d)("div",{className:"missing-chart-body"},Object(_.e)("There is no chart definition associated with this component, could it have been deleted?"),Object(ut.d)("br",null),Object(ut.d)("br",null),Object(_.e)("Delete this container and save to remove this message.")))}var xl;jl.propTypes=Cl;const wl={id:T.a.number.isRequired,componentId:T.a.string.isRequired,dashboardId:T.a.number.isRequired,width:T.a.number.isRequired,height:T.a.number.isRequired,updateSliceName:T.a.func.isRequired,isComponentVisible:T.a.bool,handleToggleFullSize:T.a.func.isRequired,chart:He.a.isRequired,formData:T.a.object.isRequired,datasource:T.a.object.isRequired,slice:He.g.isRequired,sliceName:T.a.string.isRequired,timeout:T.a.number.isRequired,filters:T.a.object.isRequired,refreshChart:T.a.func.isRequired,logEvent:T.a.func.isRequired,toggleExpandSlice:T.a.func.isRequired,changeFilter:T.a.func.isRequired,setFocusedFilterField:T.a.func.isRequired,unsetFocusedFilterField:T.a.func.isRequired,editMode:T.a.bool.isRequired,isExpanded:T.a.bool.isRequired,isCached:T.a.bool,supersetCanExplore:T.a.bool.isRequired,supersetCanShare:T.a.bool.isRequired,supersetCanCSV:T.a.bool.isRequired,sliceCanEdit:T.a.bool.isRequired,addSuccessToast:T.a.func.isRequired,addDangerToast:T.a.func.isRequired,ownState:T.a.object,filterState:T.a.object},kl=C()(xl=f()(wl)).call(xl,e=>"width"!==e&&"height"!==e),Rl=new h.a(["filter_box"]),Tl=$.g.div`
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
`;class _l extends k.a.Component{constructor(e){var t,n,r,o,i,a,s,l,c;super(e),this.state={width:e.width,height:e.height,descriptionHeight:0},this.changeFilter=x()(t=this.changeFilter).call(t,this),this.handleFilterMenuOpen=x()(n=this.handleFilterMenuOpen).call(n,this),this.handleFilterMenuClose=x()(r=this.handleFilterMenuClose).call(r,this),this.exploreChart=x()(o=this.exploreChart).call(o,this),this.exportCSV=x()(i=this.exportCSV).call(i,this),this.forceRefresh=x()(a=this.forceRefresh).call(a,this),this.resize=x()(s=this.resize).call(s,this),this.setDescriptionRef=x()(l=this.setDescriptionRef).call(l,this),this.setHeaderRef=x()(c=this.setHeaderRef).call(c,this)}shouldComponentUpdate(e,t){if(t.width!==this.state.width||t.height!==this.state.height||t.descriptionHeight!==this.state.descriptionHeight)return!0;if(e.isComponentVisible){if(e.chart.triggerQuery)return!0;if(e.isFullSize!==this.props.isFullSize)return clearTimeout(this.resizeTimeout),this.resizeTimeout=Tn()(this.resize,350),!1;e.width===this.props.width&&e.height===this.props.height||(clearTimeout(this.resizeTimeout),this.resizeTimeout=Tn()(this.resize,350));for(let t=0;t<kl.length;t+=1){const n=kl[t];if(!Object(cl.f)(e[n],this.props[n]))return!0}}return this.props.cacheBusterProp!==e.cacheBusterProp}componentWillUnmount(){clearTimeout(this.resizeTimeout)}componentDidUpdate(e){if(this.props.isExpanded!==e.isExpanded){const e=this.props.isExpanded&&this.descriptionRef?this.descriptionRef.offsetHeight:0;this.setState({descriptionHeight:e})}}getChartHeight(){const e=this.getHeaderHeight();return this.state.height-e-this.state.descriptionHeight}getHeaderHeight(){return this.headerRef&&this.headerRef.offsetHeight||22}setDescriptionRef(e){this.descriptionRef=e}setHeaderRef(e){this.headerRef=e}resize(){const{width:e,height:t}=this.props;this.setState(()=>({width:e,height:t}))}changeFilter(e={}){this.props.logEvent(Pn.a,{id:this.props.chart.id,columns:f()(e)}),this.props.changeFilter(this.props.chart.id,e)}handleFilterMenuOpen(e,t){this.props.setFocusedFilterField(e,t)}handleFilterMenuClose(e,t){this.props.unsetFocusedFilterField(e,t)}exploreChart(){this.props.logEvent(Pn.c,{slice_id:di()(this.props).slice_id,is_cached:this.props.isCached}),Object(ui.b)(this.props.formData)}exportCSV(){this.props.logEvent(Pn.d,{slice_id:di()(this.props).slice_id,is_cached:this.props.isCached}),Object(ui.c)({formData:this.props.formData,resultType:"results",resultFormat:"csv"})}forceRefresh(){return this.props.logEvent(Pn.e,{slice_id:di()(this.props).slice_id,is_cached:this.props.isCached}),this.props.refreshChart(this.props.chart.id,!0,this.props.dashboardId)}render(){const{id:e,componentId:t,dashboardId:n,chart:r,slice:o,datasource:i,isExpanded:a,editMode:s,filters:l,formData:c,updateSliceName:d,sliceName:u,toggleExpandSlice:h,timeout:p,supersetCanExplore:f,supersetCanShare:b,supersetCanCSV:m,sliceCanEdit:g,addSuccessToast:v,addDangerToast:y,ownState:O,filterState:S,handleToggleFullSize:C,isFullSize:j}=this.props,{width:x}=this.state;if(!r||!o)return Object(ut.d)(jl,{height:this.getChartHeight()});const{queriesResponse:w,chartUpdateEndTime:k,chartStatus:R}=r,T="loading"===R,_=(null==w?void 0:Tt()(w).call(w,({is_cached:e})=>e))||[],F=(null==w?void 0:Tt()(w).call(w,({cached_dttm:e})=>e))||[],I=Rl.has(o.viz_type),M=Object(Dr.e)(e)?function({activeFilters:e={},filterId:t}){var n;return z()(n=kt()(e)).call(n,(e,n)=>{const[r,{values:o}]=n,{chartId:i,column:a}=Object(Sr.a)(r);return i===t?{...e,[a]:o}:e},{})}({activeFilters:l,filterId:e}):{};return Object(ut.d)("div",{className:"chart-slice","data-test-chart-id":e,"data-test-viz-type":o.viz_type,"data-test-chart-name":o.slice_name},Object(ut.d)(Ol,{innerRef:this.setHeaderRef,slice:o,isExpanded:!!a,isCached:_,cachedDttm:F,updatedDttm:k,toggleExpandSlice:h,forceRefresh:this.forceRefresh,editMode:s,annotationQuery:r.annotationQuery,exploreChart:this.exploreChart,exportCSV:this.exportCSV,updateSliceName:d,sliceName:u,supersetCanExplore:f,supersetCanShare:b,supersetCanCSV:m,sliceCanEdit:g,componentId:t,dashboardId:n,filters:l,addSuccessToast:v,addDangerToast:y,handleToggleFullSize:C,isFullSize:j,chartStatus:r.chartStatus,formData:c}),a&&o.description_markeddown&&Object(ut.d)("div",{className:"slice_description bs-callout bs-callout-default",ref:this.setDescriptionRef,dangerouslySetInnerHTML:{__html:o.description_markeddown}}),Object(ut.d)("div",{className:L()("dashboard-chart",I&&"dashboard-chart--overflowable")},T&&Object(ut.d)(Tl,{style:{width:x,height:this.getChartHeight()}}),Object(ut.d)(Sl.a,{width:x,height:this.getChartHeight(),addFilter:this.changeFilter,onFilterMenuOpen:this.handleFilterMenuOpen,onFilterMenuClose:this.handleFilterMenuClose,annotationData:r.annotationData,chartAlert:r.chartAlert,chartId:e,chartStatus:R,datasource:i,dashboardId:n,initialValues:M,formData:c,ownState:O,filterState:S,queriesResponse:r.queriesResponse,timeout:p,triggerQuery:r.triggerQuery,vizType:o.viz_type})))}}_l.propTypes=wl,_l.defaultProps={isCached:!1,isComponentVisible:!0};const Fl={};var Il=Object(o.b)((function({charts:e,dashboardInfo:t,dashboardState:n,dashboardLayout:r,dataMask:o,datasources:i,sliceEntities:a,nativeFilters:s},c){var d,u,h;const{id:p}=c,f=e[p]||{},b=f&&f.form_data&&i[f.form_data.datasource]||{},{colorScheme:m,colorNamespace:g}=n,v=function({chart:e,charts:t,filters:n,nativeFilters:r,chartConfiguration:o,colorScheme:i,colorNamespace:a,sliceId:s,layout:c,dataMask:d}){var u,h;const p=In.b.getScale(i,a).getColorMap();if((ai[s]||{})===n&&(null==i||si[s].color_scheme===i)&&si[s].color_namespace===a&&Xo()(si[s].label_colors,p)&&si[s]&&void 0===d)return si[s];let f={};const b=ii({chartConfiguration:o,dataMask:d,layout:c,nativeFilters:r.filters}),m=Tt()(u=C()(h=kt()(b)).call(h,([,{scope:t}])=>l()(t).call(t,e.id))).call(u,([e])=>e);m.length&&(f={extra_form_data:Object(Zo.b)(d,t,m)});const g={...e.formData,...i&&{color_scheme:i},label_colors:p,extra_filters:ni(n),...f};return ai[s]=n,si[s]=g,g}({layout:r.present,chart:f,chartConfiguration:null==(d=t.metadata)?void 0:d.chart_configuration,charts:e,filters:Object(Dr.c)(p),colorScheme:m,colorNamespace:g,sliceId:p,nativeFilters:s,dataMask:o});return v.dashboardId=t.id,{chart:f,datasource:b,slice:a.slices[p],timeout:t.common.conf.SUPERSET_WEBSERVER_TIMEOUT,filters:Object(Dr.b)()||Fl,formData:v,editMode:n.editMode,isExpanded:!!n.expandedSlices[p],supersetCanExplore:!!t.superset_can_explore,supersetCanShare:!!t.superset_can_share,supersetCanCSV:!!t.superset_can_csv,sliceCanEdit:!!t.slice_can_edit,ownState:null==(u=o[p])?void 0:u.ownState,filterState:null==(h=o[p])?void 0:h.filterState}}),(function(e){return Object(r.b)({updateComponents:Bo.s,addSuccessToast:Wo.e,addDangerToast:Wo.c,toggleExpandSlice:hr.K,changeFilter:ur.h,setFocusedFilterField:hr.E,unsetFocusedFilterField:hr.L,refreshChart:Yo.refreshChart,logEvent:Vo.logEvent},e)}))(_l),Ml=n(362);const Pl={url:T.a.string,emailSubject:T.a.string,emailContent:T.a.string,addDangerToast:T.a.func.isRequired,placement:T.a.oneOf(["right","left","top","bottom"])};class zl extends k.a.Component{constructor(e){var t,n;super(e),this.state={shortUrl:""},this.onShortUrlSuccess=x()(t=this.onShortUrlSuccess).call(t,this),this.getCopyUrl=x()(n=this.getCopyUrl).call(n,this)}onShortUrlSuccess(e){this.setState(()=>({shortUrl:e}))}getCopyUrl(e){e.stopPropagation(),Object(uo.a)(this.props.url).then(this.onShortUrlSuccess).catch(this.props.addDangerToast)}renderPopover(){const e=Object(_.e)("%s%s",this.props.emailContent,this.state.shortUrl);return Object(ut.d)("div",{id:"shorturl-popover"},Object(ut.d)(Ml.a,{text:this.state.shortUrl,copyNode:Object(ut.d)("i",{className:"fa fa-clipboard",title:Object(_.e)("Copy to clipboard")})}),"  ",Object(ut.d)("a",{href:`mailto:?Subject=${this.props.emailSubject}%20&Body=${e}`},Object(ut.d)("i",{className:"fa fa-envelope"})))}render(){return Object(ut.d)(Qs.a,{trigger:"click",placement:this.props.placement,onClick:this.getCopyUrl,content:this.renderPopover()},Object(ut.d)("span",{className:"short-link-trigger btn btn-default btn-sm",role:"button"},Object(ut.d)("i",{className:"short-link-trigger fa fa-link"})," "))}}zl.defaultProps={url:window.location.href.substring(window.location.origin.length),placement:"left",emailSubject:"",emailContent:""},zl.propTypes=Pl;var El=Object(Ra.a)(zl),Dl=n(3465);const Nl={anchorLinkId:T.a.string.isRequired,filters:T.a.object,showShortLinkButton:T.a.bool,inFocus:T.a.bool,placement:T.a.oneOf(["right","left","top","bottom"])};class ql extends k.a.PureComponent{componentDidMount(){const e=Object(Dl.a)(),{anchorLinkId:t}=this.props;e&&t===e&&this.scrollToView()}UNSAFE_componentWillReceiveProps(e){const{inFocus:t=!1}=e;t&&this.scrollToView()}scrollToView(e=0){const{anchorLinkId:t}=this.props,n=document.getElementById(t);n&&Tn()(()=>{n.scrollIntoView({block:"center",behavior:"smooth"})},e)}render(){const{anchorLinkId:e,filters:t,showShortLinkButton:n,placement:r}=this.props;return Object(ut.d)("span",{className:"anchor-link-container",id:e},n&&Object(ut.d)(El,{url:co(window.location.pathname,t,e),emailSubject:Object(_.e)("Superset chart"),emailContent:Object(_.e)("Check out this chart in dashboard:"),placement:r}))}}ql.propTypes=Nl,ql.defaultProps={inFocus:!1,showShortLinkButton:!1,placement:"right",filters:{}};var Al=ql;const Ll={onDelete:T.a.func.isRequired};class Ul extends k.a.PureComponent{render(){const{onDelete:e}=this.props;return Object(ut.d)(Qo,{onClick:e,className:"fa fa-trash"})}}Ul.propTypes=Ll,Ul.defaultProps={};class $l extends k.a.PureComponent{render(){const{innerRef:e,position:t,children:n}=this.props;return Object(ut.d)("div",{ref:e,className:L()("hover-menu","left"===t&&"hover-menu--left","top"===t&&"hover-menu--top")},n)}}$l.defaultProps={position:"left",innerRef:null,children:null};var Hl=n(3818);var Bl={right:function(){return Object(ut.d)("div",{className:"resize-handle resize-handle--right"})},bottom:function(){return Object(ut.d)("div",{className:"resize-handle resize-handle--bottom"})},bottomRight:function(){return Object(ut.d)("div",{className:"resize-handle resize-handle--bottom-right"})}};const Wl={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!0,bottomLeft:!1,topLeft:!1};var Vl={widthAndHeight:Wl,widthOnly:{...Wl,right:!0,bottomRight:!1},heightOnly:{...Wl,bottom:!0,bottomRight:!1},notAdjustable:{...Wl,bottomRight:!1}};const Gl=Number.MAX_VALUE,Kl={id:T.a.string.isRequired,children:T.a.node,adjustableWidth:T.a.bool,adjustableHeight:T.a.bool,gutterWidth:T.a.number,widthStep:T.a.number,heightStep:T.a.number,widthMultiple:T.a.number,heightMultiple:T.a.number,minWidthMultiple:T.a.number,maxWidthMultiple:T.a.number,minHeightMultiple:T.a.number,maxHeightMultiple:T.a.number,staticHeight:T.a.number,staticHeightMultiple:T.a.number,staticWidth:T.a.number,staticWidthMultiple:T.a.number,onResizeStop:T.a.func,onResize:T.a.func,onResizeStart:T.a.func,editMode:T.a.bool.isRequired},Ql={children:null,adjustableWidth:!0,adjustableHeight:!0,gutterWidth:X.n,widthStep:X.k,heightStep:X.k,widthMultiple:null,heightMultiple:null,minWidthMultiple:1,maxWidthMultiple:Gl,minHeightMultiple:1,maxHeightMultiple:Gl,staticHeight:null,staticHeightMultiple:null,staticWidth:null,staticWidthMultiple:null,onResizeStop:null,onResize:null,onResizeStart:null},Yl=[X.k,X.k],Jl={right:"resizable-container-handle--right",bottom:"resizable-container-handle--bottom"};class Xl extends k.a.PureComponent{constructor(e){var t,n,r;super(e),this.state={isResizing:!1},this.handleResizeStart=x()(t=this.handleResizeStart).call(t,this),this.handleResize=x()(n=this.handleResize).call(n,this),this.handleResizeStop=x()(r=this.handleResizeStop).call(r,this)}handleResizeStart(e,t,n){const{id:r,onResizeStart:o}=this.props;o&&o({id:r,direction:t,ref:n}),this.setState(()=>({isResizing:!0}))}handleResize(e,t,n){const{onResize:r,id:o}=this.props;r&&r({id:o,direction:t,ref:n})}handleResizeStop(e,t,n,r){const{id:o,onResizeStop:i,widthStep:a,heightStep:s,widthMultiple:l,heightMultiple:c,adjustableHeight:d,adjustableWidth:u,gutterWidth:h}=this.props;if(i){const e=l+Math.round(r.width/(a+h)),t=c+Math.round(r.height/s);i({id:o,widthMultiple:u?e:null,heightMultiple:d?t:null}),this.setState(()=>({isResizing:!1}))}}render(){const{children:e,adjustableWidth:t,adjustableHeight:n,widthStep:r,heightStep:o,widthMultiple:i,heightMultiple:a,staticHeight:s,staticHeightMultiple:l,staticWidth:c,staticWidthMultiple:d,minWidthMultiple:u,maxWidthMultiple:h,minHeightMultiple:p,maxHeightMultiple:f,gutterWidth:b,editMode:m}=this.props,g={width:t?(r+b)*i-b:d&&d*r||c||void 0,height:n?o*a:l&&l*o||s||void 0};let v=Vl.notAdjustable;m&&t&&n?v=Vl.widthAndHeight:m&&t?v=Vl.widthOnly:m&&n&&(v=Vl.heightOnly);const{isResizing:y}=this.state;return Object(ut.d)(Hl.a,{enable:v,grid:Yl,minWidth:t?u*(r+b)-b:void 0,minHeight:n?p*o:void 0,maxWidth:t?Math.max(g.width,Math.min(Gl,h*(r+b)-b)):void 0,maxHeight:n?Math.max(g.height,Math.min(Gl,f*o)):void 0,size:g,onResizeStart:this.handleResizeStart,onResize:this.handleResize,onResizeStop:this.handleResizeStop,handleComponent:Bl,className:L()("resizable-container",y&&"resizable-container--resizing"),handleClasses:Jl},e)}}Xl.propTypes=Kl,Xl.defaultProps=Ql;var Zl=Xl;const ec={id:T.a.string.isRequired,parentId:T.a.string.isRequired,dashboardId:T.a.number.isRequired,component:He.b.isRequired,parentComponent:He.b.isRequired,index:T.a.number.isRequired,depth:T.a.number.isRequired,editMode:T.a.bool.isRequired,directPathToChild:T.a.arrayOf(T.a.string),directPathLastUpdated:T.a.number,focusedFilterScope:T.a.object,availableColumnCount:T.a.number.isRequired,columnWidth:T.a.number.isRequired,onResizeStart:T.a.func.isRequired,onResize:T.a.func.isRequired,onResizeStop:T.a.func.isRequired,deleteComponent:T.a.func.isRequired,updateComponents:T.a.func.isRequired,handleComponentDrop:T.a.func.isRequired},tc=k.a.forwardRef(({chartId:e,focusedFilterScope:t,nativeFilters:n,...r},o)=>{var i;const a=Object($.i)(),s=n.focusedFilterId;if(!t&&!s)return Object(ut.d)("div",$n()({ref:o},r));const c={borderColor:a.colors.primary.light2,opacity:1,boxShadow:`0px 0px ${2*a.gridUnit}px ${a.colors.primary.light2}`,pointerEvents:"auto"};var d;if(s){if(l()(d=n.filters[s].chartsInScope).call(d,e))return Object(ut.d)("div",$n()({ref:o,style:c},r))}else if(e===t.chartId||l()(i=Object(Dr.d)({filterScope:t.scope})).call(i,e))return Object(ut.d)("div",$n()({ref:o,style:c},r));return Object(ut.d)("div",$n()({ref:o,style:{opacity:.3,pointerEvents:"none"}},r))});class nc extends k.a.Component{static renderInFocusCSS(e){return Object(ut.d)("style",null,`label[for=${e}] + .Select .Select__control {\n                    border-color: #00736a;\n                    transition: border-color 1s ease-in-out;\n           }`)}static getDerivedStateFromProps(e,t){const{component:n,directPathToChild:r,directPathLastUpdated:o}=e,{label:i,chart:a}=function(e){const t={};if(e.length>0){const n=di()(e).call(e);for(;n.length;){const e=n.pop(),r=e.split("-")[0];if(t[r.toLowerCase()]=e,!l()(X.q).call(X.q,r))break}}return t}(r);return o!==t.directPathLastUpdated&&n.id===a?{outlinedComponentId:n.id,outlinedColumnName:i,directPathLastUpdated:o}:null}constructor(e){var t,n,r,o;super(e),this.state={isFocused:!1,outlinedComponentId:null,outlinedColumnName:null,directPathLastUpdated:0,isFullSize:!1},this.handleChangeFocus=x()(t=this.handleChangeFocus).call(t,this),this.handleDeleteComponent=x()(n=this.handleDeleteComponent).call(n,this),this.handleUpdateSliceName=x()(r=this.handleUpdateSliceName).call(r,this),this.handleToggleFullSize=x()(o=this.handleToggleFullSize).call(o,this)}componentDidMount(){this.hideOutline({},this.state)}componentDidUpdate(e,t){this.hideOutline(t,this.state)}hideOutline(e,t){const{outlinedComponentId:n}=t,{outlinedComponentId:r}=e;n&&!r&&Tn()(()=>{this.setState(()=>({outlinedComponentId:null,outlinedColumnName:null}))},2e3)}handleChangeFocus(e){this.setState(()=>({isFocused:e}))}handleDeleteComponent(){const{deleteComponent:e,id:t,parentId:n}=this.props;e(t,n)}handleUpdateSliceName(e){const{component:t,updateComponents:n}=this.props;n({[t.id]:{...t,meta:{...t.meta,sliceNameOverride:e}}})}handleToggleFullSize(){this.setState(e=>({isFullSize:!e.isFullSize}))}render(){const{isFocused:e}=this.state,{component:t,parentComponent:n,index:r,depth:o,availableColumnCount:i,columnWidth:a,onResizeStart:s,onResize:l,onResizeStop:c,handleComponentDrop:d,editMode:u,isComponentVisible:h,dashboardId:p,focusedFilterScope:f,nativeFilters:b}=this.props,m=n.type===E.b?n.meta.width||X.o:t.meta.width||X.o;let g=0,v=0;this.state.isFullSize?(g=window.innerWidth-32,v=window.innerHeight-32):(g=Math.floor(m*a+(m-1)*X.n-32),v=Math.floor(t.meta.height*X.k-32));const{chartId:y}=t.meta;return Object(ut.d)(bt,{component:t,parentComponent:n,orientation:n.type===E.j?"column":"row",index:r,depth:o,onDrop:d,disableDragDrop:e,editMode:u},({dropIndicatorProps:e,dragSourceRef:r})=>Object(ut.d)(Zl,{id:t.id,adjustableWidth:n.type===E.j,adjustableHeight:!0,widthStep:a,widthMultiple:m,heightStep:X.k,heightMultiple:t.meta.height,minWidthMultiple:X.o,minHeightMultiple:X.p,maxWidthMultiple:i+m,onResizeStart:s,onResize:l,onResizeStop:c,editMode:u},Object(ut.d)(tc,{chartId:y,focusedFilterScope:f,nativeFilters:b,ref:r,className:L()("dashboard-component","dashboard-component-chart-holder",this.state.outlinedComponentId?"fade-in":"fade-out",this.state.isFullSize&&"full-size")},!u&&Object(ut.d)(Al,{anchorLinkId:t.id,inFocus:!!this.state.outlinedComponentId}),!!this.state.outlinedComponentId&&nc.renderInFocusCSS(this.state.outlinedColumnName),Object(ut.d)(Il,{componentId:t.id,id:t.meta.chartId,dashboardId:p,width:g,height:v,sliceName:t.meta.sliceNameOverride||t.meta.sliceName||"",updateSliceName:this.handleUpdateSliceName,isComponentVisible:h,handleToggleFullSize:this.handleToggleFullSize,isFullSize:this.state.isFullSize}),u&&Object(ut.d)($l,{position:"top"},Object(ut.d)("div",null,Object(ut.d)(Ul,{onDelete:this.handleDeleteComponent})))),e&&Object(ut.d)("div",e)))}}nc.propTypes=ec,nc.defaultProps={directPathToChild:[],directPathLastUpdated:0};var rc=nc,oc=n(1003);const ic=Object($.g)(Yt.p.Item)`
  &.ant-menu-item {
    height: auto;
    line-height: 1.4;

    padding-top: ${({theme:e})=>e.gridUnit}px;
    padding-bottom: ${({theme:e})=>e.gridUnit}px;

    margin-top: 0;
    margin-bottom: 0;

    &:not(:last-child) {
      margin-bottom: 0;
    }

    &:hover {
      background: ${({theme:e})=>e.colors.grayscale.light3};
    }

    &.active {
      font-weight: ${({theme:e})=>e.typography.weights.bold};
      background: ${({theme:e})=>e.colors.grayscale.light2};
    }
  }

  &.ant-menu-item-selected {
    color: unset;
  }
`;var ac={name:"s5xdrg",styles:"display:flex;align-items:center"};var sc=e=>{const{value:t,options:n,onChange:r,renderButton:o=(e=>e.label),renderOption:i=(e=>Object(ut.d)("div",{className:e.className},e.label))}=e,a=Object($.i)(),s=q()(n).call(n,e=>e.value===t);return Object(ut.d)(Yt.i,{trigger:["click"],overlayStyle:{zIndex:a.zIndex.max},overlay:Object(ut.d)(Yt.p,{onClick:({key:e})=>r(e)},Tt()(n).call(n,e=>Object(ut.d)(ic,{id:"menu-item",key:e.value,className:L()("dropdown-item",{active:e.value===t})},i(e))))},Object(ut.d)("div",{role:"button",css:ac},s&&o(s),Object(ut.d)(zn.a,{name:"caret-down",css:Object(ut.c)({marginTop:a.gridUnit},"","")})))};const lc=[{value:"edit",label:Object(_.e)("Edit")},{value:"preview",label:Object(_.e)("Preview")}];class cc extends k.a.PureComponent{render(){const{id:e,value:t,onChange:n}=this.props;return Object(ut.d)(sc,{id:e,options:lc,value:t,onChange:n})}}class dc extends k.a.PureComponent{constructor(e){var t,n;super(e),this.state={isFocused:e.isFocused},this.setRef=x()(t=this.setRef).call(t,this),this.handleClick=x()(n=this.handleClick).call(n,this)}UNSAFE_componentWillReceiveProps(e){e.editMode&&e.isFocused&&!this.state.isFocused?(document.addEventListener("click",this.handleClick),document.addEventListener("drag",this.handleClick),this.setState({isFocused:!0})):this.state.isFocused&&!e.editMode&&(document.removeEventListener("click",this.handleClick),document.removeEventListener("drag",this.handleClick),this.setState({isFocused:!1}))}componentWillUnmount(){document.removeEventListener("click",this.handleClick),document.removeEventListener("drag",this.handleClick)}setRef(e){this.container=e}handleClick(e){if(!this.props.editMode)return;const{onChangeFocus:t,shouldFocus:n,disableClick:r}=this.props,o=n(e,this.container);r||!o||this.state.isFocused?!o&&this.state.isFocused&&(document.removeEventListener("click",this.handleClick),document.removeEventListener("drag",this.handleClick),this.setState(()=>({isFocused:!1})),t&&t(!1)):(document.addEventListener("click",this.handleClick),document.addEventListener("drag",this.handleClick),this.setState(()=>({isFocused:!0})),t&&t(!0))}render(){var e;const{children:t,menuItems:n,editMode:r,style:o}=this.props,{isFocused:i}=this.state;return Object(ut.d)("div",{ref:this.setRef,onClick:this.handleClick,role:"none",className:L()("with-popover-menu",r&&i&&"with-popover-menu--focused"),style:o},t,r&&i&&(null!=(e=null==n?void 0:n.length)?e:0)>0&&Object(ut.d)("div",{className:"popover-menu"},Tt()(n).call(n,(e,t)=>Object(ut.d)("div",{className:"menu-item",key:`menu-item-${t}`},e))))}}dc.defaultProps={children:null,disableClick:!1,onChangeFocus:null,menuItems:[],isFocused:!1,shouldFocus:(e,t)=>{var n;return(null==t?void 0:t.contains(e.target))||"menu-item"===e.target.id||"menu-item"===(null==(n=e.target.parentNode)?void 0:n.id)},style:null};const uc={id:T.a.string.isRequired,parentId:T.a.string.isRequired,component:He.b.isRequired,parentComponent:He.b.isRequired,index:T.a.number.isRequired,depth:T.a.number.isRequired,editMode:T.a.bool.isRequired,logEvent:T.a.func.isRequired,addDangerToast:T.a.func.isRequired,undoLength:T.a.number.isRequired,redoLength:T.a.number.isRequired,availableColumnCount:T.a.number.isRequired,columnWidth:T.a.number.isRequired,onResizeStart:T.a.func.isRequired,onResize:T.a.func.isRequired,onResizeStop:T.a.func.isRequired,deleteComponent:T.a.func.isRequired,handleComponentDrop:T.a.func.isRequired,updateComponents:T.a.func.isRequired},hc="# ✨Markdown\n## ✨Markdown\n### ✨Markdown\n\n<br />\n\nClick here to edit [markdown](https://bit.ly/1dQOfRK)",pc=Object(_.e)("This markdown component has an error.");class fc extends k.a.PureComponent{constructor(e){var t,n,r,o,i,a;super(e),this.state={isFocused:!1,markdownSource:e.component.meta.code,editor:null,editorMode:"preview",undoLength:e.undoLength,redoLength:e.redoLength},this.renderStartTime=Pn.q.getTimestamp(),this.handleChangeFocus=x()(t=this.handleChangeFocus).call(t,this),this.handleChangeEditorMode=x()(n=this.handleChangeEditorMode).call(n,this),this.handleMarkdownChange=x()(r=this.handleMarkdownChange).call(r,this),this.handleDeleteComponent=x()(o=this.handleDeleteComponent).call(o,this),this.handleResizeStart=x()(i=this.handleResizeStart).call(i,this),this.setEditor=x()(a=this.setEditor).call(a,this)}componentDidMount(){this.props.logEvent(Pn.m,{viz_type:"markdown",start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:Pn.q.getTimestamp()-this.renderStartTime})}static getDerivedStateFromProps(e,t){const{hasError:n,editorMode:r,markdownSource:o,undoLength:i,redoLength:a}=t,{component:s,undoLength:l,redoLength:c}=e;return l!==i||c!==a?{...t,undoLength:l,redoLength:c,markdownSource:s.meta.code,hasError:!1}:n||"preview"!==r||s.meta.code===o?t:{...t,markdownSource:s.meta.code}}static getDerivedStateFromError(){return{hasError:!0}}componentDidUpdate(e){!this.state.editor||e.component.meta.width===this.props.component.meta.width&&e.columnWidth===this.props.columnWidth||this.state.editor.resize(!0),this.props.editMode&&Gn.e.preload()}componentDidCatch(){this.state.editor&&"preview"===this.state.editorMode&&this.props.addDangerToast(Object(_.e)("This markdown component has an error. Please revert your recent changes."))}setEditor(e){e.getSession().setUseWrapMode(!0),this.setState({editor:e})}handleChangeFocus(e){const t=!!e,n=t?"edit":"preview";this.setState(()=>({isFocused:t})),this.handleChangeEditorMode(n)}handleChangeEditorMode(e){const t={...this.state,editorMode:e};"preview"===e&&(this.updateMarkdownContent(),t.hasError=!1),this.setState(t)}updateMarkdownContent(){const{updateComponents:e,component:t}=this.props;t.meta.code!==this.state.markdownSource&&e({[t.id]:{...t,meta:{...t.meta,code:this.state.markdownSource}}})}handleMarkdownChange(e){this.setState({markdownSource:e})}handleDeleteComponent(){const{deleteComponent:e,id:t,parentId:n}=this.props;e(t,n)}handleResizeStart(e){const{editorMode:t}=this.state,{editMode:n,onResizeStart:r}=this.props,o="edit"===t;r(e),n&&o&&this.updateMarkdownContent()}renderEditMode(){return Object(ut.d)(Gn.e,{onChange:this.handleMarkdownChange,width:"100%",height:"100%",showGutter:!1,editorProps:{$blockScrolling:!0},value:"string"==typeof this.state.markdownSource?this.state.markdownSource:hc,readOnly:!1,onLoad:this.setEditor})}renderPreviewMode(){const{hasError:e}=this.state;return Object(ut.d)(oc.a,{source:e?pc:this.state.markdownSource||hc})}render(){const{isFocused:e,editorMode:t}=this.state,{component:n,parentComponent:r,index:o,depth:i,availableColumnCount:a,columnWidth:s,onResize:l,onResizeStop:c,handleComponentDrop:d,editMode:u}=this.props,h=r.type===E.b?r.meta.width||X.o:n.meta.width||X.o,p="edit"===t;return Object(ut.d)(bt,{component:n,parentComponent:r,orientation:r.type===E.j?"column":"row",index:o,depth:i,onDrop:d,disableDragDrop:e,editMode:u},({dropIndicatorProps:t,dragSourceRef:o})=>Object(ut.d)(dc,{onChangeFocus:this.handleChangeFocus,menuItems:[Object(ut.d)(cc,{id:`${n.id}-mode`,value:this.state.editorMode,onChange:this.handleChangeEditorMode}),Object(ut.d)(Ul,{onDelete:this.handleDeleteComponent})],editMode:u},Object(ut.d)("div",{className:L()("dashboard-markdown",p&&"dashboard-markdown--editing")},Object(ut.d)(Zl,{id:n.id,adjustableWidth:r.type===E.j,adjustableHeight:!0,widthStep:s,widthMultiple:h,heightStep:X.k,heightMultiple:n.meta.height,minWidthMultiple:X.o,minHeightMultiple:X.p,maxWidthMultiple:a+h,onResizeStart:this.handleResizeStart,onResize:l,onResizeStop:c,editMode:!e&&u},Object(ut.d)("div",{ref:o,className:"dashboard-component dashboard-component-chart-holder"},u&&p?this.renderEditMode():this.renderPreviewMode()))),t&&Object(ut.d)("div",t)))}}fc.propTypes=uc,fc.defaultProps={};var bc=fc,mc=n(4709),gc=n.n(mc);const vc={position:T.a.oneOf(["left","top"]),innerRef:T.a.func,dotCount:T.a.number};class yc extends k.a.PureComponent{render(){var e,t;const{innerRef:n,position:r,dotCount:o}=this.props;return Object(ut.d)("div",{ref:n,className:L()("drag-handle","left"===r&&"drag-handle--left","top"===r&&"drag-handle--top")},Tt()(e=gc()(t=Array(o)).call(t,null)).call(e,(e,t)=>Object(ut.d)("div",{key:`handle-dot-${t}`,className:"drag-handle-dot"})))}}yc.propTypes=vc,yc.defaultProps={position:"left",innerRef:null,dotCount:8};var Oc=n(3539);function Sc(e){return Object(ut.d)("div",{className:L()("background-style-option",e.className)},`${e.label} background`)}function Cc(e){return Object(ut.d)("div",{className:L()("background-style-option",e.className)},e.label)}class jc extends k.a.PureComponent{render(){const{id:e,value:t,onChange:n}=this.props;return Object(ut.d)(sc,{id:e,options:Oc.a,value:t,onChange:n,renderButton:Sc,renderOption:Cc})}}const xc={id:T.a.string.isRequired,parentId:T.a.string.isRequired,component:He.b.isRequired,parentComponent:He.b.isRequired,index:T.a.number.isRequired,depth:T.a.number.isRequired,editMode:T.a.bool.isRequired,availableColumnCount:T.a.number.isRequired,columnWidth:T.a.number.isRequired,minColumnWidth:T.a.number.isRequired,onResizeStart:T.a.func.isRequired,onResize:T.a.func.isRequired,onResizeStop:T.a.func.isRequired,deleteComponent:T.a.func.isRequired,handleComponentDrop:T.a.func.isRequired,updateComponents:T.a.func.isRequired};class wc extends k.a.PureComponent{constructor(e){var t,n,r;super(e),this.state={isFocused:!1},this.handleChangeBackground=x()(t=this.handleUpdateMeta).call(t,this,"background"),this.handleChangeFocus=x()(n=this.handleChangeFocus).call(n,this),this.handleDeleteComponent=x()(r=this.handleDeleteComponent).call(r,this)}handleDeleteComponent(){const{deleteComponent:e,id:t,parentId:n}=this.props;e(t,n)}handleChangeFocus(e){this.setState(()=>({isFocused:Boolean(e)}))}handleUpdateMeta(e,t){const{updateComponents:n,component:r}=this.props;t&&r.meta[e]!==t&&n({[r.id]:{...r,meta:{...r.meta,[e]:t}}})}render(){const{component:e,parentComponent:t,index:n,availableColumnCount:r,columnWidth:o,minColumnWidth:i,depth:a,onResizeStart:s,onResize:l,onResizeStop:c,handleComponentDrop:d,editMode:u,isComponentVisible:h}=this.props,p=e.children||[],f=q()(Oc.a).call(Oc.a,t=>t.value===(e.meta.background||X.b));return Object(ut.d)(bt,{component:e,parentComponent:t,orientation:"column",index:n,depth:a,onDrop:d,editMode:u},({dropIndicatorProps:t,dragSourceRef:n})=>Object(ut.d)(Zl,{id:e.id,adjustableWidth:!0,adjustableHeight:!1,widthStep:o,widthMultiple:e.meta.width,minWidthMultiple:i,maxWidthMultiple:r+(e.meta.width||0),onResizeStart:s,onResize:l,onResizeStop:c,editMode:u},Object(ut.d)(dc,{isFocused:this.state.isFocused,onChangeFocus:this.handleChangeFocus,disableClick:!0,menuItems:[Object(ut.d)(jc,{id:`${e.id}-background`,value:e.meta.background,onChange:this.handleChangeBackground})],editMode:u},u&&Object(ut.d)($l,{innerRef:n,position:"top"},Object(ut.d)(yc,{position:"top"}),Object(ut.d)(Ul,{onDelete:this.handleDeleteComponent}),Object(ut.d)(Qo,{onClick:this.handleChangeFocus,className:"fa fa-cog"})),Object(ut.d)("div",{className:L()("grid-column",0===p.length&&"grid-column--empty",f.className)},Tt()(p).call(p,(t,n)=>Object(ut.d)(rd,{key:t,id:t,parentId:e.id,depth:a+1,index:n,availableColumnCount:e.meta.width,columnWidth:o,onResizeStart:s,onResize:l,onResizeStop:c,isComponentVisible:h})),t&&Object(ut.d)("div",t)))))}}wc.propTypes=xc,wc.defaultProps={};var kc=wc;const Rc={id:T.a.string.isRequired,parentId:T.a.string.isRequired,component:He.b.isRequired,depth:T.a.number.isRequired,parentComponent:He.b.isRequired,index:T.a.number.isRequired,editMode:T.a.bool.isRequired,handleComponentDrop:T.a.func.isRequired,deleteComponent:T.a.func.isRequired};class Tc extends k.a.PureComponent{constructor(e){var t;super(e),this.handleDeleteComponent=x()(t=this.handleDeleteComponent).call(t,this)}handleDeleteComponent(){const{deleteComponent:e,id:t,parentId:n}=this.props;e(t,n)}render(){const{component:e,depth:t,parentComponent:n,index:r,handleComponentDrop:o,editMode:i}=this.props;return Object(ut.d)(bt,{component:e,parentComponent:n,orientation:"row",index:r,depth:t,onDrop:o,editMode:i},({dropIndicatorProps:e,dragSourceRef:t})=>Object(ut.d)("div",{ref:t},i&&Object(ut.d)($l,{position:"left"},Object(ut.d)(Ul,{onDelete:this.handleDeleteComponent})),Object(ut.d)("div",{className:"dashboard-component dashboard-component-divider"}),e&&Object(ut.d)("div",e)))}}Tc.propTypes=Rc;var _c=Tc,Fc=n(3639);const Ic={id:T.a.string.isRequired,parentId:T.a.string.isRequired,component:He.b.isRequired,depth:T.a.number.isRequired,parentComponent:He.b.isRequired,index:T.a.number.isRequired,editMode:T.a.bool.isRequired,filters:T.a.object.isRequired,handleComponentDrop:T.a.func.isRequired,deleteComponent:T.a.func.isRequired,updateComponents:T.a.func.isRequired};class Mc extends k.a.PureComponent{constructor(e){var t,n,r,o,i,a;super(e),this.state={isFocused:!1},this.handleDeleteComponent=x()(t=this.handleDeleteComponent).call(t,this),this.handleChangeFocus=x()(n=this.handleChangeFocus).call(n,this),this.handleUpdateMeta=x()(r=this.handleUpdateMeta).call(r,this),this.handleChangeSize=x()(o=this.handleUpdateMeta).call(o,this,"headerSize"),this.handleChangeBackground=x()(i=this.handleUpdateMeta).call(i,this,"background"),this.handleChangeText=x()(a=this.handleUpdateMeta).call(a,this,"text")}handleChangeFocus(e){this.setState(()=>({isFocused:e}))}handleUpdateMeta(e,t){const{updateComponents:n,component:r}=this.props;t&&r.meta[e]!==t&&n({[r.id]:{...r,meta:{...r.meta,[e]:t}}})}handleDeleteComponent(){const{deleteComponent:e,id:t,parentId:n}=this.props;e(t,n)}render(){const{isFocused:e}=this.state,{component:t,depth:n,parentComponent:r,index:o,handleComponentDrop:i,editMode:a,filters:s}=this.props,l=q()(Fc.a).call(Fc.a,e=>e.value===(t.meta.headerSize||X.E)),c=q()(Oc.a).call(Oc.a,e=>e.value===(t.meta.background||X.b));return Object(ut.d)(bt,{component:t,parentComponent:r,orientation:"row",index:o,depth:n,onDrop:i,disableDragDrop:e,editMode:a},({dropIndicatorProps:e,dragSourceRef:r})=>Object(ut.d)("div",{ref:r},a&&n<=2&&Object(ut.d)($l,{position:"left"},Object(ut.d)(yc,{position:"left"})),Object(ut.d)(dc,{onChangeFocus:this.handleChangeFocus,menuItems:[Object(ut.d)(sc,{id:`${t.id}-header-style`,options:Fc.a,value:t.meta.headerSize,onChange:this.handleChangeSize}),Object(ut.d)(jc,{id:`${t.id}-background`,value:t.meta.background,onChange:this.handleChangeBackground}),Object(ut.d)(Ul,{onDelete:this.handleDeleteComponent})],editMode:a},Object(ut.d)("div",{className:L()("dashboard-component","dashboard-component-header",l.className,c.className)},Object(ut.d)(Dn.a,{title:t.meta.text,canEdit:a,onSaveTitle:this.handleChangeText,showTooltip:!1}),!a&&Object(ut.d)(Al,{anchorLinkId:t.id,filters:s,showShortLinkButton:!0}))),e&&Object(ut.d)("div",e)))}}Mc.propTypes=Ic,Mc.defaultProps={};var Pc=Mc;const zc={id:T.a.string.isRequired,parentId:T.a.string.isRequired,component:He.b.isRequired,parentComponent:He.b.isRequired,index:T.a.number.isRequired,depth:T.a.number.isRequired,editMode:T.a.bool.isRequired,availableColumnCount:T.a.number.isRequired,columnWidth:T.a.number.isRequired,occupiedColumnCount:T.a.number.isRequired,onResizeStart:T.a.func.isRequired,onResize:T.a.func.isRequired,onResizeStop:T.a.func.isRequired,handleComponentDrop:T.a.func.isRequired,deleteComponent:T.a.func.isRequired,updateComponents:T.a.func.isRequired};class Ec extends k.a.PureComponent{constructor(e){var t,n,r,o;super(e),this.state={isFocused:!1},this.handleDeleteComponent=x()(t=this.handleDeleteComponent).call(t,this),this.handleUpdateMeta=x()(n=this.handleUpdateMeta).call(n,this),this.handleChangeBackground=x()(r=this.handleUpdateMeta).call(r,this,"background"),this.handleChangeFocus=x()(o=this.handleChangeFocus).call(o,this)}handleChangeFocus(e){this.setState(()=>({isFocused:Boolean(e)}))}handleUpdateMeta(e,t){const{updateComponents:n,component:r}=this.props;t&&r.meta[e]!==t&&n({[r.id]:{...r,meta:{...r.meta,[e]:t}}})}handleDeleteComponent(){const{deleteComponent:e,component:t,parentId:n}=this.props;e(t.id,n)}render(){const{component:e,parentComponent:t,index:n,availableColumnCount:r,columnWidth:o,occupiedColumnCount:i,depth:a,onResizeStart:s,onResize:l,onResizeStop:c,handleComponentDrop:d,editMode:u,isComponentVisible:h}=this.props,p=e.children||[],f=q()(Oc.a).call(Oc.a,t=>t.value===(e.meta.background||X.b));return Object(ut.d)(bt,{component:e,parentComponent:t,orientation:"row",index:n,depth:a,onDrop:d,editMode:u},({dropIndicatorProps:t,dragSourceRef:n})=>Object(ut.d)(dc,{isFocused:this.state.isFocused,onChangeFocus:this.handleChangeFocus,disableClick:!0,menuItems:[Object(ut.d)(jc,{id:`${e.id}-background`,value:f.value,onChange:this.handleChangeBackground})],editMode:u},u&&Object(ut.d)($l,{innerRef:n,position:"left"},Object(ut.d)(yc,{position:"left"}),Object(ut.d)(Ul,{onDelete:this.handleDeleteComponent}),Object(ut.d)(Qo,{onClick:this.handleChangeFocus,className:"fa fa-cog"})),Object(ut.d)("div",{className:L()("grid-row",0===p.length&&"grid-row--empty",f.className)},Tt()(p).call(p,(t,n)=>Object(ut.d)(rd,{key:t,id:t,parentId:e.id,depth:a+1,index:n,availableColumnCount:r-i,columnWidth:o,onResizeStart:s,onResize:l,onResizeStop:c,isComponentVisible:h})),t&&Object(ut.d)("div",t))))}}Ec.propTypes=zc;var Dc=Ec;const Nc={id:T.a.string.isRequired,parentId:T.a.string.isRequired,component:He.b.isRequired,parentComponent:He.b.isRequired,index:T.a.number.isRequired,depth:T.a.number.isRequired,renderType:T.a.oneOf(["RENDER_TAB","RENDER_TAB_CONTENT"]).isRequired,onDropOnTab:T.a.func,editMode:T.a.bool.isRequired,filters:T.a.object.isRequired,availableColumnCount:T.a.number,columnWidth:T.a.number,onResizeStart:T.a.func,onResize:T.a.func,onResizeStop:T.a.func,handleComponentDrop:T.a.func.isRequired,updateComponents:T.a.func.isRequired,setDirectPathToChild:T.a.func.isRequired},qc={availableColumnCount:0,columnWidth:0,onDropOnTab(){},onResizeStart(){},onResize(){},onResizeStop(){}},Ac=$.g.div`
  ${({isHighlighted:e,theme:{gridUnit:t,colors:n}})=>`\n    padding: ${t}px ${2*t}px;\n    margin: ${-t}px ${-2*t}px;\n    transition: box-shadow 0.2s ease-in-out;\n    ${e&&`box-shadow: 0 0 ${t}px ${n.primary.light1};`}\n  `}
`;class Lc extends k.a.PureComponent{constructor(e){var t,n,r,o;super(e),this.handleChangeText=x()(t=this.handleChangeText).call(t,this),this.handleDrop=x()(n=this.handleDrop).call(n,this),this.handleTopDropTargetDrop=x()(r=this.handleTopDropTargetDrop).call(r,this),this.handleChangeTab=x()(o=this.handleChangeTab).call(o,this)}handleChangeTab({pathToTabIndex:e}){this.props.setDirectPathToChild(e)}handleChangeText(e){const{updateComponents:t,component:n}=this.props;e&&e!==n.meta.text&&t({[n.id]:{...n,meta:{...n.meta,text:e}}})}handleDrop(e){this.props.handleComponentDrop(e),this.props.onDropOnTab(e)}handleTopDropTargetDrop(e){e&&this.props.handleComponentDrop({...e,destination:{...e.destination,index:0}})}renderTabContent(){var e;const{component:t,parentComponent:n,depth:r,availableColumnCount:o,columnWidth:i,onResizeStart:a,onResize:s,onResizeStop:l,editMode:c,isComponentVisible:d}=this.props;return Object(ut.d)("div",{className:"dashboard-component-tabs-content"},c&&Object(ut.d)(bt,{component:t,parentComponent:n,orientation:"column",index:0,depth:r,onDrop:this.handleTopDropTargetDrop,editMode:!0,className:"empty-droptarget"},({dropIndicatorProps:e})=>e&&Object(ut.d)("div",{className:"drop-indicator drop-indicator--top"})),Tt()(e=t.children).call(e,(e,n)=>Object(ut.d)(rd,{key:e,id:e,parentId:t.id,depth:r,index:n,onDrop:this.handleDrop,availableColumnCount:o,columnWidth:i,onResizeStart:a,onResize:s,onResizeStop:l,isComponentVisible:d,onChangeTab:this.handleChangeTab})),c&&Object(ut.d)(bt,{component:t,parentComponent:n,orientation:"column",index:t.children.length,depth:r,onDrop:this.handleDrop,editMode:!0,className:"empty-droptarget"},({dropIndicatorProps:e})=>e&&Object(ut.d)("div",{className:"drop-indicator drop-indicator--bottom"})))}renderTab(){const{component:e,parentComponent:t,index:n,depth:r,editMode:o,filters:i,isFocused:a,isHighlighted:s}=this.props;return Object(ut.d)(bt,{component:e,parentComponent:t,orientation:"column",index:n,depth:r,onDrop:this.handleDrop,editMode:o},({dropIndicatorProps:t,dragSourceRef:r})=>Object(ut.d)(Ac,{isHighlighted:s,className:"dragdroppable-tab",ref:r},Object(ut.d)(Dn.a,{title:e.meta.text,defaultTitle:e.meta.defaultText,placeholder:e.meta.placeholder,canEdit:o&&a,onSaveTitle:this.handleChangeText,showTooltip:!1,editing:o&&a}),!o&&Object(ut.d)(Al,{anchorLinkId:e.id,filters:i,showShortLinkButton:!0,placement:n>=5?"left":"right"}),t&&Object(ut.d)("div",t)))}render(){const{renderType:e}=this.props;return"RENDER_TAB"===e?this.renderTab():this.renderTabContent()}}Lc.propTypes=Nc,Lc.defaultProps=qc;var Uc=n(265),$c=n.n(Uc);function Hc({currentComponent:e,directPathToChild:t=[]}){var n;if(!e||0===t.length||-1===O()(t).call(t,e.id))return-1;const r=t[$c()(t).call(t,t=>t===e.id)+1];var o;return O()(n=e.children).call(n,r)>=0?$c()(o=e.children).call(o,e=>e===r):-1}function Bc(e,t){var n;const r=di()(n=e.parents||[]).call(n);return r.push(e.id),r.push(e.children[t]),r}function Wc(e=[]){if(e.length>0){const t=di()(e).call(e);for(;t.length;){const e=t.pop(),n=e.split("-")[0];if(!l()(X.q).call(X.q,n))return e}}return null}const Vc={id:T.a.string.isRequired,parentId:T.a.string.isRequired,component:He.b.isRequired,parentComponent:He.b.isRequired,index:T.a.number.isRequired,depth:T.a.number.isRequired,renderTabContent:T.a.bool,editMode:T.a.bool.isRequired,renderHoverMenu:T.a.bool,directPathToChild:T.a.arrayOf(T.a.string),logEvent:T.a.func.isRequired,availableColumnCount:T.a.number,columnWidth:T.a.number,onResizeStart:T.a.func,onResize:T.a.func,onResizeStop:T.a.func,createComponent:T.a.func.isRequired,handleComponentDrop:T.a.func.isRequired,onChangeTab:T.a.func.isRequired,deleteComponent:T.a.func.isRequired,updateComponents:T.a.func.isRequired},Gc={renderTabContent:!0,renderHoverMenu:!0,availableColumnCount:0,columnWidth:0,directPathToChild:[],onResizeStart(){},onResize(){},onResizeStop(){}},Kc=$.g.div`
  width: 100%;
  background-color: ${({theme:e})=>e.colors.grayscale.light5};

  .dashboard-component-tabs-content {
    min-height: ${({theme:e})=>12*e.gridUnit}px;
    margin-top: ${({theme:e})=>e.gridUnit/4}px;
    position: relative;
  }

  .ant-tabs {
    overflow: visible;

    .ant-tabs-nav-wrap {
      min-height: ${({theme:e})=>12.5*e.gridUnit}px;
    }

    .ant-tabs-content-holder {
      overflow: visible;
    }
  }

  div .ant-tabs-tab-btn {
    text-transform: none;
  }
`;class Qc extends k.a.PureComponent{constructor(e){var t,n,r,o;super(e),this.showDeleteConfirmModal=e=>{const{component:t,deleteComponent:n}=this.props;Yt.q.confirm({title:Object(_.e)("Delete dashboard tab?"),content:Object(ut.d)("span",null,"Deleting a tab will remove all content within it. You may still reverse this action with the ",Object(ut.d)("b",null,"undo")," button (cmd + z) until you save your changes."),onOk:()=>{var r;n(e,t.id);const o=O()(r=t.children).call(r,e);this.handleClickTab(Math.max(0,o-1))},okType:"danger",okText:"DELETE",cancelText:"CANCEL",icon:null})},this.handleEdit=(e,t)=>{const{component:n,createComponent:r}=this.props;"add"===t?r({destination:{id:n.id,type:n.type,index:n.children.length},dragging:{id:X.B,type:E.l}}):"remove"===t&&this.showDeleteConfirmModal(e)};const i=Math.max(0,Hc({currentComponent:e.component,directPathToChild:e.directPathToChild})),{children:a}=e.component,s=a[i];this.state={tabIndex:i,activeKey:s},this.handleClickTab=x()(t=this.handleClickTab).call(t,this),this.handleDeleteComponent=x()(n=this.handleDeleteComponent).call(n,this),this.handleDeleteTab=x()(r=this.handleDeleteTab).call(r,this),this.handleDropOnTab=x()(o=this.handleDropOnTab).call(o,this)}UNSAFE_componentWillReceiveProps(e){const t=Math.max(0,e.component.children.length-1),n=this.props.component.children,r=e.component.children;if(this.state.tabIndex>t&&this.setState(()=>({tabIndex:t})),r.length){const e=r[r.length-1];r.length>n.length&&this.setState(()=>({activeKey:e})),r.length<n.length&&this.setState(()=>({activeKey:r[0]}))}if(e.isComponentVisible){if(Wc(e.directPathToChild)!==Wc(this.props.directPathToChild)){const t=Hc({currentComponent:e.component,directPathToChild:e.directPathToChild});t>-1&&t!==this.state.tabIndex&&this.setState(()=>({tabIndex:t}))}}}handleClickTab(e){const{component:t}=this.props,{children:n}=t;if(e!==this.state.tabIndex){const n=Bc(t,e),r=n[n.length-1];this.props.logEvent(Pn.n,{target_id:r,index:e}),this.props.onChangeTab({pathToTabIndex:n})}this.setState(()=>({activeKey:n[e]}))}handleDeleteComponent(){const{deleteComponent:e,id:t,parentId:n}=this.props;e(t,n)}handleDeleteTab(e){this.handleClickTab(Math.max(0,e-1))}handleDropOnTab(e){const{component:t}=this.props,{destination:n}=e;if(n){var r;const e=n.id===t.id?n.index:O()(r=t.children).call(r,n.id);e>-1&&Tn()(()=>{this.handleClickTab(e)},30)}}render(){const{depth:e,component:t,parentComponent:n,index:r,availableColumnCount:o,columnWidth:i,onResizeStart:a,onResize:s,onResizeStop:c,handleComponentDrop:d,renderTabContent:u,renderHoverMenu:h,isComponentVisible:p,editMode:f,nativeFilters:b,dashboardLayout:m,lastFocusedTabId:g,setLastFocusedTab:v}=this.props,{children:y}=t,{tabIndex:S,activeKey:C}=this.state;let j;return m[X.h].children[0]!==X.d&&!g&&v(C),b.focusedFilterId&&(j=b.filters[b.focusedFilterId].tabsInScope),Object(ut.d)(bt,{component:t,parentComponent:n,orientation:"row",index:r,depth:e,onDrop:d,editMode:f},({dropIndicatorProps:r,dragSourceRef:d})=>Object(ut.d)(Kc,{className:"dashboard-component dashboard-component-tabs"},f&&h&&Object(ut.d)($l,{innerRef:d,position:"left"},Object(ut.d)(yc,{position:"left"}),Object(ut.d)(Ul,{onDelete:this.handleDeleteComponent})),Object(ut.d)(B.b,{id:t.id,activeKey:C,onChange:e=>{this.handleClickTab(O()(y).call(y,e))},onEdit:this.handleEdit,type:f?"editable-card":"card",onTabClick:v},Tt()(y).call(y,(n,r)=>{var d;return Object(ut.d)(B.b.TabPane,{key:n,tab:Object(ut.d)(rd,{id:n,parentId:t.id,depth:e,index:r,renderType:"RENDER_TAB",availableColumnCount:o,columnWidth:i,onDropOnTab:this.handleDropOnTab,isFocused:C===n,isHighlighted:C!==n&&(null==(d=j)?void 0:l()(d).call(d,n))})},u&&Object(ut.d)(rd,{id:n,parentId:t.id,depth:e,index:r,renderType:"RENDER_TAB_CONTENT",availableColumnCount:o,columnWidth:i,onResizeStart:a,onResize:s,onResizeStop:c,onDropOnTab:this.handleDropOnTab,isComponentVisible:S===r&&p}))})),r&&n.id!==X.h&&Object(ut.d)("div",r)))}}Qc.propTypes=Vc,Qc.defaultProps=Gc;var Yc=Qc;const Jc={[E.a]:rc,[E.h]:bc,[E.b]:kc,[E.f]:_c,[E.g]:Pc,[E.j]:Dc,[E.l]:Lc,[E.k]:Yc};var Xc=n(3537);const Zc={id:T.a.string,parentId:T.a.string,depth:T.a.number,index:T.a.number,renderHoverMenu:T.a.bool,renderTabContent:T.a.bool,onChangeTab:T.a.func,component:He.b.isRequired,parentComponent:He.b.isRequired,createComponent:T.a.func.isRequired,deleteComponent:T.a.func.isRequired,updateComponents:T.a.func.isRequired,handleComponentDrop:T.a.func.isRequired,logEvent:T.a.func.isRequired,directPathToChild:T.a.arrayOf(T.a.string),directPathLastUpdated:T.a.number,dashboardId:T.a.number.isRequired,isComponentVisible:T.a.bool};function ed(e,t){if(!e.focusedFilterField)return null;const{chartId:n,column:r}=e.focusedFilterField;return{chartId:n,scope:t[n].scopes[r]}}class td extends k.a.PureComponent{render(){const{component:e}=this.props,t=e?Jc[e.type]:null;return t?Object(ut.d)(t,this.props):null}}td.propTypes=Zc,td.defaultProps={directPathToChild:[],directPathLastUpdated:0,isComponentVisible:!0};var nd,rd=Object(o.b)((function({dashboardLayout:e,dashboardState:t,dashboardInfo:n,dashboardFilters:r,nativeFilters:o},i){const a=e.present,{id:s,parentId:l}=i,c=a[s],d={component:c,dashboardLayout:a,parentComponent:a[l],editMode:t.editMode,undoLength:e.past.length,redoLength:e.future.length,filters:Object(Dr.b)(),directPathToChild:t.directPathToChild,lastFocusedTabId:t.lastFocusedTabId,directPathLastUpdated:t.directPathLastUpdated,dashboardId:n.id,nativeFilters:o,focusedFilterScope:ed(t,r)};if(c){const e=c.type;if(e===E.j||e===E.b){const{occupiedWidth:t,minimumWidth:n}=Object(Xc.a)({id:s,components:a});e===E.j&&(d.occupiedColumnCount=t),e===E.b&&(d.minColumnWidth=n)}}return d}),(function(e){return Object(r.b)({addDangerToast:Wo.c,createComponent:Bo.k,deleteComponent:Bo.m,updateComponents:Bo.s,handleComponentDrop:Bo.o,setDirectPathToChild:hr.C,setLastFocusedTab:hr.F,logEvent:Vo.logEvent},e)}))(td),od=n(1263),id=n(568),ad=n(4499),sd=n(1404);!function(e){e.AllFilters="allFilters",e.FilterSets="filterSets"}(nd||(nd={}));const ld=e=>{var t;return z()(t=m()(e)).call(t,(e,t)=>({...e,[t.id]:t.extraFormData}),{})};var cd=n(188),dd=n.n(cd),ud=n(982),hd=n(307),pd=n.n(hd);const fd=()=>Object(o.d)(e=>e.nativeFilters.filterSets||{}),bd=()=>Object(o.d)(e=>e.nativeFilters.filters),md=()=>{var e,t;const n=Object(o.d)(e=>e.dataMask);return z()(e=C()(t=m()(n)).call(t,e=>{var t;return pd()(t=String(e.id)).call(t,Ni.a)})).call(e,(e,t)=>({...e,[t.id]:t}),{})},gd=(e,t)=>{const n=fd(),r=m()(n),o=Object(w.useMemo)(()=>!!q()(r).call(r,({name:t})=>t===e),[r,e]);return t!==e&&o},vd=$.g.div`
  display: flex;
  & button {
    ${({disabled:e})=>`pointer-events: ${e?"none":"all"}`};
    flex: 1;
  }
`,yd=$.g.div`
  display: grid;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  grid-gap: 10px;
  grid-template-columns: 1fr 1fr;
`;var Od=({onCancel:e,editMode:t,onEdit:n,onCreate:r,disabled:o,filterSetName:i})=>{const a=gd(i),s=!i||a||o;return Object(ut.d)(k.a.Fragment,null,t?Object(ut.d)(yd,null,Object(ut.d)(En.a,{buttonStyle:"tertiary",buttonSize:"small",onClick:e},Object(_.e)("Cancel")),Object(ut.d)(wo.a,{placement:"right",title:!i&&Object(_.e)("Please filter set name")||a&&Object(_.e)("Filter set with this name already exists")||o&&dl},Object(ut.d)(vd,{disabled:s},Object(ut.d)(En.a,$n()({disabled:s,buttonStyle:"primary",htmlType:"submit",buttonSize:"small",onClick:r},Pu("create-filter-set-button")),Object(_.e)("Create"))))):Object(ut.d)(wo.a,{placement:"bottom",title:o&&dl},Object(ut.d)(vd,{disabled:o},Object(ut.d)(En.a,$n()({disabled:o,buttonStyle:"tertiary",buttonSize:"small",onClick:n},Pu("new-filter-set-button")),Object(_.e)("Create new filter set")))))},Sd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},Cd=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:Sd}))};Cd.displayName="CheckOutlined";var jd=w.forwardRef(Cd),xd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},wd=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:xd}))};wd.displayName="EllipsisOutlined";var kd=w.forwardRef(wd),Rd={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},Td=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:Rd}))};Td.displayName="CaretDownOutlined";var _d=w.forwardRef(Td);const Fd=$.g.div`
  display: flex;
  align-items: center;
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
`,Id=Object($.g)(Yt.g)`
  &.ant-collapse-ghost > .ant-collapse-item {
    & > .ant-collapse-content > .ant-collapse-content-box {
      padding: 0;
      padding-top: 0;
      padding-bottom: 0;
      font-size: ${({theme:e})=>e.typography.sizes.s}px;
    }
    & > .ant-collapse-header {
      padding: 0;
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: flex-end;
      max-width: max-content;
      & .ant-collapse-arrow {
        position: static;
        padding-left: ${({theme:e})=>e.gridUnit}px;
      }
  }
`;var Md=({dataMask:e,filterSet:t})=>{const n=bd(),r=m()(n);let o=null!=r?r:[];null!=t&&t.nativeFilters&&(o=m()(null==t?void 0:t.nativeFilters));return Object(ut.d)(Id,{ghost:!0,expandIconPosition:"right",defaultActiveKey:t?void 0:["filters"],expandIcon:({isActive:e})=>Object(ut.d)(_d,{rotate:e?0:180})},Object(ut.d)(Yt.g.Panel,$n()({},Pu("collapse-filter-set-description"),{header:Object(ut.d)(Fd,null,Object(ut.d)(Yt.D.Text,{type:"secondary"},Object(_.e)("Filters (%d)",o.length))),key:"filters"}),Tt()(o).call(o,({id:r,name:o})=>{var i,a,s,c;const d=t&&!Object(cl.f)(n[r],null==t?void 0:null==(i=t.nativeFilters)?void 0:i[r],{ignoreUndefined:!0}),u=!l()(a=f()(n)).call(a,r);return Object(ut.d)(Yt.B,{title:u&&Object(_.e)("This filter doesn't exist in dashboard. It will not be applied.")||d&&Object(_.e)("Filter metadata changed in dashboard. It will not be applied."),placement:"bottomLeft",key:r},Object(ut.d)("div",null,Object(ut.d)(Yt.D.Text,{strong:!0,delete:u,mark:d},o,": "),Object(ut.d)(Yt.D.Text,{delete:u,mark:d},ul(null==e?void 0:null==(s=e[r])?void 0:null==(c=s.filterState)?void 0:c.value)||Object(ut.d)(Yt.D.Text,{type:"secondary"},Object(_.e)("None")))))})))};const Pd=Object($.g)(En.a)`
  padding: 0;
`,zd=$.g.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,Ed=$.g.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  & > *,
  & > button.superset-button {
    ${({theme:e})=>`margin-left: ${2*e.gridUnit}px`};
  }
`;var Dd=({editMode:e,setFilterSetName:t,onDelete:n,onEdit:r,filterSetName:o,dataMaskSelected:i,filterSet:a,isApplied:s,onRebuild:l})=>{var c,d;const u=Object(ut.d)(Yt.p,null,Object(ut.d)(Yt.p.Item,{onClick:r},Object(_.e)("Edit")),Object(ut.d)(Yt.p.Item,{onClick:l},Object(ut.d)(wo.a,{placement:"right",title:Object(_.e)("Remove invalid filters")},Object(_.e)("Rebuild"))),Object(ut.d)(Yt.p.Item,{onClick:n,danger:!0},Object(_.e)("Delete")));return Object(ut.d)(k.a.Fragment,null,Object(ut.d)(zd,null,Object(ut.d)(Yt.D.Text,{strong:!0,editable:{editing:e,icon:Object(ut.d)("span",null),onChange:t}},null!=(c=null==a?void 0:a.name)?c:o),Object(ut.d)(Ed,null,s&&Object(ut.d)(jd,{style:{color:$.h.colors.success.base}}),n&&Object(ut.d)(Yt.i,{overlay:u,placement:"bottomRight",trigger:["click"]},Object(ut.d)(Pd,$n()({onClick:e=>{e.stopPropagation(),e.preventDefault()}},Pu("filter-set-menu-button"),{buttonStyle:"link",buttonSize:"xsmall"}),Object(ut.d)(kd,null))))),Object(ut.d)(Md,{filterSet:a,dataMask:null!=(d=null==a?void 0:a.dataMask)?d:i}))};const Nd=$.g.div`
  display: grid;
  align-items: center;
  justify-content: center;
  grid-template-columns: 1fr;
  & button.superset-button {
    margin-left: 0;
  }
  & input {
    width: 100%;
  }
`,qd=$.g.div`
  display: grid;
  align-items: center;
  justify-content: center;
  grid-template-columns: 1fr;
  grid-gap: ${({theme:e})=>e.gridUnit}px;
  ${({theme:e})=>`padding: 0 ${4*e.gridUnit}px ${4*e.gridUnit}px`};
  border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  padding: ${({theme:e})=>`${3*e.gridUnit}px ${2*e.gridUnit}px`};
  cursor: ${({onClick:e})=>e?"pointer":"auto"};
  ${({theme:e,"data-selected":t})=>`background: ${t?e.colors.primary.light5:"transparent"}`};
`,Ad=Object(_.e)("New filter set");var Ld=({dataMaskSelected:e,onEditFilterSet:t,disabled:n,onFilterSelectionChange:r,isFilterSetChanged:i})=>{const a=Object(o.c)(),[s,l]=Object(w.useState)(Ad),[c,u]=Object(w.useState)(!1),h=md(),p=fd(),b=m()(p),g=bd(),y=m()(g),[O,S]=Object(w.useState)(null);Object(w.useEffect)(()=>{var t;if(i)return;const n=hl({dataMaskSelected:e,filterSetFilterValues:b});S(null!=(t=null==n?void 0:n.id)?t:null)},[i,e,b]);const j=(e,t)=>{var n;return!q()(y).call(y,t=>(null==t?void 0:t.id)===e)||!Object(cl.f)(g[e],null==t?void 0:null==(n=t.nativeFilters)?void 0:n[e],{ignoreUndefined:!0})},x=(e,t)=>{var n,o,i,a,s,l,c,d;if(null!=t&&t.classList.contains("ant-collapse-header")||null!=t&&t.classList.contains("ant-dropdown-menu-item")||null!=t&&null!=(n=t.parentElement)&&n.classList.contains("ant-collapse-header")||null!=t&&null!=(o=t.parentElement)&&null!=(i=o.parentElement)&&i.classList.contains("ant-collapse-header")||null!=t&&null!=(a=t.parentElement)&&null!=(s=a.parentElement)&&null!=(l=s.parentElement)&&l.classList.contains("ant-collapse-header"))return;if(S(e),!e)return;const u=p[e];v()(c=null!=(d=m()(null==u?void 0:u.dataMask))?d:[]).call(c,e=>{const{extraFormData:t,filterState:n,id:o}=e;j(o,u)||r({id:o},{extraFormData:t,filterState:n})})};return Object(ut.d)(Nd,null,!O&&Object(ut.d)(qd,null,Object(ut.d)(Dd,{dataMaskSelected:e,editMode:c,setFilterSetName:l,filterSetName:s}),Object(ut.d)(Od,{filterSetName:dd()(s).call(s),disabled:n,onCancel:()=>{u(!1),l(Ad)},editMode:c,onEdit:()=>u(!0),onCreate:()=>{var e,t;const n={name:dd()(s).call(s),id:`FILTERS_SET-${ll.a.generate()}`,nativeFilters:g,dataMask:z()(e=f()(g)).call(e,(e,t)=>({...e,[t]:h[t]}),{})};a(Object(ud.g)(d()(t=[n]).call(t,b))),u(!1),l(Ad)}})),Tt()(b).call(b,r=>Object(ut.d)(qd,$n()({},Pu("filter-set-wrapper"),{"data-selected":r.id===O,onClick:e=>x(r.id,e.target),key:r.id}),Object(ut.d)(Dd,{isApplied:r.id===O&&!n,onDelete:()=>{return e=r.id,a(Object(ud.g)(C()(b).call(b,t=>t.id!==e))),void(e===O&&S(null));var e},onEdit:()=>{return e=r.id,x(e),void t(e);var e},onRebuild:()=>(e=>{var t,n,r,o;const i=p[e],s=z()(t=C()(n=m()(null!=(r=null==i?void 0:i.dataMask)?r:{})).call(n,e=>{const{id:t}=e;return!j(t,i)})).call(t,(e,t)=>({...e,[t.id]:g[t.id]}),{}),l={...i,nativeFilters:s,dataMask:z()(o=f()(s)).call(o,(e,t)=>{var n;return{...e,[t]:null==(n=i.dataMask)?void 0:n[t]}},{})};a(Object(ud.g)(Tt()(b).call(b,e=>e.id===l.id?l:e)))})(r.id),dataMaskSelected:e,filterSet:r}))))},Ud={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},$d=function(e,t){return w.createElement(Zi,Object.assign({},e,{ref:t,icon:Ud}))};$d.displayName="WarningOutlined";var Hd=w.forwardRef($d);const Bd=$.g.div`
  display: grid;
  grid-template-columns: 1fr;
  align-items: flex-start;
  justify-content: flex-start;
  grid-gap: ${({theme:e})=>e.gridUnit}px;
  background: ${({theme:e})=>e.colors.primary.light4};
  padding: ${({theme:e})=>2*e.gridUnit}px;
`,Wd=Object($.g)(Yt.D.Text)`
  color: ${({theme:e})=>e.colors.primary.dark2};
`,Vd=Object($.g)(Yt.D.Text)`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  & .anticon {
    padding: ${({theme:e})=>e.gridUnit}px;
  }
`,Gd=$.g.div`
  display: flex;
  & button {
    ${({disabled:e})=>`pointer-events: ${e?"none":"all"}`};
    flex: 1;
  }
`;var Kd=({filterSetId:e,onCancel:t,dataMaskSelected:n,disabled:r})=>{const i=md(),a=Object(o.c)(),s=fd(),l=bd(),c=m()(s),[d,u]=Object(w.useState)(s[e].name),h=gd(d,s[e].name),p=Object(w.useMemo)(()=>hl({dataMaskSelected:n,filterSetFilterValues:c}),[n,c]),f=p&&p.id!==e,b=r||f||h;return Object(ut.d)(Bd,null,Object(ut.d)(Wd,{strong:!0},Object(_.e)("Editing filter set:")),Object(ut.d)(Wd,{editable:{editing:!0,icon:Object(ut.d)("span",null),onChange:u}},d),Object(ut.d)(yd,null,Object(ut.d)(En.a,{ghost:!0,buttonStyle:"tertiary",buttonSize:"small",onClick:t},Object(_.e)("Cancel")),Object(ut.d)(Yt.B,{placement:"right",title:h&&Object(_.e)("Filter set with this name already exists")||f&&Object(_.e)("Filter set already exists")||r&&dl},Object(ut.d)(Gd,{disabled:b},Object(ut.d)(En.a,$n()({disabled:b,buttonStyle:"primary",htmlType:"submit",buttonSize:"small",onClick:()=>{a(Object(ud.g)(Tt()(c).call(c,t=>{const n={...t,name:d,nativeFilters:l,dataMask:{...i}};return e===t.id?n:t}))),t()}},Pu("filter-set-edit-save")),Object(_.e)("Save"))))),f&&Object(ut.d)(Vd,{mark:!0},Object(ut.d)(Hd,null),Object(_.e)('This filter set is identical to: "%s"',null==p?void 0:p.name)))};const Qd=Object($.g)(En.a)`
  padding: 0;
`;var Yd=({createNewOnOpen:e,children:t})=>{const n=Object(o.c)(),[r,i]=Object(w.useState)(!1);function a(){i(!1)}return Object(ut.d)(k.a.Fragment,null,Object(ut.d)(Qd,$n()({},Pu("create-filter"),{buttonStyle:"link",buttonSize:"xsmall",onClick:()=>i(!0)}),t),Object(ut.d)(hs,{isOpen:r,onSave:async function(e){n(await Object(ud.f)(e)),a()},onCancel:a,createNewOnOpen:e}))};const Jd=$.g.h4`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 0;
  padding: ${({theme:e})=>2*e.gridUnit}px;

  & > span {
    flex-grow: 1;
  }
`,Xd=$.g.div`
  display: grid;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  grid-gap: 10px;
  grid-template-columns: 1fr 1fr;
  ${({theme:e})=>`padding: 0 ${2*e.gridUnit}px ${2*e.gridUnit}px`};

  .btn {
    flex: 1;
  }
`,Zd=Object($.g)(En.a)`
  padding: 0;
`;var eu,tu=({onApply:e,isApplyDisabled:t,dataMaskSelected:n,dataMaskApplied:r,setDataMaskSelected:i,toggleFiltersBar:a})=>{var s;const l=bd(),c=m()(l),d=Object(o.d)(({dashboardInfo:e})=>e.dash_edit_perm),u=Ge()(s=m()(r)).call(s,e=>{var t,r,o;return null===(null==(t=n[e.id])?void 0:null==(r=t.filterState)?void 0:r.value)||!n[e.id]&&null===(null==(o=e.filterState)?void 0:o.value)});return Object(ut.d)(k.a.Fragment,null,Object(ut.d)(Jd,null,Object(ut.d)("span",null,Object(_.e)("Filters")),d&&Object(ut.d)(Yd,{createNewOnOpen:0===c.length},Object(ut.d)(zn.a,{name:"edit"})),Object(ut.d)(Zd,$n()({},Pu("collapse-button"),{buttonStyle:"link",buttonSize:"xsmall",onClick:()=>a(!1)}),Object(ut.d)(zn.a,{name:"expand"}))),Object(ut.d)(Xd,null,Object(ut.d)(En.a,$n()({disabled:u,buttonStyle:"tertiary",buttonSize:"small",onClick:()=>{v()(c).call(c,e=>{i(t=>{t[e.id]=Object(sd.b)(e.id)})})}},Pu("clear-button")),Object(_.e)("Clear all")),Object(ut.d)(En.a,$n()({disabled:t,buttonStyle:"primary",htmlType:"submit",buttonSize:"small",onClick:e},Pu("apply-button")),Object(_.e)("Apply"))))},nu=n(27),ru=(eu=function(e,t){return(eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}eu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ou=function(e){var t,n,r,o={};if("html"===e)r=document.createElement("div");else{if("svg"!==e)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');r=document.createElementNS("http://www.w3.org/2000/svg","g")}var i={element:r,elementType:e,setPortalProps:function(e){o=e},getInitialPortalProps:function(){return o},mount:function(r,o){if(o!==n){if(i.unmount(),r!==t&&!function(e,t){if("html"===t)return e instanceof HTMLElement;if("svg"===t)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(r,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+r.tagName+">.");r.replaceChild(i.element,o),t=r,n=o}},unmount:function(e){e&&e!==n||t&&n&&(t.replaceChild(n,i.element),t=void 0,n=void 0)}};return i},iu=function(e){function t(t){var n=e.call(this,t)||this;return n.addPropsChannel=function(){Object.assign(n.props.node,{setPortalProps:function(e){n.setState({nodeProps:e})}})},n.state={nodeProps:n.props.node.getInitialPortalProps()},n}return ru(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,n=t.children,r=t.node;return nu.createPortal(w.Children.map(n,(function(t){return w.isValidElement(t)?w.cloneElement(t,e.state.nodeProps):t})),r.element)},t}(w.PureComponent),au=function(e){function t(t){var n=e.call(this,t)||this;return n.placeholderNode=w.createRef(),n.passPropsThroughPortal(),n}return ru(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,n=t.parentNode;e.mount(n,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,n=t.parentNode;e.mount(n,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return w.createElement("div",{ref:this.placeholderNode})},t}(w.PureComponent),su=ou.bind(null,"html"),lu=(ou.bind(null,"svg"),n(479)),cu=n.n(lu);const du=$.g.div`
  display: flex;
  flex-direction: row;
  background-color: ${({level:e,theme:t})=>t.colors[e].light2};
  border-radius: ${({theme:e})=>e.borderRadius}px;
  border: 1px solid ${({level:e,theme:t})=>t.colors[e].base};
  color: ${({level:e,theme:t})=>t.colors[e].dark2};
  padding: ${({theme:e})=>2*e.gridUnit}px;
  margin-bottom: ${({theme:e})=>e.gridUnit}px;
  width: 100%;
`,uu=$.g.div`
  display: flex;
  flex-direction: column;
  margin-left: ${({theme:e})=>2*e.gridUnit}px;
`,hu=$.g.span`
  font-weight: ${({theme:e})=>e.typography.weights.bold};
`;function pu({body:e,level:t,title:n}){return Object(ut.d)(du,{level:t,role:"alert"},Object(ut.d)(zn.a,{name:"error"===t?"error-solid":"warning-solid",color:$.h.colors[t].base}),Object(ut.d)(uu,null,Object(ut.d)(hu,null,n),Object(ut.d)("p",null,e)))}const fu=$.g.div`
  min-height: ${({theme:e})=>11*e.gridUnit}px;
  padding-bottom: ${({theme:e})=>3*e.gridUnit}px;
  & > div > div {
    height: auto;
  }
`;var bu=({dataMaskSelected:e,filter:t,directPathToChild:n,onFilterSelectionChange:r})=>{var i,a;const{id:s,targets:l,filterType:c,adhoc_filters:d,time_range:u}=t,h=Object(hi.a)().get(c),p=function(e,t){var n;const{filters:r}=Object(o.d)(e=>e.nativeFilters),i=r[e],a=null!=(n=null==i?void 0:i.cascadeParentIds)?n:[];let s={};return v()(a).call(a,e=>{const n=null==t?void 0:t[e];s=Object(Zo.d)(s,null==n?void 0:n.extraFormData)}),s}(s,e),[f,b]=Object(w.useState)([]),[m,g]=Object(w.useState)(""),[y,O]=Object(w.useState)({}),[S,C]=Object(w.useState)({}),j=Object(w.useRef)(null),[x]=l,{datasetId:k,column:R={}}=x,{name:T}=R,F=!!k,[I,P]=Object(w.useState)(F),[z,E]=Object(w.useState)(!0),D=Object(o.c)();Object(w.useEffect)(()=>{var e;const n=Object(Zo.c)({...t,datasetId:k,cascadingFilters:p,groupby:T,inputRef:j,adhoc_filters:d,time_range:u}),r=(null==(e=t.dataMask)?void 0:e.ownState)||{};if(!Object(cl.f)(y,n)||!Object(cl.f)(S,r)){if(O(n),C(r),!F)return;E(!0),Object(Yo.getChartDataRequest)({formData:n,force:!1,requestParams:{dashboardId:0},ownState:r}).then(e=>{if(Object(fi.c)(fi.a.GLOBAL_ASYNC_QUERIES)){const t="result"in e?e.result[0]:e;Object(wa.a)(t).then(e=>{E(!1),P(!1),b(e)}).catch(e=>{g(e.message||e.error||Object(_.e)("Check configuration")),E(!1),P(!1)})}else b(e.result),g(""),E(!1),P(!1)}).catch(e=>{g(e.statusText),E(!1),P(!1)})}},[p,k,T,io()(t),F]),Object(w.useEffect)(()=>{if((null==n?void 0:n[0])===t.id){const e=Tn()(()=>{var e;null==j||null==(e=j.current)||e.focus()},200);return()=>clearTimeout(e)}},[j,n,t.id]);return m?Object(ut.d)(pu,{title:Object(_.e)("Cannot load filter"),body:m,level:"error"}):Object(ut.d)(fu,null,I?Object(ut.d)(M.a,{position:"inline-centered"}):Object(ut.d)(Na.a,{height:20,width:220,formData:y,queriesData:F?f:[{data:[{}]}],chartType:c,behaviors:[pi.b.NATIVE_FILTER],filterState:null==(i=t.dataMask)?void 0:i.filterState,ownState:null==(a=t.dataMask)?void 0:a.ownState,enableNoResults:null==h?void 0:h.enableNoResults,isRefreshing:z,hooks:{setDataMask:e=>r(t,e),setFocusedFilter:()=>D(Object(ud.h)(s)),unsetFocusedFilter:()=>D(Object(ud.i)())}}))};const mu=$.g.h4`
  width: 100%;
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  color: ${({theme:e})=>e.colors.grayscale.dark1};
  margin: 0;
  overflow-wrap: break-word;
`,gu=$.g.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  margin-bottom: ${({theme:e})=>e.gridUnit}px;
`,vu=$.g.div`
  width: 100%;
`;var yu=({dataMaskSelected:e,filter:t,icon:n,onFilterSelectionChange:r,directPathToChild:o})=>{const{name:i="<undefined>"}=t;return Object(ut.d)(vu,null,Object(ut.d)(gu,null,Object(ut.d)(mu,null,i),Object(ut.d)("div",null,n)),Object(ut.d)(bu,{dataMaskSelected:e,filter:t,directPathToChild:o,onFilterSelectionChange:r}))};const Ou=$.g.ul`
  list-style-type: none;
  & > * {
    list-style-type: none;
  }
`,Su=$.g.div`
  display: flex;
`,Cu=Object($.g)(zn.a)`
  margin-top: ${({theme:e})=>-e.gridUnit}px;
`,ju=({dataMaskSelected:e,filter:t,directPathToChild:n,onFilterSelectionChange:r})=>{var o;return Object(ut.d)(k.a.Fragment,null,Object(ut.d)(Su,null,Object(ut.d)(Cu,{name:"caret-down"}),Object(ut.d)(yu,{dataMaskSelected:e,filter:t,directPathToChild:n,onFilterSelectionChange:r})),Object(ut.d)(Ou,null,null==(o=t.cascadeChildren)?void 0:Tt()(o).call(o,t=>Object(ut.d)("li",{key:t.id},Object(ut.d)(ju,{dataMaskSelected:e,filter:t,directPathToChild:n,onFilterSelectionChange:r})))))};var xu=ju;const wu=$.g.div`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  background-color: ${({theme:e})=>e.colors.grayscale.light4};
  margin: ${({theme:e})=>-1*e.gridUnit}px
    ${({theme:e})=>-4*e.gridUnit}px; // to override default antd padding
  padding: ${({theme:e})=>2*e.gridUnit}px
    ${({theme:e})=>4*e.gridUnit}px;

  & > *:last-child {
    cursor: pointer;
  }
`,ku=$.g.h4`
  display: flex;
  align-items: center;
  color: ${({theme:e})=>e.colors.grayscale.dark1};
  margin: 0;
  padding: 0;
`,Ru=Object($.g)(zn.a)`
  margin-right: ${({theme:e})=>e.gridUnit}px;
  color: ${({theme:e})=>e.colors.grayscale.dark1};
  width: ${({theme:e})=>4*e.gridUnit}px;
`,Tu=Object($.g)(Ys)`
  padding: ${({theme:e})=>e.gridUnit}px
    ${({theme:e})=>2*e.gridUnit}px;
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  background: ${({theme:e})=>e.colors.grayscale.light1};
`;var _u=({dataMaskSelected:e,filter:t,visible:n,onVisibleChange:r,onFilterSelectionChange:o,directPathToChild:i})=>{var a;const[s,c]=Object(w.useState)(),d=e[t.id];Object(w.useEffect)(()=>{c(i);const e=Tn()(()=>c(void 0),500);return()=>clearTimeout(e)},[i,c]);const u=Object(w.useCallback)(e=>{var t;const n=e.cascadeChildren||[],r=null==d?void 0:null==(t=d.filterState)?void 0:t.value,o=cu()(n).call(n,e=>u(e)||[]);return o.length>0?o:null!=r?[e]:null},[d]),h=e=>{const t=e.cascadeChildren||[];return[e,...cu()(t).call(t,h)]},p=h(t),f=Object(w.useMemo)(()=>u(t)||[t],[t,u]);if(Object(w.useEffect)(()=>{const e=null==s?void 0:s[0],t=C()(p).call(p,e=>!l()(f).call(f,e));Or()(t).call(t,t=>t.id===e)&&r(!0)},[s]),null==(a=t.cascadeChildren)||!a.length)return Object(ut.d)(yu,{dataMaskSelected:e,filter:t,directPathToChild:i,onFilterSelectionChange:o});const b=Object(ut.d)(wu,null,Object(ut.d)(ku,null,Object(ut.d)(Ru,{name:"edit"}),Object(_.e)("Select parent filters")," (",p.length,")"),Object(ut.d)(Ru,{name:"close",onClick:()=>r(!1)})),m=Object(ut.d)(xu,{dataMaskSelected:e,key:t.id,filter:t,directPathToChild:n?s:void 0,onFilterSelectionChange:o});return Object(ut.d)(Qs.a,{content:m,title:b,trigger:"click",visible:n,onVisibleChange:r,placement:"rightTop",id:t.id,overlayStyle:{minWidth:"400px",maxWidth:"600px"}},Object(ut.d)("div",null,Tt()(f).call(f,n=>Object(ut.d)(yu,{dataMaskSelected:e,key:n.id,filter:n,onFilterSelectionChange:o,directPathToChild:s,icon:Object(ut.d)(k.a.Fragment,null,0!==t.cascadeChildren.length&&Object(ut.d)(Tu,{onClick:()=>r(!0)},Object(ut.d)(zn.a,{name:"filter"})," ",p.length))}))))};function Fu(e){var t;const n=function(e){const t={};return v()(e).call(e,e=>{const[n]=e.cascadeParentIds||[];n&&(t[n]||(t[n]=[]),t[n].push(e))}),t}(e),r=e=>{const t=n[e.id]||[];return{...e,cascadeChildren:Tt()(t).call(t,r)}};return Tt()(t=C()(e).call(e,e=>{var t;return!(null!=(t=e.cascadeParentIds)&&t.length)})).call(t,r)}const Iu=$.g.div`
  padding: ${({theme:e})=>4*e.gridUnit}px;
  &:hover {
    cursor: pointer;
  }
`;var Mu=({directPathToChild:e,dataMaskSelected:t,onFilterSelectionChange:n})=>{var r,i;const[a,s]=Object(w.useState)(null),c=bd(),d=Object(o.d)(e=>{var t;return null==(t=e.dashboardLayout)?void 0:t.present}),u=Object(o.d)(e=>{var t;return null==(t=e.dashboardState)?void 0:t.lastFocusedTabId}),p=m()(c),f=k.a.useMemo(()=>{const e=new Array(p.length);for(let t=0;t<p.length;t+=1)e[t]=su();return e},[p.length]),b=Object(w.useMemo)(()=>Fu(Tt()(p).call(p,e=>({...e,dataMask:t[e.id]}))),[p,t]),g=new h.a(Tt()(b).call(b,e=>e.id));let y=[];const O=[],S=Or()(r=m()(d)).call(r,e=>e.type===E.l),j=S&&b.length>0;return u&&S?v()(b).call(b,(e,t)=>{var n;null!=(n=b[t].tabsInScope)&&l()(n).call(n,u)?y.push(e):O.push(e)}):y=b,Object(ut.d)(Iu,null,Tt()(i=C()(f).call(f,(e,t)=>g.has(p[t].id))).call(i,(r,o)=>Object(ut.d)(iu,{node:r},Object(ut.d)(_u,{key:b[o].id,dataMaskSelected:t,visible:a===b[o].id,onVisibleChange:e=>s(e?b[o].id:null),filter:b[o],onFilterSelectionChange:n,directPathToChild:e}))),Tt()(y).call(y,e=>{const t=$c()(p).call(p,t=>t.id===e.id);return Object(ut.d)(au,{node:f[t]})}),j&&Object(ut.d)(Yt.g,{ghost:!0,bordered:!0,expandIconPosition:"right",collapsible:0===O.length?"disabled":void 0,css:e=>Object(ut.c)("&.ant-collapse{margin-top:",y.length>0?6*e.gridUnit:0,"px;&>.ant-collapse-item{&>.ant-collapse-header{padding-left:0;padding-bottom:",2*e.gridUnit,"px;&>.ant-collapse-arrow{right:",e.gridUnit,"px;}}& .ant-collapse-content-box{padding:",4*e.gridUnit,"px 0 0;}}}","")},Object(ut.d)(Yt.g.Panel,{header:`${Object(_.e)("Filters out of scope")} (${O.length})`,key:"1"},Tt()(O).call(O,e=>{const t=$c()(b).call(b,t=>t.id===e.id);return Object(ut.d)(au,{node:f[t]})}))))};const Pu=Object(zi.a)("filter-bar"),zu=$.g.div`
  width: ${({theme:e})=>8*e.gridUnit}px;
  & .ant-tabs-top > .ant-tabs-nav {
    margin: 0;
  }
  &.open {
    width: ${"250px"}; // arbitrary...
  }
`,Eu=$.g.div`
  & .ant-typography-edit-content {
    left: 0;
    margin-top: 0;
    width: 100%;
  }
  position: absolute;
  top: 0;
  left: 0;
  flex-direction: column;
  flex-grow: 1;
  width: ${"250px"}; // arbitrary...
  background: ${({theme:e})=>e.colors.grayscale.light5};
  border-right: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  min-height: 100%;
  display: none;
  /* &.animated {
    display: flex;
    transform: translateX(-100%);
    transition: transform ${({theme:e})=>e.transitionTiming}s;
    transition-delay: 0s;
  }  */

  &.open {
    display: flex;
    /* &.animated {
      transform: translateX(0);
      transition-delay: ${({theme:e})=>2*e.transitionTiming}s;
    } */
  }
`,Du=$.g.div`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: ${({theme:e})=>8*e.gridUnit}px;
  padding-top: ${({theme:e})=>2*e.gridUnit}px;
  display: none;
  text-align: center;
  /* &.animated {
    display: block;
    transform: translateX(-100%);
    transition: transform ${({theme:e})=>e.transitionTiming}s;
    transition-delay: 0s;
  } */

  &.open {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: ${({theme:e})=>2*e.gridUnit}px;
    /* &.animated {
      transform: translateX(0);
      transition-delay: ${({theme:e})=>3*e.transitionTiming}s;
    } */
  }

  svg {
    width: ${({theme:e})=>4*e.gridUnit}px;
    height: ${({theme:e})=>4*e.gridUnit}px;
    cursor: pointer;
  }
`,Nu=Object($.g)(zn.a)`
  color: ${({theme:e})=>e.colors.primary.base};
  margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
`,qu=Object($.g)(Yt.x)`
  & .ant-tabs-nav-list {
    width: 100%;
  }
  & .ant-tabs-tab {
    display: flex;
    justify-content: center;
    margin: 0;
    flex: 1;
  }
`;var Au=({filtersOpen:e,toggleFiltersBar:t,directPathToChild:n})=>{const[r,i]=Object(w.useState)(null),[a,s]=Object(ad.a)({}),l=Object(o.c)(),c=fd(),d=m()(c),[u,h]=Object(w.useState)(nd.AllFilters),p=bd(),b=m()(p),g=md(),[y,O]=Object(w.useState)(!1);Object(w.useEffect)(()=>{s(()=>g)},[io()(g),s]);const S=(e,t)=>{O(u!==nd.AllFilters),s(n=>{var r,o,i;(a[e.id]&&e.isInstant||void 0!==(null==(r=t.filterState)?void 0:r.value)&&void 0===(null==(o=a[e.id])?void 0:null==(i=o.filterState)?void 0:i.value)&&e.requiredFirst)&&l(Object(id.e)(e.id,t)),n[e.id]={...Object(sd.b)(e.id),...t}})};((e,t)=>{const n=bd(),r=md();Object(w.useEffect)(()=>{var r;v()(r=f()(e)).call(r,e=>{n[e]||t(t=>{delete t[e]})})},[r,e,n,t])})(a,s);const j=m()(a),x=m()(g),k=Object(cl.f)(ld(a),ld(g),{ignoreUndefined:!0})||j.length!==x.length,R=(()=>{const[e,t]=Object(w.useState)(!1),n=bd(),r=Object(o.d)(e=>e.charts);let i=0;return e||(i=document.querySelectorAll('[data-ui-anchor="chart"]').length),Object(w.useEffect)(()=>{var o,a;if(e)return;if(q()(o=m()(n)).call(o,({requiredFirst:e})=>e))return void t(!0);let s;0===i&&(s=Tn()(()=>{t(!0)},1e3)),i>0&&void 0!==s&&clearTimeout(s);const l=C()(a=m()(r)).call(a,({chartStatus:e})=>"loading"!==e).length;i>0&&l>=i&&t(!0)},[r,e,i]),e})();return Object(ut.d)(zu,$n()({},Pu(),{className:L()({open:e})}),Object(ut.d)(Du,$n()({},Pu("collapsable"),{className:L()({open:!e}),onClick:()=>t(!0)}),Object(ut.d)(Nu,$n()({name:"collapse"},Pu("expand-button"))),Object(ut.d)(zn.a,$n()({name:"filter"},Pu("filter-icon")))),Object(ut.d)(Eu,{className:L()({open:e})},Object(ut.d)(tu,{toggleFiltersBar:t,onApply:()=>{const e=f()(a);v()(e).call(e,e=>{a[e]&&l(Object(id.e)(e,a[e]))})},setDataMaskSelected:s,isApplyDisabled:k,dataMaskSelected:a,dataMaskApplied:g}),R?Object(fi.c)(fi.a.DASHBOARD_NATIVE_FILTERS_SET)?Object(ut.d)(qu,{centered:!0,onChange:h,defaultActiveKey:nd.AllFilters,activeKey:r?nd.AllFilters:void 0},Object(ut.d)(Yt.x.TabPane,{tab:Object(_.e)(`All Filters (${b.length})`),key:nd.AllFilters},r&&Object(ut.d)(Kd,{dataMaskSelected:a,disabled:!k,onCancel:()=>i(null),filterSetId:r}),Object(ut.d)(Mu,{dataMaskSelected:a,directPathToChild:n,onFilterSelectionChange:S})),Object(ut.d)(Yt.x.TabPane,{disabled:!!r,tab:Object(_.e)(`Filter Sets (${d.length})`),key:nd.FilterSets},Object(ut.d)(Ld,{onEditFilterSet:i,disabled:!k,dataMaskSelected:a,isFilterSetChanged:y,onFilterSelectionChange:S}))):Object(ut.d)(Mu,{dataMaskSelected:a,directPathToChild:n,onFilterSelectionChange:S}):Object(ut.d)(M.a,null)))};const Lu=$.g.div`
  position: relative;
  width: ${({theme:e})=>8*e.gridUnit}px;
  flex: 0 0 ${({theme:e})=>8*e.gridUnit}px;
  /* these animations (which can be enabled with the "animated" class) look glitchy due to chart resizing */
  /* keeping these for posterity, in case we can improve that resizing performance */
  /* &.animated {
    transition: width 0;
    transition-delay: ${({theme:e})=>2*e.transitionTiming}s;
  } */
  &.open {
    width: 250px;
    flex: 0 0 250px;
    /* &.animated {
      transition-delay: 0s;
    } */
  }
`,Uu=$.g.div`
  display: grid;
  position: absolute;
  overflow: auto;
  height: 100%;
`,$u=({topOffset:e,children:t,filtersOpen:n})=>Object(ut.d)(Lu,{className:L()({open:n})},Object(ut.d)(U.StickyContainer,null,Object(ut.d)(U.Sticky,{topOffset:-e,bottomOffset:1/0},({style:n,isSticky:r,distanceFromTop:o})=>Object(ut.d)(Uu,{style:r?{...n,top:e,height:`calc(100vh - ${e}px)`}:{height:`calc(100vh - ${o}px)`}},t)))),Hu=e=>{const t=e[X.h].children[0];return t===X.d?e[X.h]:e[t]},Bu=(e,t)=>"ant-tabs-nav-wrap"===e.target.className||/icon-button/.test(e.target.className)&&t.contains(e.target),Wu=(e,t)=>Math.max(0,Hc({currentComponent:Hu(e),directPathToChild:t}));var Vu=n(419),Gu=n.n(Vu),Ku=n(89),Qu=n.n(Ku);const Yu={depth:T.a.number.isRequired,editMode:T.a.bool.isRequired,gridComponent:He.b.isRequired,handleComponentDrop:T.a.func.isRequired,isComponentVisible:T.a.bool.isRequired,resizeComponent:T.a.func.isRequired,setDirectPathToChild:T.a.func.isRequired,width:T.a.number.isRequired};class Ju extends k.a.PureComponent{constructor(e){var t,n,r,o,i,a,s;super(e),this.state={isResizing:!1,rowGuideTop:null},this.handleResizeStart=x()(t=this.handleResizeStart).call(t,this),this.handleResize=x()(n=this.handleResize).call(n,this),this.handleResizeStop=x()(r=this.handleResizeStop).call(r,this),this.handleTopDropTargetDrop=x()(o=this.handleTopDropTargetDrop).call(o,this),this.getRowGuidePosition=x()(i=this.getRowGuidePosition).call(i,this),this.setGridRef=x()(a=this.setGridRef).call(a,this),this.handleChangeTab=x()(s=this.handleChangeTab).call(s,this)}getRowGuidePosition(e){return e&&this.grid?e.getBoundingClientRect().bottom-this.grid.getBoundingClientRect().top-2:null}setGridRef(e){this.grid=e}handleResizeStart({ref:e,direction:t}){let n=null;"bottom"!==t&&"bottomRight"!==t||(n=this.getRowGuidePosition(e)),this.setState(()=>({isResizing:!0,rowGuideTop:n}))}handleResize({ref:e,direction:t}){"bottom"!==t&&"bottomRight"!==t||this.setState(()=>({rowGuideTop:this.getRowGuidePosition(e)}))}handleResizeStop({id:e,widthMultiple:t,heightMultiple:n}){this.props.resizeComponent({id:e,width:t,height:n}),this.setState(()=>({isResizing:!1,rowGuideTop:null}))}handleTopDropTargetDrop(e){e&&this.props.handleComponentDrop({...e,destination:{...e.destination,index:0}})}handleChangeTab({pathToTabIndex:e}){this.props.setDirectPathToChild(e)}render(){var e,t,n;const{gridComponent:r,handleComponentDrop:o,depth:i,editMode:a,width:s,isComponentVisible:l}=this.props,c=(s+X.n)/X.l-X.n,{isResizing:d,rowGuideTop:u}=this.state;return s<100?null:Object(ut.d)("div",{className:"dashboard-grid",ref:this.setGridRef},Object(ut.d)("div",{className:"grid-content"},a&&Object(ut.d)(bt,{component:r,depth:i,parentComponent:null,index:0,orientation:"column",onDrop:this.handleTopDropTargetDrop,className:"empty-droptarget",editMode:!0},({dropIndicatorProps:e})=>e&&Object(ut.d)("div",{className:"drop-indicator drop-indicator--bottom"})),Tt()(e=r.children).call(e,(e,t)=>Object(ut.d)(rd,{key:e,id:e,parentId:r.id,depth:i+1,index:t,availableColumnCount:X.l,columnWidth:c,isComponentVisible:l,onResizeStart:this.handleResizeStart,onResize:this.handleResize,onResizeStop:this.handleResizeStop,onChangeTab:this.handleChangeTab})),a&&r.children.length>0&&Object(ut.d)(bt,{component:r,depth:i,parentComponent:null,index:r.children.length,orientation:"column",onDrop:o,className:"empty-droptarget",editMode:!0},({dropIndicatorProps:e})=>e&&Object(ut.d)("div",{className:"drop-indicator drop-indicator--top"})),d&&Tt()(t=gc()(n=Array(X.l)).call(n,null)).call(t,(e,t)=>Object(ut.d)("div",{key:`grid-column-${t}`,className:"grid-column-guide",style:{left:t*X.n+t*c,width:c}})),d&&u&&Object(ut.d)("div",{className:"grid-row-guide",style:{top:u,width:s}})))}}Ju.propTypes=Yu,Ju.defaultProps={};var Xu=Ju;var Zu=Object(o.b)((function({dashboardState:e}){return{editMode:e.editMode}}),(function(e){return Object(r.b)({handleComponentDrop:Bo.o,resizeComponent:Bo.q,setDirectPathToChild:hr.C},e)}))(Xu);var eh=({topLevelTabs:e})=>{const t=Object(o.d)(e=>e.dashboardLayout.present),n=Object(o.d)(e=>e.nativeFilters.filters),r=Object(o.d)(e=>e.dashboardState.directPathToChild),[i,a]=Object(w.useState)(Wu(t,r)),s=Object(o.c)();Object(w.useEffect)(()=>{a(Wu(t,r))},[Wc(r)]);const l=m()(n),c=Tt()(l).call(l,e=>e.scope);Object(w.useEffect)(()=>{v()(l).call(l,e=>{const n=e.scope,r=Object(Dr.d)({filterScope:{scope:n.rootPath,immune:n.excluded}}),o=Object(Zo.a)(t,r);Qu()(e,{chartsInScope:r,tabsInScope:Gu()(o)})}),s(Object(ud.f)(l))},[io()(c),io()(t)]);const d=e?e.children:[X.d],u=Math.min(i,d.length-1),h=0===u?X.d:u.toString();return Object(ut.d)("div",{className:"grid-container"},Object(ut.d)(J,null,({width:e})=>Object(ut.d)(B.c,{id:X.d,activeKey:h,renderTabBar:()=>Object(ut.d)(k.a.Fragment,null),fullWidth:!1,animated:!1,allowOverflow:!0},Tt()(d).call(d,(n,r)=>Object(ut.d)(B.c.TabPane,{key:0===r?X.d:r.toString()},Object(ut.d)(Zu,{gridComponent:t[n],depth:X.g+1,width:e,isComponentVisible:r===i}))))))};const th=$.g.div`
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  height: auto;
  flex-grow: 1;

  .grid-container .dashboard-component-tabs {
    box-shadow: none;
    padding-left: 0;
  }

  .grid-container {
    /* without this, the grid will not get smaller upon toggling the builder panel on */
    min-width: 0;
    width: 100%;
    flex-grow: 1;
    position: relative;
    margin-top: ${({theme:e})=>6*e.gridUnit}px;
    margin-right: ${({theme:e})=>8*e.gridUnit}px;
    margin-bottom: ${({theme:e})=>6*e.gridUnit}px;
    margin-left: ${({theme:e,dashboardFiltersOpen:t,editMode:n})=>t||n?8*e.gridUnit:0}px;
  }

  .dashboard-component-chart-holder {
    // transitionable traits to show filter relevance
    transition: opacity ${({theme:e})=>e.transitionTiming}s,
      border-color ${({theme:e})=>e.transitionTiming}s,
      box-shadow ${({theme:e})=>e.transitionTiming}s;
    border: 0 solid transparent;
  }
`;var nh=()=>{const e=Object(o.c)(),t=Object(o.d)(e=>e.dashboardLayout.present),n=Object(o.d)(e=>e.dashboardState.editMode),r=Object(o.d)(e=>e.dashboardState.directPathToChild),i=({pathToTabIndex:t})=>{e(Object(hr.C)(t))},a=()=>{e(Object(Bo.n)());const n=Bc(Hu(t),0);e(Object(hr.C)(n))},s=t[X.h],l=s.children[0],c=l!==X.d?t[l]:void 0,d=Object(uo.b)(Ln.g.standalone)===X.j.HIDE_NAV_AND_TITLE,u=(d?0:67)+(c?47:0),{showDashboard:h,dashboardFiltersOpen:p,toggleDashboardFiltersOpen:f,nativeFiltersEnabled:b}=(()=>{var e;const[t,n]=Object(w.useState)(!1),[r,i]=Object(w.useState)(null==(e=Object(uo.b)(Ln.g.showFilters))||e),a=Object(o.d)(e=>{var t;return null==(t=e.dashboardInfo.metadata)?void 0:t.show_native_filters}),s=Object(o.d)(({dashboardInfo:e})=>e.dash_edit_perm),l=bd(),c=m()(l),d=a&&Object(fi.c)(fi.a.DASHBOARD_NATIVE_FILTERS)&&(s||!s&&0!==c.length),u=C()(c).call(c,({requiredFirst:e})=>e),h=md(),p=t||!d||!(d&&u.length&&q()(u).call(u,({id:e})=>{var t,n;return void 0===(null==(t=h[e])?void 0:null==(n=t.filterState)?void 0:n.value)})),f=e=>{i(null!=e?e:!r)};return Object(w.useEffect)(()=>{0===c.length&&r&&d&&f(!1)},[c.length]),Object(w.useEffect)(()=>{p&&n(!0)},[p]),{showDashboard:p,dashboardFiltersOpen:r,toggleDashboardFiltersOpen:f,nativeFiltersEnabled:d}})();return Object(ut.d)(U.StickyContainer,{className:L()("dashboard",n&&"dashboard--editing")},Object(ut.d)(U.Sticky,null,({style:t})=>Object(ut.d)(bt,{component:s,parentComponent:null,depth:X.g,index:0,orientation:"column",onDrop:t=>e(Object(Bo.o)(t)),editMode:n,disableDragdrop:!!c,style:{zIndex:100,...t}},({dropIndicatorProps:e})=>Object(ut.d)("div",null,!d&&Object(ut.d)(Go,null),e&&Object(ut.d)("div",e),c&&Object(ut.d)(dc,{shouldFocus:Bu,menuItems:[Object(ut.d)(Qo,{className:"fa fa-level-down",label:"Collapse tab content",onClick:a})],editMode:n},Object(ut.d)(rd,{id:null==c?void 0:c.id,parentId:X.h,depth:X.g+1,index:0,renderTabContent:!1,renderHoverMenu:!1,onChangeTab:i}))))),Object(ut.d)(th,{className:"dashboard-content",dashboardFiltersOpen:p,editMode:n},b&&!n&&Object(ut.d)($u,{filtersOpen:p,topOffset:u},Object(ut.d)(H.a,null,Object(ut.d)(Au,{filtersOpen:p,toggleFiltersBar:f,directPathToChild:r}))),h?Object(ut.d)(eh,{topLevelTabs:c}):Object(ut.d)(M.a,null),n&&Object(ut.d)(kn,{topOffset:u})),Object(ut.d)(od.a,null))},rh=n(1731),oh=n(5185),ih=n.n(oh);function ah({extensions:e,placeholder:t,id:n}){return Object(ut.d)(ih.a,{id:n,placeholder:t,extensions:e})}const sh=async e=>{var t,n;let r;try{r=await An.a.get({endpoint:`/dashboardasync/api/read?_oc_DashboardModelViewAsync=changed_on&_od_DashboardModelViewAsync=desc&_flt_2_dashboard_title=${e}`})}catch(e){return[{title:Object(_.e)("An error occurred while fetching dashboards")}]}return null==(t=r)?void 0:Tt()(n=t.json.result).call(n,e=>({title:e.dashboard_title,...e}))},lh=Object($.g)(bi.b)`
  margin-top: 20%;

  .ant-modal-body {
    padding: 0;
  }
`;function ch({logEvent:e}){const t=Object(w.useRef)(),[n,r]=Object(w.useState)(!1);return Object(rh.a)(()=>{function n(n){var o;if(!Object(fi.c)(fi.a.OMNIBAR))return;const i=n.ctrlKey||n.metaKey,a=l()(o=["KeyK","KeyS"]).call(o,n.code);var s;i&&a&&(e(Pn.k,{show_omni:!!t.current}),t.current=!t.current,r(t.current),t.current&&(null==(s=document.getElementById("InputOmnibar"))||s.focus()))}return t.current=!1,document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)}),Object(ut.d)(lh,{title:"",show:n,hideFooter:!0,closable:!1,onHide:()=>{}},Object(ut.d)(ah,{id:"InputOmnibar",placeholder:"Search all dashboards",extensions:[sh]}))}n(5187);const dh=[E.a,E.h];function uh(e){var t;return!Or()(t=m()(e)).call(t,({type:e})=>e&&l()(dh).call(dh,e))}const hh=(e,t)=>{var n;const r=f()(e),o=f()(t),i=C()((a=r,s=o,n=[...C()(a).call(a,e=>!l()(s).call(s,e)),...C()(s).call(s,e=>!l()(a).call(a,e))])).call(n,n=>e[n]||t[n]);var a,s;const c=new h.a([...r,...o]);return v()(c).call(c,n=>{Object(cl.f)(e[n],t[n])||i.push(n)}),[...new h.a(i)]},ph={actions:T.a.shape({addSliceToDashboard:T.a.func.isRequired,removeSliceFromDashboard:T.a.func.isRequired,triggerQuery:T.a.func.isRequired,logEvent:T.a.func.isRequired}).isRequired,dashboardInfo:He.d.isRequired,dashboardState:He.e.isRequired,charts:T.a.objectOf(He.a).isRequired,slices:T.a.objectOf(He.g).isRequired,activeFilters:T.a.object.isRequired,chartConfiguration:T.a.object.isRequired,datasources:T.a.object.isRequired,ownDataCharts:T.a.object.isRequired,layout:T.a.object.isRequired,impressionId:T.a.string.isRequired,initMessages:T.a.array,timeout:T.a.number,userId:T.a.string};class fh extends k.a.PureComponent{static onBeforeUnload(e){e?window.addEventListener("beforeunload",fh.unload):window.removeEventListener("beforeunload",fh.unload)}static unload(){const e=Object(_.e)("You have unsaved changes.");return window.event.returnValue=e,e}constructor(e){var t,n,r;super(e),this.appliedFilters=null!=(t=e.activeFilters)?t:{},this.appliedOwnDataCharts=null!=(n=e.ownDataCharts)?n:{},this.onVisibilityChange=x()(r=this.onVisibilityChange).call(r,this)}componentDidMount(){const e=document.getElementById("app"),t=(null==e?void 0:e.getAttribute("data-bootstrap"))||"",{dashboardState:n,layout:r}=this.props,o={is_edit_mode:n.editMode,mount_duration:Pn.q.getTimestamp(),is_empty:uh(r),is_published:n.isPublished,bootstrap_data_length:t.length},i=Object(Dl.a)();i&&(o.target_id=i),this.props.actions.logEvent(Pn.i,o),"hidden"===document.visibilityState&&(this.visibilityEventData={start_offset:Pn.q.getTimestamp(),ts:(new Date).getTime()}),window.addEventListener("visibilitychange",this.onVisibilityChange),this.applyCharts()}componentDidUpdate(){this.applyCharts()}UNSAFE_componentWillReceiveProps(e){const t=D(this.props.layout),n=D(e.layout);if(t.length<n.length){const r=C()(n).call(n,e=>-1===O()(t).call(t,e));v()(r).call(r,t=>{return this.props.actions.addSliceToDashboard(t,(n=e.layout,r=t,q()(o=m()(n)).call(o,e=>e&&e.type===E.a&&e.meta&&e.meta.chartId===r)));var n,r,o})}else if(t.length>n.length){const e=C()(t).call(t,e=>-1===O()(n).call(n,e));v()(e).call(e,e=>this.props.actions.removeSliceFromDashboard(e))}}applyCharts(){const{hasUnsavedChanges:e,editMode:t}=this.props.dashboardState,{appliedFilters:n,appliedOwnDataCharts:r}=this,{activeFilters:o,ownDataCharts:i,chartConfiguration:a}=this.props;Object(F.b)(F.a.DASHBOARD_CROSS_FILTERS)&&!a||(t||Object(cl.f)(r,i,{ignoreUndefined:!0})&&Object(cl.f)(n,o,{ignoreUndefined:!0})||this.applyFilters(),e?fh.onBeforeUnload(!0):fh.onBeforeUnload(!1))}componentWillUnmount(){window.removeEventListener("visibilitychange",this.onVisibilityChange)}onVisibilityChange(){if("hidden"===document.visibilityState)this.visibilityEventData={start_offset:Pn.q.getTimestamp(),ts:(new Date).getTime()};else if("visible"===document.visibilityState){const e=this.visibilityEventData.start_offset;this.props.actions.logEvent(Pn.g,{...this.visibilityEventData,duration:Pn.q.getTimestamp()-e})}}getAllCharts(){return m()(this.props.charts)}applyFilters(){var e;const{appliedFilters:t}=this,{activeFilters:n,ownDataCharts:r}=this.props,o=f()(n),i=f()(t),s=new h.a(d()(o).call(o,i)),c=hh(r,this.appliedOwnDataCharts);v()(e=[...s]).call(e,e=>{if(!l()(o).call(o,e)&&l()(i).call(i,e))c.push(...t[e].scope);else if(l()(i).call(i,e)){if(Object(cl.f)(a()(t[e]),a()(n[e]),{ignoreUndefined:!0})||c.push(...n[e].scope),!Object(cl.f)(t[e].scope,n[e].scope)){var r;const o=d()(r=n[e].scope||[]).call(r,t[e].scope||[]);c.push(...o)}}else c.push(...n[e].scope)}),this.refreshCharts([...new h.a(c)]),this.appliedFilters=n,this.appliedOwnDataCharts=r}refreshCharts(e){v()(e).call(e,e=>{this.props.actions.triggerQuery(!0,e)})}render(){return this.context.loading?Object(ut.d)(M.a,null):Object(ut.d)(k.a.Fragment,null,Object(ut.d)(ch,{logEvent:this.props.actions.logEvent}),Object(ut.d)(nh,null))}}fh.contextType=I.b,fh.propTypes=ph,fh.defaultProps={initMessages:[],timeout:60,userId:""};var bh=fh;t.default=Object(o.b)((function(e){var t,n;const{datasources:r,sliceEntities:o,charts:i,dataMask:a,dashboardInfo:s,dashboardState:l,dashboardLayout:c,impressionId:d,nativeFilters:u}=e;return{initMessages:s.common.flash_messages,timeout:s.common.conf.SUPERSET_WEBSERVER_TIMEOUT,userId:s.userId,dashboardInfo:s,dashboardState:l,charts:i,datasources:r,activeFilters:{...Object(Dr.b)(),...ii({chartConfiguration:null==(t=s.metadata)?void 0:t.chart_configuration,nativeFilters:u.filters,dataMask:a,layout:c.present})},chartConfiguration:null==(n=s.metadata)?void 0:n.chart_configuration,ownDataCharts:oi(a,"ownState"),slices:o.slices,layout:c.present,impressionId:d}}),(function(e){return{actions:Object(r.b)({addSliceToDashboard:hr.s,removeSliceFromDashboard:hr.x,triggerQuery:Yo.triggerQuery,logEvent:Vo.logEvent},e)}}))(bh)}}]);