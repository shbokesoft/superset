{"version":3,"sources":["webpack:///./images/empty.svg","webpack:///./src/components/ImportModal/index.tsx","webpack:///./src/components/IndeterminateCheckbox/index.tsx","webpack:///./src/components/InfoTooltip/index.tsx","webpack:///./src/components/ListView/CardCollection.tsx","webpack:///./src/components/ListView/CardSortSelect.tsx","webpack:///./src/components/ListView/Filters/Base.ts","webpack:///./src/components/ListView/Filters/DateRange.tsx","webpack:///./src/components/ListView/Filters/Search.tsx","webpack:///./src/components/ListView/Filters/Select.tsx","webpack:///./src/components/ListView/Filters/index.tsx","webpack:///./src/components/ListView/ListView.tsx","webpack:///./src/components/ListView/index.ts","webpack:///./src/components/ListView/types.ts","webpack:///./src/components/ListView/utils.ts","webpack:///./src/components/SearchInput/index.tsx","webpack:///./src/views/CRUD/data/common.ts","webpack:///./src/views/CRUD/data/database/DatabaseList.tsx","webpack:///./src/views/CRUD/data/database/DatabaseModal/DatabaseConnectionForm.tsx","webpack:///./src/views/CRUD/data/database/DatabaseModal/ExtraOptions.tsx","webpack:///./src/views/CRUD/data/database/DatabaseModal/SqlAlchemyForm.tsx","webpack:///./src/views/CRUD/data/database/DatabaseModal/index.tsx","webpack:///./src/views/CRUD/data/database/DatabaseModal/styles.ts","webpack:///./src/views/CRUD/data/database/state.ts","webpack:///./src/views/CRUD/data/database/types.ts"],"names":[],"mappings":"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","file":"DatabaseList.9ed865ea.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M83.195 1.366L103 24v38a4 4 0 01-4 4H20a4 4 0 01-4-4V24L35.805 1.366A4 4 0 0138.815 0h41.37a4 4 0 013.01 1.366zM101 26v36a2 2 0 01-2 2H20a2 2 0 01-2-2V26h17.25A4.75 4.75 0 0140 30.75a6.75 6.75 0 006.75 6.75h25.5A6.75 6.75 0 0079 30.75 4.75 4.75 0 0183.75 26H101zm-.658-2L81.69 2.683A2 2 0 0080.185 2h-41.37a2 2 0 00-1.505.683L18.657 24H35.25A6.75 6.75 0 0142 30.75a4.75 4.75 0 004.75 4.75h25.5A4.75 4.75 0 0077 30.75 6.75 6.75 0 0183.75 24h16.592z\",\n  fill: \"#D1D1D1\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16 53.29C6.074 55.7 0 58.94 0 62.5 0 69.956 26.64 76 59.5 76S119 69.956 119 62.5c0-3.56-6.074-6.799-16-9.21V62a4 4 0 01-4 4H20a4 4 0 01-4-4v-8.71z\",\n  fill: \"#F2F2F2\"\n});\n\nfunction SvgEmpty(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 119,\n    height: 76,\n    fill: \"none\"\n  }, props), _ref, _ref2);\n}\n\nexport default __webpack_public_path__ + \"139f4a903d3a105300fc2d4c22f0931d.svg\";\nexport { SvgEmpty as ReactComponent };","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { FunctionComponent, useEffect, useRef, useState } from 'react';\r\nimport { styled, t } from '@superset-ui/core';\r\n\r\nimport Icon from 'src//components/Icon';\r\nimport Modal from 'src/components/Modal';\r\nimport { useImportResource } from 'src/views/CRUD/hooks';\r\nimport { ImportResourceName } from 'src/views/CRUD/types';\r\n\r\nexport const StyledIcon = styled(Icon)`\r\n  margin: auto ${({ theme }) => theme.gridUnit * 2}px auto 0;\r\n`;\r\n\r\nconst HelperMessage = styled.div`\r\n  display: block;\r\n  color: ${({ theme }) => theme.colors.grayscale.base};\r\n  font-size: ${({ theme }) => theme.typography.sizes.s - 1}px;\r\n`;\r\n\r\nconst StyledInputContainer = styled.div`\r\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\r\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\r\n\r\n  & > div {\r\n    margin: ${({ theme }) => theme.gridUnit}px 0;\r\n  }\r\n\r\n  &.extra-container {\r\n    padding-top: 8px;\r\n  }\r\n\r\n  .confirm-overwrite {\r\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\r\n  }\r\n\r\n  .input-container {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    label {\r\n      display: flex;\r\n      margin-right: ${({ theme }) => theme.gridUnit * 2}px;\r\n    }\r\n\r\n    i {\r\n      margin: 0 ${({ theme }) => theme.gridUnit}px;\r\n    }\r\n  }\r\n\r\n  input,\r\n  textarea {\r\n    flex: 1 1 auto;\r\n  }\r\n\r\n  textarea {\r\n    height: 160px;\r\n    resize: none;\r\n  }\r\n\r\n  input::placeholder,\r\n  textarea::placeholder {\r\n    color: ${({ theme }) => theme.colors.grayscale.light1};\r\n  }\r\n\r\n  textarea,\r\n  input[type='text'],\r\n  input[type='number'] {\r\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\r\n      ${({ theme }) => theme.gridUnit * 2}px;\r\n    border-style: none;\r\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\r\n    border-radius: ${({ theme }) => theme.gridUnit}px;\r\n\r\n    &[name='name'] {\r\n      flex: 0 1 auto;\r\n      width: 40%;\r\n    }\r\n\r\n    &[name='sqlalchemy_uri'] {\r\n      margin-right: ${({ theme }) => theme.gridUnit * 3}px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport interface ImportModelsModalProps {\r\n  resourceName: ImportResourceName;\r\n  resourceLabel: string;\r\n  passwordsNeededMessage: string;\r\n  confirmOverwriteMessage: string;\r\n  addDangerToast: (msg: string) => void;\r\n  addSuccessToast: (msg: string) => void;\r\n  onModelImport: () => void;\r\n  show: boolean;\r\n  onHide: () => void;\r\n  passwordFields?: string[];\r\n  setPasswordFields?: (passwordFields: string[]) => void;\r\n}\r\n\r\nconst ImportModelsModal: FunctionComponent<ImportModelsModalProps> = ({\r\n  resourceName,\r\n  resourceLabel,\r\n  passwordsNeededMessage,\r\n  confirmOverwriteMessage,\r\n  addDangerToast,\r\n  addSuccessToast,\r\n  onModelImport,\r\n  show,\r\n  onHide,\r\n  passwordFields = [],\r\n  setPasswordFields = () => {},\r\n}) => {\r\n  const [isHidden, setIsHidden] = useState<boolean>(true);\r\n  const [uploadFile, setUploadFile] = useState<File | null>(null);\r\n  const [passwords, setPasswords] = useState<Record<string, string>>({});\r\n  const [needsOverwriteConfirm, setNeedsOverwriteConfirm] = useState<boolean>(\r\n    false,\r\n  );\r\n  const [confirmedOverwrite, setConfirmedOverwrite] = useState<boolean>(false);\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const clearModal = () => {\r\n    setUploadFile(null);\r\n    setPasswordFields([]);\r\n    setPasswords({});\r\n    setNeedsOverwriteConfirm(false);\r\n    setConfirmedOverwrite(false);\r\n    if (fileInputRef && fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handleErrorMsg = (msg: string) => {\r\n    clearModal();\r\n    addDangerToast(msg);\r\n  };\r\n\r\n  const {\r\n    state: { alreadyExists, passwordsNeeded },\r\n    importResource,\r\n  } = useImportResource(resourceName, resourceLabel, handleErrorMsg);\r\n\r\n  useEffect(() => {\r\n    setPasswordFields(passwordsNeeded);\r\n  }, [passwordsNeeded, setPasswordFields]);\r\n\r\n  useEffect(() => {\r\n    setNeedsOverwriteConfirm(alreadyExists.length > 0);\r\n  }, [alreadyExists, setNeedsOverwriteConfirm]);\r\n\r\n  // Functions\r\n  const hide = () => {\r\n    setIsHidden(true);\r\n    onHide();\r\n    clearModal();\r\n  };\r\n\r\n  const onUpload = () => {\r\n    if (uploadFile === null) {\r\n      return;\r\n    }\r\n\r\n    importResource(uploadFile, passwords, confirmedOverwrite).then(result => {\r\n      if (result) {\r\n        addSuccessToast(t('The import was successful'));\r\n        clearModal();\r\n        onModelImport();\r\n      }\r\n    });\r\n  };\r\n\r\n  const changeFile = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { files } = event.target as HTMLInputElement;\r\n    setUploadFile((files && files[0]) || null);\r\n  };\r\n\r\n  const confirmOverwrite = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const targetValue = (event.currentTarget?.value as string) ?? '';\r\n    setConfirmedOverwrite(targetValue.toUpperCase() === t('OVERWRITE'));\r\n  };\r\n\r\n  const renderPasswordFields = () => {\r\n    if (passwordFields.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <h5>Database passwords</h5>\r\n        <HelperMessage>{passwordsNeededMessage}</HelperMessage>\r\n        {passwordFields.map(fileName => (\r\n          <StyledInputContainer key={`password-for-${fileName}`}>\r\n            <div className=\"control-label\">\r\n              {fileName}\r\n              <span className=\"required\">*</span>\r\n            </div>\r\n            <input\r\n              name={`password-${fileName}`}\r\n              autoComplete={`password-${fileName}`}\r\n              type=\"password\"\r\n              value={passwords[fileName]}\r\n              onChange={event =>\r\n                setPasswords({ ...passwords, [fileName]: event.target.value })\r\n              }\r\n            />\r\n          </StyledInputContainer>\r\n        ))}\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderOverwriteConfirmation = () => {\r\n    if (!needsOverwriteConfirm) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <StyledInputContainer>\r\n          <div className=\"confirm-overwrite\">{confirmOverwriteMessage}</div>\r\n          <div className=\"control-label\">\r\n            {t('Type \"%s\" to confirm', t('OVERWRITE'))}\r\n          </div>\r\n          <input\r\n            data-test=\"overwrite-modal-input\"\r\n            id=\"overwrite\"\r\n            type=\"text\"\r\n            onChange={confirmOverwrite}\r\n          />\r\n        </StyledInputContainer>\r\n      </>\r\n    );\r\n  };\r\n\r\n  // Show/hide\r\n  if (isHidden && show) {\r\n    setIsHidden(false);\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      name=\"model\"\r\n      className=\"import-model-modal\"\r\n      disablePrimaryButton={\r\n        uploadFile === null || (needsOverwriteConfirm && !confirmedOverwrite)\r\n      }\r\n      onHandledPrimaryAction={onUpload}\r\n      onHide={hide}\r\n      primaryButtonName={needsOverwriteConfirm ? t('Overwrite') : t('Import')}\r\n      primaryButtonType={needsOverwriteConfirm ? 'danger' : 'primary'}\r\n      width=\"750px\"\r\n      show={show}\r\n      title={<h4>{t('Import %s', resourceLabel)}</h4>}\r\n    >\r\n      <StyledInputContainer>\r\n        <div className=\"control-label\">\r\n          <label htmlFor=\"modelFile\">\r\n            {t('File')}\r\n            <span className=\"required\">*</span>\r\n          </label>\r\n        </div>\r\n        <input\r\n          ref={fileInputRef}\r\n          data-test=\"model-file-input\"\r\n          name=\"modelFile\"\r\n          id=\"modelFile\"\r\n          type=\"file\"\r\n          accept=\".yaml,.json,.yml,.zip\"\r\n          onChange={changeFile}\r\n        />\r\n      </StyledInputContainer>\r\n      {renderPasswordFields()}\r\n      {renderOverwriteConfirmation()}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ImportModelsModal;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { styled } from '@superset-ui/core';\r\nimport Icon from 'src/components/Icon';\r\n\r\nexport interface IndeterminateCheckboxProps {\r\n  indeterminate: boolean;\r\n  id: string;\r\n  checked: boolean;\r\n  onChange: React.EventHandler<React.SyntheticEvent<HTMLInputElement>>;\r\n  title?: string;\r\n  labelText?: string;\r\n}\r\n\r\nconst CheckboxLabel = styled.label`\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  margin-bottom: 0;\r\n`;\r\n\r\nconst IconWithColor = styled(Icon)`\r\n  color: ${({ theme }) => theme.colors.primary.dark1};\r\n  cursor: pointer;\r\n`;\r\n\r\nconst HiddenInput = styled.input`\r\n  &[type='checkbox'] {\r\n    cursor: pointer;\r\n    opacity: 0;\r\n    position: absolute;\r\n    left: 3px;\r\n    margin: 0;\r\n    top: 4px;\r\n  }\r\n`;\r\n\r\nconst InputContainer = styled.div`\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  position: relative;\r\n`;\r\n\r\nconst IndeterminateCheckbox = React.forwardRef(\r\n  (\r\n    {\r\n      indeterminate,\r\n      id,\r\n      checked,\r\n      onChange,\r\n      title = '',\r\n      labelText = '',\r\n    }: IndeterminateCheckboxProps,\r\n    ref: React.MutableRefObject<any>,\r\n  ) => {\r\n    const defaultRef = React.useRef<HTMLInputElement>();\r\n    const resolvedRef = ref || defaultRef;\r\n\r\n    React.useEffect(() => {\r\n      resolvedRef.current.indeterminate = indeterminate;\r\n    }, [resolvedRef, indeterminate]);\r\n\r\n    return (\r\n      <>\r\n        <InputContainer>\r\n          {indeterminate && <IconWithColor name=\"checkbox-half\" />}\r\n          {!indeterminate && checked && <IconWithColor name=\"checkbox-on\" />}\r\n          {!indeterminate && !checked && <Icon name=\"checkbox-off\" />}\r\n          <HiddenInput\r\n            name={id}\r\n            id={id}\r\n            type=\"checkbox\"\r\n            ref={resolvedRef}\r\n            checked={checked}\r\n            onChange={onChange}\r\n          />\r\n        </InputContainer>\r\n        <CheckboxLabel title={title} htmlFor={id}>\r\n          {labelText}\r\n        </CheckboxLabel>\r\n      </>\r\n    );\r\n  },\r\n);\r\n\r\nexport default IndeterminateCheckbox;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport React from 'react';\r\nimport { styled } from '@superset-ui/core';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport Icon from 'src/components/Icon';\r\n\r\nexport interface InfoTooltipProps {\r\n  className?: string;\r\n  tooltip: string;\r\n  placement?:\r\n    | 'bottom'\r\n    | 'left'\r\n    | 'right'\r\n    | 'top'\r\n    | 'topLeft'\r\n    | 'topRight'\r\n    | 'bottomLeft'\r\n    | 'bottomRight'\r\n    | 'leftTop'\r\n    | 'leftBottom'\r\n    | 'rightTop'\r\n    | 'rightBottom'\r\n    | undefined;\r\n  trigger?: string | Array<string>;\r\n  overlayStyle?: any;\r\n  bgColor?: string;\r\n}\r\n\r\nconst StyledTooltip = styled(Tooltip)`\r\n  cursor: pointer;\r\n\r\n  path:first-of-type {\r\n    fill: #999999;\r\n  }\r\n`;\r\n\r\nconst defaultOverlayStyle = {\r\n  fontSize: '12px',\r\n  lineHeight: '16px',\r\n};\r\n\r\nconst defaultColor = 'rgba(0,0,0,0.9)';\r\n\r\nexport default function InfoTooltip({\r\n  tooltip,\r\n  placement = 'right',\r\n  trigger = 'hover',\r\n  overlayStyle = defaultOverlayStyle,\r\n  bgColor = defaultColor,\r\n}: InfoTooltipProps) {\r\n  return (\r\n    <StyledTooltip\r\n      title={tooltip}\r\n      placement={placement}\r\n      trigger={trigger}\r\n      overlayStyle={overlayStyle}\r\n      color={bgColor}\r\n    >\r\n      <Icon name=\"info-solid-small\" />\r\n    </StyledTooltip>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { TableInstance, Row } from 'react-table';\r\nimport { styled } from '@superset-ui/core';\r\nimport cx from 'classnames';\r\n\r\ninterface CardCollectionProps {\r\n  bulkSelectEnabled?: boolean;\r\n  loading: boolean;\r\n  prepareRow: TableInstance['prepareRow'];\r\n  renderCard?: (row: any) => React.ReactNode;\r\n  rows: TableInstance['rows'];\r\n}\r\n\r\nconst CardContainer = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(459px, 1fr));\r\n  grid-gap: ${({ theme }) => theme.gridUnit * 8}px;\r\n`;\r\n\r\nconst CardWrapper = styled.div`\r\n  border: 2px solid transparent;\r\n  &.card-selected {\r\n    border: 2px solid ${({ theme }) => theme.colors.primary.base};\r\n  }\r\n  &.bulk-select {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport default function CardCollection({\r\n  bulkSelectEnabled,\r\n  loading,\r\n  prepareRow,\r\n  renderCard,\r\n  rows,\r\n}: CardCollectionProps) {\r\n  function handleClick(\r\n    event: React.MouseEvent<HTMLDivElement, MouseEvent>,\r\n    toggleRowSelected: Row['toggleRowSelected'],\r\n  ) {\r\n    if (bulkSelectEnabled) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      toggleRowSelected();\r\n    }\r\n  }\r\n\r\n  if (!renderCard) return null;\r\n  return (\r\n    <CardContainer>\r\n      {loading &&\r\n        rows.length === 0 &&\r\n        [...new Array(25)].map((e, i) => (\r\n          <div key={i}>{renderCard({ loading })}</div>\r\n        ))}\r\n      {rows.length > 0 &&\r\n        rows.map(row => {\r\n          if (!renderCard) return null;\r\n          prepareRow(row);\r\n          return (\r\n            <CardWrapper\r\n              className={cx({\r\n                'card-selected': bulkSelectEnabled && row.isSelected,\r\n                'bulk-select': bulkSelectEnabled,\r\n              })}\r\n              key={row.id}\r\n              onClick={e => handleClick(e, row.toggleRowSelected)}\r\n              role=\"none\"\r\n            >\r\n              {renderCard({ ...row.original, loading })}\r\n            </CardWrapper>\r\n          );\r\n        })}\r\n    </CardContainer>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState } from 'react';\r\nimport { styled, withTheme, SupersetThemeProps, t } from '@superset-ui/core';\r\nimport { PartialThemeConfig, Select } from 'src/components/Select';\r\nimport { CardSortSelectOption, FetchDataConfig, SortColumn } from './types';\r\nimport { filterSelectStyles } from './utils';\r\n\r\nconst SortTitle = styled.label`\r\n  font-weight: bold;\r\n  line-height: 27px;\r\n  margin: 0 0.4em 0 0;\r\n`;\r\n\r\nconst SortContainer = styled.div`\r\n  display: inline-flex;\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n  padding-top: ${({ theme }) => theme.gridUnit}px;\r\n  text-align: left;\r\n`;\r\ninterface CardViewSelectSortProps {\r\n  onChange: (conf: FetchDataConfig) => any;\r\n  options: Array<CardSortSelectOption>;\r\n  initialSort?: SortColumn[];\r\n  pageIndex: number;\r\n  pageSize: number;\r\n}\r\n\r\ninterface StyledSelectProps {\r\n  onChange: (value: CardSortSelectOption) => void;\r\n  options: CardSortSelectOption[];\r\n  selectStyles: any;\r\n  theme: SupersetThemeProps['theme'];\r\n  value: CardSortSelectOption;\r\n}\r\n\r\nfunction StyledSelect({\r\n  onChange,\r\n  options,\r\n  selectStyles,\r\n  theme,\r\n  value,\r\n}: StyledSelectProps) {\r\n  const filterSelectTheme: PartialThemeConfig = {\r\n    spacing: {\r\n      baseUnit: 1,\r\n      fontSize: theme.typography.sizes.s,\r\n      minWidth: '5em',\r\n    },\r\n  };\r\n  return (\r\n    <Select\r\n      data-test=\"card-sort-select\"\r\n      clearable={false}\r\n      onChange={onChange}\r\n      options={options}\r\n      stylesConfig={selectStyles}\r\n      themeConfig={filterSelectTheme}\r\n      value={value}\r\n    />\r\n  );\r\n}\r\n\r\nconst StyledCardSortSelect = withTheme(StyledSelect);\r\n\r\nexport const CardSortSelect = ({\r\n  initialSort,\r\n  onChange,\r\n  options,\r\n  pageIndex,\r\n  pageSize,\r\n}: CardViewSelectSortProps) => {\r\n  const defaultSort =\r\n    initialSort && options.find(({ id }) => id === initialSort[0].id);\r\n  const [selectedOption, setSelectedOption] = useState<CardSortSelectOption>(\r\n    defaultSort || options[0],\r\n  );\r\n\r\n  const handleOnChange = (selected: CardSortSelectOption) => {\r\n    setSelectedOption(selected);\r\n    const sortBy = [{ id: selected.id, desc: selected.desc }];\r\n    onChange({ pageIndex, pageSize, sortBy, filters: [] });\r\n  };\r\n\r\n  return (\r\n    <SortContainer>\r\n      <SortTitle>{t('Sort:')}</SortTitle>\r\n      <StyledCardSortSelect\r\n        onChange={(value: CardSortSelectOption) => handleOnChange(value)}\r\n        options={options}\r\n        selectStyles={filterSelectStyles}\r\n        value={selectedOption}\r\n      />\r\n    </SortContainer>\r\n  );\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { ReactNode } from 'react';\r\nimport { styled } from '@superset-ui/core';\r\n\r\nexport interface BaseFilter {\r\n  Header: ReactNode;\r\n  initialValue: any;\r\n}\r\n\r\nexport const FilterContainer = styled.div`\r\n  display: inline-flex;\r\n  margin-right: 2em;\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n  align-items: center;\r\n`;\r\n\r\nexport const FilterTitle = styled.label`\r\n  font-weight: bold;\r\n  margin: 0 0.4em 0 0;\r\n`;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState, useMemo } from 'react';\r\nimport moment, { Moment } from 'moment';\r\nimport { styled } from '@superset-ui/core';\r\nimport { RangePicker as AntRangePicker } from 'src/components/DatePicker';\r\nimport { FilterContainer, BaseFilter, FilterTitle } from './Base';\r\n\r\ninterface DateRangeFilterProps extends BaseFilter {\r\n  onSubmit: (val: number[]) => void;\r\n  name: string;\r\n}\r\n\r\ntype ValueState = [number, number];\r\n\r\nconst RangePicker = styled(AntRangePicker)`\r\n  padding: 0 11px;\r\n  transform: translateX(-7px);\r\n`;\r\n\r\nconst RangeFilterContainer = styled(FilterContainer)`\r\n  margin-right: 1em;\r\n`;\r\n\r\nexport default function DateRangeFilter({\r\n  Header,\r\n  initialValue,\r\n  onSubmit,\r\n}: DateRangeFilterProps) {\r\n  const [value, setValue] = useState<ValueState | null>(initialValue ?? null);\r\n  const momentValue = useMemo((): [Moment, Moment] | null => {\r\n    if (!value || (Array.isArray(value) && !value.length)) return null;\r\n    return [moment(value[0]), moment(value[1])];\r\n  }, [value]);\r\n\r\n  return (\r\n    <RangeFilterContainer>\r\n      <FilterTitle>{Header}:</FilterTitle>\r\n      <RangePicker\r\n        showTime\r\n        bordered={false}\r\n        value={momentValue}\r\n        onChange={momentRange => {\r\n          if (!momentRange) {\r\n            setValue(null);\r\n            onSubmit([]);\r\n            return;\r\n          }\r\n          const changeValue = [\r\n            momentRange[0]?.valueOf() ?? 0,\r\n            momentRange[1]?.valueOf() ?? 0,\r\n          ] as ValueState;\r\n          setValue(changeValue);\r\n          onSubmit(changeValue);\r\n        }}\r\n      />\r\n    </RangeFilterContainer>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState } from 'react';\r\nimport SearchInput from 'src/components/SearchInput';\r\nimport { FilterContainer, BaseFilter } from './Base';\r\n\r\ninterface SearchHeaderProps extends BaseFilter {\r\n  Header: string;\r\n  onSubmit: (val: string) => void;\r\n  name: string;\r\n}\r\n\r\nexport default function SearchFilter({\r\n  Header,\r\n  name,\r\n  initialValue,\r\n  onSubmit,\r\n}: SearchHeaderProps) {\r\n  const [value, setValue] = useState(initialValue || '');\r\n  const handleSubmit = () => {\r\n    if (value) {\r\n      onSubmit(value);\r\n    }\r\n  };\r\n  const onClear = () => {\r\n    setValue('');\r\n    onSubmit('');\r\n  };\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue(e.currentTarget.value);\r\n    if (e.currentTarget.value === '') {\r\n      onClear();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <FilterContainer>\r\n      <SearchInput\r\n        data-test=\"filters-search\"\r\n        placeholder={Header}\r\n        name={name}\r\n        value={value}\r\n        onChange={handleChange}\r\n        onSubmit={handleSubmit}\r\n        onClear={onClear}\r\n      />\r\n    </FilterContainer>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState } from 'react';\r\nimport { withTheme, SupersetThemeProps } from '@superset-ui/core';\r\nimport {\r\n  Select,\r\n  PaginatedSelect,\r\n  PartialThemeConfig,\r\n} from 'src/components/Select';\r\nimport { Filter, SelectOption } from 'src/components/ListView/types';\r\nimport { filterSelectStyles } from 'src/components/ListView/utils';\r\nimport { FilterContainer, BaseFilter, FilterTitle } from './Base';\r\n\r\ninterface SelectFilterProps extends BaseFilter {\r\n  emptyLabel?: string;\r\n  fetchSelects?: Filter['fetchSelects'];\r\n  name?: string;\r\n  onSelect: (selected: any) => any;\r\n  paginate?: boolean;\r\n  selects: Filter['selects'];\r\n  theme: SupersetThemeProps['theme'];\r\n}\r\n\r\nconst CLEAR_SELECT_FILTER_VALUE = 'CLEAR_SELECT_FILTER_VALUE';\r\n\r\nfunction SelectFilter({\r\n  Header,\r\n  emptyLabel = 'None',\r\n  fetchSelects,\r\n  initialValue,\r\n  onSelect,\r\n  paginate = false,\r\n  selects = [],\r\n  theme,\r\n}: SelectFilterProps) {\r\n  const filterSelectTheme: PartialThemeConfig = {\r\n    spacing: {\r\n      baseUnit: 2,\r\n      fontSize: theme.typography.sizes.s,\r\n      minWidth: '5em',\r\n    },\r\n  };\r\n\r\n  const clearFilterSelect = {\r\n    label: emptyLabel,\r\n    value: CLEAR_SELECT_FILTER_VALUE,\r\n  };\r\n\r\n  const options = [clearFilterSelect, ...selects];\r\n  let initialOption = clearFilterSelect;\r\n\r\n  // Set initial value if not async\r\n  if (!fetchSelects) {\r\n    const matchingOption = options.find(x => x.value === initialValue);\r\n\r\n    if (matchingOption) {\r\n      initialOption = matchingOption;\r\n    }\r\n  }\r\n\r\n  const [selectedOption, setSelectedOption] = useState(initialOption);\r\n  const onChange = (selected: SelectOption | null) => {\r\n    if (selected === null) return;\r\n    onSelect(\r\n      selected.value === CLEAR_SELECT_FILTER_VALUE ? undefined : selected.value,\r\n    );\r\n    setSelectedOption(selected);\r\n  };\r\n\r\n  const fetchAndFormatSelects = async (\r\n    inputValue: string,\r\n    loadedOptions: SelectOption[],\r\n    { page }: { page: number },\r\n  ) => {\r\n    // only include clear filter when filter value does not exist\r\n    let result = inputValue || page > 0 ? [] : [clearFilterSelect];\r\n    let hasMore = paginate;\r\n    if (fetchSelects) {\r\n      const selectValues = await fetchSelects(inputValue, page);\r\n      // update matching option at initial load\r\n      if (!selectValues.length) {\r\n        hasMore = false;\r\n      }\r\n      result = [...result, ...selectValues];\r\n\r\n      const matchingOption = result.find(x => x.value === initialValue);\r\n\r\n      if (matchingOption) {\r\n        setSelectedOption(matchingOption);\r\n      }\r\n    }\r\n\r\n    return {\r\n      options: result,\r\n      hasMore,\r\n      additional: {\r\n        page: page + 1,\r\n      },\r\n    };\r\n  };\r\n\r\n  return (\r\n    <FilterContainer>\r\n      <FilterTitle>{Header}:</FilterTitle>\r\n      {fetchSelects ? (\r\n        <PaginatedSelect\r\n          data-test=\"filters-select\"\r\n          defaultOptions\r\n          themeConfig={filterSelectTheme}\r\n          stylesConfig={filterSelectStyles}\r\n          // @ts-ignore\r\n          value={selectedOption}\r\n          // @ts-ignore\r\n          onChange={onChange}\r\n          // @ts-ignore\r\n          loadOptions={fetchAndFormatSelects}\r\n          placeholder={emptyLabel}\r\n          clearable={false}\r\n          additional={{\r\n            page: 0,\r\n          }}\r\n        />\r\n      ) : (\r\n        <Select\r\n          data-test=\"filters-select\"\r\n          themeConfig={filterSelectTheme}\r\n          stylesConfig={filterSelectStyles}\r\n          value={selectedOption}\r\n          options={options}\r\n          onChange={onChange}\r\n          clearable={false}\r\n        />\r\n      )}\r\n    </FilterContainer>\r\n  );\r\n}\r\nexport default withTheme(SelectFilter);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { styled, withTheme } from '@superset-ui/core';\r\n\r\nimport {\r\n  FilterValue,\r\n  Filters,\r\n  InternalFilter,\r\n} from 'src/components/ListView/types';\r\nimport SearchFilter from './Search';\r\nimport SelectFilter from './Select';\r\nimport DateRangeFilter from './DateRange';\r\n\r\ninterface UIFiltersProps {\r\n  filters: Filters;\r\n  internalFilters: InternalFilter[];\r\n  updateFilterValue: (id: number, value: FilterValue['value']) => void;\r\n}\r\n\r\nconst FilterWrapper = styled.div`\r\n  display: inline-block;\r\n`;\r\n\r\nfunction UIFilters({\r\n  filters,\r\n  internalFilters = [],\r\n  updateFilterValue,\r\n}: UIFiltersProps) {\r\n  return (\r\n    <FilterWrapper>\r\n      {filters.map(\r\n        (\r\n          {\r\n            Header,\r\n            fetchSelects,\r\n            id,\r\n            input,\r\n            paginate,\r\n            selects,\r\n            unfilteredLabel,\r\n          },\r\n          index,\r\n        ) => {\r\n          const initialValue =\r\n            internalFilters[index] && internalFilters[index].value;\r\n          if (input === 'select') {\r\n            return (\r\n              <SelectFilter\r\n                Header={Header}\r\n                emptyLabel={unfilteredLabel}\r\n                fetchSelects={fetchSelects}\r\n                initialValue={initialValue}\r\n                key={id}\r\n                name={id}\r\n                onSelect={(value: any) => updateFilterValue(index, value)}\r\n                paginate={paginate}\r\n                selects={selects}\r\n              />\r\n            );\r\n          }\r\n          if (input === 'search' && typeof Header === 'string') {\r\n            return (\r\n              <SearchFilter\r\n                Header={Header}\r\n                initialValue={initialValue}\r\n                key={id}\r\n                name={id}\r\n                onSubmit={(value: string) => updateFilterValue(index, value)}\r\n              />\r\n            );\r\n          }\r\n          if (input === 'datetime_range') {\r\n            return (\r\n              <DateRangeFilter\r\n                Header={Header}\r\n                initialValue={initialValue}\r\n                key={id}\r\n                name={id}\r\n                onSubmit={value => updateFilterValue(index, value)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        },\r\n      )}\r\n    </FilterWrapper>\r\n  );\r\n}\r\n\r\nexport default withTheme(UIFilters);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { t, styled } from '@superset-ui/core';\r\nimport React, { useEffect } from 'react';\r\nimport { Empty } from 'src/common/components';\r\nimport Alert from 'src/components/Alert';\r\nimport { ReactComponent as EmptyImage } from 'images/empty.svg';\r\nimport cx from 'classnames';\r\nimport Button from 'src/components/Button';\r\nimport Icon from 'src/components/Icon';\r\nimport IndeterminateCheckbox from 'src/components/IndeterminateCheckbox';\r\nimport { TableCollection, Pagination } from 'src/components/dataViewCommon';\r\nimport CardCollection from './CardCollection';\r\nimport FilterControls from './Filters';\r\nimport { CardSortSelect } from './CardSortSelect';\r\nimport {\r\n  FetchDataConfig,\r\n  Filters,\r\n  SortColumn,\r\n  CardSortSelectOption,\r\n  ViewModeType,\r\n} from './types';\r\nimport { ListViewError, useListViewState } from './utils';\r\n\r\nconst ListViewStyles = styled.div`\r\n  text-align: center;\r\n\r\n  .superset-list-view {\r\n    text-align: left;\r\n    border-radius: 4px 0;\r\n    margin: 0 ${({ theme }) => theme.gridUnit * 4}px;\r\n\r\n    .header {\r\n      display: flex;\r\n      padding-bottom: ${({ theme }) => theme.gridUnit * 4}px;\r\n\r\n      .header-left {\r\n        display: flex;\r\n        flex: 5;\r\n      }\r\n      .header-right {\r\n        flex: 1;\r\n        text-align: right;\r\n      }\r\n    }\r\n\r\n    .body.empty table {\r\n      margin-bottom: 0;\r\n    }\r\n\r\n    .body {\r\n      overflow-x: auto;\r\n    }\r\n\r\n    .ant-empty {\r\n      .ant-empty-image {\r\n        height: auto;\r\n      }\r\n    }\r\n  }\r\n\r\n  .pagination-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\r\n  }\r\n\r\n  .row-count-container {\r\n    margin-top: ${({ theme }) => theme.gridUnit * 2}px;\r\n    color: ${({ theme }) => theme.colors.grayscale.base};\r\n  }\r\n`;\r\n\r\nconst BulkSelectWrapper = styled(Alert)`\r\n  border-radius: 0;\r\n  margin-bottom: 0;\r\n  color: #3d3d3d;\r\n  background-color: ${({ theme }) => theme.colors.primary.light4};\r\n\r\n  .selectedCopy {\r\n    display: inline-block;\r\n    padding: ${({ theme }) => theme.gridUnit * 2}px 0;\r\n  }\r\n\r\n  .deselect-all {\r\n    color: #1985a0;\r\n    margin-left: ${({ theme }) => theme.gridUnit * 4}px;\r\n  }\r\n\r\n  .divider {\r\n    margin: ${({ theme: { gridUnit } }) =>\r\n      `${-gridUnit * 2}px 0 ${-gridUnit * 2}px ${gridUnit * 4}px`};\r\n    width: 1px;\r\n    height: ${({ theme }) => theme.gridUnit * 8}px;\r\n    box-shadow: inset -1px 0px 0px #dadada;\r\n    display: inline-flex;\r\n    vertical-align: middle;\r\n    position: relative;\r\n  }\r\n\r\n  .ant-alert-close-icon {\r\n    margin-top: ${({ theme }) => theme.gridUnit * 1.5}px;\r\n  }\r\n`;\r\n\r\nconst bulkSelectColumnConfig = {\r\n  Cell: ({ row }: any) => (\r\n    <IndeterminateCheckbox {...row.getToggleRowSelectedProps()} id={row.id} />\r\n  ),\r\n  Header: ({ getToggleAllRowsSelectedProps }: any) => (\r\n    <IndeterminateCheckbox\r\n      {...getToggleAllRowsSelectedProps()}\r\n      id=\"header-toggle-all\"\r\n    />\r\n  ),\r\n  id: 'selection',\r\n  size: 'sm',\r\n};\r\n\r\nconst ViewModeContainer = styled.div`\r\n  padding-right: ${({ theme }) => theme.gridUnit * 4}px;\r\n  display: inline-block;\r\n\r\n  .toggle-button {\r\n    display: inline-block;\r\n    border-radius: ${({ theme }) => theme.gridUnit / 2}px;\r\n    padding: ${({ theme }) => theme.gridUnit}px;\r\n    padding-bottom: 0;\r\n\r\n    &:first-of-type {\r\n      margin-right: ${({ theme }) => theme.gridUnit * 2}px;\r\n    }\r\n  }\r\n\r\n  .active {\r\n    background-color: ${({ theme }) => theme.colors.grayscale.base};\r\n    svg {\r\n      color: ${({ theme }) => theme.colors.grayscale.light5};\r\n    }\r\n  }\r\n`;\r\n\r\nconst EmptyWrapper = styled.div`\r\n  padding: ${({ theme }) => theme.gridUnit * 40}px 0;\r\n\r\n  &.table {\r\n    background: ${({ theme }) => theme.colors.grayscale.light5};\r\n  }\r\n`;\r\n\r\nconst ViewModeToggle = ({\r\n  mode,\r\n  setMode,\r\n}: {\r\n  mode: 'table' | 'card';\r\n  setMode: (mode: 'table' | 'card') => void;\r\n}) => (\r\n  <ViewModeContainer>\r\n    <div\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      onClick={e => {\r\n        e.currentTarget.blur();\r\n        setMode('card');\r\n      }}\r\n      className={cx('toggle-button', { active: mode === 'card' })}\r\n    >\r\n      <Icon name=\"card-view\" />\r\n    </div>\r\n    <div\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      onClick={e => {\r\n        e.currentTarget.blur();\r\n        setMode('table');\r\n      }}\r\n      className={cx('toggle-button', { active: mode === 'table' })}\r\n    >\r\n      <Icon name=\"list-view\" />\r\n    </div>\r\n  </ViewModeContainer>\r\n);\r\n\r\nexport interface ListViewProps<T extends object = any> {\r\n  columns: any[];\r\n  data: T[];\r\n  count: number;\r\n  pageSize: number;\r\n  fetchData: (conf: FetchDataConfig) => any;\r\n  loading: boolean;\r\n  className?: string;\r\n  initialSort?: SortColumn[];\r\n  filters?: Filters;\r\n  bulkActions?: Array<{\r\n    key: string;\r\n    name: React.ReactNode;\r\n    onSelect: (rows: any[]) => any;\r\n    type?: 'primary' | 'secondary' | 'danger';\r\n  }>;\r\n  bulkSelectEnabled?: boolean;\r\n  disableBulkSelect?: () => void;\r\n  renderBulkSelectCopy?: (selects: any[]) => React.ReactNode;\r\n  renderCard?: (row: T & { loading: boolean }) => React.ReactNode;\r\n  cardSortSelectOptions?: Array<CardSortSelectOption>;\r\n  defaultViewMode?: ViewModeType;\r\n  highlightRowId?: number;\r\n  emptyState?: {\r\n    message?: string;\r\n    slot?: React.ReactNode;\r\n  };\r\n}\r\n\r\nfunction ListView<T extends object = any>({\r\n  columns,\r\n  data,\r\n  count,\r\n  pageSize: initialPageSize,\r\n  fetchData,\r\n  loading,\r\n  initialSort = [],\r\n  className = '',\r\n  filters = [],\r\n  bulkActions = [],\r\n  bulkSelectEnabled = false,\r\n  disableBulkSelect = () => {},\r\n  renderBulkSelectCopy = selected => t('%s Selected', selected.length),\r\n  renderCard,\r\n  cardSortSelectOptions,\r\n  defaultViewMode = 'card',\r\n  highlightRowId,\r\n  emptyState = {},\r\n}: ListViewProps<T>) {\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n    pageCount = 1,\r\n    gotoPage,\r\n    applyFilterValue,\r\n    selectedFlatRows,\r\n    toggleAllRowsSelected,\r\n    setViewMode,\r\n    state: { pageIndex, pageSize, internalFilters, viewMode },\r\n  } = useListViewState({\r\n    bulkSelectColumnConfig,\r\n    bulkSelectMode: bulkSelectEnabled && Boolean(bulkActions.length),\r\n    columns,\r\n    count,\r\n    data,\r\n    fetchData,\r\n    initialPageSize,\r\n    initialSort,\r\n    initialFilters: filters,\r\n    renderCard: Boolean(renderCard),\r\n    defaultViewMode,\r\n  });\r\n  const filterable = Boolean(filters.length);\r\n  if (filterable) {\r\n    const columnAccessors = columns.reduce(\r\n      (acc, col) => ({ ...acc, [col.id || col.accessor]: true }),\r\n      {},\r\n    );\r\n    filters.forEach(f => {\r\n      if (!columnAccessors[f.id]) {\r\n        throw new ListViewError(\r\n          `Invalid filter config, ${f.id} is not present in columns`,\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  const cardViewEnabled = Boolean(renderCard);\r\n\r\n  useEffect(() => {\r\n    // discard selections if bulk select is disabled\r\n    if (!bulkSelectEnabled) toggleAllRowsSelected(false);\r\n  }, [bulkSelectEnabled, toggleAllRowsSelected]);\r\n\r\n  return (\r\n    <ListViewStyles>\r\n      <div data-test={className} className={`superset-list-view ${className}`}>\r\n        <div className=\"header\">\r\n          <div className=\"header-left\">\r\n            {cardViewEnabled && (\r\n              <ViewModeToggle mode={viewMode} setMode={setViewMode} />\r\n            )}\r\n            {filterable && (\r\n              <FilterControls\r\n                filters={filters}\r\n                internalFilters={internalFilters}\r\n                updateFilterValue={applyFilterValue}\r\n              />\r\n            )}\r\n          </div>\r\n          <div className=\"header-right\">\r\n            {viewMode === 'card' && cardSortSelectOptions && (\r\n              <CardSortSelect\r\n                initialSort={initialSort}\r\n                onChange={fetchData}\r\n                options={cardSortSelectOptions}\r\n                pageIndex={pageIndex}\r\n                pageSize={pageSize}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className={`body ${rows.length === 0 ? 'empty' : ''}`}>\r\n          {bulkSelectEnabled && (\r\n            <BulkSelectWrapper\r\n              data-test=\"bulk-select-controls\"\r\n              type=\"info\"\r\n              closable\r\n              showIcon={false}\r\n              onClose={disableBulkSelect}\r\n              message={\r\n                <>\r\n                  <div className=\"selectedCopy\" data-test=\"bulk-select-copy\">\r\n                    {renderBulkSelectCopy(selectedFlatRows)}\r\n                  </div>\r\n                  {Boolean(selectedFlatRows.length) && (\r\n                    <>\r\n                      <span\r\n                        data-test=\"bulk-select-deselect-all\"\r\n                        role=\"button\"\r\n                        tabIndex={0}\r\n                        className=\"deselect-all\"\r\n                        onClick={() => toggleAllRowsSelected(false)}\r\n                      >\r\n                        {t('Deselect all')}\r\n                      </span>\r\n                      <div className=\"divider\" />\r\n                      {bulkActions.map(action => (\r\n                        <Button\r\n                          data-test=\"bulk-select-action\"\r\n                          key={action.key}\r\n                          buttonStyle={action.type}\r\n                          cta\r\n                          onClick={() =>\r\n                            action.onSelect(\r\n                              selectedFlatRows.map(r => r.original),\r\n                            )\r\n                          }\r\n                        >\r\n                          {action.name}\r\n                        </Button>\r\n                      ))}\r\n                    </>\r\n                  )}\r\n                </>\r\n              }\r\n            />\r\n          )}\r\n          {viewMode === 'card' && (\r\n            <CardCollection\r\n              bulkSelectEnabled={bulkSelectEnabled}\r\n              prepareRow={prepareRow}\r\n              renderCard={renderCard}\r\n              rows={rows}\r\n              loading={loading}\r\n            />\r\n          )}\r\n          {viewMode === 'table' && (\r\n            <TableCollection\r\n              getTableProps={getTableProps}\r\n              getTableBodyProps={getTableBodyProps}\r\n              prepareRow={prepareRow}\r\n              headerGroups={headerGroups}\r\n              rows={rows}\r\n              columns={columns}\r\n              loading={loading}\r\n              highlightRowId={highlightRowId}\r\n            />\r\n          )}\r\n          {!loading && rows.length === 0 && (\r\n            <EmptyWrapper className={viewMode}>\r\n              <Empty\r\n                image={<EmptyImage />}\r\n                description={emptyState.message || t('No Data')}\r\n              >\r\n                {emptyState.slot || null}\r\n              </Empty>\r\n            </EmptyWrapper>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {rows.length > 0 && (\r\n        <div className=\"pagination-container\">\r\n          <Pagination\r\n            totalPages={pageCount || 0}\r\n            currentPage={pageCount ? pageIndex + 1 : 0}\r\n            onChange={(p: number) => gotoPage(p - 1)}\r\n            hideFirstAndLastPageLinks\r\n          />\r\n          <div className=\"row-count-container\">\r\n            {!loading &&\r\n              t(\r\n                '%s-%s of %s',\r\n                pageSize * pageIndex + (rows.length && 1),\r\n                pageSize * pageIndex + rows.length,\r\n                count,\r\n              )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </ListViewStyles>\r\n  );\r\n}\r\n\r\nexport default ListView;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport * from './ListView';\r\nexport * from './types';\r\n\r\nexport { default } from './ListView';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { ReactNode } from 'react';\r\n\r\nexport interface SortColumn {\r\n  id: string;\r\n  desc?: boolean;\r\n}\r\n\r\nexport type SortColumns = SortColumn[];\r\n\r\nexport interface SelectOption {\r\n  label: string;\r\n  value: any;\r\n}\r\n\r\nexport interface CardSortSelectOption {\r\n  desc: boolean;\r\n  id: any;\r\n  label: string;\r\n  value: any;\r\n}\r\n\r\nexport interface Filter {\r\n  Header: ReactNode;\r\n  id: string;\r\n  urlDisplay?: string;\r\n  operator?: FilterOperator;\r\n  input?:\r\n    | 'text'\r\n    | 'textarea'\r\n    | 'select'\r\n    | 'checkbox'\r\n    | 'search'\r\n    | 'datetime_range';\r\n  unfilteredLabel?: string;\r\n  selects?: SelectOption[];\r\n  onFilterOpen?: () => void;\r\n  fetchSelects?: (\r\n    filterValue?: string,\r\n    pageIndex?: number,\r\n    pageSize?: number,\r\n  ) => Promise<SelectOption[]>;\r\n  paginate?: boolean;\r\n}\r\n\r\nexport type Filters = Filter[];\r\n\r\nexport type ViewModeType = 'card' | 'table';\r\n\r\nexport interface FilterValue {\r\n  id: string;\r\n  urlDisplay?: string;\r\n  operator?: string;\r\n  value: string | boolean | number | null | undefined | string[] | number[];\r\n}\r\n\r\nexport interface FetchDataConfig {\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  sortBy: SortColumns;\r\n  filters: FilterValue[];\r\n}\r\n\r\nexport interface InternalFilter extends FilterValue {\r\n  Header?: string;\r\n}\r\n\r\nexport enum FilterOperator {\r\n  startsWith = 'sw',\r\n  endsWith = 'ew',\r\n  contains = 'ct',\r\n  equals = 'eq',\r\n  notStartsWith = 'nsw',\r\n  notEndsWith = 'new',\r\n  notContains = 'nct',\r\n  notEquals = 'neq',\r\n  greaterThan = 'gt',\r\n  lessThan = 'lt',\r\n  relationManyMany = 'rel_m_m',\r\n  relationOneMany = 'rel_o_m',\r\n  titleOrSlug = 'title_or_slug',\r\n  nameOrDescription = 'name_or_description',\r\n  allText = 'all_text',\r\n  chartAllText = 'chart_all_text',\r\n  datasetIsNullOrEmpty = 'dataset_is_null_or_empty',\r\n  between = 'between',\r\n  dashboardIsFav = 'dashboard_is_favorite',\r\n  chartIsFav = 'chart_is_favorite',\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  useFilters,\r\n  usePagination,\r\n  useRowSelect,\r\n  useRowState,\r\n  useSortBy,\r\n  useTable,\r\n} from 'react-table';\r\n\r\nimport {\r\n  NumberParam,\r\n  StringParam,\r\n  useQueryParams,\r\n  QueryParamConfig,\r\n} from 'use-query-params';\r\n\r\nimport rison from 'rison';\r\nimport { isEqual } from 'lodash';\r\nimport { PartialStylesConfig } from 'src/components/Select';\r\nimport {\r\n  FetchDataConfig,\r\n  Filter,\r\n  FilterValue,\r\n  InternalFilter,\r\n  SortColumn,\r\n  ViewModeType,\r\n} from './types';\r\n\r\n// Define custom RisonParam for proper encoding/decoding\r\nconst RisonParam: QueryParamConfig<string, any> = {\r\n  encode: (data?: any | null) =>\r\n    data === undefined ? undefined : rison.encode(data),\r\n  decode: (dataStr?: string | string[]) =>\r\n    dataStr === undefined || Array.isArray(dataStr)\r\n      ? undefined\r\n      : rison.decode(dataStr),\r\n};\r\n\r\nexport class ListViewError extends Error {\r\n  name = 'ListViewError';\r\n}\r\n\r\n// removes element from a list, returns new list\r\nexport function removeFromList(list: any[], index: number): any[] {\r\n  return list.filter((_, i) => index !== i);\r\n}\r\n\r\n// apply update to elements of object list, returns new list\r\nfunction updateInList(list: any[], index: number, update: any): any[] {\r\n  const element = list.find((_, i) => index === i);\r\n\r\n  return [\r\n    ...list.slice(0, index),\r\n    { ...element, ...update },\r\n    ...list.slice(index + 1),\r\n  ];\r\n}\r\n\r\ntype QueryFilterState = {\r\n  [id: string]: FilterValue['value'];\r\n};\r\n\r\nfunction mergeCreateFilterValues(list: Filter[], updateObj: QueryFilterState) {\r\n  return list.map(({ id, urlDisplay, operator }) => {\r\n    const currentFilterId = urlDisplay || id;\r\n    const update = updateObj[currentFilterId];\r\n\r\n    return { id, urlDisplay, operator, value: update };\r\n  });\r\n}\r\n\r\n// convert filters from UI objects to data objects\r\nexport function convertFilters(fts: InternalFilter[]): FilterValue[] {\r\n  return fts\r\n    .filter(\r\n      f =>\r\n        !(\r\n          typeof f.value === 'undefined' ||\r\n          (Array.isArray(f.value) && !f.value.length)\r\n        ),\r\n    )\r\n    .map(({ value, operator, id }) => {\r\n      // handle between filter using 2 api filters\r\n      if (operator === 'between' && Array.isArray(value)) {\r\n        return [\r\n          {\r\n            value: value[0],\r\n            operator: 'gt',\r\n            id,\r\n          },\r\n          {\r\n            value: value[1],\r\n            operator: 'lt',\r\n            id,\r\n          },\r\n        ];\r\n      }\r\n      return {\r\n        value,\r\n        operator,\r\n        id,\r\n      };\r\n    })\r\n    .flat();\r\n}\r\n\r\n// convertFilters but to handle new decoded rison format\r\nexport function convertFiltersRison(\r\n  filterObj: any,\r\n  list: Filter[],\r\n): FilterValue[] {\r\n  const filters: FilterValue[] = [];\r\n  const refs = {};\r\n\r\n  Object.keys(filterObj).forEach(id => {\r\n    const filter: FilterValue = {\r\n      id,\r\n      value: filterObj[id],\r\n      // operator: filterObj[id][1], // TODO: can probably get rid of this\r\n    };\r\n\r\n    refs[id] = filter;\r\n    filters.push(filter);\r\n  });\r\n\r\n  // Add operators from filter list\r\n  list.forEach(value => {\r\n    const currentFilterId = value.urlDisplay || value.id;\r\n    const filter = refs[currentFilterId];\r\n\r\n    if (filter) {\r\n      filter.operator = value.operator;\r\n      filter.id = value.id;\r\n    }\r\n  });\r\n\r\n  return filters;\r\n}\r\n\r\nexport function extractInputValue(inputType: Filter['input'], event: any) {\r\n  if (!inputType || inputType === 'text') {\r\n    return event.currentTarget.value;\r\n  }\r\n  if (inputType === 'checkbox') {\r\n    return event.currentTarget.checked;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\ninterface UseListViewConfig {\r\n  fetchData: (conf: FetchDataConfig) => any;\r\n  columns: any[];\r\n  data: any[];\r\n  count: number;\r\n  initialPageSize: number;\r\n  initialSort?: SortColumn[];\r\n  bulkSelectMode?: boolean;\r\n  initialFilters?: Filter[];\r\n  bulkSelectColumnConfig?: {\r\n    id: string;\r\n    Header: (conf: any) => React.ReactNode;\r\n    Cell: (conf: any) => React.ReactNode;\r\n  };\r\n  renderCard?: boolean;\r\n  defaultViewMode?: ViewModeType;\r\n}\r\n\r\nexport function useListViewState({\r\n  fetchData,\r\n  columns,\r\n  data,\r\n  count,\r\n  initialPageSize,\r\n  initialFilters = [],\r\n  initialSort = [],\r\n  bulkSelectMode = false,\r\n  bulkSelectColumnConfig,\r\n  renderCard = false,\r\n  defaultViewMode = 'card',\r\n}: UseListViewConfig) {\r\n  const [query, setQuery] = useQueryParams({\r\n    filters: RisonParam,\r\n    pageIndex: NumberParam,\r\n    sortColumn: StringParam,\r\n    sortOrder: StringParam,\r\n    viewMode: StringParam,\r\n  });\r\n\r\n  const initialSortBy = useMemo(\r\n    () =>\r\n      query.sortColumn && query.sortOrder\r\n        ? [{ id: query.sortColumn, desc: query.sortOrder === 'desc' }]\r\n        : initialSort,\r\n    [query.sortColumn, query.sortOrder],\r\n  );\r\n\r\n  const initialState = {\r\n    filters: query.filters\r\n      ? convertFiltersRison(query.filters, initialFilters)\r\n      : [],\r\n    pageIndex: query.pageIndex || 0,\r\n    pageSize: initialPageSize,\r\n    sortBy: initialSortBy,\r\n  };\r\n\r\n  const [viewMode, setViewMode] = useState<ViewModeType>(\r\n    (query.viewMode as ViewModeType) ||\r\n      (renderCard ? defaultViewMode : 'table'),\r\n  );\r\n\r\n  const columnsWithSelect = useMemo(() => {\r\n    // add exact filter type so filters with falsey values are not filtered out\r\n    const columnsWithFilter = columns.map(f => ({ ...f, filter: 'exact' }));\r\n    return bulkSelectMode\r\n      ? [bulkSelectColumnConfig, ...columnsWithFilter]\r\n      : columnsWithFilter;\r\n  }, [bulkSelectMode, columns]);\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n    canPreviousPage,\r\n    canNextPage,\r\n    pageCount,\r\n    gotoPage,\r\n    setAllFilters,\r\n    selectedFlatRows,\r\n    toggleAllRowsSelected,\r\n    state: { pageIndex, pageSize, sortBy, filters },\r\n  } = useTable(\r\n    {\r\n      columns: columnsWithSelect,\r\n      count,\r\n      data,\r\n      disableFilters: true,\r\n      disableSortRemove: true,\r\n      initialState,\r\n      manualFilters: true,\r\n      manualPagination: true,\r\n      manualSortBy: true,\r\n      autoResetFilters: false,\r\n      pageCount: Math.ceil(count / initialPageSize),\r\n    },\r\n    useFilters,\r\n    useSortBy,\r\n    usePagination,\r\n    useRowState,\r\n    useRowSelect,\r\n  );\r\n\r\n  const [internalFilters, setInternalFilters] = useState<InternalFilter[]>(\r\n    query.filters && initialFilters.length\r\n      ? mergeCreateFilterValues(initialFilters, query.filters)\r\n      : [],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (initialFilters.length) {\r\n      setInternalFilters(\r\n        mergeCreateFilterValues(\r\n          initialFilters,\r\n          query.filters ? query.filters : {},\r\n        ),\r\n      );\r\n    }\r\n  }, [initialFilters]);\r\n\r\n  useEffect(() => {\r\n    // From internalFilters, produce a simplified obj\r\n    const filterObj = {};\r\n\r\n    internalFilters.forEach(filter => {\r\n      if (\r\n        filter.value !== undefined &&\r\n        (typeof filter.value !== 'string' || filter.value.length > 0)\r\n      ) {\r\n        const currentFilterId = filter.urlDisplay || filter.id;\r\n        filterObj[currentFilterId] = filter.value;\r\n      }\r\n    });\r\n\r\n    const queryParams: any = {\r\n      filters: Object.keys(filterObj).length ? filterObj : undefined,\r\n      pageIndex,\r\n    };\r\n    if (sortBy[0]) {\r\n      queryParams.sortColumn = sortBy[0].id;\r\n      queryParams.sortOrder = sortBy[0].desc ? 'desc' : 'asc';\r\n    }\r\n\r\n    if (renderCard) {\r\n      queryParams.viewMode = viewMode;\r\n    }\r\n\r\n    const method =\r\n      typeof query.pageIndex !== 'undefined' &&\r\n      queryParams.pageIndex !== query.pageIndex\r\n        ? 'push'\r\n        : 'replace';\r\n\r\n    setQuery(queryParams, method);\r\n\r\n    fetchData({ pageIndex, pageSize, sortBy, filters });\r\n  }, [fetchData, pageIndex, pageSize, sortBy, filters]);\r\n\r\n  useEffect(() => {\r\n    if (!isEqual(initialState.pageIndex, pageIndex)) {\r\n      gotoPage(initialState.pageIndex);\r\n    }\r\n  }, [query]);\r\n\r\n  const applyFilterValue = (index: number, value: any) => {\r\n    setInternalFilters(currentInternalFilters => {\r\n      // skip redunundant updates\r\n      if (currentInternalFilters[index].value === value) {\r\n        return currentInternalFilters;\r\n      }\r\n\r\n      const update = { ...currentInternalFilters[index], value };\r\n      const updatedFilters = updateInList(\r\n        currentInternalFilters,\r\n        index,\r\n        update,\r\n      );\r\n\r\n      setAllFilters(convertFilters(updatedFilters));\r\n      gotoPage(0); // clear pagination on filter\r\n      return updatedFilters;\r\n    });\r\n  };\r\n\r\n  return {\r\n    canNextPage,\r\n    canPreviousPage,\r\n    getTableBodyProps,\r\n    getTableProps,\r\n    gotoPage,\r\n    headerGroups,\r\n    pageCount,\r\n    prepareRow,\r\n    rows,\r\n    selectedFlatRows,\r\n    setAllFilters,\r\n    state: { pageIndex, pageSize, sortBy, filters, internalFilters, viewMode },\r\n    toggleAllRowsSelected,\r\n    applyFilterValue,\r\n    setViewMode,\r\n  };\r\n}\r\n\r\nexport const filterSelectStyles: PartialStylesConfig = {\r\n  container: (provider, { getValue }) => ({\r\n    ...provider,\r\n    // dynamic width based on label string length\r\n    minWidth: `${Math.min(\r\n      12,\r\n      Math.max(5, 3 + getValue()[0].label.length / 2),\r\n    )}em`,\r\n  }),\r\n  control: provider => ({\r\n    ...provider,\r\n    borderWidth: 0,\r\n    boxShadow: 'none',\r\n    cursor: 'pointer',\r\n    backgroundColor: 'transparent',\r\n  }),\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { styled } from '@superset-ui/core';\r\nimport React from 'react';\r\nimport Icon from 'src/components/Icon';\r\n\r\nexport interface SearchInputProps {\r\n  onSubmit: () => void;\r\n  onClear: () => void;\r\n  value: string;\r\n  onChange: React.EventHandler<React.ChangeEvent<HTMLInputElement>>;\r\n  placeholder?: string;\r\n  name?: string;\r\n}\r\n\r\nconst SearchInputWrapper = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  width: 200px;\r\n  height: ${({ theme }) => theme.gridUnit * 8}px;\r\n  background-image: none;\r\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light2};\r\n  border-radius: 4px;\r\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\r\n  padding: 4px 28px;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst commonStyles = `\r\n  position: absolute;\r\n  z-index: 2;\r\n  display: block;\r\n  cursor: pointer;\r\n`;\r\nconst SearchIcon = styled(Icon)`\r\n  ${commonStyles};\r\n  top: 4px;\r\n  left: 2px;\r\n`;\r\n\r\nconst ClearIcon = styled(Icon)`\r\n  ${commonStyles};\r\n  right: 0px;\r\n  top: 4px;\r\n`;\r\n\r\nexport default function SearchInput({\r\n  onChange,\r\n  onClear,\r\n  onSubmit,\r\n  placeholder = 'Search',\r\n  name,\r\n  value,\r\n}: SearchInputProps) {\r\n  return (\r\n    <SearchInputWrapper>\r\n      <SearchIcon\r\n        data-test=\"search-submit\"\r\n        role=\"button\"\r\n        name=\"search\"\r\n        onClick={() => onSubmit()}\r\n      />\r\n      <StyledInput\r\n        data-test=\"search-input\"\r\n        onKeyDown={e => {\r\n          if (e.key === 'Enter') {\r\n            onSubmit();\r\n          }\r\n        }}\r\n        onBlur={() => onSubmit()}\r\n        placeholder={placeholder}\r\n        onChange={onChange}\r\n        value={value}\r\n        name={name}\r\n      />\r\n      {value && (\r\n        <ClearIcon\r\n          data-test=\"search-clear\"\r\n          role=\"button\"\r\n          name=\"cancel-x\"\r\n          onClick={() => onClear()}\r\n        />\r\n      )}\r\n    </SearchInputWrapper>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { t } from '@superset-ui/core';\r\n\r\nexport const commonMenuData = {\r\n  name: t('Data'),\r\n  tabs: [\r\n    {\r\n      name: 'Databases',\r\n      label: t('Databases'),\r\n      url: '/databaseview/list/',\r\n      usesRouter: true,\r\n    },\r\n    {\r\n      name: 'Datasets',\r\n      label: t('Datasets'),\r\n      url: '/tablemodelview/list/',\r\n      usesRouter: true,\r\n    },\r\n    {\r\n      name: 'Saved queries',\r\n      label: t('Saved queries'),\r\n      url: '/savedqueryview/list/',\r\n      usesRouter: true,\r\n    },\r\n    {\r\n      name: 'Query history',\r\n      label: t('Query history'),\r\n      url: '/superset/sqllab/history/',\r\n      usesRouter: true,\r\n    },\r\n  ],\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { SupersetClient, t, styled } from '@superset-ui/core';\r\nimport React, { useState, useMemo } from 'react';\r\nimport rison from 'rison';\r\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\r\nimport { useListViewResource } from 'src/views/CRUD/hooks';\r\nimport { createErrorHandler } from 'src/views/CRUD/utils';\r\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\r\nimport SubMenu, { SubMenuProps } from 'src/components/Menu/SubMenu';\r\nimport DeleteModal from 'src/components/DeleteModal';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport Icons from 'src/components/Icons';\r\nimport ListView, { FilterOperator, Filters } from 'src/components/ListView';\r\nimport { commonMenuData } from 'src/views/CRUD/data/common';\r\nimport ImportModelsModal from 'src/components/ImportModal/index';\r\nimport DatabaseModal from './DatabaseModal';\r\n\r\nimport { DatabaseObject } from './types';\r\n\r\nconst PAGE_SIZE = 25;\r\nconst PASSWORDS_NEEDED_MESSAGE = t(\r\n  'The passwords for the databases below are needed in order to ' +\r\n    'import them. Please note that the \"Secure Extra\" and \"Certificate\" ' +\r\n    'sections of the database configuration are not present in export ' +\r\n    'files, and should be added manually after the import if they are needed.',\r\n);\r\nconst CONFIRM_OVERWRITE_MESSAGE = t(\r\n  'You are importing one or more databases that already exist. ' +\r\n    'Overwriting might cause you to lose some of your work. Are you ' +\r\n    'sure you want to overwrite?',\r\n);\r\n\r\ninterface DatabaseDeleteObject extends DatabaseObject {\r\n  chart_count: number;\r\n  dashboard_count: number;\r\n}\r\ninterface DatabaseListProps {\r\n  addDangerToast: (msg: string) => void;\r\n  addSuccessToast: (msg: string) => void;\r\n}\r\n\r\nconst IconCheck = styled(Icons.Check)`\r\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\r\n`;\r\n\r\nconst IconCancelX = styled(Icons.CancelX)`\r\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\r\n`;\r\n\r\nconst Actions = styled.div`\r\n  color: ${({ theme }) => theme.colors.grayscale.base};\r\n`;\r\n\r\nfunction BooleanDisplay({ value }: { value: Boolean }) {\r\n  return value ? <IconCheck /> : <IconCancelX />;\r\n}\r\n\r\nfunction DatabaseList({ addDangerToast, addSuccessToast }: DatabaseListProps) {\r\n  const {\r\n    state: {\r\n      loading,\r\n      resourceCount: databaseCount,\r\n      resourceCollection: databases,\r\n    },\r\n    hasPerm,\r\n    fetchData,\r\n    refreshData,\r\n  } = useListViewResource<DatabaseObject>(\r\n    'database',\r\n    t('database'),\r\n    addDangerToast,\r\n  );\r\n  const [databaseModalOpen, setDatabaseModalOpen] = useState<boolean>(false);\r\n  const [\r\n    databaseCurrentlyDeleting,\r\n    setDatabaseCurrentlyDeleting,\r\n  ] = useState<DatabaseDeleteObject | null>(null);\r\n  const [currentDatabase, setCurrentDatabase] = useState<DatabaseObject | null>(\r\n    null,\r\n  );\r\n  const [importingDatabase, showImportModal] = useState<boolean>(false);\r\n  const [passwordFields, setPasswordFields] = useState<string[]>([]);\r\n\r\n  const openDatabaseImportModal = () => {\r\n    showImportModal(true);\r\n  };\r\n\r\n  const closeDatabaseImportModal = () => {\r\n    showImportModal(false);\r\n  };\r\n\r\n  const handleDatabaseImport = () => {\r\n    showImportModal(false);\r\n    refreshData();\r\n  };\r\n\r\n  const openDatabaseDeleteModal = (database: DatabaseObject) =>\r\n    SupersetClient.get({\r\n      endpoint: `/api/v1/database/${database.id}/related_objects/`,\r\n    })\r\n      .then(({ json = {} }) => {\r\n        setDatabaseCurrentlyDeleting({\r\n          ...database,\r\n          chart_count: json.charts.count,\r\n          dashboard_count: json.dashboards.count,\r\n        });\r\n      })\r\n      .catch(\r\n        createErrorHandler(errMsg =>\r\n          t(\r\n            'An error occurred while fetching database related data: %s',\r\n            errMsg,\r\n          ),\r\n        ),\r\n      );\r\n\r\n  function handleDatabaseDelete({ id, database_name: dbName }: DatabaseObject) {\r\n    SupersetClient.delete({\r\n      endpoint: `/api/v1/database/${id}`,\r\n    }).then(\r\n      () => {\r\n        refreshData();\r\n        addSuccessToast(t('Deleted: %s', dbName));\r\n\r\n        // Close delete modal\r\n        setDatabaseCurrentlyDeleting(null);\r\n      },\r\n      createErrorHandler(errMsg =>\r\n        addDangerToast(t('There was an issue deleting %s: %s', dbName, errMsg)),\r\n      ),\r\n    );\r\n  }\r\n\r\n  function handleDatabaseEditModal({\r\n    database = null,\r\n    modalOpen = false,\r\n  }: { database?: DatabaseObject | null; modalOpen?: boolean } = {}) {\r\n    // Set database and modal\r\n    setCurrentDatabase(database);\r\n    setDatabaseModalOpen(modalOpen);\r\n  }\r\n\r\n  const canCreate = hasPerm('can_write');\r\n  const canEdit = hasPerm('can_write');\r\n  const canDelete = hasPerm('can_write');\r\n  const canExport =\r\n    hasPerm('can_read') && isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT);\r\n\r\n  const menuData: SubMenuProps = {\r\n    activeChild: 'Databases',\r\n    ...commonMenuData,\r\n  };\r\n\r\n  if (canCreate) {\r\n    menuData.buttons = [\r\n      {\r\n        'data-test': 'btn-create-database',\r\n        name: (\r\n          <>\r\n            <i className=\"fa fa-plus\" /> {t('Database')}{' '}\r\n          </>\r\n        ),\r\n        buttonStyle: 'primary',\r\n        onClick: () => {\r\n          // Ensure modal will be opened in add mode\r\n          handleDatabaseEditModal({ modalOpen: true });\r\n        },\r\n      },\r\n    ];\r\n\r\n    if (isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT)) {\r\n      menuData.buttons.push({\r\n        name: (\r\n          <Tooltip\r\n            id=\"import-tooltip\"\r\n            title={t('Import databases')}\r\n            placement=\"bottomRight\"\r\n          >\r\n            <Icons.Import data-test=\"import-button\" />\r\n          </Tooltip>\r\n        ),\r\n        buttonStyle: 'link',\r\n        onClick: openDatabaseImportModal,\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleDatabaseExport(database: DatabaseObject) {\r\n    return window.location.assign(\r\n      `/api/v1/database/export/?q=${rison.encode([database.id])}`,\r\n    );\r\n  }\r\n\r\n  const initialSort = [{ id: 'changed_on_delta_humanized', desc: true }];\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        accessor: 'database_name',\r\n        Header: t('Database'),\r\n      },\r\n      {\r\n        accessor: 'backend',\r\n        Header: t('Backend'),\r\n        size: 'lg',\r\n        disableSortBy: true, // TODO: api support for sorting by 'backend'\r\n      },\r\n      {\r\n        accessor: 'allow_run_async',\r\n        Header: (\r\n          <Tooltip\r\n            id=\"allow-run-async-header-tooltip\"\r\n            title={t('Asynchronous query execution')}\r\n            placement=\"top\"\r\n          >\r\n            <span>{t('AQE')}</span>\r\n          </Tooltip>\r\n        ),\r\n        Cell: ({\r\n          row: {\r\n            original: { allow_run_async: allowRunAsync },\r\n          },\r\n        }: any) => <BooleanDisplay value={allowRunAsync} />,\r\n        size: 'sm',\r\n      },\r\n      {\r\n        accessor: 'allow_dml',\r\n        Header: (\r\n          <Tooltip\r\n            id=\"allow-dml-header-tooltip\"\r\n            title={t('Allow data manipulation language')}\r\n            placement=\"top\"\r\n          >\r\n            <span>{t('DML')}</span>\r\n          </Tooltip>\r\n        ),\r\n        Cell: ({\r\n          row: {\r\n            original: { allow_dml: allowDML },\r\n          },\r\n        }: any) => <BooleanDisplay value={allowDML} />,\r\n        size: 'sm',\r\n      },\r\n      {\r\n        accessor: 'allow_csv_upload',\r\n        Header: t('CSV upload'),\r\n        Cell: ({\r\n          row: {\r\n            original: { allow_csv_upload: allowCSVUpload },\r\n          },\r\n        }: any) => <BooleanDisplay value={allowCSVUpload} />,\r\n        size: 'md',\r\n      },\r\n      {\r\n        accessor: 'expose_in_sqllab',\r\n        Header: t('Expose in SQL Lab'),\r\n        Cell: ({\r\n          row: {\r\n            original: { expose_in_sqllab: exposeInSqllab },\r\n          },\r\n        }: any) => <BooleanDisplay value={exposeInSqllab} />,\r\n        size: 'md',\r\n      },\r\n      {\r\n        accessor: 'created_by',\r\n        disableSortBy: true,\r\n        Header: t('Created by'),\r\n        Cell: ({\r\n          row: {\r\n            original: { created_by: createdBy },\r\n          },\r\n        }: any) =>\r\n          createdBy ? `${createdBy.first_name} ${createdBy.last_name}` : '',\r\n        size: 'xl',\r\n      },\r\n      {\r\n        Cell: ({\r\n          row: {\r\n            original: { changed_on_delta_humanized: changedOn },\r\n          },\r\n        }: any) => changedOn,\r\n        Header: t('Last modified'),\r\n        accessor: 'changed_on_delta_humanized',\r\n        size: 'xl',\r\n      },\r\n      {\r\n        Cell: ({ row: { original } }: any) => {\r\n          const handleEdit = () =>\r\n            handleDatabaseEditModal({ database: original, modalOpen: true });\r\n          const handleDelete = () => openDatabaseDeleteModal(original);\r\n          const handleExport = () => handleDatabaseExport(original);\r\n          if (!canEdit && !canDelete && !canExport) {\r\n            return null;\r\n          }\r\n          return (\r\n            <Actions className=\"actions\">\r\n              {canDelete && (\r\n                <span\r\n                  role=\"button\"\r\n                  tabIndex={0}\r\n                  className=\"action-button\"\r\n                  data-test=\"database-delete\"\r\n                  onClick={handleDelete}\r\n                >\r\n                  <Tooltip\r\n                    id=\"delete-action-tooltip\"\r\n                    title={t('Delete database')}\r\n                    placement=\"bottom\"\r\n                  >\r\n                    <Icons.Trash />\r\n                  </Tooltip>\r\n                </span>\r\n              )}\r\n              {canExport && (\r\n                <Tooltip\r\n                  id=\"export-action-tooltip\"\r\n                  title={t('Export')}\r\n                  placement=\"bottom\"\r\n                >\r\n                  <span\r\n                    role=\"button\"\r\n                    tabIndex={0}\r\n                    className=\"action-button\"\r\n                    onClick={handleExport}\r\n                  >\r\n                    <Icons.Share />\r\n                  </span>\r\n                </Tooltip>\r\n              )}\r\n              {canEdit && (\r\n                <Tooltip\r\n                  id=\"edit-action-tooltip\"\r\n                  title={t('Edit')}\r\n                  placement=\"bottom\"\r\n                >\r\n                  <span\r\n                    role=\"button\"\r\n                    data-test=\"database-edit\"\r\n                    tabIndex={0}\r\n                    className=\"action-button\"\r\n                    onClick={handleEdit}\r\n                  >\r\n                    <Icons.EditAlt data-test=\"edit-alt\" />\r\n                  </span>\r\n                </Tooltip>\r\n              )}\r\n            </Actions>\r\n          );\r\n        },\r\n        Header: t('Actions'),\r\n        id: 'actions',\r\n        hidden: !canEdit && !canDelete,\r\n        disableSortBy: true,\r\n      },\r\n    ],\r\n    [canDelete, canEdit, canExport],\r\n  );\r\n\r\n  const filters: Filters = useMemo(\r\n    () => [\r\n      {\r\n        Header: t('Expose in SQL Lab'),\r\n        id: 'expose_in_sqllab',\r\n        input: 'select',\r\n        operator: FilterOperator.equals,\r\n        unfilteredLabel: 'All',\r\n        selects: [\r\n          { label: 'Yes', value: true },\r\n          { label: 'No', value: false },\r\n        ],\r\n      },\r\n      {\r\n        Header: (\r\n          <Tooltip\r\n            id=\"allow-run-async-filter-header-tooltip\"\r\n            title={t('Asynchronous query execution')}\r\n            placement=\"top\"\r\n          >\r\n            <span>{t('AQE')}</span>\r\n          </Tooltip>\r\n        ),\r\n        id: 'allow_run_async',\r\n        input: 'select',\r\n        operator: FilterOperator.equals,\r\n        unfilteredLabel: 'All',\r\n        selects: [\r\n          { label: 'Yes', value: true },\r\n          { label: 'No', value: false },\r\n        ],\r\n      },\r\n      {\r\n        Header: t('Search'),\r\n        id: 'database_name',\r\n        input: 'search',\r\n        operator: FilterOperator.contains,\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <SubMenu {...menuData} />\r\n      <DatabaseModal\r\n        databaseId={currentDatabase?.id}\r\n        show={databaseModalOpen}\r\n        onHide={handleDatabaseEditModal}\r\n        onDatabaseAdd={() => {\r\n          refreshData();\r\n        }}\r\n      />\r\n      {databaseCurrentlyDeleting && (\r\n        <DeleteModal\r\n          description={t(\r\n            'The database %s is linked to %s charts that appear on %s dashboards. Are you sure you want to continue? Deleting the database will break those objects.',\r\n            databaseCurrentlyDeleting.database_name,\r\n            databaseCurrentlyDeleting.chart_count,\r\n            databaseCurrentlyDeleting.dashboard_count,\r\n          )}\r\n          onConfirm={() => {\r\n            if (databaseCurrentlyDeleting) {\r\n              handleDatabaseDelete(databaseCurrentlyDeleting);\r\n            }\r\n          }}\r\n          onHide={() => setDatabaseCurrentlyDeleting(null)}\r\n          open\r\n          title={t('Delete Database?')}\r\n        />\r\n      )}\r\n\r\n      <ListView<DatabaseObject>\r\n        className=\"database-list-view\"\r\n        columns={columns}\r\n        count={databaseCount}\r\n        data={databases}\r\n        fetchData={fetchData}\r\n        filters={filters}\r\n        initialSort={initialSort}\r\n        loading={loading}\r\n        pageSize={PAGE_SIZE}\r\n      />\r\n\r\n      <ImportModelsModal\r\n        resourceName=\"database\"\r\n        resourceLabel={t('database')}\r\n        passwordsNeededMessage={PASSWORDS_NEEDED_MESSAGE}\r\n        confirmOverwriteMessage={CONFIRM_OVERWRITE_MESSAGE}\r\n        addDangerToast={addDangerToast}\r\n        addSuccessToast={addSuccessToast}\r\n        onModelImport={handleDatabaseImport}\r\n        show={importingDatabase}\r\n        onHide={closeDatabaseImportModal}\r\n        passwordFields={passwordFields}\r\n        setPasswordFields={setPasswordFields}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withToasts(DatabaseList);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { FormEvent } from 'react';\r\nimport { SupersetTheme, JsonObject } from '@superset-ui/core';\r\nimport { InputProps } from 'antd/lib/input';\r\nimport ValidatedInput from 'src/components/Form/LabeledErrorBoundInput';\r\nimport {\r\n  StyledFormHeader,\r\n  formScrollableStyles,\r\n  validatedFormStyles,\r\n} from './styles';\r\nimport { DatabaseForm } from '../types';\r\n\r\nexport const FormFieldOrder = [\r\n  'host',\r\n  'port',\r\n  'database',\r\n  'username',\r\n  'password',\r\n  'database_name',\r\n];\r\n\r\ninterface FieldPropTypes {\r\n  required: boolean;\r\n  changeMethods: { onParametersChange: (value: any) => string } & {\r\n    onChange: (value: any) => string;\r\n  };\r\n  validationErrors: JsonObject | null;\r\n  getValidation: () => void;\r\n}\r\n\r\nconst hostField = ({\r\n  required,\r\n  changeMethods,\r\n  getValidation,\r\n  validationErrors,\r\n}: FieldPropTypes) => (\r\n  <ValidatedInput\r\n    id=\"host\"\r\n    name=\"host\"\r\n    required={required}\r\n    validationMethods={{ onBlur: getValidation }}\r\n    errorMessage={validationErrors?.host}\r\n    placeholder=\"e.g. 127.0.0.1\"\r\n    className=\"form-group-w-50\"\r\n    label=\"Host\"\r\n    onChange={changeMethods.onParametersChange}\r\n  />\r\n);\r\nconst portField = ({\r\n  required,\r\n  changeMethods,\r\n  getValidation,\r\n  validationErrors,\r\n}: FieldPropTypes) => (\r\n  <ValidatedInput\r\n    id=\"port\"\r\n    name=\"port\"\r\n    required={required}\r\n    validationMethods={{ onBlur: getValidation }}\r\n    errorMessage={validationErrors?.port}\r\n    placeholder=\"e.g. 5432\"\r\n    className=\"form-group-w-50\"\r\n    label=\"Port\"\r\n    onChange={changeMethods.onParametersChange}\r\n  />\r\n);\r\nconst databaseField = ({\r\n  required,\r\n  changeMethods,\r\n  getValidation,\r\n  validationErrors,\r\n}: FieldPropTypes) => (\r\n  <ValidatedInput\r\n    id=\"database\"\r\n    name=\"database\"\r\n    required={required}\r\n    validationMethods={{ onBlur: getValidation }}\r\n    errorMessage={validationErrors?.database}\r\n    placeholder=\"e.g. world_population\"\r\n    label=\"Database name\"\r\n    onChange={changeMethods.onParametersChange}\r\n    helpText=\"Copy the name of the PostgreSQL database you are trying to connect to.\"\r\n  />\r\n);\r\nconst usernameField = ({\r\n  required,\r\n  changeMethods,\r\n  getValidation,\r\n  validationErrors,\r\n}: FieldPropTypes) => (\r\n  <ValidatedInput\r\n    id=\"username\"\r\n    name=\"username\"\r\n    required={required}\r\n    validationMethods={{ onBlur: getValidation }}\r\n    errorMessage={validationErrors?.username}\r\n    placeholder=\"e.g. Analytics\"\r\n    label=\"Username\"\r\n    onChange={changeMethods.onParametersChange}\r\n  />\r\n);\r\nconst passwordField = ({\r\n  required,\r\n  changeMethods,\r\n  getValidation,\r\n  validationErrors,\r\n}: FieldPropTypes) => (\r\n  <ValidatedInput\r\n    id=\"password\"\r\n    name=\"password\"\r\n    required={required}\r\n    validationMethods={{ onBlur: getValidation }}\r\n    errorMessage={validationErrors?.password}\r\n    placeholder=\"e.g. ********\"\r\n    label=\"Password\"\r\n    onChange={changeMethods.onParametersChange}\r\n  />\r\n);\r\nconst displayField = ({\r\n  required,\r\n  changeMethods,\r\n  getValidation,\r\n  validationErrors,\r\n}: FieldPropTypes) => (\r\n  <ValidatedInput\r\n    id=\"database_name\"\r\n    name=\"database_name\"\r\n    required={required}\r\n    validationMethods={{ onBlur: getValidation }}\r\n    errorMessage={validationErrors?.database_name}\r\n    placeholder=\"\"\r\n    label=\"Display Name\"\r\n    onChange={changeMethods.onChange}\r\n    helpText=\"Pick a nickname for this database to display as in Superset.\"\r\n  />\r\n);\r\n\r\nconst FORM_FIELD_MAP = {\r\n  host: hostField,\r\n  port: portField,\r\n  database: databaseField,\r\n  username: usernameField,\r\n  password: passwordField,\r\n  database_name: displayField,\r\n};\r\n\r\nconst DatabaseConnectionForm = ({\r\n  dbModel: { name, parameters },\r\n  onParametersChange,\r\n  onChange,\r\n  validationErrors,\r\n  getValidation,\r\n}: {\r\n  dbModel: DatabaseForm;\r\n  onParametersChange: (\r\n    event: FormEvent<InputProps> | { target: HTMLInputElement },\r\n  ) => void;\r\n  onChange: (\r\n    event: FormEvent<InputProps> | { target: HTMLInputElement },\r\n  ) => void;\r\n  validationErrors: JsonObject | null;\r\n  getValidation: () => void;\r\n}) => (\r\n  <>\r\n    <StyledFormHeader>\r\n      <h4>Enter the required {name} credentials</h4>\r\n      <p className=\"helper\">\r\n        Need help? Learn more about connecting to {name}.\r\n      </p>\r\n    </StyledFormHeader>\r\n    <div\r\n      // @ts-ignore\r\n      css={(theme: SupersetTheme) => [\r\n        formScrollableStyles,\r\n        validatedFormStyles(theme),\r\n      ]}\r\n    >\r\n      {parameters &&\r\n        FormFieldOrder.filter(\r\n          (key: string) =>\r\n            Object.keys(parameters.properties).includes(key) ||\r\n            key === 'database_name',\r\n        ).map(field =>\r\n          FORM_FIELD_MAP[field]({\r\n            required: parameters.required.includes(field),\r\n            changeMethods: { onParametersChange, onChange },\r\n            validationErrors,\r\n            getValidation,\r\n            key: field,\r\n          }),\r\n        )}\r\n    </div>\r\n  </>\r\n);\r\nexport const FormFieldMap = FORM_FIELD_MAP;\r\n\r\nexport default DatabaseConnectionForm;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { ChangeEvent, EventHandler } from 'react';\r\nimport cx from 'classnames';\r\nimport { t, SupersetTheme } from '@superset-ui/core';\r\nimport InfoTooltip from 'src/components/InfoTooltip';\r\nimport IndeterminateCheckbox from 'src/components/IndeterminateCheckbox';\r\nimport Collapse from 'src/components/Collapse';\r\nimport {\r\n  StyledInputContainer,\r\n  StyledJsonEditor,\r\n  StyledExpandableForm,\r\n  antdCollapseStyles,\r\n} from './styles';\r\nimport { DatabaseObject } from '../types';\r\n\r\nconst defaultExtra =\r\n  '{\\n  \"metadata_params\": {},\\n  \"engine_params\": {},' +\r\n  '\\n  \"metadata_cache_timeout\": {},\\n  \"schemas_allowed_for_csv_upload\": [] \\n}';\r\n\r\nconst ExtraOptions = ({\r\n  db,\r\n  onInputChange,\r\n  onTextChange,\r\n  onEditorChange,\r\n}: {\r\n  db: DatabaseObject | null;\r\n  onInputChange: EventHandler<ChangeEvent<HTMLInputElement>>;\r\n  onTextChange: EventHandler<ChangeEvent<HTMLTextAreaElement>>;\r\n  onEditorChange: Function;\r\n}) => {\r\n  const expandableModalIsOpen = !!db?.expose_in_sqllab;\r\n  const createAsOpen = !!(db?.allow_ctas || db?.allow_cvas);\r\n\r\n  return (\r\n    <Collapse\r\n      expandIconPosition=\"right\"\r\n      accordion\r\n      css={(theme: SupersetTheme) => antdCollapseStyles(theme)}\r\n    >\r\n      <Collapse.Panel\r\n        header={\r\n          <div>\r\n            <h4>SQL Lab</h4>\r\n            <p className=\"helper\">\r\n              Configure how this database will function in SQL Lab.\r\n            </p>\r\n          </div>\r\n        }\r\n        key=\"1\"\r\n      >\r\n        <StyledInputContainer className=\"mb-0\">\r\n          <div className=\"input-container\">\r\n            <IndeterminateCheckbox\r\n              id=\"expose_in_sqllab\"\r\n              indeterminate={false}\r\n              checked={!!db?.expose_in_sqllab}\r\n              onChange={onInputChange}\r\n              labelText={t('Expose in SQL Lab')}\r\n            />\r\n            <InfoTooltip\r\n              tooltip={t('Allow this database to be queried in SQL Lab')}\r\n            />\r\n          </div>\r\n          <StyledExpandableForm\r\n            className={cx('expandable', {\r\n              open: expandableModalIsOpen,\r\n              'ctas-open': createAsOpen,\r\n            })}\r\n          >\r\n            <StyledInputContainer className=\"mb-0\">\r\n              <div className=\"input-container\">\r\n                <IndeterminateCheckbox\r\n                  id=\"allow_ctas\"\r\n                  indeterminate={false}\r\n                  checked={!!db?.allow_ctas}\r\n                  onChange={onInputChange}\r\n                  labelText={t('Allow CREATE TABLE AS')}\r\n                />\r\n                <InfoTooltip\r\n                  tooltip={t('Allow creation of new tables based on queries')}\r\n                />\r\n              </div>\r\n            </StyledInputContainer>\r\n            <StyledInputContainer className=\"mb-0\">\r\n              <div className=\"input-container\">\r\n                <IndeterminateCheckbox\r\n                  id=\"allow_cvas\"\r\n                  indeterminate={false}\r\n                  checked={!!db?.allow_cvas}\r\n                  onChange={onInputChange}\r\n                  labelText={t('Allow CREATE VIEW AS')}\r\n                />\r\n                <InfoTooltip\r\n                  tooltip={t('Allow creation of new views based on queries')}\r\n                />\r\n              </div>\r\n              <StyledInputContainer\r\n                className={cx('expandable', { open: createAsOpen })}\r\n              >\r\n                <div className=\"control-label\">{t('CTAS & CVAS SCHEMA')}</div>\r\n                <div className=\"input-container\">\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"force_ctas_schema\"\r\n                    value={db?.force_ctas_schema || ''}\r\n                    placeholder={t('Search or select schema')}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n                <div className=\"helper\">\r\n                  {t(\r\n                    'When allowing CREATE TABLE AS option in SQL Lab, this option ' +\r\n                      'forces the table to be created in this schema.',\r\n                  )}\r\n                </div>\r\n              </StyledInputContainer>\r\n            </StyledInputContainer>\r\n            <StyledInputContainer className=\"mb-0\">\r\n              <div className=\"input-container\">\r\n                <IndeterminateCheckbox\r\n                  id=\"allow_dml\"\r\n                  indeterminate={false}\r\n                  checked={!!db?.allow_dml}\r\n                  onChange={onInputChange}\r\n                  labelText={t('Allow DML')}\r\n                />\r\n                <InfoTooltip\r\n                  tooltip={t(\r\n                    'Allow manipulation of the database using non-SELECT statements such as UPDATE, DELETE, CREATE, etc.',\r\n                  )}\r\n                />\r\n              </div>\r\n            </StyledInputContainer>\r\n            <StyledInputContainer>\r\n              <div className=\"input-container\">\r\n                <IndeterminateCheckbox\r\n                  id=\"allow_multi_schema_metadata_fetch\"\r\n                  indeterminate={false}\r\n                  checked={!!db?.allow_multi_schema_metadata_fetch}\r\n                  onChange={onInputChange}\r\n                  labelText={t('Allow multi schema metadata fetch')}\r\n                />\r\n                <InfoTooltip\r\n                  tooltip={t(\r\n                    'Allow SQL Lab to fetch a list of all tables and all views across all database ' +\r\n                      'schemas. For large data warehouse with thousands of tables, this can be ' +\r\n                      'expensive and put strain on the system.',\r\n                  )}\r\n                />\r\n              </div>\r\n            </StyledInputContainer>\r\n          </StyledExpandableForm>\r\n        </StyledInputContainer>\r\n      </Collapse.Panel>\r\n      <Collapse.Panel\r\n        header={\r\n          <div>\r\n            <h4>Performance</h4>\r\n            <p className=\"helper\">\r\n              Adjust settings that will impact the performance of this database.\r\n            </p>\r\n          </div>\r\n        }\r\n        key=\"2\"\r\n      >\r\n        <StyledInputContainer className=\"mb-8\">\r\n          <div className=\"control-label\">{t('Chart cache timeout')}</div>\r\n          <div className=\"input-container\">\r\n            <input\r\n              type=\"number\"\r\n              name=\"cache_timeout\"\r\n              value={db?.cache_timeout || ''}\r\n              placeholder={t('Chart cache timeout')}\r\n              onChange={onInputChange}\r\n            />\r\n          </div>\r\n          <div className=\"helper\">\r\n            {t(\r\n              'Duration (in seconds) of the caching timeout for charts of this database.' +\r\n                ' A timeout of 0 indicates that the cache never expires.' +\r\n                ' Note this defaults to the global timeout if undefined.',\r\n            )}\r\n          </div>\r\n        </StyledInputContainer>\r\n        <StyledInputContainer className=\"mb-0\">\r\n          <div className=\"input-container\">\r\n            <IndeterminateCheckbox\r\n              id=\"allow_run_async\"\r\n              indeterminate={false}\r\n              checked={!!db?.allow_run_async}\r\n              onChange={onInputChange}\r\n              labelText={t('Asynchronous query execution')}\r\n            />\r\n            <InfoTooltip\r\n              tooltip={t(\r\n                'Operate the database in asynchronous mode, meaning that the queries ' +\r\n                  'are executed on remote workers as opposed to on the web server itself. ' +\r\n                  'This assumes that you have a Celery worker setup as well as a results ' +\r\n                  'backend. Refer to the installation docs for more information.',\r\n              )}\r\n            />\r\n          </div>\r\n        </StyledInputContainer>\r\n      </Collapse.Panel>\r\n      <Collapse.Panel\r\n        header={\r\n          <div>\r\n            <h4>Security</h4>\r\n            <p className=\"helper\">\r\n              Add connection information for other systems.\r\n            </p>\r\n          </div>\r\n        }\r\n        key=\"3\"\r\n      >\r\n        <StyledInputContainer>\r\n          <div className=\"control-label\">{t('Secure extra')}</div>\r\n          <div className=\"input-container\">\r\n            <StyledJsonEditor\r\n              name=\"encrypted_extra\"\r\n              value={db?.encrypted_extra || ''}\r\n              placeholder={t('Secure extra')}\r\n              onChange={(json: string) =>\r\n                onEditorChange({ json, name: 'encrypted_extra' })\r\n              }\r\n              width=\"100%\"\r\n              height=\"160px\"\r\n            />\r\n          </div>\r\n          <div className=\"helper\">\r\n            <div>\r\n              {t('JSON string containing additional connection configuration.')}\r\n            </div>\r\n            <div>\r\n              {t(\r\n                'This is used to provide connection information for systems like Hive, ' +\r\n                  'Presto, and BigQuery, which do not conform to the username:password syntax ' +\r\n                  'normally used by SQLAlchemy.',\r\n              )}\r\n            </div>\r\n          </div>\r\n        </StyledInputContainer>\r\n        <StyledInputContainer>\r\n          <div className=\"control-label\">{t('Root certificate')}</div>\r\n          <div className=\"input-container\">\r\n            <textarea\r\n              name=\"server_cert\"\r\n              value={db?.server_cert || ''}\r\n              placeholder={t('Root certificate')}\r\n              onChange={onTextChange}\r\n            />\r\n          </div>\r\n          <div className=\"helper\">\r\n            {t(\r\n              'Optional CA_BUNDLE contents to validate HTTPS requests. Only available on ' +\r\n                'certain database engines.',\r\n            )}\r\n          </div>\r\n        </StyledInputContainer>\r\n      </Collapse.Panel>\r\n      <Collapse.Panel\r\n        header={\r\n          <div>\r\n            <h4>Other</h4>\r\n            <p className=\"helper\">Additional settings.</p>\r\n          </div>\r\n        }\r\n        key=\"4\"\r\n      >\r\n        <StyledInputContainer className=\"mb-0\">\r\n          <div className=\"input-container\">\r\n            <IndeterminateCheckbox\r\n              id=\"impersonate_user\"\r\n              indeterminate={false}\r\n              checked={!!db?.impersonate_user}\r\n              onChange={onInputChange}\r\n              labelText={t(\r\n                'Impersonate Logged In User (Presto, Trino, Hive, and GSheets)',\r\n              )}\r\n            />\r\n            <InfoTooltip\r\n              tooltip={t(\r\n                'If Presto or Trino, all the queries in SQL Lab are going to be executed as the ' +\r\n                  'currently logged on user who must have permission to run them. If Hive ' +\r\n                  'and hive.server2.enable.doAs is enabled, will run the queries as ' +\r\n                  'service account, but impersonate the currently logged on user via ' +\r\n                  'hive.server2.proxy.user property.',\r\n              )}\r\n            />\r\n          </div>\r\n        </StyledInputContainer>\r\n        <StyledInputContainer className=\"mb-0\">\r\n          <div className=\"input-container\">\r\n            <IndeterminateCheckbox\r\n              id=\"allow_csv_upload\"\r\n              indeterminate={false}\r\n              checked={!!db?.allow_csv_upload}\r\n              onChange={onInputChange}\r\n              labelText={t('Allow data upload')}\r\n            />\r\n            <InfoTooltip\r\n              tooltip={t(\r\n                'If selected, please set the schemas allowed for data upload in Extra.',\r\n              )}\r\n            />\r\n          </div>\r\n        </StyledInputContainer>\r\n        <StyledInputContainer className=\"extra-container\">\r\n          <div className=\"control-label\">{t('Extra')}</div>\r\n          <div className=\"input-container\">\r\n            <StyledJsonEditor\r\n              name=\"extra\"\r\n              value={db?.extra ?? defaultExtra}\r\n              placeholder={t('Secure extra')}\r\n              onChange={(json: string) =>\r\n                onEditorChange({ json, name: 'extra' })\r\n              }\r\n              width=\"100%\"\r\n              height=\"160px\"\r\n            />\r\n          </div>\r\n          <div className=\"helper\">\r\n            <div>\r\n              {t('JSON string containing extra configuration elements.')}\r\n            </div>\r\n            <div>\r\n              {t(\r\n                '1. The engine_params object gets unpacked into the sqlalchemy.create_engine ' +\r\n                  'call, while the metadata_params gets unpacked into the sqlalchemy.MetaData ' +\r\n                  'call.',\r\n              )}\r\n            </div>\r\n            <div>\r\n              {t(\r\n                '2. The metadata_cache_timeout is a cache timeout setting in seconds for ' +\r\n                  'metadata fetch of this database. Specify it as \"metadata_cache_timeout\": ' +\r\n                  '{\"schema_cache_timeout\": 600, \"table_cache_timeout\": 600}. If unset, cache ' +\r\n                  'will not be enabled for the functionality. A timeout of 0 indicates that ' +\r\n                  'the cache never expires.',\r\n              )}\r\n            </div>\r\n            <div>\r\n              {t(\r\n                '3. The schemas_allowed_for_csv_upload is a comma separated list of schemas ' +\r\n                  'that CSVs are allowed to upload to. Specify it as ' +\r\n                  '\"schemas_allowed_for_csv_upload\": [\"public\", \"csv_upload\"]. If database ' +\r\n                  'flavor does not support schema or any schema is allowed to be accessed, ' +\r\n                  'just leave the list empty.',\r\n              )}\r\n            </div>\r\n            <div>\r\n              {t(\r\n                \"4. The version field is a string specifying this db's version. This \" +\r\n                  'should be used with Presto DBs so that the syntax is correct.',\r\n              )}\r\n            </div>\r\n            <div>\r\n              {t(\r\n                '5. The allows_virtual_table_explore field is a boolean specifying whether ' +\r\n                  'or not the Explore button in SQL Lab results is shown.',\r\n              )}\r\n            </div>\r\n          </div>\r\n        </StyledInputContainer>\r\n      </Collapse.Panel>\r\n    </Collapse>\r\n  );\r\n};\r\n\r\nexport default ExtraOptions;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { EventHandler, ChangeEvent, MouseEvent } from 'react';\r\nimport { t, SupersetTheme } from '@superset-ui/core';\r\nimport Button from 'src/components/Button';\r\nimport { StyledInputContainer, wideButton } from './styles';\r\n\r\nimport { DatabaseObject } from '../types';\r\n\r\nconst SqlAlchemyTab = ({\r\n  db,\r\n  onInputChange,\r\n  testConnection,\r\n  conf,\r\n}: {\r\n  db: DatabaseObject | null;\r\n  onInputChange: EventHandler<ChangeEvent<HTMLInputElement>>;\r\n  testConnection: EventHandler<MouseEvent<HTMLElement>>;\r\n  conf: { SQLALCHEMY_DOCS_URL: string; SQLALCHEMY_DISPLAY_TEXT: string };\r\n}) => (\r\n  <>\r\n    <StyledInputContainer>\r\n      <div className=\"control-label\">\r\n        {t('Display Name')}\r\n        <span className=\"required\">*</span>\r\n      </div>\r\n      <div className=\"input-container\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"database_name\"\r\n          data-test=\"database-name-input\"\r\n          value={db?.database_name || ''}\r\n          placeholder={t('Name your database')}\r\n          onChange={onInputChange}\r\n        />\r\n      </div>\r\n      <div className=\"helper\">\r\n        {t('Pick a name to help you identify this database.')}\r\n      </div>\r\n    </StyledInputContainer>\r\n    <StyledInputContainer>\r\n      <div className=\"control-label\">\r\n        {t('SQLAlchemy URI')}\r\n        <span className=\"required\">*</span>\r\n      </div>\r\n      <div className=\"input-container\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"sqlalchemy_uri\"\r\n          data-test=\"sqlalchemy-uri-input\"\r\n          value={db?.sqlalchemy_uri || ''}\r\n          autoComplete=\"off\"\r\n          placeholder={t(\r\n            'dialect+driver://username:password@host:port/database',\r\n          )}\r\n          onChange={onInputChange}\r\n        />\r\n      </div>\r\n      <div className=\"helper\">\r\n        {t('Refer to the')}{' '}\r\n        <a\r\n          href={conf?.SQLALCHEMY_DOCS_URL ?? ''}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          {conf?.SQLALCHEMY_DISPLAY_TEXT ?? ''}\r\n        </a>{' '}\r\n        {t('for more information on how to structure your URI.')}\r\n      </div>\r\n    </StyledInputContainer>\r\n    <Button\r\n      onClick={testConnection}\r\n      cta\r\n      buttonStyle=\"link\"\r\n      css={(theme: SupersetTheme) => wideButton(theme)}\r\n    >\r\n      {t('Test connection')}\r\n    </Button>\r\n  </>\r\n);\r\n\r\nexport default SqlAlchemyTab;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { t, SupersetTheme } from '@superset-ui/core';\r\nimport React, {\r\n  FunctionComponent,\r\n  useEffect,\r\n  useState,\r\n  useReducer,\r\n  Reducer,\r\n} from 'react';\r\nimport Tabs from 'src/components/Tabs';\r\nimport { Alert } from 'src/common/components';\r\nimport Modal from 'src/components/Modal';\r\nimport Button from 'src/components/Button';\r\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\r\nimport {\r\n  testDatabaseConnection,\r\n  useSingleViewResource,\r\n  useAvailableDatabases,\r\n  useDatabaseValidation,\r\n} from 'src/views/CRUD/hooks';\r\nimport { useCommonConf } from 'src/views/CRUD/data/database/state';\r\nimport {\r\n  DatabaseObject,\r\n  DatabaseForm,\r\n  CONFIGURATION_METHOD,\r\n} from 'src/views/CRUD/data/database/types';\r\nimport ExtraOptions from './ExtraOptions';\r\nimport SqlAlchemyForm from './SqlAlchemyForm';\r\n\r\nimport DatabaseConnectionForm from './DatabaseConnectionForm';\r\nimport {\r\n  antDAlertStyles,\r\n  antDModalNoPaddingStyles,\r\n  antDModalStyles,\r\n  antDTabsStyles,\r\n  buttonLinkStyles,\r\n  TabHeader,\r\n  CreateHeaderSubtitle,\r\n  CreateHeaderTitle,\r\n  EditHeaderSubtitle,\r\n  EditHeaderTitle,\r\n  formHelperStyles,\r\n  formStyles,\r\n  StyledBasicTab,\r\n} from './styles';\r\n\r\nconst DOCUMENTATION_LINK =\r\n  'https://superset.apache.org/docs/databases/installing-database-drivers';\r\n\r\ninterface DatabaseModalProps {\r\n  addDangerToast: (msg: string) => void;\r\n  addSuccessToast: (msg: string) => void;\r\n  onDatabaseAdd?: (database?: DatabaseObject) => void; // TODO: should we add a separate function for edit?\r\n  onHide: () => void;\r\n  show: boolean;\r\n  databaseId: number | undefined; // If included, will go into edit mode\r\n}\r\n\r\nenum ActionType {\r\n  configMethodChange,\r\n  dbSelected,\r\n  editorChange,\r\n  fetched,\r\n  inputChange,\r\n  parametersChange,\r\n  reset,\r\n  textChange,\r\n}\r\n\r\ninterface DBReducerPayloadType {\r\n  target?: string;\r\n  name: string;\r\n  json?: {};\r\n  type?: string;\r\n  checked?: boolean;\r\n  value?: string;\r\n}\r\n\r\ntype DBReducerActionType =\r\n  | {\r\n      type:\r\n        | ActionType.textChange\r\n        | ActionType.inputChange\r\n        | ActionType.editorChange\r\n        | ActionType.parametersChange;\r\n      payload: DBReducerPayloadType;\r\n    }\r\n  | {\r\n      type: ActionType.fetched;\r\n      payload: Partial<DatabaseObject>;\r\n    }\r\n  | {\r\n      type: ActionType.dbSelected;\r\n      payload: {\r\n        engine?: string;\r\n        configuration_method: CONFIGURATION_METHOD;\r\n      };\r\n    }\r\n  | {\r\n      type: ActionType.reset;\r\n    }\r\n  | {\r\n      type: ActionType.configMethodChange;\r\n      payload: { configuration_method: CONFIGURATION_METHOD };\r\n    };\r\n\r\nfunction dbReducer(\r\n  state: Partial<DatabaseObject> | null,\r\n  action: DBReducerActionType,\r\n): Partial<DatabaseObject> | null {\r\n  const trimmedState = {\r\n    ...(state || {}),\r\n  };\r\n\r\n  switch (action.type) {\r\n    case ActionType.inputChange:\r\n      if (action.payload.type === 'checkbox') {\r\n        return {\r\n          ...trimmedState,\r\n          [action.payload.name]: action.payload.checked,\r\n        };\r\n      }\r\n      return {\r\n        ...trimmedState,\r\n        [action.payload.name]: action.payload.value,\r\n      };\r\n    case ActionType.parametersChange:\r\n      return {\r\n        ...trimmedState,\r\n        parameters: {\r\n          ...trimmedState.parameters,\r\n          [action.payload.name]: action.payload.value,\r\n        },\r\n      };\r\n    case ActionType.editorChange:\r\n      return {\r\n        ...trimmedState,\r\n        [action.payload.name]: action.payload.json,\r\n      };\r\n    case ActionType.textChange:\r\n      return {\r\n        ...trimmedState,\r\n        [action.payload.name]: action.payload.value,\r\n      };\r\n    case ActionType.fetched:\r\n      return {\r\n        engine: trimmedState.engine,\r\n        configuration_method: trimmedState.configuration_method,\r\n        ...action.payload,\r\n      };\r\n    case ActionType.dbSelected:\r\n    case ActionType.configMethodChange:\r\n      return {\r\n        ...action.payload,\r\n      };\r\n    case ActionType.reset:\r\n    default:\r\n      return {};\r\n  }\r\n}\r\n\r\nconst DEFAULT_TAB_KEY = '1';\r\nconst FALSY_FORM_VALUES = [undefined, null, ''];\r\n\r\nconst DatabaseModal: FunctionComponent<DatabaseModalProps> = ({\r\n  addDangerToast,\r\n  addSuccessToast,\r\n  onDatabaseAdd,\r\n  onHide,\r\n  show,\r\n  databaseId,\r\n}) => {\r\n  const [db, setDB] = useReducer<\r\n    Reducer<Partial<DatabaseObject> | null, DBReducerActionType>\r\n  >(dbReducer, null);\r\n  const [tabKey, setTabKey] = useState<string>(DEFAULT_TAB_KEY);\r\n  const [availableDbs, getAvailableDbs] = useAvailableDatabases();\r\n  const [validationErrors, getValidation] = useDatabaseValidation();\r\n  const [hasConnectedDb, setHasConnectedDb] = useState<boolean>(false);\r\n  const [dbName, setDbName] = useState('');\r\n  const conf = useCommonConf();\r\n\r\n  const isEditMode = !!databaseId;\r\n  const useSqlAlchemyForm =\r\n    db?.configuration_method === CONFIGURATION_METHOD.SQLALCHEMY_URI;\r\n  const useTabLayout = isEditMode || useSqlAlchemyForm;\r\n\r\n  // Database fetch logic\r\n  const {\r\n    state: { loading: dbLoading, resource: dbFetched },\r\n    fetchResource,\r\n    createResource,\r\n    updateResource,\r\n  } = useSingleViewResource<DatabaseObject>(\r\n    'database',\r\n    t('database'),\r\n    addDangerToast,\r\n  );\r\n\r\n  // Test Connection logic\r\n  const testConnection = () => {\r\n    if (!db?.sqlalchemy_uri) {\r\n      addDangerToast(t('Please enter a SQLAlchemy URI to test'));\r\n      return;\r\n    }\r\n\r\n    const connection = {\r\n      sqlalchemy_uri: db?.sqlalchemy_uri || '',\r\n      database_name: db?.database_name?.trim() || undefined,\r\n      impersonate_user: db?.impersonate_user || undefined,\r\n      extra: db?.extra || undefined,\r\n      encrypted_extra: db?.encrypted_extra || undefined,\r\n      server_cert: db?.server_cert || undefined,\r\n    };\r\n\r\n    testDatabaseConnection(connection, addDangerToast, addSuccessToast);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setDB({ type: ActionType.reset });\r\n    setHasConnectedDb(false);\r\n    onHide();\r\n  };\r\n\r\n  const onSave = async () => {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const { id, ...update } = db || {};\r\n    if (db?.id) {\r\n      if (db.sqlalchemy_uri) {\r\n        // don't pass parameters if using the sqlalchemy uri\r\n        delete update.parameters;\r\n      }\r\n      const result = await updateResource(\r\n        db.id as number,\r\n        update as DatabaseObject,\r\n      );\r\n      if (result) {\r\n        if (onDatabaseAdd) {\r\n          onDatabaseAdd();\r\n        }\r\n        onClose();\r\n      }\r\n    } else if (db) {\r\n      // Create\r\n      const dbId = await createResource(update as DatabaseObject);\r\n      if (dbId) {\r\n        setHasConnectedDb(true);\r\n        if (onDatabaseAdd) {\r\n          onDatabaseAdd();\r\n        }\r\n        if (useTabLayout) {\r\n          // tab layout only has one step\r\n          // so it should close immediately on save\r\n          onClose();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const onChange = (type: any, payload: any) => {\r\n    setDB({ type, payload } as DBReducerActionType);\r\n  };\r\n\r\n  // Initialize\r\n  const fetchDB = () => {\r\n    if (isEditMode && databaseId) {\r\n      if (!dbLoading) {\r\n        fetchResource(databaseId).catch(e =>\r\n          addDangerToast(\r\n            t(\r\n              'Sorry there was an error fetching database information: %s',\r\n              e.message,\r\n            ),\r\n          ),\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (show) {\r\n      setTabKey(DEFAULT_TAB_KEY);\r\n      getAvailableDbs();\r\n      setDB({\r\n        type: ActionType.dbSelected,\r\n        payload: {\r\n          configuration_method: CONFIGURATION_METHOD.SQLALCHEMY_URI,\r\n        }, // todo hook this up to step 1\r\n      });\r\n    }\r\n    if (databaseId && show) {\r\n      fetchDB();\r\n    }\r\n  }, [show, databaseId]);\r\n\r\n  useEffect(() => {\r\n    if (dbFetched) {\r\n      setDB({\r\n        type: ActionType.fetched,\r\n        payload: dbFetched,\r\n      });\r\n      // keep a copy of the name separate for display purposes\r\n      // because it shouldn't change when the form is updated\r\n      setDbName(dbFetched.database_name);\r\n    }\r\n  }, [dbFetched]);\r\n\r\n  const tabChange = (key: string) => {\r\n    setTabKey(key);\r\n  };\r\n\r\n  const dbModel: DatabaseForm =\r\n    availableDbs?.databases?.find(\r\n      (available: { engine: string | undefined }) =>\r\n        available.engine === db?.engine,\r\n    ) || {};\r\n\r\n  const disableSave =\r\n    !hasConnectedDb &&\r\n    (useSqlAlchemyForm\r\n      ? !(db?.database_name?.trim() && db?.sqlalchemy_uri)\r\n      : // disable the button if there is no dbModel.parameters or if\r\n        // any required fields are falsy\r\n        !dbModel?.parameters ||\r\n        !!dbModel.parameters.required.filter(field =>\r\n          FALSY_FORM_VALUES.includes(db?.parameters?.[field]),\r\n        ).length);\r\n\r\n  return useTabLayout ? (\r\n    <Modal\r\n      css={(theme: SupersetTheme) => [\r\n        antDTabsStyles,\r\n        antDModalStyles(theme),\r\n        antDModalNoPaddingStyles,\r\n        formHelperStyles(theme),\r\n      ]}\r\n      name=\"database\"\r\n      disablePrimaryButton={disableSave}\r\n      data-test=\"database-modal\"\r\n      height=\"600px\"\r\n      onHandledPrimaryAction={onSave}\r\n      onHide={onClose}\r\n      primaryButtonName={isEditMode ? t('Save') : t('Connect')}\r\n      width=\"500px\"\r\n      show={show}\r\n      title={\r\n        <h4>{isEditMode ? t('Edit database') : t('Connect a database')}</h4>\r\n      }\r\n    >\r\n      {isEditMode ? (\r\n        <TabHeader>\r\n          <EditHeaderTitle>{db?.backend}</EditHeaderTitle>\r\n          <EditHeaderSubtitle>{dbName}</EditHeaderSubtitle>\r\n        </TabHeader>\r\n      ) : (\r\n        <TabHeader>\r\n          <CreateHeaderTitle>Enter Primary Credentials</CreateHeaderTitle>\r\n          <CreateHeaderSubtitle>\r\n            Need help? Learn how to connect your database{' '}\r\n            <a\r\n              href={DOCUMENTATION_LINK}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              here\r\n            </a>\r\n            .\r\n          </CreateHeaderSubtitle>\r\n        </TabHeader>\r\n      )}\r\n      <hr />\r\n      <Tabs\r\n        defaultActiveKey={DEFAULT_TAB_KEY}\r\n        activeKey={tabKey}\r\n        onTabClick={tabChange}\r\n        animated={{ inkBar: true, tabPane: true }}\r\n      >\r\n        <StyledBasicTab tab={<span>{t('Basic')}</span>} key=\"1\">\r\n          {useSqlAlchemyForm ? (\r\n            <SqlAlchemyForm\r\n              db={db as DatabaseObject}\r\n              onInputChange={({ target }: { target: HTMLInputElement }) =>\r\n                onChange(ActionType.inputChange, {\r\n                  type: target.type,\r\n                  name: target.name,\r\n                  checked: target.checked,\r\n                  value: target.value,\r\n                })\r\n              }\r\n              conf={conf}\r\n              testConnection={testConnection}\r\n            />\r\n          ) : (\r\n            <div>\r\n              <p>TODO: form</p>\r\n            </div>\r\n          )}\r\n          <Alert\r\n            css={(theme: SupersetTheme) => antDAlertStyles(theme)}\r\n            message=\"Additional fields may be required\"\r\n            description={\r\n              <>\r\n                Select databases require additional fields to be completed in\r\n                the Advanced tab to successfully connect the database. Learn\r\n                what requirements your databases has{' '}\r\n                <a\r\n                  href={DOCUMENTATION_LINK}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  here\r\n                </a>\r\n                .\r\n              </>\r\n            }\r\n            type=\"info\"\r\n            showIcon\r\n          />\r\n        </StyledBasicTab>\r\n        <Tabs.TabPane tab={<span>{t('Advanced')}</span>} key=\"2\">\r\n          <ExtraOptions\r\n            db={db as DatabaseObject}\r\n            onInputChange={({ target }: { target: HTMLInputElement }) =>\r\n              onChange(ActionType.inputChange, {\r\n                type: target.type,\r\n                name: target.name,\r\n                checked: target.checked,\r\n                value: target.value,\r\n              })\r\n            }\r\n            onTextChange={({ target }: { target: HTMLTextAreaElement }) =>\r\n              onChange(ActionType.textChange, {\r\n                name: target.name,\r\n                value: target.value,\r\n              })\r\n            }\r\n            onEditorChange={(payload: { name: string; json: any }) =>\r\n              onChange(ActionType.editorChange, payload)\r\n            }\r\n          />\r\n        </Tabs.TabPane>\r\n      </Tabs>\r\n    </Modal>\r\n  ) : (\r\n    <Modal\r\n      css={(theme: SupersetTheme) => [\r\n        antDModalNoPaddingStyles,\r\n        antDModalStyles(theme),\r\n        formHelperStyles(theme),\r\n        formStyles(theme),\r\n      ]}\r\n      name=\"database\"\r\n      disablePrimaryButton={disableSave}\r\n      height=\"600px\"\r\n      onHandledPrimaryAction={onSave}\r\n      onHide={onClose}\r\n      primaryButtonName={hasConnectedDb ? t('Finish') : t('Connect')}\r\n      width=\"500px\"\r\n      show={show}\r\n      title={<h4>{t('Connect a database')}</h4>}\r\n    >\r\n      {hasConnectedDb ? (\r\n        <ExtraOptions\r\n          db={db as DatabaseObject}\r\n          onInputChange={({ target }: { target: HTMLInputElement }) =>\r\n            onChange(ActionType.inputChange, {\r\n              type: target.type,\r\n              name: target.name,\r\n              checked: target.checked,\r\n              value: target.value,\r\n            })\r\n          }\r\n          onTextChange={({ target }: { target: HTMLTextAreaElement }) =>\r\n            onChange(ActionType.textChange, {\r\n              name: target.name,\r\n              value: target.value,\r\n            })\r\n          }\r\n          onEditorChange={(payload: { name: string; json: any }) =>\r\n            onChange(ActionType.editorChange, payload)\r\n          }\r\n        />\r\n      ) : (\r\n        <>\r\n          <DatabaseConnectionForm\r\n            dbModel={dbModel}\r\n            onParametersChange={({ target }: { target: HTMLInputElement }) =>\r\n              onChange(ActionType.parametersChange, {\r\n                type: target.type,\r\n                name: target.name,\r\n                checked: target.checked,\r\n                value: target.value,\r\n              })\r\n            }\r\n            onChange={({ target }: { target: HTMLInputElement }) =>\r\n              onChange(ActionType.textChange, {\r\n                name: target.name,\r\n                value: target.value,\r\n              })\r\n            }\r\n            getValidation={() => getValidation(db)}\r\n            validationErrors={validationErrors}\r\n          />\r\n          <Button\r\n            buttonStyle=\"link\"\r\n            onClick={() =>\r\n              setDB({\r\n                type: ActionType.configMethodChange,\r\n                payload: {\r\n                  configuration_method: CONFIGURATION_METHOD.SQLALCHEMY_URI,\r\n                },\r\n              })\r\n            }\r\n            css={buttonLinkStyles}\r\n          >\r\n            Connect this database with a SQLAlchemy URI string instead\r\n          </Button>\r\n        </>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default withToasts(DatabaseModal);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\r\nimport { JsonEditor } from 'src/components/AsyncAceEditor';\r\nimport Tabs from 'src/components/Tabs';\r\n\r\nconst CTAS_CVAS_SCHEMA_FORM_HEIGHT = 102;\r\nconst EXPOSE_IN_SQLLAB_FORM_HEIGHT = CTAS_CVAS_SCHEMA_FORM_HEIGHT + 52;\r\nconst EXPOSE_ALL_FORM_HEIGHT = EXPOSE_IN_SQLLAB_FORM_HEIGHT + 102;\r\n\r\nconst anticonHeight = 12;\r\n\r\nexport const StyledFormHeader = styled.header`\r\n  border-bottom: ${({ theme }) => `${theme.gridUnit * 0.25}px solid\r\n    ${theme.colors.grayscale.light2};`}\r\n  padding-left: ${({ theme }) => theme.gridUnit * 4}px;\r\n  padding-right: ${({ theme }) => theme.gridUnit * 4}px;\r\n  margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\r\n  .helper {\r\n    color: ${({ theme }) => theme.colors.grayscale.base};\r\n    font-size: ${({ theme }) => theme.typography.sizes.s - 1}px;\r\n  }\r\n  h4 {\r\n    color: ${({ theme }) => theme.colors.grayscale.dark2};\r\n    font-weight: bold;\r\n    font-size: ${({ theme }) => theme.typography.sizes.l}px;\r\n  }\r\n`;\r\n\r\nexport const antdCollapseStyles = (theme: SupersetTheme) => css`\r\n  .ant-collapse-header {\r\n    padding-top: ${theme.gridUnit * 3.5}px;\r\n    padding-bottom: ${theme.gridUnit * 2.5}px;\r\n\r\n    .anticon.ant-collapse-arrow {\r\n      top: calc(50% - ${anticonHeight / 2}px);\r\n    }\r\n    .helper {\r\n      color: ${theme.colors.grayscale.base};\r\n    }\r\n  }\r\n  h4 {\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    margin-top: 0;\r\n    margin-bottom: ${theme.gridUnit}px;\r\n  }\r\n  p.helper {\r\n    margin-bottom: 0;\r\n    padding: 0;\r\n  }\r\n`;\r\n\r\nexport const antDTabsStyles = css`\r\n  .ant-tabs-top > .ant-tabs-nav {\r\n    margin-bottom: 0;\r\n  }\r\n  .ant-tabs-tab {\r\n    margin-right: 0;\r\n  }\r\n`;\r\n\r\nexport const antDModalNoPaddingStyles = css`\r\n  .ant-modal-body {\r\n    padding-left: 0;\r\n    padding-right: 0;\r\n  }\r\n`;\r\n\r\nexport const formScrollableStyles = (theme: SupersetTheme) => css`\r\n  overflow-y: scroll;\r\n  padding-left: ${theme.gridUnit * 4}px;\r\n  padding-right: ${theme.gridUnit * 4}px;\r\n`;\r\n\r\nexport const antDModalStyles = (theme: SupersetTheme) => css`\r\n  .ant-modal-header {\r\n    padding: ${theme.gridUnit * 4.5}px ${theme.gridUnit * 4}px\r\n      ${theme.gridUnit * 4}px;\r\n  }\r\n\r\n  .ant-modal-close-x .close {\r\n    color: ${theme.colors.grayscale.dark1};\r\n    opacity: 1;\r\n  }\r\n  .ant-modal-title > h4 {\r\n    font-weight: bold;\r\n  }\r\n`;\r\n\r\nexport const antDAlertStyles = (theme: SupersetTheme) => css`\r\n  border: 1px solid ${theme.colors.info.base};\r\n  padding: ${theme.gridUnit * 4}px;\r\n  margin: ${theme.gridUnit * 8}px 0 0;\r\n  .ant-alert-message {\r\n    color: ${theme.colors.info.dark2};\r\n    font-size: ${theme.typography.sizes.s + 1}px;\r\n    font-weight: bold;\r\n  }\r\n  .ant-alert-description {\r\n    color: ${theme.colors.info.dark2};\r\n    font-size: ${theme.typography.sizes.s + 1}px;\r\n    line-height: ${theme.gridUnit * 4}px;\r\n    .ant-alert-icon {\r\n      margin-right: ${theme.gridUnit * 2.5}px;\r\n      font-size: ${theme.typography.sizes.l + 1}px;\r\n      position: relative;\r\n      top: ${theme.gridUnit / 4}px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const formHelperStyles = (theme: SupersetTheme) => css`\r\n  .required {\r\n    margin-left: ${theme.gridUnit / 2}px;\r\n    color: ${theme.colors.error.base};\r\n  }\r\n\r\n  .helper {\r\n    display: block;\r\n    padding: ${theme.gridUnit}px 0;\r\n    color: ${theme.colors.grayscale.light1};\r\n    font-size: ${theme.typography.sizes.s - 1}px;\r\n    text-align: left;\r\n  }\r\n`;\r\n\r\nexport const wideButton = (theme: SupersetTheme) => css`\r\n  width: 100%;\r\n  border: 1px solid ${theme.colors.primary.dark2};\r\n  color: ${theme.colors.primary.dark2};\r\n  &:hover,\r\n  &:focus {\r\n    border: 1px solid ${theme.colors.primary.dark1};\r\n    color: ${theme.colors.primary.dark1};\r\n  }\r\n`;\r\n\r\nexport const formStyles = (theme: SupersetTheme) => css`\r\n  .form-group {\r\n    margin-bottom: ${theme.gridUnit * 4}px;\r\n    &-w-50 {\r\n      display: inline-block;\r\n      width: ${`calc(50% - ${theme.gridUnit * 4}px)`};\r\n      & + .form-group-w-50 {\r\n        margin-left: ${theme.gridUnit * 8}px;\r\n      }\r\n    }\r\n  }\r\n  .control-label {\r\n    color: ${theme.colors.grayscale.dark1};\r\n    font-size: ${theme.typography.sizes.s - 1}px;\r\n  }\r\n  .helper {\r\n    color: ${theme.colors.grayscale.light1};\r\n    font-size: ${theme.typography.sizes.s - 1}px;\r\n    margin-top: ${theme.gridUnit * 1.5}px;\r\n  }\r\n  .ant-tabs-content-holder {\r\n    overflow: auto;\r\n    max-height: 475px;\r\n  }\r\n`;\r\n\r\nexport const validatedFormStyles = (theme: SupersetTheme) => css`\r\n  label {\r\n    color: ${theme.colors.grayscale.dark1};\r\n    font-size: ${theme.typography.sizes.s - 1}px;\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nexport const StyledInputContainer = styled.div`\r\n  margin-bottom: ${({ theme }) => theme.gridUnit * 6}px;\r\n  &.mb-0 {\r\n    margin-bottom: 0;\r\n  }\r\n  &.mb-8 {\r\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\r\n  }\r\n\r\n  .control-label {\r\n    color: ${({ theme }) => theme.colors.grayscale.dark1};\r\n    font-size: ${({ theme }) => theme.typography.sizes.s - 1}px;\r\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\r\n  }\r\n\r\n  &.extra-container {\r\n    padding-top: 8px;\r\n  }\r\n\r\n  .input-container {\r\n    display: flex;\r\n    align-items: top;\r\n\r\n    label {\r\n      display: flex;\r\n      margin-left: ${({ theme }) => theme.gridUnit * 2}px;\r\n      margin-top: ${({ theme }) => theme.gridUnit * 0.75}px;\r\n      font-family: ${({ theme }) => theme.typography.families.sansSerif};\r\n      font-size: ${({ theme }) => theme.typography.sizes.m}px;\r\n    }\r\n\r\n    i {\r\n      margin: 0 ${({ theme }) => theme.gridUnit}px;\r\n    }\r\n  }\r\n\r\n  input,\r\n  textarea {\r\n    flex: 1 1 auto;\r\n  }\r\n\r\n  textarea {\r\n    height: 160px;\r\n    resize: none;\r\n  }\r\n\r\n  input::placeholder,\r\n  textarea::placeholder {\r\n    color: ${({ theme }) => theme.colors.grayscale.light1};\r\n  }\r\n\r\n  textarea,\r\n  input[type='text'],\r\n  input[type='number'] {\r\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\r\n      ${({ theme }) => theme.gridUnit * 2}px;\r\n    border-style: none;\r\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\r\n    border-radius: ${({ theme }) => theme.gridUnit}px;\r\n\r\n    &[name='name'] {\r\n      flex: 0 1 auto;\r\n      width: 40%;\r\n    }\r\n  }\r\n  &.expandable {\r\n    height: 0;\r\n    overflow: hidden;\r\n    transition: height 0.25s;\r\n    margin-left: ${({ theme }) => theme.gridUnit * 8}px;\r\n    margin-bottom: 0;\r\n    padding: 0;\r\n    .control-label {\r\n      margin-bottom: 0;\r\n    }\r\n    &.open {\r\n      height: ${CTAS_CVAS_SCHEMA_FORM_HEIGHT}px;\r\n      padding-right: ${({ theme }) => theme.gridUnit * 5}px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const StyledJsonEditor = styled(JsonEditor)`\r\n  flex: 1 1 auto;\r\n  border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\r\n  border-radius: ${({ theme }) => theme.gridUnit}px;\r\n`;\r\n\r\nexport const StyledExpandableForm = styled.div`\r\n  padding-top: ${({ theme }) => theme.gridUnit}px;\r\n  .input-container {\r\n    padding-top: ${({ theme }) => theme.gridUnit}px;\r\n    padding-bottom: ${({ theme }) => theme.gridUnit}px;\r\n  }\r\n  &.expandable {\r\n    height: 0;\r\n    overflow: hidden;\r\n    transition: height 0.25s;\r\n    margin-left: ${({ theme }) => theme.gridUnit * 7}px;\r\n    &.open {\r\n      height: ${EXPOSE_IN_SQLLAB_FORM_HEIGHT}px;\r\n      &.ctas-open {\r\n        height: ${EXPOSE_ALL_FORM_HEIGHT}px;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const StyledBasicTab = styled(Tabs.TabPane)`\r\n  padding-left: ${({ theme }) => theme.gridUnit * 4}px;\r\n  padding-right: ${({ theme }) => theme.gridUnit * 4}px;\r\n  margin-top: ${({ theme }) => theme.gridUnit * 6}px;\r\n`;\r\n\r\nexport const buttonLinkStyles = css`\r\n  font-weight: 400;\r\n  text-transform: initial;\r\n`;\r\n\r\nexport const TabHeader = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  padding: 0px;\r\n  margin: 0 ${({ theme }) => theme.gridUnit * 4}px\r\n    ${({ theme }) => theme.gridUnit * 8}px;\r\n`;\r\n\r\nexport const CreateHeaderTitle = styled.div`\r\n  color: ${({ theme }) => theme.colors.grayscale.dark2};\r\n  font-weight: bold;\r\n  font-size: ${({ theme }) => theme.typography.sizes.m}px;\r\n  padding: ${({ theme }) => theme.gridUnit * 1}px 0;\r\n`;\r\n\r\nexport const CreateHeaderSubtitle = styled.div`\r\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n`;\r\n\r\nexport const EditHeaderTitle = styled.div`\r\n  color: ${({ theme }) => theme.colors.grayscale.light1};\r\n  font-size: ${({ theme }) => theme.typography.sizes.s - 1}px;\r\n  text-transform: uppercase;\r\n`;\r\n\r\nexport const EditHeaderSubtitle = styled.div`\r\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\r\n  font-size: ${({ theme }) => theme.typography.sizes.l}px;\r\n  font-weight: bold;\r\n`;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nimport { useSelector } from 'react-redux';\r\nimport { ViewState } from 'src/views/types';\r\n\r\nexport function useCommonConf() {\r\n  return useSelector((state: ViewState) => state.common.conf);\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\ntype DatabaseUser = {\r\n  first_name: string;\r\n  last_name: string;\r\n};\r\n\r\nexport type DatabaseObject = {\r\n  // Connection + general\r\n  id?: number;\r\n  database_name: string;\r\n  sqlalchemy_uri?: string;\r\n  backend?: string;\r\n  created_by?: null | DatabaseUser;\r\n  changed_on_delta_humanized?: string;\r\n  changed_on?: string;\r\n  parameters?: { database_name?: string };\r\n  configuration_method: CONFIGURATION_METHOD;\r\n  engine?: string;\r\n\r\n  // Performance\r\n  cache_timeout?: string;\r\n  allow_run_async?: boolean;\r\n\r\n  // SQL Lab\r\n  expose_in_sqllab?: boolean;\r\n  allow_ctas?: boolean;\r\n  allow_cvas?: boolean;\r\n  allow_dml?: boolean;\r\n  allow_multi_schema_metadata_fetch?: boolean;\r\n  force_ctas_schema?: string;\r\n\r\n  // Security\r\n  encrypted_extra?: string;\r\n  server_cert?: string;\r\n\r\n  // Extra\r\n  impersonate_user?: boolean;\r\n  allow_csv_upload?: boolean;\r\n  extra?: string;\r\n};\r\n\r\nexport type DatabaseForm = {\r\n  engine: string;\r\n  name: string;\r\n  parameters: {\r\n    properties: {\r\n      database: {\r\n        description: string;\r\n        type: string;\r\n      };\r\n      host: {\r\n        description: string;\r\n        type: string;\r\n      };\r\n      password: {\r\n        description: string;\r\n        nullable: boolean;\r\n        type: string;\r\n      };\r\n      port: {\r\n        description: string;\r\n        format: string;\r\n        type: string;\r\n      };\r\n      query: {\r\n        additionalProperties: {};\r\n        description: string;\r\n        type: string;\r\n      };\r\n      username: {\r\n        description: string;\r\n        nullable: boolean;\r\n        type: string;\r\n      };\r\n    };\r\n    required: string[];\r\n    type: string;\r\n  };\r\n  preferred: boolean;\r\n  sqlalchemy_uri_placeholder: string;\r\n};\r\n\r\n// the values should align with the database\r\n// model enum in superset/superset/models/core.py\r\nexport enum CONFIGURATION_METHOD {\r\n  SQLALCHEMY_URI = 'sqlalchemy_form',\r\n  DYNAMIC_FORM = 'dynamic_form',\r\n}\r\n"],"sourceRoot":""}