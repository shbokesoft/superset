{"version":3,"sources":["webpack:///./images/empty.svg","webpack:///./src/components/CertifiedIcon/index.tsx","webpack:///./src/components/DatabaseSelector/index.tsx","webpack:///./src/components/ImportModal/index.tsx","webpack:///./src/components/IndeterminateCheckbox/index.tsx","webpack:///./src/components/ListView/CardCollection.tsx","webpack:///./src/components/ListView/CardSortSelect.tsx","webpack:///./src/components/ListView/Filters/Base.ts","webpack:///./src/components/ListView/Filters/DateRange.tsx","webpack:///./src/components/ListView/Filters/Search.tsx","webpack:///./src/components/ListView/Filters/Select.tsx","webpack:///./src/components/ListView/Filters/index.tsx","webpack:///./src/components/ListView/ListView.tsx","webpack:///./src/components/ListView/index.ts","webpack:///./src/components/ListView/types.ts","webpack:///./src/components/ListView/utils.ts","webpack:///./src/components/RefreshLabel/index.tsx","webpack:///./src/components/SearchInput/index.tsx","webpack:///./src/components/TableSelector/index.tsx","webpack:///./src/views/CRUD/data/common.ts","webpack:///./src/views/CRUD/data/dataset/AddDatasetModal.tsx","webpack:///./src/views/CRUD/data/dataset/DatasetList.tsx"],"names":[],"mappings":"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","file":"DatasetList.9ed865ea.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M83.195 1.366L103 24v38a4 4 0 01-4 4H20a4 4 0 01-4-4V24L35.805 1.366A4 4 0 0138.815 0h41.37a4 4 0 013.01 1.366zM101 26v36a2 2 0 01-2 2H20a2 2 0 01-2-2V26h17.25A4.75 4.75 0 0140 30.75a6.75 6.75 0 006.75 6.75h25.5A6.75 6.75 0 0079 30.75 4.75 4.75 0 0183.75 26H101zm-.658-2L81.69 2.683A2 2 0 0080.185 2h-41.37a2 2 0 00-1.505.683L18.657 24H35.25A6.75 6.75 0 0142 30.75a4.75 4.75 0 004.75 4.75h25.5A4.75 4.75 0 0077 30.75 6.75 6.75 0 0183.75 24h16.592z\",\n  fill: \"#D1D1D1\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16 53.29C6.074 55.7 0 58.94 0 62.5 0 69.956 26.64 76 59.5 76S119 69.956 119 62.5c0-3.56-6.074-6.799-16-9.21V62a4 4 0 01-4 4H20a4 4 0 01-4-4v-8.71z\",\n  fill: \"#F2F2F2\"\n});\n\nfunction SvgEmpty(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 119,\n    height: 76,\n    fill: \"none\"\n  }, props), _ref, _ref2);\n}\n\nexport default __webpack_public_path__ + \"139f4a903d3a105300fc2d4c22f0931d.svg\";\nexport { SvgEmpty as ReactComponent };","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { t, supersetTheme } from '@superset-ui/core';\r\nimport Icon from 'src/components/Icon';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\n\r\nexport interface CertifiedIconProps {\r\n  certifiedBy?: string;\r\n  details?: string;\r\n  size?: number;\r\n}\r\n\r\nfunction CertifiedIcon({\r\n  certifiedBy,\r\n  details,\r\n  size = 24,\r\n}: CertifiedIconProps) {\r\n  return (\r\n    <Tooltip\r\n      id=\"certified-details-tooltip\"\r\n      title={\r\n        <>\r\n          {certifiedBy && (\r\n            <div>\r\n              <strong>{t('Certified by %s', certifiedBy)}</strong>\r\n            </div>\r\n          )}\r\n          <div>{details}</div>\r\n        </>\r\n      }\r\n    >\r\n      <Icon\r\n        color={supersetTheme.colors.primary.base}\r\n        height={size}\r\n        width={size}\r\n        name=\"certified\"\r\n      />\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nexport default CertifiedIcon;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { ReactNode, useEffect, useState } from 'react';\r\nimport { styled, SupersetClient, t } from '@superset-ui/core';\r\nimport rison from 'rison';\r\nimport { Select } from 'src/components/Select';\r\nimport Label from 'src/components/Label';\r\nimport RefreshLabel from 'src/components/RefreshLabel';\r\nimport SupersetAsyncSelect from 'src/components/AsyncSelect';\r\n\r\nconst FieldTitle = styled.p`\r\n  color: ${({ theme }) => theme.colors.secondary.light2};\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n  margin: 20px 0 10px 0;\r\n  text-transform: uppercase;\r\n`;\r\n\r\nconst DatabaseSelectorWrapper = styled.div`\r\n  .fa-refresh {\r\n    padding-left: 9px;\r\n  }\r\n\r\n  .refresh-col {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 30px;\r\n    margin-left: ${({ theme }) => theme.gridUnit}px;\r\n  }\r\n\r\n  .section {\r\n    padding-bottom: 5px;\r\n    display: flex;\r\n    flex-direction: row;\r\n  }\r\n\r\n  .select {\r\n    flex-grow: 1;\r\n  }\r\n`;\r\n\r\nconst DatabaseOption = styled.span`\r\n  display: inline-flex;\r\n  align-items: center;\r\n`;\r\n\r\ninterface DatabaseSelectorProps {\r\n  dbId: number;\r\n  formMode?: boolean;\r\n  getDbList?: (arg0: any) => {};\r\n  getTableList?: (dbId: number, schema: string, force: boolean) => {};\r\n  handleError: (msg: string) => void;\r\n  isDatabaseSelectEnabled?: boolean;\r\n  onDbChange?: (db: any) => void;\r\n  onSchemaChange?: (arg0?: any) => {};\r\n  onSchemasLoad?: (schemas: Array<object>) => void;\r\n  readOnly?: boolean;\r\n  schema?: string;\r\n  sqlLabMode?: boolean;\r\n  onChange?: ({\r\n    dbId,\r\n    schema,\r\n  }: {\r\n    dbId: number;\r\n    schema?: string;\r\n    tableName?: string;\r\n  }) => void;\r\n}\r\n\r\nexport default function DatabaseSelector({\r\n  dbId,\r\n  formMode = false,\r\n  getDbList,\r\n  getTableList,\r\n  handleError,\r\n  isDatabaseSelectEnabled = true,\r\n  onChange,\r\n  onDbChange,\r\n  onSchemaChange,\r\n  onSchemasLoad,\r\n  readOnly = false,\r\n  schema,\r\n  sqlLabMode = false,\r\n}: DatabaseSelectorProps) {\r\n  const [currentDbId, setCurrentDbId] = useState(dbId);\r\n  const [currentSchema, setCurrentSchema] = useState<string | undefined>(\r\n    schema,\r\n  );\r\n  const [schemaLoading, setSchemaLoading] = useState(false);\r\n  const [schemaOptions, setSchemaOptions] = useState([]);\r\n\r\n  function fetchSchemas(databaseId: number, forceRefresh = false) {\r\n    const actualDbId = databaseId || dbId;\r\n    if (actualDbId) {\r\n      setSchemaLoading(true);\r\n      const queryParams = rison.encode({\r\n        force: Boolean(forceRefresh),\r\n      });\r\n      const endpoint = `/api/v1/database/${actualDbId}/schemas/?q=${queryParams}`;\r\n      return SupersetClient.get({ endpoint })\r\n        .then(({ json }) => {\r\n          const options = json.result.map((s: string) => ({\r\n            value: s,\r\n            label: s,\r\n            title: s,\r\n          }));\r\n          setSchemaOptions(options);\r\n          setSchemaLoading(false);\r\n          if (onSchemasLoad) {\r\n            onSchemasLoad(options);\r\n          }\r\n        })\r\n        .catch(() => {\r\n          setSchemaOptions([]);\r\n          setSchemaLoading(false);\r\n          handleError(t('Error while fetching schema list'));\r\n        });\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (currentDbId) {\r\n      fetchSchemas(currentDbId);\r\n    }\r\n  }, [currentDbId]);\r\n\r\n  function onSelectChange({ dbId, schema }: { dbId: number; schema?: string }) {\r\n    setCurrentDbId(dbId);\r\n    setCurrentSchema(schema);\r\n    if (onChange) {\r\n      onChange({ dbId, schema, tableName: undefined });\r\n    }\r\n  }\r\n\r\n  function dbMutator(data: any) {\r\n    if (getDbList) {\r\n      getDbList(data.result);\r\n    }\r\n    if (data.result.length === 0) {\r\n      handleError(t(\"It seems you don't have access to any database\"));\r\n    }\r\n    return data.result.map((row: any) => ({\r\n      ...row,\r\n      // label is used for the typeahead\r\n      label: `${row.backend} ${row.database_name}`,\r\n    }));\r\n  }\r\n\r\n  function changeDataBase(db: any, force = false) {\r\n    const dbId = db ? db.id : null;\r\n    setSchemaOptions([]);\r\n    if (onSchemaChange) {\r\n      onSchemaChange(null);\r\n    }\r\n    if (onDbChange) {\r\n      onDbChange(db);\r\n    }\r\n    fetchSchemas(dbId, force);\r\n    onSelectChange({ dbId, schema: undefined });\r\n  }\r\n\r\n  function changeSchema(schemaOpt: any, force = false) {\r\n    const schema = schemaOpt ? schemaOpt.value : null;\r\n    if (onSchemaChange) {\r\n      onSchemaChange(schema);\r\n    }\r\n    setCurrentSchema(schema);\r\n    onSelectChange({ dbId: currentDbId, schema });\r\n    if (getTableList) {\r\n      getTableList(currentDbId, schema, force);\r\n    }\r\n  }\r\n\r\n  function renderDatabaseOption(db: any) {\r\n    return (\r\n      <DatabaseOption title={db.database_name}>\r\n        <Label type=\"default\">{db.backend}</Label> {db.database_name}\r\n      </DatabaseOption>\r\n    );\r\n  }\r\n\r\n  function renderSelectRow(select: ReactNode, refreshBtn: ReactNode) {\r\n    return (\r\n      <div className=\"section\">\r\n        <span className=\"select\">{select}</span>\r\n        <span className=\"refresh-col\">{refreshBtn}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderDatabaseSelect() {\r\n    const queryParams = rison.encode({\r\n      order_columns: 'database_name',\r\n      order_direction: 'asc',\r\n      page: 0,\r\n      page_size: -1,\r\n      ...(formMode || !sqlLabMode\r\n        ? {}\r\n        : {\r\n            filters: [\r\n              {\r\n                col: 'expose_in_sqllab',\r\n                opr: 'eq',\r\n                value: true,\r\n              },\r\n            ],\r\n          }),\r\n    });\r\n\r\n    return renderSelectRow(\r\n      <SupersetAsyncSelect\r\n        data-test=\"select-database\"\r\n        dataEndpoint={`/api/v1/database/?q=${queryParams}`}\r\n        onChange={(db: any) => changeDataBase(db)}\r\n        onAsyncError={() =>\r\n          handleError(t('Error while fetching database list'))\r\n        }\r\n        clearable={false}\r\n        value={currentDbId}\r\n        valueKey=\"id\"\r\n        valueRenderer={(db: any) => (\r\n          <div>\r\n            <span className=\"text-muted m-r-5\">{t('Database:')}</span>\r\n            {renderDatabaseOption(db)}\r\n          </div>\r\n        )}\r\n        optionRenderer={renderDatabaseOption}\r\n        mutator={dbMutator}\r\n        placeholder={t('Select a database')}\r\n        autoSelect\r\n        isDisabled={!isDatabaseSelectEnabled || readOnly}\r\n      />,\r\n      null,\r\n    );\r\n  }\r\n\r\n  function renderSchemaSelect() {\r\n    const value = schemaOptions.filter(({ value }) => currentSchema === value);\r\n    const refresh = !formMode && !readOnly && (\r\n      <RefreshLabel\r\n        onClick={() => changeDataBase({ id: dbId }, true)}\r\n        tooltipContent={t('Force refresh schema list')}\r\n      />\r\n    );\r\n\r\n    return renderSelectRow(\r\n      <Select\r\n        name=\"select-schema\"\r\n        placeholder={t('Select a schema (%s)', schemaOptions.length)}\r\n        options={schemaOptions}\r\n        value={value}\r\n        valueRenderer={o => (\r\n          <div>\r\n            <span className=\"text-muted\">{t('Schema:')}</span> {o.label}\r\n          </div>\r\n        )}\r\n        isLoading={schemaLoading}\r\n        autosize={false}\r\n        onChange={item => changeSchema(item)}\r\n        isDisabled={readOnly}\r\n      />,\r\n      refresh,\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DatabaseSelectorWrapper data-test=\"DatabaseSelector\">\r\n      {formMode && <FieldTitle>{t('datasource')}</FieldTitle>}\r\n      {renderDatabaseSelect()}\r\n      {formMode && <FieldTitle>{t('schema')}</FieldTitle>}\r\n      {renderSchemaSelect()}\r\n    </DatabaseSelectorWrapper>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { FunctionComponent, useEffect, useRef, useState } from 'react';\r\nimport { styled, t } from '@superset-ui/core';\r\n\r\nimport Icon from 'src//components/Icon';\r\nimport Modal from 'src/components/Modal';\r\nimport { useImportResource } from 'src/views/CRUD/hooks';\r\nimport { ImportResourceName } from 'src/views/CRUD/types';\r\n\r\nexport const StyledIcon = styled(Icon)`\r\n  margin: auto ${({ theme }) => theme.gridUnit * 2}px auto 0;\r\n`;\r\n\r\nconst HelperMessage = styled.div`\r\n  display: block;\r\n  color: ${({ theme }) => theme.colors.grayscale.base};\r\n  font-size: ${({ theme }) => theme.typography.sizes.s - 1}px;\r\n`;\r\n\r\nconst StyledInputContainer = styled.div`\r\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\r\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\r\n\r\n  & > div {\r\n    margin: ${({ theme }) => theme.gridUnit}px 0;\r\n  }\r\n\r\n  &.extra-container {\r\n    padding-top: 8px;\r\n  }\r\n\r\n  .confirm-overwrite {\r\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\r\n  }\r\n\r\n  .input-container {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    label {\r\n      display: flex;\r\n      margin-right: ${({ theme }) => theme.gridUnit * 2}px;\r\n    }\r\n\r\n    i {\r\n      margin: 0 ${({ theme }) => theme.gridUnit}px;\r\n    }\r\n  }\r\n\r\n  input,\r\n  textarea {\r\n    flex: 1 1 auto;\r\n  }\r\n\r\n  textarea {\r\n    height: 160px;\r\n    resize: none;\r\n  }\r\n\r\n  input::placeholder,\r\n  textarea::placeholder {\r\n    color: ${({ theme }) => theme.colors.grayscale.light1};\r\n  }\r\n\r\n  textarea,\r\n  input[type='text'],\r\n  input[type='number'] {\r\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\r\n      ${({ theme }) => theme.gridUnit * 2}px;\r\n    border-style: none;\r\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\r\n    border-radius: ${({ theme }) => theme.gridUnit}px;\r\n\r\n    &[name='name'] {\r\n      flex: 0 1 auto;\r\n      width: 40%;\r\n    }\r\n\r\n    &[name='sqlalchemy_uri'] {\r\n      margin-right: ${({ theme }) => theme.gridUnit * 3}px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport interface ImportModelsModalProps {\r\n  resourceName: ImportResourceName;\r\n  resourceLabel: string;\r\n  passwordsNeededMessage: string;\r\n  confirmOverwriteMessage: string;\r\n  addDangerToast: (msg: string) => void;\r\n  addSuccessToast: (msg: string) => void;\r\n  onModelImport: () => void;\r\n  show: boolean;\r\n  onHide: () => void;\r\n  passwordFields?: string[];\r\n  setPasswordFields?: (passwordFields: string[]) => void;\r\n}\r\n\r\nconst ImportModelsModal: FunctionComponent<ImportModelsModalProps> = ({\r\n  resourceName,\r\n  resourceLabel,\r\n  passwordsNeededMessage,\r\n  confirmOverwriteMessage,\r\n  addDangerToast,\r\n  addSuccessToast,\r\n  onModelImport,\r\n  show,\r\n  onHide,\r\n  passwordFields = [],\r\n  setPasswordFields = () => {},\r\n}) => {\r\n  const [isHidden, setIsHidden] = useState<boolean>(true);\r\n  const [uploadFile, setUploadFile] = useState<File | null>(null);\r\n  const [passwords, setPasswords] = useState<Record<string, string>>({});\r\n  const [needsOverwriteConfirm, setNeedsOverwriteConfirm] = useState<boolean>(\r\n    false,\r\n  );\r\n  const [confirmedOverwrite, setConfirmedOverwrite] = useState<boolean>(false);\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const clearModal = () => {\r\n    setUploadFile(null);\r\n    setPasswordFields([]);\r\n    setPasswords({});\r\n    setNeedsOverwriteConfirm(false);\r\n    setConfirmedOverwrite(false);\r\n    if (fileInputRef && fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handleErrorMsg = (msg: string) => {\r\n    clearModal();\r\n    addDangerToast(msg);\r\n  };\r\n\r\n  const {\r\n    state: { alreadyExists, passwordsNeeded },\r\n    importResource,\r\n  } = useImportResource(resourceName, resourceLabel, handleErrorMsg);\r\n\r\n  useEffect(() => {\r\n    setPasswordFields(passwordsNeeded);\r\n  }, [passwordsNeeded, setPasswordFields]);\r\n\r\n  useEffect(() => {\r\n    setNeedsOverwriteConfirm(alreadyExists.length > 0);\r\n  }, [alreadyExists, setNeedsOverwriteConfirm]);\r\n\r\n  // Functions\r\n  const hide = () => {\r\n    setIsHidden(true);\r\n    onHide();\r\n    clearModal();\r\n  };\r\n\r\n  const onUpload = () => {\r\n    if (uploadFile === null) {\r\n      return;\r\n    }\r\n\r\n    importResource(uploadFile, passwords, confirmedOverwrite).then(result => {\r\n      if (result) {\r\n        addSuccessToast(t('The import was successful'));\r\n        clearModal();\r\n        onModelImport();\r\n      }\r\n    });\r\n  };\r\n\r\n  const changeFile = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { files } = event.target as HTMLInputElement;\r\n    setUploadFile((files && files[0]) || null);\r\n  };\r\n\r\n  const confirmOverwrite = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const targetValue = (event.currentTarget?.value as string) ?? '';\r\n    setConfirmedOverwrite(targetValue.toUpperCase() === t('OVERWRITE'));\r\n  };\r\n\r\n  const renderPasswordFields = () => {\r\n    if (passwordFields.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <h5>Database passwords</h5>\r\n        <HelperMessage>{passwordsNeededMessage}</HelperMessage>\r\n        {passwordFields.map(fileName => (\r\n          <StyledInputContainer key={`password-for-${fileName}`}>\r\n            <div className=\"control-label\">\r\n              {fileName}\r\n              <span className=\"required\">*</span>\r\n            </div>\r\n            <input\r\n              name={`password-${fileName}`}\r\n              autoComplete={`password-${fileName}`}\r\n              type=\"password\"\r\n              value={passwords[fileName]}\r\n              onChange={event =>\r\n                setPasswords({ ...passwords, [fileName]: event.target.value })\r\n              }\r\n            />\r\n          </StyledInputContainer>\r\n        ))}\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderOverwriteConfirmation = () => {\r\n    if (!needsOverwriteConfirm) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <StyledInputContainer>\r\n          <div className=\"confirm-overwrite\">{confirmOverwriteMessage}</div>\r\n          <div className=\"control-label\">\r\n            {t('Type \"%s\" to confirm', t('OVERWRITE'))}\r\n          </div>\r\n          <input\r\n            data-test=\"overwrite-modal-input\"\r\n            id=\"overwrite\"\r\n            type=\"text\"\r\n            onChange={confirmOverwrite}\r\n          />\r\n        </StyledInputContainer>\r\n      </>\r\n    );\r\n  };\r\n\r\n  // Show/hide\r\n  if (isHidden && show) {\r\n    setIsHidden(false);\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      name=\"model\"\r\n      className=\"import-model-modal\"\r\n      disablePrimaryButton={\r\n        uploadFile === null || (needsOverwriteConfirm && !confirmedOverwrite)\r\n      }\r\n      onHandledPrimaryAction={onUpload}\r\n      onHide={hide}\r\n      primaryButtonName={needsOverwriteConfirm ? t('Overwrite') : t('Import')}\r\n      primaryButtonType={needsOverwriteConfirm ? 'danger' : 'primary'}\r\n      width=\"750px\"\r\n      show={show}\r\n      title={<h4>{t('Import %s', resourceLabel)}</h4>}\r\n    >\r\n      <StyledInputContainer>\r\n        <div className=\"control-label\">\r\n          <label htmlFor=\"modelFile\">\r\n            {t('File')}\r\n            <span className=\"required\">*</span>\r\n          </label>\r\n        </div>\r\n        <input\r\n          ref={fileInputRef}\r\n          data-test=\"model-file-input\"\r\n          name=\"modelFile\"\r\n          id=\"modelFile\"\r\n          type=\"file\"\r\n          accept=\".yaml,.json,.yml,.zip\"\r\n          onChange={changeFile}\r\n        />\r\n      </StyledInputContainer>\r\n      {renderPasswordFields()}\r\n      {renderOverwriteConfirmation()}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ImportModelsModal;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { styled } from '@superset-ui/core';\r\nimport Icon from 'src/components/Icon';\r\n\r\nexport interface IndeterminateCheckboxProps {\r\n  indeterminate: boolean;\r\n  id: string;\r\n  checked: boolean;\r\n  onChange: React.EventHandler<React.SyntheticEvent<HTMLInputElement>>;\r\n  title?: string;\r\n  labelText?: string;\r\n}\r\n\r\nconst CheckboxLabel = styled.label`\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  margin-bottom: 0;\r\n`;\r\n\r\nconst IconWithColor = styled(Icon)`\r\n  color: ${({ theme }) => theme.colors.primary.dark1};\r\n  cursor: pointer;\r\n`;\r\n\r\nconst HiddenInput = styled.input`\r\n  &[type='checkbox'] {\r\n    cursor: pointer;\r\n    opacity: 0;\r\n    position: absolute;\r\n    left: 3px;\r\n    margin: 0;\r\n    top: 4px;\r\n  }\r\n`;\r\n\r\nconst InputContainer = styled.div`\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  position: relative;\r\n`;\r\n\r\nconst IndeterminateCheckbox = React.forwardRef(\r\n  (\r\n    {\r\n      indeterminate,\r\n      id,\r\n      checked,\r\n      onChange,\r\n      title = '',\r\n      labelText = '',\r\n    }: IndeterminateCheckboxProps,\r\n    ref: React.MutableRefObject<any>,\r\n  ) => {\r\n    const defaultRef = React.useRef<HTMLInputElement>();\r\n    const resolvedRef = ref || defaultRef;\r\n\r\n    React.useEffect(() => {\r\n      resolvedRef.current.indeterminate = indeterminate;\r\n    }, [resolvedRef, indeterminate]);\r\n\r\n    return (\r\n      <>\r\n        <InputContainer>\r\n          {indeterminate && <IconWithColor name=\"checkbox-half\" />}\r\n          {!indeterminate && checked && <IconWithColor name=\"checkbox-on\" />}\r\n          {!indeterminate && !checked && <Icon name=\"checkbox-off\" />}\r\n          <HiddenInput\r\n            name={id}\r\n            id={id}\r\n            type=\"checkbox\"\r\n            ref={resolvedRef}\r\n            checked={checked}\r\n            onChange={onChange}\r\n          />\r\n        </InputContainer>\r\n        <CheckboxLabel title={title} htmlFor={id}>\r\n          {labelText}\r\n        </CheckboxLabel>\r\n      </>\r\n    );\r\n  },\r\n);\r\n\r\nexport default IndeterminateCheckbox;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { TableInstance, Row } from 'react-table';\r\nimport { styled } from '@superset-ui/core';\r\nimport cx from 'classnames';\r\n\r\ninterface CardCollectionProps {\r\n  bulkSelectEnabled?: boolean;\r\n  loading: boolean;\r\n  prepareRow: TableInstance['prepareRow'];\r\n  renderCard?: (row: any) => React.ReactNode;\r\n  rows: TableInstance['rows'];\r\n}\r\n\r\nconst CardContainer = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(459px, 1fr));\r\n  grid-gap: ${({ theme }) => theme.gridUnit * 8}px;\r\n`;\r\n\r\nconst CardWrapper = styled.div`\r\n  border: 2px solid transparent;\r\n  &.card-selected {\r\n    border: 2px solid ${({ theme }) => theme.colors.primary.base};\r\n  }\r\n  &.bulk-select {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport default function CardCollection({\r\n  bulkSelectEnabled,\r\n  loading,\r\n  prepareRow,\r\n  renderCard,\r\n  rows,\r\n}: CardCollectionProps) {\r\n  function handleClick(\r\n    event: React.MouseEvent<HTMLDivElement, MouseEvent>,\r\n    toggleRowSelected: Row['toggleRowSelected'],\r\n  ) {\r\n    if (bulkSelectEnabled) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      toggleRowSelected();\r\n    }\r\n  }\r\n\r\n  if (!renderCard) return null;\r\n  return (\r\n    <CardContainer>\r\n      {loading &&\r\n        rows.length === 0 &&\r\n        [...new Array(25)].map((e, i) => (\r\n          <div key={i}>{renderCard({ loading })}</div>\r\n        ))}\r\n      {rows.length > 0 &&\r\n        rows.map(row => {\r\n          if (!renderCard) return null;\r\n          prepareRow(row);\r\n          return (\r\n            <CardWrapper\r\n              className={cx({\r\n                'card-selected': bulkSelectEnabled && row.isSelected,\r\n                'bulk-select': bulkSelectEnabled,\r\n              })}\r\n              key={row.id}\r\n              onClick={e => handleClick(e, row.toggleRowSelected)}\r\n              role=\"none\"\r\n            >\r\n              {renderCard({ ...row.original, loading })}\r\n            </CardWrapper>\r\n          );\r\n        })}\r\n    </CardContainer>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState } from 'react';\r\nimport { styled, withTheme, SupersetThemeProps, t } from '@superset-ui/core';\r\nimport { PartialThemeConfig, Select } from 'src/components/Select';\r\nimport { CardSortSelectOption, FetchDataConfig, SortColumn } from './types';\r\nimport { filterSelectStyles } from './utils';\r\n\r\nconst SortTitle = styled.label`\r\n  font-weight: bold;\r\n  line-height: 27px;\r\n  margin: 0 0.4em 0 0;\r\n`;\r\n\r\nconst SortContainer = styled.div`\r\n  display: inline-flex;\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n  padding-top: ${({ theme }) => theme.gridUnit}px;\r\n  text-align: left;\r\n`;\r\ninterface CardViewSelectSortProps {\r\n  onChange: (conf: FetchDataConfig) => any;\r\n  options: Array<CardSortSelectOption>;\r\n  initialSort?: SortColumn[];\r\n  pageIndex: number;\r\n  pageSize: number;\r\n}\r\n\r\ninterface StyledSelectProps {\r\n  onChange: (value: CardSortSelectOption) => void;\r\n  options: CardSortSelectOption[];\r\n  selectStyles: any;\r\n  theme: SupersetThemeProps['theme'];\r\n  value: CardSortSelectOption;\r\n}\r\n\r\nfunction StyledSelect({\r\n  onChange,\r\n  options,\r\n  selectStyles,\r\n  theme,\r\n  value,\r\n}: StyledSelectProps) {\r\n  const filterSelectTheme: PartialThemeConfig = {\r\n    spacing: {\r\n      baseUnit: 1,\r\n      fontSize: theme.typography.sizes.s,\r\n      minWidth: '5em',\r\n    },\r\n  };\r\n  return (\r\n    <Select\r\n      data-test=\"card-sort-select\"\r\n      clearable={false}\r\n      onChange={onChange}\r\n      options={options}\r\n      stylesConfig={selectStyles}\r\n      themeConfig={filterSelectTheme}\r\n      value={value}\r\n    />\r\n  );\r\n}\r\n\r\nconst StyledCardSortSelect = withTheme(StyledSelect);\r\n\r\nexport const CardSortSelect = ({\r\n  initialSort,\r\n  onChange,\r\n  options,\r\n  pageIndex,\r\n  pageSize,\r\n}: CardViewSelectSortProps) => {\r\n  const defaultSort =\r\n    initialSort && options.find(({ id }) => id === initialSort[0].id);\r\n  const [selectedOption, setSelectedOption] = useState<CardSortSelectOption>(\r\n    defaultSort || options[0],\r\n  );\r\n\r\n  const handleOnChange = (selected: CardSortSelectOption) => {\r\n    setSelectedOption(selected);\r\n    const sortBy = [{ id: selected.id, desc: selected.desc }];\r\n    onChange({ pageIndex, pageSize, sortBy, filters: [] });\r\n  };\r\n\r\n  return (\r\n    <SortContainer>\r\n      <SortTitle>{t('Sort:')}</SortTitle>\r\n      <StyledCardSortSelect\r\n        onChange={(value: CardSortSelectOption) => handleOnChange(value)}\r\n        options={options}\r\n        selectStyles={filterSelectStyles}\r\n        value={selectedOption}\r\n      />\r\n    </SortContainer>\r\n  );\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { ReactNode } from 'react';\r\nimport { styled } from '@superset-ui/core';\r\n\r\nexport interface BaseFilter {\r\n  Header: ReactNode;\r\n  initialValue: any;\r\n}\r\n\r\nexport const FilterContainer = styled.div`\r\n  display: inline-flex;\r\n  margin-right: 2em;\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n  align-items: center;\r\n`;\r\n\r\nexport const FilterTitle = styled.label`\r\n  font-weight: bold;\r\n  margin: 0 0.4em 0 0;\r\n`;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState, useMemo } from 'react';\r\nimport moment, { Moment } from 'moment';\r\nimport { styled } from '@superset-ui/core';\r\nimport { RangePicker as AntRangePicker } from 'src/components/DatePicker';\r\nimport { FilterContainer, BaseFilter, FilterTitle } from './Base';\r\n\r\ninterface DateRangeFilterProps extends BaseFilter {\r\n  onSubmit: (val: number[]) => void;\r\n  name: string;\r\n}\r\n\r\ntype ValueState = [number, number];\r\n\r\nconst RangePicker = styled(AntRangePicker)`\r\n  padding: 0 11px;\r\n  transform: translateX(-7px);\r\n`;\r\n\r\nconst RangeFilterContainer = styled(FilterContainer)`\r\n  margin-right: 1em;\r\n`;\r\n\r\nexport default function DateRangeFilter({\r\n  Header,\r\n  initialValue,\r\n  onSubmit,\r\n}: DateRangeFilterProps) {\r\n  const [value, setValue] = useState<ValueState | null>(initialValue ?? null);\r\n  const momentValue = useMemo((): [Moment, Moment] | null => {\r\n    if (!value || (Array.isArray(value) && !value.length)) return null;\r\n    return [moment(value[0]), moment(value[1])];\r\n  }, [value]);\r\n\r\n  return (\r\n    <RangeFilterContainer>\r\n      <FilterTitle>{Header}:</FilterTitle>\r\n      <RangePicker\r\n        showTime\r\n        bordered={false}\r\n        value={momentValue}\r\n        onChange={momentRange => {\r\n          if (!momentRange) {\r\n            setValue(null);\r\n            onSubmit([]);\r\n            return;\r\n          }\r\n          const changeValue = [\r\n            momentRange[0]?.valueOf() ?? 0,\r\n            momentRange[1]?.valueOf() ?? 0,\r\n          ] as ValueState;\r\n          setValue(changeValue);\r\n          onSubmit(changeValue);\r\n        }}\r\n      />\r\n    </RangeFilterContainer>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState } from 'react';\r\nimport SearchInput from 'src/components/SearchInput';\r\nimport { FilterContainer, BaseFilter } from './Base';\r\n\r\ninterface SearchHeaderProps extends BaseFilter {\r\n  Header: string;\r\n  onSubmit: (val: string) => void;\r\n  name: string;\r\n}\r\n\r\nexport default function SearchFilter({\r\n  Header,\r\n  name,\r\n  initialValue,\r\n  onSubmit,\r\n}: SearchHeaderProps) {\r\n  const [value, setValue] = useState(initialValue || '');\r\n  const handleSubmit = () => {\r\n    if (value) {\r\n      onSubmit(value);\r\n    }\r\n  };\r\n  const onClear = () => {\r\n    setValue('');\r\n    onSubmit('');\r\n  };\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue(e.currentTarget.value);\r\n    if (e.currentTarget.value === '') {\r\n      onClear();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <FilterContainer>\r\n      <SearchInput\r\n        data-test=\"filters-search\"\r\n        placeholder={Header}\r\n        name={name}\r\n        value={value}\r\n        onChange={handleChange}\r\n        onSubmit={handleSubmit}\r\n        onClear={onClear}\r\n      />\r\n    </FilterContainer>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { useState } from 'react';\r\nimport { withTheme, SupersetThemeProps } from '@superset-ui/core';\r\nimport {\r\n  Select,\r\n  PaginatedSelect,\r\n  PartialThemeConfig,\r\n} from 'src/components/Select';\r\nimport { Filter, SelectOption } from 'src/components/ListView/types';\r\nimport { filterSelectStyles } from 'src/components/ListView/utils';\r\nimport { FilterContainer, BaseFilter, FilterTitle } from './Base';\r\n\r\ninterface SelectFilterProps extends BaseFilter {\r\n  emptyLabel?: string;\r\n  fetchSelects?: Filter['fetchSelects'];\r\n  name?: string;\r\n  onSelect: (selected: any) => any;\r\n  paginate?: boolean;\r\n  selects: Filter['selects'];\r\n  theme: SupersetThemeProps['theme'];\r\n}\r\n\r\nconst CLEAR_SELECT_FILTER_VALUE = 'CLEAR_SELECT_FILTER_VALUE';\r\n\r\nfunction SelectFilter({\r\n  Header,\r\n  emptyLabel = 'None',\r\n  fetchSelects,\r\n  initialValue,\r\n  onSelect,\r\n  paginate = false,\r\n  selects = [],\r\n  theme,\r\n}: SelectFilterProps) {\r\n  const filterSelectTheme: PartialThemeConfig = {\r\n    spacing: {\r\n      baseUnit: 2,\r\n      fontSize: theme.typography.sizes.s,\r\n      minWidth: '5em',\r\n    },\r\n  };\r\n\r\n  const clearFilterSelect = {\r\n    label: emptyLabel,\r\n    value: CLEAR_SELECT_FILTER_VALUE,\r\n  };\r\n\r\n  const options = [clearFilterSelect, ...selects];\r\n  let initialOption = clearFilterSelect;\r\n\r\n  // Set initial value if not async\r\n  if (!fetchSelects) {\r\n    const matchingOption = options.find(x => x.value === initialValue);\r\n\r\n    if (matchingOption) {\r\n      initialOption = matchingOption;\r\n    }\r\n  }\r\n\r\n  const [selectedOption, setSelectedOption] = useState(initialOption);\r\n  const onChange = (selected: SelectOption | null) => {\r\n    if (selected === null) return;\r\n    onSelect(\r\n      selected.value === CLEAR_SELECT_FILTER_VALUE ? undefined : selected.value,\r\n    );\r\n    setSelectedOption(selected);\r\n  };\r\n\r\n  const fetchAndFormatSelects = async (\r\n    inputValue: string,\r\n    loadedOptions: SelectOption[],\r\n    { page }: { page: number },\r\n  ) => {\r\n    // only include clear filter when filter value does not exist\r\n    let result = inputValue || page > 0 ? [] : [clearFilterSelect];\r\n    let hasMore = paginate;\r\n    if (fetchSelects) {\r\n      const selectValues = await fetchSelects(inputValue, page);\r\n      // update matching option at initial load\r\n      if (!selectValues.length) {\r\n        hasMore = false;\r\n      }\r\n      result = [...result, ...selectValues];\r\n\r\n      const matchingOption = result.find(x => x.value === initialValue);\r\n\r\n      if (matchingOption) {\r\n        setSelectedOption(matchingOption);\r\n      }\r\n    }\r\n\r\n    return {\r\n      options: result,\r\n      hasMore,\r\n      additional: {\r\n        page: page + 1,\r\n      },\r\n    };\r\n  };\r\n\r\n  return (\r\n    <FilterContainer>\r\n      <FilterTitle>{Header}:</FilterTitle>\r\n      {fetchSelects ? (\r\n        <PaginatedSelect\r\n          data-test=\"filters-select\"\r\n          defaultOptions\r\n          themeConfig={filterSelectTheme}\r\n          stylesConfig={filterSelectStyles}\r\n          // @ts-ignore\r\n          value={selectedOption}\r\n          // @ts-ignore\r\n          onChange={onChange}\r\n          // @ts-ignore\r\n          loadOptions={fetchAndFormatSelects}\r\n          placeholder={emptyLabel}\r\n          clearable={false}\r\n          additional={{\r\n            page: 0,\r\n          }}\r\n        />\r\n      ) : (\r\n        <Select\r\n          data-test=\"filters-select\"\r\n          themeConfig={filterSelectTheme}\r\n          stylesConfig={filterSelectStyles}\r\n          value={selectedOption}\r\n          options={options}\r\n          onChange={onChange}\r\n          clearable={false}\r\n        />\r\n      )}\r\n    </FilterContainer>\r\n  );\r\n}\r\nexport default withTheme(SelectFilter);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport { styled, withTheme } from '@superset-ui/core';\r\n\r\nimport {\r\n  FilterValue,\r\n  Filters,\r\n  InternalFilter,\r\n} from 'src/components/ListView/types';\r\nimport SearchFilter from './Search';\r\nimport SelectFilter from './Select';\r\nimport DateRangeFilter from './DateRange';\r\n\r\ninterface UIFiltersProps {\r\n  filters: Filters;\r\n  internalFilters: InternalFilter[];\r\n  updateFilterValue: (id: number, value: FilterValue['value']) => void;\r\n}\r\n\r\nconst FilterWrapper = styled.div`\r\n  display: inline-block;\r\n`;\r\n\r\nfunction UIFilters({\r\n  filters,\r\n  internalFilters = [],\r\n  updateFilterValue,\r\n}: UIFiltersProps) {\r\n  return (\r\n    <FilterWrapper>\r\n      {filters.map(\r\n        (\r\n          {\r\n            Header,\r\n            fetchSelects,\r\n            id,\r\n            input,\r\n            paginate,\r\n            selects,\r\n            unfilteredLabel,\r\n          },\r\n          index,\r\n        ) => {\r\n          const initialValue =\r\n            internalFilters[index] && internalFilters[index].value;\r\n          if (input === 'select') {\r\n            return (\r\n              <SelectFilter\r\n                Header={Header}\r\n                emptyLabel={unfilteredLabel}\r\n                fetchSelects={fetchSelects}\r\n                initialValue={initialValue}\r\n                key={id}\r\n                name={id}\r\n                onSelect={(value: any) => updateFilterValue(index, value)}\r\n                paginate={paginate}\r\n                selects={selects}\r\n              />\r\n            );\r\n          }\r\n          if (input === 'search' && typeof Header === 'string') {\r\n            return (\r\n              <SearchFilter\r\n                Header={Header}\r\n                initialValue={initialValue}\r\n                key={id}\r\n                name={id}\r\n                onSubmit={(value: string) => updateFilterValue(index, value)}\r\n              />\r\n            );\r\n          }\r\n          if (input === 'datetime_range') {\r\n            return (\r\n              <DateRangeFilter\r\n                Header={Header}\r\n                initialValue={initialValue}\r\n                key={id}\r\n                name={id}\r\n                onSubmit={value => updateFilterValue(index, value)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        },\r\n      )}\r\n    </FilterWrapper>\r\n  );\r\n}\r\n\r\nexport default withTheme(UIFilters);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { t, styled } from '@superset-ui/core';\r\nimport React, { useEffect } from 'react';\r\nimport { Empty } from 'src/common/components';\r\nimport Alert from 'src/components/Alert';\r\nimport { ReactComponent as EmptyImage } from 'images/empty.svg';\r\nimport cx from 'classnames';\r\nimport Button from 'src/components/Button';\r\nimport Icon from 'src/components/Icon';\r\nimport IndeterminateCheckbox from 'src/components/IndeterminateCheckbox';\r\nimport { TableCollection, Pagination } from 'src/components/dataViewCommon';\r\nimport CardCollection from './CardCollection';\r\nimport FilterControls from './Filters';\r\nimport { CardSortSelect } from './CardSortSelect';\r\nimport {\r\n  FetchDataConfig,\r\n  Filters,\r\n  SortColumn,\r\n  CardSortSelectOption,\r\n  ViewModeType,\r\n} from './types';\r\nimport { ListViewError, useListViewState } from './utils';\r\n\r\nconst ListViewStyles = styled.div`\r\n  text-align: center;\r\n\r\n  .superset-list-view {\r\n    text-align: left;\r\n    border-radius: 4px 0;\r\n    margin: 0 ${({ theme }) => theme.gridUnit * 4}px;\r\n\r\n    .header {\r\n      display: flex;\r\n      padding-bottom: ${({ theme }) => theme.gridUnit * 4}px;\r\n\r\n      .header-left {\r\n        display: flex;\r\n        flex: 5;\r\n      }\r\n      .header-right {\r\n        flex: 1;\r\n        text-align: right;\r\n      }\r\n    }\r\n\r\n    .body.empty table {\r\n      margin-bottom: 0;\r\n    }\r\n\r\n    .body {\r\n      overflow-x: auto;\r\n    }\r\n\r\n    .ant-empty {\r\n      .ant-empty-image {\r\n        height: auto;\r\n      }\r\n    }\r\n  }\r\n\r\n  .pagination-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\r\n  }\r\n\r\n  .row-count-container {\r\n    margin-top: ${({ theme }) => theme.gridUnit * 2}px;\r\n    color: ${({ theme }) => theme.colors.grayscale.base};\r\n  }\r\n`;\r\n\r\nconst BulkSelectWrapper = styled(Alert)`\r\n  border-radius: 0;\r\n  margin-bottom: 0;\r\n  color: #3d3d3d;\r\n  background-color: ${({ theme }) => theme.colors.primary.light4};\r\n\r\n  .selectedCopy {\r\n    display: inline-block;\r\n    padding: ${({ theme }) => theme.gridUnit * 2}px 0;\r\n  }\r\n\r\n  .deselect-all {\r\n    color: #1985a0;\r\n    margin-left: ${({ theme }) => theme.gridUnit * 4}px;\r\n  }\r\n\r\n  .divider {\r\n    margin: ${({ theme: { gridUnit } }) =>\r\n      `${-gridUnit * 2}px 0 ${-gridUnit * 2}px ${gridUnit * 4}px`};\r\n    width: 1px;\r\n    height: ${({ theme }) => theme.gridUnit * 8}px;\r\n    box-shadow: inset -1px 0px 0px #dadada;\r\n    display: inline-flex;\r\n    vertical-align: middle;\r\n    position: relative;\r\n  }\r\n\r\n  .ant-alert-close-icon {\r\n    margin-top: ${({ theme }) => theme.gridUnit * 1.5}px;\r\n  }\r\n`;\r\n\r\nconst bulkSelectColumnConfig = {\r\n  Cell: ({ row }: any) => (\r\n    <IndeterminateCheckbox {...row.getToggleRowSelectedProps()} id={row.id} />\r\n  ),\r\n  Header: ({ getToggleAllRowsSelectedProps }: any) => (\r\n    <IndeterminateCheckbox\r\n      {...getToggleAllRowsSelectedProps()}\r\n      id=\"header-toggle-all\"\r\n    />\r\n  ),\r\n  id: 'selection',\r\n  size: 'sm',\r\n};\r\n\r\nconst ViewModeContainer = styled.div`\r\n  padding-right: ${({ theme }) => theme.gridUnit * 4}px;\r\n  display: inline-block;\r\n\r\n  .toggle-button {\r\n    display: inline-block;\r\n    border-radius: ${({ theme }) => theme.gridUnit / 2}px;\r\n    padding: ${({ theme }) => theme.gridUnit}px;\r\n    padding-bottom: 0;\r\n\r\n    &:first-of-type {\r\n      margin-right: ${({ theme }) => theme.gridUnit * 2}px;\r\n    }\r\n  }\r\n\r\n  .active {\r\n    background-color: ${({ theme }) => theme.colors.grayscale.base};\r\n    svg {\r\n      color: ${({ theme }) => theme.colors.grayscale.light5};\r\n    }\r\n  }\r\n`;\r\n\r\nconst EmptyWrapper = styled.div`\r\n  padding: ${({ theme }) => theme.gridUnit * 40}px 0;\r\n\r\n  &.table {\r\n    background: ${({ theme }) => theme.colors.grayscale.light5};\r\n  }\r\n`;\r\n\r\nconst ViewModeToggle = ({\r\n  mode,\r\n  setMode,\r\n}: {\r\n  mode: 'table' | 'card';\r\n  setMode: (mode: 'table' | 'card') => void;\r\n}) => (\r\n  <ViewModeContainer>\r\n    <div\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      onClick={e => {\r\n        e.currentTarget.blur();\r\n        setMode('card');\r\n      }}\r\n      className={cx('toggle-button', { active: mode === 'card' })}\r\n    >\r\n      <Icon name=\"card-view\" />\r\n    </div>\r\n    <div\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      onClick={e => {\r\n        e.currentTarget.blur();\r\n        setMode('table');\r\n      }}\r\n      className={cx('toggle-button', { active: mode === 'table' })}\r\n    >\r\n      <Icon name=\"list-view\" />\r\n    </div>\r\n  </ViewModeContainer>\r\n);\r\n\r\nexport interface ListViewProps<T extends object = any> {\r\n  columns: any[];\r\n  data: T[];\r\n  count: number;\r\n  pageSize: number;\r\n  fetchData: (conf: FetchDataConfig) => any;\r\n  loading: boolean;\r\n  className?: string;\r\n  initialSort?: SortColumn[];\r\n  filters?: Filters;\r\n  bulkActions?: Array<{\r\n    key: string;\r\n    name: React.ReactNode;\r\n    onSelect: (rows: any[]) => any;\r\n    type?: 'primary' | 'secondary' | 'danger';\r\n  }>;\r\n  bulkSelectEnabled?: boolean;\r\n  disableBulkSelect?: () => void;\r\n  renderBulkSelectCopy?: (selects: any[]) => React.ReactNode;\r\n  renderCard?: (row: T & { loading: boolean }) => React.ReactNode;\r\n  cardSortSelectOptions?: Array<CardSortSelectOption>;\r\n  defaultViewMode?: ViewModeType;\r\n  highlightRowId?: number;\r\n  emptyState?: {\r\n    message?: string;\r\n    slot?: React.ReactNode;\r\n  };\r\n}\r\n\r\nfunction ListView<T extends object = any>({\r\n  columns,\r\n  data,\r\n  count,\r\n  pageSize: initialPageSize,\r\n  fetchData,\r\n  loading,\r\n  initialSort = [],\r\n  className = '',\r\n  filters = [],\r\n  bulkActions = [],\r\n  bulkSelectEnabled = false,\r\n  disableBulkSelect = () => {},\r\n  renderBulkSelectCopy = selected => t('%s Selected', selected.length),\r\n  renderCard,\r\n  cardSortSelectOptions,\r\n  defaultViewMode = 'card',\r\n  highlightRowId,\r\n  emptyState = {},\r\n}: ListViewProps<T>) {\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n    pageCount = 1,\r\n    gotoPage,\r\n    applyFilterValue,\r\n    selectedFlatRows,\r\n    toggleAllRowsSelected,\r\n    setViewMode,\r\n    state: { pageIndex, pageSize, internalFilters, viewMode },\r\n  } = useListViewState({\r\n    bulkSelectColumnConfig,\r\n    bulkSelectMode: bulkSelectEnabled && Boolean(bulkActions.length),\r\n    columns,\r\n    count,\r\n    data,\r\n    fetchData,\r\n    initialPageSize,\r\n    initialSort,\r\n    initialFilters: filters,\r\n    renderCard: Boolean(renderCard),\r\n    defaultViewMode,\r\n  });\r\n  const filterable = Boolean(filters.length);\r\n  if (filterable) {\r\n    const columnAccessors = columns.reduce(\r\n      (acc, col) => ({ ...acc, [col.id || col.accessor]: true }),\r\n      {},\r\n    );\r\n    filters.forEach(f => {\r\n      if (!columnAccessors[f.id]) {\r\n        throw new ListViewError(\r\n          `Invalid filter config, ${f.id} is not present in columns`,\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  const cardViewEnabled = Boolean(renderCard);\r\n\r\n  useEffect(() => {\r\n    // discard selections if bulk select is disabled\r\n    if (!bulkSelectEnabled) toggleAllRowsSelected(false);\r\n  }, [bulkSelectEnabled, toggleAllRowsSelected]);\r\n\r\n  return (\r\n    <ListViewStyles>\r\n      <div data-test={className} className={`superset-list-view ${className}`}>\r\n        <div className=\"header\">\r\n          <div className=\"header-left\">\r\n            {cardViewEnabled && (\r\n              <ViewModeToggle mode={viewMode} setMode={setViewMode} />\r\n            )}\r\n            {filterable && (\r\n              <FilterControls\r\n                filters={filters}\r\n                internalFilters={internalFilters}\r\n                updateFilterValue={applyFilterValue}\r\n              />\r\n            )}\r\n          </div>\r\n          <div className=\"header-right\">\r\n            {viewMode === 'card' && cardSortSelectOptions && (\r\n              <CardSortSelect\r\n                initialSort={initialSort}\r\n                onChange={fetchData}\r\n                options={cardSortSelectOptions}\r\n                pageIndex={pageIndex}\r\n                pageSize={pageSize}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className={`body ${rows.length === 0 ? 'empty' : ''}`}>\r\n          {bulkSelectEnabled && (\r\n            <BulkSelectWrapper\r\n              data-test=\"bulk-select-controls\"\r\n              type=\"info\"\r\n              closable\r\n              showIcon={false}\r\n              onClose={disableBulkSelect}\r\n              message={\r\n                <>\r\n                  <div className=\"selectedCopy\" data-test=\"bulk-select-copy\">\r\n                    {renderBulkSelectCopy(selectedFlatRows)}\r\n                  </div>\r\n                  {Boolean(selectedFlatRows.length) && (\r\n                    <>\r\n                      <span\r\n                        data-test=\"bulk-select-deselect-all\"\r\n                        role=\"button\"\r\n                        tabIndex={0}\r\n                        className=\"deselect-all\"\r\n                        onClick={() => toggleAllRowsSelected(false)}\r\n                      >\r\n                        {t('Deselect all')}\r\n                      </span>\r\n                      <div className=\"divider\" />\r\n                      {bulkActions.map(action => (\r\n                        <Button\r\n                          data-test=\"bulk-select-action\"\r\n                          key={action.key}\r\n                          buttonStyle={action.type}\r\n                          cta\r\n                          onClick={() =>\r\n                            action.onSelect(\r\n                              selectedFlatRows.map(r => r.original),\r\n                            )\r\n                          }\r\n                        >\r\n                          {action.name}\r\n                        </Button>\r\n                      ))}\r\n                    </>\r\n                  )}\r\n                </>\r\n              }\r\n            />\r\n          )}\r\n          {viewMode === 'card' && (\r\n            <CardCollection\r\n              bulkSelectEnabled={bulkSelectEnabled}\r\n              prepareRow={prepareRow}\r\n              renderCard={renderCard}\r\n              rows={rows}\r\n              loading={loading}\r\n            />\r\n          )}\r\n          {viewMode === 'table' && (\r\n            <TableCollection\r\n              getTableProps={getTableProps}\r\n              getTableBodyProps={getTableBodyProps}\r\n              prepareRow={prepareRow}\r\n              headerGroups={headerGroups}\r\n              rows={rows}\r\n              columns={columns}\r\n              loading={loading}\r\n              highlightRowId={highlightRowId}\r\n            />\r\n          )}\r\n          {!loading && rows.length === 0 && (\r\n            <EmptyWrapper className={viewMode}>\r\n              <Empty\r\n                image={<EmptyImage />}\r\n                description={emptyState.message || t('No Data')}\r\n              >\r\n                {emptyState.slot || null}\r\n              </Empty>\r\n            </EmptyWrapper>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {rows.length > 0 && (\r\n        <div className=\"pagination-container\">\r\n          <Pagination\r\n            totalPages={pageCount || 0}\r\n            currentPage={pageCount ? pageIndex + 1 : 0}\r\n            onChange={(p: number) => gotoPage(p - 1)}\r\n            hideFirstAndLastPageLinks\r\n          />\r\n          <div className=\"row-count-container\">\r\n            {!loading &&\r\n              t(\r\n                '%s-%s of %s',\r\n                pageSize * pageIndex + (rows.length && 1),\r\n                pageSize * pageIndex + rows.length,\r\n                count,\r\n              )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </ListViewStyles>\r\n  );\r\n}\r\n\r\nexport default ListView;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport * from './ListView';\r\nexport * from './types';\r\n\r\nexport { default } from './ListView';\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { ReactNode } from 'react';\r\n\r\nexport interface SortColumn {\r\n  id: string;\r\n  desc?: boolean;\r\n}\r\n\r\nexport type SortColumns = SortColumn[];\r\n\r\nexport interface SelectOption {\r\n  label: string;\r\n  value: any;\r\n}\r\n\r\nexport interface CardSortSelectOption {\r\n  desc: boolean;\r\n  id: any;\r\n  label: string;\r\n  value: any;\r\n}\r\n\r\nexport interface Filter {\r\n  Header: ReactNode;\r\n  id: string;\r\n  urlDisplay?: string;\r\n  operator?: FilterOperator;\r\n  input?:\r\n    | 'text'\r\n    | 'textarea'\r\n    | 'select'\r\n    | 'checkbox'\r\n    | 'search'\r\n    | 'datetime_range';\r\n  unfilteredLabel?: string;\r\n  selects?: SelectOption[];\r\n  onFilterOpen?: () => void;\r\n  fetchSelects?: (\r\n    filterValue?: string,\r\n    pageIndex?: number,\r\n    pageSize?: number,\r\n  ) => Promise<SelectOption[]>;\r\n  paginate?: boolean;\r\n}\r\n\r\nexport type Filters = Filter[];\r\n\r\nexport type ViewModeType = 'card' | 'table';\r\n\r\nexport interface FilterValue {\r\n  id: string;\r\n  urlDisplay?: string;\r\n  operator?: string;\r\n  value: string | boolean | number | null | undefined | string[] | number[];\r\n}\r\n\r\nexport interface FetchDataConfig {\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  sortBy: SortColumns;\r\n  filters: FilterValue[];\r\n}\r\n\r\nexport interface InternalFilter extends FilterValue {\r\n  Header?: string;\r\n}\r\n\r\nexport enum FilterOperator {\r\n  startsWith = 'sw',\r\n  endsWith = 'ew',\r\n  contains = 'ct',\r\n  equals = 'eq',\r\n  notStartsWith = 'nsw',\r\n  notEndsWith = 'new',\r\n  notContains = 'nct',\r\n  notEquals = 'neq',\r\n  greaterThan = 'gt',\r\n  lessThan = 'lt',\r\n  relationManyMany = 'rel_m_m',\r\n  relationOneMany = 'rel_o_m',\r\n  titleOrSlug = 'title_or_slug',\r\n  nameOrDescription = 'name_or_description',\r\n  allText = 'all_text',\r\n  chartAllText = 'chart_all_text',\r\n  datasetIsNullOrEmpty = 'dataset_is_null_or_empty',\r\n  between = 'between',\r\n  dashboardIsFav = 'dashboard_is_favorite',\r\n  chartIsFav = 'chart_is_favorite',\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  useFilters,\r\n  usePagination,\r\n  useRowSelect,\r\n  useRowState,\r\n  useSortBy,\r\n  useTable,\r\n} from 'react-table';\r\n\r\nimport {\r\n  NumberParam,\r\n  StringParam,\r\n  useQueryParams,\r\n  QueryParamConfig,\r\n} from 'use-query-params';\r\n\r\nimport rison from 'rison';\r\nimport { isEqual } from 'lodash';\r\nimport { PartialStylesConfig } from 'src/components/Select';\r\nimport {\r\n  FetchDataConfig,\r\n  Filter,\r\n  FilterValue,\r\n  InternalFilter,\r\n  SortColumn,\r\n  ViewModeType,\r\n} from './types';\r\n\r\n// Define custom RisonParam for proper encoding/decoding\r\nconst RisonParam: QueryParamConfig<string, any> = {\r\n  encode: (data?: any | null) =>\r\n    data === undefined ? undefined : rison.encode(data),\r\n  decode: (dataStr?: string | string[]) =>\r\n    dataStr === undefined || Array.isArray(dataStr)\r\n      ? undefined\r\n      : rison.decode(dataStr),\r\n};\r\n\r\nexport class ListViewError extends Error {\r\n  name = 'ListViewError';\r\n}\r\n\r\n// removes element from a list, returns new list\r\nexport function removeFromList(list: any[], index: number): any[] {\r\n  return list.filter((_, i) => index !== i);\r\n}\r\n\r\n// apply update to elements of object list, returns new list\r\nfunction updateInList(list: any[], index: number, update: any): any[] {\r\n  const element = list.find((_, i) => index === i);\r\n\r\n  return [\r\n    ...list.slice(0, index),\r\n    { ...element, ...update },\r\n    ...list.slice(index + 1),\r\n  ];\r\n}\r\n\r\ntype QueryFilterState = {\r\n  [id: string]: FilterValue['value'];\r\n};\r\n\r\nfunction mergeCreateFilterValues(list: Filter[], updateObj: QueryFilterState) {\r\n  return list.map(({ id, urlDisplay, operator }) => {\r\n    const currentFilterId = urlDisplay || id;\r\n    const update = updateObj[currentFilterId];\r\n\r\n    return { id, urlDisplay, operator, value: update };\r\n  });\r\n}\r\n\r\n// convert filters from UI objects to data objects\r\nexport function convertFilters(fts: InternalFilter[]): FilterValue[] {\r\n  return fts\r\n    .filter(\r\n      f =>\r\n        !(\r\n          typeof f.value === 'undefined' ||\r\n          (Array.isArray(f.value) && !f.value.length)\r\n        ),\r\n    )\r\n    .map(({ value, operator, id }) => {\r\n      // handle between filter using 2 api filters\r\n      if (operator === 'between' && Array.isArray(value)) {\r\n        return [\r\n          {\r\n            value: value[0],\r\n            operator: 'gt',\r\n            id,\r\n          },\r\n          {\r\n            value: value[1],\r\n            operator: 'lt',\r\n            id,\r\n          },\r\n        ];\r\n      }\r\n      return {\r\n        value,\r\n        operator,\r\n        id,\r\n      };\r\n    })\r\n    .flat();\r\n}\r\n\r\n// convertFilters but to handle new decoded rison format\r\nexport function convertFiltersRison(\r\n  filterObj: any,\r\n  list: Filter[],\r\n): FilterValue[] {\r\n  const filters: FilterValue[] = [];\r\n  const refs = {};\r\n\r\n  Object.keys(filterObj).forEach(id => {\r\n    const filter: FilterValue = {\r\n      id,\r\n      value: filterObj[id],\r\n      // operator: filterObj[id][1], // TODO: can probably get rid of this\r\n    };\r\n\r\n    refs[id] = filter;\r\n    filters.push(filter);\r\n  });\r\n\r\n  // Add operators from filter list\r\n  list.forEach(value => {\r\n    const currentFilterId = value.urlDisplay || value.id;\r\n    const filter = refs[currentFilterId];\r\n\r\n    if (filter) {\r\n      filter.operator = value.operator;\r\n      filter.id = value.id;\r\n    }\r\n  });\r\n\r\n  return filters;\r\n}\r\n\r\nexport function extractInputValue(inputType: Filter['input'], event: any) {\r\n  if (!inputType || inputType === 'text') {\r\n    return event.currentTarget.value;\r\n  }\r\n  if (inputType === 'checkbox') {\r\n    return event.currentTarget.checked;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\ninterface UseListViewConfig {\r\n  fetchData: (conf: FetchDataConfig) => any;\r\n  columns: any[];\r\n  data: any[];\r\n  count: number;\r\n  initialPageSize: number;\r\n  initialSort?: SortColumn[];\r\n  bulkSelectMode?: boolean;\r\n  initialFilters?: Filter[];\r\n  bulkSelectColumnConfig?: {\r\n    id: string;\r\n    Header: (conf: any) => React.ReactNode;\r\n    Cell: (conf: any) => React.ReactNode;\r\n  };\r\n  renderCard?: boolean;\r\n  defaultViewMode?: ViewModeType;\r\n}\r\n\r\nexport function useListViewState({\r\n  fetchData,\r\n  columns,\r\n  data,\r\n  count,\r\n  initialPageSize,\r\n  initialFilters = [],\r\n  initialSort = [],\r\n  bulkSelectMode = false,\r\n  bulkSelectColumnConfig,\r\n  renderCard = false,\r\n  defaultViewMode = 'card',\r\n}: UseListViewConfig) {\r\n  const [query, setQuery] = useQueryParams({\r\n    filters: RisonParam,\r\n    pageIndex: NumberParam,\r\n    sortColumn: StringParam,\r\n    sortOrder: StringParam,\r\n    viewMode: StringParam,\r\n  });\r\n\r\n  const initialSortBy = useMemo(\r\n    () =>\r\n      query.sortColumn && query.sortOrder\r\n        ? [{ id: query.sortColumn, desc: query.sortOrder === 'desc' }]\r\n        : initialSort,\r\n    [query.sortColumn, query.sortOrder],\r\n  );\r\n\r\n  const initialState = {\r\n    filters: query.filters\r\n      ? convertFiltersRison(query.filters, initialFilters)\r\n      : [],\r\n    pageIndex: query.pageIndex || 0,\r\n    pageSize: initialPageSize,\r\n    sortBy: initialSortBy,\r\n  };\r\n\r\n  const [viewMode, setViewMode] = useState<ViewModeType>(\r\n    (query.viewMode as ViewModeType) ||\r\n      (renderCard ? defaultViewMode : 'table'),\r\n  );\r\n\r\n  const columnsWithSelect = useMemo(() => {\r\n    // add exact filter type so filters with falsey values are not filtered out\r\n    const columnsWithFilter = columns.map(f => ({ ...f, filter: 'exact' }));\r\n    return bulkSelectMode\r\n      ? [bulkSelectColumnConfig, ...columnsWithFilter]\r\n      : columnsWithFilter;\r\n  }, [bulkSelectMode, columns]);\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n    canPreviousPage,\r\n    canNextPage,\r\n    pageCount,\r\n    gotoPage,\r\n    setAllFilters,\r\n    selectedFlatRows,\r\n    toggleAllRowsSelected,\r\n    state: { pageIndex, pageSize, sortBy, filters },\r\n  } = useTable(\r\n    {\r\n      columns: columnsWithSelect,\r\n      count,\r\n      data,\r\n      disableFilters: true,\r\n      disableSortRemove: true,\r\n      initialState,\r\n      manualFilters: true,\r\n      manualPagination: true,\r\n      manualSortBy: true,\r\n      autoResetFilters: false,\r\n      pageCount: Math.ceil(count / initialPageSize),\r\n    },\r\n    useFilters,\r\n    useSortBy,\r\n    usePagination,\r\n    useRowState,\r\n    useRowSelect,\r\n  );\r\n\r\n  const [internalFilters, setInternalFilters] = useState<InternalFilter[]>(\r\n    query.filters && initialFilters.length\r\n      ? mergeCreateFilterValues(initialFilters, query.filters)\r\n      : [],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (initialFilters.length) {\r\n      setInternalFilters(\r\n        mergeCreateFilterValues(\r\n          initialFilters,\r\n          query.filters ? query.filters : {},\r\n        ),\r\n      );\r\n    }\r\n  }, [initialFilters]);\r\n\r\n  useEffect(() => {\r\n    // From internalFilters, produce a simplified obj\r\n    const filterObj = {};\r\n\r\n    internalFilters.forEach(filter => {\r\n      if (\r\n        filter.value !== undefined &&\r\n        (typeof filter.value !== 'string' || filter.value.length > 0)\r\n      ) {\r\n        const currentFilterId = filter.urlDisplay || filter.id;\r\n        filterObj[currentFilterId] = filter.value;\r\n      }\r\n    });\r\n\r\n    const queryParams: any = {\r\n      filters: Object.keys(filterObj).length ? filterObj : undefined,\r\n      pageIndex,\r\n    };\r\n    if (sortBy[0]) {\r\n      queryParams.sortColumn = sortBy[0].id;\r\n      queryParams.sortOrder = sortBy[0].desc ? 'desc' : 'asc';\r\n    }\r\n\r\n    if (renderCard) {\r\n      queryParams.viewMode = viewMode;\r\n    }\r\n\r\n    const method =\r\n      typeof query.pageIndex !== 'undefined' &&\r\n      queryParams.pageIndex !== query.pageIndex\r\n        ? 'push'\r\n        : 'replace';\r\n\r\n    setQuery(queryParams, method);\r\n\r\n    fetchData({ pageIndex, pageSize, sortBy, filters });\r\n  }, [fetchData, pageIndex, pageSize, sortBy, filters]);\r\n\r\n  useEffect(() => {\r\n    if (!isEqual(initialState.pageIndex, pageIndex)) {\r\n      gotoPage(initialState.pageIndex);\r\n    }\r\n  }, [query]);\r\n\r\n  const applyFilterValue = (index: number, value: any) => {\r\n    setInternalFilters(currentInternalFilters => {\r\n      // skip redunundant updates\r\n      if (currentInternalFilters[index].value === value) {\r\n        return currentInternalFilters;\r\n      }\r\n\r\n      const update = { ...currentInternalFilters[index], value };\r\n      const updatedFilters = updateInList(\r\n        currentInternalFilters,\r\n        index,\r\n        update,\r\n      );\r\n\r\n      setAllFilters(convertFilters(updatedFilters));\r\n      gotoPage(0); // clear pagination on filter\r\n      return updatedFilters;\r\n    });\r\n  };\r\n\r\n  return {\r\n    canNextPage,\r\n    canPreviousPage,\r\n    getTableBodyProps,\r\n    getTableProps,\r\n    gotoPage,\r\n    headerGroups,\r\n    pageCount,\r\n    prepareRow,\r\n    rows,\r\n    selectedFlatRows,\r\n    setAllFilters,\r\n    state: { pageIndex, pageSize, sortBy, filters, internalFilters, viewMode },\r\n    toggleAllRowsSelected,\r\n    applyFilterValue,\r\n    setViewMode,\r\n  };\r\n}\r\n\r\nexport const filterSelectStyles: PartialStylesConfig = {\r\n  container: (provider, { getValue }) => ({\r\n    ...provider,\r\n    // dynamic width based on label string length\r\n    minWidth: `${Math.min(\r\n      12,\r\n      Math.max(5, 3 + getValue()[0].label.length / 2),\r\n    )}em`,\r\n  }),\r\n  control: provider => ({\r\n    ...provider,\r\n    borderWidth: 0,\r\n    boxShadow: 'none',\r\n    cursor: 'pointer',\r\n    backgroundColor: 'transparent',\r\n  }),\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { MouseEventHandler } from 'react';\r\nimport { SupersetTheme } from '@superset-ui/core';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport Icon, { IconProps } from 'src/components/Icon';\r\n\r\nexport interface RefreshLabelProps {\r\n  onClick: MouseEventHandler<SVGSVGElement>;\r\n  tooltipContent: string;\r\n}\r\n\r\nconst RefreshLabel = ({ onClick, tooltipContent }: RefreshLabelProps) => {\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const IconWithoutRef = React.forwardRef((props: IconProps, ref: any) => (\r\n    <Icon {...props} />\r\n  ));\r\n\r\n  return (\r\n    <Tooltip title={tooltipContent}>\r\n      <IconWithoutRef\r\n        role=\"button\"\r\n        onClick={onClick}\r\n        name=\"refresh\"\r\n        css={(theme: SupersetTheme) => ({\r\n          cursor: 'pointer',\r\n          color: theme.colors.grayscale.base,\r\n          '&:hover': { color: theme.colors.primary.base },\r\n        })}\r\n      />\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default RefreshLabel;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { styled } from '@superset-ui/core';\r\nimport React from 'react';\r\nimport Icon from 'src/components/Icon';\r\n\r\nexport interface SearchInputProps {\r\n  onSubmit: () => void;\r\n  onClear: () => void;\r\n  value: string;\r\n  onChange: React.EventHandler<React.ChangeEvent<HTMLInputElement>>;\r\n  placeholder?: string;\r\n  name?: string;\r\n}\r\n\r\nconst SearchInputWrapper = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  width: 200px;\r\n  height: ${({ theme }) => theme.gridUnit * 8}px;\r\n  background-image: none;\r\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light2};\r\n  border-radius: 4px;\r\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\r\n  padding: 4px 28px;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst commonStyles = `\r\n  position: absolute;\r\n  z-index: 2;\r\n  display: block;\r\n  cursor: pointer;\r\n`;\r\nconst SearchIcon = styled(Icon)`\r\n  ${commonStyles};\r\n  top: 4px;\r\n  left: 2px;\r\n`;\r\n\r\nconst ClearIcon = styled(Icon)`\r\n  ${commonStyles};\r\n  right: 0px;\r\n  top: 4px;\r\n`;\r\n\r\nexport default function SearchInput({\r\n  onChange,\r\n  onClear,\r\n  onSubmit,\r\n  placeholder = 'Search',\r\n  name,\r\n  value,\r\n}: SearchInputProps) {\r\n  return (\r\n    <SearchInputWrapper>\r\n      <SearchIcon\r\n        data-test=\"search-submit\"\r\n        role=\"button\"\r\n        name=\"search\"\r\n        onClick={() => onSubmit()}\r\n      />\r\n      <StyledInput\r\n        data-test=\"search-input\"\r\n        onKeyDown={e => {\r\n          if (e.key === 'Enter') {\r\n            onSubmit();\r\n          }\r\n        }}\r\n        onBlur={() => onSubmit()}\r\n        placeholder={placeholder}\r\n        onChange={onChange}\r\n        value={value}\r\n        name={name}\r\n      />\r\n      {value && (\r\n        <ClearIcon\r\n          data-test=\"search-clear\"\r\n          role=\"button\"\r\n          name=\"cancel-x\"\r\n          onClick={() => onClear()}\r\n        />\r\n      )}\r\n    </SearchInputWrapper>\r\n  );\r\n}\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, {\r\n  FunctionComponent,\r\n  useEffect,\r\n  useState,\r\n  ReactNode,\r\n} from 'react';\r\nimport { styled, SupersetClient, t } from '@superset-ui/core';\r\nimport { AsyncSelect, CreatableSelect, Select } from 'src/components/Select';\r\n\r\nimport { FormLabel } from 'src/components/Form';\r\n\r\nimport DatabaseSelector from 'src/components/DatabaseSelector';\r\nimport RefreshLabel from 'src/components/RefreshLabel';\r\nimport CertifiedIcon from 'src/components/CertifiedIcon';\r\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\r\n\r\nconst FieldTitle = styled.p`\r\n  color: ${({ theme }) => theme.colors.secondary.light2};\r\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\r\n  margin: 20px 0 10px 0;\r\n  text-transform: uppercase;\r\n`;\r\n\r\nconst TableSelectorWrapper = styled.div`\r\n  .fa-refresh {\r\n    padding-left: 9px;\r\n  }\r\n\r\n  .refresh-col {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 30px;\r\n    margin-left: ${({ theme }) => theme.gridUnit}px;\r\n  }\r\n\r\n  .section {\r\n    padding-bottom: 5px;\r\n    display: flex;\r\n    flex-direction: row;\r\n  }\r\n\r\n  .select {\r\n    flex-grow: 1;\r\n  }\r\n\r\n  .divider {\r\n    border-bottom: 1px solid ${({ theme }) => theme.colors.secondary.light5};\r\n    margin: 15px 0;\r\n  }\r\n`;\r\n\r\nconst TableLabel = styled.span`\r\n  align-items: center;\r\n  display: flex;\r\n  white-space: nowrap;\r\n\r\n  > svg,\r\n  > small {\r\n    margin-right: ${({ theme }) => theme.gridUnit}px;\r\n  }\r\n`;\r\n\r\ninterface TableSelectorProps {\r\n  clearable?: boolean;\r\n  database?: any;\r\n  dbId: number;\r\n  formMode?: boolean;\r\n  getDbList?: (arg0: any) => {};\r\n  handleError: (msg: string) => void;\r\n  isDatabaseSelectEnabled?: boolean;\r\n  onChange?: ({\r\n    dbId,\r\n    schema,\r\n  }: {\r\n    dbId: number;\r\n    schema?: string;\r\n    tableName?: string;\r\n  }) => void;\r\n  onDbChange?: (db: any) => void;\r\n  onSchemaChange?: (arg0?: any) => {};\r\n  onSchemasLoad?: () => void;\r\n  onTableChange?: (tableName: string, schema: string) => void;\r\n  onTablesLoad?: (options: Array<any>) => {};\r\n  readOnly?: boolean;\r\n  schema?: string;\r\n  sqlLabMode?: boolean;\r\n  tableName?: string;\r\n  tableNameSticky?: boolean;\r\n}\r\n\r\nconst TableSelector: FunctionComponent<TableSelectorProps> = ({\r\n  database,\r\n  dbId,\r\n  formMode = false,\r\n  getDbList,\r\n  handleError,\r\n  isDatabaseSelectEnabled = true,\r\n  onChange,\r\n  onDbChange,\r\n  onSchemaChange,\r\n  onSchemasLoad,\r\n  onTableChange,\r\n  onTablesLoad,\r\n  readOnly = false,\r\n  schema,\r\n  sqlLabMode = true,\r\n  tableName,\r\n  tableNameSticky = true,\r\n}) => {\r\n  const [currentSchema, setCurrentSchema] = useState<string | undefined>(\r\n    schema,\r\n  );\r\n  const [currentTableName, setCurrentTableName] = useState<string | undefined>(\r\n    tableName,\r\n  );\r\n  const [tableLoading, setTableLoading] = useState(false);\r\n  const [tableOptions, setTableOptions] = useState([]);\r\n\r\n  function fetchTables(\r\n    databaseId?: number,\r\n    schema?: string,\r\n    forceRefresh = false,\r\n    substr = 'undefined',\r\n  ) {\r\n    const dbSchema = schema || currentSchema;\r\n    const actualDbId = databaseId || dbId;\r\n    if (actualDbId && dbSchema) {\r\n      const encodedSchema = encodeURIComponent(dbSchema);\r\n      const encodedSubstr = encodeURIComponent(substr);\r\n      setTableLoading(true);\r\n      setTableOptions([]);\r\n      const endpoint = encodeURI(\r\n        `/superset/tables/${actualDbId}/${encodedSchema}/${encodedSubstr}/${!!forceRefresh}/`,\r\n      );\r\n      return SupersetClient.get({ endpoint })\r\n        .then(({ json }) => {\r\n          const options = json.options.map((o: any) => ({\r\n            value: o.value,\r\n            schema: o.schema,\r\n            label: o.label,\r\n            title: o.title,\r\n            type: o.type,\r\n            extra: o?.extra,\r\n          }));\r\n          setTableLoading(false);\r\n          setTableOptions(options);\r\n          if (onTablesLoad) {\r\n            onTablesLoad(json.options);\r\n          }\r\n        })\r\n        .catch(() => {\r\n          setTableLoading(false);\r\n          setTableOptions([]);\r\n          handleError(t('Error while fetching table list'));\r\n        });\r\n    }\r\n    setTableLoading(false);\r\n    setTableOptions([]);\r\n    return Promise.resolve();\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (dbId && schema) {\r\n      fetchTables();\r\n    }\r\n  }, [dbId, schema]);\r\n\r\n  function onSelectionChange({\r\n    dbId,\r\n    schema,\r\n    tableName,\r\n  }: {\r\n    dbId: number;\r\n    schema?: string;\r\n    tableName?: string;\r\n  }) {\r\n    setCurrentTableName(tableName);\r\n    setCurrentSchema(schema);\r\n    if (onChange) {\r\n      onChange({ dbId, schema, tableName });\r\n    }\r\n  }\r\n\r\n  function getTableNamesBySubStr(substr = 'undefined') {\r\n    if (!dbId || !substr) {\r\n      const options: any[] = [];\r\n      return Promise.resolve({ options });\r\n    }\r\n    const encodedSchema = encodeURIComponent(schema || '');\r\n    const encodedSubstr = encodeURIComponent(substr);\r\n    return SupersetClient.get({\r\n      endpoint: encodeURI(\r\n        `/superset/tables/${dbId}/${encodedSchema}/${encodedSubstr}`,\r\n      ),\r\n    }).then(({ json }) => {\r\n      const options = json.options.map((o: any) => ({\r\n        value: o.value,\r\n        schema: o.schema,\r\n        label: o.label,\r\n        title: o.title,\r\n        type: o.type,\r\n      }));\r\n      return { options };\r\n    });\r\n  }\r\n\r\n  function changeTable(tableOpt: any) {\r\n    if (!tableOpt) {\r\n      setCurrentTableName('');\r\n      return;\r\n    }\r\n    const schemaName = tableOpt.schema;\r\n    const tableOptTableName = tableOpt.value;\r\n    if (tableNameSticky) {\r\n      onSelectionChange({\r\n        dbId,\r\n        schema: schemaName,\r\n        tableName: tableOptTableName,\r\n      });\r\n    }\r\n    if (onTableChange) {\r\n      onTableChange(tableOptTableName, schemaName);\r\n    }\r\n  }\r\n\r\n  function changeSchema(schemaOpt: any, force = false) {\r\n    const value = schemaOpt ? schemaOpt.value : null;\r\n    if (onSchemaChange) {\r\n      onSchemaChange(value);\r\n    }\r\n    onSelectionChange({\r\n      dbId,\r\n      schema: value,\r\n      tableName: undefined,\r\n    });\r\n    fetchTables(dbId, currentSchema, force);\r\n  }\r\n\r\n  function renderTableOption(option: any) {\r\n    return (\r\n      <TableLabel title={option.label}>\r\n        <small className=\"text-muted\">\r\n          <i className={`fa fa-${option.type === 'view' ? 'eye' : 'table'}`} />\r\n        </small>\r\n        {option.extra?.certification && (\r\n          <CertifiedIcon\r\n            certifiedBy={option.extra.certification.certified_by}\r\n            details={option.extra.certification.details}\r\n            size={20}\r\n          />\r\n        )}\r\n        {option.extra?.warning_markdown && (\r\n          <WarningIconWithTooltip\r\n            warningMarkdown={option.extra.warning_markdown}\r\n            size={20}\r\n          />\r\n        )}\r\n        {option.label}\r\n      </TableLabel>\r\n    );\r\n  }\r\n\r\n  function renderSelectRow(select: ReactNode, refreshBtn: ReactNode) {\r\n    return (\r\n      <div className=\"section\">\r\n        <span className=\"select\">{select}</span>\r\n        <span className=\"refresh-col\">{refreshBtn}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderDatabaseSelector() {\r\n    return (\r\n      <DatabaseSelector\r\n        dbId={dbId}\r\n        formMode={formMode}\r\n        getDbList={getDbList}\r\n        getTableList={fetchTables}\r\n        handleError={handleError}\r\n        onChange={onSelectionChange}\r\n        onDbChange={readOnly ? undefined : onDbChange}\r\n        onSchemaChange={readOnly ? undefined : onSchemaChange}\r\n        onSchemasLoad={onSchemasLoad}\r\n        schema={currentSchema}\r\n        sqlLabMode={sqlLabMode}\r\n        isDatabaseSelectEnabled={isDatabaseSelectEnabled && !readOnly}\r\n        readOnly={readOnly}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderTableSelect() {\r\n    const options = tableOptions;\r\n    let select = null;\r\n    if (currentSchema && !formMode) {\r\n      // dataset editor\r\n      select = (\r\n        <Select\r\n          name=\"select-table\"\r\n          isLoading={tableLoading}\r\n          ignoreAccents={false}\r\n          placeholder={t('Select table or type table name')}\r\n          autosize={false}\r\n          onChange={changeTable}\r\n          options={options}\r\n          // @ts-ignore\r\n          value={currentTableName}\r\n          optionRenderer={renderTableOption}\r\n          valueRenderer={renderTableOption}\r\n          isDisabled={readOnly}\r\n        />\r\n      );\r\n    } else if (formMode) {\r\n      select = (\r\n        <CreatableSelect\r\n          name=\"select-table\"\r\n          isLoading={tableLoading}\r\n          ignoreAccents={false}\r\n          placeholder={t('Select table or type table name')}\r\n          autosize={false}\r\n          onChange={changeTable}\r\n          options={options}\r\n          // @ts-ignore\r\n          value={currentTableName}\r\n          optionRenderer={renderTableOption}\r\n        />\r\n      );\r\n    } else {\r\n      // sql lab\r\n      let tableSelectPlaceholder;\r\n      let tableSelectDisabled = false;\r\n      if (database && database.allow_multi_schema_metadata_fetch) {\r\n        tableSelectPlaceholder = t('Type to search ...');\r\n      } else {\r\n        tableSelectPlaceholder = t('Select table ');\r\n        tableSelectDisabled = true;\r\n      }\r\n      select = (\r\n        <AsyncSelect\r\n          name=\"async-select-table\"\r\n          placeholder={tableSelectPlaceholder}\r\n          isDisabled={tableSelectDisabled}\r\n          autosize={false}\r\n          onChange={changeTable}\r\n          // @ts-ignore\r\n          value={currentTableName}\r\n          loadOptions={getTableNamesBySubStr}\r\n          optionRenderer={renderTableOption}\r\n        />\r\n      );\r\n    }\r\n    const refresh = !formMode && !readOnly && (\r\n      <RefreshLabel\r\n        onClick={() => changeSchema({ value: schema }, true)}\r\n        tooltipContent={t('Force refresh table list')}\r\n      />\r\n    );\r\n    return renderSelectRow(select, refresh);\r\n  }\r\n\r\n  function renderSeeTableLabel() {\r\n    return (\r\n      <div className=\"section\">\r\n        <FormLabel>\r\n          {t('See table schema')}{' '}\r\n          {schema && (\r\n            <small>\r\n              {tableOptions.length} in\r\n              <i>{schema}</i>\r\n            </small>\r\n          )}\r\n        </FormLabel>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <TableSelectorWrapper>\r\n      {renderDatabaseSelector()}\r\n      {!formMode && <div className=\"divider\" />}\r\n      {sqlLabMode && renderSeeTableLabel()}\r\n      {formMode && <FieldTitle>{t('Table')}</FieldTitle>}\r\n      {renderTableSelect()}\r\n    </TableSelectorWrapper>\r\n  );\r\n};\r\n\r\nexport default TableSelector;\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { t } from '@superset-ui/core';\r\n\r\nexport const commonMenuData = {\r\n  name: t('Data'),\r\n  tabs: [\r\n    {\r\n      name: 'Databases',\r\n      label: t('Databases'),\r\n      url: '/databaseview/list/',\r\n      usesRouter: true,\r\n    },\r\n    {\r\n      name: 'Datasets',\r\n      label: t('Datasets'),\r\n      url: '/tablemodelview/list/',\r\n      usesRouter: true,\r\n    },\r\n    {\r\n      name: 'Saved queries',\r\n      label: t('Saved queries'),\r\n      url: '/savedqueryview/list/',\r\n      usesRouter: true,\r\n    },\r\n    {\r\n      name: 'Query history',\r\n      label: t('Query history'),\r\n      url: '/superset/sqllab/history/',\r\n      usesRouter: true,\r\n    },\r\n  ],\r\n};\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React, { FunctionComponent, useState } from 'react';\r\nimport { styled, t } from '@superset-ui/core';\r\nimport { useSingleViewResource } from 'src/views/CRUD/hooks';\r\nimport { isEmpty, isNil } from 'lodash';\r\nimport Modal from 'src/components/Modal';\r\nimport TableSelector from 'src/components/TableSelector';\r\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\r\n\r\ntype DatasetAddObject = {\r\n  id: number;\r\n  database: number;\r\n  schema: string;\r\n  table_name: string;\r\n};\r\ninterface DatasetModalProps {\r\n  addDangerToast: (msg: string) => void;\r\n  addSuccessToast: (msg: string) => void;\r\n  onDatasetAdd?: (dataset: DatasetAddObject) => void;\r\n  onHide: () => void;\r\n  show: boolean;\r\n}\r\n\r\nconst TableSelectorContainer = styled.div`\r\n  padding-bottom: 340px;\r\n  width: 65%;\r\n`;\r\n\r\nconst DatasetModal: FunctionComponent<DatasetModalProps> = ({\r\n  addDangerToast,\r\n  addSuccessToast,\r\n  onDatasetAdd,\r\n  onHide,\r\n  show,\r\n}) => {\r\n  const [currentSchema, setSchema] = useState('');\r\n  const [currentTableName, setTableName] = useState('');\r\n  const [datasourceId, setDatasourceId] = useState<number>(0);\r\n  const [disableSave, setDisableSave] = useState(true);\r\n  const { createResource } = useSingleViewResource<Partial<DatasetAddObject>>(\r\n    'dataset',\r\n    t('dataset'),\r\n    addDangerToast,\r\n  );\r\n\r\n  const onChange = ({\r\n    dbId,\r\n    schema,\r\n    tableName,\r\n  }: {\r\n    dbId: number;\r\n    schema: string;\r\n    tableName: string;\r\n  }) => {\r\n    setDatasourceId(dbId);\r\n    setDisableSave(isNil(dbId) || isEmpty(tableName));\r\n    setSchema(schema);\r\n    setTableName(tableName);\r\n  };\r\n\r\n  const onSave = () => {\r\n    const data = {\r\n      database: datasourceId,\r\n      ...(currentSchema ? { schema: currentSchema } : {}),\r\n      table_name: currentTableName,\r\n    };\r\n    createResource(data).then(response => {\r\n      if (!response) {\r\n        return;\r\n      }\r\n      if (onDatasetAdd) {\r\n        onDatasetAdd({ id: response.id, ...response });\r\n      }\r\n      addSuccessToast(t('The dataset has been saved'));\r\n      onHide();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      disablePrimaryButton={disableSave}\r\n      onHandledPrimaryAction={onSave}\r\n      onHide={onHide}\r\n      primaryButtonName={t('Add')}\r\n      show={show}\r\n      title={t('Add dataset')}\r\n    >\r\n      <TableSelectorContainer>\r\n        <TableSelector\r\n          clearable={false}\r\n          dbId={datasourceId}\r\n          formMode\r\n          handleError={addDangerToast}\r\n          onChange={onChange}\r\n          schema={currentSchema}\r\n          tableName={currentTableName}\r\n        />\r\n      </TableSelectorContainer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default withToasts(DatasetModal);\r\n","/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport { SupersetClient, t, styled } from '@superset-ui/core';\r\nimport React, {\r\n  FunctionComponent,\r\n  useState,\r\n  useMemo,\r\n  useCallback,\r\n} from 'react';\r\nimport rison from 'rison';\r\nimport {\r\n  createFetchRelated,\r\n  createFetchDistinct,\r\n  createErrorHandler,\r\n} from 'src/views/CRUD/utils';\r\nimport { useListViewResource } from 'src/views/CRUD/hooks';\r\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\r\nimport DatasourceModal from 'src/datasource/DatasourceModal';\r\nimport DeleteModal from 'src/components/DeleteModal';\r\nimport ListView, {\r\n  ListViewProps,\r\n  Filters,\r\n  FilterOperator,\r\n} from 'src/components/ListView';\r\nimport SubMenu, {\r\n  SubMenuProps,\r\n  ButtonProps,\r\n} from 'src/components/Menu/SubMenu';\r\nimport { commonMenuData } from 'src/views/CRUD/data/common';\r\nimport Owner from 'src/types/Owner';\r\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\r\nimport { Tooltip } from 'src/components/Tooltip';\r\nimport Icons from 'src/components/Icons';\r\nimport FacePile from 'src/components/FacePile';\r\nimport CertifiedIcon from 'src/components/CertifiedIcon';\r\nimport ImportModelsModal from 'src/components/ImportModal/index';\r\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\r\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\r\nimport AddDatasetModal from './AddDatasetModal';\r\n\r\nconst PAGE_SIZE = 25;\r\nconst PASSWORDS_NEEDED_MESSAGE = t(\r\n  'The passwords for the databases below are needed in order to ' +\r\n    'import them together with the datasets. Please note that the ' +\r\n    '\"Secure Extra\" and \"Certificate\" sections of ' +\r\n    'the database configuration are not present in export files, and ' +\r\n    'should be added manually after the import if they are needed.',\r\n);\r\nconst CONFIRM_OVERWRITE_MESSAGE = t(\r\n  'You are importing one or more datasets that already exist. ' +\r\n    'Overwriting might cause you to lose some of your work. Are you ' +\r\n    'sure you want to overwrite?',\r\n);\r\n\r\nconst FlexRowContainer = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n\r\n  > svg {\r\n    margin-right: ${({ theme }) => theme.gridUnit}px;\r\n  }\r\n`;\r\n\r\nconst Actions = styled.div`\r\n  color: ${({ theme }) => theme.colors.grayscale.base};\r\n`;\r\n\r\ntype Dataset = {\r\n  changed_by_name: string;\r\n  changed_by_url: string;\r\n  changed_by: string;\r\n  changed_on_delta_humanized: string;\r\n  database: {\r\n    id: string;\r\n    database_name: string;\r\n  };\r\n  kind: string;\r\n  explore_url: string;\r\n  id: number;\r\n  owners: Array<Owner>;\r\n  schema: string;\r\n  table_name: string;\r\n};\r\n\r\ninterface DatasetListProps {\r\n  addDangerToast: (msg: string) => void;\r\n  addSuccessToast: (msg: string) => void;\r\n  user: {\r\n    userId: string | number;\r\n  };\r\n}\r\n\r\nconst DatasetList: FunctionComponent<DatasetListProps> = ({\r\n  addDangerToast,\r\n  addSuccessToast,\r\n  user,\r\n}) => {\r\n  const {\r\n    state: {\r\n      loading,\r\n      resourceCount: datasetCount,\r\n      resourceCollection: datasets,\r\n      bulkSelectEnabled,\r\n    },\r\n    hasPerm,\r\n    fetchData,\r\n    toggleBulkSelect,\r\n    refreshData,\r\n  } = useListViewResource<Dataset>('dataset', t('dataset'), addDangerToast);\r\n\r\n  const [datasetAddModalOpen, setDatasetAddModalOpen] = useState<boolean>(\r\n    false,\r\n  );\r\n\r\n  const [datasetCurrentlyDeleting, setDatasetCurrentlyDeleting] = useState<\r\n    (Dataset & { chart_count: number; dashboard_count: number }) | null\r\n  >(null);\r\n\r\n  const [\r\n    datasetCurrentlyEditing,\r\n    setDatasetCurrentlyEditing,\r\n  ] = useState<Dataset | null>(null);\r\n\r\n  const [importingDataset, showImportModal] = useState<boolean>(false);\r\n  const [passwordFields, setPasswordFields] = useState<string[]>([]);\r\n\r\n  const openDatasetImportModal = () => {\r\n    showImportModal(true);\r\n  };\r\n\r\n  const closeDatasetImportModal = () => {\r\n    showImportModal(false);\r\n  };\r\n\r\n  const handleDatasetImport = () => {\r\n    showImportModal(false);\r\n    refreshData();\r\n  };\r\n\r\n  const canEdit = hasPerm('can_write');\r\n  const canDelete = hasPerm('can_write');\r\n  const canCreate = hasPerm('can_write');\r\n  const canExport = hasPerm('can_read');\r\n\r\n  const initialSort = [{ id: 'changed_on_delta_humanized', desc: true }];\r\n\r\n  const openDatasetEditModal = useCallback(\r\n    ({ id }: Dataset) => {\r\n      SupersetClient.get({\r\n        endpoint: `/api/v1/dataset/${id}`,\r\n      })\r\n        .then(({ json = {} }) => {\r\n          const owners = json.result.owners.map((owner: any) => owner.id);\r\n          setDatasetCurrentlyEditing({ ...json.result, owners });\r\n        })\r\n        .catch(() => {\r\n          addDangerToast(\r\n            t('An error occurred while fetching dataset related data'),\r\n          );\r\n        });\r\n    },\r\n    [addDangerToast],\r\n  );\r\n\r\n  const openDatasetDeleteModal = (dataset: Dataset) =>\r\n    SupersetClient.get({\r\n      endpoint: `/api/v1/dataset/${dataset.id}/related_objects`,\r\n    })\r\n      .then(({ json = {} }) => {\r\n        setDatasetCurrentlyDeleting({\r\n          ...dataset,\r\n          chart_count: json.charts.count,\r\n          dashboard_count: json.dashboards.count,\r\n        });\r\n      })\r\n      .catch(\r\n        createErrorHandler(errMsg =>\r\n          t(\r\n            'An error occurred while fetching dataset related data: %s',\r\n            errMsg,\r\n          ),\r\n        ),\r\n      );\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        Cell: ({\r\n          row: {\r\n            original: { kind },\r\n          },\r\n        }: any) => {\r\n          if (kind === 'physical') {\r\n            return (\r\n              <Tooltip\r\n                id=\"physical-dataset-tooltip\"\r\n                title={t('Physical dataset')}\r\n              >\r\n                <Icons.DatasetPhysical />\r\n              </Tooltip>\r\n            );\r\n          }\r\n\r\n          return (\r\n            <Tooltip id=\"virtual-dataset-tooltip\" title={t('Virtual dataset')}>\r\n              <Icons.DatasetVirtual />\r\n            </Tooltip>\r\n          );\r\n        },\r\n        accessor: 'kind_icon',\r\n        disableSortBy: true,\r\n        size: 'xs',\r\n      },\r\n      {\r\n        Cell: ({\r\n          row: {\r\n            original: {\r\n              extra,\r\n              table_name: datasetTitle,\r\n              explore_url: exploreURL,\r\n            },\r\n          },\r\n        }: any) => {\r\n          const titleLink = <a href={exploreURL}>{datasetTitle}</a>;\r\n          try {\r\n            const parsedExtra = JSON.parse(extra);\r\n            return (\r\n              <FlexRowContainer>\r\n                {parsedExtra?.certification && (\r\n                  <CertifiedIcon\r\n                    certifiedBy={parsedExtra.certification.certified_by}\r\n                    details={parsedExtra.certification.details}\r\n                  />\r\n                )}\r\n                {parsedExtra?.warning_markdown && (\r\n                  <WarningIconWithTooltip\r\n                    warningMarkdown={parsedExtra.warning_markdown}\r\n                  />\r\n                )}\r\n                {titleLink}\r\n              </FlexRowContainer>\r\n            );\r\n          } catch {\r\n            return titleLink;\r\n          }\r\n        },\r\n        Header: t('Name'),\r\n        accessor: 'table_name',\r\n      },\r\n      {\r\n        Cell: ({\r\n          row: {\r\n            original: { kind },\r\n          },\r\n        }: any) => kind[0]?.toUpperCase() + kind.slice(1),\r\n        Header: t('Type'),\r\n        accessor: 'kind',\r\n        disableSortBy: true,\r\n        size: 'md',\r\n      },\r\n      {\r\n        Header: t('Database'),\r\n        accessor: 'database.database_name',\r\n        size: 'lg',\r\n      },\r\n      {\r\n        Header: t('Schema'),\r\n        accessor: 'schema',\r\n        size: 'lg',\r\n      },\r\n      {\r\n        Cell: ({\r\n          row: {\r\n            original: { changed_on_delta_humanized: changedOn },\r\n          },\r\n        }: any) => <span className=\"no-wrap\">{changedOn}</span>,\r\n        Header: t('Modified'),\r\n        accessor: 'changed_on_delta_humanized',\r\n        size: 'xl',\r\n      },\r\n      {\r\n        Cell: ({\r\n          row: {\r\n            original: { changed_by_name: changedByName },\r\n          },\r\n        }: any) => changedByName,\r\n        Header: t('Modified by'),\r\n        accessor: 'changed_by.first_name',\r\n        size: 'xl',\r\n      },\r\n      {\r\n        accessor: 'database',\r\n        disableSortBy: true,\r\n        hidden: true,\r\n      },\r\n      {\r\n        Cell: ({\r\n          row: {\r\n            original: { owners = [] },\r\n          },\r\n        }: any) => <FacePile users={owners} />,\r\n        Header: t('Owners'),\r\n        id: 'owners',\r\n        disableSortBy: true,\r\n        size: 'lg',\r\n      },\r\n      {\r\n        accessor: 'sql',\r\n        hidden: true,\r\n        disableSortBy: true,\r\n      },\r\n      {\r\n        Cell: ({ row: { original } }: any) => {\r\n          const handleEdit = () => openDatasetEditModal(original);\r\n          const handleDelete = () => openDatasetDeleteModal(original);\r\n          const handleExport = () => handleBulkDatasetExport([original]);\r\n          if (!canEdit && !canDelete && !canExport) {\r\n            return null;\r\n          }\r\n          return (\r\n            <Actions className=\"actions\">\r\n              {canDelete && (\r\n                <Tooltip\r\n                  id=\"delete-action-tooltip\"\r\n                  title={t('Delete')}\r\n                  placement=\"bottom\"\r\n                >\r\n                  <span\r\n                    role=\"button\"\r\n                    tabIndex={0}\r\n                    className=\"action-button\"\r\n                    onClick={handleDelete}\r\n                  >\r\n                    <Icons.Trash />\r\n                  </span>\r\n                </Tooltip>\r\n              )}\r\n              {canExport && (\r\n                <Tooltip\r\n                  id=\"export-action-tooltip\"\r\n                  title={t('Export')}\r\n                  placement=\"bottom\"\r\n                >\r\n                  <span\r\n                    role=\"button\"\r\n                    tabIndex={0}\r\n                    className=\"action-button\"\r\n                    onClick={handleExport}\r\n                  >\r\n                    <Icons.Share />\r\n                  </span>\r\n                </Tooltip>\r\n              )}\r\n              {canEdit && (\r\n                <Tooltip\r\n                  id=\"edit-action-tooltip\"\r\n                  title={t('Edit')}\r\n                  placement=\"bottom\"\r\n                >\r\n                  <span\r\n                    role=\"button\"\r\n                    tabIndex={0}\r\n                    className=\"action-button\"\r\n                    onClick={handleEdit}\r\n                  >\r\n                    <Icons.EditAlt />\r\n                  </span>\r\n                </Tooltip>\r\n              )}\r\n            </Actions>\r\n          );\r\n        },\r\n        Header: t('Actions'),\r\n        id: 'actions',\r\n        hidden: !canEdit && !canDelete,\r\n        disableSortBy: true,\r\n      },\r\n    ],\r\n    [canEdit, canDelete, canExport, openDatasetEditModal],\r\n  );\r\n\r\n  const filterTypes: Filters = useMemo(\r\n    () => [\r\n      {\r\n        Header: t('Owner'),\r\n        id: 'owners',\r\n        input: 'select',\r\n        operator: FilterOperator.relationManyMany,\r\n        unfilteredLabel: 'All',\r\n        fetchSelects: createFetchRelated(\r\n          'dataset',\r\n          'owners',\r\n          createErrorHandler(errMsg =>\r\n            t(\r\n              'An error occurred while fetching dataset owner values: %s',\r\n              errMsg,\r\n            ),\r\n          ),\r\n          user.userId,\r\n        ),\r\n        paginate: true,\r\n      },\r\n      {\r\n        Header: t('Database'),\r\n        id: 'database',\r\n        input: 'select',\r\n        operator: FilterOperator.relationOneMany,\r\n        unfilteredLabel: 'All',\r\n        fetchSelects: createFetchRelated(\r\n          'dataset',\r\n          'database',\r\n          createErrorHandler(errMsg =>\r\n            t('An error occurred while fetching datasets: %s', errMsg),\r\n          ),\r\n        ),\r\n        paginate: true,\r\n      },\r\n      {\r\n        Header: t('Schema'),\r\n        id: 'schema',\r\n        input: 'select',\r\n        operator: FilterOperator.equals,\r\n        unfilteredLabel: 'All',\r\n        fetchSelects: createFetchDistinct(\r\n          'dataset',\r\n          'schema',\r\n          createErrorHandler(errMsg =>\r\n            t('An error occurred while fetching schema values: %s', errMsg),\r\n          ),\r\n        ),\r\n        paginate: true,\r\n      },\r\n      {\r\n        Header: t('Type'),\r\n        id: 'sql',\r\n        input: 'select',\r\n        operator: FilterOperator.datasetIsNullOrEmpty,\r\n        unfilteredLabel: 'All',\r\n        selects: [\r\n          { label: 'Virtual', value: false },\r\n          { label: 'Physical', value: true },\r\n        ],\r\n      },\r\n      {\r\n        Header: t('Search'),\r\n        id: 'table_name',\r\n        input: 'search',\r\n        operator: FilterOperator.contains,\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const menuData: SubMenuProps = {\r\n    activeChild: 'Datasets',\r\n    ...commonMenuData,\r\n  };\r\n\r\n  const buttonArr: Array<ButtonProps> = [];\r\n\r\n  if (canDelete || canExport) {\r\n    buttonArr.push({\r\n      name: t('Bulk select'),\r\n      onClick: toggleBulkSelect,\r\n      buttonStyle: 'secondary',\r\n    });\r\n  }\r\n\r\n  if (canCreate) {\r\n    buttonArr.push({\r\n      name: (\r\n        <>\r\n          <i className=\"fa fa-plus\" /> {t('Dataset')}{' '}\r\n        </>\r\n      ),\r\n      onClick: () => setDatasetAddModalOpen(true),\r\n      buttonStyle: 'primary',\r\n    });\r\n  }\r\n\r\n  if (isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT)) {\r\n    buttonArr.push({\r\n      name: (\r\n        <Tooltip\r\n          id=\"import-tooltip\"\r\n          title={t('Import datasets')}\r\n          placement=\"bottomRight\"\r\n        >\r\n          <Icons.Import data-test=\"import-button\" />\r\n        </Tooltip>\r\n      ),\r\n      buttonStyle: 'link',\r\n      onClick: openDatasetImportModal,\r\n    });\r\n  }\r\n\r\n  menuData.buttons = buttonArr;\r\n\r\n  const closeDatasetDeleteModal = () => {\r\n    setDatasetCurrentlyDeleting(null);\r\n  };\r\n\r\n  const closeDatasetEditModal = () => {\r\n    setDatasetCurrentlyEditing(null);\r\n  };\r\n\r\n  const handleDatasetDelete = ({ id, table_name: tableName }: Dataset) => {\r\n    SupersetClient.delete({\r\n      endpoint: `/api/v1/dataset/${id}`,\r\n    }).then(\r\n      () => {\r\n        refreshData();\r\n        setDatasetCurrentlyDeleting(null);\r\n        addSuccessToast(t('Deleted: %s', tableName));\r\n      },\r\n      createErrorHandler(errMsg =>\r\n        addDangerToast(\r\n          t('There was an issue deleting %s: %s', tableName, errMsg),\r\n        ),\r\n      ),\r\n    );\r\n  };\r\n\r\n  const handleBulkDatasetDelete = (datasetsToDelete: Dataset[]) => {\r\n    SupersetClient.delete({\r\n      endpoint: `/api/v1/dataset/?q=${rison.encode(\r\n        datasetsToDelete.map(({ id }) => id),\r\n      )}`,\r\n    }).then(\r\n      ({ json = {} }) => {\r\n        refreshData();\r\n        addSuccessToast(json.message);\r\n      },\r\n      createErrorHandler(errMsg =>\r\n        addDangerToast(\r\n          t('There was an issue deleting the selected datasets: %s', errMsg),\r\n        ),\r\n      ),\r\n    );\r\n  };\r\n\r\n  const handleBulkDatasetExport = (datasetsToExport: Dataset[]) =>\r\n    window.location.assign(\r\n      `/api/v1/dataset/export/?q=${rison.encode(\r\n        datasetsToExport.map(({ id }) => id),\r\n      )}`,\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <SubMenu {...menuData} />\r\n      <AddDatasetModal\r\n        show={datasetAddModalOpen}\r\n        onHide={() => setDatasetAddModalOpen(false)}\r\n        onDatasetAdd={refreshData}\r\n      />\r\n      {datasetCurrentlyDeleting && (\r\n        <DeleteModal\r\n          description={t(\r\n            'The dataset %s is linked to %s charts that appear on %s dashboards. Are you sure you want to continue? Deleting the dataset will break those objects.',\r\n            datasetCurrentlyDeleting.table_name,\r\n            datasetCurrentlyDeleting.chart_count,\r\n            datasetCurrentlyDeleting.dashboard_count,\r\n          )}\r\n          onConfirm={() => {\r\n            if (datasetCurrentlyDeleting) {\r\n              handleDatasetDelete(datasetCurrentlyDeleting);\r\n            }\r\n          }}\r\n          onHide={closeDatasetDeleteModal}\r\n          open\r\n          title={t('Delete Dataset?')}\r\n        />\r\n      )}\r\n      {datasetCurrentlyEditing && (\r\n        <DatasourceModal\r\n          datasource={datasetCurrentlyEditing}\r\n          onDatasourceSave={refreshData}\r\n          onHide={closeDatasetEditModal}\r\n          show\r\n        />\r\n      )}\r\n      <ConfirmStatusChange\r\n        title={t('Please confirm')}\r\n        description={t(\r\n          'Are you sure you want to delete the selected datasets?',\r\n        )}\r\n        onConfirm={handleBulkDatasetDelete}\r\n      >\r\n        {confirmDelete => {\r\n          const bulkActions: ListViewProps['bulkActions'] = [];\r\n          if (canDelete) {\r\n            bulkActions.push({\r\n              key: 'delete',\r\n              name: t('Delete'),\r\n              onSelect: confirmDelete,\r\n              type: 'danger',\r\n            });\r\n          }\r\n          if (canExport) {\r\n            bulkActions.push({\r\n              key: 'export',\r\n              name: t('Export'),\r\n              type: 'primary',\r\n              onSelect: handleBulkDatasetExport,\r\n            });\r\n          }\r\n          return (\r\n            <ListView<Dataset>\r\n              className=\"dataset-list-view\"\r\n              columns={columns}\r\n              data={datasets}\r\n              count={datasetCount}\r\n              pageSize={PAGE_SIZE}\r\n              fetchData={fetchData}\r\n              filters={filterTypes}\r\n              loading={loading}\r\n              initialSort={initialSort}\r\n              bulkActions={bulkActions}\r\n              bulkSelectEnabled={bulkSelectEnabled}\r\n              disableBulkSelect={toggleBulkSelect}\r\n              renderBulkSelectCopy={selected => {\r\n                const { virtualCount, physicalCount } = selected.reduce(\r\n                  (acc, e) => {\r\n                    if (e.original.kind === 'physical') acc.physicalCount += 1;\r\n                    else if (e.original.kind === 'virtual') {\r\n                      acc.virtualCount += 1;\r\n                    }\r\n                    return acc;\r\n                  },\r\n                  { virtualCount: 0, physicalCount: 0 },\r\n                );\r\n\r\n                if (!selected.length) {\r\n                  return t('0 Selected');\r\n                }\r\n                if (virtualCount && !physicalCount) {\r\n                  return t(\r\n                    '%s Selected (Virtual)',\r\n                    selected.length,\r\n                    virtualCount,\r\n                  );\r\n                }\r\n                if (physicalCount && !virtualCount) {\r\n                  return t(\r\n                    '%s Selected (Physical)',\r\n                    selected.length,\r\n                    physicalCount,\r\n                  );\r\n                }\r\n\r\n                return t(\r\n                  '%s Selected (%s Physical, %s Virtual)',\r\n                  selected.length,\r\n                  physicalCount,\r\n                  virtualCount,\r\n                );\r\n              }}\r\n            />\r\n          );\r\n        }}\r\n      </ConfirmStatusChange>\r\n\r\n      <ImportModelsModal\r\n        resourceName=\"dataset\"\r\n        resourceLabel={t('dataset')}\r\n        passwordsNeededMessage={PASSWORDS_NEEDED_MESSAGE}\r\n        confirmOverwriteMessage={CONFIRM_OVERWRITE_MESSAGE}\r\n        addDangerToast={addDangerToast}\r\n        addSuccessToast={addSuccessToast}\r\n        onModelImport={handleDatasetImport}\r\n        show={importingDataset}\r\n        onHide={closeDatasetImportModal}\r\n        passwordFields={passwordFields}\r\n        setPasswordFields={setPasswordFields}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withToasts(DatasetList);\r\n"],"sourceRoot":""}