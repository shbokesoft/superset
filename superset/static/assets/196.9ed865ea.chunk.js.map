{"version":3,"sources":["webpack:///./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx"],"names":["AUTOMATIC_COLOR","propTypes","name","PropTypes","string","annotationType","sourceType","color","opacity","style","width","number","showMarkers","bool","hideLine","value","oneOfType","overrides","object","show","titleColumn","descriptionColumns","arrayOf","timeColumn","intervalEndColumn","vizType","error","colorScheme","addAnnotationLayer","func","removeAnnotationLayer","close","onPopoverClear","defaultProps","DEFAULT_ANNOTATION_TYPE","AnnotationLayer","React","PureComponent","constructor","props","time_range","since","until","metadata","getChartMetadataRegistry","get","supportedAnnotationTypes","validAnnotationType","state","isNew","isLoadingOptions","valueOptions","submitAnnotation","deleteAnnotation","applyAnnotation","fetchOptions","handleAnnotationType","handleAnnotationSourceType","handleValue","isValidForm","popoverClearWrapper","componentDidMount","componentDidUpdate","prevProps","prevState","getSupportedSourceTypes","sources","chartMetadata","canBeAnnotationType","key","label","ANNOTATION_TYPES_METADATA","supportNativeSource","unshift","ANNOTATION_SOURCE_TYPES_METADATA","NATIVE","isValidFormula","ANNOTATION_TYPES","FORMULA","mathjsParse","compile","evaluate","x","err","errors","validateNonEmpty","ANNOTATION_SOURCE_TYPES","EVENT","push","INTERVAL","length","actionMeta","callback","action","setState","prevSourceType","SupersetClient","endpoint","then","json","layers","result","layer","id","requiresQuery","registry","viz_type","title","slice","annotationFields","newAnnotation","field","renderOption","option","renderValueConfiguration","description","t","join","_","renderSliceConfiguration","columns","data","groupby","all_columns","timeColumnOptions","include_time","marginRight","v","TIME_SERIES","marginTop","time_grain_sqla","granularity","time_shift","renderDisplayConfiguration","getCategoricalSchemeRegistry","colors","toLowerCase","display","flexDirection","hex","marginBottom","render","isValid","type","supportedSourceTypes","justifyContent"],"mappings":"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","file":"196.9ed865ea.chunk.js","sourcesContent":["/**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { CompactPicker } from 'react-color';\r\nimport Button from 'src/components/Button';\r\nimport { parse as mathjsParse } from 'mathjs';\r\nimport {\r\n  t,\r\n  SupersetClient,\r\n  getCategoricalSchemeRegistry,\r\n  getChartMetadataRegistry,\r\n  validateNonEmpty,\r\n} from '@superset-ui/core';\r\n\r\nimport SelectControl from 'src/explore/components/controls/SelectControl';\r\nimport TextControl from 'src/explore/components/controls/TextControl';\r\nimport CheckboxControl from 'src/explore/components/controls/CheckboxControl';\r\nimport {\r\n  ANNOTATION_SOURCE_TYPES,\r\n  ANNOTATION_TYPES,\r\n  ANNOTATION_TYPES_METADATA,\r\n  DEFAULT_ANNOTATION_TYPE,\r\n  requiresQuery,\r\n  ANNOTATION_SOURCE_TYPES_METADATA,\r\n} from 'src/modules/AnnotationTypes';\r\nimport PopoverSection from 'src/components/PopoverSection';\r\nimport ControlHeader from 'src/explore/components/ControlHeader';\r\n\r\nconst AUTOMATIC_COLOR = '';\r\n\r\nconst propTypes = {\r\n  name: PropTypes.string,\r\n  annotationType: PropTypes.string,\r\n  sourceType: PropTypes.string,\r\n  color: PropTypes.string,\r\n  opacity: PropTypes.string,\r\n  style: PropTypes.string,\r\n  width: PropTypes.number,\r\n  showMarkers: PropTypes.bool,\r\n  hideLine: PropTypes.bool,\r\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  overrides: PropTypes.object,\r\n  show: PropTypes.bool,\r\n  titleColumn: PropTypes.string,\r\n  descriptionColumns: PropTypes.arrayOf(PropTypes.string),\r\n  timeColumn: PropTypes.string,\r\n  intervalEndColumn: PropTypes.string,\r\n  vizType: PropTypes.string,\r\n\r\n  error: PropTypes.string,\r\n  colorScheme: PropTypes.string,\r\n\r\n  addAnnotationLayer: PropTypes.func,\r\n  removeAnnotationLayer: PropTypes.func,\r\n  close: PropTypes.func,\r\n\r\n  onPopoverClear: PropTypes.func,\r\n};\r\n\r\nconst defaultProps = {\r\n  name: '',\r\n  annotationType: DEFAULT_ANNOTATION_TYPE,\r\n  sourceType: '',\r\n  color: AUTOMATIC_COLOR,\r\n  opacity: '',\r\n  style: 'solid',\r\n  width: 1,\r\n  showMarkers: false,\r\n  hideLine: false,\r\n  overrides: {},\r\n  colorScheme: 'd3Category10',\r\n  show: true,\r\n  titleColumn: '',\r\n  descriptionColumns: [],\r\n  timeColumn: '',\r\n  intervalEndColumn: '',\r\n\r\n  addAnnotationLayer: () => {},\r\n  removeAnnotationLayer: () => {},\r\n  close: () => {},\r\n  onPopoverClear: () => {},\r\n};\r\n\r\nexport default class AnnotationLayer extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    const {\r\n      name,\r\n      annotationType,\r\n      sourceType,\r\n      color,\r\n      opacity,\r\n      style,\r\n      width,\r\n      showMarkers,\r\n      hideLine,\r\n      value,\r\n      overrides,\r\n      show,\r\n      titleColumn,\r\n      descriptionColumns,\r\n      timeColumn,\r\n      intervalEndColumn,\r\n      vizType,\r\n    } = props;\r\n\r\n    // Only allow override whole time_range\r\n    if ('since' in overrides || 'until' in overrides) {\r\n      overrides.time_range = null;\r\n      delete overrides.since;\r\n      delete overrides.until;\r\n    }\r\n\r\n    // Check if annotationType is supported by this chart\r\n    const metadata = getChartMetadataRegistry().get(vizType);\r\n    const supportedAnnotationTypes = metadata?.supportedAnnotationTypes || [];\r\n    const validAnnotationType = supportedAnnotationTypes.includes(\r\n      annotationType,\r\n    )\r\n      ? annotationType\r\n      : supportedAnnotationTypes[0];\r\n\r\n    this.state = {\r\n      // base\r\n      name,\r\n      annotationType: validAnnotationType,\r\n      sourceType,\r\n      value,\r\n      overrides,\r\n      show,\r\n      // slice\r\n      titleColumn,\r\n      descriptionColumns,\r\n      timeColumn,\r\n      intervalEndColumn,\r\n      // display\r\n      color: color || AUTOMATIC_COLOR,\r\n      opacity,\r\n      style,\r\n      width,\r\n      showMarkers,\r\n      hideLine,\r\n      // refData\r\n      isNew: !name,\r\n      isLoadingOptions: true,\r\n      valueOptions: [],\r\n    };\r\n    this.submitAnnotation = this.submitAnnotation.bind(this);\r\n    this.deleteAnnotation = this.deleteAnnotation.bind(this);\r\n    this.applyAnnotation = this.applyAnnotation.bind(this);\r\n    this.fetchOptions = this.fetchOptions.bind(this);\r\n    this.handleAnnotationType = this.handleAnnotationType.bind(this);\r\n    this.handleAnnotationSourceType = this.handleAnnotationSourceType.bind(\r\n      this,\r\n    );\r\n    this.handleValue = this.handleValue.bind(this);\r\n    this.isValidForm = this.isValidForm.bind(this);\r\n    this.popoverClearWrapper = this.popoverClearWrapper.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { annotationType, sourceType, isLoadingOptions } = this.state;\r\n    this.fetchOptions(annotationType, sourceType, isLoadingOptions);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.sourceType !== this.state.sourceType) {\r\n      this.fetchOptions(this.state.annotationType, this.state.sourceType, true);\r\n    }\r\n  }\r\n\r\n  getSupportedSourceTypes(annotationType) {\r\n    // Get vis types that can be source.\r\n    const sources = getChartMetadataRegistry()\r\n      .entries()\r\n      .filter(({ value: chartMetadata }) =>\r\n        chartMetadata.canBeAnnotationType(annotationType),\r\n      )\r\n      .map(({ key, value: chartMetadata }) => ({\r\n        value: key,\r\n        label: chartMetadata.name,\r\n      }));\r\n    // Prepend native source if applicable\r\n    if (ANNOTATION_TYPES_METADATA[annotationType]?.supportNativeSource) {\r\n      sources.unshift(ANNOTATION_SOURCE_TYPES_METADATA.NATIVE);\r\n    }\r\n    return sources;\r\n  }\r\n\r\n  isValidFormula(value, annotationType) {\r\n    if (annotationType === ANNOTATION_TYPES.FORMULA) {\r\n      try {\r\n        mathjsParse(value).compile().evaluate({ x: 0 });\r\n      } catch (err) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  isValidForm() {\r\n    const {\r\n      name,\r\n      annotationType,\r\n      sourceType,\r\n      value,\r\n      timeColumn,\r\n      intervalEndColumn,\r\n    } = this.state;\r\n    const errors = [\r\n      validateNonEmpty(name),\r\n      validateNonEmpty(annotationType),\r\n      validateNonEmpty(value),\r\n    ];\r\n    if (sourceType !== ANNOTATION_SOURCE_TYPES.NATIVE) {\r\n      if (annotationType === ANNOTATION_TYPES.EVENT) {\r\n        errors.push(validateNonEmpty(timeColumn));\r\n      }\r\n      if (annotationType === ANNOTATION_TYPES.INTERVAL) {\r\n        errors.push(validateNonEmpty(timeColumn));\r\n        errors.push(validateNonEmpty(intervalEndColumn));\r\n      }\r\n    }\r\n    errors.push(this.isValidFormula(value, annotationType));\r\n    return !errors.filter(x => x).length;\r\n  }\r\n\r\n  popoverClearWrapper(value, actionMeta, callback) {\r\n    if (callback) {\r\n      callback(value);\r\n    }\r\n    if (actionMeta?.action === 'clear') {\r\n      this.props.onPopoverClear(true);\r\n    }\r\n  }\r\n\r\n  handleAnnotationType(annotationType) {\r\n    this.setState({\r\n      annotationType,\r\n      sourceType: null,\r\n      value: null,\r\n    });\r\n  }\r\n\r\n  handleAnnotationSourceType(sourceType) {\r\n    const { sourceType: prevSourceType } = this.state;\r\n\r\n    if (prevSourceType !== sourceType) {\r\n      this.setState({ sourceType, value: null, isLoadingOptions: true });\r\n    }\r\n  }\r\n\r\n  handleValue(value) {\r\n    this.setState({\r\n      value,\r\n      descriptionColumns: null,\r\n      intervalEndColumn: null,\r\n      timeColumn: null,\r\n      titleColumn: null,\r\n      overrides: { time_range: null },\r\n    });\r\n  }\r\n\r\n  fetchOptions(annotationType, sourceType, isLoadingOptions) {\r\n    if (isLoadingOptions) {\r\n      if (sourceType === ANNOTATION_SOURCE_TYPES.NATIVE) {\r\n        SupersetClient.get({\r\n          endpoint: '/annotationlayermodelview/api/read?',\r\n        }).then(({ json }) => {\r\n          const layers = json\r\n            ? json.result.map(layer => ({\r\n                value: layer.id,\r\n                label: layer.name,\r\n              }))\r\n            : [];\r\n          this.setState({\r\n            isLoadingOptions: false,\r\n            valueOptions: layers,\r\n          });\r\n        });\r\n      } else if (requiresQuery(sourceType)) {\r\n        SupersetClient.get({ endpoint: '/superset/user_slices' }).then(\r\n          ({ json }) => {\r\n            const registry = getChartMetadataRegistry();\r\n            this.setState({\r\n              isLoadingOptions: false,\r\n              valueOptions: json\r\n                .filter(x => {\r\n                  const metadata = registry.get(x.viz_type);\r\n                  return (\r\n                    metadata && metadata.canBeAnnotationType(annotationType)\r\n                  );\r\n                })\r\n                .map(x => ({ value: x.id, label: x.title, slice: x })),\r\n            });\r\n          },\r\n        );\r\n      } else {\r\n        this.setState({\r\n          isLoadingOptions: false,\r\n          valueOptions: [],\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteAnnotation() {\r\n    this.props.removeAnnotationLayer();\r\n    this.props.close();\r\n  }\r\n\r\n  applyAnnotation() {\r\n    if (this.isValidForm()) {\r\n      const annotationFields = [\r\n        'name',\r\n        'annotationType',\r\n        'sourceType',\r\n        'color',\r\n        'opacity',\r\n        'style',\r\n        'width',\r\n        'showMarkers',\r\n        'hideLine',\r\n        'value',\r\n        'overrides',\r\n        'show',\r\n        'titleColumn',\r\n        'descriptionColumns',\r\n        'timeColumn',\r\n        'intervalEndColumn',\r\n      ];\r\n      const newAnnotation = {};\r\n      annotationFields.forEach(field => {\r\n        if (this.state[field] !== null) {\r\n          newAnnotation[field] = this.state[field];\r\n        }\r\n      });\r\n\r\n      if (newAnnotation.color === AUTOMATIC_COLOR) {\r\n        newAnnotation.color = null;\r\n      }\r\n\r\n      this.props.addAnnotationLayer(newAnnotation);\r\n      this.setState({ isNew: false });\r\n    }\r\n  }\r\n\r\n  submitAnnotation() {\r\n    this.applyAnnotation();\r\n    this.props.close();\r\n  }\r\n\r\n  renderOption(option) {\r\n    return (\r\n      <span\r\n        css={{\r\n          overflow: 'hidden',\r\n          textOverflow: 'ellipsis',\r\n          whiteSpace: 'nowrap',\r\n        }}\r\n        title={option.label}\r\n      >\r\n        {option.label}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  renderValueConfiguration() {\r\n    const {\r\n      annotationType,\r\n      sourceType,\r\n      value,\r\n      valueOptions,\r\n      isLoadingOptions,\r\n    } = this.state;\r\n    let label = '';\r\n    let description = '';\r\n    if (requiresQuery(sourceType)) {\r\n      if (sourceType === ANNOTATION_SOURCE_TYPES.NATIVE) {\r\n        label = 'Annotation layer';\r\n        description = 'Select the Annotation Layer you would like to use.';\r\n      } else {\r\n        label = t('Chart');\r\n        description = `Use a pre defined Superset Chart as a source for annotations and overlays.\r\n        your chart must be one of these visualization types:\r\n        [${this.getSupportedSourceTypes(annotationType)\r\n          .map(x => x.label)\r\n          .join(', ')}]`;\r\n      }\r\n    } else if (annotationType === ANNOTATION_TYPES.FORMULA) {\r\n      label = 'Formula';\r\n      description = `Expects a formula with depending time parameter 'x'\r\n        in milliseconds since epoch. mathjs is used to evaluate the formulas.\r\n        Example: '2x+5'`;\r\n    }\r\n    if (requiresQuery(sourceType)) {\r\n      return (\r\n        <SelectControl\r\n          name=\"annotation-layer-value\"\r\n          showHeader\r\n          hovered\r\n          description={description}\r\n          label={label}\r\n          placeholder=\"\"\r\n          options={valueOptions}\r\n          isLoading={isLoadingOptions}\r\n          value={value}\r\n          onChange={(value, _, actionMeta) =>\r\n            this.popoverClearWrapper(value, actionMeta, this.handleValue)\r\n          }\r\n          validationErrors={!value ? ['Mandatory'] : []}\r\n          optionRenderer={this.renderOption}\r\n        />\r\n      );\r\n    }\r\n    if (annotationType === ANNOTATION_TYPES.FORMULA) {\r\n      return (\r\n        <TextControl\r\n          name=\"annotation-layer-value\"\r\n          hovered\r\n          showHeader\r\n          description={description}\r\n          label={label}\r\n          placeholder=\"\"\r\n          value={value}\r\n          onChange={this.handleValue}\r\n          validationErrors={\r\n            this.isValidFormula(value, annotationType) ? ['Bad formula.'] : []\r\n          }\r\n        />\r\n      );\r\n    }\r\n    return '';\r\n  }\r\n\r\n  renderSliceConfiguration() {\r\n    const {\r\n      annotationType,\r\n      sourceType,\r\n      value,\r\n      valueOptions,\r\n      overrides,\r\n      titleColumn,\r\n      timeColumn,\r\n      intervalEndColumn,\r\n      descriptionColumns,\r\n    } = this.state;\r\n    const { slice } = valueOptions.find(x => x.value === value) || {};\r\n    if (sourceType !== ANNOTATION_SOURCE_TYPES.NATIVE && slice) {\r\n      const columns = (slice.data.groupby || [])\r\n        .concat(slice.data.all_columns || [])\r\n        .map(x => ({ value: x, label: x }));\r\n      const timeColumnOptions = slice.data.include_time\r\n        ? [{ value: '__timestamp', label: '__timestamp' }].concat(columns)\r\n        : columns;\r\n      return (\r\n        <div style={{ marginRight: '2rem' }}>\r\n          <PopoverSection\r\n            isSelected\r\n            title={t('Annotation Slice Configuration')}\r\n            info={t(`This section allows you to configure how to use the slice\r\n               to generate annotations.`)}\r\n          >\r\n            {(annotationType === ANNOTATION_TYPES.EVENT ||\r\n              annotationType === ANNOTATION_TYPES.INTERVAL) && (\r\n              <SelectControl\r\n                hovered\r\n                name=\"annotation-layer-time-column\"\r\n                label={\r\n                  annotationType === ANNOTATION_TYPES.INTERVAL\r\n                    ? 'Interval start column'\r\n                    : 'Event time column'\r\n                }\r\n                description=\"This column must contain date/time information.\"\r\n                validationErrors={!timeColumn ? ['Mandatory'] : []}\r\n                clearable={false}\r\n                options={timeColumnOptions}\r\n                value={timeColumn}\r\n                onChange={v => this.setState({ timeColumn: v })}\r\n              />\r\n            )}\r\n            {annotationType === ANNOTATION_TYPES.INTERVAL && (\r\n              <SelectControl\r\n                hovered\r\n                name=\"annotation-layer-intervalEnd\"\r\n                label=\"Interval End column\"\r\n                description=\"This column must contain date/time information.\"\r\n                validationErrors={!intervalEndColumn ? ['Mandatory'] : []}\r\n                options={columns}\r\n                value={intervalEndColumn}\r\n                onChange={(value, _, actionMeta) =>\r\n                  this.popoverClearWrapper(value, actionMeta, v =>\r\n                    this.setState({ intervalEndColumn: v }),\r\n                  )\r\n                }\r\n              />\r\n            )}\r\n            <SelectControl\r\n              hovered\r\n              name=\"annotation-layer-title\"\r\n              label=\"Title Column\"\r\n              description=\"Pick a title for you annotation.\"\r\n              options={[{ value: '', label: 'None' }].concat(columns)}\r\n              value={titleColumn}\r\n              onChange={(value, _, actionMeta) =>\r\n                this.popoverClearWrapper(value, actionMeta, v =>\r\n                  this.setState({ titleColumn: v }),\r\n                )\r\n              }\r\n            />\r\n            {annotationType !== ANNOTATION_TYPES.TIME_SERIES && (\r\n              <SelectControl\r\n                hovered\r\n                name=\"annotation-layer-title\"\r\n                label=\"Description Columns\"\r\n                description={`Pick one or more columns that should be shown in the\r\n                  annotation. If you don't select a column all of them will be shown.`}\r\n                multi\r\n                options={columns}\r\n                value={descriptionColumns}\r\n                onChange={(value, _, actionMeta) =>\r\n                  this.popoverClearWrapper(value, actionMeta, v =>\r\n                    this.setState({ descriptionColumns: v }),\r\n                  )\r\n                }\r\n              />\r\n            )}\r\n            <div style={{ marginTop: '1rem' }}>\r\n              <CheckboxControl\r\n                hovered\r\n                name=\"annotation-override-time_range\"\r\n                label=\"Override time range\"\r\n                description={`This controls whether the \"time_range\" field from the current\r\n                  view should be passed down to the chart containing the annotation data.`}\r\n                value={'time_range' in overrides}\r\n                onChange={v => {\r\n                  delete overrides.time_range;\r\n                  if (v) {\r\n                    this.setState({\r\n                      overrides: { ...overrides, time_range: null },\r\n                    });\r\n                  } else {\r\n                    this.setState({ overrides: { ...overrides } });\r\n                  }\r\n                }}\r\n              />\r\n              <CheckboxControl\r\n                hovered\r\n                name=\"annotation-override-timegrain\"\r\n                label=\"Override time grain\"\r\n                description={`This controls whether the time grain field from the current\r\n                  view should be passed down to the chart containing the annotation data.`}\r\n                value={'time_grain_sqla' in overrides}\r\n                onChange={v => {\r\n                  delete overrides.time_grain_sqla;\r\n                  delete overrides.granularity;\r\n                  if (v) {\r\n                    this.setState({\r\n                      overrides: {\r\n                        ...overrides,\r\n                        time_grain_sqla: null,\r\n                        granularity: null,\r\n                      },\r\n                    });\r\n                  } else {\r\n                    this.setState({ overrides: { ...overrides } });\r\n                  }\r\n                }}\r\n              />\r\n              <TextControl\r\n                hovered\r\n                name=\"annotation-layer-timeshift\"\r\n                label=\"Time Shift\"\r\n                description={`Time delta in natural language\r\n                  (example:  24 hours, 7 days, 56 weeks, 365 days)`}\r\n                placeholder=\"\"\r\n                value={overrides.time_shift}\r\n                onChange={v =>\r\n                  this.setState({ overrides: { ...overrides, time_shift: v } })\r\n                }\r\n              />\r\n            </div>\r\n          </PopoverSection>\r\n        </div>\r\n      );\r\n    }\r\n    return '';\r\n  }\r\n\r\n  renderDisplayConfiguration() {\r\n    const {\r\n      color,\r\n      opacity,\r\n      style,\r\n      width,\r\n      showMarkers,\r\n      hideLine,\r\n      annotationType,\r\n    } = this.state;\r\n    const colorScheme = getCategoricalSchemeRegistry()\r\n      .get(this.props.colorScheme)\r\n      .colors.concat();\r\n    if (\r\n      color &&\r\n      color !== AUTOMATIC_COLOR &&\r\n      !colorScheme.find(x => x.toLowerCase() === color.toLowerCase())\r\n    ) {\r\n      colorScheme.push(color);\r\n    }\r\n    return (\r\n      <PopoverSection\r\n        isSelected\r\n        title={t('Display configuration')}\r\n        info={t('Configure your how you overlay is displayed here.')}\r\n      >\r\n        <SelectControl\r\n          name=\"annotation-layer-stroke\"\r\n          label={t('Style')}\r\n          // see '../../../visualizations/nvd3_vis.css'\r\n          options={[\r\n            { value: 'solid', label: 'Solid' },\r\n            { value: 'dashed', label: 'Dashed' },\r\n            { value: 'longDashed', label: 'Long dashed' },\r\n            { value: 'dotted', label: 'Dotted' },\r\n          ]}\r\n          value={style}\r\n          clearable={false}\r\n          onChange={v => this.setState({ style: v })}\r\n        />\r\n        <SelectControl\r\n          name=\"annotation-layer-opacity\"\r\n          label={t('Opacity')}\r\n          // see '../../../visualizations/nvd3_vis.css'\r\n          options={[\r\n            { value: '', label: 'Solid' },\r\n            { value: 'opacityLow', label: '0.2' },\r\n            { value: 'opacityMedium', label: '0.5' },\r\n            { value: 'opacityHigh', label: '0.8' },\r\n          ]}\r\n          value={opacity}\r\n          onChange={(value, _, actionMeta) =>\r\n            this.popoverClearWrapper(value, actionMeta, v =>\r\n              this.setState({ opacity: v }),\r\n            )\r\n          }\r\n        />\r\n        <div>\r\n          <ControlHeader label={t('Color')} />\r\n          <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n            <CompactPicker\r\n              color={color}\r\n              colors={colorScheme}\r\n              onChangeComplete={v => this.setState({ color: v.hex })}\r\n            />\r\n            <Button\r\n              style={{ marginTop: '0.5rem', marginBottom: '0.5rem' }}\r\n              buttonStyle={color === AUTOMATIC_COLOR ? 'success' : 'default'}\r\n              buttonSize=\"xsmall\"\r\n              onClick={() => this.setState({ color: AUTOMATIC_COLOR })}\r\n            >\r\n              Automatic Color\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <TextControl\r\n          name=\"annotation-layer-stroke-width\"\r\n          label={t('Line width')}\r\n          isInt\r\n          value={width}\r\n          onChange={v => this.setState({ width: v })}\r\n        />\r\n        {annotationType === ANNOTATION_TYPES.TIME_SERIES && (\r\n          <CheckboxControl\r\n            hovered\r\n            name=\"annotation-layer-show-markers\"\r\n            label=\"Show Markers\"\r\n            description=\"Shows or hides markers for the time series\"\r\n            value={showMarkers}\r\n            onChange={v => this.setState({ showMarkers: v })}\r\n          />\r\n        )}\r\n        {annotationType === ANNOTATION_TYPES.TIME_SERIES && (\r\n          <CheckboxControl\r\n            hovered\r\n            name=\"annotation-layer-hide-line\"\r\n            label=\"Hide Line\"\r\n            description=\"Hides the Line for the time series\"\r\n            value={hideLine}\r\n            onChange={v => this.setState({ hideLine: v })}\r\n          />\r\n        )}\r\n      </PopoverSection>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { isNew, name, annotationType, sourceType, show } = this.state;\r\n    const isValid = this.isValidForm();\r\n    const metadata = getChartMetadataRegistry().get(this.props.vizType);\r\n    const supportedAnnotationTypes = metadata\r\n      ? metadata.supportedAnnotationTypes.map(\r\n          type => ANNOTATION_TYPES_METADATA[type],\r\n        )\r\n      : [];\r\n    const supportedSourceTypes = this.getSupportedSourceTypes(annotationType);\r\n\r\n    return (\r\n      <>\r\n        {this.props.error && (\r\n          <span style={{ color: 'red' }}>ERROR: {this.props.error}</span>\r\n        )}\r\n        <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n          <div style={{ marginRight: '2rem' }}>\r\n            <PopoverSection\r\n              isSelected\r\n              title={t('Layer configuration')}\r\n              info={t('Configure the basics of your Annotation Layer.')}\r\n            >\r\n              <TextControl\r\n                name=\"annotation-layer-name\"\r\n                label={t('Name')}\r\n                placeholder=\"\"\r\n                value={name}\r\n                onChange={v => this.setState({ name: v })}\r\n                validationErrors={!name ? [t('Mandatory')] : []}\r\n              />\r\n              <CheckboxControl\r\n                name=\"annotation-layer-hide\"\r\n                label={t('Hide layer')}\r\n                value={!show}\r\n                onChange={v => this.setState({ show: !v })}\r\n              />\r\n              <SelectControl\r\n                hovered\r\n                description={t('Choose the annotation layer type')}\r\n                label={t('Annotation layer type')}\r\n                name=\"annotation-layer-type\"\r\n                clearable={false}\r\n                options={supportedAnnotationTypes}\r\n                value={annotationType}\r\n                onChange={this.handleAnnotationType}\r\n              />\r\n              {supportedSourceTypes.length > 0 && (\r\n                <SelectControl\r\n                  hovered\r\n                  description=\"Choose the source of your annotations\"\r\n                  label=\"Annotation Source\"\r\n                  name=\"annotation-source-type\"\r\n                  options={supportedSourceTypes}\r\n                  value={sourceType}\r\n                  onChange={(value, _, actionMeta) =>\r\n                    this.popoverClearWrapper(\r\n                      value,\r\n                      actionMeta,\r\n                      this.handleAnnotationSourceType,\r\n                    )\r\n                  }\r\n                  validationErrors={!sourceType ? [t('Mandatory')] : []}\r\n                />\r\n              )}\r\n              {this.renderValueConfiguration()}\r\n            </PopoverSection>\r\n          </div>\r\n          {this.renderSliceConfiguration()}\r\n          {this.renderDisplayConfiguration()}\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          {isNew ? (\r\n            <Button buttonSize=\"small\" onClick={() => this.props.close()}>\r\n              {t('Cancel')}\r\n            </Button>\r\n          ) : (\r\n            <Button buttonSize=\"small\" onClick={this.deleteAnnotation}>\r\n              {t('Remove')}\r\n            </Button>\r\n          )}\r\n          <div>\r\n            <Button\r\n              buttonSize=\"small\"\r\n              disabled={!isValid}\r\n              onClick={this.applyAnnotation}\r\n            >\r\n              {t('Apply')}\r\n            </Button>\r\n\r\n            <Button\r\n              buttonSize=\"small\"\r\n              buttonStyle=\"primary\"\r\n              disabled={!isValid}\r\n              onClick={this.submitAnnotation}\r\n            >\r\n              {t('OK')}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nAnnotationLayer.propTypes = propTypes;\r\nAnnotationLayer.defaultProps = defaultProps;\r\n"],"sourceRoot":""}