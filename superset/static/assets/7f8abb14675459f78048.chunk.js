(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{4604:function(t,n,e){},4745:function(t,n,e){"use strict";e.r(n);var r=e(0),a=e.n(r),o=e(5),i=e.n(o),s=function(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let a=-1;for(let o of t)null!=(o=n(o,++a,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]},l=e(825),c=Math.sqrt(50),u=Math.sqrt(10),f=Math.sqrt(2);function h(t,n,e){var r=(n-t)/Math.max(0,e),a=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,a);return a>=0?(o>=c?10:o>=u?5:o>=f?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=c?10:o>=u?5:o>=f?2:1)}var d=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},m=function(t){let n=t,e=t;function r(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){const o=r+a>>>1;e(t[o],n)<0?r=o+1:a=o}return r}return 1===t.length&&(n=(n,e)=>t(n)-e,e=function(t){return(n,e)=>d(t(n),e)}(t)),{left:r,center:function(t,e,a,o){null==a&&(a=0),null==o&&(o=t.length);const i=r(t,e,a,o-1);return i>a&&n(t[i-1],e)>-n(t[i],e)?i-1:i},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){const o=r+a>>>1;e(t[o],n)>0?a=o:r=o+1}return r}}};const g=m(d),p=g.right;g.left,m((function(t){return null===t?NaN:+t})).center;var b=p,v=e(234),y=e(100),M=e(735);function w(t){return+t}var N=[0,1];function O(t){return t}function k(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function j(t,n,e){var r=t[0],a=t[1],o=n[0],i=n[1];return a<r?(r=k(a,r),o=e(i,o)):(r=k(r,a),o=e(o,i)),function(t){return o(r(t))}}function x(t,n,e){var r=Math.min(t.length,n.length)-1,a=new Array(r),o=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++i<r;)a[i]=k(t[i],t[i+1]),o[i]=e(n[i],n[i+1]);return function(n){var e=b(t,n,1,r)-1;return o[e](a[e](n))}}function S(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function A(){var t,n,e,r,a,o,i=N,s=N,l=v.a,c=O;function u(){var t,n,e,l=Math.min(i.length,s.length);return c!==O&&(t=i[0],n=i[l-1],t>n&&(e=t,t=n,n=e),c=function(e){return Math.max(t,Math.min(n,e))}),r=l>2?x:j,a=o=null,f}function f(n){return null==n||isNaN(n=+n)?e:(a||(a=r(i.map(t),s,l)))(t(c(n)))}return f.invert=function(e){return c(n((o||(o=r(s,i.map(t),y.a)))(e)))},f.domain=function(t){return arguments.length?(i=Array.from(t,w),u()):i.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),l=M.a,u()},f.clamp=function(t){return arguments.length?(c=!!t||O,u()):c!==O},f.interpolate=function(t){return arguments.length?(l=t,u()):l},f.unknown=function(t){return arguments.length?(e=t,f):e},function(e,r){return t=e,n=r,u()}}function X(){return A()(O,O)}function C(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}var D=e(70);function R(t,n,e,r){var a,o=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=c?a*=10:o>=u?a*=5:o>=f&&(a*=2),n<t?-a:a}(t,n,e);switch((r=Object(D.d)(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(a=Object(D.f)(o,i))||(r.precision=a),Object(D.c)(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=Object(D.g)(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=Object(D.e)(o))||(r.precision=a-2*("%"===r.type))}return Object(D.a)(r)}function q(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,a,o,i,s=-1;if(e=+e,(t=+t)===(n=+n)&&e>0)return[t];if((r=n<t)&&(a=t,t=n,n=a),0===(i=h(t,n,e))||!isFinite(i))return[];if(i>0){let e=Math.round(t/i),r=Math.round(n/i);for(e*i<t&&++e,r*i>n&&--r,o=new Array(a=r-e+1);++s<a;)o[s]=(e+s)*i}else{i=-i;let e=Math.round(t*i),r=Math.round(n*i);for(e/i<t&&++e,r/i>n&&--r,o=new Array(a=r-e+1);++s<a;)o[s]=(e+s)/i}return r&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return R(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,a,o=n(),i=0,s=o.length-1,l=o[i],c=o[s],u=10;for(c<l&&(a=l,l=c,c=a,a=i,i=s,s=a);u-- >0;){if((a=h(l,c,e))===r)return o[i]=l,o[s]=c,n(o);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}r=a}return t},t}var P=e(1);const H=["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"],T={className:i.a.string,width:i.a.number,height:i.a.number,data:i.a.arrayOf(i.a.shape({y:i.a.number})).isRequired,bands:i.a.number,colors:i.a.arrayOf(i.a.string),colorScale:i.a.string,mode:i.a.string,offsetX:i.a.number,title:i.a.string,yDomain:i.a.arrayOf(i.a.number)},z={className:"",width:800,height:20,bands:H.length>>1,colors:H,colorScale:"series",mode:"offset",offsetX:0,title:"",yDomain:void 0};class F extends a.a.PureComponent{componentDidMount(){this.drawChart()}componentDidUpdate(){this.drawChart()}componentWillUnmount(){this.canvas=null}drawChart(){if(this.canvas){const{data:t,yDomain:n,width:e,height:r,bands:a,colors:o,colorScale:i,offsetX:l,mode:c}=this.props,u="change"===i?t.map(n=>({...n,y:n.y-t[0].y})):t,f=this.canvas.getContext("2d");f.imageSmoothingEnabled=!1,f.clearRect(0,0,e,r),f.setTransform(1,0,0,1,0,0),f.translate(.5,.5);const h=e/u.length,d=Math.floor(Math.max(0,-l/h)),m=Math.floor(Math.min(u.length,d+e/h));if(d>u.length)return;const[g,p]=n||s(u,t=>t.y),b=function t(){var n=X();return n.copy=function(){return S(n,t())},C.apply(n,arguments),q(n)}().domain([0,Math.max(-g,p)]).range([0,r]);let v,y,M=!1;for(let t=0;t<a;t+=1){f.fillStyle=o[a+t],y=(t+1-a)*r,b.range([a*r+y,y]);for(let t=d;t<m;t+=1)v=u[t].y,v<=0?M=!0:void 0!==v&&f.fillRect(l+t*h,b(v),h+1,b(0)-b(v))}if(M){"offset"===c&&(f.translate(0,r),f.scale(1,-1));for(let t=0;t<a;t+=1){f.fillStyle=o[a-t-1],y=(t+1-a)*r,b.range([a*r+y,y]);for(let t=d;t<m;t+=1)v=u[t].y,v>=0||f.fillRect(l+t*h,b(-v),h+1,b(0)-b(-v))}}}}render(){const{className:t,title:n,width:e,height:r}=this.props;return Object(P.d)("div",{className:`horizon-row ${t}`},Object(P.d)("span",{className:"title"},n),Object(P.d)("canvas",{ref:t=>{this.canvas=t},width:e,height:r}))}}F.propTypes=T,F.defaultProps=z;var J=F;e(4604);const L={className:i.a.string,width:i.a.number,height:i.a.number,seriesHeight:i.a.number,data:i.a.arrayOf(i.a.shape({key:i.a.arrayOf(i.a.string),values:i.a.arrayOf(i.a.shape({y:i.a.number}))})).isRequired,bands:i.a.number,colors:i.a.arrayOf(i.a.string),colorScale:i.a.string,mode:i.a.string,offsetX:i.a.number},U={className:"",width:800,height:600,seriesHeight:20,bands:Math.floor(H.length/2),colors:H,colorScale:"series",mode:"offset",offsetX:0};class $ extends a.a.PureComponent{render(){const{className:t,width:n,height:e,data:r,seriesHeight:a,bands:o,colors:i,colorScale:c,mode:u,offsetX:f}=this.props;let h;if("overall"===c){const t=r.reduce((t,n)=>t.concat(n.values),[]);h=s(t,t=>t.y)}return Object(P.d)("div",{className:`superset-legacy-chart-horizon ${t}`,style:{height:e}},r.map(t=>Object(P.d)(J,{key:t.key,width:n,height:a,title:Object(l.a)(t.key).join(", "),data:t.values,bands:o,colors:i,colorScale:c,mode:u,offsetX:f,yDomain:h})))}}$.propTypes=L,$.defaultProps=U;n.default=$}}]);