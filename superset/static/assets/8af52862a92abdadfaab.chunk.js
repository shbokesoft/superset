/*! For license information please see 8af52862a92abdadfaab.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[46,47],{105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var r=c(n(3538)),a=c(n(3540)),o=c(n(3542)),i=c(n(3543)),s=c(n(3544)),l=c(n(3545));function c(e){return e&&e.__esModule?e:{default:e}}t.hover=i.default,t.handleHover=i.default,t.handleActive=s.default,t.loop=l.default;var u=t.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=(0,r.default)(n),l=(0,a.default)(e,s);return(0,o.default)(l)};t.default=u},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(3388),a=n.n(r),o=n(85),i=n.n(o),s=n(48);const l={SIMPLE:"SIMPLE",SQL:"SQL"};function c(e){if(e.sqlExpression&&s.r.test(e.sqlExpression)){var t,n;const r=i()(t=e.sqlExpression).call(t,")"),o=a()(n=e.sqlExpression.substring(0,r)).call(n,"(");if(r>0&&o>0)return e.sqlExpression.substring(o+1,r)}return null}function u(e){if(e.sqlExpression&&s.r.test(e.sqlExpression)){var t;const n=i()(t=e.sqlExpression).call(t,"(");if(n>0)return e.sqlExpression.substring(0,n)}return null}class d{constructor(e){if(this.expressionType=e.expressionType||l.SIMPLE,this.expressionType===l.SIMPLE){const t=c(e);this.column=e.column||t&&{column_name:t},this.aggregate=e.aggregate||u(e),this.sqlExpression=null}else this.expressionType===l.SQL&&(this.sqlExpression=e.sqlExpression,this.column=null,this.aggregate=null);this.isNew=!!e.isNew,this.hasCustomLabel=!(!e.hasCustomLabel||!e.label),this.label=this.hasCustomLabel?e.label:this.getDefaultLabel(),this.optionName=e.optionName||`metric_${Math.random().toString(36).substring(2,15)}_${Math.random().toString(36).substring(2,15)}`}getDefaultLabel(){const e=this.translateToSql();return e.length<43?e:`${e.substring(0,40)}...`}translateToSql(){if(this.expressionType===l.SIMPLE){var e;return(this.aggregate||"")+(null!=(e=this.column)&&e.column_name?`(${this.column.column_name})`:"")}return this.expressionType===l.SQL?this.sqlExpression:""}duplicateWith(e){return new d({...this,isNew:!1,...e})}equals(e){return e.label===this.label&&e.expressionType===this.expressionType&&e.sqlExpression===this.sqlExpression&&e.aggregate===this.aggregate&&(e.column&&e.column.column_name)===(this.column&&this.column.column_name)}isValid(){return this.expressionType===l.SIMPLE?!(!this.column||!this.aggregate):this.expressionType===l.SQL&&!!this.sqlExpression}inferSqlExpressionAggregate(){return u(this)}inferSqlExpressionColumn(){return c(this)}}},124:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"j",(function(){return y})),n.d(t,"h",(function(){return _})),n.d(t,"a",(function(){return O})),n.d(t,"g",(function(){return x})),n.d(t,"i",(function(){return C})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return E}));n(52);var r=n(33),a=n.n(r),o=n(870),i=n.n(o),s=n(871),l=n.n(s),c=n(192),u=n.n(c),d=n(144),p=n.n(d),h=n(98),f=n(1258),g=n.n(f);function b(e,t,n){const r={...e[t]},a={...n};return a.id||(a.id=p.a.generate()),r[a.id]=a,{...e,[t]:r}}function v(e,t,n,r){const a={...e[t]};return a[n.id]={...a[n.id],...r},{...e,[t]:a}}function m(e,t,n,r,o="id"){var i;const s=[];return a()(i=e[t]).call(i,e=>{n[o]===e[o]?s.push({...e,...r}):s.push(e)}),{...e,[t]:s}}function y(e,t,n,r="id"){var o;const i=[];return a()(o=e[t]).call(o,e=>{n[r]!==e[r]&&i.push(e)}),{...e,[t]:i}}function _(e,t){let n;return a()(e).call(e,e=>{e.id===t&&(n=e)}),n}function O(e,t,n,r=!1){const a={...n};a.id||(a.id=p.a.generate());const o={};return o[t]=r?[a,...e[t]]:[...e[t],a],{...e,...o}}function x(e,t,n,r=!1){const o=[...n];a()(o).call(o,e=>{e.id||(e.id=p.a.generate())});const i={};return i[t]=r?[...o,...e[t]]:[...e[t],...o],{...e,...i}}function C(e=!0,t={}){const{paths:n,config:r}=t,a=h.d;return e?a(g()(n,r)):a()}function j(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;const{length:n}=e;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function E(e,t,n={ignoreUndefined:!1}){let r=e,a=t;return n.ignoreUndefined&&(r=l()(e,i.a),a=l()(t,i.a)),u()(r,a)}},1244:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n(82),a=n.n(r),o=n(322);const i="DASHBOARD_INFO_UPDATED";function s(e){return{type:i,newInfo:e}}const l=e=>async(t,n)=>{t({type:"SET_CHART_CONFIG_BEGIN",chartConfiguration:e});const{id:r,metadata:i}=n().dashboardInfo,l=Object(o.a)({method:"PUT",endpoint:`/api/v1/dashboard/${r}`});try{const n=await l({json_metadata:a()({...i,chart_configuration:e})});t(s({metadata:JSON.parse(n.result.json_metadata)})),t({type:"SET_CHART_CONFIG_COMPLETE",chartConfiguration:e})}catch(n){t({type:"SET_CHART_CONFIG_FAIL",chartConfiguration:e})}}},1245:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return null!==e&&"object"===r(e)&&Object.prototype.hasOwnProperty.call(e,"current")}n.d(t,"a",(function(){return a}))},1247:function(e,t,n){"use strict";var r=n(31),a=n.n(r),o=n(17),i=n.n(o),s=n(0),l=n.n(s),c=n(5),u=n.n(c),d=n(77),p=n(18),h=n(134),f=n(102),g=n(1);const b={dataEndpoint:u.a.string.isRequired,onChange:u.a.func.isRequired,mutator:u.a.func.isRequired,onAsyncError:u.a.func,value:u.a.oneOfType([u.a.number,u.a.arrayOf(u.a.number)]),valueRenderer:u.a.func,placeholder:u.a.string,autoSelect:u.a.bool},v={placeholder:Object(p.e)("Select ..."),onAsyncError:()=>{}};class m extends l.a.PureComponent{constructor(e){var t;super(e),this.state={isLoading:!1,options:[]},this.onChange=i()(t=this.onChange).call(t,this)}componentDidMount(){this.fetchOptions()}onChange(e){this.props.onChange(e)}fetchOptions(){this.setState({isLoading:!0});const{mutator:e,dataEndpoint:t}=this.props;return h.a.get({endpoint:t}).then(({json:t})=>{const n=e?e(t):t;this.setState({options:n,isLoading:!1}),!this.props.value&&this.props.autoSelect&&n.length>0&&this.onChange(n[0])}).catch(e=>Object(f.a)(e).then(e=>{this.props.onAsyncError(e.error||e.statusText||e),this.setState({isLoading:!1})}))}render(){return Object(g.d)(d.h,a()({placeholder:this.props.placeholder,options:this.state.options,value:this.props.value,isLoading:this.state.isLoading,onChange:this.onChange,valueRenderer:this.props.valueRenderer},this.props))}}m.propTypes=b,m.defaultProps=v,t.a=m},1251:function(e,t,n){"use strict";n.d(t,"a",(function(){return Fe})),n.d(t,"b",(function(){return Ne}));var r=n(0),a=n(98),o="dnd-core/INIT_COORDS",i="dnd-core/BEGIN_DRAG",s="dnd-core/PUBLISH_DRAG_SOURCE",l="dnd-core/HOVER",c="dnd-core/DROP",u="dnd-core/END_DRAG",d=function(e,t){return e===t};function p(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case o:case i:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case l:return p(e.clientOffset,n.clientOffset)?e:g(g({},e),{},{clientOffset:n.clientOffset});case u:case c:return v;default:return e}}var y="dnd-core/ADD_SOURCE",_="dnd-core/ADD_TARGET",O="dnd-core/REMOVE_SOURCE",x="dnd-core/REMOVE_TARGET";function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,n){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e)}function E(e,t){return e.filter((function(e){return e!==t}))}function w(e){return"object"===C(e)}function S(e,t){var n=new Map,r=function(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var a=[];return n.forEach((function(e,t){1===e&&a.push(t)})),a}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case i:return M(M({},e),{},{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case s:return M(M({},e),{},{isSourcePublic:!0});case l:return M(M({},e),{},{targetIds:n.targetIds});case x:return-1===e.targetIds.indexOf(n.targetId)?e:M(M({},e),{},{targetIds:E(e.targetIds,n.targetId)});case c:return M(M({},e),{},{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case u:return M(M({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:case _:return e+1;case O:case x:return e-1;default:return e}}var k=[],I=[];function L(e,t){return e!==k&&(e===I||void 0===t||(n=e,t.filter((function(e){return n.indexOf(e)>-1}))).length>0);var n}function F(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:break;case y:case _:case x:case O:return k;case i:case s:case u:case c:default:return I}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,a=t.prevTargetIds,o=void 0===a?[]:a,d=S(r,o),p=d.length>0||!h(r,o);if(!p)return k;var f=o[o.length-1],g=r[r.length-1];return f!==g&&(f&&d.push(f),g&&d.push(g)),d}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:F(e.dirtyHandlerIds,{type:t.type,payload:B(B({},t.payload),{},{prevTargetIds:j(e,"dragOperation.targetIds",[])})}),dragOffset:m(e.dragOffset,t),refCount:D(e.refCount,t),dragOperation:A(e.dragOperation,t),stateId:N(e.stateId)}}k.__IS_NONE__=!0,I.__IS_ALL__=!0;var q=n(75);function z(e,t){return{type:o,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var $={type:o,payload:{clientOffset:null,sourceClientOffset:null}};function G(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,a=void 0===r||r,o=n.clientOffset,s=n.getSourceClientOffset,l=e.getMonitor(),c=e.getRegistry();e.dispatch(z(o)),V(t,l,c);var u=Q(t,l);if(null!==u){var d=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");K(s),d=s(u)}e.dispatch(z(o,d));var p=c.getSource(u),h=p.beginDrag(l,u);Y(h),c.pinSource(u);var f=c.getSourceType(u);return{type:i,payload:{itemType:f,item:h,sourceId:u,clientOffset:o||null,sourceClientOffset:d||null,isSourcePublic:!!a}}}e.dispatch($)}}function V(e,t,n){Object(q.a)(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){Object(q.a)(n.getSource(e),"Expected sourceIds to be registered.")}))}function K(e){Object(q.a)("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}function Y(e){Object(q.a)(w(e),"Item must be an object.")}function Q(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function X(e){return function(){if(e.getMonitor().isDragging())return{type:s}}}function J(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function Z(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clientOffset;ee(t);var a=t.slice(0),o=e.getMonitor(),i=e.getRegistry();te(a,o,i);var s=o.getItemType();return ne(a,i,s),re(a,o,i),{type:l,payload:{targetIds:a,clientOffset:r||null}}}}function ee(e){Object(q.a)(Array.isArray(e),"Expected targetIds to be an array.")}function te(e,t,n){Object(q.a)(t.isDragging(),"Cannot call hover while not dragging."),Object(q.a)(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var a=e[r];Object(q.a)(e.lastIndexOf(a)===r,"Expected targetIds to be unique in the passed array.");var o=n.getTarget(a);Object(q.a)(o,"Expected targetIds to be registered.")}}function ne(e,t,n){for(var r=e.length-1;r>=0;r--){var a=e[r];J(t.getTargetType(a),n)||e.splice(r,1)}}function re(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();le(n);var a=ue(n);a.forEach((function(a,o){var i=ce(a,o,r,n),s={type:c,payload:{dropResult:oe(oe({},t),i)}};e.dispatch(s)}))}}function le(e){Object(q.a)(e.isDragging(),"Cannot call drop while not dragging."),Object(q.a)(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function ce(e,t,n,r){var a=n.getTarget(e),o=a?a.drop(r,e):void 0;return function(e){Object(q.a)(void 0===e||w(e),"Drop result must either be an object or undefined.")}(o),void 0===o&&(o=0===t?{}:r.getDropResult()),o}function ue(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function de(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){Object(q.a)(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:u}}}function pe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fe,ge=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=n}var t,n,r;return t=e,(n=[{key:"subscribeToStateChange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0},r=n.handlerIds;Object(q.a)("function"==typeof e,"listener must be a function."),Object(q.a)(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,o=function(){var n=t.store.getState(),o=n.stateId;try{o===a||o===a+1&&!L(n.dirtyHandlerIds,r)||e()}finally{a=o}};return this.store.subscribe(o)}},{key:"subscribeToOffsetChange",value:function(e){var t=this;Object(q.a)("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return Object(q.a)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return Object(q.a)(t,"Expected to find a valid target."),!(!this.isDragging()||this.didDrop())&&J(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return Object(q.a)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;var n=t.shallow;if(!this.isDragging())return!1;var r=this.registry.getTargetType(e),a=this.getItemType();if(a&&!J(r,a))return!1;var o=this.getTargetIds();if(!o.length)return!1;var i=o.indexOf(e);return n?i===o.length-1:i>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,r=e.clientOffset,a=e.initialClientOffset,o=e.initialSourceClientOffset,r&&a&&o?pe((n=o,{x:(t=r).x+n.x,y:t.y+n.y}),a):null;var e,t,n,r,a,o}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,n=e.initialClientOffset,t&&n?pe(t,n):null;var e,t,n}}])&&he(t.prototype,n),r&&he(t,r),e}(),be=0;function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){t&&Array.isArray(e)?e.forEach((function(e){return me(e,!1)})):Object(q.a)("string"==typeof e||"symbol"===ve(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(fe||(fe={}));var ye=n(1692),_e=[],Oe=[],xe=ye.a.makeRequestCallFromTimer((function(){if(Oe.length)throw Oe.shift()}));function Ce(e){var t;(t=_e.length?_e.pop():new je).task=e,Object(ye.a)(t)}var je=function(){function e(){}return e.prototype.call=function(){try{this.task.call()}catch(e){Ce.onerror?Ce.onerror(e):(Oe.push(e),xe())}finally{this.task=null,_e[_e.length]=this}},e}();function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e){var t=(be++).toString();switch(e){case fe.SOURCE:return"S".concat(t);case fe.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function Me(e){switch(e[0]){case"S":return fe.SOURCE;case"T":return fe.TARGET;default:Object(q.a)(!1,"Cannot parse handler ID: ".concat(e))}}function Pe(e,t){var n=e.entries(),r=!1;do{var a=n.next(),o=a.done;if(we(a.value,2)[1]===t)return!0;r=!!o}while(!r);return!1}var Re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}var t,n,r;return t=e,(n=[{key:"addSource",value:function(e,t){me(e),function(e){Object(q.a)("function"==typeof e.canDrag,"Expected canDrag to be a function."),Object(q.a)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Object(q.a)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(fe.SOURCE,e,t);return this.store.dispatch(function(e){return{type:y,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){me(e,!0),function(e){Object(q.a)("function"==typeof e.canDrop,"Expected canDrop to be a function."),Object(q.a)("function"==typeof e.hover,"Expected hover to be a function."),Object(q.a)("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(fe.TARGET,e,t);return this.store.dispatch(function(e){return{type:_,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return Pe(this.dragSources,e)||Pe(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(q.a)(this.isSourceId(e),"Expected a valid source ID.");var n=t&&e===this.pinnedSourceId,r=n?this.pinnedSource:this.dragSources.get(e);return r}},{key:"getTarget",value:function(e){return Object(q.a)(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return Object(q.a)(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return Object(q.a)(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return Me(e)===fe.SOURCE}},{key:"isTargetId",value:function(e){return Me(e)===fe.TARGET}},{key:"removeSource",value:function(e){var t=this;Object(q.a)(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:O,payload:{sourceId:e}}}(e)),Ce((function(){t.dragSources.delete(e),t.types.delete(e)}))}},{key:"removeTarget",value:function(e){Object(q.a)(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:x,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);Object(q.a)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){Object(q.a)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=Te(e);return this.types.set(r,t),e===fe.SOURCE?this.dragSources.set(r,n):e===fe.TARGET&&this.dropTargets.set(r,n),r}}])&&Ee(t.prototype,n),r&&Ee(t,r),e}();function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Object(a.e)(H,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var Ie=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ae(this,e),this.isSetUp=!1,this.handleRefCountChange=function(){var e=t.store.getState().refCount>0;t.backend&&(e&&!t.isSetUp?(t.backend.setup(),t.isSetUp=!0):!e&&t.isSetUp&&(t.backend.teardown(),t.isSetUp=!1))};var r=ke(n);this.store=r,this.monitor=new ge(r,new Re(r)),r.subscribe(this.handleRefCountChange)}var t,n,r;return t=e,(n=[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch,n=function(e){return{beginDrag:G(e),publishDragSource:X(e),hover:Z(e),drop:se(e),endDrag:de(e)}}(this);return Object.keys(n).reduce((function(r,a){var o,i=n[a];return r[a]=(o=i,function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=o.apply(e,r);void 0!==i&&t(i)}),r}),{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}])&&De(t.prototype,n),r&&De(t,r),e}();function Le(e,t,n,r){var a=new Ie(r),o=e(a,t,n);return a.receiveBackend(o),a}var Fe=r.createContext({dragDropManager:void 0});function Ne(e,t,n,r){return{dragDropManager:Le(e,t,n,r)}}},1255:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(18),a=n(317),o=n(375),i=n(285),s=n(168);const l={id:0,chartAlert:null,chartStatus:"loading",chartStackTrace:null,chartUpdateEndTime:null,chartUpdateStartTime:0,latestQueryFormData:{},sliceFormData:null,queryController:null,queriesResponse:null,triggerQuery:!0,lastRendered:0};function c(e={},t){const n={[s.ADD_CHART]:()=>({...l,...t.chart}),[s.CHART_UPDATE_SUCCEEDED]:e=>({...e,chartStatus:"success",chartAlert:null,queriesResponse:t.queriesResponse,chartUpdateEndTime:Object(i.e)()}),[s.CHART_UPDATE_STARTED]:e=>({...e,chartStatus:"loading",chartStackTrace:null,chartAlert:null,chartUpdateEndTime:null,chartUpdateStartTime:Object(i.e)(),queryController:t.queryController}),[s.CHART_UPDATE_STOPPED]:e=>({...e,chartStatus:"stopped",chartAlert:Object(r.e)("Updating chart was stopped"),chartUpdateEndTime:Object(i.e)()}),[s.CHART_RENDERING_SUCCEEDED]:e=>({...e,chartStatus:"rendered",chartUpdateEndTime:Object(i.e)()}),[s.CHART_RENDERING_FAILED]:e=>({...e,chartStatus:"failed",chartStackTrace:t.stackTrace,chartAlert:Object(r.e)("An error occurred while rendering the visualization: %s",t.error)}),[s.CHART_UPDATE_FAILED](e){var n,a,o,s;return{...e,chartStatus:"failed",chartAlert:t.queriesResponse?null==(n=t.queriesResponse)?void 0:null==(a=n[0])?void 0:a.error:Object(r.e)("Network error."),chartUpdateEndTime:Object(i.e)(),queriesResponse:t.queriesResponse,chartStackTrace:t.queriesResponse?null==(o=t.queriesResponse)?void 0:null==(s=o[0])?void 0:s.stacktrace:null}},[s.DYNAMIC_PLUGIN_CONTROLS_READY]:e=>({...e,sliceFormData:Object(o.e)(t.controlsState)}),[s.TRIGGER_QUERY]:e=>({...e,triggerQuery:t.value,chartStatus:"loading"}),[s.RENDER_TRIGGERED]:e=>({...e,lastRendered:t.value}),[s.UPDATE_QUERY_FORM_DATA]:e=>({...e,latestQueryFormData:t.value}),[s.ANNOTATION_QUERY_STARTED](e){e.annotationQuery&&e.annotationQuery[t.annotation.name]&&e.annotationQuery[t.annotation.name].abort();const n={...e.annotationQuery,[t.annotation.name]:t.queryController};return{...e,annotationQuery:n}},[s.ANNOTATION_QUERY_SUCCESS](e){const n={...e.annotationData,[t.annotation.name]:t.queryResponse.data},r={...e.annotationError};delete r[t.annotation.name];const a={...e.annotationQuery};return delete a[t.annotation.name],{...e,annotationData:n,annotationError:r,annotationQuery:a}},[s.ANNOTATION_QUERY_FAILED](e){const n={...e.annotationData};delete n[t.annotation.name];const a={...e.annotationError,[t.annotation.name]:t.queryResponse?t.queryResponse.error:Object(r.e)("Network error.")},o={...e.annotationQuery};return delete o[t.annotation.name],{...e,annotationData:n,annotationError:a,annotationQuery:o}}};if(t.type===s.REMOVE_CHART)return delete e[t.key],e;if(t.type===s.UPDATE_CHART_ID){const{newId:n,key:r}=t;return e[n]={...e[r],id:n},delete e[r],e}return t.type===a.a?{...t.data.charts}:t.type in n?{...e,[t.key]:n[t.type](e[t.key])}:e}},1256:function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"==typeof a?a(n,r,e):t(a)}}}}var a=r();a.withExtraArgument=r,t.a=a},1257:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(52);var r=n(39),a=n.n(r),o=n(87),i=n.n(o),s=n(69),l=n.n(s),c=n(109);function u(e=[],t){switch(t.type){case c.a:{const{payload:n}=t,r=l()(e).call(e);return n.noDuplicate&&i()(r).call(r,e=>e.text===n.text)?e:[n,...e]}case c.b:{var n;const{payload:{id:r}}=t;return a()(n=[...e]).call(n,e=>e.id!==r)}default:return e}}},1258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=r({key:"redux",merge:i.default,slicer:o.default,serialize:JSON.stringify,deserialize:JSON.parse},t),a=n.key,s=n.merge,l=n.slicer,c=n.serialize,u=n.deserialize;return function(t){return function(n,r,o){"function"==typeof r&&void 0===o&&(o=r,r=void 0);var i=void 0,d=void 0;try{i=u(localStorage.getItem(a)),d=s(r,i)}catch(e){console.warn("Failed to retrieve initialize state from localStorage:",e)}var p=t(n,d,o),h=l(e);return p.subscribe((function(){var e=p.getState(),t=h(e);try{localStorage.setItem(a,c(t))}catch(e){console.warn("Unable to persist state to localStorage:",e)}})),p}}};var o=a(n(1486)),i=a(n(1489));e.exports=t.default},1259:function(e,t,n){"use strict";n.d(t,"a",(function(){return Mr}));var r=n(31),a=n.n(r),o=n(17),i=n.n(o),s=n(0),l=n.n(s),c=n(759),u=n(466),d=(n(52),n(39)),p=n.n(d),h=n(14),f=n.n(h),g=n(41),b=n.n(g),v=n(50),m=n.n(v),y=n(5),_=n.n(y),O=n(20),x=n(136),C=n(18),j=n(812),E=n(173),w=n(232),S=n(819),T=n(145),M=n(168),P=n(65),R=n(1);function A(e){const{selectable:t,children:n,...r}=e,o=Object(P.i)(),i={"&.ant-list-item":{padding:`${o.gridUnit+2}px ${3*o.gridUnit}px`,":first-of-type":{borderTopLeftRadius:o.gridUnit,borderTopRightRadius:o.gridUnit},":last-of-type":{borderBottomLeftRadius:o.gridUnit,borderBottomRightRadius:o.gridUnit}}};return t&&(i["&:hover"]={cursor:"pointer",backgroundColor:o.colors.grayscale.light4}),Object(R.d)(O.n.Item,a()({},r,{css:i}),n)}const D=Object(S.a)(()=>n.e(227).then(n.bind(null,4741)),()=>Object(R.d)("div",{style:{width:450,height:368}})),k={colorScheme:_.a.string.isRequired,annotationError:_.a.object,annotationQuery:_.a.object,vizType:_.a.string,validationErrors:_.a.array,name:_.a.string.isRequired,actions:_.a.object,value:_.a.arrayOf(_.a.object),onChange:_.a.func,refreshAnnotationData:_.a.func};class I extends l.a.PureComponent{constructor(e){var t,n,r,a;super(e),this.state={popoverVisible:{},addedAnnotationIndex:null,popoverClear:!1},this.addAnnotationLayer=i()(t=this.addAnnotationLayer).call(t,this),this.removeAnnotationLayer=i()(n=this.removeAnnotationLayer).call(n,this),this.handleVisibleChange=i()(r=this.handleVisibleChange).call(r,this),this.handlePopoverClear=i()(a=this.handlePopoverClear).call(a,this)}componentDidMount(){D.preload()}UNSAFE_componentWillReceiveProps(e){const{name:t,annotationError:n,validationErrors:r,value:a}=e;m()(n).length&&!r.length&&this.props.actions.setControlValue(t,a,m()(n)),!m()(n).length&&r.length&&this.props.actions.setControlValue(t,a,[])}addAnnotationLayer(e,t){let n=this.props.value;b()(n).call(n,e)?n=f()(n).call(n,n=>n===e?t:n):(n=[...n,t],this.setState({addedAnnotationIndex:n.length-1})),this.props.refreshAnnotationData(t),this.props.onChange(n)}handleVisibleChange(e,t){this.state.popoverClear?this.handlePopoverClear(!1):this.setState(n=>({popoverVisible:{...n.popoverVisible,[t]:e}}))}handlePopoverClear(e){this.setState({popoverClear:e})}removeAnnotationLayer(e){var t;const n=p()(t=this.props.value).call(t,t=>t!==e);this.props.onChange(n)}renderPopover(e,t,n){const r=(null==t?void 0:t.name)||"_new";return Object(R.d)("div",{id:`annotation-pop-${r}`},Object(R.d)(D,a()({},t,{error:n,colorScheme:this.props.colorScheme,vizType:this.props.vizType,addAnnotationLayer:e=>this.addAnnotationLayer(t,e),removeAnnotationLayer:()=>this.removeAnnotationLayer(t),close:()=>{this.handleVisibleChange(!1,e),this.setState({addedAnnotationIndex:null})},onPopoverClear:this.handlePopoverClear})))}renderInfo(e){const{annotationError:t,annotationQuery:n}=this.props;return n[e.name]?Object(R.d)("i",{className:"fa fa-refresh",style:{color:"orange"},"aria-hidden":!0}):t[e.name]?Object(R.d)(E.a,{label:"validation-errors",bsStyle:"danger",tooltip:t[e.name]}):e.show?"":Object(R.d)("span",{style:{color:"red"}}," Hidden ")}render(){var e;const{addedAnnotationIndex:t}=this.state,n=this.props.value[t],r=f()(e=this.props.value).call(e,(e,t)=>Object(R.d)(w.a,{key:t,trigger:"click",placement:"right",title:Object(C.e)("Edit annotation layer"),css:e=>({"&:hover":{cursor:"pointer",backgroundColor:e.colors.grayscale.light4}}),content:this.renderPopover(t,e,this.props.annotationError[e.name]),visible:this.state.popoverVisible[t],onVisibleChange:e=>this.handleVisibleChange(e,t)},Object(R.d)(A,{selectable:!0},Object(R.d)("span",null,e.name),Object(R.d)("span",{style:{float:"right"}},this.renderInfo(e)))));return Object(R.d)("div",null,Object(R.d)(O.n,{bordered:!0,css:e=>({borderRadius:e.gridUnit})},r,Object(R.d)(w.a,{trigger:"click",placement:"right",content:this.renderPopover("add",n),title:Object(C.e)("Add annotation layer"),visible:this.state.popoverVisible.add,destroyTooltipOnHide:!0,onVisibleChange:e=>this.handleVisibleChange(e,"add")},Object(R.d)(A,{selectable:!0},Object(R.d)("i",{className:"fa fa-plus"})," ","  ",Object(C.e)("Add annotation layer")))))}}I.propTypes=k,I.defaultProps={vizType:"",value:[],annotationError:{},annotationQuery:{},onChange:()=>{}};const L=Object(j.e)(I);var F=Object(x.b)((function({charts:e,explore:t}){var n,r;const a=e[Object(T.f)(t)]||e[0]||{};return{colorScheme:null==(n=t.controls)?void 0:null==(r=n.color_scheme)?void 0:r.value,annotationError:a.annotationError,annotationQuery:a.annotationQuery,vizType:t.controls.viz_type.value}}),(function(e){return{refreshAnnotationData:t=>e(Object(M.runAnnotationQuery)(t))}}))(L),N=n(861),U=n.n(N),B=n(193),W=n.n(B),H=n(118),q=n.n(H),z=n(192),$=n.n(z),G=n(120);const V={onChange:_.a.func,value:_.a.array},K=P.g.div`
  display: flex;
`,Y=Object(P.g)(O.m)`
  flex: 1;
  margin-right: ${({theme:e})=>e.gridUnit}px;
`,Q=Object(P.g)(O.m)`
  flex: 1;
  margin-left: ${({theme:e})=>e.gridUnit}px;
`;class X extends l.a.Component{constructor(e){var t,n,r,a;super(e),this.state={minMax:[W()(this.props.value[0])?"":e.value[0],W()(this.props.value[1])?"":e.value[1]]},this.onChange=q()(i()(t=this.onChange).call(t,this),300),this.onMinChange=i()(n=this.onMinChange).call(n,this),this.onMaxChange=i()(r=this.onMaxChange).call(r,this),this.update=i()(a=this.update).call(a,this)}componentDidUpdate(e){$()(e.value,this.props.value)||this.update()}update(){this.setState({minMax:[W()(this.props.value[0])?"":this.props.value[0],W()(this.props.value[1])?"":this.props.value[1]]})}onMinChange(e){this.setState(t=>({minMax:[e,t.minMax[1]]}),this.onChange)}onMaxChange(e){this.setState(t=>({minMax:[t.minMax[0],e]}),this.onChange)}onChange(){const e=this.state.minMax,t=U()(e[0])||null,n=U()(e[1])||null;this.props.onChange([t,n])}render(){return Object(R.d)("div",null,Object(R.d)(G.a,this.props),Object(R.d)(K,null,Object(R.d)(Y,{placeholder:Object(C.e)("Min"),onChange:this.onMinChange,value:this.state.minMax[0]}),Object(R.d)(Q,{placeholder:Object(C.e)("Max"),onChange:this.onMaxChange,value:this.state.minMax[1]})))}}X.propTypes=V,X.defaultProps={onChange:()=>{},value:[null,null]};var J=n(555),Z=n(94),ee=n.n(Z),te=n(89),ne=n.n(te),re=n(144),ae=n.n(re),oe=n(428),ie=n(74),se=n(159);const le={name:_.a.string.isRequired,label:_.a.string,description:_.a.string,placeholder:_.a.string,addTooltip:_.a.string,itemGenerator:_.a.func,keyAccessor:_.a.func,onChange:_.a.func,value:_.a.oneOfType([_.a.array]),isFloat:_.a.bool,isInt:_.a.bool,controlName:_.a.string.isRequired},ce={label:null,description:null,onChange:()=>{},placeholder:Object(C.e)("Empty collection"),itemGenerator:()=>({key:ae.a.generate()}),keyAccessor:e=>e.key,value:[],addTooltip:Object(C.e)("Add an item")},ue=Object(oe.b)(A),de=Object(oe.a)(O.n),pe=Object(oe.c)(()=>Object(R.d)("i",{role:"img","aria-label":"drag",className:"fa fa-bars text-primary",style:{cursor:"ns-resize"}}));var he={name:"11g6mpt",styles:"justify-content:flex-start"};class fe extends l.a.Component{constructor(e){var t;super(e),this.onAdd=i()(t=this.onAdd).call(t,this)}onChange(e,t){ne()(this.props.value[e],t),this.props.onChange(this.props.value)}onAdd(){var e;this.props.onChange(ee()(e=this.props.value).call(e,[this.props.itemGenerator()]))}onSortEnd({oldIndex:e,newIndex:t}){this.props.onChange(Object(oe.d)(this.props.value,e,t))}removeItem(e){var t;this.props.onChange(p()(t=this.props.value).call(t,(t,n)=>e!==n))}renderList(){var e,t;if(0===this.props.value.length)return Object(R.d)("div",{className:"text-muted"},this.props.placeholder);const n=Tr[this.props.controlName];return Object(R.d)(de,{useDragHandle:!0,lockAxis:"y",onSortEnd:i()(e=this.onSortEnd).call(e,this),bordered:!0,css:e=>({borderRadius:e.gridUnit})},f()(t=this.props.value).call(t,(e,t)=>{var r,o;const{label:s,...l}=this.props;return Object(R.d)(ue,{className:"clearfix",css:he,key:this.props.keyAccessor(e),index:t},Object(R.d)(pe,null),Object(R.d)("div",{css:e=>({flex:1,marginLeft:2*e.gridUnit,marginRight:2*e.gridUnit})},Object(R.d)(n,a()({},l,e,{onChange:i()(r=this.onChange).call(r,this,t)}))),Object(R.d)(E.a,{icon:"times",label:"remove-item",tooltip:Object(C.e)("Remove item"),bsStyle:"primary",onClick:i()(o=this.removeItem).call(o,this,t)}))}))}render(){const{theme:e}=this.props;return Object(R.d)("div",{className:"CollectionControl"},Object(R.d)(se.g,null,Object(R.d)(G.a,this.props),Object(R.d)(se.b,{onClick:this.onAdd},Object(R.d)(ie.a,{name:"plus-large",width:3*e.gridUnit,height:3*e.gridUnit,color:e.colors.grayscale.light5}))),this.renderList())}}fe.propTypes=le,fe.defaultProps=ce;var ge=Object(j.e)(fe),be=n(33),ve=n.n(be),me=n(1438);const ye={onChange:_.a.func,value:_.a.object,colorScheme:_.a.string,colorNamespace:_.a.string},_e={onChange:()=>{},value:{},colorScheme:void 0,colorNamespace:void 0};class Oe extends l.a.PureComponent{constructor(e){var t;super(e),ve()(t=m()(this.props.value)).call(t,e=>{me.b.getScale(this.props.colorScheme,this.props.colorNamespace).setColor(e,this.props.value[e])})}render(){return null}}Oe.propTypes=ye,Oe.defaultProps=_e;var xe=n(1823),Ce=n(492);const je={onChange:_.a.func,value:_.a.object},Ee={position:"absolute",width:"50px",height:"20px",top:"0px",left:"0px",right:"0px",bottom:"0px"},we={swatch:{width:"50px",height:"20px",position:"relative",padding:"5px",borderRadius:"1px",display:"inline-block",cursor:"pointer",boxShadow:"rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset, rgba(0, 0, 0, 0.25) 0px 0px 4px inset"},color:{...Ee,borderRadius:"2px"},checkboard:{...Ee,background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==") left center'}};class Se extends l.a.Component{constructor(e){var t;super(e),this.onChange=i()(t=this.onChange).call(t,this)}onChange(e){this.props.onChange(e.rgb)}renderPopover(){var e;const t=p()(e=Object(Ce.a)().get().colors).call(e,(e,t)=>t<7);return Object(R.d)("div",{id:"filter-popover",className:"color-popover"},Object(R.d)(xe.SketchPicker,{color:this.props.value,onChange:this.onChange,presetColors:t}))}render(){const e=this.props.value||{r:0,g:0,b:0,a:0},t={...we.color,background:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`};return Object(R.d)("div",null,Object(R.d)(G.a,this.props),Object(R.d)(w.a,{trigger:"click",placement:"right",content:this.renderPopover()},Object(R.d)("div",{style:we.swatch},Object(R.d)("div",{style:we.checkboard}),Object(R.d)("div",{style:t}))))}}Se.propTypes=je,Se.defaultProps={onChange:()=>{}};var Te,Me=n(1494),Pe=n(68),Re=n(103),Ae=n(182),De=n.n(Ae),ke=n(326),Ie=n(134),Le=n(514),Fe=n(163),Ne=n(62),Ue=n(826),Be=n(102),We=n(211),He=n(191);const qe=Object(C.e)("Warning! Changing the dataset may break the chart if the metadata does not exist."),ze=Object(C.e)("Changing the dataset may break the chart if the chart relies on columns or metadata that does not exist in the target dataset"),$e=P.g.div`
  .btn-container {
    display: flex;
    justify-content: flex-end;
    padding: 0px 15px;
    margin: 10px 0 0 0;
  }

  .confirm-modal-container {
    margin: 9px;
  }
`,Ge=P.g.span`
  cursor: pointer;
  color: ${({theme:e})=>e.colors.primary.dark1};
  &: hover {
    color: ${({theme:e})=>e.colors.primary.dark2};
  }
`,Ve=f()(Te=["name","type","schema","connection","creator"]).call(Te,e=>({accessor:e,Header:e})),Ke={pageIndex:0,pageSize:20,filters:[],sortBy:[{id:"changed_on_delta_humanized"}]};var Ye=Object(He.a)(({addDangerToast:e,addSuccessToast:t,onChange:n,onDatasourceSave:r,onHide:a,show:o})=>{const[i,c]=Object(s.useState)(void 0),[u,d]=Object(s.useState)(!1),[p,h]=Object(s.useState)(),g=Object(s.useRef)(null),{state:{loading:b,resourceCollection:v},fetchData:m}=Object(Ue.h)("dataset",Object(C.e)("dataset"),e),y=Object(s.useCallback)(e=>{d(!0),h(e)},[]);Object(T.n)(()=>{m({...Ke,...i&&{filters:[{id:"table_name",operator:"ct",value:i}]}})},300,[i]),Object(s.useEffect)(()=>{o&&(async()=>{De()(()=>{var e;return null==g?void 0:null==(e=g.current)?void 0:e.focus()},200)})()},[e,m,n,r,a,y,o]);return Object(R.d)(Fe.b,{show:o,onHide:a,responsive:!0,title:Object(C.e)("Change dataset"),width:u?"432px":"",height:u?"auto":"480px",hideFooter:!u,footer:Object(R.d)(l.a.Fragment,null,u&&Object(R.d)($e,null,Object(R.d)("div",{className:"btn-container"},Object(R.d)(Ne.a,{onClick:()=>{d(!1)}},"Cancel"),Object(R.d)(Ne.a,{className:"proceed-btn",buttonStyle:"primary",onClick:()=>{Ie.a.get({endpoint:`/datasource/get/${null==p?void 0:p.type}/${null==p?void 0:p.id}/`}).then(({json:e})=>{r(e),n(`${null==p?void 0:p.id}__table`)}).catch(t=>{Object(Be.a)(t).then(({error:t,message:n})=>{const r=t?t.error||t.statusText||t:n;e(r)})}),a(),t("Successfully changed dataset!")}},"Proceed"))))},Object(R.d)(l.a.Fragment,null,!u&&Object(R.d)(l.a.Fragment,null,Object(R.d)(ke.a,{roomBelow:!0,type:"warning",css:e=>({marginBottom:4*e.gridUnit}),message:Object(R.d)(l.a.Fragment,null,Object(R.d)("strong",null,Object(C.e)("Warning!"))," ",ze)}),Object(R.d)(O.l,{ref:g,type:"text",value:i,placeholder:Object(C.e)("Search / Filter"),onChange:e=>{var t;const n=null!=(t=e.target.value)?t:"";c(n)}}),b&&Object(R.d)(We.a,null),!b&&Object(R.d)(Le.b,{columns:Ve,data:f()(v).call(v,e=>({rawName:e.table_name,connection:e.database.database_name,schema:e.schema,name:Object(R.d)(Ge,{role:"button",tabIndex:0,onClick:()=>y({type:"table",...e})},e.table_name),type:e.kind})),pageSize:20,className:"table-condensed",emptyWrapperType:Le.a.Small,scrollTable:!0})),u&&Object(R.d)(l.a.Fragment,null,qe)))}),Qe=n(1824),Xe=n(217),Je=n(1405);const Ze={actions:_.a.object.isRequired,onChange:_.a.func,value:_.a.string,datasource:_.a.object.isRequired,isEditable:_.a.bool,onDatasourceSave:_.a.func},et=P.g.div`
  .data-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    padding: ${({theme:e})=>2*e.gridUnit}px;
  }
  .error-alert {
    margin: ${({theme:e})=>2*e.gridUnit}px;
  }
  .ant-dropdown-trigger {
    margin-left: ${({theme:e})=>2*e.gridUnit}px;
    box-shadow: none;
    &:active {
      box-shadow: none;
    }
  }
  .btn-group .open .dropdown-toggle {
    box-shadow: none;
    &.button-default {
      background: none;
    }
  }
  i.angle {
    color: ${({theme:e})=>e.colors.primary.base};
  }
  svg.datasource-modal-trigger {
    color: ${({theme:e})=>e.colors.primary.base};
    cursor: pointer;
  }
  .title-select {
    flex: 1 1 100%;
    display: inline-block;
    background-color: ${({theme:e})=>e.colors.grayscale.light3};
    padding: ${({theme:e})=>2*e.gridUnit}px;
    border-radius: ${({theme:e})=>e.borderRadius}px;
    text-align: center;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }
  .dataset-svg {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    flex: none;
  }
`;class tt extends l.a.PureComponent{constructor(e){var t,n,r,a,o;super(e),this.state={showEditDatasourceModal:!1,showChangeDatasourceModal:!1},this.onDatasourceSave=i()(t=this.onDatasourceSave).call(t,this),this.toggleChangeDatasourceModal=i()(n=this.toggleChangeDatasourceModal).call(n,this),this.toggleEditDatasourceModal=i()(r=this.toggleEditDatasourceModal).call(r,this),this.toggleShowDatasource=i()(a=this.toggleShowDatasource).call(a,this),this.handleMenuItemClick=i()(o=this.handleMenuItemClick).call(o,this)}onDatasourceSave(e){this.props.actions.setDatasource(e),this.props.onDatasourceSave&&this.props.onDatasourceSave(e)}toggleShowDatasource(){this.setState(({showDatasource:e})=>({showDatasource:!e}))}toggleChangeDatasourceModal(){this.setState(({showChangeDatasourceModal:e})=>({showChangeDatasourceModal:!e}))}toggleEditDatasourceModal(){this.setState(({showEditDatasourceModal:e})=>({showEditDatasourceModal:!e}))}handleMenuItemClick({key:e}){if("change_dataset"===e&&this.toggleChangeDatasourceModal(),"edit_dataset"===e&&this.toggleEditDatasourceModal(),"view_in_sql_lab"===e){const{datasource:e}=this.props,t={datasourceKey:`${e.id}__${e.type}`,sql:e.sql};Object(T.l)("/superset/sqllab/",t)}}render(){var e;const{showChangeDatasourceModal:t,showEditDatasourceModal:n}=this.state,{datasource:r,onChange:a}=this.props,o=null==r.id,i="table"===r.type,s=Object(R.d)(O.p,{onClick:this.handleMenuItemClick},this.props.isEditable&&Object(R.d)(O.p.Item,{key:"edit_dataset"},Object(C.e)("Edit dataset")),Object(R.d)(O.p.Item,{key:"change_dataset"},Object(C.e)("Change dataset")),i&&Object(R.d)(O.p.Item,{key:"view_in_sql_lab"},Object(C.e)("View in SQL Lab"))),{health_check_message:c}=r;let u={};if(null!=r&&r.extra)try{u=JSON.parse(null==r?void 0:r.extra)}catch{}return Object(R.d)(et,{className:"DatasourceControl"},Object(R.d)("div",{className:"data-container"},Object(R.d)(ie.a,{name:"dataset-physical",className:"dataset-svg"}),!o&&r.name.length>25?Object(R.d)(Pe.a,{title:r.name},Object(R.d)("span",{className:"title-select"},r.name)):Object(R.d)("span",{title:r.name,className:"title-select"},r.name),c&&Object(R.d)(Pe.a,{title:c},Object(R.d)(Re.a.AlertSolid,{iconColor:P.h.colors.warning.base})),(null==(e=u)?void 0:e.warning_markdown)&&Object(R.d)(Je.a,{warningMarkdown:u.warning_markdown,size:30}),Object(R.d)(O.i,{overlay:s,trigger:["click"]},Object(R.d)(Pe.a,{title:Object(C.e)("More dataset related options")},Object(R.d)(ie.a,{className:"datasource-modal-trigger",name:"more-horiz"})))),o&&Object(R.d)("div",{className:"error-alert"},Object(R.d)(Xe.a,{level:"warning",title:Object(C.e)("Missing dataset"),source:"explore",subtitle:Object(R.d)(l.a.Fragment,null,Object(R.d)("p",null,Object(C.e)("The dataset linked to this chart may have been deleted.")),Object(R.d)("p",null,Object(R.d)(Ne.a,{buttonStyle:"primary",onClick:()=>this.handleMenuItemClick({key:"change_dataset"})},Object(C.e)("Change dataset"))))})),n&&Object(R.d)(Qe.a,{datasource:r,show:n,onDatasourceSave:this.onDatasourceSave,onHide:this.toggleEditDatasourceModal}),t&&Object(R.d)(Ye,{onDatasourceSave:this.onDatasourceSave,onHide:this.toggleChangeDatasourceModal,show:t,onChange:a}))}}tt.propTypes=Ze,tt.defaultProps={onChange:()=>{},onDatasourceSave:null,value:null,isEditable:!0};var nt=tt,rt=n(1302),at=n(184),ot=n(216),it=n(544),st=n(85),lt=n.n(st),ct=n(3387),ut=n.n(ct),dt=n(73),pt=n.n(dt),ht=n(296),ft=n.n(ht),gt=n(87),bt=n.n(gt),vt=n(288),mt=n.n(vt),yt=n(289),_t=n.n(yt),Ot=n(76),xt=n.n(Ot),Ct=n(71),jt=n.n(Ct),Et=n(48),wt=n(332),St=n(218),Tt=n(411),Mt=_.a.shape({aggregate_name:_.a.string.isRequired});const Pt={aggregate:Mt,showType:_.a.bool};function Rt({aggregate:e,showType:t}){return Object(R.d)("div",null,t&&Object(R.d)(Tt.a,{type:"aggregate"}),Object(R.d)("span",{className:"m-r-5 option-label"},e.aggregate_name))}Rt.propTypes=Pt;var At=n(318);const Dt={option:_.a.oneOfType([wt.a,At.a,Mt]).isRequired,addWarningToast:_.a.func.isRequired};function kt({option:e,addWarningToast:t}){return e.metric_name?Object(R.d)(St.b,{metric:e,showType:!0}):e.column_name?Object(R.d)(St.a,{column:e,showType:!0}):e.aggregate_name?Object(R.d)(Rt,{aggregate:e,showType:!0}):(t("You must supply either a saved metric, column or aggregate to MetricDefinitionOption"),null)}kt.propTypes=Dt;var It=Object(He.a)(kt),Lt=n(229),Ft=n(122);const Nt={title:_.a.shape({label:_.a.string,hasCustomLabel:_.a.bool}),onChange:_.a.func.isRequired,isEditDisabled:_.a.bool};class Ut extends l.a.Component{constructor(e){var t,n,r,a,o;super(e),this.onMouseOver=i()(t=this.onMouseOver).call(t,this),this.onMouseOut=i()(n=this.onMouseOut).call(n,this),this.onClick=i()(r=this.onClick).call(r,this),this.onBlur=i()(a=this.onBlur).call(a,this),this.onInputBlur=i()(o=this.onInputBlur).call(o,this),this.state={isHovered:!1,isEditMode:!1}}onMouseOver(){this.setState({isHovered:!0})}onMouseOut(){this.setState({isHovered:!1})}onClick(){this.setState({isEditMode:!0})}onBlur(){this.setState({isEditMode:!1})}onInputBlur(e){""===e.target.value&&this.props.onChange(e),this.onBlur()}render(){const{title:e,onChange:t,isEditDisabled:n}=this.props,r=Object(C.e)("My metric");return n?Object(R.d)("span",null,e.label||r):this.state.isEditMode?Object(R.d)(O.l,{className:"metric-edit-popover-label-input",type:"text",placeholder:e.label,value:e.hasCustomLabel?e.label:"",autoFocus:!0,onChange:t,onBlur:this.onInputBlur}):Object(R.d)(Pe.a,{placement:"top",title:"Click to edit label"},Object(R.d)("span",{className:"AdhocMetricEditPopoverTitle inline-editable",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick,onBlur:this.onBlur,role:"button",tabIndex:0},e.label||r," ",Object(R.d)("i",{className:"fa fa-pencil",style:{color:this.state.isHovered?"black":"grey"}})))}}Ut.propTypes=Nt;var Bt=n(1305),Wt=n(257),Ht=n(77),qt=n(137),zt=n(499),$t=n(824),Gt=n(349);const Vt={onChange:_.a.func.isRequired,onClose:_.a.func.isRequired,onResize:_.a.func.isRequired,getCurrentTab:_.a.func,getCurrentLabel:_.a.func,adhocMetric:_.a.instanceOf(Ft.b).isRequired,columns:_.a.arrayOf(wt.a),savedMetricsOptions:_.a.arrayOf(At.a),savedMetric:At.a,datasourceType:_.a.string},Kt={columns:[],getCurrentTab:Gt.f},Yt=Object(P.g)(Ht.e)`
  .metric-option {
    & > svg {
      min-width: ${({theme:e})=>`${4*e.gridUnit}px`};
    }
    & > .option-label {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`;class Qt extends l.a.PureComponent{constructor(e){var t,n,r,a,o,s,l,c,u,d,p,h;super(e),this.defaultActiveTabKey=(this.props.savedMetric.metric_name||this.props.adhocMetric.isNew)&&jt()(this.props.savedMetricsOptions)&&this.props.savedMetricsOptions.length>0?"SAVED":this.props.adhocMetric.expressionType,this.onSave=i()(t=this.onSave).call(t,this),this.onResetStateAndClose=i()(n=this.onResetStateAndClose).call(n,this),this.onColumnChange=i()(r=this.onColumnChange).call(r,this),this.onAggregateChange=i()(a=this.onAggregateChange).call(a,this),this.onSavedMetricChange=i()(o=this.onSavedMetricChange).call(o,this),this.onSqlExpressionChange=i()(s=this.onSqlExpressionChange).call(s,this),this.onDragDown=i()(l=this.onDragDown).call(l,this),this.onMouseMove=i()(c=this.onMouseMove).call(c,this),this.onMouseUp=i()(u=this.onMouseUp).call(u,this),this.onTabChange=i()(d=this.onTabChange).call(d,this),this.handleAceEditorRef=i()(p=this.handleAceEditorRef).call(p,this),this.refreshAceEditor=i()(h=this.refreshAceEditor).call(h,this),this.state={adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric,width:320,height:240},document.addEventListener("mouseup",this.onMouseUp)}componentDidMount(){this.props.getCurrentTab(this.defaultActiveTabKey)}componentDidUpdate(e,t){var n,r,a,o,i,s,l,c,u,d,p,h,f;(null==(n=t.adhocMetric)?void 0:n.sqlExpression)===(null==(r=this.state.adhocMetric)?void 0:r.sqlExpression)&&(null==(a=t.adhocMetric)?void 0:a.aggregate)===(null==(o=this.state.adhocMetric)?void 0:o.aggregate)&&(null==(i=t.adhocMetric)?void 0:null==(s=i.column)?void 0:s.column_name)===(null==(l=this.state.adhocMetric)?void 0:null==(c=l.column)?void 0:c.column_name)&&(null==(u=t.savedMetric)?void 0:u.metric_name)===(null==(d=this.state.savedMetric)?void 0:d.metric_name)||this.props.getCurrentLabel({savedMetricLabel:(null==(p=this.state.savedMetric)?void 0:p.verbose_name)||(null==(h=this.state.savedMetric)?void 0:h.metric_name),adhocMetricLabel:null==(f=this.state.adhocMetric)?void 0:f.getDefaultLabel()})}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}onSave(){var e;const{adhocMetric:t,savedMetric:n}=this.state,r=null!=n&&n.metric_name?n:t,a=null!=(e=this.props.savedMetric)&&e.metric_name?this.props.savedMetric:this.props.adhocMetric;this.props.onChange({...r},a),this.props.onClose()}onResetStateAndClose(){this.setState({adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric},this.props.onClose)}onColumnChange(e){var t;const n=bt()(t=this.props.columns).call(t,t=>t.id===e);this.setState(e=>({adhocMetric:e.adhocMetric.duplicateWith({column:n,expressionType:Ft.a.SIMPLE}),savedMetric:void 0}))}onAggregateChange(e){this.setState(t=>({adhocMetric:t.adhocMetric.duplicateWith({aggregate:e,expressionType:Ft.a.SIMPLE}),savedMetric:void 0}))}onSavedMetricChange(e){var t;const n=bt()(t=this.props.savedMetricsOptions).call(t,t=>t.id===e);this.setState(e=>({savedMetric:n,adhocMetric:e.adhocMetric.duplicateWith({column:void 0,aggregate:void 0,sqlExpression:void 0,expressionType:Ft.a.SIMPLE})}))}onSqlExpressionChange(e){this.setState(t=>({adhocMetric:t.adhocMetric.duplicateWith({sqlExpression:e,expressionType:Ft.a.SQL}),savedMetric:void 0}))}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),320),height:Math.max(this.dragStartHeight+2*(e.clientY-this.dragStartY),240)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}onTabChange(e){this.refreshAceEditor(),this.props.getCurrentTab(e)}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}refreshAceEditor(){De()(()=>{this.aceEditorRef&&this.aceEditorRef.editor.resize()},0)}renderColumnOption(e){const t={...e};return t.metric_name&&!t.verbose_name&&(t.verbose_name=t.metric_name),Object(R.d)(St.a,{column:t,showType:!0})}render(){var e;const{adhocMetric:t,savedMetric:n,columns:r,savedMetricsOptions:o,onChange:i,onClose:s,onResize:l,datasourceType:c,...u}=this.props,{adhocMetric:d,savedMetric:h}=this.state,g=ee()($t.a).call($t.a,f()(r).call(r,e=>({name:e.column_name,value:e.column_name,score:50,meta:"column"}))),b=d.column&&d.column.column_name||d.inferSqlExpressionColumn(),v={placeholder:Object(C.e)("%s column(s)",r.length),value:b,onChange:this.onColumnChange,allowClear:!0,showSearch:!0,autoFocus:!b,filterOption:(e,t)=>{var n;return lt()(n=t.filterBy.toLowerCase()).call(n,e.toLowerCase())>=0}},m={placeholder:Object(C.e)("%s aggregates(s)",Et.b.length),value:d.aggregate||d.inferSqlExpressionAggregate(),onChange:this.onAggregateChange,allowClear:!0,autoFocus:!!b,showSearch:!0},y={placeholder:Object(C.e)("%s saved metric(s)",null!=(e=null==o?void 0:o.length)?e:0),value:(null==h?void 0:h.verbose_name)||(null==h?void 0:h.metric_name),onChange:this.onSavedMetricChange,allowClear:!0,showSearch:!0,autoFocus:!0,filterOption:(e,t)=>{var n;return lt()(n=t.filterBy.toLowerCase()).call(n,e.toLowerCase())>=0}};var _;"druid"===this.props.datasourceType&&m.options&&(m.options=p()(_=m.options).call(_,e=>"AVG"!==e));const O=d.isValid()||(null==h?void 0:h.metric_name),x=!d.equals(t)||!(void 0===(null==h?void 0:h.metric_name)&&void 0===(null==n?void 0:n.metric_name))&&(null==h?void 0:h.metric_name)!==(null==n?void 0:n.metric_name);return Object(R.d)(qt.a,a()({layout:"vertical",id:"metrics-edit-popover"},u),Object(R.d)(Wt.c,{id:"adhoc-metric-edit-tabs",defaultActiveKey:this.defaultActiveTabKey,className:"adhoc-metric-edit-tabs",style:{height:this.state.height,width:this.state.width},onChange:this.onTabChange,allowOverflow:!0},Object(R.d)(Wt.c.TabPane,{key:"SAVED",tab:Object(C.e)("Saved")},Object(R.d)(qt.b,{label:Object(C.e)("Saved metric")},Object(R.d)(Yt,a()({},y,{name:"select-saved",getPopupContainer:e=>e.parentNode}),jt()(o)&&f()(o).call(o,e=>Object(R.d)(Ht.e.Option,{value:e.id,filterBy:e.verbose_name||e.metric_name,key:e.id},Object(R.d)(St.b,{metric:e,showType:!0})))))),Object(R.d)(Wt.c.TabPane,{key:Ft.a.SIMPLE,tab:Object(C.e)("Simple")},Object(R.d)(qt.b,{label:Object(C.e)("column")},Object(R.d)(Ht.e,a()({},v,{name:"select-column",getPopupContainer:e=>e.parentNode}),f()(r).call(r,e=>Object(R.d)(Ht.e.Option,{value:e.id,filterBy:e.verbose_name||e.column_name,key:e.id},this.renderColumnOption(e))))),Object(R.d)(qt.b,{label:Object(C.e)("aggregate")},Object(R.d)(Ht.e,a()({},m,{name:"select-aggregate",getPopupContainer:e=>e.parentNode}),f()(Et.b).call(Et.b,e=>Object(R.d)(Ht.e.Option,{value:e,key:e},e))))),Object(R.d)(Wt.c.TabPane,{key:Ft.a.SQL,tab:Object(C.e)("Custom SQL")},"druid"!==this.props.datasourceType?Object(R.d)(zt.f,{showLoadingForImport:!0,ref:this.handleAceEditorRef,keywords:g,height:`${this.state.height-80}px`,onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:d.sqlExpression||d.translateToSql(),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"filter-sql-editor",wrapEnabled:!0}):Object(R.d)("div",{className:"custom-sql-disabled-message"},"Custom SQL Metrics are not available on druid datasources"))),Object(R.d)("div",null,Object(R.d)(Ne.a,{buttonSize:"small",onClick:this.onResetStateAndClose,cta:!0},Object(C.e)("Close")),Object(R.d)(Ne.a,{disabled:!O,buttonStyle:x&&O?"primary":"default",buttonSize:"small",onClick:this.onSave,cta:!0},Object(C.e)("Save")),Object(R.d)("i",{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})))}}Qt.propTypes=Vt,Qt.defaultProps=Kt;class Xt extends l.a.PureComponent{constructor(e){var t,n,r,a,o,s,l;super(e),this.onPopoverResize=i()(t=this.onPopoverResize).call(t,this),this.onLabelChange=i()(n=this.onLabelChange).call(n,this),this.closePopover=i()(r=this.closePopover).call(r,this),this.togglePopover=i()(a=this.togglePopover).call(a,this),this.getCurrentTab=i()(o=this.getCurrentTab).call(o,this),this.getCurrentLabel=i()(s=this.getCurrentLabel).call(s,this),this.onChange=i()(l=this.onChange).call(l,this),this.state={popoverVisible:!1,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel},currentLabel:"",labelModified:!1,isTitleEditDisabled:!1}}onLabelChange(e){var t;const{verbose_name:n,metric_name:r}=this.props.savedMetric,a=null==(t=this.props.adhocMetric)?void 0:t.getDefaultLabel(),o=e.target.value;this.setState(e=>({title:{label:o||e.currentLabel||n||r||a,hasCustomLabel:!!o},labelModified:!0}))}onPopoverResize(){this.forceUpdate()}closePopover(){this.togglePopover(!1),this.setState({labelModified:!1})}togglePopover(e){this.setState({popoverVisible:e})}getCurrentTab(e){this.setState({isTitleEditDisabled:"SAVED"===e})}getCurrentLabel({savedMetricLabel:e,adhocMetricLabel:t}){const n=e||t;this.setState({currentLabel:n,labelModified:!0}),!e&&this.state.title.hasCustomLabel||this.setState({title:{label:n,hasCustomLabel:!1}})}onChange(e,t){this.props.onMetricEdit({...e,...this.state.title},t)}render(){const{adhocMetric:e,savedMetric:t,columns:n,savedMetricsOptions:r,datasourceType:a,isControlledComponent:o}=this.props,{verbose_name:i,metric_name:s}=t,{hasCustomLabel:l,label:c}=e,u=l?c:e.getDefaultLabel(),d=this.state.labelModified?this.state.title:{label:i||s||u,hasCustomLabel:l},{visible:p,togglePopover:h,closePopover:f}=o?{visible:this.props.visible,togglePopover:this.props.togglePopover,closePopover:this.props.closePopover}:{visible:this.state.popoverVisible,togglePopover:this.togglePopover,closePopover:this.closePopover},g=Object(R.d)(Bt.a,null,Object(R.d)(Qt,{adhocMetric:e,title:d,columns:n,savedMetricsOptions:r,savedMetric:t,datasourceType:a,onResize:this.onPopoverResize,onClose:f,onChange:this.onChange,getCurrentTab:this.getCurrentTab,getCurrentLabel:this.getCurrentLabel})),b=Object(R.d)(Ut,{title:d,onChange:this.onLabelChange,isEditDisabled:this.state.isTitleEditDisabled});return Object(R.d)(w.a,{placement:"right",trigger:"click",content:g,defaultVisible:p,visible:p,onVisibleChange:h,title:b,destroyTooltipOnHide:this.props.createNew},this.props.children)}}var Jt=Xt;const Zt={adhocMetric:_.a.instanceOf(Ft.b),onMetricEdit:_.a.func.isRequired,onRemoveMetric:_.a.func,columns:_.a.arrayOf(wt.a),savedMetricsOptions:_.a.arrayOf(At.a),savedMetric:At.a,datasourceType:_.a.string,onMoveLabel:_.a.func,onDropLabel:_.a.func,index:_.a.number};class en extends l.a.PureComponent{constructor(e){var t;super(e),this.onRemoveMetric=i()(t=this.onRemoveMetric).call(t,this)}onRemoveMetric(e){e.stopPropagation(),this.props.onRemoveMetric()}render(){const{adhocMetric:e,onMetricEdit:t,columns:n,savedMetricsOptions:r,savedMetric:a,datasourceType:o,onMoveLabel:i,onDropLabel:s,index:l}=this.props;return Object(R.d)(Jt,{adhocMetric:e,onMetricEdit:t,columns:n,savedMetricsOptions:r,savedMetric:a,datasourceType:o},Object(R.d)(se.k,{savedMetric:a,adhocMetric:e,label:e.label,onRemove:this.onRemoveMetric,onMoveLabel:i,onDropLabel:s,index:l,type:Lt.a.AdhocMetricOption,withCaret:!0,isFunction:!0}))}}var tn=en;en.propTypes=Zt;const nn={option:_.a.oneOfType([_.a.object,_.a.string]).isRequired,index:_.a.number.isRequired,onMetricEdit:_.a.func,onRemoveMetric:_.a.func,onMoveLabel:_.a.func,onDropLabel:_.a.func,columns:_.a.arrayOf(wt.a),savedMetrics:_.a.arrayOf(At.a),savedMetricsOptions:_.a.arrayOf(At.a),multi:_.a.bool,datasourceType:_.a.string};function rn({option:e,onMetricEdit:t,onRemoveMetric:n,columns:r,savedMetrics:a,savedMetricsOptions:o,datasourceType:i,onMoveLabel:s,onDropLabel:l,index:c}){let u;var d;if("string"==typeof e?(d=e,u=bt()(a).call(a,e=>e.metric_name===d)):e.metric_name&&(u=e),e instanceof Ft.b||u){var p;const a={onMetricEdit:t,onRemoveMetric:n,columns:r,savedMetricsOptions:o,datasourceType:i,adhocMetric:e instanceof Ft.b?e:new Ft.b({isNew:!0}),onMoveLabel:s,onDropLabel:l,index:c,savedMetric:null!=(p=u)?p:{}};return Object(R.d)(tn,a)}return null}rn.propTypes=nn;var an=n(314);const on={name:_.a.string.isRequired,onChange:_.a.func,value:_.a.oneOfType([_.a.arrayOf(_.a.oneOfType([_.a.string,an.a])),_.a.oneOfType([_.a.string,an.a])]),columns:_.a.arrayOf(wt.a),savedMetrics:_.a.arrayOf(At.a),isLoading:_.a.bool,multi:_.a.bool,clearable:_.a.bool,datasourceType:_.a.string};function sn(e,t,n){var r;return null!=(r=null==e?void 0:p()(e).call(e,e=>jt()(t)?!b()(t).call(t,e.metric_name)||e.metric_name===n:e))?r:[]}function ln(e){return e&&!(e instanceof Ft.b)&&e.expressionType}function cn(e){return e?jt()(e)?f()(e).call(e,e=>ln(e)?new Ft.b(e):e):ln(e)?[new Ft.b(e)]:[e]:[]}class un extends l.a.PureComponent{constructor(e){var t,n,r,a,o,s,l,c,u;super(e),this.onChange=i()(t=this.onChange).call(t,this),this.onMetricEdit=i()(n=this.onMetricEdit).call(n,this),this.onNewMetric=i()(r=this.onNewMetric).call(r,this),this.onRemoveMetric=i()(a=this.onRemoveMetric).call(a,this),this.moveLabel=i()(o=this.moveLabel).call(o,this),this.checkIfAggregateInInput=i()(s=this.checkIfAggregateInInput).call(s,this),this.optionsForSelect=i()(l=this.optionsForSelect).call(l,this),this.selectFilterOption=i()(c=this.selectFilterOption).call(c,this),this.isAutoGeneratedMetric=i()(u=this.isAutoGeneratedMetric).call(u,this),this.optionRenderer=e=>Object(R.d)(It,{option:e}),this.valueRenderer=(e,t)=>{var n;return Object(R.d)(rn,{key:t,index:t,option:e,onMetricEdit:this.onMetricEdit,onRemoveMetric:()=>this.onRemoveMetric(t),columns:this.props.columns,datasource:this.props.datasource,savedMetrics:this.props.savedMetrics,savedMetricsOptions:sn(this.props.savedMetrics,this.props.value,null==(n=this.props.value)?void 0:n[t]),datasourceType:this.props.datasourceType,onMoveLabel:this.moveLabel,onDropLabel:()=>this.props.onChange(this.state.value)})},this.select=null,this.selectRef=e=>{this.select=e?e.select:null},this.state={aggregateInInput:null,options:this.optionsForSelect(this.props),value:cn(this.props.value)}}UNSAFE_componentWillReceiveProps(e){const{value:t}=this.props;$()(this.props.columns,e.columns)&&$()(this.props.savedMetrics,e.savedMetrics)||(this.setState({options:this.optionsForSelect(e)}),function(e,t){var n,r,a,o,i;const s=new xt.a(f()(n=[...t.columns||[],...t.savedMetrics||[]]).call(n,({column_name:e,metric_name:t})=>e||t));return _t()(r=p()(a=f()(o=p()(i=jt()(e)?e:[e]).call(i,e=>e)).call(o,e=>e.column?e.column.column_name:e.column_name||e)).call(a,e=>e&&"string"==typeof e)).call(r,e=>s.has(e))}(e.value,e)||this.props.onChange([])),t!==e.value&&this.setState({value:cn(e.value)})}onNewMetric(e){this.setState(t=>({...t,value:[...t.value,e]}),()=>{this.onChange(this.state.value)})}onMetricEdit(e,t){this.setState(n=>{var r;return{value:f()(r=n.value).call(r,n=>n!==t.metric_name&&void 0===n.optionName||n.optionName!==t.optionName?n:e)}},()=>{this.onChange(this.state.value)})}onRemoveMetric(e){if(!jt()(this.state.value))return;const t=[...this.state.value];mt()(t).call(t,e,1),this.setState(e=>({...e,value:t})),this.props.onChange(t)}onChange(e){var t;if(null===e)return void this.props.onChange(null);let n;n=jt()(e)?e:e?[e]:[];const r=p()(t=f()(n).call(n,e=>e.metric_name?e.metric_name:e)).call(t,e=>e);this.props.onChange(this.props.multi?r:r[0])}moveLabel(e,t){const{value:n}=this.state,r=[...n];[r[t],r[e]]=[r[e],r[t]],this.setState({value:r})}isAddNewMetricDisabled(){return!this.props.multi&&this.state.value.length>0}addNewMetricPopoverTrigger(e){return this.isAddNewMetricDisabled()?e:Object(R.d)(Jt,{adhocMetric:new Ft.b({isNew:!0}),onMetricEdit:this.onNewMetric,columns:this.props.columns,savedMetricsOptions:sn(this.props.savedMetrics,this.props.value,null),datasource:this.props.datasource,savedMetric:{metric_name:"",expression:""},datasourceType:this.props.datasourceType,createNew:!0},e)}checkIfAggregateInInput(e){const t=e.toLowerCase(),n=bt()(Et.b).call(Et.b,e=>ft()(t).call(t,`${e.toLowerCase()}(`))||null;this.clearedAggregateInInput=this.state.aggregateInInput,this.setState({aggregateInInput:n})}optionsForSelect(e){const{columns:t,savedMetrics:n}=e,r=[...t||[],...t&&t.length?f()(Et.b).call(Et.b,e=>({aggregate_name:e})):[],...n||[]];return pt()(r).call(r,(e,t)=>(t.metric_name?e.push({...t,optionName:t.metric_name}):t.column_name?e.push({...t,optionName:`_col_${t.column_name}`}):t.aggregate_name&&e.push({...t,optionName:`_aggregate_${t.aggregate_name}`}),e),[])}isAutoGeneratedMetric(e){return"druid"===this.props.datasourceType?Et.p.test(e.verbose_name):Et.q.test(e.metric_name)}selectFilterOption({data:e},t){var n,r;if(this.state.aggregateInInput){var a;let n=t.length;ut()(t).call(t,")")&&(n=t.length-1);const r=t.substring(lt()(t).call(t,"(")+1,n);return e.column_name&&lt()(a=e.column_name.toLowerCase()).call(a,r)>=0}return e.optionName&&(!e.metric_name||!this.isAutoGeneratedMetric(e)||e.verbose_name)&&(lt()(n=e.optionName.toLowerCase()).call(n,t)>=0||e.verbose_name&&lt()(r=e.verbose_name.toLowerCase()).call(r,t)>=0)}render(){var e;const{theme:t}=this.props;return Object(R.d)("div",{className:"metrics-select"},Object(R.d)(se.g,null,Object(R.d)(G.a,this.props),this.addNewMetricPopoverTrigger(Object(R.d)(se.b,{disabled:this.isAddNewMetricDisabled()},Object(R.d)(Re.a.PlusLarge,{iconSize:"s",iconColor:t.colors.grayscale.light5})))),Object(R.d)(se.i,null,this.state.value.length>0?f()(e=this.state.value).call(e,(e,t)=>this.valueRenderer(e,t)):this.addNewMetricPopoverTrigger(Object(R.d)(se.a,null,Object(R.d)(Re.a.PlusSmall,{iconColor:t.colors.grayscale.light1}),Object(C.e)("Add metric")))))}}un.propTypes=on,un.defaultProps={onChange:()=>{},clearable:!0,savedMetrics:[],columns:[]};var dn=Object(j.e)(un),pn=n(868);const hn="fix",fn="metric",gn={onChange:_.a.func,value:_.a.object,isFloat:_.a.bool,datasource:_.a.object.isRequired,default:_.a.shape({type:_.a.oneOf(["fix","metric"]),value:_.a.oneOfType([_.a.string,_.a.number])})},bn={onChange:()=>{},default:{type:hn,value:5}};class vn extends l.a.Component{constructor(e){var t,n,r,a;super(e),this.onChange=i()(t=this.onChange).call(t,this),this.setType=i()(n=this.setType).call(n,this),this.setFixedValue=i()(r=this.setFixedValue).call(r,this),this.setMetric=i()(a=this.setMetric).call(a,this);const o=(e.value?e.value.type:e.default.type)||hn,s=(e.value?e.value.value:e.default.value)||"100";this.state={type:o,fixedValue:o===hn?s:"",metricValue:o===fn?s:null}}onChange(){this.props.onChange({type:this.state.type,value:this.state.type===hn?this.state.fixedValue:this.state.metricValue})}setType(e){this.setState({type:e},this.onChange)}setFixedValue(e){this.setState({fixedValue:e},this.onChange)}setMetric(e){this.setState({metricValue:e},this.onChange)}render(){const e=(this.props.value||this.props.default).type||hn,t=this.props.datasource?this.props.datasource.columns:null,n=this.props.datasource?this.props.datasource.metrics:null;return Object(R.d)("div",null,Object(R.d)(G.a,this.props),Object(R.d)(ot.a,{ghost:!0,css:e=>Object(R.c)("&.ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{border:0px;padding:0px 0px ",2*e.gridUnit,"px 0px;display:inline-block;}&.ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:",2*e.gridUnit,"px;}}","")},Object(R.d)(ot.a.Panel,{showArrow:!1,header:Object(R.d)(at.a,{onClick:()=>{}},this.state.type===hn&&Object(R.d)("span",null,this.state.fixedValue),this.state.type===fn&&Object(R.d)("span",null,Object(R.d)("span",null,"metric: "),Object(R.d)("strong",null,this.state.metricValue?this.state.metricValue.label:null)))},Object(R.d)("div",{className:"well"},Object(R.d)(pn.a,{title:Object(C.e)("Fixed"),isSelected:e===hn,onSelect:()=>{this.setType(hn)}},Object(R.d)(it.a,{isFloat:!0,onChange:this.setFixedValue,onFocus:()=>{this.setType(hn)},value:this.state.fixedValue})),Object(R.d)(pn.a,{title:Object(C.e)("Based on a metric"),isSelected:e===fn,onSelect:()=>{this.setType(fn)}},Object(R.d)(dn,{name:"metric",columns:t,savedMetrics:n,multi:!1,onFocus:()=>{this.setType(fn)},onChange:this.setMetric,value:this.state.metricValue}))))))}}vn.propTypes=gn,vn.defaultProps=bn;const mn={onChange:_.a.func,value:_.a.oneOfType([_.a.string,_.a.number,_.a.object,_.a.bool,_.a.array,_.a.func])};function yn(e){return Object(R.d)(O.l,{type:"hidden",value:e.value})}yn.propTypes=mn,yn.defaultProps={onChange:()=>{}};var _n=n(1825),On=n(832),xn=n(1294),Cn=n.n(xn);var jn={name:"mlsake",styles:"margin-left:0;margin-right:0"};function En(e){return Object(R.d)(Cn.a,a()({},e,{css:jn}))}const wn={onChange:_.a.func,value:_.a.oneOfType([_.a.string,_.a.number])};function Sn(e){return Object(R.d)(l.a.Fragment,null,Object(R.d)(G.a,e),Object(R.d)(En,a()({},e,{defaultValue:e.default})))}Sn.propTypes=wn,Sn.defaultProps={onChange:()=>{}};var Tn=n(1826),Mn=n(1806);const Pn={label:_.a.string,tooltip:_.a.string,colType:_.a.string,width:_.a.string,height:_.a.string,timeLag:_.a.oneOfType([_.a.string,_.a.number]),timeRatio:_.a.string,comparisonType:_.a.string,showYAxis:_.a.bool,yAxisBounds:_.a.array,bounds:_.a.array,d3format:_.a.string,dateFormat:_.a.string,onChange:_.a.func},Rn={label:Object(C.e)("Time series columns"),tooltip:"",colType:"",width:"",height:"",timeLag:"",timeRatio:"",comparisonType:"",showYAxis:!1,yAxisBounds:[null,null],bounds:[null,null],d3format:"",dateFormat:""},An=[{value:"value",label:"Actual value"},{value:"diff",label:"Difference"},{value:"perc",label:"Percentage"},{value:"perc_change",label:"Percentage change"}],Dn=[{value:"time",label:"Time comparison"},{value:"contrib",label:"Contribution"},{value:"spark",label:"Sparkline"},{value:"avg",label:"Period average"}],kn=Object(P.g)(O.s)`
  margin-top: ${({theme:e})=>2*e.gridUnit}px;
  display: flex;
  align-items: center;
`,In=Object(P.g)(O.f)`
  display: flex;
  align-items: center;
`,Ln=Object(P.g)(E.a)`
  margin-left: ${({theme:e})=>e.gridUnit}px;
  color: ${({theme:e})=>e.colors.grayscale.light1};
`,Fn=P.g.div`
  margin-top: ${({theme:e})=>5*e.gridUnit}px;
  display: flex;
  justify-content: center;
`;class Nn extends l.a.Component{constructor(e){var t,n,r,a,o;super(e),this.onSave=i()(t=this.onSave).call(t,this),this.onClose=i()(n=this.onClose).call(n,this),this.resetState=i()(r=this.resetState).call(r,this),this.initialState=i()(a=this.initialState).call(a,this),this.onPopoverVisibleChange=i()(o=this.onPopoverVisibleChange).call(o,this),this.state=this.initialState()}initialState(){return{label:this.props.label,tooltip:this.props.tooltip,colType:this.props.colType,width:this.props.width,height:this.props.height,timeLag:this.props.timeLag||0,timeRatio:this.props.timeRatio,comparisonType:this.props.comparisonType,showYAxis:this.props.showYAxis,yAxisBounds:this.props.yAxisBounds,bounds:this.props.bounds,d3format:this.props.d3format,dateFormat:this.props.dateFormat,popoverVisible:!1}}resetState(){const e=this.initialState();this.setState({...e})}onSave(){this.props.onChange(this.state),this.setState({popoverVisible:!1})}onClose(){this.resetState()}onSelectChange(e,t){this.setState({[e]:t.value})}onTextInputChange(e,t){this.setState({[e]:t.target.value})}onCheckboxChange(e,t){this.setState({[e]:t})}onBoundsChange(e){this.setState({bounds:e})}onPopoverVisibleChange(e){e?this.setState({popoverVisible:e}):this.resetState()}onYAxisBoundsChange(e){this.setState({yAxisBounds:e})}textSummary(){return`${this.props.label}`}formRow(e,t,n,r){return Object(R.d)(kn,null,Object(R.d)(In,{xs:24,md:11},e,Object(R.d)(Ln,{placement:"top",tooltip:t,label:n})),Object(R.d)(O.f,{xs:24,md:13},r))}renderPopover(){var e,t,n,r,a,o,s,l,c,u,d,p,h,f,g;return Object(R.d)("div",{id:"ts-col-popo",style:{width:320}},this.formRow("Label","The column header label","time-lag",Object(R.d)(O.l,{value:this.state.label,onChange:i()(e=this.onTextInputChange).call(e,this,"label"),placeholder:"Label"})),this.formRow("Tooltip","Column header tooltip","col-tooltip",Object(R.d)(O.l,{value:this.state.tooltip,onChange:i()(t=this.onTextInputChange).call(t,this,"tooltip"),placeholder:"Tooltip"})),this.formRow("Type","Type of comparison, value difference or percentage","col-type",Object(R.d)(Ht.i,{value:this.state.colType,clearable:!1,onChange:i()(n=this.onSelectChange).call(n,this,"colType"),options:Dn})),Object(R.d)("hr",null),"spark"===this.state.colType&&this.formRow("Width","Width of the sparkline","spark-width",Object(R.d)(O.l,{value:this.state.width,onChange:i()(r=this.onTextInputChange).call(r,this,"width"),placeholder:"Width"})),"spark"===this.state.colType&&this.formRow("Height","Height of the sparkline","spark-width",Object(R.d)(O.l,{value:this.state.height,onChange:i()(a=this.onTextInputChange).call(a,this,"height"),placeholder:"Height"})),lt()(o=["time","avg"]).call(o,this.state.colType)>=0&&this.formRow("Time lag","Number of periods to compare against","time-lag",Object(R.d)(O.l,{value:this.state.timeLag,onChange:i()(s=this.onTextInputChange).call(s,this,"timeLag"),placeholder:"Time Lag"})),lt()(l=["spark"]).call(l,this.state.colType)>=0&&this.formRow("Time ratio","Number of periods to ratio against","time-ratio",Object(R.d)(O.l,{value:this.state.timeRatio,onChange:i()(c=this.onTextInputChange).call(c,this,"timeRatio"),placeholder:"Time Ratio"})),"time"===this.state.colType&&this.formRow("Type","Type of comparison, value difference or percentage","comp-type",Object(R.d)(Ht.i,{value:this.state.comparisonType,clearable:!1,onChange:i()(u=this.onSelectChange).call(u,this,"comparisonType"),options:An})),"spark"===this.state.colType&&this.formRow("Show Y-axis","Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise.","show-y-axis-bounds",Object(R.d)(J.a,{value:this.state.showYAxis,onChange:i()(d=this.onCheckboxChange).call(d,this,"showYAxis")})),"spark"===this.state.colType&&this.formRow("Y-axis bounds","Manually set min/max values for the y-axis.","y-axis-bounds",Object(R.d)(X,{value:this.state.yAxisBounds,onChange:i()(p=this.onYAxisBoundsChange).call(p,this)})),"spark"!==this.state.colType&&this.formRow("Color bounds","Number bounds used for color encoding from red to blue.\n              Reverse the numbers for blue to red. To get pure red or blue,\n              you can enter either only min or max.","bounds",Object(R.d)(X,{value:this.state.bounds,onChange:i()(h=this.onBoundsChange).call(h,this)})),this.formRow("Number format","Optional d3 number format string","d3-format",Object(R.d)(O.l,{value:this.state.d3format,onChange:i()(f=this.onTextInputChange).call(f,this,"d3format"),placeholder:"Number format string"})),"spark"===this.state.colType&&this.formRow("Date format","Optional d3 date format string","date-format",Object(R.d)(O.l,{value:this.state.dateFormat,onChange:i()(g=this.onTextInputChange).call(g,this,"dateFormat"),placeholder:"Date format string"})),Object(R.d)(Fn,null,Object(R.d)(Ne.a,{buttonSize:"small",onClick:this.onClose,cta:!0},Object(C.e)("Close")),Object(R.d)(Ne.a,{buttonStyle:"primary",buttonSize:"small",onClick:this.onSave,cta:!0},Object(C.e)("Save"))))}render(){return Object(R.d)("span",null,this.textSummary()," ",Object(R.d)(w.a,{trigger:"click",placement:"right",content:this.renderPopover(),title:"Column Configuration",visible:this.state.popoverVisible,onVisibleChange:this.onPopoverVisibleChange},Object(R.d)(E.a,{icon:"edit",className:"text-primary",label:"edit-ts-column"})))}}Nn.propTypes=Pn,Nn.defaultProps=Rn;var Un=n(1697);const Bn=["longitude","latitude","zoom","bearing","pitch"],Wn={onChange:_.a.func,value:_.a.shape({longitude:_.a.number,latitude:_.a.number,zoom:_.a.number,bearing:_.a.number,pitch:_.a.number}),default:_.a.object,name:_.a.string.isRequired},Hn={onChange:()=>{},default:{type:"fix",value:5},value:{longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0}};class qn extends l.a.Component{constructor(e){var t;super(e),this.onChange=i()(t=this.onChange).call(t,this)}onChange(e,t){this.props.onChange({...this.props.value,[e]:t})}renderTextControl(e){var t;return Object(R.d)("div",{key:e},Object(R.d)(qt.c,null,e),Object(R.d)(it.a,{value:this.props.value[e],onChange:i()(t=this.onChange).call(t,this,e),isFloat:!0}))}renderPopover(){return Object(R.d)("div",{id:`filter-popover-${this.props.name}`},f()(Bn).call(Bn,e=>this.renderTextControl(e)))}renderLabel(){return this.props.value.longitude&&this.props.value.latitude?`${Object(Un.decimal2sexagesimal)(this.props.value.longitude)} | ${Object(Un.decimal2sexagesimal)(this.props.value.latitude)}`:"N/A"}render(){return Object(R.d)("div",null,Object(R.d)(G.a,this.props),Object(R.d)(w.a,{container:document.body,trigger:"click",placement:"right",content:this.renderPopover(),title:"Viewport"},Object(R.d)(at.a,{className:"pointer"},this.renderLabel())))}}qn.propTypes=Wn,qn.defaultProps=Hn;var zn=n(1443),$n=n(1829),Gn=n(185),Vn=n.n(Gn);const Kn={marginTop:"5px",minHeight:"30px"},Yn={textAlign:"right"},Qn={label:_.a.string.isRequired,tooltip:_.a.string,control:_.a.node.isRequired,isCheckbox:_.a.bool};function Xn({label:e,tooltip:t,control:n,isCheckbox:r}){const a=Object(R.d)("span",null,e," ",t&&Object(R.d)(E.a,{placement:"top",label:e,tooltip:t}));return r?Object(R.d)(O.s,{style:Kn,gutter:16},Object(R.d)(O.f,{xs:24,md:8,style:Yn},n),Object(R.d)(O.f,{xs:24,md:16},a)):Object(R.d)(O.s,{style:Kn,gutter:16},Object(R.d)(O.f,{xs:24,md:8,style:Yn},a),Object(R.d)(O.f,{xs:24,md:16},n))}Xn.propTypes=Qn,Xn.defaultProps={tooltip:null,isCheckbox:!1};const Jn=new xt.a(["TINYINT","SMALLINT","INT","INTEGER","BIGINT","LONG"]),Zn=new xt.a(["FLOAT","DOUBLE","REAL","NUMERIC","DECIMAL","MONEY"]),er={datasource:_.a.object.isRequired,onChange:_.a.func,asc:_.a.bool,clearable:_.a.bool,multiple:_.a.bool,column:_.a.string,label:_.a.string,metric:_.a.string,searchAllOptions:_.a.bool,defaultValue:_.a.string},tr={width:350};class nr extends l.a.Component{constructor(e){var t,n;super(e);const{column:r,metric:a,asc:o,clearable:s,multiple:l,searchAllOptions:c,label:u,defaultValue:d}=e;this.state={column:r,metric:a,label:u,asc:o,clearable:s,multiple:l,searchAllOptions:c,defaultValue:d},this.onChange=i()(t=this.onChange).call(t,this),this.onControlChange=i()(n=this.onControlChange).call(n,this)}onChange(){this.props.onChange(this.state)}onControlChange(e,t){let n=t;const{column:r,multiple:a}=this.state;if(t&&!a&&e===Et.g.DEFAULT_VALUE){var o;const{datasource:e}=this.props,a=bt()(o=e.columns).call(o,e=>e.column_name===r);if(a&&a.type){const e=a.type.toUpperCase();"BOOLEAN"===e?n="true"===t:Jn.has(e)?n=W()(Number(t))?null:Vn()(t,10):Zn.has(e)&&(n=W()(Number(t))?null:U()(t))}}this.setState({[e]:n},this.onChange)}setType(){}textSummary(){return this.state.column||"N/A"}renderForm(){var e,t,n,r,a,o;return Object(R.d)("div",null,Object(R.d)(Xn,{label:Object(C.e)("Column"),control:Object(R.d)(On.a,{value:this.state.column,name:"column",clearable:!1,options:ee()(e=f()(t=p()(n=this.props.datasource.columns).call(n,e=>e!==this.state.column)).call(t,e=>({value:e.column_name,label:e.column_name}))).call(e,[{value:this.state.column,label:this.state.column}]),onChange:e=>this.onControlChange("column",e)})}),Object(R.d)(Xn,{label:Object(C.e)("Label"),control:Object(R.d)(it.a,{value:this.state.label,name:"label",onChange:e=>this.onControlChange("label",e)})}),Object(R.d)(Xn,{label:Object(C.e)("Default"),tooltip:Object(C.e)("(optional) default value for the filter, when using the multiple option, you can use a semicolon-delimited list of options."),control:Object(R.d)(it.a,{value:this.state.defaultValue,name:"defaultValue",onChange:e=>this.onControlChange(Et.g.DEFAULT_VALUE,e)})}),Object(R.d)(Xn,{label:Object(C.e)("Sort metric"),tooltip:Object(C.e)("Metric to sort the results by"),control:Object(R.d)(On.a,{value:this.state.metric,name:"column",options:ee()(r=f()(a=p()(o=this.props.datasource.metrics).call(o,e=>e!==this.state.metric)).call(a,e=>({value:e.metric_name,label:e.metric_name}))).call(r,[{value:this.state.metric,label:this.state.metric}]),onChange:e=>this.onControlChange("metric",e)})}),Object(R.d)(Xn,{label:Object(C.e)("Sort ascending"),tooltip:Object(C.e)("Check for sorting ascending"),isCheckbox:!0,control:Object(R.d)(J.a,{value:this.state.asc,onChange:e=>this.onControlChange("asc",e)})}),Object(R.d)(Xn,{label:Object(C.e)("Allow multiple selections"),isCheckbox:!0,tooltip:Object(C.e)("Multiple selections allowed, otherwise filter is limited to a single value"),control:Object(R.d)(J.a,{value:this.state.multiple,onChange:e=>this.onControlChange(Et.g.MULTIPLE,e)})}),Object(R.d)(Xn,{label:Object(C.e)("Search all filter options"),tooltip:Object(C.e)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database)."),isCheckbox:!0,control:Object(R.d)(J.a,{value:this.state.searchAllOptions,onChange:e=>this.onControlChange(Et.g.SEARCH_ALL_OPTIONS,e)})}),Object(R.d)(Xn,{label:Object(C.e)("Required"),tooltip:Object(C.e)("User must select a value for this filter"),isCheckbox:!0,control:Object(R.d)(J.a,{value:!this.state.clearable,onChange:e=>this.onControlChange("clearable",!e)})}))}renderPopover(){return Object(R.d)("div",{id:"ts-col-popo",style:tr},this.renderForm())}render(){return Object(R.d)("span",null,this.textSummary()," ",Object(R.d)(w.a,{trigger:"click",placement:"right",content:this.renderPopover(),title:Object(C.e)("Filter configuration")},Object(R.d)(E.a,{icon:"edit",className:"text-primary",label:"edit-ts-column"})))}}nr.propTypes=er,nr.defaultProps={onChange:()=>{},asc:!0,clearable:!0,multiple:!0,searchAllOptions:!1};var rr=n(3809);function ar({displayGhostButton:e=!0,...t}){const n=Object(P.i)(),[{isOver:r,canDrop:a},o]=Object(rr.a)({accept:t.accept,drop:e=>{t.onDrop(e)},canDrop:e=>t.canDrop(e),collect:e=>({isOver:e.isOver(),canDrop:e.canDrop(),type:e.getItemType()})});return Object(R.d)("div",{ref:o},Object(R.d)(se.g,null,Object(R.d)(G.a,t)),Object(R.d)(se.e,{canDrop:a,isOver:r},t.valuesRenderer(),e&&Object(R.d)(se.a,{cancelHover:!0},Object(R.d)(Re.a.PlusSmall,{iconColor:n.colors.grayscale.light1}),Object(C.e)(t.ghostButtonText||"Drop columns"))))}n(405);var or=n(133),ir=n.n(or),sr=n(982),lr=n.n(sr),cr=n(3810);function ur(e){const t=Object(P.i)();return Object(R.d)(se.j,{withCaret:e.withCaret},Object(R.d)(se.d,{role:"button",onClick:()=>e.clickClose(e.index)},Object(R.d)(Re.a.XSmall,{iconColor:t.colors.grayscale.light1})),Object(R.d)(se.h,null,e.children),e.withCaret&&Object(R.d)(se.c,null,Object(R.d)(Re.a.CaretRight,{iconColor:t.colors.grayscale.light1})))}function dr(e){const{index:t,type:n,onShiftOptions:r,clickClose:o,withCaret:i,children:l,...c}=e,u=Object(s.useRef)(null),d={dragIndex:t,type:n},[,p]=Object(cr.a)({item:d,collect:e=>({isDragging:e.isDragging()})}),[,h]=Object(rr.a)({accept:n,hover:(e,n)=>{var a;if(!u.current)return;const{dragIndex:o}=e,i=t;if(o===i)return;const s=null==(a=u.current)?void 0:a.getBoundingClientRect(),l=(s.bottom-s.top)/2,c=n.getClientOffset(),d=null!=c&&c.y?(null==c?void 0:c.y)-s.top:0;o<i&&d<l||o>i&&d>l||(r(o,i),e.dragIndex=i)}});return p(h(u)),Object(R.d)(se.f,a()({ref:u},c),Object(R.d)(ur,{index:t,clickClose:o,withCaret:i},l))}class pr{constructor(e,t){var n;let r;this.options=e,jt()(t)?(r=t,this.isArray=!0):(r=t?[t]:[],this.isArray=!1),this.values=p()(n=f()(r).call(r,t=>t in e?e[t]:null)).call(n,Boolean)}add(e){e in this.options&&ir()(this).push(this.options[e])}del(e){var t;mt()(t=ir()(this)).call(t,e,1)}replace(e,t){ir()(this)[e]&&(ir()(this)[e]=this.options[t])}swap(e,t){[ir()(this)[e],ir()(this)[t]]=[ir()(this)[t],ir()(this)[e]]}has(e){var t;return!(null==(t=this.getValues())||!b()(t).call(t,e))}getValues(){var e;return this.isArray?f()(e=ir()(this)).call(e,e=>e.column_name):ir()(this).length>0?ir()(this)[0].column_name:void 0}}var hr=n(430),fr=n.n(hr),gr=n(554),br=n.n(gr),vr=n(251),mr=n(866),yr=n(66);const _r=e=>!(e instanceof yr.c)&&(null==e?void 0:e.expressionType);var Or=n(82),xr=n.n(Or),Cr=n(825),jr=n(1287);const Er=e=>e&&!(e instanceof Ft.b)&&e.expressionType,wr=e=>e?jt()(e)?f()(e).call(e,e=>Er(e)?new Ft.b(e):e):Er(e)?[new Ft.b(e)]:[e]:[],Sr=(e,t,n)=>{var r;return null!=(r=null==e?void 0:p()(e).call(e,e=>{var r;return jt()(t)?!b()(t).call(t,null!=(r=e.metric_name)?r:"")||e.metric_name===n:e}))?r:[]};var Tr={AnnotationLayerControl:F,BoundsControl:X,CheckboxControl:J.a,CollectionControl:ge,ColorMapControl:Oe,ColorPickerControl:Se,ColorSchemeControl:Me.a,DatasourceControl:nt,DateFilterControl:rt.a,DndColumnSelectControl:ar,DndColumnSelect:e=>{const{value:t,options:n,multi:r=!0}=e,o=new pr(n,t),[i,l]=Object(s.useState)(ir()(o)),c=t=>{o.del(t),l(ir()(o)),e.onChange(o.getValues())},u=(t,n)=>{o.swap(t,n),l(ir()(o)),e.onChange(o.getValues())};return Object(R.d)(ar,a()({onDrop:t=>{const n=t.value;o.isArray||lr()(ir()(o))?o.add(n.column_name):o.replace(0,n.column_name),l(ir()(o)),e.onChange(o.getValues())},canDrop:e=>(r||0===ir()(o).length)&&!o.has(e.value.column_name),valuesRenderer:()=>f()(i).call(i,(e,t)=>Object(R.d)(dr,{key:t,index:t,clickClose:c,onShiftOptions:u,type:Lt.a.ColumnOption},Object(R.d)(St.a,{column:e,showType:!0}))),accept:Lt.a.Column,displayGhostButton:r||0===ir()(o).length,ghostButtonText:Object(C.f)("Drop column","Drop columns",r?2:1)},e))},DndFilterSelect:e=>{var t;const n=br()(null!=(t=e.value)?t:[]),[r,o]=Object(s.useState)(f()(n).call(n,e=>_r(e)?new yr.c(e):e)),[i,c]=Object(s.useState)(void 0),[u,d]=Object(s.useState)(!1),[h,g]=Object(s.useState)(null),b=(e,t)=>{var n,r,a;const o=p()(n=[...e,...f()(r=[...(null==t?void 0:t.metrics)||[],null==t?void 0:t.metric]).call(r,e=>e&&("string"==typeof e?{saved_metric_name:e}:new Ft.b(e)))]).call(n,e=>e);return fr()(a=pt()(o).call(o,(e,t)=>("saved_metric_name"in t&&t.saved_metric_name?e.push({...t,filterOptionName:t.saved_metric_name}):"column_name"in t&&t.column_name?e.push({...t,filterOptionName:`_col_${t.column_name}`}):t instanceof Ft.b&&e.push({...t,filterOptionName:`_adhocmetric_${t.label}`}),e),[])).call(a,(e,t)=>{var n,r;return null!=(n=null==(r=e.saved_metric_name||e.column_name||e.label)?void 0:r.localeCompare(t.saved_metric_name||t.column_name||t.label||""))?n:0})},[v,y]=Object(s.useState)(b(e.columns,e.formData));Object(s.useEffect)(()=>{const{datasource:t}=e;if(t&&"table"===t.type){var n;const e=null==(n=t.database)?void 0:n.id,{datasource_name:r,schema:a,is_sqllab_view:o}=t;!o&&e&&r&&a&&Ie.a.get({endpoint:`/superset/extra_table_metadata/${e}/${r}/${a}/`}).then(({json:e})=>{if(e&&e.partitions){const{partitions:t}=e;t&&t.cols&&1===m()(t.cols).length&&c(t.cols[0])}}).catch(e=>{vr.a.error("fetch extra_table_metadata:",e.statusText)})}},[]),Object(s.useEffect)(()=>{y(b(e.columns,e.formData))},[e.columns,e.formData]),Object(s.useEffect)(()=>{var t;o(f()(t=e.value||[]).call(t,e=>_r(e)?new yr.c(e):e))},[e.value]);const _=t=>{const n=[...r];mt()(n).call(n,t,1),o(n),e.onChange(n)},O=(e,t)=>{const n=[...r];[n[t],n[e]]=[n[e],n[t]],o(n)},x=t=>{e.onChange(f()(r).call(r,e=>e.filterOptionName===t.filterOptionName?t:e))},j=e=>{d(e)},E=Object(s.useMemo)(()=>null!=h&&h.metric_name?new yr.c({expressionType:yr.b.SQL,clause:yr.a.HAVING,sqlExpression:null==h?void 0:h.expression}):h instanceof Ft.b?new yr.c({expressionType:yr.b.SQL,clause:yr.a.HAVING,sqlExpression:null==h?void 0:h.translateToSql()}):new yr.c({subject:null==h?void 0:h.column_name}),[h]);return Object(R.d)(l.a.Fragment,null,Object(R.d)(ar,a()({onDrop:e=>{g(e.value),j(!0)},canDrop:()=>!0,valuesRenderer:()=>f()(r).call(r,(t,n)=>{const r=t.getDefaultLabel();return Object(R.d)(mr.a,{key:n,adhocFilter:t,options:v,datasource:e.datasource,onFilterEdit:x,partitionColumn:i},Object(R.d)(dr,{key:n,index:n,clickClose:_,onShiftOptions:O,type:Lt.a.FilterOption,withCaret:!0},Object(R.d)(Pe.a,{title:r},r)))}),accept:[Lt.a.Column,Lt.a.Metric,Lt.a.MetricOption,Lt.a.AdhocMetricOption],ghostButtonText:Object(C.e)("Drop columns or metrics")},e)),Object(R.d)(mr.a,{adhocFilter:E,options:v,datasource:e.datasource,onFilterEdit:t=>{const n=(t=>{if(t instanceof yr.c)return t;const n=t;return n.saved_metric_name?new yr.c({expressionType:"druid"===e.datasource.type?yr.b.SIMPLE:yr.b.SQL,subject:"druid"===e.datasource.type?n.saved_metric_name:(r=n.saved_metric_name,null==(a=bt()(o=e.savedMetrics).call(o,e=>e.metric_name===r))?void 0:a.expression),operator:Et.k[">"],comparator:0,clause:yr.a.HAVING}):n.label?new yr.c({expressionType:"druid"===e.datasource.type?yr.b.SIMPLE:yr.b.SQL,subject:"druid"===e.datasource.type?n.label:new Ft.b(t).translateToSql(),operator:Et.k[">"],comparator:0,clause:yr.a.HAVING}):n.column_name?new yr.c({expressionType:yr.b.SIMPLE,subject:n.column_name,operator:Et.k["=="],comparator:"",clause:yr.a.WHERE,isNew:!0}):null;var r,a,o})(t);if(n){const t=[...r,n];o(t),e.onChange(t)}},partitionColumn:i,isControlledComponent:!0,visible:u,togglePopover:j,closePopover:()=>{j(!1)},createNew:!0},Object(R.d)("div",null)))},DndMetricSelect:e=>{const{onChange:t,multi:n,columns:r,savedMetrics:o}=e,i=Object(s.useCallback)(e=>{var r;if(null===e)return void t(null);const a=Object(Cr.a)(e),o=p()(r=f()(a).call(a,e=>e.metric_name?e.metric_name:e)).call(r,e=>e);t(n?o:o[0])},[n,t]),[l,c]=Object(s.useState)(wr(e.value)),[u,d]=Object(s.useState)(null),[h,g]=Object(s.useState)(!1),v=Object(jr.a)(r),m=Object(jr.a)(o);Object(s.useEffect)(()=>{c(wr(e.value))},[xr()(e.value)]),Object(s.useEffect)(()=>{$()(v,r)&&$()(m,o)||((e,t,n)=>{var r,a,o,i,s;const l=new xt.a(f()(r=[...t||[],...n||[]]).call(r,e=>e.column_name||e.metric_name));return _t()(a=p()(o=f()(i=p()(s=Object(Cr.a)(e)).call(s,e=>e)).call(i,e=>e.column?e.column.column_name:e.column_name||e)).call(o,e=>e&&"string"==typeof e)).call(a,e=>l.has(e))})(e.value,r,o)||t([])},[v,r,m,o,e.value,t]);const y=e=>{const t=[...l,e];c(t),i(t)},_=(e,t)=>{const n=f()(l).call(l,n=>n!==t.metric_name&&void 0===n.optionName||n.optionName!==t.optionName?n:e);c(n),i(n)},O=(e,t)=>{const n=[...l];[n[t],n[e]]=[n[e],n[t]],c(n)},x=(n,r)=>{var a;return Object(R.d)(rn,{key:r,index:r,option:n,onMetricEdit:_,onRemoveMetric:()=>(e=>{if(!jt()(l))return;const n=[...l];mt()(n).call(n,e,1),c(n),t(n)})(r),columns:e.columns,savedMetrics:e.savedMetrics,savedMetricsOptions:Sr(e.savedMetrics,e.value,null==(a=e.value)?void 0:a[r]),datasourceType:e.datasourceType,onMoveLabel:O,onDropLabel:()=>t(l)})},j=e=>{g(e)},E=Object(s.useMemo)(()=>{if((null==u?void 0:u.type)===Lt.a.Column){const e=null==u?void 0:u.value;return new Ft.b({column:{column_name:null==e?void 0:e.column_name}})}return new Ft.b({isNew:!0})},[null==u?void 0:u.type,null==u?void 0:u.value]);return Object(R.d)("div",{className:"metrics-select"},Object(R.d)(ar,a()({onDrop:e=>{e.type===Lt.a.Metric&&y(e.value),e.type===Lt.a.Column&&(d(e),j(!0))},canDrop:t=>{const n="metric"===t.type&&b()(l).call(l,t.value.metric_name);return(e.multi||0===l.length)&&!n},valuesRenderer:()=>f()(l).call(l,(e,t)=>x(e,t)),accept:[Lt.a.Column,Lt.a.Metric],ghostButtonText:Object(C.f)("Drop column or metric","Drop columns or metrics",n?2:1),displayGhostButton:n||0===l.length},e)),Object(R.d)(Jt,{adhocMetric:E,onMetricEdit:y,columns:e.columns,savedMetricsOptions:Sr(e.savedMetrics,e.value),savedMetric:{},datasourceType:e.datasourceType,isControlledComponent:!0,visible:h,togglePopover:j,closePopover:()=>{j(!1)},createNew:!0},Object(R.d)("div",null)))},FixedOrMetricControl:vn,HiddenControl:yn,SelectAsyncControl:_n.a,SelectControl:On.a,SliderControl:Sn,SpatialControl:Tn.a,TextAreaControl:Mn.a,TextControl:it.a,TimeSeriesColumnControl:Nn,ViewportControl:qn,VizTypeControl:zn.a,MetricsControl:dn,AdhocFilterControl:$n.a,FilterBoxItemControl:nr,...u.b};n(3611);class Mr extends l.a.PureComponent{constructor(e){var t,n,r;super(e),this.state={hovered:!1},this.onChange=i()(t=this.onChange).call(t,this),this.onMouseEnter=i()(n=this.setHover).call(n,this,!0),this.onMouseLeave=i()(r=this.setHover).call(r,this,!1)}onChange(e,t){this.props.actions.setControlValue(this.props.name,e,t)}setHover(e){this.setState({hovered:e})}render(){const{type:e,hidden:t}=this.props;if(!e)return null;const n="string"==typeof e?Tr[e]:e;return n?Object(R.d)("div",{className:"Control",style:t?{display:"none"}:void 0,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},Object(R.d)(c.a,null,Object(R.d)(n,a()({onChange:this.onChange,hovered:this.state.hovered},this.props)))):`Unknown controlType: ${e}`}}},1278:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return i}));var r=n(25),a=n(3976),o=n.n(a),i={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};l.rankings=i;var s=function(e,t){return String(e.rankedValue).localeCompare(String(t.rankedValue))};function l(e,t,n){void 0===n&&(n={});var a=n,o=a.keys,l=a.threshold,u=void 0===l?i.MATCHES:l,p=a.baseSort,f=void 0===p?s:p,g=a.sorter;return(void 0===g?function(e){return e.sort((function(e,t){return function(e,t,n){var r=e.rank,a=e.keyIndex,o=t.rank,i=t.keyIndex;return r===o?a===i?n(e,t):a<i?-1:1:r>o?-1:1}(e,t,f)}))}:g)(e.reduce((function(e,a,s){var l=function(e,t,n,r){if(!t){return{rankedValue:e,rank:c(e,n,r),keyIndex:-1,keyThreshold:r.threshold}}return function(e,t){for(var n=[],r=0,a=t.length;r<a;r++)for(var o=t[r],i=h(o),s=d(e,o),l=0,c=s.length;l<c;l++)n.push({itemValue:s[l],attributes:i});return n}(e,t).reduce((function(e,t,a){var o=e.rank,s=e.rankedValue,l=e.keyIndex,u=e.keyThreshold,d=t.itemValue,p=t.attributes,h=c(d,n,r),f=s,g=p.minRanking,b=p.maxRanking,v=p.threshold;return h<g&&h>=i.MATCHES?h=g:h>b&&(h=b),h>o&&(o=h,l=a,u=v,f=d),{rankedValue:f,rank:o,keyIndex:l,keyThreshold:u}}),{rankedValue:e,rank:i.NO_MATCH,keyIndex:-1,keyThreshold:r.threshold})}(a,o,t,n),p=l.rank,f=l.keyThreshold;p>=(void 0===f?u:f)&&e.push(Object(r.a)({},l,{item:a,index:s}));return e}),[])).map((function(e){return e.item}))}function c(e,t,n){return e=u(e,n),(t=u(t,n)).length>e.length?i.NO_MATCH:e===t?i.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase())===(t=t.toLowerCase())?i.EQUAL:e.startsWith(t)?i.STARTS_WITH:e.includes(" "+t)?i.WORD_STARTS_WITH:e.includes(t)?i.CONTAINS:1===t.length?i.NO_MATCH:(r=e,a="",r.split(" ").forEach((function(e){e.split("-").forEach((function(e){a+=e.substr(0,1)}))})),a).includes(t)?i.ACRONYM:function(e,t){var n=0,r=0;function a(e,t,r){for(var a=r,o=t.length;a<o;a++){if(t[a]===e)return n+=1,a+1}return-1}var o=a(t[0],e,0);if(o<0)return i.NO_MATCH;r=o;for(var s=1,l=t.length;s<l;s++){var c=t[s];if(!((r=a(c,e,r))>-1))return i.NO_MATCH}return function(e){var r=1/e,a=n/t.length;return i.MATCHES+a*r}(r-o)}(e,t);var r,a}function u(e,t){return e=""+e,t.keepDiacritics||(e=o()(e)),e}function d(e,t){var n;if("object"==typeof t&&(t=t.key),"function"==typeof t)n=t(e);else if(null==e)n=null;else if(Object.hasOwnProperty.call(e,t))n=e[t];else{if(t.includes("."))return function(e,t){for(var n=e.split("."),r=[t],a=0,o=n.length;a<o;a++){for(var i=n[a],s=[],l=0,c=r.length;l<c;l++){var u=r[l];if(null!=u)if(Object.hasOwnProperty.call(u,i)){var d=u[i];null!=d&&s.push(d)}else"*"===i&&(s=s.concat(u))}r=s}if(Array.isArray(r[0])){var p=[];return p.concat.apply(p,r)}return r}(t,e);n=null}return null==n?[]:Array.isArray(n)?n:[String(n)]}var p={maxRanking:1/0,minRanking:-1/0};function h(e){return"string"==typeof e?p:Object(r.a)({},p,e)}},1280:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),a=n.n(r),o=n(18),i=n(531),s=n(217),l=n(1);const c=Object(o.e)("Unexpected error");function u({title:e=c,error:t,subtitle:n,copyText:r,link:o,stackTrace:u,source:d}){if(t){const e=Object(i.a)().get(t.error_type);if(e)return Object(l.d)(e,{error:t,source:d,subtitle:n})}return Object(l.d)(s.a,{level:"warning",title:e,subtitle:n,copyText:r,source:d,body:o||u?Object(l.d)(a.a.Fragment,null,o&&Object(l.d)("a",{href:o,target:"_blank",rel:"noopener noreferrer"},"(Request Access)"),Object(l.d)("br",null),u&&Object(l.d)("pre",null,u)):void 0})}},1287:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e,t){const n=Object(r.useRef)(t);return Object(r.useEffect)(()=>{n.current=e},[e]),n.current}},1292:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},1293:function(e,t,n){var r=n(583),a=n(500),o=n(579),i=n(836),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=a(e);return t}:i;e.exports=s},1294:function(e,t,n){"use strict";var r=n(3),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(8)),i=a(n(6)),s=a(n(15)),l=r(n(0)),c=r(n(321)),u=a(n(7)),d=a(n(3610)),p=n(67),h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},f=l.forwardRef((function(e,t){var n=l.useContext(p.ConfigContext),r=n.getPrefixCls,a=n.direction,f=n.getPopupContainer,g=l.useState({}),b=(0,s.default)(g,2),v=b[0],m=b[1],y=function(e,t){m((function(n){return(0,i.default)((0,i.default)({},n),(0,o.default)({},e,t))}))},_=function(e,t){return e||(t?"rtl"===a?"left":"right":"top")},O=function(t){var n=t.tooltipPrefixCls,r=t.prefixCls,a=t.info,o=a.value,s=a.dragging,u=a.index,p=h(a,["value","dragging","index"]),g=e.tipFormatter,b=e.tooltipVisible,m=e.tooltipPlacement,O=e.getTooltipPopupContainer,x=e.vertical,C=!!g&&(v[u]||s),j=b||void 0===b&&C;return l.createElement(d.default,{prefixCls:n,title:g?g(o):"",visible:j,placement:_(m,x),transitionName:"zoom-down",key:u,overlayClassName:"".concat(r,"-tooltip"),getPopupContainer:O||f||function(){return document.body}},l.createElement(c.Handle,(0,i.default)({},p,{value:o,onMouseEnter:function(){return y(u,!0)},onMouseLeave:function(){return y(u,!1)}})))},x=e.prefixCls,C=e.tooltipPrefixCls,j=e.range,E=e.className,w=h(e,["prefixCls","tooltipPrefixCls","range","className"]),S=r("slider",x),T=r("tooltip",C),M=(0,u.default)(E,(0,o.default)({},"".concat(S,"-rtl"),"rtl"===a));return"rtl"!==a||w.vertical||(w.reverse=!w.reverse),j?l.createElement(c.Range,(0,i.default)({},w,{step:w.step,className:M,ref:t,handle:function(e){return O({tooltipPrefixCls:T,prefixCls:S,info:e})},prefixCls:S})):l.createElement(c.default,(0,i.default)({},w,{step:w.step,className:M,ref:t,handle:function(e){return O({tooltipPrefixCls:T,prefixCls:S,info:e})},prefixCls:S}))}));f.displayName="Slider",f.defaultProps={tipFormatter:function(e){return"number"==typeof e?e.toString():""}};var g=f;t.default=g},1295:function(e,t,n){var r=n(835),a=n(1293),o=n(414);e.exports=function(e){return r(e,o,a)}},1296:function(e,t){e.exports={}},1297:function(e,t,n){var r=n(581),a=n(121);e.exports=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),o=e.apply(n,t);return a(o)?o:n}}},1299:function(e,t,n){"use strict";function r(e,t,n){var r=n.getRegistry(),a=r.addTarget(e,t);return[a,function(){return r.removeTarget(a)}]}function a(e,t,n){var r=n.getRegistry(),a=r.addSource(e,t);return[a,function(){return r.removeSource(a)}]}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}))},1303:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s.a})),n.d(t,"b",(function(){return s.c}));n(0);var r=n(65),a=n(1);const o=r.g.span`
  &,
  & svg {
    vertical-align: top;
  }
`;function i({checked:e,onChange:t,style:n}){return Object(a.d)(o,{style:n,onClick:()=>{t(!e)},role:"checkbox",tabIndex:0,"aria-checked":e,"aria-label":"Checkbox"},e?Object(a.d)(s.a,null):Object(a.d)(s.c,null))}var s=n(1795)},1305:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n(65).g.div`
  .edit-popover-resize {
    transform: scaleX(-1);
    float: right;
    margin-top: ${({theme:e})=>4*e.gridUnit}px;
    margin-right: ${({theme:e})=>-2*e.gridUnit}px;
    cursor: nwse-resize;
  }
  .filter-sql-editor {
    border: ${({theme:e})=>e.colors.grayscale.light2} solid thin;
  }
  .custom-sql-disabled-message {
    color: ${({theme:e})=>e.colors.grayscale.light1};
    font-size: ${({theme:e})=>e.typography.sizes.xs}px;
    text-align: center;
    margin-top: ${({theme:e})=>15*e.gridUnit}px;
  }
`},1306:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(0);var r=n(5),a=n.n(r),o=n(332),i=n(314),s=n(218),l=n(1);const c={option:a.a.oneOfType([o.a,a.a.shape({saved_metric_name:a.a.string.isRequired}),i.a]).isRequired};function u({option:e}){return e.saved_metric_name?Object(l.d)(s.a,{column:{column_name:e.saved_metric_name,type:"expression"},showType:!0}):e.column_name?Object(l.d)(s.a,{column:e,showType:!0}):e.label?Object(l.d)(s.a,{column:{column_name:e.label,type:"expression"},showType:!0}):void 0}u.propTypes=c},1307:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(394),a=n(839),o=n(0);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){var s=l(function(e,t,n){var s=i(Object(o.useState)((function(){return t(e)})),2),l=s[0],c=s[1],u=Object(o.useCallback)((function(){var r=t(e);Object(a.a)(l,r)||(c(r),n&&n())}),[l,e,n]);return Object(r.a)(u,[]),[l,u]}(e,t,n),2),c=s[0],u=s[1];return Object(r.a)((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(u,{handlerIds:[t]})}),[e,u]),c}},1308:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n(75);function o(e,t){"function"==typeof e?e(t):e.current=t}function i(e,t){var n=e.ref;return Object(a.a)("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?Object(r.cloneElement)(e,{ref:function(e){o(n,e),o(t,e)}}):Object(r.cloneElement)(e,{ref:t})}function s(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function l(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var o=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object(r.isValidElement)(t)){var a=t;return e(a,n),a}var o=t;s(o);var l=n?function(t){return e(t,n)}:e;return i(o,l)}}(a);t[n]=function(){return o}}})),t}},1311:function(e,t,n){"use strict";n.d(t,"b",(function(){return m}));var r=n(50),a=n.n(r),o=n(296),i=n.n(o),s=n(96),l=n.n(s),c=n(33),u=n.n(c),d=n(1828),p=n(268),h=n(1827),f=n(317),g=n(49),b=n(557),v=n(124);function m(e){let t={};return e&&(t={id:e}),{...t,extraFormData:{},filterState:{value:void 0},ownState:{}}}function y(e,t,n,r){var a;u()(e).call(e,e=>{var a;t[e.id]={...m(e.id),...e.defaultDataMask,...n[e.id]},r&&!Object(v.f)(e.defaultDataMask,null==(a=r[e.id])?void 0:a.defaultDataMask,{ignoreUndefined:!0})&&(t[e.id]={...t[e.id],...e.defaultDataMask})}),u()(a=l()(n)).call(a,e=>{var n;i()(n=String(null==e?void 0:e.id)).call(n,h.a)||(t[null==e?void 0:e.id]=e)})}const _=Object(d.a)((e,t)=>{var n,r,o,i;const s={};switch(t.type){case b.c:return e[t.filterId]={...m(t.filterId),...e[t.filterId],...t.dataMask},e;case f.a:var l,c,d;if(Object(g.c)(p.a.DASHBOARD_CROSS_FILTERS))u()(l=a()(null==(c=t.data.dashboardInfo)?void 0:null==(d=c.metadata)?void 0:d.chart_configuration)).call(l,e=>{s[e]={...m(e)}});return y(null!=(n=null==(r=t.data.dashboardInfo)?void 0:null==(o=r.metadata)?void 0:o.native_filter_configuration)?n:[],s,e),s;case b.a:return y(null!=(i=t.filterConfig)?i:[],s,e,t.filters),s;default:return e}},{});t.a=_},133:function(e,t,n){e.exports=n(3509)},1388:function(e,t,n){"use strict";n.r(t),n.d(t,"TIME_RANGE",(function(){return Y}));var r=n(76),a=n.n(r),o=n(50),i=n.n(o),s=n(33),l=n.n(s),c=n(296),u=n.n(c),d=n(430),p=n.n(d),h=n(39),f=n.n(h),g=n(87),b=n.n(g),v=n(96),m=n.n(v),y=n(41),_=n.n(y),O=n(14),x=n.n(O),C=n(71),j=n.n(C),E=n(17),w=n.n(E),S=n(118),T=n.n(S),M=n(0),P=n.n(M),R=n(5),A=n.n(R),D=n(577),k=n(77),I=n(62),L=n(825),F=n(134),N=n(18),U=n(177),B=n(137),W=n(1302),H=n(1392),q=n(1259),z=n(867),$=n(145),G=n(860),V=n(48),K=(n(3612),n(1));const Y=V.o.time_range,Q={chartId:A.a.number.isRequired,origSelectedValues:A.a.object,datasource:A.a.object.isRequired,instantFiltering:A.a.bool,filtersFields:A.a.arrayOf(A.a.shape({field:A.a.string,label:A.a.string})),filtersChoices:A.a.objectOf(A.a.arrayOf(A.a.shape({id:A.a.string,text:A.a.string,filter:A.a.string,metric:A.a.number}))),onChange:A.a.func,onFilterMenuOpen:A.a.func,onFilterMenuClose:A.a.func,showDateFilter:A.a.bool,showSqlaTimeGrain:A.a.bool,showSqlaTimeColumn:A.a.bool,showDruidTimeGrain:A.a.bool,showDruidTimeOrigin:A.a.bool};class X extends P.a.PureComponent{constructor(e){var t,n,r,a;super(e),this.onCloseDateFilterControl=()=>this.onFilterMenuClose(Y),this.state={selectedValues:e.origSelectedValues,hasChanged:!1},this.debouncerCache={},this.maxValueCache={},this.changeFilter=w()(t=this.changeFilter).call(t,this),this.onFilterMenuOpen=w()(n=this.onFilterMenuOpen).call(n,this),this.onOpenDateFilterControl=w()(r=this.onOpenDateFilterControl).call(r,this),this.onFilterMenuClose=w()(a=this.onFilterMenuClose).call(a,this)}onFilterMenuOpen(e){return this.props.onFilterMenuOpen(this.props.chartId,e)}onFilterMenuClose(e){return this.props.onFilterMenuClose(this.props.chartId,e)}onOpenDateFilterControl(){return this.onFilterMenuOpen(Y)}getControlData(e){const{selectedValues:t}=this.state,n={...z.a[e],name:e,key:`control-${e}`,value:t[V.o[e]],actions:{setControlValue:this.changeFilter}},r=n.mapStateToProps;return r?{...n,...r(this.props)}:n}getKnownMax(e,t){return this.maxValueCache[e]=Math.max(this.maxValueCache[e]||0,Object(D.max)(t||this.props.filtersChoices[e]||[],e=>e.metric)),this.maxValueCache[e]}clickApply(){const{selectedValues:e}=this.state;this.setState({hasChanged:!1},()=>{this.props.onChange(e,!1)})}changeFilter(e,t){const n=V.o[e]||e;let r=null;var a;if(null!==t)if(j()(t))r=x()(t).call(t,e=>"string"==typeof e?e:e.value);else if(_()(a=m()(V.o)).call(a,n)){var o;r=null!=(o=t.value)?o:t}else{var i;r=Object(L.a)(null!=(i=t.value)?i:t)}this.setState(e=>({selectedValues:{...e.selectedValues,[n]:r},hasChanged:!0}),()=>{this.props.instantFiltering&&this.props.onChange({[n]:r},!1)})}debounceLoadOptions(e){return e in this.debouncerCache||(this.debouncerCache[e]=T()((t,n)=>{this.loadOptions(e,t).then(n)},U.e)),this.debouncerCache[e]}transformOptions(e,t){const n=void 0===t?Object(D.max)(e,e=>e.metric):t;return x()(e).call(e,e=>{const t=Math.round(e.metric/n*100),r={backgroundImage:`linear-gradient(to right, lightgrey, lightgrey ${t}%, rgba(0,0,0,0) ${t}%`};let a=e.id;return!0===a?a=U.b:!1===a&&(a=U.a),{value:e.id,label:a,style:r}})}async loadOptions(e,t=""){var n,r,a;const o=t.toLowerCase(),i=b()(n=this.props.filtersFields).call(n,t=>t.key===e).asc,s={...this.props.rawFormData,adhoc_filters:t?[{clause:"WHERE",expressionType:"SIMPLE",subject:e,operator:"ILIKE",comparator:`%${o}%`}]:null},{json:l}=await F.a.get({url:Object($.h)({formData:s,endpointType:"json",method:"GET"})}),c=f()(r=(null==l?void 0:null==(a=l.data)?void 0:a[e])||[]).call(r,e=>e.id);return c&&0!==c.length?(o&&p()(c).call(c,(e,t)=>{const n=e.id.toLowerCase(),r=t.id.toLowerCase(),a=u()(r).call(r,o)-u()(n).call(n,o);return 0===a?(e.metric-t.metric)*(i?1:-1):a}),this.transformOptions(c,this.getKnownMax(e,c))):[]}renderDateFilter(){const{showDateFilter:e}=this.props,t=V.n.time_range;return e?Object(K.d)("div",{className:"row space-1"},Object(K.d)("div",{className:"col-lg-12 col-xs-12"},Object(K.d)(W.a,{name:Y,label:t,description:Object(N.e)("Select start and end date"),onChange:e=>{this.changeFilter(Y,e)},onOpenDateFilterControl:this.onOpenDateFilterControl,onCloseDateFilterControl:this.onCloseDateFilterControl,value:this.state.selectedValues[Y]||"No filter"}))):null}renderDatasourceFilters(){const{showSqlaTimeGrain:e,showSqlaTimeColumn:t,showDruidTimeGrain:n,showDruidTimeOrigin:r}=this.props,a=[],o=[],i=[];return e&&o.push("time_grain_sqla"),t&&o.push("granularity_sqla"),n&&i.push("granularity"),r&&i.push("druid_time_origin"),o.length&&a.push(Object(K.d)(H.a,{key:"sqla-filters",controls:x()(o).call(o,e=>Object(K.d)(q.a,this.getControlData(e)))})),i.length&&a.push(Object(K.d)(H.a,{key:"druid-filters",controls:x()(i).call(i,e=>Object(K.d)(q.a,this.getControlData(e)))})),a}renderSelect(e){var t,n;const{filtersChoices:r}=this.props,{selectedValues:o}=this.state;this.debouncerCache={},this.maxValueCache={},l()(t=f()(n=i()(o)).call(n,e=>e in r)).call(t,e=>{var t;if(!o[e])return;const n=r[e]||(r[e]=[]),i=new a.a(x()(n).call(n,e=>e.id)),s=j()(o[e])?o[e]:[o[e]];l()(t=f()(s).call(s,e=>null!==e&&!i.has(e))).call(t,t=>{n.unshift({filter:e,id:t,text:t,metric:0})})});const{key:s,label:c,[V.g.MULTIPLE]:u,[V.g.DEFAULT_VALUE]:d,[V.g.CLEARABLE]:p,[V.g.SEARCH_ALL_OPTIONS]:h}=e,g=r[s]||[];let b=o[s]||null;return void 0===b&&d&&(b=u?d.split(";"):d),Object(K.d)(G.a,{cacheOptions:!0,loadOptions:this.debounceLoadOptions(s),defaultOptions:this.transformOptions(g),key:s,placeholder:Object(N.e)("Type or Select [%s]",c),isMulti:u,isClearable:p,value:b,options:this.transformOptions(g),onChange:e=>{e!==b&&this.changeFilter(s,e)},onMenuOpen:()=>this.onFilterMenuOpen(s),onBlur:()=>this.onFilterMenuClose(s),onMenuClose:()=>this.onFilterMenuClose(s),selectWrap:h&&g.length>=V.h?k.a:k.c,noResultsText:Object(N.e)("No results found"),forceOverflow:!0})}renderFilters(){const{filtersFields:e=[]}=this.props;return x()(e).call(e,e=>{const{label:t,key:n}=e;return Object(K.d)("div",{key:n,className:"m-b-5 filter-container"},Object(K.d)(B.c,{htmlFor:`LABEL-${n}`},t),this.renderSelect(e))})}render(){var e;const{instantFiltering:t,width:n,height:r}=this.props;return Object(K.d)("div",{style:{width:n,height:r,overflow:"auto"}},this.renderDateFilter(),this.renderDatasourceFilters(),this.renderFilters(),!t&&Object(K.d)(I.a,{buttonSize:"small",buttonStyle:"primary",onClick:w()(e=this.clickApply).call(e,this),disabled:!this.state.hasChanged},Object(N.e)("Apply")))}}X.propTypes=Q,X.defaultProps={origSelectedValues:{},onChange:()=>{},onFilterMenuOpen:()=>{},onFilterMenuClose:()=>{},showDateFilter:!1,showSqlaTimeGrain:!1,showSqlaTimeColumn:!1,showDruidTimeGrain:!1,showDruidTimeOrigin:!1,instantFiltering:!1},t.default=X},1392:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(14),a=n.n(r),o=n(41),i=n.n(o),s=n(39),l=n.n(s),c=(n(0),n(1));function u({controls:e}){const t=12/l()(e).call(e,e=>{var t;return!i()(t=["ColorMapControl"]).call(t,null==e?void 0:e.props.type)}).length;return Object(c.d)("div",{className:"row space-1"},a()(e).call(e,(e,n)=>Object(c.d)("div",{className:`col-lg-${t} col-xs-12`,key:n},e)))}},1393:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(52);var r=n(150),a=n.n(r),o=n(73),i=n.n(o),s=n(48);function l(e={}){const{date_filter:t,filter_configs:n=[],show_druid_time_granularity:r,show_druid_time_origin:o,show_sqla_time_column:l,show_sqla_time_granularity:c}=e;let u=i()(n).call(n,({columns:e,labels:t},n)=>{let r=n[s.g.DEFAULT_VALUE];return""===r&&(r=null),r&&n[s.g.MULTIPLE]&&(r=n.defaultValue.split(";")),{columns:{...e,[n.column]:n.vals||r},labels:{...t,[n.column]:n.label}}},{columns:{},labels:{}});if(t){var d;let t={...u.columns,[s.o.time_range]:e.time_range};const n={...u.labels,...i()(d=a()(s.o)).call(d,(e,[t,n])=>({...e,[n]:s.n[t]}),{})};c&&(t={...t,[s.o.time_grain_sqla]:e.time_grain_sqla}),l&&(t={...t,[s.o.granularity_sqla]:e.granularity_sqla}),r&&(t={...t,[s.o.granularity]:e.granularity}),o&&(t={...t,[s.o.druid_time_origin]:e.druid_time_origin}),u={...u,columns:t,labels:n}}return u}},1396:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return b}));var r=n(33),a=n.n(r),o=n(134),i=n(18),s=n(178),l=n.n(s),c=n(109),u=n(386),d=n(102);const p="SET_ALL_SLICES";function h(e){return{type:p,payload:{slices:e}}}const f="FETCH_ALL_SLICES_STARTED";const g="FETCH_ALL_SLICES_FAILED";function b(e){return(t,n)=>{const{sliceEntities:r}=n();return 0===r.lastUpdated?(t({type:f}),o.a.get({endpoint:`/api/v1/chart/?q=${l.a.encode({columns:["changed_on_delta_humanized","changed_on_utc","datasource_id","datasource_type","datasource_url","datasource_name_text","description_markeddown","description","id","params","slice_name","url","viz_type"],filters:[{col:"owners",opr:"rel_m_m",value:e}],page_size:200,order_column:"changed_on_delta_humanized",order_direction:"desc"})}`}).then(({json:e})=>{var n;const r={};return a()(n=e.result).call(n,e=>{let t=JSON.parse(e.params);t={...t,datasource:Object(u.b)(e.datasource_id,e.datasource_type)||t.datasource},r[e.id]={slice_id:e.id,slice_url:e.url,slice_name:e.slice_name,form_data:t,datasource_name:e.datasource_name_text,datasource_url:e.datasource_url,datasource_id:e.datasource_id,datasource_type:e.datasource_type,changed_on:new Date(e.changed_on_utc).getTime(),description:e.description,description_markdown:e.description_markeddown,viz_type:e.viz_type,modified:e.changed_on_delta_humanized,changed_on_humanized:e.changed_on_delta_humanized}}),t(h(r))}).catch(e=>console.log(e)||Object(d.a)(e).then(({error:e})=>{t(function(e){return{type:g,payload:{error:e}}}(e||Object(i.e)("Could not fetch all saved charts"))),t(Object(c.c)(Object(i.e)("Sorry there was an error fetching saved charts: ")+e))}))):t(h(r.slices))}}},1400:function(e,t,n){var r=n(875),a=n(3512)(r);e.exports=a},1405:function(e,t,n){"use strict";n(0);var r=n(65),a=n(999),o=n(103),i=n(68),s=n(1);t.a=function({warningMarkdown:e}){const t=Object(r.i)();return Object(s.d)(i.a,{id:"warning-tooltip",title:Object(s.d)(a.a,{source:e})},Object(s.d)(o.a.AlertSolid,{iconColor:t.colors.alert.base}))}},1408:function(e,t,n){var r=n(118),a=n(121);e.exports=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:o,maxWait:t,trailing:i})}},1409:function(e,t){e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},1410:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(41),a=n.n(r),o=n(50),i=n.n(o);const s={};function l({childId:e,layout:t={}}){if(s[e]){var n;const r=t[s[e]]||{};if(r.children&&a()(n=r.children).call(n,e))return r.id}return s[e]=function({childId:e,layout:t={}}){let n=null;const r=i()(t);for(let i=0;i<=r.length-1;i+=1){var o;const s=r[i],l=t[s]||{};if(s!==e&&l.children&&a()(o=l.children).call(o,e)){n=s;break}}return n}({childId:e,layout:t}),s[e]}},1411:function(e,t,n){e.exports=n(1830)},1444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3819);Object.defineProperty(t,"ActionTypes",{enumerable:!0,get:function(){return r.ActionTypes}}),Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return r.ActionCreators}});var a=n(3820);Object.defineProperty(t,"parseActions",{enumerable:!0,get:function(){return a.parseActions}}),Object.defineProperty(t,"isHistory",{enumerable:!0,get:function(){return a.isHistory}}),Object.defineProperty(t,"distinctState",{enumerable:!0,get:function(){return a.distinctState}}),Object.defineProperty(t,"includeAction",{enumerable:!0,get:function(){return a.includeAction}}),Object.defineProperty(t,"excludeAction",{enumerable:!0,get:function(){return a.excludeAction}}),Object.defineProperty(t,"combineFilters",{enumerable:!0,get:function(){return a.combineFilters}}),Object.defineProperty(t,"groupByActionTypes",{enumerable:!0,get:function(){return a.groupByActionTypes}}),Object.defineProperty(t,"newHistory",{enumerable:!0,get:function(){return a.newHistory}});var o=n(4040);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=o,e&&e.__esModule?e:{default:e}).default;var e}})},1460:function(e,t,n){var r=n(875),a=n(1800);e.exports=function(e,t){return e&&r(e,a(t))}},1461:function(e,t,n){var r=n(433),a=n(1292),o=n(582),i=n(1804),s=n(3520),l=n(943),c=n(542),u=n(3521),d=n(3522),p=n(946),h=n(1295),f=n(497),g=n(3523),b=n(3524),v=n(945),m=n(117),y=n(387),_=n(3528),O=n(121),x=n(3530),C=n(432),j=n(414),E={};E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E["[object Function]"]=E["[object WeakMap]"]=!1,e.exports=function e(t,n,w,S,T,M){var P,R=1&n,A=2&n,D=4&n;if(w&&(P=T?w(t,S,T,M):w(t)),void 0!==P)return P;if(!O(t))return t;var k=m(t);if(k){if(P=g(t),!R)return c(t,P)}else{var I=f(t),L="[object Function]"==I||"[object GeneratorFunction]"==I;if(y(t))return l(t,R);if("[object Object]"==I||"[object Arguments]"==I||L&&!T){if(P=A||L?{}:v(t),!R)return A?d(t,s(P,t)):u(t,i(P,t))}else{if(!E[I])return T?t:{};P=b(t,I,R)}}M||(M=new r);var F=M.get(t);if(F)return F;M.set(t,P),x(t)?t.forEach((function(r){P.add(e(r,n,w,r,t,M))})):_(t)&&t.forEach((function(r,a){P.set(a,e(r,n,w,a,t,M))}));var N=k?void 0:(D?A?h:p:A?j:C)(t);return a(N||t,(function(r,a){N&&(r=t[a=r]),o(P,a,e(r,n,w,a,t,M))})),P}},1473:function(e,t,n){var r=n(3619),a=n(3621);e.exports=function(e,t,n){return r(a,e,t,n)}},1474:function(e,t,n){var r=n(1807),a=n(3623),o=n(3624),i=n(1809),s=n(3636),l=n(1477),c=n(3637),u=n(1815),d=n(1816),p=n(1462),h=Math.max;e.exports=function(e,t,n,f,g,b,v,m){var y=2&t;if(!y&&"function"!=typeof e)throw new TypeError("Expected a function");var _=f?f.length:0;if(_||(t&=-97,f=g=void 0),v=void 0===v?v:h(p(v),0),m=void 0===m?m:p(m),_-=g?g.length:0,64&t){var O=f,x=g;f=g=void 0}var C=y?void 0:l(e),j=[e,t,n,f,g,O,x,b,v,m];if(C&&c(j,C),e=j[0],t=j[1],n=j[2],f=j[3],g=j[4],!(m=j[9]=void 0===j[9]?y?0:e.length:h(j[9]-_,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||16==t?o(e,t,m):32!=t&&33!=t||g.length?i.apply(void 0,j):s(e,t,n,f);else var E=a(e,t,n);return d((C?r:u)(E,j),e,t)}},1475:function(e,t,n){var r=n(581),a=n(1476);function o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}o.prototype=r(a.prototype),o.prototype.constructor=o,e.exports=o},1476:function(e,t){e.exports=function(){}},1477:function(e,t,n){var r=n(1808),a=n(3518),o=r?function(e){return r.get(e)}:a;e.exports=o},1478:function(e,t,n){var r=n(581),a=n(1476);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}o.prototype=r(a.prototype),o.prototype.constructor=o,e.exports=o},1479:function(e,t){e.exports=function(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var i=e[n];i!==t&&"__lodash_placeholder__"!==i||(e[n]="__lodash_placeholder__",o[a++]=n)}return o}},1480:function(e,t,n){var r=n(213),a=n(117),o=n(152);e.exports=function(e){return"string"==typeof e||!a(e)&&o(e)&&"[object String]"==r(e)}},1481:function(e,t,n){e.exports=n(3513)},1482:function(e,t,n){"use strict";n(330);var r=n(51),a=n(304),o=n(1726),i=n(293),s=n(571),l=n(310),c=n(876),u=n(270),d=n(443),p=n(225),h=n(292),f=n(231),g=n(189),b=n(139),v=n(570),m=n(984),y=n(1832),_=n(515),O=n(84),x=a("fetch"),C=a("Headers"),j=O("iterator"),E=u.set,w=u.getterFor("URLSearchParams"),S=u.getterFor("URLSearchParamsIterator"),T=/\+/g,M=Array(4),P=function(e){return M[e-1]||(M[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},R=function(e){try{return decodeURIComponent(e)}catch(t){return e}},A=function(e){var t=e.replace(T," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(P(n--),R);return t}},D=/[!'()~]|%20/g,k={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},I=function(e){return k[e]},L=function(e){return encodeURIComponent(e).replace(D,I)},F=function(e,t){if(t)for(var n,r,a=t.split("&"),o=0;o<a.length;)(n=a[o++]).length&&(r=n.split("="),e.push({key:A(r.shift()),value:A(r.join("="))}))},N=function(e){this.entries.length=0,F(this.entries,e)},U=function(e,t){if(e<t)throw TypeError("Not enough arguments")},B=c((function(e,t){E(this,{type:"URLSearchParamsIterator",iterator:y(w(e).entries),kind:t})}),"Iterator",(function(){var e=S(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),W=function(){d(this,W,"URLSearchParams");var e,t,n,r,a,o,i,s,l,c=arguments.length>0?arguments[0]:void 0,u=this,h=[];if(E(u,{type:"URLSearchParams",entries:h,updateURL:function(){},updateSearchParams:N}),void 0!==c)if(b(c))if("function"==typeof(e=_(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((i=(o=(a=y(g(r.value))).next).call(a)).done||(s=o.call(a)).done||!o.call(a).done)throw TypeError("Expected sequence with length 2");h.push({key:i.value+"",value:s.value+""})}else for(l in c)p(c,l)&&h.push({key:l,value:c[l]+""});else F(h,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},H=W.prototype;s(H,{append:function(e,t){U(arguments.length,2);var n=w(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){U(arguments.length,1);for(var t=w(this),n=t.entries,r=e+"",a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){U(arguments.length,1);for(var t=w(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){U(arguments.length,1);for(var t=w(this).entries,n=e+"",r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){U(arguments.length,1);for(var t=w(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){U(arguments.length,1);for(var n,r=w(this),a=r.entries,o=!1,i=e+"",s=t+"",l=0;l<a.length;l++)(n=a[l]).key===i&&(o?a.splice(l--,1):(o=!0,n.value=s));o||a.push({key:i,value:s}),r.updateURL()},sort:function(){var e,t,n,r=w(this),a=r.entries,o=a.slice();for(a.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}r.updateURL()},forEach:function(e){for(var t,n=w(this).entries,r=h(e,arguments.length>1?arguments[1]:void 0,3),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),i(H,j,H.entries),i(H,"toString",(function(){for(var e,t=w(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(L(e.key)+"="+L(e.value));return n.join("&")}),{enumerable:!0}),l(W,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:W}),o||"function"!=typeof x||"function"!=typeof C||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,a=[e];return arguments.length>1&&(t=arguments[1],b(t)&&(n=t.body,"URLSearchParams"===f(n)&&((r=t.headers?new C(t.headers):new C).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=v(t,{body:m(0,String(n)),headers:m(0,r)}))),a.push(t)),x.apply(this,a)}}),e.exports={URLSearchParams:W,getState:w}},1483:function(e,t,n){var r=n(580),a=n(413),o=n(1484),i=n(1295);e.exports=function(e,t){if(null==e)return{};var n=r(i(e),(function(e){return[e]}));return t=a(t),o(e,n,(function(e,n){return t(e,n[0])}))}},1484:function(e,t,n){var r=n(572),a=n(1485),o=n(484);e.exports=function(e,t,n){for(var i=-1,s=t.length,l={};++i<s;){var c=t[i],u=r(e,c);n(u,c)&&a(l,o(c,e),u)}return l}},1485:function(e,t,n){var r=n(582),a=n(484),o=n(381),i=n(121),s=n(325);e.exports=function(e,t,n,l){if(!i(e))return e;for(var c=-1,u=(t=a(t,e)).length,d=u-1,p=e;null!=p&&++c<u;){var h=s(t[c]),f=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(c!=d){var g=p[h];void 0===(f=l?l(g,h,p):void 0)&&(f=i(g)?g:o(t[c+1])?[]:{})}r(p,h,f),p=p[h]}return e}},1486:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch((0,o.default)(e)){case"void":return function(e){return e};case"string":return function(t){return(0,a.default)(t,[e])};case"array":return function(t){return(0,a.default)(t,e)};default:return console.error("Invalid paths argument, should be of type String, Array or Void")}};var a=r(n(1487)),o=r(n(1488));e.exports=t.default},1487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={};return t.forEach((function(t){var r=e[t];r&&(n[t]=r)})),n},e.exports=t.default},1488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return"void";if(r(e))return e.length?"array":"void";return typeof e};var r=Array.isArray||(Array.isArray=function(e){return""+e!==e&&"[object Array]"==={}.toString.call(e)});e.exports=t.default},1489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){return t?r({},e,t):e},e.exports=t.default},1494:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n(52);var r=n(31),a=n.n(r),o=n(1),i=n(14),s=n.n(i),l=n(17),c=n.n(l),u=n(316),d=n.n(u),p=n(0),h=n.n(p),f=n(5),g=n.n(f),b=n(77),v=n(68),m=n(120);const y={description:g.a.string,label:g.a.string.isRequired,labelMargin:g.a.number,name:g.a.string.isRequired,onChange:g.a.func,value:g.a.string,clearable:g.a.bool,default:g.a.string,choices:g.a.oneOfType([g.a.arrayOf(g.a.array),g.a.func]),schemes:g.a.oneOfType([g.a.object,g.a.func]),isLinear:g.a.bool};var _={name:"kjime2",styles:"list-style:none;margin:0;padding:0;display:flex;align-items:center;& li{flex-basis:9px;height:10px;margin:9px 1px;}"};class O extends h.a.PureComponent{constructor(e){var t,n;super(e),this.onChange=c()(t=this.onChange).call(t,this),this.renderOption=c()(n=this.renderOption).call(n,this)}onChange(e){const t=e?e.value:null;this.props.onChange(t)}renderOption(e){const{isLinear:t}=this.props,n=this.schemes[e.value];let r=[];return n&&(r=t?n.getColors(10):n.colors),Object(o.d)(v.a,{id:`${n.id}-tooltip`,title:n.label},Object(o.d)("ul",{css:_},s()(r).call(r,(e,t)=>Object(o.d)("li",{key:`${n.id}-${t}`,css:Object(o.c)({backgroundColor:e,border:`1px solid ${"white"===e?"black":e}`},"","")}," "))))}render(){var e;const{schemes:t,choices:n,labelMargin:r=0}=this.props;this.schemes=d()(t)?t():t;const i=s()(e=d()(n)?n():n).call(e,([e,t])=>{var n;return{value:e,label:(null==(n=this.schemes[e])?void 0:n.label)||t}}),l={multi:!1,name:`select-${this.props.name}`,placeholder:`Select (${i.length})`,default:this.props.default,options:i,value:this.props.value,autosize:!1,clearable:this.props.clearable,onChange:this.onChange,optionRenderer:this.renderOption,valueRenderer:this.renderOption};return Object(o.d)("div",null,Object(o.d)(m.a,this.props),Object(o.d)(b.h,a()({},l,{css:Object(o.c)({marginTop:r},"","")})))}}O.propTypes=y,O.defaultProps={choices:[],schemes:{},clearable:!1,onChange:()=>{}}},1495:function(e,t,n){var r=n(307),a=n(3616)((function(e,t,n){r(e,n,t)}));e.exports=a},1496:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return h}));var r=n(50),a=n.n(r),o=n(73),i=n.n(o);function s(e){var t;return i()(t=a()(e)).call(t,(e,t)=>{const n=e;return n[t]=t,n},{})}const l={FORMULA:{value:"FORMULA",label:"Formula"},EVENT:{value:"EVENT",label:"Event",supportNativeSource:!0},INTERVAL:{value:"INTERVAL",label:"Interval",supportNativeSource:!0},TIME_SERIES:{value:"TIME_SERIES",label:"Time series"}},c=s(l),u=c.FORMULA,d={NATIVE:{value:"NATIVE",label:"Superset annotation"}},p=s(d);function h(e){return!!e}},159:function(e,t,n){"use strict";n.d(t,"f",(function(){return g})),n.d(t,"j",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"i",(function(){return x})),n.d(t,"e",(function(){return C})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return E})),n.d(t,"k",(function(){return w}));n(52);var r=n(31),a=n.n(r),o=n(0),i=n(3809),s=n(3810),l=n(65),c=n(18),u=n(173),d=n(68),p=n(103),h=n(218),f=n(1);const g=l.g.div`
  margin-bottom: ${({theme:e})=>e.gridUnit}px;
  :last-child {
    margin-bottom: 0;
  }
`,b=l.g.div`
  display: flex;
  align-items: center;
  width: 100%;
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  height: ${({theme:e})=>6*e.gridUnit}px;
  background-color: ${({theme:e})=>e.colors.grayscale.light3};
  border-radius: 3px;
  cursor: ${({withCaret:e})=>e?"pointer":"default"};
`,v=l.g.div`
  ${({theme:e})=>`\n    display: flex;\n    max-width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    align-items: center;\n    white-space: nowrap;\n    padding-left: ${e.gridUnit}px;\n    svg {\n      margin-right: ${e.gridUnit}px;\n      margin-left: ${e.gridUnit}px;\n    }\n    .type-label {\n      margin-right: ${2*e.gridUnit}px;\n      margin-left: ${e.gridUnit}px;\n      font-weight: ${e.typography.weights.normal};\n      width: auto;\n    }\n    .option-label {\n      display: inline;\n    }\n  `}
`,m=l.g.div`
  height: 100%;
  border-left: solid 1px ${({theme:e})=>e.colors.grayscale.dark2}0C;
  margin-left: auto;
`,y=l.g.div`
  height: 100%;
  width: ${({theme:e})=>6*e.gridUnit}px;
  border-right: solid 1px ${({theme:e})=>e.colors.grayscale.dark2}0C;
  cursor: pointer;
`,_=Object(l.g)(u.a)`
  margin: 0 ${({theme:e})=>e.gridUnit}px;
`,O=l.g.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`,x=l.g.div`
  padding: ${({theme:e})=>e.gridUnit}px;
  border: solid 1px ${({theme:e})=>e.colors.grayscale.light2};
  border-radius: ${({theme:e})=>e.gridUnit}px;
`,C=l.g.div`
  padding: ${({theme:e})=>e.gridUnit}px;
  border: ${({canDrop:e,isOver:t,theme:n})=>e?`dashed 1px ${n.colors.info.dark1}`:t&&!e?`dashed 1px ${n.colors.error.dark1}`:`solid 1px ${n.colors.grayscale.light2}`};
  border-radius: ${({theme:e})=>e.gridUnit}px;
`,j=l.g.div`
  display: flex;
  align-items: center;
  width: 100%;
  height: ${({theme:e})=>6*e.gridUnit}px;
  padding-left: ${({theme:e})=>e.gridUnit}px;
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  color: ${({theme:e})=>e.colors.grayscale.light1};
  border: dashed 1px ${({theme:e})=>e.colors.grayscale.light2};
  border-radius: ${({theme:e})=>e.gridUnit}px;
  cursor: ${({cancelHover:e})=>e?"inherit":"pointer"};

  :hover {
    background-color: ${({cancelHover:e,theme:t})=>e?"inherit":t.colors.grayscale.light4};
  }

  :active {
    background-color: ${({cancelHover:e,theme:t})=>e?"inherit":t.colors.grayscale.light3};
  }
`,E=l.g.button`
  display: flex;
  align-items: center;
  justify-content: center;
  height: ${({theme:e})=>4*e.gridUnit}px;
  width: ${({theme:e})=>4*e.gridUnit}px;
  padding: 0;
  background-color: ${({theme:e})=>e.colors.primary.dark1};
  border: none;
  border-radius: 2px;

  :disabled {
    cursor: not-allowed;
    background-color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,w=({label:e,savedMetric:t,adhocMetric:n,onRemove:r,onMoveLabel:u,onDropLabel:O,withCaret:x,isFunction:C,type:j,index:E,isExtra:w,tooltipTitle:S,...T})=>{const M=Object(l.i)(),P=Object(o.useRef)(null),[,R]=Object(i.a)({accept:j,drop(){null==O||O()},hover(e,t){var n;if(!P.current)return;const r=e.index,a=E;if(r===a)return;const o=null==(n=P.current)?void 0:n.getBoundingClientRect(),i=(o.bottom-o.top)/2,s=t.getClientOffset(),l=null!=s&&s.y?(null==s?void 0:s.y)-o.top:0;r<a&&l<i||r>a&&l>i||(null==u||u(r,a),e.index=a)}}),[,A]=Object(s.a)({item:{type:j,index:E,value:null!=t&&t.metric_name?t:n},collect:e=>({isDragging:e.isDragging()})});return A(R(P)),Object(f.d)(g,{ref:P},Object(f.d)(b,a()({withCaret:x},T),Object(f.d)(y,{role:"button",onClick:r},Object(f.d)(p.a.XSmall,{iconColor:M.colors.grayscale.light1})),Object(f.d)(v,null,C&&Object(f.d)(p.a.FunctionX,{viewBox:"0 0 16 11",iconSize:"l"}),null!=t&&t.metric_name?Object(f.d)(h.b,{metric:t}):Object(f.d)(d.a,{title:S},e)),w&&Object(f.d)(_,{icon:"exclamation-triangle",placement:"top",bsStyle:"warning",tooltip:Object(c.e)("\n                This filter was inherited from the dashboard's context.\n                It won't be saved when saving the chart.\n              ")}),x&&Object(f.d)(m,null,Object(f.d)(p.a.CaretRight,{iconColor:M.colors.grayscale.light1}))))}},168:function(e,t,n){"use strict";n.r(t),n.d(t,"CHART_UPDATE_STARTED",(function(){return A})),n.d(t,"chartUpdateStarted",(function(){return D})),n.d(t,"CHART_UPDATE_SUCCEEDED",(function(){return k})),n.d(t,"chartUpdateSucceeded",(function(){return I})),n.d(t,"CHART_UPDATE_STOPPED",(function(){return L})),n.d(t,"chartUpdateStopped",(function(){return F})),n.d(t,"CHART_UPDATE_FAILED",(function(){return N})),n.d(t,"chartUpdateFailed",(function(){return U})),n.d(t,"CHART_RENDERING_FAILED",(function(){return B})),n.d(t,"chartRenderingFailed",(function(){return W})),n.d(t,"CHART_RENDERING_SUCCEEDED",(function(){return H})),n.d(t,"chartRenderingSucceeded",(function(){return q})),n.d(t,"REMOVE_CHART",(function(){return z})),n.d(t,"removeChart",(function(){return $})),n.d(t,"ANNOTATION_QUERY_SUCCESS",(function(){return G})),n.d(t,"annotationQuerySuccess",(function(){return V})),n.d(t,"ANNOTATION_QUERY_STARTED",(function(){return K})),n.d(t,"annotationQueryStarted",(function(){return Y})),n.d(t,"ANNOTATION_QUERY_FAILED",(function(){return Q})),n.d(t,"annotationQueryFailed",(function(){return X})),n.d(t,"DYNAMIC_PLUGIN_CONTROLS_READY",(function(){return J})),n.d(t,"dynamicPluginControlsReady",(function(){return Z})),n.d(t,"getChartDataRequest",(function(){return ee})),n.d(t,"runAnnotationQuery",(function(){return te})),n.d(t,"TRIGGER_QUERY",(function(){return ne})),n.d(t,"triggerQuery",(function(){return re})),n.d(t,"RENDER_TRIGGERED",(function(){return ae})),n.d(t,"renderTriggered",(function(){return oe})),n.d(t,"UPDATE_QUERY_FORM_DATA",(function(){return ie})),n.d(t,"updateQueryFormData",(function(){return se})),n.d(t,"UPDATE_CHART_ID",(function(){return le})),n.d(t,"updateChartId",(function(){return ce})),n.d(t,"ADD_CHART",(function(){return ue})),n.d(t,"addChart",(function(){return de})),n.d(t,"exploreJSON",(function(){return pe})),n.d(t,"GET_SAVED_CHART",(function(){return he})),n.d(t,"getSavedChart",(function(){return fe})),n.d(t,"POST_CHART_FORM_DATA",(function(){return ge})),n.d(t,"postChartFormData",(function(){return be})),n.d(t,"redirectSQLLab",(function(){return ve})),n.d(t,"refreshChart",(function(){return me}));n(52);var r=n(14),a=n.n(r),o=n(33),i=n.n(o),s=n(73),l=n.n(s),c=n(41),u=n.n(c),d=n(88),p=n.n(d),h=n(50),f=n.n(h),g=n(82),b=n.n(g),v=n(12),m=n.n(v),y=n(134),_=n(18),O=n(560),x=n(49),C=n(145),j=n(1496),E=n(109),w=n(838),S=n(327),T=n(102),M=n(562),P=n(557),R=n(1805);const A="CHART_UPDATE_STARTED";function D(e,t,n){return{type:A,queryController:e,latestQueryFormData:t,key:n}}const k="CHART_UPDATE_SUCCEEDED";function I(e,t){return{type:k,queriesResponse:e,key:t}}const L="CHART_UPDATE_STOPPED";function F(e){return{type:L,key:e}}const N="CHART_UPDATE_FAILED";function U(e,t){return{type:N,queriesResponse:e,key:t}}const B="CHART_RENDERING_FAILED";function W(e,t,n){return{type:B,error:e,key:t,stackTrace:n}}const H="CHART_RENDERING_SUCCEEDED";function q(e){return{type:H,key:e}}const z="REMOVE_CHART";function $(e){return{type:z,key:e}}const G="ANNOTATION_QUERY_SUCCESS";function V(e,t,n){return{type:G,annotation:e,queryResponse:t,key:n}}const K="ANNOTATION_QUERY_STARTED";function Y(e,t,n){return{type:K,annotation:e,queryController:t,key:n}}const Q="ANNOTATION_QUERY_FAILED";function X(e,t,n){return{type:Q,annotation:e,queryResponse:t,key:n}}const J="DYNAMIC_PLUGIN_CONTROLS_READY",Z=()=>(e,t)=>{const n=t(),r=Object(O.b)(n.explore,n.explore.form_data);e({type:J,key:r.slice_id.value,controlsState:r})};async function ee({formData:e,setDataMask:t=(()=>{}),resultFormat:n="json",resultType:r="full",force:a=!1,method:o="POST",requestParams:i={},ownState:s={}}){let l={...i};return M.a&&(l={...l,mode:"cors",credentials:"include"}),Object(C.m)(e)?(async(e,t,n,r,a="POST",o={})=>{const i=Object(C.i)({resultFormat:t,resultType:n}),s=M.a&&(null==o?void 0:o.dashboard_id),l=Object(C.h)({formData:e,endpointType:i,force:r,allowDomainSharding:s,method:a,requestParams:o.dashboard_id?{dashboard_id:o.dashboard_id}:{}}),c={...o,url:l,postPayload:{form_data:e}};return(Object(x.c)(x.a.CLIENT_CACHE)?y.a.get:y.a.post)(c).then(({json:e})=>({result:[e]}))})(e,n,r,a,o,l):(async(e,t,n,r,a,o,i)=>{const s=Object(C.a)({formData:e,resultType:n,resultFormat:t,force:r,setDataMask:o,ownState:i}),{slice_id:l}=e,{dashboard_id:c}=a,u={};void 0!==l&&(u.form_data=`{"slice_id":${l}}`),void 0!==c&&(u.dashboard_id=c),!1!==r&&(u.force=r);const d=M.a&&(null==a?void 0:a.dashboard_id),p=Object(C.e)({path:"/api/v1/chart/data",qs:u,allowDomainSharding:d}).toString(),h={...a,url:p,headers:{"Content-Type":"application/json"},body:b()(s)};return y.a.post(h).then(({json:e})=>e)})(e,n,r,a,l,t,s)}function te(e,t=60,n=null,r,a=!1,o=!1){return function(i,s){var c;const d=r||f()(s().charts)[0],h={...n||s().charts[d].latestQueryFormData};if(!Object(j.f)(e.sourceType))return p.a.resolve();const g=h.time_grain_sqla||h.granularity;h.time_grain_sqla=g,h.granularity=g;const b=f()(e.overrides);(u()(b).call(b,"since")||u()(b).call(b,"until"))&&(e.overrides={...e.overrides,time_range:null});const v=l()(c=f()(e.overrides)).call(c,(t,n)=>({...t,[n]:e.overrides[n]||h[n]}),{});if(!a&&h){const e=h.extra_filters&&h.extra_filters.length>0;v.extra_filters=e?h.extra_filters:void 0}const m=e.sourceType===j.a.NATIVE,_=Object(C.d)(e.value,v,m,o),O=new AbortController,{signal:x}=O;return i(Y(e,O,d)),y.a.get({url:_,signal:x,timeout:1e3*t}).then(({json:t})=>i(V(e,t,d))).catch(t=>Object(T.a)(t).then(t=>{var n;"timeout"===t.statusText?i(X(e,{error:"Query timeout"},d)):u()(n=(t.error||"").toLowerCase()).call(n,"no data")?i(V(e,t,d)):"abort"!==t.statusText&&i(X(e,t,d))}))}}const ne="TRIGGER_QUERY";function re(e=!0,t){return{type:ne,value:e,key:t}}const ae="RENDER_TRIGGERED";function oe(e,t){return{type:ae,value:e,key:t}}const ie="UPDATE_QUERY_FORM_DATA";function se(e,t){return{type:ie,value:e,key:t}}const le="UPDATE_CHART_ID";function ce(e,t=0){return{type:le,newId:e,key:t}}const ue="ADD_CHART";function de(e,t){return{type:ue,chart:e,key:t}}function pe(e,t=!1,n=60,r,o,s,l){return async c=>{const u=S.q.getTimestamp(),d=new AbortController,h={signal:d.signal,timeout:1e3*n};s&&(h.dashboard_id=s);const f=ee({setDataMask:t=>{c(Object(P.e)(e.slice_id,t))},formData:e,resultFormat:"json",resultType:"full",force:t,method:o,requestParams:h,ownState:l});c(D(d,e,r));const g=f.then(e=>{const t=e.result;if(Object(x.c)(x.a.GLOBAL_ASYNC_QUERIES)){const t="result"in e?e.result[0]:e;return Object(R.a)(t)}return t}).then(n=>(i()(n).call(n,n=>c(Object(w.logEvent)(S.h,{slice_id:r,applied_filters:n.applied_filters,is_cached:n.is_cached,force_refresh:t,row_count:n.rowcount,datasource:e.datasource,start_offset:u,ts:(new Date).getTime(),duration:S.q.getTimestamp()-u,has_extra_filters:e.extra_filters&&e.extra_filters.length>0,viz_type:e.viz_type,data_age:n.is_cached?m()(new Date).diff(m.a.utc(n.cached_dttm)):null}))),c(I(n,r)))).catch(t=>{if(Object(x.c)(x.a.GLOBAL_ASYNC_QUERIES))return c(U([t],r));const n=(t,n)=>{c(Object(w.logEvent)(S.h,{slice_id:r,has_err:!0,is_cached:n,error_details:t,datasource:e.datasource,start_offset:u,ts:(new Date).getTime(),duration:S.q.getTimestamp()-u}))};return"AbortError"===t.name?(n("abort"),c(F(r))):Object(T.a)(t).then(e=>("timeout"===t.statusText?n("timeout"):n(e.error,e.is_cached),c(U([e],r))))}),b=Object(C.m)(e)&&e.annotation_layers||[],v=s>0;return p.a.all([g,c(re(!1,r)),c(se(e,r)),...a()(b).call(b,a=>c(te(a,n,e,r,v,t)))])}}const he="GET_SAVED_CHART";function fe(e,t=!1,n=60,r,a,o){return pe(e,t,n,r,"GET",a,o)}const ge="POST_CHART_FORM_DATA";function be(e,t=!1,n=60,r,a,o){return pe(e,t,n,r,"POST",a,o)}function ve(e){return t=>{ee({formData:e,resultFormat:"json",resultType:"query"}).then(({result:t})=>{const n={datasourceKey:e.datasource,sql:t[0].query};Object(C.l)("/superset/sqllab/",n)}).catch(()=>t(Object(E.c)(Object(_.e)("An error occurred while loading the SQL"))))}}function me(e,t,n){return(r,a)=>{var o;const i=(a().charts||{})[e],s=a().dashboardInfo.common.conf.SUPERSET_WEBSERVER_TIMEOUT;i.latestQueryFormData&&0!==f()(i.latestQueryFormData).length&&r(be(i.latestQueryFormData,t,s,i.id,n,null==(o=a().dataMask[i.id])?void 0:o.ownState))}}},1690:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(18),a=n(1396),o=n(317);const i={slices:{},isLoading:!0,errorMessage:null,lastUpdated:0};function s(e=i,t){const n={[o.a]:()=>({...t.data.sliceEntities}),[a.b]:()=>({...e,isLoading:!0}),[a.c]:()=>({...e,isLoading:!1,slices:{...e.slices,...t.payload.slices},lastUpdated:(new Date).getTime()}),[a.a]:()=>({...e,isLoading:!1,lastUpdated:(new Date).getTime(),errorMessage:t.payload.error||Object(r.e)("Could not fetch all saved charts")})};return t.type in n?n[t.type]():e}},1691:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(33),a=n.n(r),o=n(978),i=n(317);function s({filterSetsConfig:e,filterConfig:t,state:n}){const r={},o={};var i;t?(a()(t).call(t,e=>{const{id:t}=e;o[t]=e}),r.filters=o):r.filters=null!=(i=null==n?void 0:n.filters)?i:{};if(e){const t={};a()(e).call(e,e=>{const{id:n}=e;t[n]=e}),r.filterSets=t}else{var s;r.filterSets=null!=(s=null==n?void 0:n.filterSets)?s:{}}return r.focusedFilterId=void 0,r}function l(e={filters:{},filterSets:{}},t){const{filterSets:n}=e;switch(t.type){case i.a:return{filters:t.data.nativeFilters.filters,filterSets:t.data.nativeFilters.filterSets};case o.a:return{...e,filterSets:{...n,[t.filtersSetId]:{id:t.filtersSetId,name:t.name,dataMask:t.dataMask}}};case o.b:return s({filterConfig:t.filterConfig,state:e});case o.c:return s({filterSetsConfig:t.filterSetsConfig,state:e});case o.d:return{...e,focusedFilterId:t.id};case o.e:return{...e,focusedFilterId:void 0};default:return e}}},1692:function(e,t,n){"use strict";(function(e){function r(e){o.length||(a(),!0),o[o.length]=e}n.d(t,"a",(function(){return r}));var a,o=[],i=0;function s(){for(;i<o.length;){var e=i;if(i+=1,o[e].call(),i>1024){for(var t=0,n=o.length-i;t<n;t++)o[t]=o[t+i];o.length-=i,i=0}}o.length=0,i=0,!1}var l,c,u,d=void 0!==e?e:self,p=d.MutationObserver||d.WebKitMutationObserver;function h(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof p?(l=1,c=new p(s),u=document.createTextNode(""),c.observe(u,{characterData:!0}),a=function(){l=-l,u.data=l}):a=h(s),r.requestFlush=a,r.makeRequestCallFromTimer=h}).call(this,n(151))},1697:function(e,t,n){var r;!function(n,a){"use strict";function o(){}o.TO_RAD=Math.PI/180,o.TO_DEG=180/Math.PI,o.PI_X2=2*Math.PI,o.PI_DIV4=Math.PI/4;var i=Object.create(o.prototype,{version:{value:"2.0.23"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},in:{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:o.prototype},extend:{value:function(e,t){for(var n in e)void 0!==i.prototype[n]&&!0!==t||("function"==typeof e[n]&&"function"==typeof e[n].bind?i.prototype[n]=e[n].bind(i):i.prototype[n]=e[n])}}});void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*o.TO_RAD}),void 0===Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*o.TO_DEG}),i.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(e){if("[object Array]"==Object.prototype.toString.call(e))return{longitude:e.length>=1?0:void 0,latitude:e.length>=2?1:void 0,elevation:e.length>=3?2:void 0};var t=function(t){var n;return t.every((function(t){return"object"!=typeof e||(!e.hasOwnProperty(t)||(n=t,!1))})),n},n=t(["lng","lon","longitude"]),r=t(["lat","latitude"]),a=t(["alt","altitude","elevation","elev"]);return void 0!==r||void 0!==n||void 0!==a?{latitude:r,longitude:n,elevation:a}:void 0},getLat:function(e,t){return!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude])},latitude:function(e){return this.getLat.call(this,e)},getLon:function(e,t){return!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},longitude:function(e){return this.getLon.call(this,e)},getElev:function(e){return e[this.getKeys(e).elevation]},elevation:function(e){return this.getElev.call(this,e)},coords:function(e,t){var n={latitude:!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude]),longitude:!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},r=e[this.getKeys(e).elevation];return void 0!==r&&(n.elevation=r),n},ll:function(e,t){return this.coords.call(this,e,t)},validate:function(e){var t=this.getKeys(e);if(void 0===t||void 0===t.latitude||"undefined"===t.longitude)return!1;var n=e[t.latitude],r=e[t.longitude];return!(void 0===n||!this.isDecimal(n)&&!this.isSexagesimal(n))&&(!(void 0===r||!this.isDecimal(r)&&!this.isSexagesimal(r))&&(n=this.useDecimal(n),r=this.useDecimal(r),!(n<this.minLat||n>this.maxLat||r<this.minLon||r>this.maxLon)))},getDistance:function(e,t,n,r){n=Math.floor(n)||1,r=Math.floor(r)||0;var a,o,s,l,c,u,d,p=this.coords(e),h=this.coords(t),f=6378137,g=6356752.314245,b=1/298.257223563,v=(h.longitude-p.longitude).toRad(),m=Math.atan((1-b)*Math.tan(parseFloat(p.latitude).toRad())),y=Math.atan((1-b)*Math.tan(parseFloat(h.latitude).toRad())),_=Math.sin(m),O=Math.cos(m),x=Math.sin(y),C=Math.cos(y),j=v,E=100;do{var w=Math.sin(j),S=Math.cos(j);if(0===(u=Math.sqrt(C*w*(C*w)+(O*x-_*C*S)*(O*x-_*C*S))))return i.distance=0;a=_*x+O*C*S,o=Math.atan2(u,a),c=a-2*_*x/(l=1-(s=O*C*w/u)*s),isNaN(c)&&(c=0);var T=b/16*l*(4+b*(4-3*l));d=j,j=v+(1-T)*b*s*(o+T*u*(c+T*a*(2*c*c-1)))}while(Math.abs(j-d)>1e-12&&--E>0);if(0===E)return NaN;var M=l*(f*f-g*g)/(g*g),P=M/1024*(256+M*(M*(74-47*M)-128)),R=g*(1+M/16384*(4096+M*(M*(320-175*M)-768)))*(o-P*u*(c+P/4*(a*(2*c*c-1)-P/6*c*(4*u*u-3)*(4*c*c-3))));if(R=R.toFixed(r),void 0!==this.elevation(e)&&void 0!==this.elevation(t)){var A=Math.abs(this.elevation(e)-this.elevation(t));R=Math.sqrt(R*R+A*A)}return this.distance=Math.round(R*Math.pow(10,r)/n)*n/Math.pow(10,r)},getDistanceSimple:function(e,t,n){n=Math.floor(n)||1;var r=Math.round(Math.acos(Math.sin(this.latitude(t).toRad())*Math.sin(this.latitude(e).toRad())+Math.cos(this.latitude(t).toRad())*Math.cos(this.latitude(e).toRad())*Math.cos(this.longitude(e).toRad()-this.longitude(t).toRad()))*this.radius);return i.distance=Math.floor(Math.round(r/n)*n)},getCenter:function(e){var t=e;if("object"==typeof e&&!(e instanceof Array))for(var n in t=[],e)t.push(this.coords(e[n]));if(!t.length)return!1;var r,a,i,s=0,l=0,c=0;t.forEach((function(e){r=this.latitude(e).toRad(),a=this.longitude(e).toRad(),s+=Math.cos(r)*Math.cos(a),l+=Math.cos(r)*Math.sin(a),c+=Math.sin(r)}),this);var u=t.length;return s/=u,l/=u,c/=u,a=Math.atan2(l,s),i=Math.sqrt(s*s+l*l),{latitude:((r=Math.atan2(c,i))*o.TO_DEG).toFixed(6),longitude:(a*o.TO_DEG).toFixed(6)}},getBounds:function(e){if(!e.length)return!1;var t=this.elevation(e[0]),n={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};void 0!==t&&(n.maxElev=0,n.minElev=1/0);for(var r=0,a=e.length;r<a;++r)n.maxLat=Math.max(this.latitude(e[r]),n.maxLat),n.minLat=Math.min(this.latitude(e[r]),n.minLat),n.maxLng=Math.max(this.longitude(e[r]),n.maxLng),n.minLng=Math.min(this.longitude(e[r]),n.minLng),t&&(n.maxElev=Math.max(this.elevation(e[r]),n.maxElev),n.minElev=Math.min(this.elevation(e[r]),n.minElev));return n},getCenterOfBounds:function(e){var t=this.getBounds(e),n=t.minLat+(t.maxLat-t.minLat)/2,r=t.minLng+(t.maxLng-t.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(r.toFixed(6))}},getBoundsOfDistance:function(e,t){var n,r,a=this.latitude(e),i=this.longitude(e),s=a.toRad(),l=i.toRad(),c=t/this.radius,u=s-c,d=s+c,p=this.maxLat.toRad(),h=this.minLat.toRad(),f=this.maxLon.toRad(),g=this.minLon.toRad();if(u>h&&d<p){var b=Math.asin(Math.sin(c)/Math.cos(s));(n=l-b)<g&&(n+=o.PI_X2),(r=l+b)>f&&(r-=o.PI_X2)}else u=Math.max(u,h),d=Math.min(d,p),n=g,r=f;return[{latitude:u.toDeg(),longitude:n.toDeg()},{latitude:d.toDeg(),longitude:r.toDeg()}]},isPointInside:function(e,t){for(var n=!1,r=-1,a=t.length,o=a-1;++r<a;o=r)(this.longitude(t[r])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[o])||this.longitude(t[o])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[r]))&&this.latitude(e)<(this.latitude(t[o])-this.latitude(t[r]))*(this.longitude(e)-this.longitude(t[r]))/(this.longitude(t[o])-this.longitude(t[r]))+this.latitude(t[r])&&(n=!n);return n},preparePolygonForIsPointInsideOptimized:function(e){for(var t=0,n=e.length-1;t<e.length;t++)this.longitude(e[n])===this.longitude(e[t])?(e[t].constant=this.latitude(e[t]),e[t].multiple=0):(e[t].constant=this.latitude(e[t])-this.longitude(e[t])*this.latitude(e[n])/(this.longitude(e[n])-this.longitude(e[t]))+this.longitude(e[t])*this.latitude(e[t])/(this.longitude(e[n])-this.longitude(e[t])),e[t].multiple=(this.latitude(e[n])-this.latitude(e[t]))/(this.longitude(e[n])-this.longitude(e[t]))),n=t},isPointInsideWithPreparedPolygon:function(e,t){for(var n=!1,r=this.longitude(e),a=this.latitude(e),o=0,i=t.length-1;o<t.length;o++)(this.longitude(t[o])<r&&this.longitude(t[i])>=r||this.longitude(t[i])<r&&this.longitude(t[o])>=r)&&(n^=r*t[o].multiple+t[o].constant<a),i=o;return n},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(e,t,n){return this.getDistance(e,t)<n},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(e,t){var n=this.longitude(t).toRad()-this.longitude(e).toRad(),r=Math.log(Math.tan(this.latitude(t).toRad()/2+o.PI_DIV4)/Math.tan(this.latitude(e).toRad()/2+o.PI_DIV4));return Math.abs(n)>Math.PI&&(n=n>0?-1*(o.PI_X2-n):o.PI_X2+n),(Math.atan2(n,r).toDeg()+360)%360},getBearing:function(e,t){return t.latitude=this.latitude(t),t.longitude=this.longitude(t),e.latitude=this.latitude(e),e.longitude=this.longitude(e),(Math.atan2(Math.sin(t.longitude.toRad()-e.longitude.toRad())*Math.cos(t.latitude.toRad()),Math.cos(e.latitude.toRad())*Math.sin(t.latitude.toRad())-Math.sin(e.latitude.toRad())*Math.cos(t.latitude.toRad())*Math.cos(t.longitude.toRad()-e.longitude.toRad())).toDeg()+360)%360},getCompassDirection:function(e,t,n){var r,a;switch(a="circle"==n?this.getBearing(e,t):this.getRhumbLineBearing(e,t),Math.round(a/22.5)){case 1:r={exact:"NNE",rough:"N"};break;case 2:r={exact:"NE",rough:"N"};break;case 3:r={exact:"ENE",rough:"E"};break;case 4:r={exact:"E",rough:"E"};break;case 5:r={exact:"ESE",rough:"E"};break;case 6:r={exact:"SE",rough:"E"};break;case 7:r={exact:"SSE",rough:"S"};break;case 8:r={exact:"S",rough:"S"};break;case 9:r={exact:"SSW",rough:"S"};break;case 10:r={exact:"SW",rough:"S"};break;case 11:r={exact:"WSW",rough:"W"};break;case 12:r={exact:"W",rough:"W"};break;case 13:r={exact:"WNW",rough:"W"};break;case 14:r={exact:"NW",rough:"W"};break;case 15:r={exact:"NNW",rough:"N"};break;default:r={exact:"N",rough:"N"}}return r.bearing=a,r},getDirection:function(e,t,n){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(e,t){return Object.keys(t).map((function(n){var r=this.getDistance(e,t[n]),a=Object.create(t[n]);return a.distance=r,a.key=n,a}),this).sort((function(e,t){return e.distance-t.distance}))},isPointInLine:function(e,t,n){return(this.getDistance(t,e,1,3)+this.getDistance(e,n,1,3)).toFixed(3)==this.getDistance(t,n,1,3)},isPointNearLine:function(e,t,n,r){return this.getDistanceFromLine(e,t,n)<r},getDistanceFromLine:function(e,t,n){var r=this.getDistance(t,e,1,3),a=this.getDistance(e,n,1,3),o=this.getDistance(t,n,1,3),i=Math.acos((r*r+o*o-a*a)/(2*r*o)),s=Math.acos((a*a+o*o-r*r)/(2*a*o));return i>Math.PI/2?r:s>Math.PI/2?a:Math.sin(i)*r},findNearest:function(e,t,n,r){n=n||0,r=r||1;var a=this.orderByDistance(e,t);return 1===r?a[n]:a.splice(n,r)},getPathLength:function(e){for(var t,n=0,r=0,a=e.length;r<a;++r)t&&(n+=this.getDistance(this.coords(e[r]),t)),t=this.coords(e[r]);return n},getSpeed:function(e,t,n){var r=n&&n.unit||"km";"mph"==r?r="mi":"kmh"==r&&(r="km");var a=i.getDistance(e,t)/(1*t.time/1e3-1*e.time/1e3)*3600;return Math.round(a*this.measures[r]*1e4)/1e4},computeDestinationPoint:function(e,t,n,r){var a=this.latitude(e),o=this.longitude(e);r=void 0===r?this.radius:Number(r);var i=Number(t)/r,s=Number(n).toRad(),l=Number(a).toRad(),c=Number(o).toRad(),u=Math.asin(Math.sin(l)*Math.cos(i)+Math.cos(l)*Math.sin(i)*Math.cos(s)),d=c+Math.atan2(Math.sin(s)*Math.sin(i)*Math.cos(l),Math.cos(i)-Math.sin(l)*Math.sin(u));return d=(d+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:u.toDeg(),longitude:d.toDeg()}},convertUnit:function(e,t,n){if(0===t)return 0;if(void 0===t){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;t=this.distance}if(e=e||"m",n=null==n?4:n,void 0!==this.measures[e])return this.round(t*this.measures[e],n);throw new Error("Unknown unit for conversion.")},useDecimal:function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=this;return e=e.map((function(e){if(t.isDecimal(e))return t.useDecimal(e);if("object"==typeof e){if(t.validate(e))return t.coords(e);for(var n in e)e[n]=t.useDecimal(e[n]);return e}return t.isSexagesimal(e)?t.sexagesimal2decimal(e):e}))}if("object"==typeof e&&this.validate(e))return this.coords(e);if("object"==typeof e){for(var n in e)e[n]=this.useDecimal(e[n]);return e}if(this.isDecimal(e))return parseFloat(e);if(!0===this.isSexagesimal(e))return parseFloat(this.sexagesimal2decimal(e));throw new Error("Unknown format.")},decimal2sexagesimal:function(e){if(e in this.sexagesimal)return this.sexagesimal[e];var t=e.toString().split("."),n=Math.abs(t[0]),r=60*("0."+(t[1]||0)),a=r.toString().split(".");return r=Math.floor(r),a=(60*("0."+(a[1]||0))).toFixed(2),this.sexagesimal[e]=n+"° "+r+"' "+a+'"',this.sexagesimal[e]},sexagesimal2decimal:function(e){if(e in this.decimal)return this.decimal[e];var t=new RegExp(this.sexagesimalPattern).exec(e),n=0,r=0;t&&(n=parseFloat(t[2]/60),r=parseFloat(t[4]/3600)||0);var a=(parseFloat(t[1])+n+r).toFixed(8);return a="S"==t[7]||"W"==t[7]?parseFloat(-a):parseFloat(a),this.decimal[e]=a,a},isDecimal:function(e){return e=e.toString().replace(/\s*/,""),!isNaN(parseFloat(e))&&parseFloat(e)==e},isSexagesimal:function(e){return e=e.toString().replace(/\s*/,""),this.sexagesimalPattern.test(e)},round:function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}}),void 0!==e.exports?(e.exports=i,"object"==typeof n&&(n.geolib=i)):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}(this)},1698:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(134),a=n(102);const o="SET_DATASOURCE";function i(e,t){return{type:o,datasource:e,key:t}}function s(e){return(t,n)=>{const{datasources:o}=n(),s=o[e];return s?t(i(s,e)):r.a.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${e}`}).then(({json:n})=>t(i(n,e))).catch(n=>Object(a.a)(n).then(({error:n})=>t(function(e,t){return{type:"FETCH_DATASOURCE_FAILED",error:e,key:t}}(n,e))))}}},1726:function(e,t,n){var r=n(142),a=n(84),o=n(291),i=a("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},1728:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(193),a=n.n(r),o=n(81),i=n(1410),s=n(3500),l=n(869);function c({dropResult:e,layout:t}){const{source:n,destination:r,dragging:c}=e,u=n.id===o.v?Object(l.a)(c.type):t[c.id]||{};if(n.id===r.id)return u.meta.width;const{width:d,minimumWidth:p}=Object(s.a)({component:u,components:t}),{width:h,occupiedWidth:f}=Object(s.a)({id:r.id,components:t});let g=Number(h-f);if(a()(g)){const{width:e,occupiedWidth:n}=Object(s.a)({id:Object(i.a)({childId:r.id,layout:t}),components:t});g=Number(e-n)}return a()(g)||a()(Number(d))?d:g>=d?d:g>=p?g:-1}},1795:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}));n(0);var r=n(65),a=n(1);const o=()=>{const e=Object(r.i)();return Object(a.d)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.d)("path",{d:"M16 0H2C0.89 0 0 0.9 0 2V16C0 17.1 0.89 18 2 18H16C17.11 18 18 17.1 18 16V2C18 0.9 17.11 0 16 0Z",fill:e.colors.primary.base}),Object(a.d)("path",{d:"M7 14L2 9L3.41 7.59L7 11.17L14.59 3.58L16 5L7 14Z",fill:"white"}))},i=()=>{const e=Object(r.i)();return Object(a.d)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.d)("path",{d:"M16 0H2C0.9 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z",fill:e.colors.grayscale.light1}),Object(a.d)("path",{d:"M14 10H4V8H14V10Z",fill:"white"}))},s=()=>{const e=Object(r.i)();return Object(a.d)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.d)("path",{d:"M16 0H2C0.9 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z",fill:e.colors.grayscale.light2}),Object(a.d)("path",{d:"M16 2V16H2V2H16V2Z",fill:"white"}))}},1796:function(e,t,n){var r=n(1797);e.exports=r},1797:function(e,t,n){var r=n(1798),a=Array.prototype;e.exports=function(e){var t=e.sort;return e===a||e instanceof Array&&t===a.sort?r:t}},1798:function(e,t,n){n(1799);var r=n(86);e.exports=r("Array").sort},1799:function(e,t,n){"use strict";var r=n(51),a=n(224),o=n(176),i=n(142),s=n(323),l=[],c=l.sort,u=i((function(){l.sort(void 0)})),d=i((function(){l.sort(null)})),p=s("sort");r({target:"Array",proto:!0,forced:u||!d||!p},{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),a(e))}})},1800:function(e,t,n){var r=n(388);e.exports=function(e){return"function"==typeof e?e:r}},1801:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var r=i(n(0)),a=i(n(105)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3548));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.Checkboard=function(e){var t=e.white,n=e.grey,i=e.size,s=e.renderers,l=e.borderRadius,c=e.boxShadow,u=(0,a.default)({default:{grid:{borderRadius:l,boxShadow:c,absolute:"0px 0px 0px 0px",background:"url("+o.get(t,n,i,s.canvas)+") center left"}}});return r.default.createElement("div",{style:u.grid})};s.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=s},1802:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),s=c(n(118)),l=c(n(439));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.ColorWrap=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(l.default.simpleCheckForValidColor(e)){var r=l.default.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(l.default.simpleCheckForValidColor(e)){var r=l.default.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=r({},l.default.toState(e.color,0)),t.debounce=(0,s.default)((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),a(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(r({},l.default.toState(e.color,this.state.oldHue)))}},{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),i.default.createElement(e,r({},this.props,this.state,{onChange:this.handleChange},t))}}]),n}(o.PureComponent||o.Component);return t.propTypes=r({},e.propTypes),t.defaultProps=r({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=u},1803:function(e,t,n){"use strict";n.r(t),n.d(t,"red",(function(){return r})),n.d(t,"pink",(function(){return a})),n.d(t,"purple",(function(){return o})),n.d(t,"deepPurple",(function(){return i})),n.d(t,"indigo",(function(){return s})),n.d(t,"blue",(function(){return l})),n.d(t,"lightBlue",(function(){return c})),n.d(t,"cyan",(function(){return u})),n.d(t,"teal",(function(){return d})),n.d(t,"green",(function(){return p})),n.d(t,"lightGreen",(function(){return h})),n.d(t,"lime",(function(){return f})),n.d(t,"yellow",(function(){return g})),n.d(t,"amber",(function(){return b})),n.d(t,"orange",(function(){return v})),n.d(t,"deepOrange",(function(){return m})),n.d(t,"brown",(function(){return y})),n.d(t,"grey",(function(){return _})),n.d(t,"blueGrey",(function(){return O})),n.d(t,"darkText",(function(){return x})),n.d(t,"lightText",(function(){return C})),n.d(t,"darkIcons",(function(){return j})),n.d(t,"lightIcons",(function(){return E})),n.d(t,"white",(function(){return w})),n.d(t,"black",(function(){return S}));var r={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},a={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},o={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},i={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},s={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},u={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},d={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},p={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},h={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},f={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},g={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},b={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},m={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},y={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},_={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},O={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},x={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},C={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},j={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},E={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},w="#ffffff",S="#000000";t.default={red:r,pink:a,purple:o,deepPurple:i,indigo:s,blue:l,lightBlue:c,cyan:u,teal:d,green:p,lightGreen:h,lime:f,yellow:g,amber:b,orange:v,deepOrange:m,brown:y,grey:_,blueGrey:O,darkText:x,lightText:C,darkIcons:j,lightIcons:E,white:w,black:S}},1804:function(e,t,n){var r=n(541),a=n(432);e.exports=function(e,t){return e&&r(t,a(t),e)}},1805:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(182),a=n.n(r),o=n(33),i=n.n(o),s=n(50),l=n.n(s),c=n(88),u=n.n(c),d=n(825),p=n(322),h=n(134),f=n(49),g=n(102);const b="error",v="done";let m,y,_,O,x,C,j;const E=async e=>new u.a((t,n)=>{const r=e.job_id;((e,t)=>{x[e]=t})(r,async e=>{switch(e.status){case v:{let{data:r,status:a}=await S(e);r=Object(d.a)(r),"success"===a?t(r):n(r);break}case b:{const t=Object(g.b)(e);n(t);break}default:console.warn("received event with status",e.status)}var a;x[a=r]&&delete x[a]})}),w=Object(p.a)({method:"GET",endpoint:"/api/v1/async_event/"}),S=async e=>{let t,n="success";try{const{json:n}=await h.a.get({endpoint:String(e.result_url)});t="result"in n?n.result:n}catch(e){n="error",t=await Object(g.a)(e)}return{status:n,data:t}},T=async()=>{const e=j?{last_id:j}:{};if(l()(x).length)try{const{result:t}=await w(e);t&&t.length&&await M(t)}catch(e){console.warn(e)}"polling"===y&&(O=window.setTimeout(T,_))},M=async e=>{i()(e).call(e,e=>{const t=e.job_id,n=x[t];n?(n(e),delete C[t]):(C[t]||(C[t]=0),C[t]+=1,C[t]<=6?a()(()=>{M([e])},100*C[t]):(delete C[t],console.warn("listener not found for job_id",e.job_id))),(e=>{j=e.id;try{localStorage.setItem("last_async_event_id",j)}catch(e){console.warn("Error saving event Id to localStorage",e)}})(e)})};let P,R,A=0;const D=()=>{let e=m.GLOBAL_ASYNC_QUERIES_WEBSOCKET_URL;j&&(e+=`?last_id=${j}`),R=new WebSocket(e),R.addEventListener("open",e=>{console.log("WebSocket connected"),clearTimeout(P),A=0}),R.addEventListener("close",e=>{P=a()(()=>{A+=1,A<=6?D():(console.warn("WebSocket not available, falling back to async polling"),T())},2500)}),R.addEventListener("error",e=>{R.readyState<2&&R.close()}),R.addEventListener("message",async e=>{let t=[];try{t=[JSON.parse(e.data)],await M(t)}catch(e){console.warn(e)}})};(e=>{if(Object(f.c)(f.a.GLOBAL_ASYNC_QUERIES)){if(O&&clearTimeout(O),x={},C={},j=null,e)m=e;else{const e=document.getElementById("app");if(e){var t;const n=JSON.parse((null==e?void 0:e.getAttribute("data-bootstrap"))||"{}");m=null==n?void 0:null==(t=n.common)?void 0:t.conf}else m={},console.warn("asyncEvent: app config data not found")}y=m.GLOBAL_ASYNC_QUERIES_TRANSPORT||"polling",_=m.GLOBAL_ASYNC_QUERIES_POLLING_DELAY||500;try{j=localStorage.getItem("last_async_event_id")}catch(e){console.warn("Failed to fetch last event Id from localStorage")}"polling"===y&&T(),"ws"===y&&D()}})()},1806:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(17),a=n.n(r),o=n(118),i=n.n(o),s=n(0),l=n.n(s),c=n(5),u=n.n(c),d=n(20),p=n(18),h=n(177),f=n(62),g=n(499),b=n(409),v=n(120),m=n(1);const y={name:u.a.string,onChange:u.a.func,value:u.a.string,height:u.a.number,minLines:u.a.number,maxLines:u.a.number,offerEditInModal:u.a.bool,language:u.a.oneOf([null,"json","html","sql","markdown","javascript"]),aboveEditorSection:u.a.node,readOnly:u.a.bool};class _ extends l.a.Component{constructor(){super(),this.onAceChangeDebounce=i()(e=>{this.onAceChange(e)},h.d)}onControlChange(e){this.props.onChange(e.target.value)}onAceChange(e){this.props.onChange(e)}renderEditor(e=!1){var t;const n=this.props.value||"",r=e?40:this.props.minLines||12;if(this.props.language){const t={border:"1px solid #CCC"};return this.props.readOnly&&(t.backgroundColor="#f2f2f2"),Object(m.d)(g.g,{mode:this.props.language,style:t,minLines:r,maxLines:e?1e3:this.props.maxLines,onChange:this.onAceChangeDebounce,width:"100%",height:`${r}em`,editorProps:{$blockScrolling:!0},value:n,readOnly:this.props.readOnly})}return Object(m.d)(d.z,{placeholder:Object(p.e)("textarea"),onChange:a()(t=this.onControlChange).call(t,this),value:n,disabled:this.props.readOnly,style:{height:this.props.height}})}renderModalBody(){return Object(m.d)("div",null,Object(m.d)("div",null,this.props.aboveEditorSection),this.renderEditor(!0))}render(){const e=Object(m.d)(v.a,this.props);return Object(m.d)("div",null,e,this.renderEditor(),this.props.offerEditInModal&&Object(m.d)(b.a,{modalTitle:e,triggerNode:Object(m.d)(f.a,{buttonSize:"small",className:"m-t-5"},Object(p.e)("Edit")," ",Object(m.d)("strong",null,this.props.language)," ",Object(p.e)("in modal")),modalBody:this.renderModalBody(!0),responsive:!0}))}}_.propTypes=y,_.defaultProps={onChange:()=>{},value:"",height:250,minLines:3,maxLines:10,offerEditInModal:!0,readOnly:!1}},1807:function(e,t,n){var r=n(388),a=n(1808),o=a?function(e,t){return a.set(e,t),e}:r;e.exports=o},1808:function(e,t,n){var r=n(950),a=r&&new r;e.exports=a},1809:function(e,t,n){var r=n(1810),a=n(1811),o=n(3625),i=n(1297),s=n(1812),l=n(1817),c=n(3635),u=n(1479),d=n(113);e.exports=function e(t,n,p,h,f,g,b,v,m,y){var _=128&n,O=1&n,x=2&n,C=24&n,j=512&n,E=x?void 0:i(t);return function w(){for(var S=arguments.length,T=Array(S),M=S;M--;)T[M]=arguments[M];if(C)var P=l(w),R=o(T,P);if(h&&(T=r(T,h,f,C)),g&&(T=a(T,g,b,C)),S-=R,C&&S<y){var A=u(T,P);return s(t,n,e,w.placeholder,p,T,A,v,m,y-S)}var D=O?p:this,k=x?D[t]:t;return S=T.length,v?T=c(T,v):j&&S>1&&T.reverse(),_&&m<S&&(T.length=m),this&&this!==d&&this instanceof w&&(k=E||i(k)),k.apply(D,T)}}},1810:function(e,t){var n=Math.max;e.exports=function(e,t,r,a){for(var o=-1,i=e.length,s=r.length,l=-1,c=t.length,u=n(i-s,0),d=Array(c+u),p=!a;++l<c;)d[l]=t[l];for(;++o<s;)(p||o<i)&&(d[r[o]]=e[o]);for(;u--;)d[l++]=e[o++];return d}},1811:function(e,t){var n=Math.max;e.exports=function(e,t,r,a){for(var o=-1,i=e.length,s=-1,l=r.length,c=-1,u=t.length,d=n(i-l,0),p=Array(d+u),h=!a;++o<d;)p[o]=e[o];for(var f=o;++c<u;)p[f+c]=t[c];for(;++s<l;)(h||o<i)&&(p[f+r[s]]=e[o++]);return p}},1812:function(e,t,n){var r=n(1813),a=n(1815),o=n(1816);e.exports=function(e,t,n,i,s,l,c,u,d,p){var h=8&t;t|=h?32:64,4&(t&=~(h?64:32))||(t&=-4);var f=[e,t,s,h?l:void 0,h?c:void 0,h?void 0:l,h?void 0:c,u,d,p],g=n.apply(void 0,f);return r(e)&&a(g,f),g.placeholder=i,o(g,e,t)}},1813:function(e,t,n){var r=n(1475),a=n(1477),o=n(1814),i=n(3627);e.exports=function(e){var t=o(e),n=i[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var s=a(n);return!!s&&e===s[0]}},1814:function(e,t,n){var r=n(3626),a=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],o=a.call(r,t)?n.length:0;o--;){var i=n[o],s=i.func;if(null==s||s==e)return i.name}return t}},1815:function(e,t,n){var r=n(1807),a=n(949)(r);e.exports=a},1816:function(e,t,n){var r=n(3629),a=n(3630),o=n(834),i=n(3631);e.exports=function(e,t,n){var s=t+"";return o(e,a(s,i(r(s),n)))}},1817:function(e,t){e.exports=function(e){return e.placeholder}},1818:function(e,t,n){var r=n(3644),a=n(948),o=n(834);e.exports=function(e){return o(a(e,void 0,r),e+"")}},1819:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(75);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=!1,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetId=null,this.internalMonitor=t.getMonitor()}var t,n,i;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Object(r.a)(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&a(t.prototype,n),i&&a(t,i),e}()},1820:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(839),a=n(1308),o=n(1245);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=Object(a.a)({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,Object(o.a)(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var t,n,s;return t=e,(n=[{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!Object(r.a)(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}},{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}])&&i(t.prototype,n),s&&i(t,s),e}()},1821:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(75);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=!1,i=!1,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}var t,n,s;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Object(r.a)(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Object(r.a)(!i,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return i=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{i=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&a(t.prototype,n),s&&a(t,s),e}()},1822:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1308),a=n(1245),o=n(839);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=Object(r.a)({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,Object(a.a)(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,Object(a.a)(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var t,n,s;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!Object(o.a)(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!Object(o.a)(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}])&&i(t.prototype,n),s&&i(t,s),e}()},1823:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomPicker=t.TwitterPicker=t.SwatchesPicker=t.SliderPicker=t.SketchPicker=t.PhotoshopPicker=t.MaterialPicker=t.HuePicker=t.GithubPicker=t.CompactPicker=t.ChromePicker=t.default=t.CirclePicker=t.BlockPicker=t.AlphaPicker=void 0;var r=n(3537);Object.defineProperty(t,"AlphaPicker",{enumerable:!0,get:function(){return m(r).default}});var a=n(3560);Object.defineProperty(t,"BlockPicker",{enumerable:!0,get:function(){return m(a).default}});var o=n(3562);Object.defineProperty(t,"CirclePicker",{enumerable:!0,get:function(){return m(o).default}});var i=n(3564);Object.defineProperty(t,"ChromePicker",{enumerable:!0,get:function(){return m(i).default}});var s=n(3568);Object.defineProperty(t,"CompactPicker",{enumerable:!0,get:function(){return m(s).default}});var l=n(3571);Object.defineProperty(t,"GithubPicker",{enumerable:!0,get:function(){return m(l).default}});var c=n(3573);Object.defineProperty(t,"HuePicker",{enumerable:!0,get:function(){return m(c).default}});var u=n(3575);Object.defineProperty(t,"MaterialPicker",{enumerable:!0,get:function(){return m(u).default}});var d=n(3576);Object.defineProperty(t,"PhotoshopPicker",{enumerable:!0,get:function(){return m(d).default}});var p=n(3582);Object.defineProperty(t,"SketchPicker",{enumerable:!0,get:function(){return m(p).default}});var h=n(3585);Object.defineProperty(t,"SliderPicker",{enumerable:!0,get:function(){return m(h).default}});var f=n(3589);Object.defineProperty(t,"SwatchesPicker",{enumerable:!0,get:function(){return m(f).default}});var g=n(3592);Object.defineProperty(t,"TwitterPicker",{enumerable:!0,get:function(){return m(g).default}});var b=n(1802);Object.defineProperty(t,"CustomPicker",{enumerable:!0,get:function(){return m(b).default}});var v=m(i);function m(e){return e&&e.__esModule?e:{default:e}}t.default=v.default},1824:function(e,t,n){"use strict";n(52);var r=n(14),a=n.n(r),o=n(82),i=n.n(o),s=n(0),l=n.n(s),c=n(326),u=n(62),d=n(65),p=n(134),h=n(18),f=n(163),g=n(819),b=n(49),v=n(102),m=n(191),y=n(1);const _=Object(g.a)(()=>Promise.all([n.e(19),n.e(70)]).then(n.bind(null,4038))),O=Object(d.g)(f.b)`
  .modal-content {
    height: 900px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }

  .modal-header {
    flex: 0 1 auto;
  }
  .modal-body {
    flex: 1 1 auto;
    overflow: auto;
  }

  .modal-footer {
    flex: 0 1 auto;
  }

  .ant-modal-body {
    overflow: visible;
  }
`;function x(e){const t=null!=e&&e.certified_by||null!=e&&e.certification_details?{certified_by:null==e?void 0:e.certified_by,details:null==e?void 0:e.certification_details}:void 0;return i()({certification:t,warning_markdown:null==e?void 0:e.warning_markdown})}t.a=Object(m.a)(({addSuccessToast:e,datasource:t,onDatasourceSave:n,onHide:r,show:o})=>{const[i,d]=Object(s.useState)(t),[g,m]=Object(s.useState)([]),[C,j]=Object(s.useState)(!1),E=Object(s.useRef)(null),[w,S]=f.b.useModal(),T=()=>{var t,o,s;const l=(null==(t=i.tableSelector)?void 0:t.schema)||(null==(o=i.databaseSelector)?void 0:o.schema)||i.schema;j(!0),p.a.post({endpoint:"/datasource/save/",postPayload:{data:{...i,schema:l,metrics:null==i?void 0:null==(s=i.metrics)?void 0:a()(s).call(s,e=>({...e,extra:x(e)})),type:i.type||i.datasource_type}}}).then(({json:t})=>{e(Object(h.e)("The dataset has been saved")),n(t),r()}).catch(e=>{j(!1),Object(v.a)(e).then(({error:e})=>{w.error({title:"Error",content:e||Object(h.e)("An error has occurred"),okButtonProps:{danger:!0,className:"btn-danger"}})})})};return Object(y.d)(O,{show:o,onHide:r,title:Object(y.d)("span",null,Object(h.e)("Edit Dataset "),Object(y.d)("strong",null,i.table_name)),footer:Object(y.d)(l.a.Fragment,null,Object(b.c)(b.a.ENABLE_REACT_CRUD_VIEWS)&&Object(y.d)(u.a,{buttonSize:"small",buttonStyle:"default",className:"m-r-5",onClick:()=>{window.location.href=i.edit_url||i.url}},Object(h.e)("Use legacy datasource editor")),Object(y.d)(u.a,{buttonSize:"small",className:"m-r-5",onClick:r},Object(h.e)("Cancel")),Object(y.d)(u.a,{buttonSize:"small",buttonStyle:"primary",onClick:()=>{E.current=w.confirm({title:Object(h.e)("Confirm save"),content:Object(y.d)("div",null,Object(y.d)(c.a,{css:e=>({marginTop:4*e.gridUnit,marginBottom:4*e.gridUnit}),type:"warning",showIcon:!0,message:Object(h.e)("The dataset configuration exposed here\n                affects all the charts using this dataset.\n                Be mindful that changing settings\n                here may affect other charts\n                in undesirable ways.")}),Object(h.e)("Are you sure you want to save and apply changes?")),onOk:T,icon:null})},disabled:C||g.length>0},Object(h.e)("Save"))),responsive:!0},Object(y.d)(_,{showLoadingForImport:!0,height:500,datasource:i,onChange:(e,t)=>{var n;d({...e,metrics:null==e?void 0:a()(n=e.metrics).call(n,e=>({...e,is_certified:(null==e?void 0:e.certified_by)||(null==e?void 0:e.certification_details)}))}),m(t)}}),S)})},1825:function(e,t,n){"use strict";var r=n(14),a=n.n(r),o=(n(0),n(5)),i=n.n(o),s=n(18),l=n(1247),c=n(120),u=n(191),d=n(1);const p={dataEndpoint:i.a.string.isRequired,multi:i.a.bool,mutator:i.a.func,onAsyncErrorMessage:i.a.string,onChange:i.a.func,placeholder:i.a.string,value:i.a.oneOfType([i.a.string,i.a.number,i.a.arrayOf(i.a.string),i.a.arrayOf(i.a.number)]),addDangerToast:i.a.func.isRequired},h={multi:!0,onAsyncErrorMessage:Object(s.e)("Error while fetching data"),onChange:()=>{},placeholder:Object(s.e)("Select ...")},f=e=>{const{value:t,onChange:n,dataEndpoint:r,multi:o,mutator:i,placeholder:s,onAsyncErrorMessage:u}=e;return Object(d.d)("div",null,Object(d.d)(c.a,e),Object(d.d)(l.a,{dataEndpoint:r,onChange:e=>{let t;var r,i;o?t=null!=(r=null==e?void 0:a()(e).call(e,e=>e.value))?r:null:t=null!=(i=null==e?void 0:e.value)?i:null;n(t)},onAsyncError:t=>e.addDangerToast(`${u}: ${t}`),mutator:i,multi:o,value:t,placeholder:s,valueRenderer:e=>Object(d.d)("div",null,e.label)}))};f.propTypes=p,f.defaultProps=h,t.a=Object(u.a)(f)},1826:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(17),a=n.n(r),o=n(0),i=n.n(o),s=n(5),l=n.n(s),c=n(20),u=n(18),d=n(184),p=n(232),h=n(868),f=n(1303),g=n(120),b=n(832),v=n(1);const m="latlong",y="delimited",_="geohash",O={onChange:l.a.func,value:l.a.object,animation:l.a.bool,choices:l.a.array};class x extends i.a.Component{constructor(e){var t,n,r;super(e);const o=e.value||{};let i;e.choices.length>0&&(i=e.choices[0][0]),this.state={type:o.type||m,delimiter:o.delimiter||",",latCol:o.latCol||i,lonCol:o.lonCol||i,lonlatCol:o.lonlatCol||i,reverseCheckbox:o.reverseCheckbox||!1,geohashCol:o.geohashCol||i,value:null,errors:[]},this.toggleCheckbox=a()(t=this.toggleCheckbox).call(t,this),this.onChange=a()(n=this.onChange).call(n,this),this.renderReverseCheckbox=a()(r=this.renderReverseCheckbox).call(r,this)}componentDidMount(){this.onChange()}onChange(){const{type:e}=this.state,t={type:e},n=[],r=Object(u.e)("Invalid lat/long configuration.");e===m?(t.latCol=this.state.latCol,t.lonCol=this.state.lonCol,t.lonCol&&t.latCol||n.push(r)):e===y?(t.lonlatCol=this.state.lonlatCol,t.delimiter=this.state.delimiter,t.reverseCheckbox=this.state.reverseCheckbox,t.lonlatCol&&t.delimiter||n.push(r)):e===_&&(t.geohashCol=this.state.geohashCol,t.reverseCheckbox=this.state.reverseCheckbox,t.geohashCol||n.push(r)),this.setState({value:t,errors:n}),this.props.onChange(t,n)}setType(e){this.setState({type:e},this.onChange)}toggleCheckbox(){this.setState(e=>({reverseCheckbox:!e.reverseCheckbox}),this.onChange)}renderLabelContent(){return this.state.errors.length>0?"N/A":this.state.type===m?`${this.state.lonCol} | ${this.state.latCol}`:this.state.type===y?`${this.state.lonlatCol}`:this.state.type===_?`${this.state.geohashCol}`:null}renderSelect(e,t){return Object(v.d)(b.a,{name:e,choices:this.props.choices,value:this.state[e],clearable:!1,onFocus:()=>{this.setType(t)},onChange:t=>{this.setState({[e]:t},this.onChange)}})}renderReverseCheckbox(){return Object(v.d)("span",null,Object(u.e)("Reverse lat/long "),Object(v.d)(f.c,{checked:this.state.reverseCheckbox,onChange:this.toggleCheckbox}))}renderPopoverContent(){var e,t,n;return Object(v.d)("div",{style:{width:"300px"}},Object(v.d)(h.a,{title:Object(u.e)("Longitude & Latitude columns"),isSelected:this.state.type===m,onSelect:a()(e=this.setType).call(e,this,m)},Object(v.d)(c.s,{gutter:16},Object(v.d)(c.f,{xs:24,md:12},"Longitude",this.renderSelect("lonCol",m)),Object(v.d)(c.f,{xs:24,md:12},"Latitude",this.renderSelect("latCol",m)))),Object(v.d)(h.a,{title:Object(u.e)("Delimited long & lat single column"),info:Object(u.e)("Multiple formats accepted, look the geopy.points Python library for more details"),isSelected:this.state.type===y,onSelect:a()(t=this.setType).call(t,this,y)},Object(v.d)(c.s,{gutter:16},Object(v.d)(c.f,{xs:24,md:12},Object(u.e)("Column"),this.renderSelect("lonlatCol",y)),Object(v.d)(c.f,{xs:24,md:12},this.renderReverseCheckbox()))),Object(v.d)(h.a,{title:Object(u.e)("Geohash"),isSelected:this.state.type===_,onSelect:a()(n=this.setType).call(n,this,_)},Object(v.d)(c.s,{gutter:16},Object(v.d)(c.f,{xs:24,md:12},"Column",this.renderSelect("geohashCol",_)),Object(v.d)(c.f,{xs:24,md:12},this.renderReverseCheckbox()))))}render(){return Object(v.d)("div",null,Object(v.d)(g.a,this.props),Object(v.d)(p.a,{content:this.renderPopoverContent(),placement:"topLeft",trigger:"click"},Object(v.d)(d.a,{className:"pointer"},this.renderLabelContent())))}}x.propTypes=O,x.defaultProps={onChange:()=>{},animation:!0,choices:[]}},1827:function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"g",(function(){return C})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return E})),n.d(t,"a",(function(){return w})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return T}));n(52);var r=n(96),a=n.n(r),o=n(14),i=n.n(o),s=n(87),l=n.n(s),c=n(183),u=n.n(c),d=n(39),p=n.n(d),h=n(33),f=n.n(h),g=n(41),b=n.n(g),v=n(133),m=n.n(v),y=n(144),_=n.n(y),O=n(1311);const x=5,C=async(e,t,n,r,a,o)=>{const i=(t,n,r)=>{const a={name:["filters",t,n],errors:[r]};e.setFields([a])};try{var s;let t;try{t=await e.validateFields()}catch(e){var c;if(null!=e&&null!=(c=e.errorFields)&&c.length||null==e||!e.outOfDate)throw e;t=m()(e)}const o=e=>{var r;(t.filters[e]?t.filters[e].isInstant:null==(r=n[e])?void 0:r.isInstant)||i(e,"isInstant","For hierarchical filters changes must be applied instantly")},l=(e,r=[])=>{var a,s,c;b()(r).call(r,e)&&i(e,"parentFilter","Cannot create cyclic hierarchy");const u=t.filters[e]?null==(a=t.filters[e].parentFilter)?void 0:a.value:null==(s=n[e])?void 0:null==(c=s.cascadeParentIds)?void 0:c[0];u&&(o(u),l(u,[...r,e]))};return f()(s=p()(r).call(r,e=>!a[e])).call(s,e=>l(e)),t}catch(e){if(console.warn("Filter configuration failed:",e),!e.errorFields||!e.errorFields.length)return null;const n=e.errorFields;if(!u()(n).call(n,e=>e.name[1]===t)){const e=l()(n).call(n,e=>"filters"===e.name[0]);e&&o(e.name[1])}return null}},j=(e,t,n,r,o,s)=>async()=>{var c;const u=i()(c=p()(t).call(t,e=>!n[e])).call(c,t=>{var n,r,o,i;const c=s.filters[t];if(!c)return e[t];const u={};return c.dataset&&(u.datasetId=c.dataset.value),c.dataset&&c.column&&(u.column={name:c.column}),{id:t,adhoc_filters:c.adhoc_filters,time_range:c.time_range,controlValues:null!=(n=c.controlValues)?n:{},requiredFirst:l()(r=a()(null!=(o=c.requiredFirst)?o:{})).call(r,e=>e),name:c.name,filterType:c.filterType,targets:[u],defaultDataMask:null!=(i=c.defaultDataMask)?i:Object(O.b)(),cascadeParentIds:c.parentFilter?[c.parentFilter.value]:[],scope:c.scope,isInstant:c.isInstant,sortMetric:c.sortMetric}});await o(u),r()},E=(e,t,n)=>(r,a)=>{if("remove"===a){const n=window.setTimeout(()=>(t=>{e(e=>({...e,[t]:{isPending:!1}}))})(r),1e3*x);e(e=>({...e,[r]:{isPending:!0,timerId:n}})),t(!1)}else"add"===a&&n()},w="NATIVE_FILTER-",S=()=>`${w}${_.a.generate()}`,T=e=>i()(e).call(e,e=>e.id)},1828:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function a(e){return!!e&&!!e[$]}function o(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[z]||!!e.constructor[z]||p(e)||h(e))}function i(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:G)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function s(e){var t=e[$];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:p(e)?2:h(e)?3:0}function l(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===s(e)?e.get(t):e[t]}function u(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){return B&&e instanceof Map}function h(e){return W&&e instanceof Set}function f(e){return e.o||e.t}function g(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=V(e);delete t[$];for(var n=G(t),r=0;r<n.length;r++){var a=n[r],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function b(e,t){return void 0===t&&(t=!1),m(e)||a(e)||!o(e)?e:(s(e)>1&&(e.set=e.add=e.clear=e.delete=v),Object.freeze(e),t&&i(e,(function(e,t){return b(t,!0)}),!0),e)}function v(){r(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=K[e];return t||r(18,e),t}function _(){return N}function O(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function x(e){C(e),e.p.forEach(E),e.p=null}function C(e){e===N&&(N=e.l)}function j(e){return N={p:[],l:N,h:e,m:!0,_:0}}function E(e){var t=e[$];0===t.i||1===t.i?t.j():t.g=!0}function w(e,t){t._=t.p.length;var n=t.p[0],a=void 0!==e&&e!==n;return t.h.O||y("ES5").S(t,e,a),a?(n[$].P&&(x(t),r(4)),o(e)&&(e=S(t,e),t.l||M(t,e)),t.u&&y("Patches").M(n[$],e,t.u,t.s)):e=S(t,n,[]),x(t),t.u&&t.v(t.u,t.s),e!==q?e:void 0}function S(e,t,n){if(m(t))return t;var r=t[$];if(!r)return i(t,(function(a,o){return T(e,r,t,a,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return M(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=g(r.k):r.o;i(3===r.i?new Set(a):a,(function(t,o){return T(e,r,a,t,o,n)})),M(e,a,!1),n&&e.u&&y("Patches").R(r,n,e.u,e.s)}return r.o}function T(e,t,n,r,i,s){if(a(i)){var c=S(e,i,s&&t&&3!==t.i&&!l(t.D,r)?s.concat(r):void 0);if(u(n,r,c),!a(c))return;e.m=!1}if(o(i)&&!m(i)){if(!e.h.N&&e._<1)return;S(e,i),t&&t.A.l||M(e,i)}}function M(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&b(t,n)}function P(e,t){var n=e[$];return(n?f(n):e)[t]}function R(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function A(e){e.P||(e.P=!0,e.l&&A(e.l))}function D(e){e.o||(e.o=g(e.t))}function k(e,t,n){var r=p(t)?y("MapSet").T(t,n):h(t)?y("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:_(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=r,o=Y;n&&(a=[r],o=Q);var i=Proxy.revocable(a,o),s=i.revoke,l=i.proxy;return r.k=l,r.j=s,l}(t,n):y("ES5").J(t,n);return(n?n.A:_()).p.push(r),r}function I(e){return a(e)||r(22,e),function e(t){if(!o(t))return t;var n,r=t[$],a=s(t);if(r){if(!r.P&&(r.i<4||!y("ES5").K(r)))return r.t;r.I=!0,n=L(t,a),r.I=!1}else n=L(t,a);return i(n,(function(t,a){r&&c(r.t,t)===a||u(n,t,e(a))})),3===a?new Set(n):n}(e)}function L(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return g(e)}var F,N,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),B="undefined"!=typeof Map,W="undefined"!=typeof Set,H="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,q=U?Symbol.for("immer-nothing"):((F={})["immer-nothing"]=!0,F),z=U?Symbol.for("immer-draftable"):"__$immer_draftable",$=U?Symbol.for("immer-state"):"__$immer_state",G=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),V=Object.getOwnPropertyDescriptors||function(e){var t={};return G(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},K={},Y={get:function(e,t){if(t===$)return e;var n=f(e);if(!l(n,t))return function(e,t,n){var r,a=R(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!o(r)?r:r===P(e.t,t)?(D(e),e.o[t]=k(e.A.h,r,e)):r},has:function(e,t){return t in f(e)},ownKeys:function(e){return Reflect.ownKeys(f(e))},set:function(e,t,n){var r=R(f(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var a=P(f(e),t),o=null==a?void 0:a[$];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(d(n,a)&&(void 0!==n||l(e.t,t)))return!0;D(e),A(e)}return e.o[t]=n,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==P(e.t,t)||t in e.t?(e.D[t]=!1,D(e),A(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=f(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Q={};i(Y,(function(e,t){Q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Q.deleteProperty=function(e,t){return Y.deleteProperty.call(this,e[0],t)},Q.set=function(e,t,n){return Y.set.call(this,e[0],t,n,e[0])};var X=new(function(){function e(e){this.O=H,this.N=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,n){if("function"==typeof e&&"function"!=typeof t){var a=t;t=e;var i=this;return function(e){var n=this;void 0===e&&(e=a);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(o))}))}}var s;if("function"!=typeof t&&r(6),void 0!==n&&"function"!=typeof n&&r(7),o(e)){var l=j(this),c=k(this,e,void 0),u=!0;try{s=t(c),u=!1}finally{u?x(l):C(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return O(l,n),w(e,l)}),(function(e){throw x(l),e})):(O(l,n),w(s,l))}if(!e||"object"!=typeof e){if((s=t(e))===q)return;return void 0===s&&(s=e),this.N&&b(s,!0),s}r(21,e)},t.produceWithPatches=function(e,t){var n,r,a=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return a.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))}:[this.produce(e,t,(function(e,t){n=e,r=t})),n,r]},t.createDraft=function(e){o(e)||r(8),a(e)&&(e=I(e));var t=j(this),n=k(this,e,void 0);return n[$].C=!0,C(t),n},t.finishDraft=function(e,t){var n=(e&&e[$]).A;return O(n,t),w(void 0,n)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!H&&r(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var o=y("Patches").$;return a(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(n+1))}))},e}()),J=X.produce;X.produceWithPatches.bind(X),X.setAutoFreeze.bind(X),X.setUseProxies.bind(X),X.applyPatches.bind(X),X.createDraft.bind(X),X.finishDraft.bind(X);t.a=J},1829:function(e,t,n){"use strict";n(52);var r=n(73),a=n.n(r),o=n(430),i=n.n(o),s=n(87),l=n.n(s),c=n(39),u=n.n(c),d=n(288),p=n.n(d),h=n(50),f=n.n(h),g=n(133),b=n.n(g),v=n(14),m=n.n(v),y=n(17),_=n.n(y),O=n(0),x=n.n(O),C=n(5),j=n.n(C),E=n(134),w=n(251),S=n(825),T=n(18),M=n(812),P=n(120),R=n(314),A=n(318),D=n(122),k=n(48),I=n(1306),L=n(159),F=n(103),N=n(866),U=n(229),B=n(501),W=n(66),H=n(1);const q={adhocFilter:j.a.instanceOf(W.c).isRequired,onFilterEdit:j.a.func.isRequired,onRemoveFilter:j.a.func,options:j.a.arrayOf(j.a.oneOfType([B.a,j.a.shape({saved_metric_name:j.a.string.isRequired}),R.a])).isRequired,datasource:j.a.object,partitionColumn:j.a.string,onMoveLabel:j.a.func,onDropLabel:j.a.func,index:j.a.number},z=({adhocFilter:e,options:t,datasource:n,onFilterEdit:r,onRemoveFilter:a,partitionColumn:o,onMoveLabel:i,onDropLabel:s,index:l})=>Object(H.d)(N.a,{adhocFilter:e,options:t,datasource:n,onFilterEdit:r,partitionColumn:o},Object(H.d)(L.k,{label:e.getDefaultLabel(),tooltipTitle:e.getTooltipTitle(),onRemove:a,onMoveLabel:i,onDropLabel:s,index:l,type:U.a.FilterOption,withCaret:!0,isExtra:e.isExtra}));var $=z;z.propTypes=q;var G=j.a.oneOfType([j.a.shape({expressionType:j.a.oneOf([W.b.SIMPLE]).isRequired,clause:j.a.oneOf([W.a.HAVING,W.a.WHERE]).isRequired,subject:j.a.string.isRequired,operator:j.a.oneOf(f()(k.k)).isRequired,comparator:j.a.oneOfType([j.a.string,j.a.arrayOf(j.a.string)]).isRequired}),j.a.shape({expressionType:j.a.oneOf([W.b.SQL]).isRequired,clause:j.a.oneOf([W.a.WHERE,W.a.HAVING]).isRequired,sqlExpression:j.a.string.isRequired})]);const V=j.a.oneOfType([j.a.string,R.a]),K={label:j.a.oneOfType([j.a.object,j.a.string]),name:j.a.string,onChange:j.a.func,value:j.a.arrayOf(G),datasource:j.a.object,columns:j.a.arrayOf(B.a),savedMetrics:j.a.arrayOf(A.a),selectedMetrics:j.a.oneOfType([V,j.a.arrayOf(V)]),isLoading:j.a.bool};function Y(e){return e&&!(e instanceof W.c)&&e.expressionType}class Q extends x.a.Component{constructor(e){var t,n,r,a,o,i,s,l,c;super(e),this.optionsForSelect=_()(t=this.optionsForSelect).call(t,this),this.onRemoveFilter=_()(n=this.onRemoveFilter).call(n,this),this.onNewFilter=_()(r=this.onNewFilter).call(r,this),this.onFilterEdit=_()(a=this.onFilterEdit).call(a,this),this.moveLabel=_()(o=this.moveLabel).call(o,this),this.onChange=_()(i=this.onChange).call(i,this),this.mapOption=_()(s=this.mapOption).call(s,this),this.getMetricExpression=_()(l=this.getMetricExpression).call(l,this);const u=m()(c=this.props.value||[]).call(c,e=>Y(e)?new W.c(e):e);this.optionRenderer=e=>Object(H.d)(I.a,{option:e}),this.valueRenderer=(e,t)=>Object(H.d)($,{key:t,index:t,adhocFilter:e,onFilterEdit:this.onFilterEdit,options:this.state.options,datasource:this.props.datasource,onRemoveFilter:()=>this.onRemoveFilter(t),onMoveLabel:this.moveLabel,onDropLabel:()=>this.props.onChange(b()(this.state)),partitionColumn:this.state.partitionColumn}),this.state={values:u,options:this.optionsForSelect(this.props),partitionColumn:null}}componentDidMount(){const{datasource:e}=this.props;if(e&&"table"===e.type){var t;const n=null==(t=e.database)?void 0:t.id,{datasource_name:r,schema:a,is_sqllab_view:o}=e;!o&&n&&r&&a&&E.a.get({endpoint:`/superset/extra_table_metadata/${n}/${r}/${a}/`}).then(({json:e})=>{if(e&&e.partitions){const{partitions:t}=e;t&&t.cols&&1===f()(t.cols).length&&this.setState({partitionColumn:t.cols[0]})}}).catch(e=>{w.a.error("fetch extra_table_metadata:",e.statusText)})}}UNSAFE_componentWillReceiveProps(e){var t;(this.props.columns!==e.columns&&this.setState({options:this.optionsForSelect(e)}),this.props.value!==e.value)&&this.setState({values:m()(t=e.value||[]).call(t,e=>Y(e)?new W.c(e):e)})}onRemoveFilter(e){const t=[...b()(this.state)];p()(t).call(t,e,1),this.setState(e=>({...e,values:t})),this.props.onChange(t)}onNewFilter(e){const t=this.mapOption(e);t&&this.setState(e=>({...e,values:[...b()(e),t]}),()=>{this.props.onChange(b()(this.state))})}onFilterEdit(e){var t;this.props.onChange(m()(t=b()(this.state)).call(t,t=>t.filterOptionName===e.filterOptionName?e:t))}onChange(e){var t,n;const r=u()(t=m()(n=e||[]).call(n,e=>this.mapOption(e))).call(t,e=>e);this.props.onChange(r)}getMetricExpression(e){var t;return l()(t=this.props.savedMetrics).call(t,t=>t.metric_name===e).expression}moveLabel(e,t){const{values:n}=this.state,r=[...n];[r[t],r[e]]=[r[e],r[t]],this.setState({values:r})}mapOption(e){return e instanceof W.c?e:e.saved_metric_name?new W.c({expressionType:"druid"===this.props.datasource.type?W.b.SIMPLE:W.b.SQL,subject:"druid"===this.props.datasource.type?e.saved_metric_name:this.getMetricExpression(e.saved_metric_name),operator:k.k[">"],comparator:0,clause:W.a.HAVING}):e.label?new W.c({expressionType:"druid"===this.props.datasource.type?W.b.SIMPLE:W.b.SQL,subject:"druid"===this.props.datasource.type?e.label:new D.b(e).translateToSql(),operator:k.k[">"],comparator:0,clause:W.a.HAVING}):e.column_name?new W.c({expressionType:W.b.SIMPLE,subject:e.column_name,operator:k.k["=="],comparator:"",clause:W.a.WHERE,isNew:!0}):null}optionsForSelect(e){var t,n,r;const o=u()(t=[...e.columns,...m()(n=Object(S.a)(e.selectedMetrics)).call(n,e=>e&&("string"==typeof e?{saved_metric_name:e}:new D.b(e)))]).call(t,e=>e);return i()(r=a()(o).call(o,(e,t)=>(t.saved_metric_name?e.push({...t,filterOptionName:t.saved_metric_name}):t.column_name?e.push({...t,filterOptionName:`_col_${t.column_name}`}):t instanceof D.b&&e.push({...t,filterOptionName:`_adhocmetric_${t.label}`}),e),[])).call(r,(e,t)=>(e.saved_metric_name||e.column_name||e.label).localeCompare(t.saved_metric_name||t.column_name||t.label))}addNewFilterPopoverTrigger(e){return Object(H.d)(N.a,{adhocFilter:new W.c({}),datasource:this.props.datasource,options:this.state.options,onFilterEdit:this.onNewFilter,partitionColumn:this.state.partitionColumn,createNew:!0},e)}render(){var e;const{theme:t}=this.props;return Object(H.d)("div",{className:"metrics-select"},Object(H.d)(L.g,null,Object(H.d)(P.a,this.props),this.addNewFilterPopoverTrigger(Object(H.d)(L.b,null,Object(H.d)(F.a.PlusLarge,{iconSize:"s",iconColor:t.colors.grayscale.light5})))),Object(H.d)(L.i,null,b()(this.state).length>0?m()(e=b()(this.state)).call(e,(e,t)=>this.valueRenderer(e,t)):this.addNewFilterPopoverTrigger(Object(H.d)(L.a,null,Object(H.d)(F.a.PlusSmall,{iconColor:t.colors.grayscale.light1}),Object(T.e)("Add filter")))))}}Q.propTypes=K,Q.defaultProps={name:"",onChange:()=>{},columns:[],savedMetrics:[],selectedMetrics:[]};t.a=Object(M.e)(Q)},1830:function(e,t,n){var r=n(1831);e.exports=r},1831:function(e,t,n){n(1482);var r=n(111);e.exports=r.URLSearchParams},1832:function(e,t,n){var r=n(189),a=n(515);e.exports=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},187:function(e,t,n){"use strict";n.d(t,"f",(function(){return O})),n.d(t,"h",(function(){return x})),n.d(t,"g",(function(){return C})),n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"l",(function(){return S})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return M})),n.d(t,"k",(function(){return P})),n.d(t,"m",(function(){return R})),n.d(t,"o",(function(){return A})),n.d(t,"n",(function(){return k})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return L}));n(52);var r=n(69),a=n.n(r),o=n(88),i=n.n(o),s=n(94),l=n.n(s),c=n(14),u=n.n(c),d=n(134),p=n(18),h=n(251),f=n(65),g=n(178),b=n.n(g),v=n(102);var m=(()=>{let e;try{e=n(!function(){var e=new Error("Cannot find module '../../../superset_text'");throw e.code="MODULE_NOT_FOUND",e}())}catch(t){e={}}return e})();const y=e=>(t,n,r,a)=>async(o="",i,s)=>{const c=`/api/v1/${t}/${e}/${n}`,p=a&&0===i?[{label:"me",value:a}]:[];try{var h;const e=b.a.encode({...i?{page:i}:{},...s?{page_size:s}:{},...o?{filter:o}:{}}),{json:t={}}=await d.a.get({endpoint:`${c}?q=${e}`}),n=null==t?void 0:null==(h=t.result)?void 0:u()(h).call(h,({text:e,value:t})=>({label:e,value:t}));return l()(p).call(p,n)}catch(e){r(e)}return[]},_=e=>{const t={order_column:"changed_on_delta_humanized",order_direction:"desc",page:0,page_size:3,filters:e};return e||delete t.filters,b.a.encode(t)},O=e=>{const t={edited:[{col:"changed_by",opr:"rel_o_m",value:`${e}`}]},n=[d.a.get({endpoint:`/api/v1/dashboard/?q=${_(t.edited)}`}),d.a.get({endpoint:`/api/v1/chart/?q=${_(t.edited)}`})];return i.a.all(n).then(([e,t])=>{var n,r,o,i;return{editedDash:null==(n=t.json)?void 0:a()(r=n.result).call(r,0,3),editedChart:null==(o=e.json)?void 0:a()(i=o.result).call(i,0,3)}}).catch(e=>e)},x=(e,t)=>{const n={created:[{col:"created_by",opr:"rel_o_m",value:`${e}`}]};return d.a.get({endpoint:`/api/v1/${t}/?q=${_(n.created)}`}).then(e=>{var t;return null==(t=e.json)?void 0:t.result})},C=(e,t,n)=>d.a.get({endpoint:t}).then(e=>{const t={};if(0===e.json.length){const e=[d.a.get({endpoint:`/api/v1/chart/?q=${_()}`}),d.a.get({endpoint:`/api/v1/dashboard/?q=${_()}`})];return i.a.all(e).then(([e,n])=>(t.examples=[...e.json.result,...n.json.result],t)).catch(e=>n(Object(p.e)("There was an error fetching your recent activity:"),e))}return t.viewed=e.json,t}),j=y("related"),E=y("distinct");function w(e){return async t=>{const n=await Object(v.a)(t),r=null==n?void 0:n.errors,a=await m;r&&r.length&&a&&a.ERRORS&&r[0].error_type in a.ERRORS&&(n.message=a.ERRORS[r[0].error_type]),h.a.error(t),e(n.message||n.error)}}function S({id:e,slice_name:t},n,r,a,o,i){const s={pageIndex:0,pageSize:3,sortBy:[{id:"changed_on_delta_humanized",desc:!0}],filters:[{id:"created_by",operator:"rel_o_m",value:`${i}`}]};d.a.delete({endpoint:`/api/v1/chart/${e}`}).then(()=>{"Mine"===o?a(s):a(),n(Object(p.e)("Deleted: %s",t))},()=>{r(Object(p.e)("There was an issue deleting: %s",t))})}function T(e){return window.location.assign(`/api/v1/chart/export/?q=${b.a.encode(u()(e).call(e,({id:e})=>e))}`)}function M(e){return window.location.assign(`/api/v1/dashboard/export/?q=${b.a.encode(u()(e).call(e,({id:e})=>e))}`)}function P(e){return window.location.assign(`/api/v1/saved_query/export/?q=${b.a.encode(u()(e).call(e,({id:e})=>e))}`)}function R({id:e,dashboard_title:t},n,r,a,o,i){return d.a.delete({endpoint:`/api/v1/dashboard/${e}`}).then(()=>{"Mine"===o?n({pageIndex:0,pageSize:3,sortBy:[{id:"changed_on_delta_humanized",desc:!0}],filters:[{id:"owners",operator:"rel_m_m",value:`${i}`}]}):n(),r(Object(p.e)("Deleted: %s",t))},w(e=>a(Object(p.e)("There was an issue deleting %s: %s",t,e))))}function A(e,t){let n=e.split("\n");return n.length>=t&&(n=a()(n).call(n,0,t),n.push("...")),n.join("\n")}const D=[576,768,992,1200],k=u()(D).call(D,e=>`@media (max-width: ${e}px)`),I=f.g.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(31%, 31%));
  ${k[3]} {
    grid-template-columns: repeat(auto-fit, minmax(31%, 31%));
  }
  ${k[2]} {
    grid-template-columns: repeat(auto-fit, minmax(48%, 48%));
  }
  ${k[1]} {
    grid-template-columns: repeat(auto-fit, minmax(50%, 80%));
  }
  grid-gap: ${({theme:e})=>8*e.gridUnit}px;
  justify-content: left;
  padding: ${({theme:e})=>6*e.gridUnit}px;
  padding-top: ${({theme:e})=>2*e.gridUnit}px;
`,L=f.g.div`
  cursor: pointer;
  a {
    text-decoration: none;
  }
`},188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3546);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return d(r).default}});var a=n(1801);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return d(a).default}});var o=n(3549);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return d(o).default}});var i=n(3550);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return d(i).default}});var s=n(3552);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return d(s).default}});var l=n(3553);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return d(l).default}});var c=n(1802);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return d(c).default}});var u=n(3557);function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return d(u).default}})},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(0);var r=n(65),a=n(7),o=n.n(a),i=n(1);const s=r.g.img`
  z-index: 99;
  width: 50px;
  position: relative;
  margin: 10px;
  &.inline {
    margin: 0px;
    width: 30px;
  }
  &.inline-centered {
    margin: 0 auto;
    width: 30px;
    display: block;
  }
  &.floating {
    padding: 0;
    margin: 0;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
`;function l({position:e="floating",image:t="/static/assets/images/loading.gif",className:n}){return Object(i.d)(s,{className:o()("loading",e,n),alt:"Loading...",src:t,role:"status","aria-live":"polite","aria-label":"Loading"})}},212:function(e,t,n){"use strict";n.d(t,"n",(function(){return r})),n.d(t,"o",(function(){return a})),n.d(t,"q",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"m",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"p",(function(){return m})),n.d(t,"b",(function(){return y}));const r={offline:"danger",failed:"danger",pending:"info",fetching:"info",running:"warning",stopped:"danger",success:"success"},a={success:"success",failed:"failed",running:"running",offline:"offline",pending:"pending"},o=["now","1 hour ago","1 day ago","7 days ago","28 days ago","90 days ago","1 year ago"],i=5,s=3,l=51,c=1024,u=2,d=864e5,p=5120,h=.9,f=8e3,g=100,b=90,v=60,m=55,y=50},218:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));n(0);var r=n(65),a=n(1290),o=n(427),i=n(1);const s=r.g.div`
  > span {
    display: flex;
    align-items: center;
  }

  .option-label {
    display: inline-block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    & ~ i {
      margin-left: ${({theme:e})=>e.gridUnit}px;
    }
  }
  .type-label {
    margin-right: ${({theme:e})=>3*e.gridUnit}px;
    width: ${({theme:e})=>7*e.gridUnit}px;
    display: inline-block;
    text-align: center;
    font-weight: ${({theme:e})=>e.typography.weights.bold};
  }
`,l=e=>Object(i.d)(s,null,Object(i.d)(a.a,e)),c=e=>Object(i.d)(s,null,Object(i.d)(o.a,e))},229:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Column="column",e.ColumnOption="columnOption",e.AdhocColumnOption="adhocColumn",e.Metric="metric",e.MetricOption="metricOption",e.AdhocMetricOption="adhocMetric",e.FilterOption="filterOption"}(r||(r={}))},257:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y}));var r=n(89),a=n.n(r),o=n(31),i=n.n(o),s=(n(0),n(1)),l=n(65),c=n(465),u=n.n(c),d=n(74);const p=({animated:e=!1,fullWidth:t=!0,allowOverflow:n=!0,...r})=>Object(s.d)(u.a,i()({animated:e},r,{css:e=>s.c`
      overflow: ${n?"visible":"hidden"};

      .ant-tabs-content-holder {
        overflow: ${n?"visible":"auto"};
      }
      .ant-tabs-tab {
        flex: 1 1 auto;
        &.ant-tabs-tab-active .ant-tabs-tab-btn {
          color: inherit;
        }
        &:hover {
          .anchor-link-container {
            cursor: pointer;
            .fa.fa-link {
              visibility: visible;
            }
          }
        }
        .short-link-trigger.btn {
          padding: 0 ${e.gridUnit}px;
          & > .fa.fa-link {
            top: 0;
          }
        }
      }
      ${t&&s.c`
        .ant-tabs-nav-list {
          width: 100%;
        }
      `};

      .ant-tabs-tab-btn {
        display: flex;
        flex: 1 1 auto;
        align-items: center;
        justify-content: center;
        font-size: ${e.typography.sizes.s}px;
        text-align: center;
        text-transform: uppercase;
        user-select: none;
        .required {
          margin-left: ${e.gridUnit/2}px;
          color: ${e.colors.error.base};
        }
      }
      .ant-tabs-ink-bar {
        background: ${e.colors.secondary.base};
      }
    `})),h=Object(l.g)(u.a.TabPane)``,f=a()(p,{TabPane:h}),g=Object(l.g)(p)`
  .ant-tabs-content-holder {
    background: white;
  }

  & > .ant-tabs-nav {
    margin-bottom: 0;
  }

  .ant-tabs-tab-remove {
    padding-top: 0;
    padding-bottom: 0;
    height: ${({theme:e})=>6*e.gridUnit}px;
  }

  ${({fullWidth:e})=>e&&s.c`
      .ant-tabs-nav-list {
        width: 100%;
      }
    `}
`,b=a()(g,{TabPane:h});b.defaultProps={type:"editable-card",fullWidth:!1,animated:{inkBar:!0,tabPane:!1}},b.TabPane.defaultProps={closeIcon:Object(s.d)(d.a,{role:"button",tabIndex:0,cursor:"pointer",name:"cancel-x"})};const v=Object(l.g)(b)`
  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-tab {
    margin: 0 ${({theme:e})=>4*e.gridUnit}px;
    padding: ${({theme:e})=>`${3*e.gridUnit}px ${e.gridUnit}px`};
    background: transparent;
    border: none;
  }

  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-ink-bar {
    visibility: visible;
  }

  .ant-tabs-tab-btn {
    font-size: ${({theme:e})=>e.typography.sizes.m}px;
  }

  .ant-tabs-tab-remove {
    margin-left: 0;
    padding-right: 0;
  }

  .ant-tabs-nav-add {
    min-width: unset !important;
    background: transparent !important;
    border: none !important;
  }
`,m=a()(v,{TabPane:h});var y=f},285:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return c}));var r=n(12),a=n.n(r);const o=function(e,t,n="HH:mm:ss.SS"){const r=t-e;return a()(new Date(r)).utc().format(n)},i=function(){return a()().utc().valueOf()},s=function(e){return a()().subtract(e,"hours").utc().valueOf()},l=function(e){return a()().subtract(e,"days").utc().valueOf()},c=function(e){return a()().subtract(e,"years").utc().valueOf()}},288:function(e,t,n){e.exports=n(3597)},314:function(e,t,n){"use strict";var r=n(50),a=n.n(r),o=n(5),i=n.n(o),s=n(48),l=n(332),c=n(122);t.a=i.a.oneOfType([i.a.shape({expressionType:i.a.oneOf([c.a.SIMPLE]).isRequired,column:l.a.isRequired,aggregate:i.a.oneOf(a()(s.a)).isRequired,label:i.a.string.isRequired}),i.a.shape({expressionType:i.a.oneOf([c.a.SQL]).isRequired,sqlExpression:i.a.string.isRequired,label:i.a.string.isRequired})])},317:function(e,t,n){"use strict";n.d(t,"a",(function(){return Q})),n.d(t,"b",(function(){return X}));var r=n(926),a=n.n(r),o=n(554),i=n.n(o),s=n(41),l=n.n(s),c=n(73),u=n.n(c),d=n(69),p=n.n(d),h=n(76),f=n.n(h),g=n(96),b=n.n(g),v=n(50),m=n.n(v),y=n(33),_=n.n(y),O=n(1495),x=n.n(O),C=n(1480),j=n.n(C),E=n(1438),w=n(299),S=n(471),T=n(1255),M=n(1690),P=n(1691),R=n(560),A=n(584),D=(n(52),n(183)),k=n.n(D),I=n(108);const L=Object(I.a)((e,t,n)=>{var r;return!!n&&k()(r=b()(n)).call(r,n=>k()(n).call(n,([n,r])=>n===e&&r===t))});var F=L;const N=(e,t)=>!(null==t||!t.roles)&&((e=>{var t;return k()(t=m()(e.roles)).call(t,e=>"admin"===e.toLowerCase())})(t)||((e,t)=>{var n;return k()(n=e.owners).call(n,e=>e.username===t.username)})(e,t))&&L("can_write","Dashboard",t.roles);var U=n(979),B=n(81),W=n(101);var H=n(1393),q=n(3390),z=n(869),$=n(1388),G=n(177),V=n(879),K=n(49),Y=n(938);const Q="HYDRATE_DASHBOARD",X=(e,t,n)=>(r,o)=>{var s,c,d,h,g,v,y,O,C,D,k;const{user:I,common:L}=o();let{metadata:X}=e;const J=Object(Y.a)("regular"),Z="true"===Object(Y.a)("reserved").edit;let ee={};_()(t).call(t,e=>{e.slice_id=e.form_data.slice_id});try{ee=Object(V.b)(G.g.preselectFilters)||JSON.parse(X.default_filters)}catch(e){}if(null!=(s=X)&&s.label_colors){var te;const e=X.color_scheme,t=X.color_namespace,n=j()(X.label_colors)?JSON.parse(X.label_colors):X.label_colors;_()(te=m()(n)).call(te,r=>{E.b.getScale(e,t).setColor(r,n[r])})}const{position_data:ne}=e,re=ne&&m()(ne).length>0?ne:{[B.i]:"v2",[B.h]:{type:W.e,id:B.h,children:[B.d]},[B.d]:{type:W.c,id:B.d,children:[],parents:[B.h]}},ae={};_()(c=b()(re)).call(c,e=>{e.type===W.a&&(ae[e.meta.chartId]=e.id)});const oe=function(e={}){let t=e[B.h];if(t&&t.children.length&&e[t.children[0]].type===W.k){t=e[e[t.children[0]].children[0]]}else t=e[t.children[0]];return t.id}(re),ie=re[oe];let se,le=0;const ce=(null==(d=X)?void 0:d.filter_scopes)||{},ue={},de={},pe={},he=new f.a;_()(t).call(t,e=>{const t=e.slice_id,n={...e.form_data,url_params:{...e.form_data.url_params,...J}};if(ue[t]={...T.a,id:t,form_data:n,formData:Object(R.a)(n)},pe[t]={slice_id:t,slice_url:e.slice_url,slice_name:e.slice_name,form_data:e.form_data,viz_type:e.form_data.viz_type,datasource:e.form_data.datasource,description:e.description,description_markeddown:e.description_markeddown,owners:e.owners,modified:e.modified,changed_on:new Date(e.changed_on).getTime()},he.add(t),!ae[t]&&re[oe]){var r,a;if(0===le||le+B.m>B.l)se=Object(z.a)(W.j,p()(a=ie.parents||[]).call(a)),re[se.id]=se,ie.children.push(se.id),le=0;const t=Object(z.a)(W.a,{chartId:e.slice_id},p()(r=se.parents||[]).call(r));re[t.id]=t,se.children.push(t.id),ae[t.meta.chartId]=t.id,le+=B.m}if("filter_box"===e.form_data.viz_type){var o,i,s;const n=Object(H.a)(e.form_data);let{columns:r}=n;const{labels:a}=n;var c;if(ee[t])_()(c=m()(r)).call(c,e=>{ee[t][e]&&(r={...r,[e]:ee[t][e]})});const d=u()(o=m()(r)).call(o,(e,n)=>{const r={...ce[t]},{scope:a,immune:o}={...U.a,...r[n]};return{...e,[n]:{scope:a,immune:o}}},{}),h=ae[t],f=p()(i=re[h].parents||[]).call(i);f.push(h),de[t]={...U.b,chartId:t,componentId:h,datasourceId:e.form_data.datasource,filterName:e.slice_name,directPathToFilter:f,columns:r,labels:a,scopes:d,isInstantFilter:!!e.form_data.instant_filtering,isDateFilter:l()(s=m()(r)).call(s,$.TIME_RANGE)}}const d=ae[t];d&&re[d]&&(re[d].meta.sliceName=e.slice_name)}),Object(A.a)({dashboardFilters:de,components:re}),re[B.e]={id:B.e,type:W.d,meta:{text:e.dashboard_title}};const fe={past:[],present:re,future:[]},ge=Object(q.a)();let be=[];var ve;re[ge]&&(be=p()(ve=re[ge].parents||[]).call(ve),be.push(ge));const me=Object(P.b)({filterConfig:(null==(h=X)?void 0:h.native_filter_configuration)||[],filterSetsConfig:(null==(g=X)?void 0:g.filter_sets_configuration)||[]});var ye;(X||(X={}),X.show_native_filters=null==(v=null==e?void 0:null==(y=e.metadata)?void 0:y.show_native_filters)||v,Object(K.c)(K.a.DASHBOARD_CROSS_FILTERS))&&_()(ye=b()(fe.present)).call(ye,e=>{var t,n,r,a,o,i;const s=null==(t=e.meta)?void 0:t.chartId,c=null!=(n=null==(r=null!=(a=Object(w.a)().get(null==(o=ue[s])?void 0:null==(i=o.formData)?void 0:i.viz_type))?a:{})?void 0:r.behaviors)?n:[];X.chart_configuration||(X.chart_configuration={}),l()(c).call(c,S.b.INTERACTIVE_CHART)&&!X.chart_configuration[s]&&(X.chart_configuration[s]={id:s,crossFilters:{scope:{rootPath:[B.h],excluded:[s]}}})});const{roles:_e}=I,Oe=N(e,I);return r({type:Q,data:{datasources:x()(n,"uid"),sliceEntities:{...M.b,slices:pe,isLoading:!1},charts:ue,dashboardInfo:{...e,metadata:X,userId:String(I.userId),dash_edit_perm:Oe,dash_save_perm:F("can_save_dash","Superset",_e),dash_share_perm:F("can_share_dashboard","Superset",_e),superset_can_explore:F("can_explore","Superset",_e),superset_can_share:F("can_share_chart","Superset",_e),superset_can_csv:F("can_csv","Superset",_e),slice_can_edit:F("can_slice","Superset",_e),common:{flash_messages:L.flash_messages,conf:L.conf}},dashboardFilters:de,nativeFilters:me,dashboardState:{sliceIds:i()(he),directPathToChild:be,directPathLastUpdated:a()(),focusedFilterField:null,expandedSlices:(null==(O=X)?void 0:O.expanded_slices)||{},refreshFrequency:(null==(C=X)?void 0:C.refresh_frequency)||0,shouldPersistRefreshFrequency:!1,css:e.css||"",colorNamespace:(null==(D=X)?void 0:D.color_namespace)||null,colorScheme:(null==(k=X)?void 0:k.color_scheme)||null,editMode:Oe&&Z,isPublished:e.published,hasUnsavedChanges:!1,maxUndoHistoryExceeded:!1,lastModifiedTime:e.changed_on,lastFocusedTabId:null},dashboardLayout:fe}})}},318:function(e,t,n){"use strict";var r=n(5),a=n.n(r);t.a=a.a.shape({metric_name:a.a.string.isRequired,verbose_name:a.a.string,expression:a.a.string.isRequired})},326:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(31),a=n.n(r),o=n(1),i=(n(0),n(20)),s=n(65),l=n(74),c=n(103);function u(e){const{type:t="info",description:n,showIcon:r=!0,closable:u=!0,roomBelow:d=!1,children:p}=e,h=Object(s.i)(),{colors:f,typography:g,gridUnit:b}=h,{alert:v,error:m,info:y,success:_}=f;let O=y,x=c.a.InfoSolid;return"error"===t?(O=m,x=c.a.ErrorSolid):"warning"===t?(O=v,x=c.a.AlertSolid):"success"===t&&(O=_,x=c.a.CircleCheckSolid),Object(o.d)(i.a,a()({role:"alert",showIcon:r,icon:Object(o.d)(x,{"aria-label":`${t} icon`}),closeText:u&&Object(o.d)(l.a,{name:"x-small","aria-label":"close icon"}),css:Object(o.c)({marginBottom:d?4*b:0,padding:`${2*b}px ${3*b}px`,alignItems:"flex-start",border:0,backgroundColor:O.light2,"& .ant-alert-icon":{marginRight:2*b},"& .ant-alert-message":{color:O.dark2,fontSize:g.sizes.m,fontWeight:n?g.weights.bold:g.weights.normal},"& .ant-alert-description":{color:O.dark2,fontSize:g.sizes.m}},"","")},e),p)}},327:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"m",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return c})),n.d(t,"n",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"o",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"l",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return m})),n.d(t,"k",(function(){return y})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return O}));var r=n(76),a=n.n(r);const o="load_chart",i="render_chart",s="hide_browser_tab",l="mount_dashboard",c="mount_explorer",u="select_dashboard_tab",d="force_refresh_chart",p="change_explore_controls",h="toggle_edit_dashboard",f="force_refresh_dashboard",g="periodic_render_dashboard",b="explore_dashboard_chart",v="export_csv_dashboard_chart",m="change_dashboard_filter",y="omnibar_triggered",_=new a.a([o,i,s]),O=(new a.a([l,u,b,d,v,m,p,h,f,g,y,c]),{getTimestamp:()=>Math.round(window.performance.now())})},332:function(e,t,n){"use strict";var r=n(5),a=n.n(r);t.a=a.a.shape({column_name:a.a.string.isRequired,type:a.a.string})},3380:function(e,t,n){var r=n(3381);e.exports=r},3381:function(e,t,n){n(3382);var r=n(111);e.exports=r.Date.now},3382:function(e,t,n){n(51)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},3387:function(e,t,n){e.exports=n(3593)},3388:function(e,t,n){e.exports=n(3601)},3389:function(e,t,n){e.exports=n(3606)},3390:function(e,t,n){"use strict";function r(){return(window.location.hash||"#").substring(1)}n.d(t,"a",(function(){return r}))},3391:function(e,t,n){var r=n(1473)("keyBy",n(1495));r.placeholder=n(1296),e.exports=r},3392:function(e,t,n){var r=n(1473)("flow",n(3647));r.placeholder=n(1296),e.exports=r},3393:function(e,t,n){var r=n(1473)("mapValues",n(3649));r.placeholder=n(1296),e.exports=r},3481:function(e,t,n){"use strict";var r=n(69),a=n.n(r),o=n(144),i=n.n(o),s=n(134),l=n(400),c=n(838),u=n(327),d=n(288),p=n.n(d),h=n(17),f=n.n(h),g=n(118),b=n.n(g);const v=new class{constructor({callback:e=(()=>{}),sizeThreshold:t=1e3,delayThreshold:n=1e3}){var r;this.queue=[],this.sizeThreshold=t,this.delayThrehold=n,this.trigger=b()(f()(r=this.trigger).call(r,this),this.delayThrehold),this.callback=e}append(e){this.queue.push(e),this.trigger()}trigger(){if(this.queue.length>0){var e;const t=p()(e=this.queue).call(e,0,this.sizeThreshold);this.callback.call(null,t),this.queue.length>0&&this.trigger()}}}({callback:e=>{if(e.length<=0)return;let t="/superset/log/?explode=events";const{source:n,source_id:r}=e[0];if("dashboard"===n?t+=`&dashboard_id=${r}`:"slice"===n&&(t+=`&slice_id=${r}`),navigator.sendBeacon){const n=new FormData;n.append("events",Object(l.a)(e)),navigator.sendBeacon(t,n)}else s.a.post({endpoint:t,postPayload:{events:e},parseMethod:null})},sizeThreshold:1024,delayThreshold:1e3});let m=0;t.a=e=>t=>n=>{var r;if(n.type!==c.LOG_EVENT)return t(n);const{dashboardInfo:o,explore:s,impressionId:l,dashboardLayout:d}=e.getState();let p={impression_id:l,version:"v2"};o?p={source:"dashboard",source_id:o.id,...p}:s&&(p={source:"explore",source_id:a()(s)?a()(s).slice_id:0,...p});const{eventName:h}=n.payload;let{eventData:f={}}=n.payload;if(f={...p,ts:(new Date).getTime(),event_name:h,...f},u.p.has(h)?f={...f,event_type:"timing",trigger_event:m}:(m=i.a.generate(),f={...f,event_type:"user",event_id:m,visibility:document.visibilityState}),f.target_id&&null!=d&&null!=(r=d.present)&&r[f.target_id]){const{meta:e}=d.present[f.target_id];f.target_name=e.chartId?e.sliceName:e.text}return v.append(f),f}},3500:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(33),a=n.n(r),o=n(1410),i=n(81),s=n(101);function l({id:e,components:t}){var n;const r=t[e];if(!r)return 0;let o=0;return a()(n=r.children||[]).call(n,e=>{const n=t[e]||{};o+=(n.meta||{}).width||0}),o}function c({id:e,component:t,components:n={}}){const r={width:void 0,occupiedWidth:void 0,minimumWidth:void 0},u=t||n[e];if(!u)return r;if(r.width=(u.meta||{}).width,r.occupiedWidth=r.width,u.type===s.j)r.width=c({id:Object(o.a)({childId:u.id,layout:n}),components:n}).width||i.l,r.occupiedWidth=l({id:u.id,components:n}),r.minimumWidth=r.occupiedWidth||i.o;else if(u.type===s.b){var d;r.minimumWidth=i.o,r.occupiedWidth=0,a()(d=u.children||[]).call(d,e=>{n[e].type===s.j&&(r.minimumWidth=Math.max(r.minimumWidth,l({id:e,components:n})))})}else u.type!==s.h&&u.type!==s.a||(r.minimumWidth=i.o);return r}},3509:function(e,t,n){n(324);var r=n(3510),a=n(231),o=Array.prototype,i={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.values;return e===o||e instanceof Array&&t===o.values||i.hasOwnProperty(a(e))?r:t}},3510:function(e,t,n){var r=n(3511);e.exports=r},3511:function(e,t,n){n(330);var r=n(86);e.exports=r("Array").values},3512:function(e,t,n){var r=n(269);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&!1!==a(s[i],i,s););return n}}},3513:function(e,t,n){var r=n(3514);e.exports=r},3514:function(e,t,n){var r=n(3515),a=Array.prototype;e.exports=function(e){var t=e.flat;return e===a||e instanceof Array&&t===a.flat?r:t}},3515:function(e,t,n){n(3516),n(3517);var r=n(86);e.exports=r("Array").flat},3516:function(e,t,n){"use strict";var r=n(51),a=n(1304),o=n(176),i=n(175),s=n(874),l=n(441);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=i(t.length),r=l(t,0);return r.length=a(r,t,t,n,0,void 0===e?1:s(e)),r}})},3517:function(e,t,n){n(302)("flat")},3518:function(e,t){e.exports=function(){}},3519:function(e,t,n){var r=n(3632);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},3520:function(e,t,n){var r=n(541),a=n(414);e.exports=function(e,t){return e&&r(t,a(t),e)}},3521:function(e,t,n){var r=n(541),a=n(579);e.exports=function(e,t){return r(e,a(e),t)}},3522:function(e,t,n){var r=n(541),a=n(1293);e.exports=function(e,t){return r(e,a(e),t)}},3523:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},3524:function(e,t,n){var r=n(828),a=n(3525),o=n(3526),i=n(3527),s=n(944);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return a(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return o(e);case"[object Set]":return new l;case"[object Symbol]":return i(e)}}},3525:function(e,t,n){var r=n(828);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},3526:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},3527:function(e,t,n){var r=n(301),a=r?r.prototype:void 0,o=a?a.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},3528:function(e,t,n){var r=n(3529),a=n(829),o=n(830),i=o&&o.isMap,s=i?a(i):r;e.exports=s},3529:function(e,t,n){var r=n(497),a=n(152);e.exports=function(e){return a(e)&&"[object Map]"==r(e)}},3530:function(e,t,n){var r=n(3531),a=n(829),o=n(830),i=o&&o.isSet,s=i?a(i):r;e.exports=s},3531:function(e,t,n){var r=n(497),a=n(152);e.exports=function(e){return a(e)&&"[object Set]"==r(e)}},3532:function(e,t,n){var r=n(583),a=n(3645);e.exports=function e(t,n,o,i,s){var l=-1,c=t.length;for(o||(o=a),s||(s=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,i,s):r(s,u):i||(s[s.length]=u)}return s}},3533:function(e,t,n){var r=n(3534);e.exports=r},3534:function(e,t,n){n(3535);var r=n(111);e.exports=r.parseFloat},3535:function(e,t,n){var r=n(51),a=n(3536);r({global:!0,forced:parseFloat!=a},{parseFloat:a})},3536:function(e,t,n){var r=n(125),a=n(947).trim,o=n(585),i=r.parseFloat,s=1/i(o+"-0")!=-1/0;e.exports=s?function(e){var t=a(String(e)),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},3537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPicker=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),o=l(n(105)),i=n(188),s=l(n(3559));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.AlphaPicker=function(e){var t=e.rgb,n=e.hsl,s=e.width,l=e.height,c=e.onChange,u=e.direction,d=e.style,p=e.renderers,h=e.pointer,f=e.className,g=void 0===f?"":f,b=(0,o.default)({default:{picker:{position:"relative",width:s,height:l},alpha:{radius:"2px",style:d}}});return a.default.createElement("div",{style:b.picker,className:"alpha-picker "+g},a.default.createElement(i.Alpha,r({},b.alpha,{rgb:t,hsl:n,pointer:h,renderers:p,onChange:c,direction:u})))};c.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},t.default=(0,i.ColorWrap)(c)},3538:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(1480)),a=s(n(1460)),o=s(n(502)),i=s(n(578));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,i.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,o.default)(t)?(0,a.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=l},3539:function(e,t,n){var r=n(1400),a=n(269);e.exports=function(e,t){var n=-1,o=a(e)?Array(e.length):[];return r(e,(function(e,r,a){o[++n]=t(e,r,a)})),o}},3540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=i(n(1460)),a=i(n(3541)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,a.default)(e.default)||{};return t.map((function(t){var a=e[t];return a&&(0,r.default)(a,(function(e,t){n[t]||(n[t]={}),n[t]=o({},n[t],a[t])})),t})),n};t.default=s},3541:function(e,t,n){var r=n(1461);e.exports=function(e){return r(e,5)}},3542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,a=n(1460),o=(r=a)&&r.__esModule?r:{default:r},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,n){var r={};(0,o.default)(e,(function(e,t){var n=s[t];n?r=i({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=l},3543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,c;s(this,r);for(var u=arguments.length,d=Array(u),p=0;p<u;p++)d[p]=arguments[p];return o=c=l(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(d))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0})},c.handleMouseOut=function(){return c.setState({hover:!1})},c.render=function(){return i.default.createElement(t,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},i.default.createElement(e,a({},c.props,c.state)))},l(c,o)}return c(r,n),r}(i.default.Component)};t.default=u},3544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,c;s(this,r);for(var u=arguments.length,d=Array(u),p=0;p<u;p++)d[p]=arguments[p];return o=c=l(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(d))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0})},c.handleMouseUp=function(){return c.setState({active:!1})},c.render=function(){return i.default.createElement(t,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},i.default.createElement(e,a({},c.props,c.state)))},l(c,o)}return c(r,n),r}(i.default.Component)};t.default=u},3545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},3546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=u(o),s=u(n(105)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3547)),c=u(n(1801));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=t.Alpha=function(e){function t(){var e,n,r;d(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e,t){var n=l.calculateChange(e,t,r.props,r.container);n&&r.props.onChange&&r.props.onChange(n,e)},r.handleMouseDown=function(e){r.handleChange(e,!0),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:r({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return i.default.createElement("div",{style:n.alpha},i.default.createElement("div",{style:n.checkboard},i.default.createElement(c.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:n.gradient}),i.default.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:n.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:n.slider}))))}}]),t}(o.PureComponent||o.Component);t.default=h},3547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var a=r.clientWidth,o=r.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=i-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n.direction){var u=void 0;if(u=c<0?0:c>o?1:Math.round(100*c/o)/100,n.hsl.a!==u)return{h:n.hsl.h,s:n.hsl.s,l:n.hsl.l,a:u,source:"rgb"}}else{var d=void 0;if(d=l<0?0:l>a?1:Math.round(100*l/a)/100,n.a!==d)return{h:n.hsl.h,s:n.hsl.s,l:n.hsl.l,a:d,source:"rgb"}}return null}},3548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},a=t.render=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var a=r?new r:document.createElement("canvas");a.width=2*n,a.height=2*n;var o=a.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,a.width,a.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),a.toDataURL()):null};t.get=function(e,t,n,o){var i=e+"-"+t+"-"+n+(o?"-server":""),s=a(e,t,n,o);return r[i]?r[i]:(r[i]=s,s)}},3549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=s(a),i=s(n(105));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,e.target.value),e):n.props.onChange&&n.props.onChange(e.target.value,e),n.setState({value:e.target.value})},n.handleKeyDown=function(e){var t=String(e.target.value),r=t.indexOf("%")>-1,a=Number(t.replace(/%/g,""));if(!isNaN(a)){var o=n.props.arrowOffset||1;38===e.keyCode&&(null!==n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,a+o),e):n.props.onChange&&n.props.onChange(a+o,e),r?n.setState({value:a+o+"%"}):n.setState({value:a+o})),40===e.keyCode&&(null!==n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,a-o),e):n.props.onChange&&n.props.onChange(a-o,e),r?n.setState({value:a-o+"%"}):n.setState({value:a-o}))}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(l({},n.props.label,t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.input;e.value!==this.state.value&&(t===document.activeElement?this.setState({blurValue:String(e.value).toUpperCase()}):this.setState({value:String(e.value).toUpperCase(),blurValue:!this.state.blurValue&&String(e.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return o.default.createElement("div",{style:t.wrap},o.default.createElement("input",{style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?o.default.createElement("span",{style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(a.PureComponent||a.Component);t.default=c},3550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=l(a),i=l(n(105)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3551));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.Hue=function(e){function t(){var e,n,r;c(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e,t){var n=s.calculateChange(e,t,r.props,r.container);n&&r.props.onChange&&r.props.onChange(n,e)},r.handleMouseDown=function(e){r.handleChange(e,!0),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return o.default.createElement("div",{style:r.hue},o.default.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),o.default.createElement("div",{style:r.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:r.slider}))))}}]),t}(a.PureComponent||a.Component);t.default=d},3551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var a=r.clientWidth,o=r.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=i-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n.direction){var u=void 0;if(c<0)u=359;else if(c>o)u=0;else{u=360*(-100*c/o+100)/100}if(n.hsl.h!==u)return{h:u,s:n.hsl.s,l:n.hsl.l,a:n.hsl.a,source:"rgb"}}else{var d=void 0;if(l<0)d=0;else if(l>a)d=359;else{d=360*(100*l/a)/100}if(n.hsl.h!==d)return{h:d,s:n.hsl.s,l:n.hsl.l,a:n.hsl.a,source:"rgb"}}return null}},3552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var r=i(n(0)),a=i(n(5)),o=i(n(105));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.Raised=function(e){var t=e.zDepth,n=e.radius,a=e.background,i=e.children,s=(0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:a}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},{"zDepth-1":1===t});return r.default.createElement("div",{style:s.wrap},r.default.createElement("div",{style:s.bg}),r.default.createElement("div",{style:s.content},i))};s.propTypes={background:a.default.string,zDepth:a.default.oneOf([0,1,2,3,4,5]),radius:a.default.number},s.defaultProps={background:"#fff",zDepth:1,radius:2},t.default=s},3553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=c(a),i=c(n(105)),s=c(n(1408)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3554));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e,t){n.props.onChange&&n.throttle(n.props.onChange,l.calculateChange(e,t,n.props,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e,!0),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,s.default)((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,a=t.black,s=t.pointer,l=t.circle,c=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:a,pointer:s,circle:l}},{custom:!!this.props.style});return o.default.createElement("div",{style:c.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),o.default.createElement("div",{style:c.white,className:"saturation-white"},o.default.createElement("div",{style:c.black,className:"saturation-black"}),o.default.createElement("div",{style:c.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:c.circle}))))}}]),t}(a.PureComponent||a.Component);t.default=u},3554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var a=r.getBoundingClientRect(),o=a.width,i=a.height,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(r.getBoundingClientRect().left+window.pageXOffset),u=l-(r.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>o?c=o:u<0?u=0:u>i&&(u=i);var d=100*c/o,p=-100*u/i+100;return{h:n.hsl.h,s:d,v:p,a:n.hsl.a,source:"rgb"}}},3555:function(e,t,n){e.exports=n(3556)},3556:function(e,t,n){var r=n(1292),a=n(1400),o=n(1800),i=n(117);e.exports=function(e,t){return(i(e)?r:a)(e,o(t))}},3557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),o=l(n(105)),i=n(3558),s=n(188);function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Swatch=function(e){var t=e.color,n=e.style,i=e.onClick,l=void 0===i?function(){}:i,c=e.onHover,u=e.title,d=void 0===u?t:u,p=e.children,h=e.focus,f=e.focusStyle,g=void 0===f?{}:f,b="transparent"===t,v=(0,o.default)({default:{swatch:r({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,h?g:{})}}),m={};return c&&(m.onMouseOver=function(e){return c(t,e)}),a.default.createElement("div",r({style:v.swatch,onClick:function(e){return l(t,e)},title:d,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&l(t,e)}},m),p,b&&a.default.createElement(s.Checkboard,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,i.handleFocus)(c)},3558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),s=(r=i)&&r.__esModule?r:{default:r};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;l(this,r);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=n=c(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},c(n,t)}return u(r,n),o(r,[{key:"render",value:function(){return s.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(e,a({},this.props,this.state)))}}]),r}(s.default.Component)}},3559:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPointer=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.AlphaPointer=function(e){var t=e.direction,n=(0,a.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return r.default.createElement("div",{style:n.picker})};t.default=i},3560:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var r=c(n(0)),a=c(n(5)),o=c(n(105)),i=c(n(439)),s=n(188),l=c(n(3561));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Block=function(e){var t=e.onChange,n=e.onSwatchHover,a=e.hex,c=e.colors,u=e.width,d=e.triangle,p=e.className,h=void 0===p?"":p,f="transparent"===a,g=function(e,n){i.default.isValidHex(e)&&t({hex:e,source:"hex"},n)},b=(0,o.default)({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:a,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:i.default.getContrastingColor(a),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+a+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},{"hide-triangle":"hide"===d});return r.default.createElement("div",{style:b.card,className:"block-picker "+h},r.default.createElement("div",{style:b.triangle}),r.default.createElement("div",{style:b.head},f&&r.default.createElement(s.Checkboard,{borderRadius:"6px 6px 0 0"}),r.default.createElement("div",{style:b.label},a)),r.default.createElement("div",{style:b.body},r.default.createElement(l.default,{colors:c,onClick:g,onSwatchHover:n}),r.default.createElement(s.EditableInput,{style:{input:b.input},value:a,onChange:g})))};u.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),colors:a.default.arrayOf(a.default.string),triangle:a.default.oneOf(["top","hide"])},u.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top"},t.default=(0,s.ColorWrap)(u)},3561:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSwatches=void 0;var r=s(n(0)),a=s(n(105)),o=s(n(578)),i=n(188);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.BlockSwatches=function(e){var t=e.colors,n=e.onClick,s=e.onSwatchHover,l=(0,a.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return r.default.createElement("div",{style:l.swatches},(0,o.default)(t,(function(e){return r.default.createElement(i.Swatch,{key:e,color:e,style:l.swatch,onClick:n,onHover:s,focusStyle:{boxShadow:"0 0 4px "+e}})})),r.default.createElement("div",{style:l.clear}))};t.default=l},3562:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;var r=u(n(0)),a=u(n(5)),o=u(n(105)),i=u(n(578)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1803)),l=n(188),c=u(n(3563));function u(e){return e&&e.__esModule?e:{default:e}}var d=t.Circle=function(e){var t=e.width,n=e.onChange,a=e.onSwatchHover,s=e.colors,l=e.hex,u=e.circleSize,d=e.circleSpacing,p=e.className,h=void 0===p?"":p,f=(0,o.default)({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-d,marginBottom:-d}}}),g=function(e,t){return n({hex:e,source:"hex"},t)};return r.default.createElement("div",{style:f.card,className:"circle-picker "+h},(0,i.default)(s,(function(e){return r.default.createElement(c.default,{key:e,color:e,onClick:g,onSwatchHover:a,active:l===e.toLowerCase(),circleSize:u,circleSpacing:d})})))};d.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),circleSize:a.default.number,circleSpacing:a.default.number},d.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[s.red[500],s.pink[500],s.purple[500],s.deepPurple[500],s.indigo[500],s.blue[500],s.lightBlue[500],s.cyan[500],s.teal[500],s.green[500],s.lightGreen[500],s.lime[500],s.yellow[500],s.amber[500],s.orange[500],s.deepOrange[500],s.brown[500],s.blueGrey[500]]},t.default=(0,l.ColorWrap)(d)},3563:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleSwatch=void 0;var r=s(n(0)),a=n(105),o=s(a),i=n(188);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CircleSwatch=function(e){var t=e.color,n=e.onClick,a=e.onSwatchHover,s=e.hover,l=e.active,c=e.circleSize,u=e.circleSpacing,d=(0,o.default)({default:{swatch:{width:c,height:c,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+c/2+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:l});return r.default.createElement("div",{style:d.swatch},r.default.createElement(i.Swatch,{style:d.Swatch,color:t,onClick:n,onHover:a,focusStyle:{boxShadow:d.Swatch.boxShadow+", 0 0 5px "+t}}))};l.defaultProps={circleSize:28,circleSpacing:14},t.default=(0,a.handleHover)(l)},3564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome=void 0;var r=u(n(0)),a=u(n(5)),o=u(n(105)),i=n(188),s=u(n(3565)),l=u(n(3566)),c=u(n(3567));function u(e){return e&&e.__esModule?e:{default:e}}var d=t.Chrome=function(e){var t=e.onChange,n=e.disableAlpha,a=e.rgb,u=e.hsl,d=e.hsv,p=e.hex,h=e.renderers,f=e.className,g=void 0===f?"":f,b=(0,o.default)({default:{picker:{background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",width:"225px",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+a.r+", "+a.g+", "+a.b+", "+a.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},{disableAlpha:n});return r.default.createElement("div",{style:b.picker,className:"chrome-picker "+g},r.default.createElement("div",{style:b.saturation},r.default.createElement(i.Saturation,{style:b.Saturation,hsl:u,hsv:d,pointer:c.default,onChange:t})),r.default.createElement("div",{style:b.body},r.default.createElement("div",{style:b.controls,className:"flexbox-fix"},r.default.createElement("div",{style:b.color},r.default.createElement("div",{style:b.swatch},r.default.createElement("div",{style:b.active}),r.default.createElement(i.Checkboard,{renderers:h}))),r.default.createElement("div",{style:b.toggles},r.default.createElement("div",{style:b.hue},r.default.createElement(i.Hue,{style:b.Hue,hsl:u,pointer:l.default,onChange:t})),r.default.createElement("div",{style:b.alpha},r.default.createElement(i.Alpha,{style:b.Alpha,rgb:a,hsl:u,pointer:l.default,renderers:h,onChange:t})))),r.default.createElement(s.default,{rgb:a,hsl:u,hex:p,onChange:t,disableAlpha:n})))};d.propTypes={disableAlpha:a.default.bool},d.defaultProps={disableAlpha:!1},t.default=(0,i.ColorWrap)(d)},3565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeFields=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(0)),o=l(n(105)),i=l(n(439)),s=n(188);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.ChromeFields=function(e){function t(){var e,n,r;c(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={view:""},r.toggleViews=function(){"hex"===r.state.view?r.setState({view:"rgb"}):"rgb"===r.state.view?r.setState({view:"hsl"}):"hsl"===r.state.view&&(1===r.props.hsl.a?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(e,t){e.hex?i.default.isValidHex(e.hex)&&r.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?r.props.onChange({r:e.r||r.props.rgb.r,g:e.g||r.props.rgb.g,b:e.b||r.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&r.props.onChange({h:e.h||r.props.hsl.h,s:Number(e.s&&e.s||r.props.hsl.s),l:Number(e.l&&e.l||r.props.hsl.l),source:"hsl"},t)},r.showHighlight=function(e){e.target.style.background="#eee"},r.hideHighlight=function(e){e.target.style.background="transparent"},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(e){1!==e.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var e=this,t=(0,o.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=a.default.createElement("div",{style:t.fields,className:"flexbox-fix"},a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=a.default.createElement("div",{style:t.fields,className:"flexbox-fix"},a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),a.default.createElement("div",{style:t.alpha},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=a.default.createElement("div",{style:t.fields,className:"flexbox-fix"},a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),a.default.createElement("div",{style:t.alpha},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),a.default.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,a.default.createElement("div",{style:t.toggle},a.default.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},a.default.createElement("svg",{style:t.svg,viewBox:"0 0 24 24",onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight},a.default.createElement("path",{ref:function(t){return e.iconUp=t},fill:"#333",d:"M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}),a.default.createElement("path",{ref:function(t){return e.iconDown=t},fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"})))))}}]),t}(a.default.Component);t.default=d},3566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointer=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointer=function(){var e=(0,a.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return r.default.createElement("div",{style:e.picker})};t.default=i},3567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointerCircle=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointerCircle=function(){var e=(0,a.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return r.default.createElement("div",{style:e.picker})};t.default=i},3568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Compact=void 0;var r=d(n(0)),a=d(n(5)),o=d(n(105)),i=d(n(578)),s=d(n(439)),l=n(188),c=d(n(3569)),u=d(n(3570));function d(e){return e&&e.__esModule?e:{default:e}}var p=t.Compact=function(e){var t=e.onChange,n=e.onSwatchHover,a=e.colors,d=e.hex,p=e.rgb,h=e.className,f=void 0===h?"":h,g=(0,o.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}}),b=function(e,n){e.hex?s.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return r.default.createElement(l.Raised,{style:g.Compact},r.default.createElement("div",{style:g.compact,className:"compact-picker "+f},r.default.createElement("div",null,(0,i.default)(a,(function(e){return r.default.createElement(c.default,{key:e,color:e,active:e.toLowerCase()===d,onClick:b,onSwatchHover:n})})),r.default.createElement("div",{style:g.clear})),r.default.createElement(u.default,{hex:d,rgb:p,onChange:b})))};p.propTypes={colors:a.default.arrayOf(a.default.string)},p.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]},t.default=(0,l.ColorWrap)(p)},3569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactColor=void 0;var r=s(n(0)),a=s(n(105)),o=s(n(439)),i=n(188);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CompactColor=function(e){var t=e.color,n=e.onClick,s=void 0===n?function(){}:n,l=e.onSwatchHover,c=e.active,u=(0,a.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:o.default.getContrastingColor(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:c,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return r.default.createElement(i.Swatch,{style:u.color,color:t,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+t}},r.default.createElement("div",{style:u.dot}))};t.default=l},3570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactFields=void 0;var r=i(n(0)),a=i(n(105)),o=n(188);function i(e){return e&&e.__esModule?e:{default:e}}var s=t.CompactFields=function(e){var t=e.hex,n=e.rgb,i=e.onChange,s=(0,a.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(e,t){e.r||e.g||e.b?i({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):i({hex:e.hex,source:"hex"},t)};return r.default.createElement("div",{style:s.fields,className:"flexbox-fix"},r.default.createElement("div",{style:s.active}),r.default.createElement(o.EditableInput,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:l}),r.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:n.r,onChange:l}),r.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:n.g,onChange:l}),r.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:n.b,onChange:l}))};t.default=s},3571:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Github=void 0;var r=c(n(0)),a=c(n(5)),o=c(n(105)),i=c(n(578)),s=n(188),l=c(n(3572));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Github=function(e){var t=e.width,n=e.colors,a=e.onChange,s=e.onSwatchHover,c=e.triangle,u=e.className,d=void 0===u?"":u,p=(0,o.default)({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},{"hide-triangle":"hide"===c,"top-left-triangle":"top-left"===c,"top-right-triangle":"top-right"===c,"bottom-left-triangle":"bottom-left"==c,"bottom-right-triangle":"bottom-right"===c}),h=function(e,t){return a({hex:e,source:"hex"},t)};return r.default.createElement("div",{style:p.card,className:"github-picker "+d},r.default.createElement("div",{style:p.triangleShadow}),r.default.createElement("div",{style:p.triangle}),(0,i.default)(n,(function(e){return r.default.createElement(l.default,{color:e,key:e,onClick:h,onSwatchHover:s})})))};u.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),colors:a.default.arrayOf(a.default.string),triangle:a.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"])},u.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left"},t.default=(0,s.ColorWrap)(u)},3572:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GithubSwatch=void 0;var r=s(n(0)),a=n(105),o=s(a),i=n(188);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.GithubSwatch=function(e){var t=e.hover,n=e.color,a=e.onClick,s=e.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},c=(0,o.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:t});return r.default.createElement("div",{style:c.swatch},r.default.createElement(i.Swatch,{color:n,onClick:a,onHover:s,focusStyle:l}))};t.default=(0,a.handleHover)(l)},3573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HuePicker=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),o=l(n(105)),i=n(188),s=l(n(3574));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.HuePicker=function(e){var t=e.width,n=e.height,s=e.onChange,l=e.hsl,c=e.direction,u=e.pointer,d=e.className,p=void 0===d?"":d,h=(0,o.default)({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}});return a.default.createElement("div",{style:h.picker,className:"hue-picker "+p},a.default.createElement(i.Hue,r({},h.hue,{hsl:l,pointer:u,onChange:function(e){return s({a:1,h:e.h,l:.5,s:1})},direction:c})))};c.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},t.default=(0,i.ColorWrap)(c)},3574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(e){var t=e.direction,n=(0,a.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return r.default.createElement("div",{style:n.picker})};t.default=i},3575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var r=s(n(0)),a=s(n(105)),o=s(n(439)),i=n(188);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.Material=function(e){var t=e.onChange,n=e.hex,s=e.rgb,l=e.className,c=void 0===l?"":l,u=(0,a.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}}),d=function(e,n){e.hex?o.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||s.r,g:e.g||s.g,b:e.b||s.b,source:"rgb"},n)};return r.default.createElement(i.Raised,null,r.default.createElement("div",{style:u.material,className:"material-picker "+c},r.default.createElement(i.EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:n,onChange:d}),r.default.createElement("div",{style:u.split,className:"flexbox-fix"},r.default.createElement("div",{style:u.third},r.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:s.r,onChange:d})),r.default.createElement("div",{style:u.third},r.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:s.g,onChange:d})),r.default.createElement("div",{style:u.third},r.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:s.b,onChange:d})))))};t.default=(0,i.ColorWrap)(l)},3576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Photoshop=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=h(n(0)),o=h(n(5)),i=h(n(105)),s=n(188),l=h(n(3577)),c=h(n(3578)),u=h(n(3579)),d=h(n(3580)),p=h(n(3581));function h(e){return e&&e.__esModule?e:{default:e}}var f=t.Photoshop=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this.props.className,t=void 0===e?"":e,n=(0,i.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}});return a.default.createElement("div",{style:n.picker,className:"photoshop-picker "+t},a.default.createElement("div",{style:n.head},this.props.header),a.default.createElement("div",{style:n.body,className:"flexbox-fix"},a.default.createElement("div",{style:n.saturation},a.default.createElement(s.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:c.default,onChange:this.props.onChange})),a.default.createElement("div",{style:n.hue},a.default.createElement(s.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:u.default,onChange:this.props.onChange})),a.default.createElement("div",{style:n.controls},a.default.createElement("div",{style:n.top,className:"flexbox-fix"},a.default.createElement("div",{style:n.previews},a.default.createElement(p.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),a.default.createElement("div",{style:n.actions},a.default.createElement(d.default,{label:"OK",onClick:this.props.onAccept,active:!0}),a.default.createElement(d.default,{label:"Cancel",onClick:this.props.onCancel}),a.default.createElement(l.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(a.default.Component);f.propTypes={header:o.default.string},f.defaultProps={header:"Color Picker"},t.default=(0,s.ColorWrap)(f)},3577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPicker=void 0;var r=s(n(0)),a=s(n(105)),o=s(n(439)),i=n(188);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.PhotoshopPicker=function(e){var t=e.onChange,n=e.rgb,s=e.hsv,l=e.hex,c=(0,a.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),u=function(e,r){e["#"]?o.default.isValidHex(e["#"])&&t({hex:e["#"],source:"hex"},r):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},r):(e.h||e.s||e.v)&&t({h:e.h||s.h,s:e.s||s.s,v:e.v||s.v,source:"hsv"},r)};return r.default.createElement("div",{style:c.fields},r.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"h",value:Math.round(s.h),onChange:u}),r.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"s",value:Math.round(100*s.s),onChange:u}),r.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"v",value:Math.round(100*s.v),onChange:u}),r.default.createElement("div",{style:c.divider}),r.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:n.r,onChange:u}),r.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:n.g,onChange:u}),r.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:n.b,onChange:u}),r.default.createElement("div",{style:c.divider}),r.default.createElement(i.EditableInput,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"#",value:l.replace("#",""),onChange:u}),r.default.createElement("div",{style:c.fieldSymbols},r.default.createElement("div",{style:c.symbol},"°"),r.default.createElement("div",{style:c.symbol},"%"),r.default.createElement("div",{style:c.symbol},"%")))};t.default=l},3578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(e){var t=e.hsl,n=(0,a.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return r.default.createElement("div",{style:n.picker})};t.default=i},3579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(){var e=(0,a.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return r.default.createElement("div",{style:e.pointer},r.default.createElement("div",{style:e.left},r.default.createElement("div",{style:e.leftInside})),r.default.createElement("div",{style:e.right},r.default.createElement("div",{style:e.rightInside})))};t.default=i},3580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopBotton=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopBotton=function(e){var t=e.onClick,n=e.label,o=e.children,i=e.active,s=(0,a.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return r.default.createElement("div",{style:s.button,onClick:t},n||o)};t.default=i},3581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPreviews=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPreviews=function(e){var t=e.rgb,n=e.currentColor,o=(0,a.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return r.default.createElement("div",null,r.default.createElement("div",{style:o.label},"new"),r.default.createElement("div",{style:o.swatches},r.default.createElement("div",{style:o.new}),r.default.createElement("div",{style:o.current})),r.default.createElement("div",{style:o.label},"current"))};t.default=i},3582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sketch=void 0;var r=c(n(0)),a=c(n(5)),o=c(n(105)),i=n(188),s=c(n(3583)),l=c(n(3584));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Sketch=function(e){var t=e.width,n=e.rgb,a=e.hex,c=e.hsv,u=e.hsl,d=e.onChange,p=e.onSwatchHover,h=e.disableAlpha,f=e.presetColors,g=e.renderers,b=e.className,v=void 0===b?"":b,m=(0,o.default)({default:{picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},{disableAlpha:h});return r.default.createElement("div",{style:m.picker,className:"sketch-picker "+v},r.default.createElement("div",{style:m.saturation},r.default.createElement(i.Saturation,{style:m.Saturation,hsl:u,hsv:c,onChange:d})),r.default.createElement("div",{style:m.controls,className:"flexbox-fix"},r.default.createElement("div",{style:m.sliders},r.default.createElement("div",{style:m.hue},r.default.createElement(i.Hue,{style:m.Hue,hsl:u,onChange:d})),r.default.createElement("div",{style:m.alpha},r.default.createElement(i.Alpha,{style:m.Alpha,rgb:n,hsl:u,renderers:g,onChange:d}))),r.default.createElement("div",{style:m.color},r.default.createElement(i.Checkboard,null),r.default.createElement("div",{style:m.activeColor}))),r.default.createElement(s.default,{rgb:n,hsl:u,hex:a,onChange:d,disableAlpha:h}),r.default.createElement(l.default,{colors:f,onClick:d,onSwatchHover:p}))};u.propTypes={disableAlpha:a.default.bool,width:a.default.oneOfType([a.default.string,a.default.number])},u.defaultProps={disableAlpha:!1,width:200,presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},t.default=(0,i.ColorWrap)(u)},3583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchFields=void 0;var r=s(n(0)),a=s(n(105)),o=s(n(439)),i=n(188);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SketchFields=function(e){var t=e.onChange,n=e.rgb,s=e.hsl,l=e.hex,c=e.disableAlpha,u=(0,a.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:c}),d=function(e,r){e.hex?o.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},r):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},r):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:s.h,s:s.s,l:s.l,a:e.a,source:"rgb"},r))};return r.default.createElement("div",{style:u.fields,className:"flexbox-fix"},r.default.createElement("div",{style:u.double},r.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"hex",value:l.replace("#",""),onChange:d})),r.default.createElement("div",{style:u.single},r.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"r",value:n.r,onChange:d,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:u.single},r.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"g",value:n.g,onChange:d,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:u.single},r.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"b",value:n.b,onChange:d,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:u.alpha},r.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"a",value:Math.round(100*n.a),onChange:d,dragLabel:"true",dragMax:"100"})))};t.default=l},3584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchPresetColors=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),o=l(n(5)),i=l(n(105)),s=n(188);function l(e){return e&&e.__esModule?e:{default:e}}var c=t.SketchPresetColors=function(e){var t=e.colors,n=e.onClick,o=void 0===n?function(){}:n,l=e.onSwatchHover,c=(0,i.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),u=function(e,t){o({hex:e,source:"hex"},t)};return a.default.createElement("div",{style:c.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return a.default.createElement("div",{key:n,style:c.swatchWrap},a.default.createElement(s.Swatch,r({},t,{style:c.swatch,onClick:u,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};c.propTypes={colors:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.shape({color:o.default.string,title:o.default.string})])).isRequired},t.default=c},3585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var r=l(n(0)),a=l(n(105)),o=n(188),i=l(n(3586)),s=l(n(3588));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Slider=function(e){var t=e.hsl,n=e.onChange,s=e.pointer,l=e.className,c=void 0===l?"":l,u=(0,a.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}});return r.default.createElement("div",{className:"slider-picker "+c},r.default.createElement("div",{style:u.hue},r.default.createElement(o.Hue,{style:u.Hue,hsl:t,pointer:s,onChange:n})),r.default.createElement("div",{style:u.swatches},r.default.createElement(i.default,{hsl:t,onClick:n})))};c.defaultProps={pointer:s.default},t.default=(0,o.ColorWrap)(c)},3586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatches=void 0;var r=i(n(0)),a=i(n(105)),o=i(n(3587));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.SliderSwatches=function(e){var t=e.onClick,n=e.hsl,i=(0,a.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return r.default.createElement("div",{style:i.swatches},r.default.createElement("div",{style:i.swatch},r.default.createElement(o.default,{hsl:n,offset:".80",active:Math.round(100*n.l)/100==.8&&Math.round(100*n.s)/100==.5,onClick:t,first:!0})),r.default.createElement("div",{style:i.swatch},r.default.createElement(o.default,{hsl:n,offset:".65",active:Math.round(100*n.l)/100==.65&&Math.round(100*n.s)/100==.5,onClick:t})),r.default.createElement("div",{style:i.swatch},r.default.createElement(o.default,{hsl:n,offset:".50",active:Math.round(100*n.l)/100==.5&&Math.round(100*n.s)/100==.5,onClick:t})),r.default.createElement("div",{style:i.swatch},r.default.createElement(o.default,{hsl:n,offset:".35",active:Math.round(100*n.l)/100==.35&&Math.round(100*n.s)/100==.5,onClick:t})),r.default.createElement("div",{style:i.swatch},r.default.createElement(o.default,{hsl:n,offset:".20",active:Math.round(100*n.l)/100==.2&&Math.round(100*n.s)/100==.5,onClick:t,last:!0})),r.default.createElement("div",{style:i.clear}))};t.default=s},3587:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatch=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderSwatch=function(e){var t=e.hsl,n=e.offset,o=e.onClick,i=void 0===o?function(){}:o,s=e.active,l=e.first,c=e.last,u=(0,a.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:s,first:l,last:c});return r.default.createElement("div",{style:u.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})};t.default=i},3588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var r=o(n(0)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(){var e=(0,a.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return r.default.createElement("div",{style:e.picker})};t.default=i},3589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatches=void 0;var r=d(n(0)),a=d(n(5)),o=d(n(105)),i=d(n(578)),s=d(n(439)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1803)),c=n(188),u=d(n(3590));function d(e){return e&&e.__esModule?e:{default:e}}var p=t.Swatches=function(e){var t=e.width,n=e.height,a=e.onChange,l=e.onSwatchHover,d=e.colors,p=e.hex,h=e.className,f=void 0===h?"":h,g=(0,o.default)({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}}),b=function(e,t){s.default.isValidHex(e)&&a({hex:e,source:"hex"},t)};return r.default.createElement("div",{style:g.picker,className:"swatches-picker "+f},r.default.createElement(c.Raised,null,r.default.createElement("div",{style:g.overflow},r.default.createElement("div",{style:g.body},(0,i.default)(d,(function(e){return r.default.createElement(u.default,{key:e.toString(),group:e,active:p,onClick:b,onSwatchHover:l})})),r.default.createElement("div",{style:g.clear})))))};p.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),height:a.default.oneOfType([a.default.string,a.default.number]),colors:a.default.arrayOf(a.default.arrayOf(a.default.string))},p.defaultProps={width:320,height:240,colors:[[l.red[900],l.red[700],l.red[500],l.red[300],l.red[100]],[l.pink[900],l.pink[700],l.pink[500],l.pink[300],l.pink[100]],[l.purple[900],l.purple[700],l.purple[500],l.purple[300],l.purple[100]],[l.deepPurple[900],l.deepPurple[700],l.deepPurple[500],l.deepPurple[300],l.deepPurple[100]],[l.indigo[900],l.indigo[700],l.indigo[500],l.indigo[300],l.indigo[100]],[l.blue[900],l.blue[700],l.blue[500],l.blue[300],l.blue[100]],[l.lightBlue[900],l.lightBlue[700],l.lightBlue[500],l.lightBlue[300],l.lightBlue[100]],[l.cyan[900],l.cyan[700],l.cyan[500],l.cyan[300],l.cyan[100]],[l.teal[900],l.teal[700],l.teal[500],l.teal[300],l.teal[100]],["#194D33",l.green[700],l.green[500],l.green[300],l.green[100]],[l.lightGreen[900],l.lightGreen[700],l.lightGreen[500],l.lightGreen[300],l.lightGreen[100]],[l.lime[900],l.lime[700],l.lime[500],l.lime[300],l.lime[100]],[l.yellow[900],l.yellow[700],l.yellow[500],l.yellow[300],l.yellow[100]],[l.amber[900],l.amber[700],l.amber[500],l.amber[300],l.amber[100]],[l.orange[900],l.orange[700],l.orange[500],l.orange[300],l.orange[100]],[l.deepOrange[900],l.deepOrange[700],l.deepOrange[500],l.deepOrange[300],l.deepOrange[100]],[l.brown[900],l.brown[700],l.brown[500],l.brown[300],l.brown[100]],[l.blueGrey[900],l.blueGrey[700],l.blueGrey[500],l.blueGrey[300],l.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]]},t.default=(0,c.ColorWrap)(p)},3590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesGroup=void 0;var r=s(n(0)),a=s(n(105)),o=s(n(578)),i=s(n(3591));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SwatchesGroup=function(e){var t=e.onClick,n=e.onSwatchHover,s=e.group,l=e.active,c=(0,a.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return r.default.createElement("div",{style:c.group},(0,o.default)(s,(function(e,a){return r.default.createElement(i.default,{key:e,color:e,active:e.toLowerCase()===l,first:0===a,last:a===s.length-1,onClick:t,onSwatchHover:n})})))};t.default=l},3591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesColor=void 0;var r=s(n(0)),a=s(n(105)),o=s(n(439)),i=n(188);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SwatchesColor=function(e){var t=e.color,n=e.onClick,s=void 0===n?function(){}:n,l=e.onSwatchHover,c=e.first,u=e.last,d=e.active,p=(0,a.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{fill:o.default.getContrastingColor(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{fill:"#333"}},transparent:{check:{fill:"#333"}}},{first:c,last:u,active:d,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return r.default.createElement(i.Swatch,{color:t,style:p.color,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+t}},r.default.createElement("div",{style:p.check},r.default.createElement("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};t.default=l},3592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twitter=void 0;var r=c(n(0)),a=c(n(5)),o=c(n(105)),i=c(n(578)),s=c(n(439)),l=n(188);function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Twitter=function(e){var t=e.onChange,n=e.onSwatchHover,a=e.hex,c=e.colors,u=e.width,d=e.triangle,p=e.className,h=void 0===p?"":p,f=(0,o.default)({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},{"hide-triangle":"hide"===d,"top-left-triangle":"top-left"===d,"top-right-triangle":"top-right"===d}),g=function(e,n){s.default.isValidHex(e)&&t({hex:e,source:"hex"},n)};return r.default.createElement("div",{style:f.card,className:"twitter-picker "+h},r.default.createElement("div",{style:f.triangleShadow}),r.default.createElement("div",{style:f.triangle}),r.default.createElement("div",{style:f.body},(0,i.default)(c,(function(e,t){return r.default.createElement(l.Swatch,{key:t,color:e,hex:e,style:f.swatch,onClick:g,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),r.default.createElement("div",{style:f.hash},"#"),r.default.createElement(l.EditableInput,{style:{input:f.input},value:a.replace("#",""),onChange:g}),r.default.createElement("div",{style:f.clear})))};u.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),triangle:a.default.oneOf(["hide","top-left","top-right"]),colors:a.default.arrayOf(a.default.string)},u.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left"},t.default=(0,l.ColorWrap)(u)},3593:function(e,t,n){var r=n(3594);e.exports=r},3594:function(e,t,n){var r=n(3595),a=String.prototype;e.exports=function(e){var t=e.endsWith;return"string"==typeof e||e===a||e instanceof String&&t===a.endsWith?r:t}},3595:function(e,t,n){n(3596);var r=n(86);e.exports=r("String").endsWith},3596:function(e,t,n){"use strict";var r,a=n(51),o=n(981).f,i=n(175),s=n(816),l=n(380),c=n(817),u=n(291),d="".endsWith,p=Math.min,h=c("endsWith");a({target:"String",proto:!0,forced:!!(u||h||(r=o(String.prototype,"endsWith"),!r||r.writable))&&!h},{endsWith:function(e){var t=String(l(this));s(e);var n=arguments.length>1?arguments[1]:void 0,r=i(t.length),a=void 0===n?r:p(i(n),r),o=String(e);return d?d.call(t,o,a):t.slice(a-o.length,a)===o}})},3597:function(e,t,n){var r=n(3598);e.exports=r},3598:function(e,t,n){var r=n(3599),a=Array.prototype;e.exports=function(e){var t=e.splice;return e===a||e instanceof Array&&t===a.splice?r:t}},3599:function(e,t,n){n(3600);var r=n(86);e.exports=r("Array").splice},3600:function(e,t,n){"use strict";var r=n(51),a=n(1300),o=n(874),i=n(175),s=n(176),l=n(441),c=n(498),u=n(434),d=n(147),p=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min;r({target:"Array",proto:!0,forced:!p||!h},{splice:function(e,t){var n,r,u,d,p,h,b=s(this),v=i(b.length),m=a(e,v),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=v-m):(n=y-2,r=g(f(o(t),0),v-m)),v+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=l(b,r),d=0;d<r;d++)(p=m+d)in b&&c(u,d,b[p]);if(u.length=r,n<r){for(d=m;d<v-r;d++)h=d+n,(p=d+r)in b?b[h]=b[p]:delete b[h];for(d=v;d>v-r+n;d--)delete b[d-1]}else if(n>r)for(d=v-r;d>m;d--)h=d+n-1,(p=d+r-1)in b?b[h]=b[p]:delete b[h];for(d=0;d<n;d++)b[d+m]=arguments[d+2];return b.length=v-r+n,u}})},3601:function(e,t,n){var r=n(3602);e.exports=r},3602:function(e,t,n){var r=n(3603),a=Array.prototype;e.exports=function(e){var t=e.lastIndexOf;return e===a||e instanceof Array&&t===a.lastIndexOf?r:t}},3603:function(e,t,n){n(3604);var r=n(86);e.exports=r("Array").lastIndexOf},3604:function(e,t,n){var r=n(51),a=n(3605);r({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},3605:function(e,t,n){"use strict";var r=n(331),a=n(874),o=n(175),i=n(323),s=n(147),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=i("lastIndexOf"),p=s("indexOf",{ACCESSORS:!0,1:0}),h=u||!d||!p;e.exports=h?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),n=o(t.length),i=n-1;for(arguments.length>1&&(i=l(i,a(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}:c},3606:function(e,t,n){var r=n(3607);e.exports=r},3607:function(e,t,n){n(3608);var r=n(111);e.exports=r.Object.is},3608:function(e,t,n){n(51)({target:"Object",stat:!0},{is:n(3609)})},3609:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},3610:function(e,t,n){"use strict";var r=n(3),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(6)),i=r(n(0)),s=n(941),l=a(n(1301)),c=a(n(586)),u=i.forwardRef((function(e,t){var n=e.visible,r=(0,i.useRef)(null),a=(0,i.useRef)(null);function u(){l.default.cancel(a.current),a.current=null}return i.useEffect((function(){return n?function e(){a.current=(0,l.default)((function(){r.current.forcePopupAlign(),a.current=null,e()}))}():u(),u}),[n]),i.createElement(c.default,(0,o.default)({ref:(0,s.composeRef)(r,t)},e))}));t.default=u},3611:function(e,t,n){},3612:function(e,t,n){},3615:function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}},3616:function(e,t,n){var r=n(3617),a=n(3618),o=n(413),i=n(117);e.exports=function(e,t){return function(n,s){var l=i(n)?r:a,c=t?t():{};return l(n,e,o(s,2),c)}}},3617:function(e,t){e.exports=function(e,t,n,r){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];t(r,i,n(i),e)}return r}},3618:function(e,t,n){var r=n(1400);e.exports=function(e,t,n,a){return r(e,(function(e,r,o){t(a,e,n(e),o)})),a}},3619:function(e,t,n){var r=n(3620),a=n(1296),o=Array.prototype.push;function i(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function s(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function l(e,t){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var a=r[0]=t.apply(void 0,r);return e.apply(void 0,r),a}}}e.exports=function e(t,n,c,u){var d="function"==typeof n,p=n===Object(n);if(p&&(u=c,c=n,n=void 0),null==c)throw new TypeError;u||(u={});var h=!("cap"in u)||u.cap,f=!("curry"in u)||u.curry,g=!("fixed"in u)||u.fixed,b=!("immutable"in u)||u.immutable,v=!("rearg"in u)||u.rearg,m=d?c:a,y="curry"in u&&u.curry,_="fixed"in u&&u.fixed,O="rearg"in u&&u.rearg,x=d?c.runInContext():void 0,C=d?c:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},j=C.ary,E=C.assign,w=C.clone,S=C.curry,T=C.forEach,M=C.isArray,P=C.isError,R=C.isFunction,A=C.isWeakMap,D=C.keys,k=C.rearg,I=C.toInteger,L=C.toPath,F=D(r.aryMethod),N={castArray:function(e){return function(){var t=arguments[0];return M(t)?e(s(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],n=arguments[1],r=e(t,n),a=r.length;return h&&"number"==typeof n?(n=n>2?n-2:1,a&&a<=n?r:i(r,n)):r}},mixin:function(e){return function(t){var n=this;if(!R(n))return e(n,Object(t));var r=[];return T(D(t),(function(e){R(t[e])&&r.push([e,n.prototype[e]])})),e(n,Object(t)),T(r,(function(e){var t=e[1];R(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]})),n}},nthArg:function(e){return function(t){var n=t<0?1:I(t)+1;return S(e(t),n)}},rearg:function(e){return function(t,n){var r=n?n.length:0;return S(e(t,n),r)}},runInContext:function(n){return function(r){return e(t,n(r),u)}}};function U(e,t){if(h){var n=r.iterateeRearg[e];if(n)return function(e,t){return z(e,(function(e){var n=t.length;return function(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(k(i(e,n),t),n)}))}(t,n);var a=!d&&r.iterateeAry[e];if(a)return function(e,t){return z(e,(function(e){return"function"==typeof e?i(e,t):e}))}(t,a)}return t}function B(e,t,n){if(g&&(_||!r.skipFixed[e])){var a=r.methodSpread[e],i=a&&a.start;return void 0===i?j(t,n):function(e,t){return function(){for(var n=arguments.length,r=n-1,a=Array(n);n--;)a[n]=arguments[n];var i=a[t],s=a.slice(0,t);return i&&o.apply(s,i),t!=r&&o.apply(s,a.slice(t+1)),e.apply(this,s)}}(t,i)}return t}function W(e,t,n){return v&&n>1&&(O||!r.skipRearg[e])?k(t,r.methodRearg[e]||r.aryRearg[n]):t}function H(e,t){for(var n=-1,r=(t=L(t)).length,a=r-1,o=w(Object(e)),i=o;null!=i&&++n<r;){var s=t[n],l=i[s];null==l||R(l)||P(l)||A(l)||(i[s]=w(n==a?l:Object(l))),i=i[s]}return o}function q(t,n){var a=r.aliasToReal[t]||t,o=r.remap[a]||a,i=u;return function(t){var r=d?x:C,s=d?x[o]:n,l=E(E({},i),t);return e(r,a,s,l)}}function z(e,t){return function(){var n=arguments.length;if(!n)return e();for(var r=Array(n);n--;)r[n]=arguments[n];var a=v?0:n-1;return r[a]=t(r[a]),e.apply(void 0,r)}}function $(e,t,n){var a,o=r.aliasToReal[e]||e,i=t,c=N[o];return c?i=c(t):b&&(r.mutate.array[o]?i=l(t,s):r.mutate.object[o]?i=l(t,function(e){return function(t){return e({},t)}}(t)):r.mutate.set[o]&&(i=l(t,H))),T(F,(function(e){return T(r.aryMethod[e],(function(t){if(o==t){var n=r.methodSpread[o],s=n&&n.afterRearg;return a=s?B(o,W(o,i,e),e):W(o,B(o,i,e),e),a=function(e,t,n){return y||f&&n>1?S(t,n):t}(0,a=U(o,a),e),!1}})),!a})),a||(a=i),a==t&&(a=y?S(a,1):function(){return t.apply(this,arguments)}),a.convert=q(o,t),a.placeholder=t.placeholder=n,a}if(!p)return $(n,c,m);var G=c,V=[];return T(F,(function(e){T(r.aryMethod[e],(function(e){var t=G[r.remap[e]||e];t&&V.push([e,$(e,t,G)])}))})),T(D(G),(function(e){var t=G[e];if("function"==typeof t){for(var n=V.length;n--;)if(V[n][0]==e)return;t.convert=q(e,t),V.push([e,t])}})),T(V,(function(e){G[e[0]]=e[1]})),G.convert=function(e){return G.runInContext.convert(e)(void 0)},G.placeholder=G,T(D(G),(function(e){T(r.realToAlias[e]||[],(function(t){G[t]=G[e]}))})),G}},3620:function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var a in n){var o=n[a];e.call(r,o)?r[o].push(a):r[o]=[a]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},3621:function(e,t,n){e.exports={ary:n(3622),assign:n(1804),clone:n(3638),curry:n(3639),forEach:n(1292),isArray:n(117),isError:n(3640),isFunction:n(316),isWeakMap:n(3641),iteratee:n(3642),keys:n(831),rearg:n(3643),toInteger:n(1462),toPath:n(3646)}},3622:function(e,t,n){var r=n(1474);e.exports=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,r(e,128,void 0,void 0,void 0,void 0,t)}},3623:function(e,t,n){var r=n(1297),a=n(113);e.exports=function(e,t,n){var o=1&t,i=r(e);return function t(){var r=this&&this!==a&&this instanceof t?i:e;return r.apply(o?n:this,arguments)}}},3624:function(e,t,n){var r=n(833),a=n(1297),o=n(1809),i=n(1812),s=n(1817),l=n(1479),c=n(113);e.exports=function(e,t,n){var u=a(e);return function a(){for(var d=arguments.length,p=Array(d),h=d,f=s(a);h--;)p[h]=arguments[h];var g=d<3&&p[0]!==f&&p[d-1]!==f?[]:l(p,f);if((d-=g.length)<n)return i(e,t,o,a.placeholder,void 0,p,g,void 0,void 0,n-d);var b=this&&this!==c&&this instanceof a?u:e;return r(b,this,p)}}},3625:function(e,t){e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},3626:function(e,t){e.exports={}},3627:function(e,t,n){var r=n(1475),a=n(1478),o=n(1476),i=n(117),s=n(152),l=n(3628),c=Object.prototype.hasOwnProperty;function u(e){if(s(e)&&!i(e)&&!(e instanceof r)){if(e instanceof a)return e;if(c.call(e,"__wrapped__"))return l(e)}return new a(e)}u.prototype=o.prototype,u.prototype.constructor=u,e.exports=u},3628:function(e,t,n){var r=n(1475),a=n(1478),o=n(542);e.exports=function(e){if(e instanceof r)return e.clone();var t=new a(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},3629:function(e,t){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;e.exports=function(e){var t=e.match(n);return t?t[1].split(r):[]}},3630:function(e,t){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,t){var r=t.length;if(!r)return e;var a=r-1;return t[a]=(r>1?"& ":"")+t[a],t=t.join(r>2?", ":" "),e.replace(n,"{\n/* [wrapped with "+t+"] */\n")}},3631:function(e,t,n){var r=n(1292),a=n(3519),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(e,t){return r(o,(function(n){var r="_."+n[0];t&n[1]&&!a(e,r)&&e.push(r)})),e.sort()}},3632:function(e,t,n){var r=n(3615),a=n(3633),o=n(3634);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,a,n)}},3633:function(e,t){e.exports=function(e){return e!=e}},3634:function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},3635:function(e,t,n){var r=n(542),a=n(381),o=Math.min;e.exports=function(e,t){for(var n=e.length,i=o(t.length,n),s=r(e);i--;){var l=t[i];e[i]=a(l,n)?s[l]:void 0}return e}},3636:function(e,t,n){var r=n(833),a=n(1297),o=n(113);e.exports=function(e,t,n,i){var s=1&t,l=a(e);return function t(){for(var a=-1,c=arguments.length,u=-1,d=i.length,p=Array(d+c),h=this&&this!==o&&this instanceof t?l:e;++u<d;)p[u]=i[u];for(;c--;)p[u++]=arguments[++a];return r(h,s?n:this,p)}}},3637:function(e,t,n){var r=n(1810),a=n(1811),o=n(1479),i=Math.min;e.exports=function(e,t){var n=e[1],s=t[1],l=n|s,c=l<131,u=128==s&&8==n||128==s&&256==n&&e[7].length<=t[8]||384==s&&t[7].length<=t[8]&&8==n;if(!c&&!u)return e;1&s&&(e[2]=t[2],l|=1&n?0:4);var d=t[3];if(d){var p=e[3];e[3]=p?r(p,d,t[4]):d,e[4]=p?o(e[3],"__lodash_placeholder__"):t[4]}return(d=t[5])&&(p=e[5],e[5]=p?a(p,d,t[6]):d,e[6]=p?o(e[5],"__lodash_placeholder__"):t[6]),(d=t[7])&&(e[7]=d),128&s&&(e[8]=null==e[8]?t[8]:i(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=l,e}},3638:function(e,t,n){var r=n(1461);e.exports=function(e){return r(e,4)}},3639:function(e,t,n){var r=n(1474);function a(e,t,n){var o=r(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return o.placeholder=a.placeholder,o}a.placeholder={},e.exports=a},3640:function(e,t,n){var r=n(213),a=n(152),o=n(502);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!o(e)}},3641:function(e,t,n){var r=n(497),a=n(152);e.exports=function(e){return a(e)&&"[object WeakMap]"==r(e)}},3642:function(e,t,n){var r=n(1461),a=n(413);e.exports=function(e){return a("function"==typeof e?e:r(e,1))}},3643:function(e,t,n){var r=n(1474),a=n(1818),o=a((function(e,t){return r(e,256,void 0,void 0,void 0,t)}));e.exports=o},3644:function(e,t,n){var r=n(3532);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},3645:function(e,t,n){var r=n(301),a=n(406),o=n(117),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(i&&e&&e[i])}},3646:function(e,t,n){var r=n(580),a=n(542),o=n(117),i=n(382),s=n(1010),l=n(325),c=n(383);e.exports=function(e){return o(e)?r(e,l):i(e)?[e]:a(s(c(e)))}},3647:function(e,t,n){var r=n(3648)();e.exports=r},3648:function(e,t,n){var r=n(1478),a=n(1818),o=n(1477),i=n(1814),s=n(117),l=n(1813);e.exports=function(e){return a((function(t){var n=t.length,a=n,c=r.prototype.thru;for(e&&t.reverse();a--;){var u=t[a];if("function"!=typeof u)throw new TypeError("Expected a function");if(c&&!d&&"wrapper"==i(u))var d=new r([],!0)}for(a=d?a:n;++a<n;){u=t[a];var p=i(u),h="wrapper"==p?o(u):void 0;d=h&&l(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?d[i(h[0])].apply(d,h[3]):1==u.length&&l(u)?d[p]():d.thru(u)}return function(){var e=arguments,r=e[0];if(d&&1==e.length&&s(r))return d.plant(r).value();for(var a=0,o=n?t[a].apply(this,e):r;++a<n;)o=t[a].call(this,o);return o}}))}},3649:function(e,t,n){var r=n(307),a=n(875),o=n(413);e.exports=function(e,t){var n={};return t=o(t,3),a(e,(function(e,a,o){r(n,a,t(e,a,o))})),n}},375:function(e,t,n){"use strict";n.d(t,"f",(function(){return M})),n.d(t,"c",(function(){return I})),n.d(t,"a",(function(){return U})),n.d(t,"d",(function(){return B})),n.d(t,"b",(function(){return W})),n.d(t,"e",(function(){return z}));var r={};n.r(r),n.d(r,"druidTimeSeries",(function(){return x})),n.d(r,"datasourceAndVizType",(function(){return C})),n.d(r,"colorScheme",(function(){return j})),n.d(r,"sqlaTimeSeries",(function(){return E})),n.d(r,"annotations",(function(){return w})),n.d(r,"NVD3TimeSeries",(function(){return S}));n(52);var a=n(41),o=n.n(a),i=n(94),s=n.n(i),l=n(39),c=n.n(l),u=n(14),d=n.n(u),p=n(150),h=n.n(p),f=n(33),g=n.n(f),b=n(108),v=n(561),m=n(1414),y=(n(0),n(18)),_=n(386),O=n(1);const x={label:Object(y.e)("Time"),expanded:!0,description:Object(y.e)("Time related form attributes"),controlSetRows:[["time_range"]]},C={label:Object(y.e)("Chart type"),expanded:!0,controlSetRows:[["datasource"],["viz_type"],[{name:"slice_id",config:{type:"HiddenControl",label:Object(y.e)("Chart ID"),hidden:!0,description:Object(y.e)("The id of the active chart")}},{name:"cache_timeout",config:{type:"HiddenControl",label:Object(y.e)("Cache Timeout (seconds)"),hidden:!0,description:Object(y.e)("The number of seconds before expiring the cache")}},{name:"url_params",config:{type:"HiddenControl",label:Object(y.e)("URL parameters"),hidden:!0,description:Object(y.e)("Extra parameters for use in jinja templated queries")}},{name:"time_range_endpoints",config:{type:"HiddenControl",label:Object(y.e)("Time range endpoints"),hidden:!0,description:Object(y.e)("Time range endpoints (SIP-15)")}}]]},j={label:Object(y.e)("Color scheme"),controlSetRows:[["color_scheme","label_colors"]]},E={label:Object(y.e)("Time"),description:Object(y.e)("Time related form attributes"),expanded:!0,controlSetRows:[["granularity_sqla"],["time_range"]]},w={label:Object(y.e)("Annotations and layers"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:[],description:"Annotation layers",renderTrigger:!0,tabOverride:"data"}}]]},S=[{label:Object(y.e)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:Object(y.e)("Sort descending"),default:!0,description:Object(y.e)("Whether to sort descending or ascending")}},{name:"contribution",config:{type:"CheckboxControl",label:Object(y.e)("Contribution"),default:!1,description:Object(y.e)("Compute the contribution to the total")}}],["row_limit",null]]},{label:Object(y.e)("Advanced analytics"),tabOverride:"data",description:Object(y.e)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[Object(O.d)("h1",{className:"section-header"},Object(y.e)("Rolling window"))],[{name:"rolling_type",config:{type:"SelectControl",label:Object(y.e)("Rolling function"),default:"None",choices:Object(_.a)(["None","mean","sum","std","cumsum"]),description:Object(y.e)("Defines a rolling window function to apply, works along with the [Periods] text box")}},{name:"rolling_periods",config:{type:"TextControl",label:Object(y.e)("Periods"),isInt:!0,description:Object(y.e)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:Object(y.e)("Min periods"),isInt:!0,description:Object(y.e)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[Object(O.d)("h1",{className:"section-header"},Object(y.e)("Time comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:Object(y.e)("Time shift"),choices:Object(_.a)(["1 day","1 week","28 days","30 days","52 weeks","1 year","104 weeks","2 years"]),description:Object(y.e)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:Object(y.e)("Calculation type"),default:"values",choices:[["values","Actual values"],["absolute","Absolute difference"],["percentage","Percentage change"],["ratio","Ratio"]],description:Object(y.e)("How to display time shifts: as individual lines; as the absolute difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[Object(O.d)("h1",{className:"section-header"},Object(y.e)("Python functions"))],[Object(O.d)("h2",{className:"section-header"},"pandas.resample")],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:Object(y.e)("Rule"),default:null,choices:Object(_.a)(["1T","1H","1D","7D","1M","1AS"]),description:Object(y.e)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:Object(y.e)("Method"),default:null,choices:Object(_.a)(["asfreq","bfill","ffill","median","mean","sum"]),description:Object(y.e)("Pandas resample method")}}]]}],T=Object(b.a)((e,t)=>{var n,a,i,l;const{sectionOverrides:u={},controlOverrides:p,controlPanelSections:f=[]}=t,b={...r};g()(n=h()(u)).call(n,([e,t])=>{"object"==typeof t&&t.constructor===Object?b[e]={...b[e],...t}:b[e]=t});const{datasourceAndVizType:v}=b,y="table"===e?["granularity","druid_time_origin"]:["granularity_sqla","time_grain_sqla"];return d()(a=c()(i=s()(l=[v]).call(l,f)).call(i,e=>!!e)).call(a,e=>{const{controlSetRows:t}=e;return{...e,controlSetRows:(null==t?void 0:d()(t).call(t,e=>{var t;return d()(t=c()(e).call(e,e=>"string"!=typeof e||!o()(y).call(y,e))).call(t,e=>Object(m.a)(e,p))}))||[]}})});function M(e,t){const n=Object(v.a)().get(e)||{};return T(t,n)}var P=n(1481),R=n.n(P),A=n(87),D=n.n(A);const k=Object(b.a)((e,t)=>{const{controlOverrides:n={},controlPanelSections:r=[]}=t,a=Object(m.a)(function(e,t){var n,r,a;return null!=(n=D()(r=R()(a=d()(e).call(e,e=>e.controlSetRows)).call(a,2)).call(r,e=>t===e||null!==e&&"object"==typeof e&&"name"in e&&e.name===t))?n:null}(r,e),n);return a&&"config"in a?a.config:a}),I=function(e,t){const n=Object(v.a)().get(t)||{};return k(e,n)};var L=n(71),F=n.n(L),N=n(825);function U(e,t){const{mapStateToProps:n}=e;let r={...e},{value:a}=r;return n&&t&&(r={...e,...n.call(e,t,e)},a=a||r.value),"function"==typeof r.default&&(r.default=r.default(r,t),"function"==typeof r.default&&delete r.default),r.default&&void 0===a&&(a=r.default),a&&r.multi&&!F()(a)&&(a=[a]),r.value=a,function(e,t){const n=e.validators,{externalValidationErrors:r=[]}=e,a=[];n&&n.length>0&&g()(n).call(n,n=>{const r=n.call(e,e.value,t);r&&a.push(r)});const o=[...a,...r];return{...e,validationErrors:o}}(function(e){if("SelectControl"===e.type&&!e.freeForm&&e.choices&&e.value){const t={...e},n=e.choices,r=Object(N.a)(e.value),a=d()(n).call(n,e=>e[0]);if(e.multi&&r.length>0)return t.value=c()(r).call(r,e=>o()(a).call(a,e)),t;if(!e.multi&&!o()(a).call(a,r[0]))return t.value=null,t}return e}(r),r)}function B(e,t,n){if(!e)return null;const r={...e,value:n};return t&&t.controls||null===t?U(r,t):r}function W(e,t,n,r){var a;const o={};return g()(a=M(e,t)).call(a,e=>{var t;return g()(t=e.controlSetRows).call(t,e=>g()(e).call(e,e=>{if(e&&"config"in e&&e.config&&e.name){const{config:t,name:a}=e;o[a]=B(t,n,r[a])}}))}),o}var H=n(50),q=n.n(H);function z(e){var t;const n={viz_type:"table",datasource:""};return g()(t=q()(e)).call(t,t=>{const r=e[t];n[t]=r.value}),n}},3809:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(0),a=n(75),o=n(1307),i=n(394),s=n(1299),l=n(976),c=n(1820),u=n(1819);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=Object(r.useRef)(e);t.current=e,Object(a.a)(null!=e.accept,"accept must be defined");var n,p=h((n=Object(l.a)(),[Object(r.useMemo)((function(){return new u.a(n)}),[n]),Object(r.useMemo)((function(){return new c.a(n.getBackend())}),[n])]),2),f=p[0],g=p[1];!function(e,t,n){var a=Object(l.a)(),o=Object(r.useMemo)((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);Object(i.a)((function(){var r=d(Object(s.b)(e.current.accept,o,a),2),i=r[0],l=r[1];return t.receiveHandlerId(i),n.receiveHandlerId(i),l}),[t,n])}(t,f,g);var b=Object(o.a)(f,t.current.collect||function(){return{}},(function(){return g.reconnect()})),v=Object(r.useMemo)((function(){return g.hooks.dropTarget()}),[g]);return Object(i.a)((function(){g.dropTargetOptions=e.options||null,g.reconnect()}),[e.options]),[b,v]}},3810:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(0),a=n(75),o=n(1307),i=n(394),s=n(1299),l=n(976),c=n(1821),u=n(1822);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){var t=Object(r.useRef)(e);t.current=e,Object(a.a)(null!=e.item,"item must be defined"),Object(a.a)(null!=e.item.type,"item type must be defined");var n,p=f((n=Object(l.a)(),[Object(r.useMemo)((function(){return new c.a(n)}),[n]),Object(r.useMemo)((function(){return new u.a(n.getBackend())}),[n])]),2),g=p[0],b=p[1];!function(e,t,n){var o=Object(l.a)(),c=Object(r.useMemo)((function(){return{beginDrag:function(){var n=e.current,r=n.begin,o=n.item;if(r){var i=r(t);return Object(a.a)(null==i||"object"===h(i),"dragSpec.begin() must either return an object, undefined, or null"),i||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,r){var a=e.current.isDragging;return a?a(t):r===n.getSourceId()},endDrag:function(){var r=e.current.end;r&&r(t.getItem(),t),n.reconnect()}}}),[]);Object(i.a)((function(){var r=d(Object(s.a)(e.current.item.type,c,o),2),a=r[0],i=r[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),i}),[])}(t,g,b);var v=Object(o.a)(g,t.current.collect||function(){return{}},(function(){return b.reconnect()})),m=Object(r.useMemo)((function(){return b.hooks.dragSource()}),[b]),y=Object(r.useMemo)((function(){return b.hooks.dragPreview()}),[b]);return Object(i.a)((function(){b.dragSourceOptions=t.current.options||null,b.reconnect()}),[b]),Object(i.a)((function(){b.dragPreviewOptions=t.current.previewOptions||null,b.reconnect()}),[b]),[v,m,y]}},3819:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.ActionTypes={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionCreators={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}}},3820:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=r,t.isHistory=function(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)},t.distinctState=function(){return console.warn("distinctState is deprecated in beta4 and newer. The distinctState behavior is now default, which means only actions resulting in a new state are recorded. See https://github.com/omnidan/redux-undo#filtering-actions for more details."),function(){return!0}},t.includeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0}},t.excludeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)<0}},t.combineFilters=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(n,r,a){return e(n,r,a)&&t(n,r,a)}}),(function(){return!0}))},t.groupByActionTypes=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0?e.type:null}},t.newHistory=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{past:e,present:t,future:n,group:r,_latestUnfiltered:t,index:e.length,limit:e.length+n.length+1}}},3835:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(52);var r=n(150),a=n.n(r),o=n(73),i=n.n(o),s=n(942);function l(e){var t;return i()(t=a()(e)).call(t,(e,t)=>{const[n,{values:r}]=t,{chartId:a,column:o}=Object(s.a)(n),i={...e[a],[o]:r};return{...e,[a]:i}},{})}},394:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect},3976:function(e,t){var n={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ấ":"A","Ắ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Æ":"AE","Ầ":"A","Ằ":"A","Ȃ":"A","Ç":"C","Ḉ":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ế":"E","Ḗ":"E","Ề":"E","Ḕ":"E","Ḝ":"E","Ȇ":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ḯ":"I","Ȋ":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ố":"O","Ṍ":"O","Ṓ":"O","Ȏ":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ấ":"a","ắ":"a","ẳ":"a","ẵ":"a","ặ":"a","æ":"ae","ầ":"a","ằ":"a","ȃ":"a","ç":"c","ḉ":"c","è":"e","é":"e","ê":"e","ë":"e","ế":"e","ḗ":"e","ề":"e","ḕ":"e","ḝ":"e","ȇ":"e","ì":"i","í":"i","î":"i","ï":"i","ḯ":"i","ȋ":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ố":"o","ṍ":"o","ṓ":"o","ȏ":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","C̆":"C","c̆":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","Ǵ":"G","ĝ":"g","ǵ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ḫ":"H","ḫ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","Ḱ":"K","ḱ":"k","K̆":"K","k̆":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"l","ł":"l","Ḿ":"M","ḿ":"m","M̆":"M","m̆":"m","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","N̆":"N","n̆":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","P̆":"P","p̆":"p","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","R̆":"R","r̆":"r","Ȓ":"R","ȓ":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","Ș":"S","ș":"s","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","ț":"t","Ț":"T","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","T̆":"T","t̆":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ȗ":"U","ȗ":"u","V̆":"V","v̆":"v","Ŵ":"W","ŵ":"w","Ẃ":"W","ẃ":"w","X̆":"X","x̆":"x","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Y̆":"Y","y̆":"y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u","Ứ":"U","ứ":"u","Ṹ":"U","ṹ":"u","Ǻ":"A","ǻ":"a","Ǽ":"AE","ǽ":"ae","Ǿ":"O","ǿ":"o","Þ":"TH","þ":"th","Ṕ":"P","ṕ":"p","Ṥ":"S","ṥ":"s","X́":"X","x́":"x","Ѓ":"Г","ѓ":"г","Ќ":"К","ќ":"к","A̋":"A","a̋":"a","E̋":"E","e̋":"e","I̋":"I","i̋":"i","Ǹ":"N","ǹ":"n","Ồ":"O","ồ":"o","Ṑ":"O","ṑ":"o","Ừ":"U","ừ":"u","Ẁ":"W","ẁ":"w","Ỳ":"Y","ỳ":"y","Ȁ":"A","ȁ":"a","Ȅ":"E","ȅ":"e","Ȉ":"I","ȉ":"i","Ȍ":"O","ȍ":"o","Ȑ":"R","ȑ":"r","Ȕ":"U","ȕ":"u","B̌":"B","b̌":"b","Č̣":"C","č̣":"c","Ê̌":"E","ê̌":"e","F̌":"F","f̌":"f","Ǧ":"G","ǧ":"g","Ȟ":"H","ȟ":"h","J̌":"J","ǰ":"j","Ǩ":"K","ǩ":"k","M̌":"M","m̌":"m","P̌":"P","p̌":"p","Q̌":"Q","q̌":"q","Ř̩":"R","ř̩":"r","Ṧ":"S","ṧ":"s","V̌":"V","v̌":"v","W̌":"W","w̌":"w","X̌":"X","x̌":"x","Y̌":"Y","y̌":"y","A̧":"A","a̧":"a","B̧":"B","b̧":"b","Ḑ":"D","ḑ":"d","Ȩ":"E","ȩ":"e","Ɛ̧":"E","ɛ̧":"e","Ḩ":"H","ḩ":"h","I̧":"I","i̧":"i","Ɨ̧":"I","ɨ̧":"i","M̧":"M","m̧":"m","O̧":"O","o̧":"o","Q̧":"Q","q̧":"q","U̧":"U","u̧":"u","X̧":"X","x̧":"x","Z̧":"Z","z̧":"z"},r=Object.keys(n).join("|"),a=new RegExp(r,"g"),o=new RegExp(r,""),i=function(e){return e.replace(a,(function(e){return n[e]}))};e.exports=i,e.exports.has=function(e){return!!e.match(o)},e.exports.remove=i},3980:function(e,t,n){"use strict";n.d(t,"a",(function(){return le}));var r=n(98),a=n(1256),o=n(1257),i=n(124),s=n(1255),l=n(1311),c=n(1244),u=n(317);var d=n(926),p=n.n(d),h=n(554),f=n.n(h),g=n(69),b=n.n(g),v=n(76),m=n.n(v),y=n(493);var _=n(979),O=n(1691),x=n(1698);var C=n(1690),j=n(1444),E=n.n(j),w=n(81),S=n(534),T=(n(52),n(87)),M=n.n(T),P=n(96),R=n.n(P),A=n(39),D=n.n(A),k=n(94),I=n.n(k),L=n(288),F=n.n(L),N=n(85),U=n.n(N),B=n(33),W=n.n(B),H=n(101);function q(e){var t;return U()(t=[H.b,H.a,H.h]).call(t,e.type)>-1}var z=n(1410),$=n(1728);var G=n(869);const V={[H.c]:{[H.a]:!0,[H.b]:!0,[H.h]:!0},[H.l]:{[H.a]:!0,[H.b]:!0,[H.h]:!0}};function K({parentType:e,childType:t}){if(!e||!t)return!1;const n=V[e];return!!n&&Boolean(n[t])}function Y({dropResult:e,layout:t}){var n;const{dragging:r,destination:a}=e,o=r.type,i=t[a.id],s=i.type;let l=Object(G.a)(o,r.meta);l.parents=I()(n=i.parents||[]).call(n,i.id),q(r)&&(l.meta.width=Object($.a)({dropResult:e,layout:t})||void 0);const c=K({parentType:s,childType:o}),u={[l.id]:l};if(c){var d,p;const e=Object(G.a)(H.j);e.children=[l.id],e.parents=I()(d=i.parents||[]).call(d,i.id),u[e.id]=e,l=e,l.parents=I()(p=e.parents).call(p,e.id)}else if(o===H.k){var h;const e=Object(G.a)(H.l);e.parents=I()(h=i.parents||[]).call(h,i.id),l.children=[e.id],u[e.id]=e}const f=[...i.children];return F()(f).call(f,a.index,0,l.id),u[a.id]={...i,children:f},u}function Q({entitiesMap:e,source:t,destination:n}){const r=[...e[t.id].children],a=[...e[n.id].children],o=r[t.index];if(t.id===n.id){const a=function(e,t,n){const r=[...e],[a]=F()(r).call(r,t,1);return F()(r).call(r,n,0,a),r}(r,t.index,n.index);return{...e,[t.id]:{...e[t.id],children:a}}}return F()(r).call(r,t.index,1),F()(a).call(a,n.index,0,o),{...e,[t.id]:{...e[t.id],children:r},[n.id]:{...e[n.id],children:a}}}const X={[u.a]:(e,t)=>({...t.data.dashboardLayout.present}),[S.i](e,t){const{payload:{nextComponents:n}}=t;return{...e,...n}},[S.d](e,t){const{payload:{id:n,parentId:r}}=t;if(!(r&&n&&e[n]&&e[r]))return e;const a={...e};function o(e,t){const n=a[e];delete a[e];const{children:r=[]}=n;W()(r).call(r,t=>{o(t,e)});const i=a[t];if(i){var s;const n=U()(s=i.children||[]).call(s,e);if(n>-1){const e=[...i.children];F()(e).call(e,n,1),a[t]={...i,children:e}}}}o(n,r);const i=a[r];if(i.type===H.j&&0===i.children.length){o(r,Object(z.a)({childId:r,layout:a}))}return a},[S.a](e,t){const{payload:{dropResult:n}}=t,r=Y({dropResult:n,layout:e});return{...e,...r}},[S.g](e,t){const{payload:{dropResult:n}}=t,{source:r,destination:a,dragging:o}=n;if(!r||!a||!o)return e;const i=Q({entitiesMap:e,source:r,destination:a});if(q(i[o.id])){const t=Object($.a)({dropResult:n,layout:e})||void 0;(i[o.id].meta||{}).width!==t&&(i[o.id]={...i[o.id],meta:{...i[o.id].meta,width:t}})}if(K({parentType:a.type,childType:o.type})){var s;const e=i[a.id],t=e.children,n=Object(G.a)(H.j);n.children=[t[a.index]],n.parents=I()(s=e.parents||[]).call(s,a.id),t[a.index]=n.id,i[n.id]=n}return{...e,...i}},[S.b](e,t){const{payload:{dropResult:n}}=t,{source:r,dragging:a}=n,o=e[w.h],i=o.children[0],s=e[i];if(r.id!==w.v){var l;const t=e[a.id].children[0],n=e[t],r=D()(l=[...s.children]).call(l,e=>e!==a.id);return{...e,[w.h]:{...o,children:[a.id]},[i]:{...s,children:[]},[t]:{...n,children:[...n.children,...r]}}}const c=Y({dropResult:n,layout:e}),u=R()(c),d=M()(u).call(u,e=>e.type===H.l),p=M()(u).call(u,e=>e.type===H.k);return d.children=[...s.children],c[i]={...s,children:[]},c[w.h]={...o,children:[p.id]},{...e,...c}},[S.e](e){var t;const n=e[w.h],r=n.children[0],a=e[r];if(a.type!==H.k)return e;let o=[];const i={...e};return W()(t=a.children).call(t,t=>{const n=e[t];o=[...o,...n.children],delete i[t]}),delete i[r],i[w.h]={...n,children:[w.d]},i[w.d]={...e[w.d],children:o},i},[S.j](e){const t={...e};return function e({currentComponent:t,layout:n={}}){if(t&&n[t.id]){var r,a;const o=b()(r=t.parents||[]).call(r);o.push(t.id),W()(a=t.children).call(a,t=>{n[t].parents=o,e({currentComponent:n[t],layout:n})})}}({currentComponent:t[w.h],layout:t}),{...t}},[S.c]:(e,t)=>({...e,[w.e]:{...e[w.e],meta:{...e[w.e].meta,text:t.text}}})};var J,Z=E()((function(e={},t){if(t.type in X){return(0,X[t.type])(e,t)}return e}),{limit:w.F+2,ignoreInitialState:!0,filter:Object(j.includeAction)([u.a,S.i,S.d,S.a,S.b,S.e,S.h,S.g,S.f])}),ee=n(3481),te=n(144),ne=n.n(te);const re=e=>(t=e)=>t,ae=document.getElementById("app"),oe=JSON.parse(null!=(J=null==ae?void 0:ae.getAttribute("data-bootstrap"))?J:"{}"),ie={charts:s.b,datasources:function(e={},t){const n={[u.a]:()=>t.data.datasources,[x.a]:()=>t.datasource};return t.type in n?t.key?{...e,[t.key]:n[t.type](e[t.key],t)}:n[t.type]():e},dashboardInfo:function(e={},t){switch(t.type){case c.a:return{...e,...t.newInfo,last_modified_time:Math.round((new Date).getTime()/1e3)};case u.a:return{...e,...t.data.dashboardInfo};default:return e}},dashboardFilters:_.c,dataMask:l.a,nativeFilters:O.a,dashboardState:function(e={},t){const n={[u.a]:()=>({...e,...t.data.dashboardState}),[y.r]:()=>({...e,css:t.css}),[y.a](){const n=new m.a(e.sliceIds);return n.add(b()(t).slice_id),{...e,sliceIds:f()(n)}},[y.d](){const{sliceId:n}=t,r=new m.a(e.sliceIds);return r.delete(n),{...e,sliceIds:f()(r)}},[y.o]:()=>({...e,isStarred:t.isStarred}),[y.p]:()=>({...e,isPublished:t.isPublished}),[y.g]:()=>({...e,editMode:t.editMode}),[y.j](){const{maxUndoHistoryExceeded:n=!0}=t.payload;return{...e,maxUndoHistoryExceeded:n}},[y.m]:()=>({...e}),[y.e]:()=>({...e,colorScheme:t.colorScheme,updatedColorScheme:!0}),[y.n](){const n={...e.expandedSlices},{sliceId:r}=t;return n[r]?delete n[r]:n[r]=!0,{...e,expandedSlices:n}},[y.b]:()=>({...e,hasUnsavedChanges:!0}),[y.c]:()=>({...e,hasUnsavedChanges:!1,maxUndoHistoryExceeded:!1,editMode:!1,updatedColorScheme:!1,lastModifiedTime:t.lastModifiedTime}),[y.l](){const{hasUnsavedChanges:n}=t.payload;return{...e,hasUnsavedChanges:n}},[y.k]:()=>({...e,refreshFrequency:t.refreshFrequency,shouldPersistRefreshFrequency:t.isPersistent,hasUnsavedChanges:t.isPersistent}),[y.f]:()=>({...e,directPathToChild:t.path,directPathLastUpdated:p()()}),[y.i]:()=>({...e,lastFocusedTabId:t.tabId}),[y.h]:()=>({...e,focusedFilterField:{chartId:t.chartId,column:t.column}}),[y.q]:()=>e.focusedFilterField&&t.chartId===e.focusedFilterField.chartId&&t.column===e.focusedFilterField.column?{...e,focusedFilterField:null}:e};return t.type in n?n[t.type]():e},dashboardLayout:Z,sliceEntities:C.a},se=Object(r.c)({messageToasts:o.a,common:re(oe.common||{}),user:re(oe.user||{}),impressionId:re(ne.a.generate()),...ie}),le=Object(r.e)(se,{},Object(r.d)(Object(r.a)(a.a,ee.a),Object(i.i)(!1)))},401:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"l",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"j",(function(){return v}));var r=n(41),a=n.n(r);function o(e,t){var n;return a()(n=e().dashboardState.sliceIds).call(n,t)}const i="ADD_FILTER";function s(e,t,n){return(r,a)=>o(a,e)?r({type:i,chartId:e,component:t,form_data:n}):a().dashboardFilters}const l="REMOVE_FILTER";function c(e){return(t,n)=>o(n,e)?t({type:l,chartId:e}):n().dashboardFilters}const u="CHANGE_FILTER";function d(e,t,n){return(r,a)=>{if(o(a,e)){const o=a().dashboardLayout.present;return r({type:u,chartId:e,newSelectedValues:t,merge:n,components:o})}return a().dashboardFilters}}const p="UPDATE_DIRECT_PATH_TO_FILTER";function h(e,t){return(n,r)=>o(r,e)?n({type:p,chartId:e,path:t}):r().dashboardFilters}const f="UPDATE_LAYOUT_COMPONENTS";function g(e){return t=>{t({type:f,components:e})}}const b="UPDATE_DASHBOARD_FILTERS_SCOPE";function v(e){return t=>{t({type:b,scopes:e})}}},4040:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.set(t.debug);var n={initTypes:(0,i.parseActions)(t.initTypes,["@@redux-undo/INIT"]),limit:t.limit,filter:t.filter||function(){return!0},groupBy:t.groupBy||function(){return null},undoType:t.undoType||o.ActionTypes.UNDO,redoType:t.redoType||o.ActionTypes.REDO,jumpToPastType:t.jumpToPastType||o.ActionTypes.JUMP_TO_PAST,jumpToFutureType:t.jumpToFutureType||o.ActionTypes.JUMP_TO_FUTURE,jumpType:t.jumpType||o.ActionTypes.JUMP,clearHistoryType:Array.isArray(t.clearHistoryType)?t.clearHistoryType:[t.clearHistoryType||o.ActionTypes.CLEAR_HISTORY],neverSkipReducer:t.neverSkipReducer||!1,ignoreInitialState:t.ignoreInitialState||!1,syncFilter:t.syncFilter||!1},s=n.history;return function(){for(var t=arguments.length,c=Array(t>2?t-2:0),g=2;g<t;g++)c[g-2]=arguments[g];var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.start(v,b);var m=b;if(!s)if(a.log("history is uninitialized"),void 0===b){var y={type:o.ActionTypes.CLEAR_HISTORY},_=e.apply(void 0,[b,y].concat(c));m=l(_,n.ignoreInitialState),a.log("do not set initialState on probe actions")}else(0,i.isHistory)(b)?(m=s=n.ignoreInitialState?b:(0,i.newHistory)(b.past,b.present,b.future),a.log("initialHistory initialized: initialState is a history",s)):(m=s=l(b,n.ignoreInitialState),a.log("initialHistory initialized: initialState is not a history",s));var O=function(t){return n.neverSkipReducer?r({},t,{present:e.apply(void 0,[t.present,v].concat(c))}):t},x=void 0;switch(v.type){case void 0:return m;case n.undoType:return x=h(m,-1),a.log("perform undo"),a.end(x),O(x);case n.redoType:return x=h(m,1),a.log("perform redo"),a.end(x),O(x);case n.jumpToPastType:return x=p(m,v.index),a.log("perform jumpToPast to "+v.index),a.end(x),O(x);case n.jumpToFutureType:return x=d(m,v.index),a.log("perform jumpToFuture to "+v.index),a.end(x),O(x);case n.jumpType:return x=h(m,v.index),a.log("perform jump to "+v.index),a.end(x),O(x);case f(v.type,n.clearHistoryType):return x=l(m.present),a.log("perform clearHistory"),a.end(x),O(x);default:if(x=e.apply(void 0,[m.present,v].concat(c)),n.initTypes.some((function(e){return e===v.type})))return a.log("reset history due to init action"),a.end(s),s;if(m._latestUnfiltered===x)return m;var C="function"==typeof n.filter&&!n.filter(v,x,m),j=n.groupBy(v,x,m);if(C){var E=(0,i.newHistory)(m.past,x,m.future,m.group);return n.syncFilter||(E._latestUnfiltered=m._latestUnfiltered),a.log("filter ignored action, not storing it in past"),a.end(E),E}if(null!=j&&j===m.group){var w=(0,i.newHistory)(m.past,x,m.future,m.group);return a.log("groupBy grouped the action with the previous action"),a.end(w),w}return m=u(m,x,n.limit,j),a.log("inserted new state into history"),a.end(m),m}}};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4041)),o=n(3819),i=n(3820);function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){var n=(0,i.newHistory)([],e,[]);return t&&(n._latestUnfiltered=null),n}function c(e){return e.past.length+1}function u(e,t,n,r){a.log("inserting",t),a.log("new free: ",n-c(e));var o=e.past,l=e._latestUnfiltered,u=n&&c(e)>=n,d=o.slice(u?1:0),p=null!=l?[].concat(s(d),[l]):d;return(0,i.newHistory)(p,t,[],r)}function d(e,t){if(t<0||t>=e.future.length)return e;var n=e.past,r=e.future,a=e._latestUnfiltered,o=[].concat(s(n),[a],s(r.slice(0,t))),l=r[t],c=r.slice(t+1);return(0,i.newHistory)(o,l,c)}function p(e,t){if(t<0||t>=e.past.length)return e;var n=e.past,r=e.future,a=e._latestUnfiltered,o=n.slice(0,t),l=[].concat(s(n.slice(t+1)),[a],s(r)),c=n[t];return(0,i.newHistory)(o,c,l)}function h(e,t){return t>0?d(e,t-1):t<0?p(e,e.past.length+t):e}function f(e,t){return t.indexOf(e)>-1?e:!e}e.exports=t.default},4041:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=void 0,o=void 0,i="#9E9E9E",s="#03A9F4",l="#4CAF50";function c(e,t,n){return["%c"+e,"color: "+t+"; font-weight: bold",n]}t.set=function(e){a=e},t.start=function(e,t){o={header:[],prev:[],action:[],next:[],msgs:[]},a&&(console.group?(o.header=["%credux-undo","font-style: italic","action",e.type],o.action=c("action",s,e),o.prev=c("prev history",i,t)):(o.header=["redux-undo action",e.type],o.action=["action",e],o.prev=["prev history",t]))},t.end=function(e){var t,n,i,s,u,d,p,h,f,g,b,v,m,y,_,O;a&&(console.group?o.next=c("next history",l,e):o.next=["next history",e],v=(b=o).header,m=b.prev,y=b.next,_=b.action,O=b.msgs,console.group?((t=console).groupCollapsed.apply(t,r(v)),(n=console).log.apply(n,r(m)),(i=console).log.apply(i,r(_)),(s=console).log.apply(s,r(y)),(u=console).log.apply(u,r(O)),console.groupEnd()):((d=console).log.apply(d,r(v)),(p=console).log.apply(p,r(m)),(h=console).log.apply(h,r(_)),(f=console).log.apply(f,r(y)),(g=console).log.apply(g,r(O))))},t.log=function(){if(a){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.msgs=o.msgs.concat([].concat(t,["\n"]))}}},409:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(17),a=n.n(r),o=n(0),i=n.n(o),s=n(5),l=n.n(s),c=n(163),u=n(62),d=n(1);const p={dialogClassName:l.a.string,triggerNode:l.a.node.isRequired,modalTitle:l.a.node,modalBody:l.a.node,modalFooter:l.a.node,beforeOpen:l.a.func,onExit:l.a.func,isButton:l.a.bool,className:l.a.string,tooltip:l.a.string,width:l.a.string,maxWidth:l.a.string,responsive:l.a.bool};class h extends i.a.Component{constructor(e){var t,n;super(e),this.state={showModal:!1},this.open=a()(t=this.open).call(t,this),this.close=a()(n=this.close).call(n,this)}close(){this.setState(()=>({showModal:!1}))}open(e){e.preventDefault(),this.props.beforeOpen(),this.setState(()=>({showModal:!0}))}renderModal(){return Object(d.d)(c.b,{wrapClassName:this.props.dialogClassName,className:this.props.className,show:this.state.showModal,onHide:this.close,afterClose:this.props.onExit,title:this.props.modalTitle,footer:this.props.modalFooter,hideFooter:!this.props.modalFooter,width:this.props.width,maxWidth:this.props.maxWidth,responsive:this.props.responsive},this.props.modalBody)}render(){return this.props.isButton?Object(d.d)(i.a.Fragment,null,Object(d.d)(u.a,{className:"modal-trigger",tooltip:this.props.tooltip,onClick:this.open},this.props.triggerNode),this.renderModal()):Object(d.d)(i.a.Fragment,null,Object(d.d)("span",{onClick:this.open,role:"button"},this.props.triggerNode),this.renderModal())}}h.propTypes=p,h.defaultProps={beforeOpen:()=>{},onExit:()=>{},isButton:!1,className:"",modalTitle:""}},430:function(e,t,n){e.exports=n(1796)},4360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DataTable}));var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(837),_babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_corejs3_core_js_stable_number_is_finite__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4537),_babel_runtime_corejs3_core_js_stable_number_is_finite__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_number_is_finite__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_corejs3_core_js_stable_instance_some__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(183),_babel_runtime_corejs3_core_js_stable_instance_some__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_some__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_corejs3_core_js_stable_instance_values__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(133),_babel_runtime_corejs3_core_js_stable_instance_values__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_values__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_6__),_babel_runtime_corejs3_core_js_stable_instance_flat__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1481),_babel_runtime_corejs3_core_js_stable_instance_flat__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_flat__WEBPACK_IMPORTED_MODULE_7__),_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(89),_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_8__),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__),react_table__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(480),react_table__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react_table__WEBPACK_IMPORTED_MODULE_11__),match_sorter__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1278),_components_GlobalFilter__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(4428),_components_SelectPageSize__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(4387),_components_Pagination__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(4386),_hooks_useSticky__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(4424),_consts__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(1267),_emotion_react__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1),src_views_store__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(3980);function _extends(){return(_extends=_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_8___default.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function DataTable({tableClassName:tableClassName,columns:columns,data:data,serverPaginationData:serverPaginationData,width:initialWidth="100%",height:initialHeight=300,pageSize:initialPageSize=0,initialState:initialState_={},pageSizeOptions:pageSizeOptions=_consts__WEBPACK_IMPORTED_MODULE_17__.a,maxPageItemCount:maxPageItemCount=9,sticky:doSticky,searchInput:searchInput=!0,onServerPaginationChange:onServerPaginationChange,rowCount:rowCount,selectPageSize:selectPageSize,noResults:noResultsText="No data found",hooks:hooks,serverPagination:serverPagination,wrapperRef:userWrapperRef,...moreUseTableOptions}){var _context;const tableHooks=_babel_runtime_corejs3_core_js_stable_instance_flat__WEBPACK_IMPORTED_MODULE_7___default()(_context=[react_table__WEBPACK_IMPORTED_MODULE_11__.useGlobalFilter,react_table__WEBPACK_IMPORTED_MODULE_11__.useSortBy,react_table__WEBPACK_IMPORTED_MODULE_11__.usePagination,doSticky?_hooks_useSticky__WEBPACK_IMPORTED_MODULE_16__.a:[],hooks||[]]).call(_context),resultsSize=serverPagination?rowCount:data.length,sortByRef=Object(react__WEBPACK_IMPORTED_MODULE_10__.useRef)([]),pageSizeRef=Object(react__WEBPACK_IMPORTED_MODULE_10__.useRef)([initialPageSize,resultsSize]),hasPagination=initialPageSize>0&&resultsSize>0,hasGlobalControl=hasPagination||!!searchInput,initialState={...initialState_,sortBy:sortByRef.current,pageSize:initialPageSize>0?initialPageSize:resultsSize||10},defaultWrapperRef=Object(react__WEBPACK_IMPORTED_MODULE_10__.useRef)(null),globalControlRef=Object(react__WEBPACK_IMPORTED_MODULE_10__.useRef)(null),paginationRef=Object(react__WEBPACK_IMPORTED_MODULE_10__.useRef)(null),wrapperRef=userWrapperRef||defaultWrapperRef,paginationData=_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_6___default()(serverPaginationData),defaultGetTableSize=Object(react__WEBPACK_IMPORTED_MODULE_10__.useCallback)(()=>{if(wrapperRef.current){var e,t;return{width:Number(initialWidth)||wrapperRef.current.clientWidth,height:(Number(initialHeight)||wrapperRef.current.clientHeight)-((null==(e=globalControlRef.current)?void 0:e.clientHeight)||0)-((null==(t=paginationRef.current)?void 0:t.clientHeight)||0)}}},[initialHeight,initialWidth,wrapperRef,hasPagination,hasGlobalControl,paginationRef,resultsSize,paginationData]),defaultGlobalFilter=Object(react__WEBPACK_IMPORTED_MODULE_10__.useCallback)((e,t,n)=>Object(match_sorter__WEBPACK_IMPORTED_MODULE_12__.a)(e,n,{keys:[...t,e=>_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(t).call(t,t=>_babel_runtime_corejs3_core_js_stable_instance_values__WEBPACK_IMPORTED_MODULE_4___default()(e)[t]).join(" ")],threshold:match_sorter__WEBPACK_IMPORTED_MODULE_12__.b.ACRONYM}),[]),{getTableProps:getTableProps,getTableBodyProps:getTableBodyProps,prepareRow:prepareRow,headerGroups:headerGroups,footerGroups:footerGroups,page:page,pageCount:pageCount,gotoPage:gotoPage,preGlobalFilteredRows:preGlobalFilteredRows,setGlobalFilter:setGlobalFilter,setPageSize:setPageSize_,wrapStickyTable:wrapStickyTable,state:{pageIndex:pageIndex,pageSize:pageSize,globalFilter:filterValue,sticky:sticky={}}}=Object(react_table__WEBPACK_IMPORTED_MODULE_11__.useTable)({columns:columns,data:data,initialState:initialState,getTableSize:defaultGetTableSize,globalFilter:defaultGlobalFilter,...moreUseTableOptions},...tableHooks),setPageSize=e=>{serverPagination&&onServerPaginationChange(0,e),(e||0!==resultsSize)&&setPageSize_(0===e?resultsSize:e)},noResults="function"==typeof noResultsText?noResultsText(filterValue):noResultsText,getNoResults=()=>Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("div",{className:"dt-no-results"},noResults);if(!columns||0===columns.length)return wrapStickyTable?wrapStickyTable(getNoResults):getNoResults();const shouldRenderFooter=_babel_runtime_corejs3_core_js_stable_instance_some__WEBPACK_IMPORTED_MODULE_3___default()(columns).call(columns,e=>!!e.Footer),renderTable=()=>Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("table",getTableProps({className:tableClassName}),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("thead",null,_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(headerGroups).call(headerGroups,e=>{var t;const{key:n,...r}=e.getHeaderGroupProps();return Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("tr",_extends({key:n||e.id},r),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(t=e.headers).call(t,e=>e.render("Header",{key:e.id,...e.getSortByToggleProps()})))})),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("tbody",getTableBodyProps(),page&&page.length>0?_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(page).call(page,row=>{var _context3;prepareRow(row);const{key:rowKey,...rowProps}=row.getRowProps();let chartFormData=src_views_store__WEBPACK_IMPORTED_MODULE_19__.a.getState().charts[2]?src_views_store__WEBPACK_IMPORTED_MODULE_19__.a.getState().charts[2].formData:null,scriptStr=chartFormData?chartFormData.script:"";return scriptStr&&(rowProps.onClick=()=>{eval(scriptStr)}),Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("tr",_extends({key:rowKey||row.id},rowProps),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(_context3=row.cells).call(_context3,e=>e.render("Cell",{key:e.column.id})))}):Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("tr",null,Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("td",{className:"dt-no-results",colSpan:columns.length},noResults))),shouldRenderFooter&&Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("tfoot",null,_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(footerGroups).call(footerGroups,e=>{var t;const{key:n,...r}=e.getHeaderGroupProps();return Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("tr",_extends({key:n||e.id},r),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_5___default()(t=e.headers).call(t,e=>e.render("Footer",{key:e.id})))})));(pageSizeRef.current[0]!==initialPageSize||0===initialPageSize&&pageSizeRef.current[1]!==resultsSize)&&(pageSizeRef.current=[initialPageSize,resultsSize],setPageSize(initialPageSize));const paginationStyle=sticky.height?{}:{visibility:"hidden"};let resultPageCount=pageCount,resultCurrentPageSize=pageSize,resultCurrentPage=pageIndex,resultOnPageChange=gotoPage;if(serverPagination){var _serverPaginationData,_serverPaginationData2;const e=null!=(_serverPaginationData=serverPaginationData.pageSize)?_serverPaginationData:initialPageSize;resultPageCount=Math.ceil(rowCount/e),_babel_runtime_corejs3_core_js_stable_number_is_finite__WEBPACK_IMPORTED_MODULE_2___default()(resultPageCount)||(resultPageCount=0),resultCurrentPageSize=e;const t=_babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_1___default()(pageSizeOptions).call(pageSizeOptions,([e])=>e>=resultCurrentPageSize);-1===t&&(resultCurrentPageSize=0),resultCurrentPage=null!=(_serverPaginationData2=serverPaginationData.currentPage)?_serverPaginationData2:0,resultOnPageChange=t=>onServerPaginationChange(t,e)}return Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("div",{ref:wrapperRef,style:{width:initialWidth,height:initialHeight}},hasGlobalControl?Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("div",{ref:globalControlRef,className:"form-inline dt-controls"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("div",{className:"row"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("div",{className:"col-sm-6"},hasPagination?Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)(_components_SelectPageSize__WEBPACK_IMPORTED_MODULE_14__.a,{total:resultsSize,current:resultCurrentPageSize,options:pageSizeOptions,selectRenderer:"boolean"==typeof selectPageSize?void 0:selectPageSize,onChange:setPageSize}):null),searchInput?Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)("div",{className:"col-sm-6"},Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)(_components_GlobalFilter__WEBPACK_IMPORTED_MODULE_13__.a,{searchInput:"boolean"==typeof searchInput?void 0:searchInput,preGlobalFilteredRows:preGlobalFilteredRows,setGlobalFilter:setGlobalFilter,filterValue:filterValue})):null)):null,wrapStickyTable?wrapStickyTable(renderTable):renderTable(),hasPagination&&resultPageCount>1?Object(_emotion_react__WEBPACK_IMPORTED_MODULE_18__.d)(_components_Pagination__WEBPACK_IMPORTED_MODULE_15__.a,{ref:paginationRef,style:paginationStyle,maxPageItemCount:maxPageItemCount,pageCount:resultPageCount,currentPage:resultCurrentPage,onPageChange:resultOnPageChange}):null)}DataTable.propTypes={tableClassName:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,pageSizeOptions:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.array,maxPageItemCount:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number,hooks:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.array,width:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number]),height:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number]),serverPagination:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.bool,onServerPaginationChange:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func.isRequired,serverPaginationData:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.shape({pageSize:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number,currentPage:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number}).isRequired,pageSize:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number,noResults:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func]),sticky:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.bool,rowCount:prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number.isRequired}},4386:function(e,t,n){"use strict";n(52);var r=n(14),a=n.n(r),o=n(438),i=n.n(o),s=n(0),l=n.n(s),c=n(1);t.a=l.a.memo(l.a.forwardRef((function({style:e,pageCount:t,currentPage:n=0,maxPageItemCount:r=9,onPageChange:o},s){const l=function(e,t,n){if(n<7)throw new Error("Must allow at least 7 page items");if(n%2==0)throw new Error("Must allow odd number of page items");var r;if(e<n)return[...i()(r=new Array(e)).call(r)];const a=Math.max(0,Math.min(e-n,t-Math.floor(n/2))),o=new Array(n);for(let e=0;e<n;e+=1)o[e]=e+a;return o[0]>0&&(o[0]=0,o[1]="prev-more"),o[o.length-1]<e-1&&(o[o.length-1]=e-1,o[o.length-2]="next-more"),o}(t,n,r);return Object(c.d)("div",{ref:s,className:"dt-pagination",style:e},Object(c.d)("ul",{className:"pagination pagination-sm"},a()(l).call(l,e=>"number"==typeof e?Object(c.d)("li",{key:e,className:n===e?"active":void 0},Object(c.d)("a",{href:`#page-${e}`,role:"button",onClick:t=>{t.preventDefault(),o(e)}},e+1)):Object(c.d)("li",{key:e,className:"dt-pagination-ellipsis"},Object(c.d)("span",null,"…")))))})))},4387:function(e,t,n){"use strict";n(52);var r=n(837),a=n.n(r),o=n(288),i=n.n(o),s=n(41),l=n.n(s),c=n(71),u=n.n(c),d=n(14),p=n.n(d),h=n(5),f=n.n(h),g=n(0),b=n.n(g),v=n(1261),m=n(1);function y({current:e,options:t,onChange:n}){return Object(m.d)("span",{className:"dt-select-page-size form-inline"},"Show"," ",Object(m.d)("select",{className:"form-control input-sm",value:e,onBlur:()=>{},onChange:e=>{n(Number(e.target.value))}},p()(t).call(t,e=>{const[t,n]=u()(e)?e:[e,e];return Object(m.d)("option",{key:t,value:t},n)}))," ","entries")}function _(e){return u()(e)?e[0]:e}y.propTypes={current:f.a.number.isRequired,options:f.a.array.isRequired,onChange:f.a.func.isRequired},t.a=b.a.memo((function({total:e,options:t,current:n,selectRenderer:r,onChange:o}){const s=p()(t).call(t,_);let c=[...t];void 0===n||n===e&&l()(s).call(s,0)||l()(s).call(s,n)||(c=[...t],i()(c).call(c,a()(s).call(s,e=>e>n),0,Object(v.a)([n])[0]));const u=void 0===n?s[0]:n,d=r||y;return Object(m.d)(d,{current:u,options:c,onChange:o})}))},439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.red=void 0;var r=o(n(3555)),a=o(n(1469));function o(e){return e&&e.__esModule?e:{default:e}}t.default={simpleCheckForValidColor:function(e){var t=0,n=0;return(0,r.default)(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},toState:function(e,t){var n=e.hex?(0,a.default)(e.hex):(0,a.default)(e),r=n.toHsl(),o=n.toHsv(),i=n.toRgb(),s=n.toHex();return 0===r.s&&(r.h=t||0,o.h=t||0),{hsl:r,hex:"000000"===s&&0===i.a?"transparent":"#"+s,rgb:i,hsv:o,oldHue:e.h||t||r.h,source:e.source}},isValidHex:function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,a.default)(e).isValid()},getContrastingColor:function(e){if(!e)return"#fff";var t=this.toState(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"}};t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},4424:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));n(52);var r=n(89),a=n.n(r),o=n(69),i=n.n(o),s=n(73),l=n.n(s),c=n(554),u=n.n(c),d=n(14),p=n.n(d),h=n(33),f=n.n(h),g=n(0),b=n.n(g);let v;const m=e=>e.join("\n");var y=n(1);let _;!function(e){e.init="init",e.setStickyState="setStickyState"}(_||(_={}));const O=(e,t)=>e+t,x=(e,t)=>({style:{...e.props.style,...t}}),C={tableLayout:"fixed"};function j({sticky:e={},width:t,height:n,children:r,setStickyState:a}){var o;if(!r||"table"!==r.type)throw new Error("<StickyWrap> must have only one <table> element as child");let s,c,d;if(f()(o=b.a.Children).call(o,r.props.children,e=>{e&&("thead"===e.type?s=e:"tbody"===e.type?c=e:"tfoot"===e.type&&(d=e))}),!s||!c)throw new Error("<table> in <StickyWrap> must contain both thead and tbody.");const h=Object(g.useMemo)(()=>{var e;return b.a.Children.toArray(null==(e=s)?void 0:e.props.children).pop().props.children.length},[s]),_=Object(g.useRef)(null),j=Object(g.useRef)(null),E=Object(g.useRef)(null),w=Object(g.useRef)(null),S=Object(g.useRef)(null),T=function(e=!1){if("undefined"==typeof document)return 0;if(void 0===v||e){const e=document.createElement("div"),t=document.createElement("div");e.style.cssText=m`
      width: auto;
      height: 100%;
      overflow: scroll;
    `,t.style.cssText=m`
      position: absolute;
      visibility: hidden;
      overflow: hidden;
      width: 100px;
      height: 50px;
    `,t.append(e),document.body.append(t),v=t.clientWidth-e.clientWidth,t.remove()}return v}(),{bodyHeight:M,columnWidths:P}=e,R=!P||e.width!==t||e.height!==n||e.setStickyState!==a;let A,D,k,I;if(Object(g.useLayoutEffect)(()=>{var e;if(!_.current)return;const r=_.current,o=r.clientHeight,i=j.current?j.current.clientHeight:0;if(!o)return;const s=r.parentNode.clientHeight,c=r.childNodes[0].childNodes,d=p()(e=u()(c)).call(e,e=>e.clientWidth),[h,f]=function({width:e,height:t,innerHeight:n,innerWidth:r,scrollBarSize:a}){const o=n>t;return[o,r>e-(o?a:0)]}({width:t,height:n-o-i,innerHeight:s,innerWidth:l()(d).call(d,O),scrollBarSize:T}),g=Math.min(n,f?s+T:s);a({hasVerticalScroll:h,hasHorizontalScroll:f,setStickyState:a,width:t,height:n,realHeight:g,tableHeight:s,bodyHeight:g-o-i,columnWidths:d})},[t,n,a,T]),R){const e=b.a.cloneElement(s,{ref:_}),t=d&&b.a.cloneElement(d,{ref:j});A=Object(y.d)("div",{key:"sizer",style:{height:n,overflow:"auto",visibility:"hidden"}},b.a.cloneElement(r,{},e,c,t))}const L=null==P?void 0:i()(P).call(P,0,h);if(L&&M){const t=Object(y.d)("colgroup",null,p()(L).call(L,(e,t)=>Object(y.d)("col",{key:t,width:e}))),n=e.hasVerticalScroll&&T?Object(y.d)("colgroup",null,p()(L).call(L,(e,t)=>Object(y.d)("col",{key:t,width:e+(t===L.length-1?T:0)}))):t;D=Object(y.d)("div",{key:"header",ref:E,style:{overflow:"hidden"}},b.a.cloneElement(r,x(r,C),n,s),D),k=d&&Object(y.d)("div",{key:"footer",ref:w,style:{overflow:"hidden"}},b.a.cloneElement(r,x(r,C),n,d),k);const a=e=>{E.current&&(E.current.scrollLeft=e.currentTarget.scrollLeft),w.current&&(w.current.scrollLeft=e.currentTarget.scrollLeft)};I=Object(y.d)("div",{key:"body",ref:S,style:{height:M,overflow:"auto"},onScroll:e.hasHorizontalScroll?a:void 0},b.a.cloneElement(r,x(r,C),t,c))}return Object(y.d)("div",{style:{width:t,height:e.realHeight||n,overflow:"hidden"}},D,I,k,A)}function E(e){const{dispatch:t,state:{sticky:n},data:r,page:o,rows:i,getTableSize:s=(()=>{})}=e,l=Object(g.useCallback)(e=>{t({type:_.setStickyState,size:e})},[t,s,o,i]);a()(e,{setStickyState:l,wrapStickyTable:e=>{const{width:t,height:a}=function(e,t){const n=Object(g.useRef)();return Object(g.useLayoutEffect)(()=>{n.current=e}),Object(g.useMemo)(()=>{if(n.current)return e()},[n.current,n.current===e,...t||[]])}(s,[s])||n,c=Object(g.useMemo)(e,[o,i]);return Object(g.useLayoutEffect)(()=>{t&&a||l()},[t,a]),t&&a?0===r.length?c:Object(y.d)(j,{width:t,height:a,sticky:n,setStickyState:l},c):null}})}function w(e){e.useInstance.push(E),e.stateReducers.push((e,t,n)=>{const r=t;if(r.type===_.init)return{...e,sticky:{...null==n?void 0:n.sticky}};if(r.type===_.setStickyState){const{size:t}=r;return t?{...e,sticky:{...null==n?void 0:n.sticky,...null==e?void 0:e.sticky,...r.size}}:{...e}}return e})}w.pluginName="useSticky"},4428:function(e,t,n){"use strict";n(52);var r=n(5),a=n.n(r),o=n(0),i=n.n(o),s=n(480);n(1009);var l=n(1);function c({count:e,value:t,onChange:n}){return Object(l.d)("span",{className:"dt-global-filter"},"Search"," ",Object(l.d)("input",{className:"form-control input-sm",placeholder:`${e} records...`,value:t,onChange:n}))}c.propTypes={count:a.a.number.isRequired,value:a.a.string.isRequired,onChange:a.a.func.isRequired};t.a=i.a.memo((function({preGlobalFilteredRows:e,filterValue:t="",searchInput:n,setGlobalFilter:r}){const a=e.length,[i,u]=function(e,t,n=200){const[r,a]=Object(o.useState)(e),i=Object(o.useRef)(e),l=Object(s.useAsyncDebounce)(t,n);return i.current!==e&&(i.current=e,r!==e&&a(e)),[r,e=>{a(e),l(e)}]}(t,e=>{r(e||void 0)},200),d=n||c;return Object(l.d)(d,{count:a,value:i,onChange:e=>{const t=e.target;e.preventDefault(),u(t.value)}})}))},4537:function(e,t,n){e.exports=n(4538)},4538:function(e,t,n){var r=n(4539);e.exports=r},4539:function(e,t,n){n(4540);var r=n(111);e.exports=r.Number.isFinite},4540:function(e,t,n){n(51)({target:"Number",stat:!0},{isFinite:n(4541)})},4541:function(e,t,n){var r=n(125).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},4754:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return U}));n(52);var r=n(193),a=n.n(r),o=n(41),i=n.n(o),s=n(39),l=n.n(s),c=n(96),u=n.n(c),d=n(50),p=n.n(d),h=n(71),f=n.n(h),g=n(14),b=n.n(g),v=n(89),m=n.n(v),y=n(0),_=n(577),O=n(940),x=n(373),C=n(18),j=(n(4424),n(4428),n(4386),n(4387),n(4360)),E=n(65).g.div`
  table {
    width: 100%;
    min-width: auto;
    max-width: none;
    margin: 0;
  }

  th,
  td {
    min-width: 4.3em;
  }

  thead > tr > th {
    padding-right: 1.4em;
    position: relative;
    background: ${({theme:{colors:e}})=>e.grayscale.light5};
    text-align: left;
  }
  th svg {
    color: ${({theme:{colors:e}})=>e.grayscale.light2};
    position: relative;
    vertical-align: middle;
    margin: 0 ${({theme:{gridUnit:e}})=>e}px;
  }
  th.is-sorted svg {
    color: ${({theme:{colors:e}})=>e.grayscale.base};
  }
  .table > tbody > tr:first-of-type > td,
  .table > tbody > tr:first-of-type > th {
    border-top: 0;
  }

  .dt-controls {
    padding-bottom: 0.65em;
  }
  .dt-metric {
    text-align: right;
  }
  .dt-totals {
    font-weight: bold;
  }
  .dt-is-null {
    color: ${({theme:{colors:e}})=>e.grayscale.light1};
  }
  td.dt-is-filter {
    cursor: pointer;
  }
  td.dt-is-filter:hover {
    background-color: ${({theme:{colors:e}})=>e.secondary.light4};
  }
  td.dt-is-active-filter,
  td.dt-is-active-filter:hover {
    background-color: ${({theme:{colors:e}})=>e.secondary.light3};
  }

  .dt-global-filter {
    float: right;
  }

  .dt-pagination {
    text-align: right;
    /* use padding instead of margin so clientHeight can capture it */
    padding-top: 0.5em;
  }
  .dt-pagination .pagination {
    margin: 0;
  }

  .pagination > li > span.dt-pagination-ellipsis:focus,
  .pagination > li > span.dt-pagination-ellipsis:hover {
    background: ${({theme:{colors:e}})=>e.grayscale.light5};
  }

  .dt-no-results {
    text-align: center;
    padding: 1em 0.6em;
  }
`,w=n(4438),S=n(437);const T=new w.FilterXSS({whiteList:{...Object(w.getDefaultWhiteList)(),span:["style","class","title"],div:["style","class"],a:["style","class","href","title","target"],img:["style","class","src","alt","title","width","height"],video:["autoplay","controls","loop","preload","src","height","width","muted"]},stripIgnoreTag:!0,css:!1});function M(e,t){const{dataType:n,formatter:r,config:a={}}=e,o=n===x.a.NUMERIC,i=void 0===a.d3SmallNumberFormat?r:Object(S.c)(a.d3SmallNumberFormat);return function(e,t){return void 0===t?[!1,""]:null===t?[!1,"N/A"]:e?[!1,e(t)]:"string"==typeof t?/<[^>]+>/.test(t)?[!0,T.process(t)]:[!1,t]:[!1,t.toString()]}(o&&"number"==typeof t&&Math.abs(t)<1?i:r,t)}var P=n(1267),R=n(1445),A=n(1);function D(){return(D=m.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e){return e===x.a.TEMPORAL?"datetime":e===x.a.STRING?"alphanumeric":"basic"}function I({value:e,valueRange:t,colorPositiveNegative:n=!1,alignPositiveNegative:r}){const[a,o]=t,i=n&&e<0?150:0;if(r){const t=Math.abs(Math.round(e/o*100));return`linear-gradient(to right, rgba(${i},0,0,0.2), rgba(${i},0,0,0.2) ${t}%, `+`rgba(0,0,0,0.01) ${t}%, rgba(0,0,0,0.001) 100%)`}const s=Math.abs(Math.max(o,0)),l=Math.abs(Math.min(a,0)),c=s+l,u=Math.round(Math.min(l+e,l)/c*100),d=Math.round(Math.abs(e)/c*100);return`linear-gradient(to right, rgba(0,0,0,0.01), rgba(0,0,0,0.001) ${u}%, `+`rgba(${i},0,0,0.2) ${u}%, rgba(${i},0,0,0.2) ${u+d}%, `+`rgba(0,0,0,0.01) ${u+d}%, rgba(0,0,0,0.001) 100%)`}function L({column:e}){const{isSorted:t,isSortedDesc:n}=e;let r=Object(A.d)(O.d,null);return t&&(r=n?Object(A.d)(O.e,null):Object(A.d)(O.f,null)),r}function F({count:e,value:t,onChange:n}){return Object(A.d)("span",{className:"dt-global-filter"},Object(C.e)("Search")," ",Object(A.d)("input",{className:"form-control input-sm",placeholder:Object(C.f)("search.num_records",e),value:t,onChange:n}))}function N({options:e,current:t,onChange:n}){return Object(A.d)("span",{className:"dt-select-page-size form-inline"},Object(C.e)("page_size.show")," ",Object(A.d)("select",{className:"form-control input-sm",value:t,onBlur:()=>{},onChange:e=>{n(Number(e.target.value))}},b()(e).call(e,e=>{const[t,n]=f()(e)?e:[e,e];return Object(A.d)("option",{key:t,value:t},n)}))," ",Object(C.e)("page_size.entries"))}function U(e){const{height:t,width:n,data:r,totals:o,isRawRecords:s,rowCount:c=0,columns:d,alignPositiveNegative:h=!1,colorPositiveNegative:g=!1,includeSearch:v=!1,pageSize:m=0,serverPagination:O=!1,serverPaginationData:x,setDataMask:w,showCellBars:S=!0,emitFilter:T=!1,sortDesc:U=!1,filters:B={},sticky:W=!0}=e,[H,q]=Object(y.useState)(B),z=Object(y.useCallback)(e=>{if(!T)return;const t=p()(e),n=u()(e);w({extraFormData:{filters:0===t.length?[]:b()(t).call(t,t=>{const n=null==e?void 0:e[t];return null==n?{col:t,op:"IS NULL"}:{col:t,op:"IN",val:n}})},filterState:{value:n.length?n:null}})},[T,w]),$=Object(y.useMemo)(()=>l()(P.a).call(P.a,([e])=>O?(e=>e<=c)(e):e<=2*r.length),[r.length,c,O]),G=Object(y.useCallback)((function(e,t){var n;if("number"==typeof(null==r?void 0:null==(n=r[0])?void 0:n[e])){const n=b()(r).call(r,t=>t[e]);return t?[0,Object(_.max)(b()(n).call(n,Math.abs))]:Object(_.extent)(n)}return null}),[r]),V=Object(y.useCallback)((function(e,t){var n;return!!H&&(null==(n=H[e])?void 0:i()(n).call(n,t))}),[H]),K=Object(y.useCallback)((function(e,t){const n={...H||{}};var r;H&&V(e,t)?n[e]=l()(r=H[e]).call(r,e=>e!==t):n[e]=[...(null==H?void 0:H[e])||[],t];f()(n[e])&&0===n[e].length&&delete n[e],q(n),z(n)}),[H,z,V]),Y=Object(y.useCallback)((e,t)=>{const{key:n,label:r,isNumeric:i,dataType:l,isMetric:c,config:u={}}=e,d=!i&&T,p=a()(Number(u.columnWidth))?u.columnWidth:Number(u.columnWidth),f=(e=>{const{isNumeric:t,config:n={}}=e;return{textAlign:n.horizontalAlign?n.horizontalAlign:t?"right":"left"}})(e),b=void 0===u.alignPositiveNegative?h:u.alignPositiveNegative,v=void 0===u.colorPositiveNegative?g:u.colorPositiveNegative,m=(void 0===u.showCellBars?S:u.showCellBars)&&(c||s)&&G(n,b);let y="";return d&&(y+=" dt-is-filter"),{id:String(t),accessor:e=>e[n],Cell:({value:t})=>{const[r,a]=M(e,t),o=r?{__html:a}:void 0,i={title:"number"==typeof t?String(t):void 0,onClick:T&&!m?()=>K(n,t):void 0,className:[y,null==t?"dt-is-null":"",V(n,t)?" dt-is-active-filter":""].join(" "),style:{...f,background:m?I({value:t,valueRange:m,alignPositiveNegative:b,colorPositiveNegative:v}):void 0}};return o?Object(A.d)("td",D({},i,{dangerouslySetInnerHTML:o})):Object(A.d)("td",i,a)},Header:({column:e,onClick:t,style:n})=>Object(A.d)("th",{title:"Shift + Click to sort by multiple columns",className:[y,e.isSorted?"is-sorted":""].join(" "),style:{...f,...n},onClick:t},u.columnWidth?Object(A.d)("div",{style:{width:p,height:.01}}):null,r,Object(A.d)(L,{column:e})),Footer:o?0===t?Object(A.d)("th",null,Object(C.e)("Totals")):Object(A.d)("td",{style:f},Object(A.d)("strong",null,M(e,o[n])[1])):void 0,sortDescFirst:U,sortType:k(l)}},[h,g,T,G,V,s,S,U,K,o]),Q=Object(y.useMemo)(()=>b()(d).call(d,Y),[d,Y]);return Object(A.d)(E,null,Object(A.d)(j.a,{columns:Q,data:r,rowCount:c,tableClassName:"table table-striped table-condensed",pageSize:m,serverPaginationData:x,pageSizeOptions:$,width:n,height:t,serverPagination:O,onServerPaginationChange:(e,t)=>{Object(R.a)(w,e,t)},maxPageItemCount:n>340?9:7,noResults:e=>Object(C.e)(e?"No matching records found":"No records found"),searchInput:v&&F,selectPageSize:null!==m&&N,sticky:W}))}},493:function(e,t,n){"use strict";n.d(t,"l",(function(){return N})),n.d(t,"I",(function(){return U})),n.d(t,"a",(function(){return B})),n.d(t,"d",(function(){return W})),n.d(t,"o",(function(){return H})),n.d(t,"u",(function(){return z})),n.d(t,"z",(function(){return $})),n.d(t,"p",(function(){return G})),n.d(t,"A",(function(){return V})),n.d(t,"n",(function(){return K})),n.d(t,"K",(function(){return Y})),n.d(t,"r",(function(){return Q})),n.d(t,"M",(function(){return X})),n.d(t,"g",(function(){return J})),n.d(t,"D",(function(){return Z})),n.d(t,"b",(function(){return ee})),n.d(t,"w",(function(){return te})),n.d(t,"c",(function(){return ne})),n.d(t,"k",(function(){return re})),n.d(t,"H",(function(){return ae})),n.d(t,"y",(function(){return ie})),n.d(t,"t",(function(){return se})),n.d(t,"m",(function(){return le})),n.d(t,"J",(function(){return ce})),n.d(t,"s",(function(){return ue})),n.d(t,"x",(function(){return de})),n.d(t,"e",(function(){return pe})),n.d(t,"B",(function(){return he})),n.d(t,"f",(function(){return fe})),n.d(t,"C",(function(){return ge})),n.d(t,"i",(function(){return be})),n.d(t,"F",(function(){return ve})),n.d(t,"h",(function(){return me})),n.d(t,"E",(function(){return ye})),n.d(t,"q",(function(){return _e})),n.d(t,"L",(function(){return Oe})),n.d(t,"j",(function(){return xe})),n.d(t,"G",(function(){return Ce})),n.d(t,"v",(function(){return je}));n(52);var r=n(88),a=n.n(r),o=n(182),i=n.n(o),s=n(87),l=n.n(s),c=n(73),u=n.n(c),d=n(69),p=n.n(d),h=n(96),f=n.n(h),g=n(33),b=n.n(g),v=n(82),m=n.n(v),y=n(1444),_=n(134),O=n(18),x=n(168),C=n(1255),j=n(1698),E=n(401),w=n(560),S=n(102),T=n(81),M=n(109),P=n(534),R=n(3835),A=n(50),D=n.n(A);var k=n(584),I=n(400),L=n(49),F=n(1244);const N="SET_UNSAVED_CHANGES";function U(e){return{type:N,payload:{hasUnsavedChanges:e}}}const B="ADD_SLICE";const W="REMOVE_SLICE";const H="TOGGLE_FAVE_STAR";function q(e){return{type:H,isStarred:e}}function z(e){return function(t){return _.a.get({endpoint:`/superset/favstar/Dashboard/${e}/count/`}).then(({json:e})=>{e.count>0&&t(q(!0))}).catch(()=>t(Object(M.c)(Object(O.e)("There was an issue fetching the favorite status of this dashboard."))))}}function $(e,t){return function(n){const r=t?"unselect":"select";return _.a.get({endpoint:`/superset/favstar/Dashboard/${e}/${r}/`}).then(()=>{n(q(!t))}).catch(()=>n(Object(M.c)(Object(O.e)("There was an issue favoriting this dashboard."))))}}const G="TOGGLE_PUBLISHED";function V(e,t){return function(n){return _.a.put({endpoint:`/api/v1/dashboard/${e}`,headers:{"Content-Type":"application/json"},body:m()({published:t})}).then(()=>{const e=t?"published":"hidden";n(Object(M.e)(Object(O.e)(`This dashboard is now ${e}`))),n(function(e){return{type:G,isPublished:e}}(t))}).catch(()=>{n(Object(M.c)(Object(O.e)("You do not have permissions to edit this dashboard.")))})}}const K="TOGGLE_EXPAND_SLICE";function Y(e){return{type:K,sliceId:e}}const Q="UPDATE_CSS";function X(e){return{type:Q,css:e}}const J="SET_EDIT_MODE";function Z(e){return{type:J,editMode:e}}const ee="ON_CHANGE";function te(){return{type:ee}}const ne="ON_SAVE";const re="SET_REFRESH_FREQUENCY";function ae(e,t=!1){return{type:re,refreshFrequency:e,isPersistent:t}}function oe(e){return t=>{t(function(e){return{type:ne,lastModifiedTime:e}}(e)),t(y.ActionCreators.clearHistory())}}function ie(e,t,n){const r=n===T.D?"save_dash":"copy_dash";return(n,a)=>{var o;n({type:P.j});const{dashboardFilters:i,dashboardLayout:s}=a(),c=s.present;b()(o=f()(i)).call(o,e=>{var t,r,a;const{chartId:o}=e,i=p()(t=e.directPathToFilter).call(t).pop(),s=p()(r=(null==(a=c[i])?void 0:a.parents)||[]).call(r);s.push(i),n(Object(E.k)(o,s))});const d=Object(R.a)(Object(k.b)()),h=function(e){var t;return u()(t=f()(e)).call(t,(e,{chartId:t,scopes:n})=>{var r;return{...e,[t]:u()(r=D()(n)).call(r,(e,t)=>({...e,[t]:n[t]}),{})}},{})}(i);return _.a.post({endpoint:`/superset/${r}/${t}/`,postPayload:{data:{...e,default_filters:Object(I.a)(d),filter_scopes:Object(I.a)(h)}}}).then(e=>{if(Object(L.c)(L.a.DASHBOARD_CROSS_FILTERS)){var t;const{dashboardInfo:{metadata:{chart_configuration:e={}}}}=a(),r=u()(t=f()(e)).call(t,(e,t)=>{var n;return l()(n=f()(c)).call(n,e=>{var n;return(null==e?void 0:null==(n=e.meta)?void 0:n.chartId)===t.id})?{...e,[t.id]:t}:e},{});n(Object(F.c)(r))}return n(oe(e.json.last_modified_time)),n(Object(M.e)(Object(O.e)("This dashboard was saved successfully."))),e}).catch(e=>Object(S.a)(e).then(({error:e})=>n(Object(M.c)(`${Object(O.e)("Sorry, there was an error saving this dashboard: ")} ${e}`))))}}function se(e=[],t=!1,n=0,r){return(a,o)=>{if(!n)return void b()(e).call(e,e=>a(Object(x.refreshChart)(e,t,r)));const{metadata:s}=o().dashboardInfo,l=Math.max(n,s.stagger_time||5e3);"boolean"!=typeof s.stagger_refresh&&(s.stagger_refresh=void 0===s.stagger_refresh||"true"===s.stagger_refresh);const c=s.stagger_refresh?l/(e.length-1):0;b()(e).call(e,(e,n)=>{i()(()=>a(Object(x.refreshChart)(e,t,r)),c*n)})}}const le="SHOW_BUILDER_PANE";function ce(){return{type:le}}function ue(e,t){return(n,r)=>{const{sliceEntities:o}=r(),i=o.slices[e];if(!i)return n(Object(M.g)("Sorry, there is no chart definition associated with the chart trying to be added."));const s={...i.form_data,slice_id:i.slice_id},l={...C.a,id:e,form_data:s,formData:Object(w.a)(s)};return a.a.all([n(Object(x.addChart)(l,e)),n(Object(j.b)(s.datasource))]).then(()=>{n(function(e){return{type:B,slice:e}}(i)),i&&"filter_box"===i.viz_type&&n(Object(E.g)(e,t,i.form_data))})}}function de(e){return(t,n)=>{const r=n().sliceEntities.slices[e];r&&"filter_box"===r.viz_type&&t(Object(E.i)(e)),t({type:W,sliceId:e}),t(Object(x.removeChart)(e))}}const pe="SET_COLOR_SCHEME";function he(e){return t=>{t(function(e){return{type:pe,colorScheme:e}}(e)),t(U(!0))}}const fe="SET_DIRECT_PATH";function ge(e){return{type:fe,path:e}}const be="SET_LAST_FOCUSED_TAB";function ve(e){return{type:be,tabId:e}}const me="SET_FOCUSED_FILTER_FIELD";function ye(e,t){return{type:me,chartId:e,column:t}}const _e="UNSET_FOCUSED_FILTER_FIELD";function Oe(e,t){return{type:_e,chartId:e,column:t}}const xe="SET_MAX_UNDO_HISTORY_EXCEEDED";function Ce(e=!0){return{type:xe,payload:{maxUndoHistoryExceeded:e}}}function je(){return(e,t)=>{const{dashboardLayout:n}=t(),r=n.past.length;return e(Object(M.g)(`You have used all ${r} undo slots and will not be able to fully undo subsequent actions. You may save your current state to reset the history.`))}}},499:function(e,t,n){"use strict";n.d(t,"f",(function(){return C})),n.d(t,"c",(function(){return j})),n.d(t,"e",(function(){return E})),n.d(t,"g",(function(){return w})),n.d(t,"b",(function(){return S})),n.d(t,"d",(function(){return T})),n.d(t,"a",(function(){return M}));n(405),n(52);var r=n(31),a=n.n(r),o=n(185),i=n.n(o),s=n(193),l=n.n(s),c=n(296),u=n.n(c),d=n(87),p=n.n(d),h=n(14),f=n.n(h),g=n(88),b=n.n(g),v=n(0),m=n.n(v),y=n(819),_=n(1);const O={"mode/sql":()=>n.e(232).then(n.t.bind(null,3822,7)),"mode/markdown":()=>Promise.all([n.e(14),n.e(13),n.e(22),n.e(79)]).then(n.t.bind(null,3823,7)),"mode/css":()=>Promise.all([n.e(13),n.e(229)]).then(n.t.bind(null,3824,7)),"mode/json":()=>n.e(78).then(n.t.bind(null,3825,7)),"mode/yaml":()=>n.e(233).then(n.t.bind(null,3826,7)),"mode/html":()=>Promise.all([n.e(14),n.e(13),n.e(22),n.e(230)]).then(n.t.bind(null,3827,7)),"mode/javascript":()=>Promise.all([n.e(14),n.e(231)]).then(n.t.bind(null,3828,7)),"theme/textmate":()=>n.e(235).then(n.t.bind(null,3829,7)),"theme/github":()=>n.e(234).then(n.t.bind(null,3830,7)),"ext/language_tools":()=>n.e(228).then(n.t.bind(null,3831,7))};function x(e,{defaultMode:t,defaultTheme:r,defaultTabSize:o=2,placeholder:s}={}){return Object(y.a)(async()=>{var s,c;const{default:d}=await n.e(20).then(n.t.bind(null,3817,7)),{default:h}=await Promise.all([n.e(20),n.e(23),n.e(63)]).then(n.t.bind(null,3832,7));await b.a.all(f()(e).call(e,e=>O[e]()));const g=t||(null==(s=p()(e).call(e,e=>u()(e).call(e,"mode/")))?void 0:s.replace("mode/","")),v=r||(null==(c=p()(e).call(e,e=>u()(e).call(e,"theme/")))?void 0:c.replace("theme/",""));return m.a.forwardRef((function({keywords:e,mode:t=g,theme:n=v,tabSize:r=o,defaultValue:s="",value:c="",...u},p){if(e){const n={getCompletions:(n,r,a,o,s)=>{l()(i()(o,10))&&r.getMode().$id===`ace/mode/${t}`&&s(null,e)}};d.acequire("ace/ext/language_tools").setCompleters([n])}return Object(_.d)(h,a()({ref:p,mode:t,theme:n,tabSize:r,defaultValue:s,value:c||""},u))}))},s)}const C=x(["mode/sql","theme/github","ext/language_tools"]),j=x(["mode/sql","theme/github","ext/language_tools"],{placeholder:()=>Object(_.d)("div",{style:{height:"100%"}},Object(_.d)("div",{style:{width:41,height:"100%",background:"#e8e8e8"}}),Object(_.d)("div",{className:"ace_content"}))}),E=x(["mode/markdown","theme/textmate"]),w=x(["mode/markdown","mode/sql","mode/json","mode/html","mode/javascript","theme/textmate"]),S=x(["mode/css","theme/github"]),T=x(["mode/json","theme/github"]),M=x(["mode/json","mode/yaml","theme/github"])},501:function(e,t,n){"use strict";var r=n(5),a=n.n(r);t.a=a.a.shape({column_name:a.a.string.isRequired,type:a.a.string})},534:function(e,t,n){"use strict";n.d(t,"i",(function(){return x})),n.d(t,"s",(function(){return j})),n.d(t,"t",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"l",(function(){return S})),n.d(t,"d",(function(){return T})),n.d(t,"m",(function(){return M})),n.d(t,"a",(function(){return P})),n.d(t,"k",(function(){return R})),n.d(t,"b",(function(){return A})),n.d(t,"e",(function(){return k})),n.d(t,"n",(function(){return I})),n.d(t,"h",(function(){return L})),n.d(t,"q",(function(){return F})),n.d(t,"g",(function(){return N})),n.d(t,"f",(function(){return B})),n.d(t,"o",(function(){return W})),n.d(t,"r",(function(){return H})),n.d(t,"p",(function(){return q})),n.d(t,"j",(function(){return z}));n(52);var r=n(94),a=n.n(r),o=n(1444),i=n(18),s=n(109),l=n(401),c=n(493),u=n(101),d=n(81),p=n(1728);var h=n(1410),f=n(183),g=n.n(f),b=n(96),v=n.n(b),m=n(14),y=n.n(m),_=n(76),O=n.n(_);const x="UPDATE_COMPONENTS";function C(e){return(...t)=>(n,r)=>{const a=e(...t);if(n("function"==typeof a?a(n,r):a),!(a.type===x&&a.payload&&a.payload.nextComponents)){const e=r().dashboardLayout.present;n(Object(l.l)(e))}r().dashboardState.hasUnsavedChanges||n(Object(c.I)(!0))}}const j=C(e=>({type:x,payload:{nextComponents:e}}));function E(e){return(t,n)=>{const{dashboardLayout:r}=n();t(j({[d.e]:{...r.present[d.e],meta:{text:e}}}))}}const w="DASHBOARD_TITLE_CHANGED";function S(e){return{type:w,text:e}}const T="DELETE_COMPONENT",M=C((e,t)=>({type:T,payload:{id:e,parentId:t}})),P="CREATE_COMPONENT",R=C(e=>({type:P,payload:{dropResult:e}})),A="CREATE_TOP_LEVEL_TABS",D=C(e=>({type:A,payload:{dropResult:e}})),k="DELETE_TOP_LEVEL_TABS",I=C(()=>({type:k,payload:{}})),L="RESIZE_COMPONENT";function F({id:e,width:t,height:n}){return(r,a)=>{const{dashboardLayout:o}=a(),{present:i}=o,s=i[e],l=t&&s.meta.width!==t,c=n&&s.meta.height!==n;if(s&&(l||c)){const a={[e]:{...s,meta:{...s.meta,width:t||s.meta.width,height:n||s.meta.height}}};r(j(a))}}}const N="MOVE_COMPONENT",U=C(e=>({type:N,payload:{dropResult:e}})),B="HANDLE_COMPONENT_DROP";function W(e){return(t,n)=>{if(function(e,t){const n=Object(p.a)({dropResult:e,layout:t});return"number"==typeof n&&n<0}(e,n().dashboardLayout.present))return t(Object(s.g)(Object(i.e)("There is not enough space for this component. Try decreasing its width, or increasing the destination width.")));const{source:r,destination:o}=e,l=o&&o.id===d.h,c=r.id===d.v,f=n().dashboardLayout.present[d.h],b=f&&f.children?f.children[0]:"";if(l)t(D(e));else if(o&&c)t(R(e));else{if(r.type===u.k&&o.type===u.k&&r.id===b&&o.id!==b)return t(Object(s.g)(Object(i.e)("Can not move top level tab into nested tabs")));o&&r&&(o.id!==r.id||o.index!==r.index)&&t(U(e))}const{dashboardFilters:m,dashboardLayout:_}=n();if(!c){var x,C;const{present:e}=_,n=e[r.id]||{},l=e[o.id]||{};if((n.type===u.k||n.type===u.j)&&n.children&&0===n.children.length){const n=Object(h.a)({childId:r.id,layout:e});t(M(r.id,n))}(function({dashboardFilters:e={},source:t=[],destination:n=[]}){var r,o;const i=new O.a(t),s=new O.a(n),l=a()(r=[]).call(r,...y()(o=v()(e)).call(o,({scopes:e})=>{var t,n;return a()(t=[]).call(t,...y()(n=v()(e)).call(n,({scope:e})=>e))}));return g()(l).call(l,e=>s.has(e)!==i.has(e))})({dashboardFilters:m,source:a()(x=n.parents||[]).call(x,r.id),destination:a()(C=l.parents||[]).call(C,o.id)})&&t(Object(s.g)(Object(i.e)("This chart has been moved to a different filter scope.")))}return null}}function H(){return(e,t)=>{e(o.ActionCreators.undo());const{dashboardLayout:n,dashboardState:r}=t();0!==n.past.length||r.maxUndoHistoryExceeded||r.updatedColorScheme||e(Object(c.I)(!1))}}const q=C(o.ActionCreators.redo),z="UPDATE_COMPONENTS_PARENTS_LIST"},544:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(185),a=n.n(r),o=n(861),i=n.n(o),s=n(0),l=n.n(s),c=n(1289),u=n(936),d=n(118),p=n.n(d),h=n(177),f=n(120),g=n(20),b=n(1);const v=e=>null==e?"":String(e);class m extends l.a.Component{constructor(e){super(e),this.onChange=e=>{var t,n;let r=e;const o=[];if(""!==e&&this.props.isFloat){const t=Object(c.a)(e);t?o.push(t):r=e.match(/.*([.0])$/g)?e:i()(e)}if(""!==e&&this.props.isInt){const t=Object(u.a)(e);t?o.push(t):r=a()(e,10)}null==(t=(n=this.props).onChange)||t.call(n,r,o)},this.debouncedOnChange=p()(e=>{this.onChange(e)},h.d),this.onChangeWrapper=e=>{const{value:t}=e.target;this.setState({value:t},()=>{this.debouncedOnChange(t)})},this.render=()=>{let{value:e}=this.state;return this.initialValue!==this.props.value&&(this.initialValue=this.props.value,e=v(this.props.value)),Object(b.d)("div",null,Object(b.d)(f.a,this.props),Object(b.d)(g.l,{type:"text",placeholder:this.props.placeholder,onChange:this.onChangeWrapper,onFocus:this.props.onFocus,value:e,disabled:this.props.disabled,"aria-label":this.props.label}))},this.initialValue=e.value,this.state={value:v(this.initialValue)}}}},555:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(31),a=n.n(r),o=n(17),i=n.n(o),s=n(0),l=n.n(s),c=n(5),u=n.n(c),d=n(120),p=n(1303),h=n(1);const f={value:u.a.bool,label:u.a.string,onChange:u.a.func},g={paddingRight:"5px"};class b extends l.a.Component{onChange(){this.props.onChange(!this.props.value)}renderCheckbox(){var e;return Object(h.d)(p.c,{onChange:i()(e=this.onChange).call(e,this),style:g,checked:!!this.props.value})}render(){var e;return this.props.label?Object(h.d)(d.a,a()({},this.props,{leftNode:this.renderCheckbox(),onClick:i()(e=this.onChange).call(e,this)})):this.renderCheckbox()}}b.propTypes=f,b.defaultProps={value:!1,onChange:()=>{}}},557:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l}));var r=n(49);const a="UPDATE_DATA_MASK",o="SET_DATA_MASK_FOR_FILTER_CONFIG_COMPLETE",i="SET_DATA_MASK_FOR_FILTER_CONFIG_FAIL";function s(e,t){return{type:o,filterConfig:e,filters:t}}function l(e,t){const n=Object(r.c)(r.a.DASHBOARD_NATIVE_FILTERS)||Object(r.c)(r.a.DASHBOARD_CROSS_FILTERS);return{type:a,filterId:e,dataMask:n?t:{}}}},560:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f}));var r,a=n(50),o=n.n(a),i=n(94),s=n.n(i),l=n(33),c=n.n(l),u=n(561),d=n(375),p=n(867);function h(e,t){const n={...t},r=n.viz_type||e.common.conf.DEFAULT_VIZ_TYPE||"table";!function(e){e.y_axis_zero&&(e.y_axis_bounds=[0,null])}(n);const a=Object(d.b)(r,e.datasource.type,e,n),o=Object(u.a)().get(r)||{};return o.onInit?o.onInit(a):a}function f(e){var t,n;const r=e.datasource.split("__")[1],a=e.viz_type,i=Object(d.b)(a,r,null,{...e}),l=Object(d.e)(i),u={};return c()(t=s()(n=o()(i)).call(n,o()(e))).call(t,t=>{void 0===e[t]?u[t]=l[t]:u[t]=e[t]}),u}const g={...p.a};c()(r=o()(p.a)).call(r,e=>{g[e].value=p.a[e].default});Object(d.e)(g)},578:function(e,t,n){var r=n(580),a=n(413),o=n(3539),i=n(117);e.exports=function(e,t){return(i(e)?r:o)(e,a(t,3))}},584:function(e,t,n){"use strict";n.d(t,"b",(function(){return L})),n.d(t,"e",(function(){return F})),n.d(t,"c",(function(){return N})),n.d(t,"d",(function(){return U})),n.d(t,"a",(function(){return B}));n(52);var r=n(71),a=n.n(r),o=n(50),i=n.n(o),s=n(73),l=n.n(s),c=n(96),u=n.n(c),d=n(14),p=n.n(d),h=n(33),f=n.n(h),g=n(150),b=n.n(g),v=n(39),m=n.n(v),y=n(41),_=n.n(y),O=n(3391),x=n.n(O),C=n(3392),j=n.n(C),E=n(3393),w=n.n(E),S=n(982),T=n.n(S),M=n(942),P=n(101),R=n(979);let A=[],D={},k={},I={};function L(){return D}function F(e){return _()(A).call(A,e)}function N(e){if(!(e in k)){var t;const n=m()(t=b()(D)).call(t,([,{scope:t}])=>_()(t).call(t,e));k[e]=j()(x()(([e])=>Object(M.a)(e).column),w()(([,{values:e}])=>e))(n)}return k[e]}function U({filterScope:e=R.a}){const t=[],{scope:n,immune:r}=e;return f()(n).call(n,e=>function e(t=[],n={},r=[]){if(n)if(n.type===P.a&&n.meta&&n.meta.chartId&&!_()(r).call(r,n.meta.chartId))t.push(n.meta.chartId);else if(n.children){var a;f()(a=n.children).call(a,n=>e(t,I[n],r))}}(t,I[e],r)),t}function B({dashboardFilters:e={},components:t={}}){var n,r;A=p()(n=u()(e)).call(n,e=>e.chartId),T()(t)||(I=t),k={},D=l()(r=u()(e)).call(r,(e,t)=>{var n;const{chartId:r,columns:o,scopes:s}=t,l={};return f()(n=i()(o)).call(n,e=>{if(a()(o[e])?o[e].length:void 0!==o[e]){var t;const n=m()(t=U({filterScope:s[e]})).call(t,e=>r!==e);l[Object(M.b)({chartId:r,column:e})]={values:o[e],scope:n}}}),{...e,...l}},{})}},66:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return h}));var r=n(71),a=n.n(r),o=n(85),i=n.n(o),s=n(48),l=n(145);const c={SIMPLE:"SIMPLE",SQL:"SQL"},u={HAVING:"HAVING",WHERE:"WHERE"},d={"==":"=","!=":"<>",">":">","<":"<",">=":">=","<=":"<=",IN:"IN","NOT IN":"NOT IN",LIKE:"LIKE",ILIKE:"ILIKE",REGEX:"REGEX","IS NOT NULL":"IS NOT NULL","IS NULL":"IS NULL","IS TRUE":"IS TRUE","IS FALSE":"IS FALSE","LATEST PARTITION":({datasource:e})=>`= '{{ presto.latest_partition('${e.schema}.${e.datasource_name}') }}'`};function p(e,{useSimple:t}={}){if(e.expressionType===c.SIMPLE||t){const{subject:t,comparator:n}=e,r=e.operator&&s.c.has(e.operator)?d[e.operator](e):d[e.operator];return Object(l.j)(t,r,n)}return e.expressionType===c.SQL?e.sqlExpression:""}class h{constructor(e){var t;(this.expressionType=e.expressionType||c.SIMPLE,this.expressionType===c.SIMPLE)?(this.subject=e.subject,this.operator=null==(t=e.operator)?void 0:t.toUpperCase(),this.comparator=e.comparator,this.clause=e.clause||u.WHERE,this.sqlExpression=null):this.expressionType===c.SQL&&(this.sqlExpression="string"==typeof e.sqlExpression?e.sqlExpression:p(e,{useSimple:!0}),this.clause=e.clause,e.operator&&s.c.has(e.operator)?(this.subject=e.subject,this.operator=e.operator):(this.subject=null,this.operator=null),this.comparator=null);this.isExtra=!!e.isExtra,this.isNew=!!e.isNew,this.filterOptionName=e.filterOptionName||`filter_${Math.random().toString(36).substring(2,15)}_${Math.random().toString(36).substring(2,15)}`}duplicateWith(e){return new h({...this,isNew:!1,...e})}equals(e){return e.expressionType===this.expressionType&&e.sqlExpression===this.sqlExpression&&e.operator===this.operator&&e.comparator===this.comparator&&e.subject===this.subject}isValid(){if(this.expressionType===c.SIMPLE){var e;if(i()(e=[s.k["IS TRUE"],s.k["IS FALSE"],s.k["IS NULL"],s.k["IS NOT NULL"]]).call(e,this.operator)>=0)return!(!this.operator||!this.subject);if(this.operator&&this.subject&&this.clause)if(a()(this.comparator)){if(this.comparator.length>0)return!0}else if(null!==this.comparator)return!0}else if(this.expressionType===c.SQL)return!(!this.sqlExpression||!this.clause);return!1}getDefaultLabel(){const e=this.translateToSql();return e.length<43?e:`${e.substring(0,40)}...`}getTooltipTitle(){return this.translateToSql()}translateToSql(){return p(this)}}},75:function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;(o=new Error(t.replace(/%s/g,(function(){return r[i++]})))).name="Invariant Violation"}throw o.framesToPop=1,o}}n.d(t,"a",(function(){return r}))},759:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n.n(r),o=n(5),i=n.n(o),s=n(18),l=n(1280),c=n(1);const u={children:i.a.node.isRequired,onError:i.a.func,showMessage:i.a.bool};class d extends a.a.Component{constructor(e){super(e),this.state={error:null,info:null}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t),this.setState({error:e,info:t})}render(){const{error:e,info:t}=this.state;if(e){const n=e.toString(),r=Object(c.d)("span",null,Object(c.d)("strong",null,Object(s.e)("Unexpected error")),n?`: ${n}`:"");return this.props.showMessage?Object(c.d)(l.a,{subtitle:r,copyText:r,stackTrace:t?t.componentStack:null}):null}return this.props.children}}d.propTypes=u,d.defaultProps={onError:()=>{},showMessage:!0}},819:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(52);var r=n(31),a=n.n(r),o=n(88),i=n.n(o),s=n(0),l=n.n(s),c=n(211),u=n(1);function d({width:e,height:t,showLoadingForImport:n=!1,placeholderStyle:r}){return t&&Object(u.d)("div",{key:"async-asm-placeholder",style:{width:e,height:t,...r}},n&&Object(u.d)(c.a,{position:"floating"}))||null}function p(e,t=d){let n,r;function o(){return n||(n=e instanceof i.a?e:e()),r||n.then(e=>{r=e.default||e}),n}const c=l.a.forwardRef((function(e,n){const[i,l]=Object(s.useState)(void 0!==r);Object(s.useEffect)(()=>{let e=!0;return i||o().then(()=>{e&&l(!0)}),()=>{e=!1}});const c=r||t;return c?Object(u.d)(c,a()({ref:c===r?n:null},e)):null}));return c.preload=o,c}},824:function(e,t,n){"use strict";var r=n(14),a=n.n(r),o=n(94),i=n.n(o),s=n(212);const l=["AND","AS","ASC","AVG","BY","CASE","COUNT","CREATE","CROSS","DATABASE","DEFAULT","DELETE","DESC","DISTINCT","DROP","ELSE","END","FOREIGN","FROM","GRANT","GROUP","HAVING","IF","INNER","INSERT","JOIN","KEY","LEFT","LIMIT","MAX","MIN","NATURAL","NOT","NULL","OFFSET","ON","OR","ORDER","OUTER","PRIMARY","REFERENCES","RIGHT","SELECT","SUM","TABLE","THEN","TYPE","UNION","UPDATE","WHEN","WHERE"],c=i()(l).call(l,["BIGINT","BINARY","BIT","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","MONEY","NUMBER","NUMERIC","REAL","SET","TEXT","TIMESTAMP","VARCHAR"]),u=a()(c).call(c,e=>({meta:"sql",name:e,score:s.l,value:e}));t.a=u},826:function(e,t,n){"use strict";n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return L})),n.d(t,"g",(function(){return F})),n.d(t,"f",(function(){return B})),n.d(t,"d",(function(){return W})),n.d(t,"a",(function(){return H})),n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return z})),n.d(t,"e",(function(){return $}));n(1007),n(52);var r=n(73),a=n.n(r),o=n(96),i=n.n(o),s=n(183),l=n.n(s),c=n(39),u=n.n(c),d=n(41),p=n.n(d),h=n(82),f=n.n(h),g=n(94),b=n.n(g),v=n(87),m=n.n(v),y=n(71),_=n.n(y),O=n(150),x=n.n(O),C=n(14),j=n.n(C),E=n(178),w=n.n(E),S=n(0),T=n(134),M=n(18),P=n(322),R=n(187),A=n(529),D=n(102);const k=e=>{var t;return"string"==typeof e?e:j()(t=x()(e)).call(t,([e,t])=>_()(t)?`(${e}) ${t.join(", ")}`:`(${e}) ${t}`).join("\n")};function I(e,t,n,r=!0,a=[],o,i=!0){const[s,l]=Object(S.useState)({count:0,collection:a,loading:i,lastFetchDataConfig:null,permissions:[],bulkSelectEnabled:!1});function c(e){l(t=>({...t,...e}))}Object(S.useEffect)(()=>{r&&T.a.get({endpoint:`/api/v1/${e}/_info?q=${w.a.encode({keys:["permissions"]})}`}).then(({json:e={}})=>{c({permissions:e.permissions})},Object(R.c)(e=>n(Object(M.e)("An error occurred while fetching %s info: %s",t,e))))},[]);const u=Object(S.useCallback)(({pageIndex:r,pageSize:a,sortBy:i,filters:s})=>{var l,u;c({lastFetchDataConfig:{filters:s,pageIndex:r,pageSize:a,sortBy:i},loading:!0});const d=j()(l=b()(u=o||[]).call(u,s)).call(l,({id:e,operator:t,value:n})=>({col:e,opr:t,value:n})),p=w.a.encode({order_column:i[0].id,order_direction:i[0].desc?"desc":"asc",page:r,page_size:a,...d.length?{filters:d}:{}});return T.a.get({endpoint:`/api/v1/${e}/?q=${p}`}).then(({json:e={}})=>{c({collection:e.result,count:e.count,lastFetched:(new Date).toISOString()})},Object(R.c)(e=>n(Object(M.e)("An error occurred while fetching %ss: %s",t,e)))).finally(()=>{c({loading:!1})})},[o]);return{state:{loading:s.loading,resourceCount:s.count,resourceCollection:s.collection,bulkSelectEnabled:s.bulkSelectEnabled,lastFetched:s.lastFetched},setResourceCollection:e=>c({collection:e}),hasPerm:function(e){var t;return!!s.permissions.length&&Boolean(m()(t=s.permissions).call(t,t=>t===e))},fetchData:u,toggleBulkSelect:function(){c({bulkSelectEnabled:!s.bulkSelectEnabled})},refreshData:e=>s.lastFetchDataConfig?u(s.lastFetchDataConfig):e?u(e):null}}function L(e,t,n){const[r,a]=Object(S.useState)({loading:!1,resource:null,error:null});function o(e){a(t=>({...t,...e}))}return{state:r,setResource:e=>o({resource:e}),fetchResource:Object(S.useCallback)(r=>(o({loading:!0}),T.a.get({endpoint:`/api/v1/${e}/${r}`}).then(({json:e={}})=>(o({resource:e.result,error:null}),e.result),Object(R.c)(e=>{n(Object(M.e)("An error occurred while fetching %ss: %s",t,k(e))),o({error:e})})).finally(()=>{o({loading:!1})})),[n,e,t]),createResource:Object(S.useCallback)(r=>(o({loading:!0}),T.a.post({endpoint:`/api/v1/${e}/`,body:f()(r),headers:{"Content-Type":"application/json"}}).then(({json:e={}})=>(o({resource:{id:e.id,...e.result},error:null}),e.id),Object(R.c)(e=>{n(Object(M.e)("An error occurred while creating %ss: %s",t,k(e))),o({error:e})})).finally(()=>{o({loading:!1})})),[n,e,t]),updateResource:Object(S.useCallback)((r,a)=>(o({loading:!0}),T.a.put({endpoint:`/api/v1/${e}/${r}`,body:f()(a),headers:{"Content-Type":"application/json"}}).then(({json:e={}})=>(o({resource:e.result,error:null}),e.result),Object(R.c)(e=>(n(Object(M.e)("An error occurred while fetching %ss: %s",t,f()(e))),o({error:e}),e))).finally(()=>{o({loading:!1})})),[n,e,t]),clearError:()=>o({error:null})}}function F(e,t,n){const[r,a]=Object(S.useState)({loading:!1,passwordsNeeded:[],alreadyExists:[]});function o(e){a(t=>({...t,...e}))}const s=e=>"object"==typeof e&&_()(e._schema)&&1===e._schema.length&&"Must provide a password for the database"===e._schema[0],c=e=>"string"==typeof e&&p()(e).call(e,"already exists and `overwrite=true` was not passed"),d=e=>{var t,n;return j()(t=u()(n=x()(e)).call(n,([,e])=>s(e))).call(t,([e])=>e)},h=e=>{var t,n;return j()(t=u()(n=x()(e)).call(n,([,e])=>c(e))).call(t,([e])=>e)};return{state:r,importResource:Object(S.useCallback)((r,a={},u=!1)=>{o({loading:!0});const p=new FormData;return p.append("formData",r),a&&p.append("passwords",f()(a)),u&&p.append("overwrite","true"),T.a.post({endpoint:`/api/v1/${e}/import/`,body:p}).then(()=>!0).catch(e=>Object(D.a)(e).then(e=>{const r=e.message||e.error;return"string"==typeof r?(n(Object(M.e)("An error occurred while importing %s: %s",t,k(r))),!1):((e=>{var t;return l()(t=i()(e)).call(t,e=>!s(e)&&!c(e))})(r)?n(Object(M.e)("An error occurred while importing %s: %s",t,k(r))):o({passwordsNeeded:d(r),alreadyExists:h(r)}),!1)})).finally(()=>{o({loading:!1})})},[])}}var N;!function(e){e.CHART="slice",e.DASHBOARD="Dashboard"}(N||(N={}));const U={chart:Object(P.a)({requestType:"rison",method:"GET",endpoint:"/api/v1/chart/favorite_status/"}),dashboard:Object(P.a)({requestType:"rison",method:"GET",endpoint:"/api/v1/dashboard/favorite_status/"})};function B(e,t,n){const[r,o]=Object(S.useState)({}),i=e=>o(t=>({...t,...e}));return Object(S.useEffect)(()=>{t.length&&U[e](t).then(({result:e})=>{const t=a()(e).call(e,(e,t)=>(e[t.id]=t.value,e),{});i(t)},Object(R.c)(e=>n(Object(M.e)("There was an error fetching the favorite status: %s",e))))},[t,e,n]),[Object(S.useCallback)((t,r)=>{const a=r?"unselect":"select";T.a.get({endpoint:`/superset/favstar/${"chart"===e?N.CHART:N.DASHBOARD}/${t}/${a}/`}).then(({json:e})=>{i({[t]:(null==e?void 0:e.count)>0})},Object(R.c)(e=>n(Object(M.e)("There was an error saving the favorite status: %s",e))))},[e]),r]}const W=(e,t)=>{const[n,r]=Object(S.useState)(null);return{sliceCurrentlyEditing:n,handleChartUpdated:function(n){const r=j()(t).call(t,e=>e.id===n.id?{...e,...n}:e);e(r)},openChartEditModal:function(e){r({slice_id:e.id,slice_name:e.slice_name,description:e.description,cache_timeout:e.cache_timeout})},closeChartEditModal:function(){r(null)}}},H=(e,t,n)=>{Object(A.a)(`${window.location.origin}/superset/sqllab?savedQueryId=${e}`).then(()=>{n(Object(M.e)("Link Copied!"))}).catch(()=>{t(Object(M.e)("Sorry, your browser does not support copying."))})},q=(e,t,n)=>{T.a.post({endpoint:"api/v1/database/test_connection",body:f()(e),headers:{"Content-Type":"application/json"}}).then(()=>{n(Object(M.e)("Connection looks good!"))},Object(R.c)(e=>{t(Object(M.e)(`${Object(M.e)("ERROR: ")}${k(e)}`))}))};function z(){const[e,t]=Object(S.useState)(null);return[e,Object(S.useCallback)(()=>{T.a.get({endpoint:"/api/v1/database/available"}).then(({json:e})=>{t(e)})},[t])]}function $(){const[e,t]=Object(S.useState)(null);return[e,Object(S.useCallback)(e=>{T.a.post({endpoint:"/api/v1/database/validate_parameters",body:f()(e),headers:{"Content-Type":"application/json"}}).then(()=>{t(null)}).catch(e=>{"function"==typeof e.json?e.json().then(({errors:e=[]})=>{var n;const r=a()(n=u()(e).call(e,e=>"CONNECTION_MISSING_PARAMETERS_ERROR"!==e.error_type)).call(n,(e,{extra:t,message:n})=>t.invalid?{...e,[t.invalid[0]]:n}:e,{});t(r)}):console.error(e)})},[t])]}},832:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));n(52);var r=n(31),a=n.n(r),o=n(837),i=n.n(o),s=n(76),l=n.n(s),c=n(3389),u=n.n(c),d=n(71),p=n.n(d),h=n(39),f=n.n(h),g=n(14),b=n.n(g),v=n(33),m=n.n(v),y=n(17),_=n.n(y),O=n(0),x=n.n(O),C=n(5),j=n.n(C),E=n(18),w=n(1),S=n(77),T=n(120);const M={autoFocus:j.a.bool,choices:j.a.array,clearable:j.a.bool,description:j.a.string,disabled:j.a.bool,freeForm:j.a.bool,isLoading:j.a.bool,label:j.a.string,multi:j.a.bool,isMulti:j.a.bool,allowAll:j.a.bool,name:j.a.string.isRequired,onChange:j.a.func,onFocus:j.a.func,value:j.a.oneOfType([j.a.string,j.a.number,j.a.array]),showHeader:j.a.bool,optionRenderer:j.a.func,valueRenderer:j.a.func,valueKey:j.a.string,options:j.a.array,placeholder:j.a.string,noResultsText:j.a.string,selectRef:j.a.func,filterOption:j.a.func,promptTextCreator:j.a.func,commaChoosesOption:j.a.bool,menuPortalTarget:j.a.element,menuPosition:j.a.string,menuPlacement:j.a.string,forceOverflow:j.a.bool},P={autoFocus:!1,choices:[],clearable:!0,description:null,disabled:!1,freeForm:!1,isLoading:!1,label:null,multi:!1,onChange:()=>{},onFocus:()=>{},showHeader:!0,valueKey:"value",noResultsText:Object(E.e)("No results found"),promptTextCreator:e=>`Create Option ${e}`,commaChoosesOption:!0,allowAll:!1};class R extends x.a.PureComponent{constructor(e){var t,n,r,a;super(e),this.state={options:this.getOptions(e),value:this.props.value},this.onChange=_()(t=this.onChange).call(t,this),this.createMetaSelectAllOption=_()(n=this.createMetaSelectAllOption).call(n,this),this.select=null,this.getSelectRef=_()(r=this.getSelectRef).call(r,this),this.handleKeyDownForCreate=_()(a=this.handleKeyDownForCreate).call(a,this)}UNSAFE_componentWillReceiveProps(e){if(e.choices!==this.props.choices||e.options!==this.props.options){const t=this.getOptions(e);this.setState({options:t})}}onChange(e,t){let n=this.props.multi?[]:null;if(e)if(this.props.multi)m()(e).call(e,e=>{var t,r;!0!==e.meta?n.push(e[this.props.valueKey]||e):n=b()(t=f()(r=this.getOptions(this.props)).call(r,e=>!e.meta)).call(t,e=>e[this.props.valueKey])});else{if(!0===e.meta)return;n=e[this.props.valueKey]}this.props.onChange(n,[],t)}getSelectRef(e){this.select=e,this.props.selectRef&&this.props.selectRef(e)}getOptions(e){let t=[];var n;if(e.options)t=b()(n=e.options).call(n,e=>e);else if(e.choices){var r;t=b()(r=e.choices).call(r,t=>{if(p()(t)){const[n,r]=t.length>1?t:[t[0],t[0]];return{label:r,[e.valueKey]:n}}return u()(t)?t:{label:t,[e.valueKey]:t}})}if(e.freeForm&&e.value){const n=new l.a(b()(t).call(t,t=>t[e.valueKey])),r=p()(e.value)?e.value:[e.value];m()(r).call(r,r=>{n.has(r)||t.unshift({label:r,[e.valueKey]:r})})}return!0===e.allowAll&&!0===e.multi?this.optionsIncludesSelectAll(t)||t.unshift(this.createMetaSelectAllOption()):t=f()(t).call(t,e=>!this.isMetaSelectAllOption(e)),t}handleKeyDownForCreate(e){const{key:t}=e;("Tab"===t||this.props.commaChoosesOption&&","===t)&&this.select&&this.select.onKeyDown({...e,key:"Enter"})}isMetaSelectAllOption(e){return e.meta&&!0===e.meta&&"Select all"===e.label}optionsIncludesSelectAll(e){return i()(e).call(e,e=>this.isMetaSelectAllOption(e))>=0}optionsRemaining(){const{options:e}=this.state,{value:t}=this.props;let n=p()(t)?e.length-t.length:e.length;return this.optionsIncludesSelectAll(e)&&(n-=1),n<0?0:n}createMetaSelectAllOption(){const e={label:"Select all",meta:!0};return e[this.props.valueKey]="Select all",e}render(){const{autoFocus:e,clearable:t,disabled:n,filterOption:r,isLoading:o,label:i,menuPlacement:s,name:l,noResultsText:c,onFocus:u,optionRenderer:d,promptTextCreator:h,value:f,valueKey:g,valueRenderer:b,forceOverflow:v,menuPortalTarget:m,menuPosition:y}=this.props,_=this.optionsRemaining(),O=_?Object(E.e)("%s option(s)",_):"",x=this.props.placeholder||O,C=this.props.isMulti||this.props.multi;let j;C&&_&&p()(this.state.value)&&p()(f)&&f.length&&(j=O);const M={autoFocus:e,"aria-label":i,clearable:t,disabled:n,filterOption:r,ignoreAccents:!1,isLoading:o,isMulti:C,labelKey:"label",menuPlacement:s,forceOverflow:v,menuPortalTarget:m,menuPosition:y,name:`select-${l}`,noResultsText:c,onChange:this.onChange,onFocus:u,optionRenderer:d,value:f,options:this.state.options,placeholder:x,assistiveText:j,promptTextCreator:h,selectRef:this.getSelectRef,valueKey:g,valueRenderer:b};let P;return this.props.freeForm?(P=S.c,M.onKeyDown=this.handleKeyDownForCreate):P=S.h,Object(w.d)("div",{css:e=>w.c`
          .type-label {
            margin-right: ${2*e.gridUnit}px;
          }
        `},this.props.showHeader&&Object(w.d)(T.a,this.props),C?Object(w.d)(S.f,a()({},M,{selectWrap:P})):Object(w.d)(P,M))}}R.propTypes=M,R.defaultProps=P},838:function(e,t,n){"use strict";n.r(t),n.d(t,"LOG_EVENT",(function(){return r})),n.d(t,"logEvent",(function(){return a}));const r="LOG_EVENT";function a(e,t){return n=>n({type:r,payload:{eventName:e,eventData:t}})}},839:function(e,t,n){"use strict";function r(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],d=t[c];if(!1===(a=n?n.call(r,u,d,c):void 0)||void 0===a&&u!==d)return!1}return!0}n.d(t,"a",(function(){return r}))},861:function(e,t,n){e.exports=n(3533)},866:function(e,t,n){"use strict";var r=n(17),a=n.n(r),o=n(0),i=n.n(o),s=n(232),l=n(31),c=n.n(l),u=n(5),d=n.n(u),p=n(62),h=n(65),f=n(18),g=n(759),b=n(257),v=n(314),m=n(66),y=n(183),_=n.n(y),O=n(14),x=n.n(O),C=n(41),j=n.n(C),E=n(85),w=n.n(E),S=n(39),T=n.n(S),M=n(71),P=n.n(M),R=n(87),A=n.n(R),D=n(77),k=n(20),I=n(134),L=n(48),F=n(1306),N=n(501),U=n(103),B=n(1);const W=Object(h.g)(D.e)`
  .ant-select-selector {
    margin-bottom: ${({theme:e})=>4*e.gridUnit}px;
  }

  .ant-select-selector::after {
    content: '${({labelText:e})=>e||"\\A0"}';
    display: inline-block;
    white-space: nowrap;
    color: ${({theme:e})=>e.colors.grayscale.light1};
    width: max-content;
  }
`,H={adhocFilter:d.a.instanceOf(m.c).isRequired,onChange:d.a.func.isRequired,options:d.a.arrayOf(d.a.oneOfType([N.a,d.a.shape({saved_metric_name:d.a.string.isRequired}),v.a])).isRequired,onHeightChange:d.a.func.isRequired,datasource:d.a.object,partitionColumn:d.a.string,popoverRef:d.a.object};class q extends i.a.Component{constructor(e){var t,n,r,o,i,s,l;super(e),this.onSubjectChange=a()(t=this.onSubjectChange).call(t,this),this.onOperatorChange=a()(n=this.onOperatorChange).call(n,this),this.onComparatorChange=a()(r=this.onComparatorChange).call(r,this),this.onInputComparatorChange=a()(o=this.onInputComparatorChange).call(o,this),this.isOperatorRelevant=a()(i=this.isOperatorRelevant).call(i,this),this.refreshComparatorSuggestions=a()(s=this.refreshComparatorSuggestions).call(s,this),this.clearSuggestionSearch=a()(l=this.clearSuggestionSearch).call(l,this),this.state={suggestions:[],abortActiveRequest:null,currentSuggestionSearch:""},this.selectProps={name:"select-column",showSearch:!0}}UNSAFE_componentWillMount(){this.refreshComparatorSuggestions()}componentDidUpdate(e){e.adhocFilter.subject!==this.props.adhocFilter.subject&&this.refreshComparatorSuggestions()}onSubjectChange(e){var t;const n=A()(t=this.props.options).call(t,t=>t.id===e||t.optionName===e);let r,a;n&&n.column_name?(r=n.column_name,a=m.a.WHERE):n&&(n.saved_metric_name||n.label)&&(r=n.saved_metric_name||n.label,a=m.a.HAVING);const{operator:o}=this.props.adhocFilter;this.props.onChange(this.props.adhocFilter.duplicateWith({subject:r,clause:a,operator:o&&this.isOperatorRelevant(o,r)?o:null,expressionType:m.b.SIMPLE}))}onOperatorChange(e){const t=this.props.adhocFilter.comparator;let n;var r;L.j.has(e)?n=P()(t)?t:T()(r=[t]).call(r,e=>e):n=P()(t)?t[0]:t;e&&L.c.has(e)?this.props.onChange(this.props.adhocFilter.duplicateWith({subject:this.props.adhocFilter.subject,clause:m.a.WHERE,operator:e,expressionType:m.b.SQL,datasource:this.props.datasource})):this.props.onChange(this.props.adhocFilter.duplicateWith({operator:e,comparator:n,expressionType:m.b.SIMPLE}))}onInputComparatorChange(e){this.onComparatorChange(e.target.value)}onComparatorChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({comparator:e,expressionType:m.b.SIMPLE}))}refreshComparatorSuggestions(){const{datasource:e}=this.props,t=this.props.adhocFilter.subject,n=this.props.adhocFilter.clause===m.a.HAVING;if(t&&e&&e.filter_select&&!n){this.state.abortActiveRequest&&this.state.abortActiveRequest();const n=new AbortController,{signal:r}=n;this.setState({abortActiveRequest:n.abort,loading:!0}),I.a.get({signal:r,endpoint:`/superset/filter/${e.type}/${e.id}/${t}/`}).then(({json:e})=>{this.setState(()=>({suggestions:e,abortActiveRequest:null,loading:!1}))}).catch(()=>{this.setState(()=>({suggestions:[],abortActiveRequest:null,loading:!1}))})}}isOperatorRelevant(e,t){var n;const r=null==(n=this.props.datasource.columns)?void 0:A()(n).call(n,e=>e.column_name===t),a=!!r&&("BOOL"===r.type||"BOOLEAN"===r.type),o=!!r&&"INT"===r.type,i=!!r&&!!r.expression;if(e&&L.c.has(e)){const{partitionColumn:e}=this.props;return e&&t&&t===e}return e===L.k["IS TRUE"]||e===L.k["IS FALSE"]?a||o||i:a?e===L.k["IS NULL"]||e===L.k["IS NOT NULL"]:!("druid"===this.props.datasource.type&&w()(L.m).call(L.m,e)>=0||"table"===this.props.datasource.type&&w()(L.f).call(L.f,e)>=0||this.props.adhocFilter.clause===m.a.HAVING&&-1===w()(L.i).call(L.i,e))}focusComparator(e,t){e&&t&&e.focus()}optionsRemaining(){var e;const{suggestions:t}=this.state,{comparator:n}=this.props.adhocFilter,r=P()(n)?T()(n).call(n,e=>j()(t).call(t,e)).length:0;return null!=(e=(null==t?void 0:t.length)-r)?e:0}createSuggestionsPlaceholder(){const e=this.optionsRemaining(),t=Object(f.e)("%s option(s)",e);return e?t:""}renderSubjectOptionLabel(e){return Object(B.d)(F.a,{option:e})}clearSuggestionSearch(){this.setState({currentSuggestionSearch:""})}render(){var e,t,n;const{adhocFilter:r,options:a,datasource:o}=this.props,{currentSuggestionSearch:s}=this.state;let l=a;const{subject:u,operator:d,comparator:p}=r,h={value:null!=u?u:void 0,onChange:this.onSubjectChange,notFoundContent:Object(f.e)("No such column found. To filter on a metric, try the Custom SQL tab."),filterOption:(e,t)=>{var n;return w()(n=t.filterBy.toLowerCase()).call(n,e.toLowerCase())>=0},autoFocus:!u};"druid"===o.type?h.placeholder=Object(f.e)("%s column(s) and metric(s)",l.length):(h.placeholder=r.clause===m.a.WHERE?Object(f.e)("%s column(s)",l.length):Object(f.e)("To filter on a metric, use Custom SQL tab."),l=T()(a).call(a,e=>e.column_name));const g={placeholder:Object(f.e)("%s operator(s)",T()(L.l).call(L.l,e=>this.isOperatorRelevant(e,u)).length),value:d,onChange:this.onOperatorChange,filterOption:(e,t)=>{var n;return w()(n=t.value.toLowerCase()).call(n,e.toLowerCase())>=0},autoFocus:!!h.value&&!d},b=!!h.value&&!!g.value,v={allowClear:!0,showSearch:!0,mode:L.j.has(d)&&"tags",tokenSeparators:[",","\n","\t",";"],loading:this.state.loading,value:p,onChange:this.onComparatorChange,notFoundContent:Object(f.e)("Type a value here"),disabled:j()(L.e).call(L.e,d),placeholder:this.createSuggestionsPlaceholder(),labelText:(null==p?void 0:p.length)>0&&this.createSuggestionsPlaceholder(),autoFocus:b},y="NOT IN"===d?U.a.StopOutlined:U.a.CheckOutlined;return Object(B.d)(i.a.Fragment,null,Object(B.d)(D.e,c()({css:e=>({marginTop:4*e.gridUnit,marginBottom:4*e.gridUnit})},this.selectProps,h,{name:"filter-column",getPopupContainer:e=>e.parentNode}),x()(l).call(l,e=>Object(B.d)(D.e.Option,{value:e.id||e.optionName,filterBy:e.saved_metric_name||e.column_name||e.label,key:e.id||e.optionName},this.renderSubjectOptionLabel(e)))),Object(B.d)(D.e,c()({css:e=>({marginBottom:4*e.gridUnit})},this.selectProps,g,{getPopupContainer:e=>e.parentNode,name:"filter-operator"}),x()(e=T()(L.l).call(L.l,e=>this.isOperatorRelevant(e,u))).call(e,e=>Object(B.d)(D.e.Option,{value:e,key:e},function(e){return e===L.k["=="]?"equals":e===L.k["!="]?"not equal to":e===L.k.LIKE?"LIKE":e===L.k.ILIKE?"LIKE (case insensitive)":e===L.k["LATEST PARTITION"]?"use latest_partition template":e}(e)))),L.j.has(d)||this.state.suggestions.length>0?Object(B.d)(W,c()({name:"filter-value"},v,{getPopupContainer:e=>e.parentNode,onSearch:e=>this.setState({currentSuggestionSearch:e}),onSelect:this.clearSuggestionSearch,onBlur:this.clearSuggestionSearch,menuItemSelectedIcon:Object(B.d)(y,{iconSize:"m"})}),x()(t=this.state.suggestions).call(t,e=>Object(B.d)(D.e.Option,{value:e,key:e},e)),s&&!_()(n=this.state.suggestions).call(n,e=>e===s)&&Object(B.d)(D.e.Option,{value:s},`${Object(f.e)('Create "%s"',s)}`)):Object(B.d)(k.l,{name:"filter-value",ref:e=>this.focusComparator(e,b),onChange:this.onInputComparatorChange,value:p,placeholder:Object(f.e)("Filter value (case sensitive)"),disabled:j()(L.e).call(L.e,d)}))}}q.propTypes=H,q.defaultProps={datasource:{}};var z=n(50),$=n.n(z),G=n(94),V=n.n(G),K=n(499),Y=n(824);const Q={adhocFilter:d.a.instanceOf(m.c).isRequired,onChange:d.a.func.isRequired,options:d.a.arrayOf(d.a.oneOfType([N.a,d.a.shape({saved_metric_name:d.a.string.isRequired}),v.a])).isRequired,height:d.a.number.isRequired,activeKey:d.a.string.isRequired};class X extends i.a.Component{constructor(e){var t,n,r;super(e),this.onSqlExpressionChange=a()(t=this.onSqlExpressionChange).call(t,this),this.onSqlExpressionClauseChange=a()(n=this.onSqlExpressionClauseChange).call(n,this),this.handleAceEditorRef=a()(r=this.handleAceEditorRef).call(r,this),this.selectProps={name:"select-column"}}componentDidUpdate(){this.aceEditorRef&&this.aceEditorRef.editor.resize()}onSqlExpressionClauseChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({clause:e,expressionType:m.b.SQL}))}onSqlExpressionChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({sqlExpression:e,expressionType:m.b.SQL}))}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}render(){var e,t;const{adhocFilter:n,height:r,options:a}=this.props,o={placeholder:Object(f.e)("choose WHERE or HAVING..."),value:n.clause,onChange:this.onSqlExpressionClauseChange},i=V()(Y.a).call(Y.a,T()(e=x()(a).call(a,e=>e.column_name?{name:e.column_name,value:e.column_name,score:50,meta:"option"}:null)).call(e,Boolean));return Object(B.d)("span",null,Object(B.d)("div",{className:"filter-edit-clause-section"},Object(B.d)(D.e,c()({},this.selectProps,o,{className:"filter-edit-clause-dropdown",getPopupContainer:e=>e.parentNode}),x()(t=$()(m.a)).call(t,e=>Object(B.d)(D.e.Option,{value:e,key:e},e))),Object(B.d)("span",{className:"filter-edit-clause-info"},Object(B.d)("strong",null,"WHERE")," ",Object(f.e)("Filters by columns"),Object(B.d)("br",null),Object(B.d)("strong",null,"HAVING")," ",Object(f.e)("Filters by metrics"))),Object(B.d)("div",{css:e=>({marginTop:4*e.gridUnit})},Object(B.d)(K.f,{ref:this.handleAceEditorRef,keywords:i,height:`${r-130}px`,onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:n.sqlExpression||n.translateToSql(),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"filter-sql-editor",wrapEnabled:!0})))}}X.propTypes=Q;const J={adhocFilter:d.a.instanceOf(m.c).isRequired,onChange:d.a.func.isRequired,onClose:d.a.func.isRequired,onResize:d.a.func.isRequired,options:d.a.arrayOf(d.a.oneOfType([N.a,d.a.shape({saved_metric_name:d.a.string.isRequired}),v.a])).isRequired,datasource:d.a.object,partitionColumn:d.a.string,theme:d.a.object},Z=h.g.i`
  margin-left: ${({theme:e})=>2*e.gridUnit}px;
`,ee=h.g.div`
  .adhoc-filter-edit-tabs > .nav-tabs {
    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;

    & > li > a {
      padding: ${({theme:e})=>e.gridUnit}px;
    }
  }

  #filter-edit-popover {
    max-width: none;
  }

  .filter-edit-clause-dropdown {
    width: ${({theme:e})=>30*e.gridUnit}px;
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }

  .filter-edit-clause-info {
    font-size: ${({theme:e})=>e.typography.sizes.xs}px;
    padding-left: ${({theme:e})=>e.gridUnit}px;
  }

  .filter-edit-clause-section {
    display: inline-flex;
  }

  .adhoc-filter-simple-column-dropdown {
    margin-top: ${({theme:e})=>5*e.gridUnit}px;
  }
`;class te extends i.a.Component{constructor(e){var t,n,r,o,s,l,c,u,d;super(e),this.onSave=a()(t=this.onSave).call(t,this),this.onDragDown=a()(n=this.onDragDown).call(n,this),this.onMouseMove=a()(r=this.onMouseMove).call(r,this),this.onMouseUp=a()(o=this.onMouseUp).call(o,this),this.onAdhocFilterChange=a()(s=this.onAdhocFilterChange).call(s,this),this.adjustHeight=a()(l=this.adjustHeight).call(l,this),this.onTabChange=a()(c=this.onTabChange).call(c,this),this.state={adhocFilter:this.props.adhocFilter,width:320,height:240,activeKey:(null==(u=this.props)?void 0:null==(d=u.adhocFilter)?void 0:d.expressionType)||"SIMPLE"},this.popoverContentRef=i.a.createRef()}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}onAdhocFilterChange(e){this.setState({adhocFilter:e})}onSave(){this.props.onChange(this.state.adhocFilter),this.props.onClose()}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),320),height:Math.max(this.dragStartHeight+2*(e.clientY-this.dragStartY),240)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}onTabChange(e){this.setState({activeKey:e})}adjustHeight(e){this.setState(t=>({height:t.height+e}))}render(){const{adhocFilter:e,options:t,onChange:n,onClose:r,onResize:a,datasource:o,partitionColumn:i,theme:s,...l}=this.props,{adhocFilter:u}=this.state,d=u.isValid(),h=!u.equals(e);return Object(B.d)(ee,c()({id:"filter-edit-popover"},l,{ref:this.popoverContentRef}),Object(B.d)(b.c,{id:"adhoc-filter-edit-tabs",defaultActiveKey:u.expressionType,className:"adhoc-filter-edit-tabs",style:{minHeight:this.state.height,width:this.state.width},allowOverflow:!0,onChange:this.onTabChange},Object(B.d)(b.c.TabPane,{className:"adhoc-filter-edit-tab",key:m.b.SIMPLE,tab:Object(f.e)("Simple")},Object(B.d)(g.a,null,Object(B.d)(q,{adhocFilter:this.state.adhocFilter,onChange:this.onAdhocFilterChange,options:t,datasource:o,onHeightChange:this.adjustHeight,partitionColumn:i,popoverRef:this.popoverContentRef.current}))),Object(B.d)(b.c.TabPane,{className:"adhoc-filter-edit-tab",key:m.b.SQL,tab:Object(f.e)("Custom SQL")},Object(B.d)(g.a,null,this.props.datasource&&"druid"===this.props.datasource.type?Object(B.d)("div",{className:"custom-sql-disabled-message"},"Custom SQL Filters are not available on druid datasources"):Object(B.d)(X,{adhocFilter:this.state.adhocFilter,onChange:this.onAdhocFilterChange,options:this.props.options,height:this.state.height,activeKey:this.state.activeKey})))),Object(B.d)("div",null,Object(B.d)(p.a,{buttonSize:"small",onClick:this.props.onClose,cta:!0},Object(f.e)("Close")),Object(B.d)(p.a,{disabled:!d,buttonStyle:h&&d?"primary":"default",buttonSize:"small",className:"m-r-5",onClick:this.onSave,cta:!0},Object(f.e)("Save")),Object(B.d)(Z,{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})))}}te.propTypes=J;var ne=n(1305);class re extends i.a.PureComponent{constructor(e){var t,n,r;super(e),this.onPopoverResize=a()(t=this.onPopoverResize).call(t,this),this.closePopover=a()(n=this.closePopover).call(n,this),this.togglePopover=a()(r=this.togglePopover).call(r,this),this.state={popoverVisible:!1}}onPopoverResize(){this.forceUpdate()}closePopover(){this.togglePopover(!1)}togglePopover(e){this.setState({popoverVisible:e})}render(){const{adhocFilter:e,isControlledComponent:t}=this.props,{visible:n,togglePopover:r,closePopover:a}=t?{visible:this.props.visible,togglePopover:this.props.togglePopover,closePopover:this.props.closePopover}:{visible:this.state.popoverVisible,togglePopover:this.togglePopover,closePopover:this.closePopover},o=Object(B.d)(ne.a,null,Object(B.d)(te,{adhocFilter:e,options:this.props.options,datasource:this.props.datasource,partitionColumn:this.props.partitionColumn,onResize:this.onPopoverResize,onClose:a,onChange:this.props.onFilterEdit}));return Object(B.d)(s.a,{placement:"right",trigger:"click",content:o,defaultVisible:n,visible:n,onVisibleChange:r,destroyTooltipOnHide:this.props.createNew},this.props.children)}}t.a=re},867:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n(438),a=n.n(r),o=n(133),i=n.n(o),s=n(14),l=n.n(s),c=(n(430),n(39)),u=n.n(c),d=n(85),p=n.n(d),h=(n(0),n(492)),f=n(977),g=n(18),b=n(1001),v=n(936),m=n(386),y=n(48),_=n(218),O=n(1);const x=Object(h.a)(),C=Object(f.a)(),j={verbose_name:"Time",column_name:"__timestamp",description:Object(g.e)("A reference to the [Time] configuration, taking granularity into account")},E={type:"SelectControl",multi:!0,freeForm:!0,label:Object(g.e)("Group by"),default:[],includeTime:!1,description:Object(g.e)("One or many controls to group by"),optionRenderer:e=>Object(O.d)(_.a,{column:e,showType:!0}),valueRenderer:e=>Object(O.d)(_.a,{column:e}),valueKey:"column_name",allowAll:!0,filterOption:({data:e},t)=>{var n,r;return e.column_name&&p()(n=e.column_name.toLowerCase()).call(n,t.toLowerCase())>=0||e.verbose_name&&p()(r=e.verbose_name.toLowerCase()).call(r,t.toLowerCase())>=0},promptTextCreator:e=>e,mapStateToProps:(e,t)=>{const n={};var r;e.datasource&&(n.options=u()(r=e.datasource.columns).call(r,e=>e.groupby),t&&t.includeTime&&n.options.push(j));return n},commaChoosesOption:!1},w={type:"MetricsControl",multi:!0,label:Object(g.e)("Metrics"),validators:[b.a],mapStateToProps:e=>{const{datasource:t}=e;return{columns:t?t.columns:[],savedMetrics:t?t.metrics:[],datasourceType:t&&t.type}},description:Object(g.e)("One or many metrics to display")},S={...w,multi:!1,label:Object(g.e)("Metric"),description:Object(g.e)("Metric")};const T={metrics:w,metric:S,datasource:{type:"DatasourceControl",label:Object(g.e)("Dataset"),default:null,description:null,mapStateToProps:({datasource:e})=>({datasource:e,isEditable:!!e})},viz_type:{type:"VizTypeControl",label:Object(g.e)("Visualization type"),default:"table",description:Object(g.e)("The type of visualization to display")},color_picker:{label:Object(g.e)("Fixed color"),description:Object(g.e)("Use this to define a static color for all circles"),type:"ColorPickerControl",default:{r:0,g:122,b:135,a:1},renderTrigger:!0},metric_2:{...S,label:Object(g.e)("Right axis metric"),clearable:!0,description:Object(g.e)("Choose a metric for right axis")},linear_color_scheme:{type:"ColorSchemeControl",label:Object(g.e)("Linear color scheme"),choices:()=>{var e;return l()(e=i()(C).call(C)).call(e,e=>[e.id,e.label])},default:C.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>C.getMap(),isLinear:!0},secondary_metric:{...S,label:Object(g.e)("Color metric"),default:null,validators:[],description:Object(g.e)("A metric to use for color")},groupby:E,columns:{...E,label:Object(g.e)("Columns"),description:Object(g.e)("One or many controls to pivot as columns")},druid_time_origin:{type:"SelectControl",freeForm:!0,label:y.n.druid_time_origin,choices:[["","default"],["now","now"]],default:null,description:Object(g.e)("Defines the origin where time buckets start, accepts natural dates as in `now`, `sunday` or `1970-01-01`")},granularity:{type:"SelectControl",freeForm:!0,label:y.n.granularity,default:"one day",choices:[[null,"all"],["PT5S","5 seconds"],["PT30S","30 seconds"],["PT1M","1 minute"],["PT5M","5 minutes"],["PT30M","30 minutes"],["PT1H","1 hour"],["PT6H","6 hour"],["P1D","1 day"],["P7D","7 days"],["P1W","week"],["week_starting_sunday","week starting Sunday"],["week_ending_saturday","week ending Saturday"],["P1M","month"],["P3M","quarter"],["P1Y","year"]],description:Object(g.e)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`, `1 day` or `56 weeks`")},granularity_sqla:{type:"SelectControl",label:y.n.granularity_sqla,description:Object(g.e)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),clearable:!1,optionRenderer:e=>Object(O.d)(_.a,{column:e,showType:!0}),valueRenderer:e=>Object(O.d)(_.a,{column:e}),valueKey:"column_name",mapStateToProps:e=>{const t={};return e.datasource&&(t.choices=e.datasource.granularity_sqla,t.default=null,e.datasource.main_dttm_col?t.default=e.datasource.main_dttm_col:t.choices&&t.choices.length>0&&(t.default=t.choices[0].column_name)),t}},time_grain_sqla:{type:"SelectControl",label:y.n.time_grain_sqla,default:"P1D",description:Object(g.e)("The time granularity for the visualization. This applies a date transformation to alter your time column and defines a new time granularity. The options here are defined on a per database engine basis in the Superset source code."),mapStateToProps:e=>({choices:e.datasource?e.datasource.time_grain_sqla:null})},time_range:{type:"DateFilterControl",freeForm:!0,label:y.n.time_range,default:Object(g.e)("No filter"),description:Object(g.e)('The time range for the visualization. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.'),mapStateToProps:({form_data:e})=>({endpoints:null==e?void 0:e.time_range_endpoints})},row_limit:{type:"SelectControl",freeForm:!0,label:Object(g.e)("Row limit"),validators:[v.a],default:1e4,choices:Object(m.a)([10,50,100,250,500,1e3,5e3,1e4,5e4])},limit:{type:"SelectControl",freeForm:!0,label:Object(g.e)("Series limit"),validators:[v.a],choices:Object(m.a)([0,5,10,25,50,100,500]),description:Object(g.e)("Limits the number of time series that get displayed. A sub query (or an extra phase where sub queries are not supported) is applied to limit the number of time series that get fetched and displayed. This feature is useful when grouping by high cardinality dimension(s).")},timeseries_limit_metric:{type:"MetricsControl",label:Object(g.e)("Sort by"),default:null,clearable:!0,description:Object(g.e)("Metric used to define the top series"),mapStateToProps:e=>({columns:e.datasource?e.datasource.columns:[],savedMetrics:e.datasource?e.datasource.metrics:[],datasourceType:e.datasource&&e.datasource.type})},series:{...E,label:Object(g.e)("Series"),multi:!1,default:null,description:Object(g.e)("Defines the grouping of entities. Each series is shown as a specific color on the chart and has a legend toggle")},entity:{...E,label:Object(g.e)("Entity"),default:null,multi:!1,validators:[b.a],description:Object(g.e)("This defines the element to be plotted on the chart")},x:{...S,label:Object(g.e)("X Axis"),description:Object(g.e)("Metric assigned to the [X] axis"),default:null},y:{...S,label:Object(g.e)("Y Axis"),default:null,description:Object(g.e)("Metric assigned to the [Y] axis")},size:{...S,label:Object(g.e)("Bubble size"),default:null},y_axis_format:{type:"SelectControl",freeForm:!0,label:Object(g.e)("Y Axis Format"),renderTrigger:!0,default:"SMART_NUMBER",choices:[["SMART_NUMBER","Adaptative formating"],["~g","Original value"],[",d",",d (12345.432 => 12,345)"],[".1s",".1s (12345.432 => 10k)"],[".3s",".3s (12345.432 => 12.3k)"],[",.1%",",.1% (12345.432 => 1,234,543.2%)"],[".3%",".3% (12345.432 => 1234543.200%)"],[".4r",".4r (12345.432 => 12350)"],[",.3f",",.3f (12345.432 => 12,345.432)"],["+,","+, (12345.432 => +12,345.432)"],["$,.2f","$,.2f (12345.432 => $12,345.43)"],["DURATION","Duration in ms (66000 => 1m 6s)"],["DURATION_SUB","Duration in ms (100.40008 => 100ms 400µs 80ns)"]],description:"D3 format syntax: https://github.com/d3/d3-format",mapStateToProps:e=>{const t=e.controls&&e.controls.comparison_type&&"percentage"===e.controls.comparison_type.value;return{warning:t?Object(g.e)('When `Calculation type` is set to "Percentage change", the Y Axis Format is forced to `.1%`'):null,disabled:t}}},adhoc_filters:{type:"AdhocFilterControl",label:Object(g.e)("Filters"),default:null,description:"",mapStateToProps:e=>{var t;return{columns:e.datasource?u()(t=e.datasource.columns).call(t,e=>e.filterable):[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource}}},color_scheme:{type:"ColorSchemeControl",label:Object(g.e)("Color scheme"),default:x.getDefaultKey(),renderTrigger:!0,choices:()=>{var e;return l()(e=a()(x).call(x)).call(e,e=>[e,e])},description:Object(g.e)("The color scheme for rendering chart"),schemes:()=>x.getMap()},label_colors:{type:"ColorMapControl",label:Object(g.e)("Color map"),default:{},renderTrigger:!0,mapStateToProps:e=>({colorNamespace:e.form_data.color_namespace,colorScheme:e.form_data.color_scheme})}}},868:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=(n(0),n(65)),o=n(68),i=n(74);function s({title:e,isSelected:t,children:n,onSelect:s,info:l}){const c=Object(a.i)();return Object(r.d)("div",{css:Object(r.c)({paddingBottom:2*c.gridUnit,opacity:t?1:c.opacity.mediumHeavy},"","")},Object(r.d)("div",{role:"button",tabIndex:0,onClick:s,css:Object(r.c)({display:"flex",alignItems:"center",cursor:s?"pointer":"default"},"","")},Object(r.d)("strong",null,e),l&&Object(r.d)(o.a,{title:l,css:Object(r.c)({marginLeft:c.gridUnit},"","")},Object(r.d)(i.a,{role:"img",name:"info-solid",width:14,height:14,color:c.colors.grayscale.light1})),Object(r.d)(i.a,{role:"img",name:"check",color:t?c.colors.primary.base:c.colors.grayscale.base})),Object(r.d)("div",{css:Object(r.c)({marginLeft:c.gridUnit,marginTop:c.gridUnit},"","")},n))}},869:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(144),a=n.n(r),o=n(18),i=n(101),s=n(81);const l={[i.a]:{width:s.m,height:50},[i.b]:{width:s.m,background:s.b},[i.f]:null,[i.g]:{text:"New header",headerSize:s.s,background:s.b},[i.h]:{width:s.m,height:50},[i.j]:{background:s.b},[i.k]:null,[i.l]:{text:"",defaultText:Object(o.e)("Tab title"),placeholder:Object(o.e)("Tab title")}};function c(e){return`${e}-${a.a.generate()}`}function u(e,t,n=[]){return{type:e,id:c(e),children:[],parents:n,meta:{...l[e],...t}}}},870:function(e,t){e.exports=function(e){return void 0===e}},871:function(e,t,n){var r=n(413),a=n(1409),o=n(1483);e.exports=function(e,t){return o(e,a(r(t)))}},879:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n(88),a=n.n(r),o=n(193),i=n.n(o),s=n(1411),l=n.n(s),c=n(134),u=n(102);function d({name:e,type:t}){const n=new l.a(window.location.search).get(e);switch(t){case"number":return n?"true"===n?1:"false"===n?0:i()(Number(n))?null:Number(n):null;case"object":return n?JSON.parse(n):null;case"boolean":return n?"false"!==n&&"0"!==n:null;default:return n}}function p(e){return c.a.post({endpoint:"/r/shortner/",postPayload:{data:`/${e}`},parseMethod:"text",stringify:!1}).then(({text:e})=>e).catch(e=>Object(u.a)(e).then(({error:e,statusText:t})=>a.a.reject(e||t)))}},926:function(e,t,n){e.exports=n(3380)},942:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(185),a=n.n(r);function o({chartId:e,column:t}){return`${e}_${t}`}const i=/^([0-9]+)_(.*)$/;function s(e){const t=i.exec(e);if(!t)throw new Error("Cannot parse invalid filter key");return{chartId:a()(t[1],10),column:t[2]}}},976:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n(75),o=n(1251);function i(){var e=Object(r.useContext)(o.a).dragDropManager;return Object(a.a)(null!=e,"Expected drag drop context"),e}},978:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return m}));var r=n(82),a=n.n(r),o=n(14),i=n.n(o),s=n(322),l=n(557),c=n(1244);const u="SET_FILTER_CONFIG_COMPLETE",d="SET_FILTER_SETS_CONFIG_COMPLETE",p=e=>async(t,n)=>{var r;t({type:"SET_FILTER_CONFIG_BEGIN",filterConfig:e});const{id:o,metadata:d}=n().dashboardInfo,p=null==(r=n().nativeFilters)?void 0:r.filters,h=Object(s.a)({method:"PUT",endpoint:`/api/v1/dashboard/${o}`}),f=i()(e).call(e,e=>{const t=p[e.id];return t?{...t,...e}:e});try{const e=await h({json_metadata:a()({...d,native_filter_configuration:f})});t(Object(c.b)({metadata:JSON.parse(e.result.json_metadata)})),t({type:u,filterConfig:f}),t(Object(l.d)(f,p))}catch(e){t({type:"SET_FILTER_CONFIG_FAIL",filterConfig:f}),t({type:l.b,filterConfig:f})}},h=e=>async(t,n)=>{t({type:"SET_FILTER_SETS_CONFIG_BEGIN",filterSetsConfig:e});const{id:r,metadata:o}=n().dashboardInfo,i=Object(s.a)({method:"PUT",endpoint:`/api/v1/dashboard/${r}`});try{const n=await i({json_metadata:a()({...o,filter_sets_configuration:e})}),r=JSON.parse(n.result.json_metadata);t(Object(c.b)({metadata:r})),t({type:d,filterSetsConfig:null==r?void 0:r.filter_sets_configuration})}catch(n){t({type:"SET_FILTER_SETS_CONFIG_FAIL",filterSetsConfig:e})}},f="SAVE_FILTER_SETS";const g="SET_FOCUSED_NATIVE_FILTER",b="UNSET_FOCUSED_NATIVE_FILTER";function v(e){return{type:g,id:e}}function m(){return{type:b}}},979:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return E}));n(52);var r=n(150),a=n.n(r),o=n(41),i=n.n(o),s=n(69),l=n.n(s),c=n(94),u=n.n(c),d=n(50),p=n.n(d),h=n(73),f=n.n(h),g=n(401),b=n(317),v=n(1388),m=n(81),y=n(1393),_=n(584),O=n(942);const x={scope:[m.h],immune:[]},C={chartId:null,componentId:null,filterName:null,datasourceId:null,directPathToFilter:[],isDateFilter:!1,isInstantFilter:!0,columns:{},labels:{},scopes:{}},j=[g.a,g.c,g.b];function E(e={},t){const n={[g.a](){var e,n,r,a;const{chartId:o,component:s,form_data:c}=t,{columns:d,labels:h}=Object(y.a)(c),g=f()(e=p()(d)).call(e,(e,t)=>({...e,[t]:x}),{}),b=s?u()(n=l()(r=s.parents||[]).call(r)).call(n,s.id):[];return{...C,chartId:o,componentId:s.id,datasourceId:c.datasource,filterName:s.meta.sliceName,directPathToFilter:b,columns:d,labels:h,scopes:g,isInstantFilter:!!c.instant_filtering,isDateFilter:i()(a=p()(d)).call(a,v.TIME_RANGE)}},[g.b](e){var n;const{newSelectedValues:r,merge:a}=t,o=f()(n=p()(r)).call(n,(e,t)=>a&&t in e?{...e,[t]:[...e[t],...r[t]]}:{...e,[t]:r[t]},{...e.columns});return{...e,columns:o}},[g.e](e){const{path:n}=t;return{...e,directPathToFilter:n}}};if(t.type===g.f)return Object(_.a)({dashboardFilters:e,components:t.components}),e;if(t.type===g.d){var r;const n=t.scopes,o=f()(r=a()(n)).call(r,(e,t)=>{const[n,{scope:r,immune:a}]=t,{chartId:o,column:i}=Object(O.a)(n),s={...e[o].scopes,[i]:{scope:r,immune:a}};return{...e,[o]:{...e[o],scopes:s}}},e);return Object(_.a)({dashboardFilters:o}),o}if(t.type===g.c){const{chartId:n}=t,{[n]:r,...a}=e;return Object(_.a)({dashboardFilters:a}),a}if(t.type===b.a)return t.data.dashboardFilters;if(t.type in n){const r={...e,[t.chartId]:n[t.type](e[t.chartId])};return i()(j).call(j,t.type)&&Object(_.a)({dashboardFilters:r}),r}return e}},982:function(e,t,n){var r=n(831),a=n(497),o=n(406),i=n(117),s=n(269),l=n(387),c=n(417),u=n(418),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||o(e)))return!e.length;var t=a(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}}}]);