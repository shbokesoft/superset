(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{5139:function(n,t,e){var r=e(5188).dispatch,i=Math.PI/180;function o(n){return n.text}function a(){return"serif"}function u(){return"normal"}function c(n){return Math.sqrt(n.value)}function s(){return 30*(~~(6*Math.random())-3)}function l(){return 1}function f(n,t,e,r){if(!t.sprite){var o=n.context,a=n.ratio;o.clearRect(0,0,2048/a,2048/a);var u=0,c=0,s=0,l=e.length;for(--r;++r<l;){t=e[r],o.save(),o.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;var f=o.measureText(t.text+"m").width*a,h=t.size<<1;if(t.rotate){var d=Math.sin(t.rotate*i),g=Math.cos(t.rotate*i),p=f*g,m=f*d,y=h*g,v=h*d;f=Math.max(Math.abs(p+v),Math.abs(p-v))+31>>5<<5,h=~~Math.max(Math.abs(m+y),Math.abs(m-y))}else f=f+31>>5<<5;if(h>s&&(s=h),u+f>=2048&&(u=0,c+=s,s=0),c+h>=2048)break;o.translate((u+(f>>1))/a,(c+(h>>1))/a),t.rotate&&o.rotate(t.rotate*i),o.fillText(t.text,0,0),t.padding&&(o.lineWidth=2*t.padding,o.strokeText(t.text,0,0)),o.restore(),t.width=f,t.height=h,t.xoff=u,t.yoff=c,t.x1=f>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,u+=f}for(var w=o.getImageData(0,0,2048/a,2048/a).data,b=[];--r>=0;)if((t=e[r]).hasText){for(var M=(f=t.width)>>5,x=(h=t.y1-t.y0,0);x<h*M;x++)b[x]=0;if(null==(u=t.xoff))return;c=t.yoff;for(var T=0,D=-1,C=0;C<h;C++){for(x=0;x<f;x++){var F=M*C+(x>>5),O=w[2048*(c+C)+(u+x)<<2]?1<<31-x%32:0;b[F]|=O,T|=O}T?D=C:(t.y0++,h--,C--,c++)}t.y1=t.y0+D,t.sprite=b.slice(0,(t.y1-t.y0)*M)}}}function h(n,t,e){e>>=5;for(var r,i=n.sprite,o=n.width>>5,a=n.x-(o<<4),u=127&a,c=32-u,s=n.y1-n.y0,l=(n.y+n.y0)*e+(a>>5),f=0;f<s;f++){r=0;for(var h=0;h<=o;h++)if((r<<c|(h<o?(r=i[f*o+h])>>>u:0))&t[l+h])return!0;l+=e}return!1}function d(n,t){var e=n[0],r=n[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function g(n){var t=n[0]/n[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function p(){return document.createElement("canvas")}function m(n){return"function"==typeof n?n:function(){return n}}n.exports=function(){var n=[256,256],t=o,e=a,i=c,v=u,w=u,b=s,M=l,x=g,T=[],D=1/0,C=r("word","end"),F=null,O=Math.random,N={},k=p;function S(t,e,r){n[0],n[1];for(var i,o,a,u,c,s=e.x,l=e.y,f=Math.sqrt(n[0]*n[0]+n[1]*n[1]),d=x(n),g=O()<.5?1:-1,p=-g;(i=d(p+=g))&&(o=~~i[0],a=~~i[1],!(Math.min(Math.abs(o),Math.abs(a))>=f));)if(e.x=s+o,e.y=l+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>n[0]||e.y+e.y1>n[1]||r&&h(e,t,n[0])||r&&(c=r,!((u=e).x+u.x1>c[0].x&&u.x+u.x0<c[1].x&&u.y+u.y1>c[0].y&&u.y+u.y0<c[1].y)))){for(var m,y=e.sprite,v=e.width>>5,w=n[0]>>5,b=e.x-(v<<4),M=127&b,T=32-M,D=e.y1-e.y0,C=(e.y+e.y0)*w+(b>>5),F=0;F<D;F++){m=0;for(var N=0;N<=v;N++)t[C+N]|=m<<T|(N<v?(m=y[F*v+N])>>>M:0);C+=w}return delete e.sprite,!0}return!1}return N.canvas=function(n){return arguments.length?(k=m(n),N):k},N.start=function(){var r=function(n){n.width=n.height=1;var t=Math.sqrt(n.getContext("2d").getImageData(0,0,1,1).data.length>>2);n.width=2048/t,n.height=2048/t;var e=n.getContext("2d");return e.fillStyle=e.strokeStyle="red",e.textAlign="center",{context:e,ratio:t}}(k()),o=function(n){var t=[],e=-1;for(;++e<n;)t[e]=0;return t}((n[0]>>5)*n[1]),a=null,u=T.length,c=-1,s=[],l=T.map((function(n,r){return n.text=t.call(this,n,r),n.font=e.call(this,n,r),n.style=v.call(this,n,r),n.weight=w.call(this,n,r),n.rotate=b.call(this,n,r),n.size=~~i.call(this,n,r),n.padding=M.call(this,n,r),n})).sort((function(n,t){return t.size-n.size}));return F&&clearInterval(F),F=setInterval(h,0),h(),N;function h(){for(var t=Date.now();Date.now()-t<D&&++c<u&&F;){var e=l[c];e.x=n[0]*(O()+.5)>>1,e.y=n[1]*(O()+.5)>>1,f(r,e,l,c),e.hasText&&S(o,e,a)&&(s.push(e),C.call("word",N,e),a?d(a,e):a=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=n[0]>>1,e.y-=n[1]>>1)}c>=u&&(N.stop(),C.call("end",N,s,a))}},N.stop=function(){return F&&(clearInterval(F),F=null),N},N.timeInterval=function(n){return arguments.length?(D=null==n?1/0:n,N):D},N.words=function(n){return arguments.length?(T=n,N):T},N.size=function(t){return arguments.length?(n=[+t[0],+t[1]],N):n},N.font=function(n){return arguments.length?(e=m(n),N):e},N.fontStyle=function(n){return arguments.length?(v=m(n),N):v},N.fontWeight=function(n){return arguments.length?(w=m(n),N):w},N.rotate=function(n){return arguments.length?(b=m(n),N):b},N.text=function(n){return arguments.length?(t=m(n),N):t},N.spiral=function(n){return arguments.length?(x=y[n]||n,N):x},N.fontSize=function(n){return arguments.length?(i=m(n),N):i},N.padding=function(n){return arguments.length?(M=m(n),N):M},N.random=function(n){return arguments.length?(O=n,N):O},N.on=function(){var n=C.on.apply(C,arguments);return n===C?N:n},N};var y={archimedean:g,rectangular:function(n){var t=4*n[0]/n[1],e=0,r=0;return function(n){var i=n<0?-1:1;switch(Math.sqrt(1+4*i*n)-i&3){case 0:e+=t;break;case 1:r+=4;break;case 2:e-=t;break;default:r-=4}return[e,r]}}}},5188:function(n,t,e){"use strict";e.r(t),e.d(t,"dispatch",(function(){return s}));var r={value:function(){}};function i(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new o(r)}function o(n){this._=n}function a(n,t){return n.trim().split(/^|\s+/).map((function(n){var e="",r=n.indexOf(".");if(r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}}))}function u(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}function c(n,t,e){for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n[i]=r,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=e&&n.push({name:t,value:e}),n}o.prototype=i.prototype={constructor:o,on:function(n,t){var e,r=this._,i=a(n+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(e=(n=i[o]).type)r[e]=c(r[e],n.name,t);else if(null==t)for(e in r)r[e]=c(r[e],n.name,null);return this}for(;++o<s;)if((e=(n=i[o]).type)&&(e=u(r[e],n.name)))return e},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new o(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=0,e=(r=this._[n]).length;o<e;++o)r[o].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)}};var s=i},5244:function(n,t,e){"use strict";e.r(t),e.d(t,"ROTATION",(function(){return lr}));var r=e(5),i=e.n(r),o=e(0),a=e.n(o),u=e(5139),c=e.n(u),s=e(474);function l(n){return n&&"value"in n}function f(n){return n&&"field"in n&&!!n.field}function h(n){return f(n)&&"type"in n&&!!n.type}function d(n){return!Array.isArray(n)}function g(n){return null!=n}var p=function(n,t){let e,r;if(void 0===t)for(const t of n)null!=t&&(void 0===e?t>=t&&(e=r=t):(e>t&&(e=t),r<t&&(r=t)));else{let i=-1;for(let o of n)null!=(o=t(o,++i,n))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]};const m="linear",y="log",v="pow",w="sqrt",b="symlog",M="time",x="utc",T="quantile",D="quantize",C="threshold",F="bin-ordinal",O="ordinal",N="point",k="band";function S(n){return"X"===n||"XBand"===n}function U(n){return"Y"===n||"YBand"===n}function j(n){return S(n)||U(n)}var E=Object.keys;function A(n,t){return"Invalid "+n+": "+String(t)+"."}const I=["january","february","march","april","may","june","july","august","september","october","november","december"],Y=I.map(n=>n.slice(0,3)),q=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],z=q.map(n=>n.slice(0,3));function V(n){return"number"==typeof n}function L(n){return!!V(n)||!isNaN(n)&&!isNaN(parseFloat(n))}function B(n,t){const e=[];if(t&&void 0!==n.day&&E(n).length>1&&delete(n={...n}).day,void 0!==n.year?e.push(n.year):void 0!==n.day?e.push(2006):e.push(0),void 0!==n.month){const r=t?function(n){if(L(n)&&(n=Number(n)),V(n))return n-1;const t=n.toLowerCase(),e=I.indexOf(t);if(-1!==e)return e;const r=t.slice(0,3),i=Y.indexOf(r);if(-1!==i)return i;throw new Error(A("month",n))}(n.month):n.month;e.push(r)}else if(void 0!==n.quarter){const r=t?function(n){if(L(n)&&(n=Number(n)),V(n))return n>4&&console.warn(A("quarter",n)),n-1;throw new Error(A("quarter",n))}(n.quarter):n.quarter;e.push(V(r)?3*r:r+"*3")}else e.push(0);if(void 0!==n.date)e.push(n.date);else if(void 0!==n.day){const r=t?function(n){if(L(n)&&(n=Number(n)),V(n))return n%7;const t=n.toLowerCase(),e=q.indexOf(t);if(-1!==e)return e;const r=t.slice(0,3),i=z.indexOf(r);if(-1!==i)return i;throw new Error(A("day",n))}(n.day):n.day;e.push(V(r)?r+1:r+"+1")}else e.push(1);return["hours","minutes","seconds","milliseconds"].forEach(t=>{const r=n[t];e.push(void 0===r?0:r)}),e}function P(n){return"number"==typeof n||"string"==typeof n?new Date(n):new Date(function(n){const t=B(n,!0);return n.utc?Number(new Date(Date.UTC(...t))):Number(new Date(...t))}(n))}function H(n){return!!n&&!(n instanceof Date)&&"string"!=typeof n&&"boolean"!=typeof n&&"number"!=typeof n&&("year"in n&&null!=n.year||"quarter"in n&&null!=n.quarter||"month"in n&&null!=n.month||"date"in n&&null!=n.date||"day"in n&&null!=n.day||"hours"in n&&null!=n.hours||"minutes"in n&&null!=n.minutes||"seconds"in n&&null!=n.seconds||"milliseconds"in n&&null!=n.milliseconds)}function W(n){return""+n}var X=e(3821);function R({formatType:n,format:t,formatInLocalTime:e}){if("time"===n){const n=X.a.resolveTimeFormat({format:t,formatInLocalTime:e});return t=>n(t)}if("number"===n||void 0!==t&&t.length>0){const n=X.a.resolveNumberFormat(t);return t=>n(t)}return W}function $(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class _{constructor(n){$(this,"channelEncoder",void 0),$(this,"config",void 0),$(this,"formatValue",void 0),this.channelEncoder=n,this.config=n.definition.axis,this.formatValue=R(this.config)}getTitle(){return this.config.title}hasTitle(){const{title:n}=this.config;return null!=n&&""!==n}getTickLabels(){const{tickCount:n,values:t}=this.config;if(void 0!==t)return t.map(n=>this.formatValue(H(n)?P(n):n));const{scale:e}=this.channelEncoder;if(e&&"domain"in e){return("ticks"in e?e.ticks(n):e.domain()).map(this.formatValue)}return[]}}var G=e(4691),J=e.n(G);function K(n){return!function(n){return!1===n||null===n}(n)}const Q={strategy:"flat"},Z={labelAngle:40,strategy:"rotate"};function nn(n,t="auto"){let e;switch(t){case"flat":e=Q;break;case"rotate":e=Z;break;case"auto":e=S(n)?Z:Q;break;default:e=t}return{...e}}const tn=[m,v,w,b,y,M,x],en=new Set(tn),rn=[T,D,C],on=(new Set(rn),tn.concat(rn)),an=(new Set(on),new Set([O,F,N,k]),tn),un=en,cn=new Set([k,N,O]),sn=new Set([F,T,D,C]),ln=new Set([M,x]),fn=[m,y,v,w,b,M,x,T,D,C,F,O,N,k],hn=new Set(fn);function dn(n,t){if(function(n,t){return h(t)&&j(n)}(n,t)&&K(t.axis)){const e=!0===t.axis||void 0===t.axis?{}:t.axis,r=S(n),{format:i=t.format,formatType:o=t.formatType,formatInLocalTime:a=t.formatInLocalTime,labelAngle:u=0,labelFlush:c,labelOverlap:s,labelPadding:l=4,orient:f=(r?"bottom":"left"),tickCount:h=5,ticks:d=!0,title:g=t.title,titlePadding:p=4}=e,m={...e,format:i,formatType:o,labelAngle:u,labelFlush:void 0===c?t.scale&&void 0!==t.scale.type&&en.has(t.scale.type):c,labelOverlap:nn(n,s),labelPadding:l,orient:f,tickCount:h,ticks:d,title:g,titlePadding:p};return void 0!==a&&(m.formatInLocalTime=a),m}return!1}function gn(n,t,e=!1){if("nominal"===t||"ordinal"===t)switch(n){case"XBand":case"YBand":return k;case"X":case"Y":case"Numeric":return N;case"Color":case"Category":return O}else if("quantitative"===t)switch(n){case"XBand":case"YBand":case"X":case"Y":case"Numeric":return m;case"Color":return e?F:m}else if("temporal"===t)switch(n){case"XBand":case"YBand":case"X":case"Y":case"Numeric":return x;case"Color":return m}}const pn=[N,k],mn=new Set(pn),yn=fn.filter(n=>!mn.has(n)),vn=new Set(yn),wn=new Set(an.concat(pn)),bn=new Set(on);bn.delete(y),bn.delete(M),bn.delete(x),bn.delete(C),bn.delete(T);const Mn={align:mn,base:new Set([y]),clamp:un,constant:new Set([b]),domain:hn,exponent:new Set([v]),interpolate:vn,nice:new Set(an.concat([D,C])),padding:wn,paddingInner:new Set([k]),paddingOuter:mn,range:hn,reverse:hn,round:wn,scheme:vn,type:hn,unknown:new Set([O]),zero:bn};function xn(n){return un.has(n.type)}function Tn(n){return t="zero",e=n.type,Mn[t].has(e);var t,e}const Dn=new Set(["time","date","datetime","timestamp"]);function Cn(n,t=""){return j(n)||"Numeric"===n?Dn.has(t.toLowerCase())?"temporal":"quantitative":"nominal"}function Fn(n,t){var e;if(l(t))return{...t,axis:!1,legend:!1,scale:!1,title:""};const r={...t,title:f(t)?null!=(e=t.title)?e:t.field:"",type:h(t)?t.type:Cn(n,t.field)},i=function(n,t){if(h(t)&&K(t.scale)){const{scale:e={},type:r,bin:i}=t,{type:o=gn(n,r,i)}=e;if(void 0===o)return!1;const a={...e,type:o};return xn(a)&&(void 0===a.nice&&(a.nice=!ln.has(o)),void 0===a.clamp&&(a.clamp=!0)),Tn(a)&&void 0===a.zero&&(a.zero=!0),a}return!1}(n,r),o=function(n){const{formatType:t,formatInLocalTime:e,format:r,type:i,scaleType:o}=n;let a;return void 0!==t?a=t:"quantitative"===i?a="number":"temporal"===i||"time"===o||"utc"===o?a="time":void 0!==r&&r.length>0&&(a="number"),"time"===a?{formatType:"time",formatInLocalTime:e||void 0===e&&"time"===o,format:r}:{formatType:a,format:r}}({...t,scaleType:i?i.type:void 0}),a={...r,...o,scale:i},u=dn(n,a),c=function(n,t){return"legend"in t&&void 0!==t.legend?t.legend:!j(n)&&"Text"!==n&&{}}(n,a);return{...a,axis:u,legend:c}}var On=Math.sqrt(50),Nn=Math.sqrt(10),kn=Math.sqrt(2),Sn=function(n,t,e){var r,i,o,a,u=-1;if(e=+e,(n=+n)===(t=+t)&&e>0)return[n];if((r=t<n)&&(i=n,n=t,t=i),0===(a=Un(n,t,e))||!isFinite(a))return[];if(a>0){let e=Math.round(n/a),r=Math.round(t/a);for(e*a<n&&++e,r*a>t&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)*a}else{a=-a;let e=Math.round(n*a),r=Math.round(t*a);for(e/a<n&&++e,r/a>t&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)/a}return r&&o.reverse(),o};function Un(n,t,e){var r=(t-n)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=On?10:o>=Nn?5:o>=kn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=On?10:o>=Nn?5:o>=kn?2:1)}function jn(n,t,e){var r=Math.abs(t-n)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=On?i*=10:o>=Nn?i*=5:o>=kn&&(i*=2),t<n?-i:i}var En=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN},An=function(n){let t=n,e=n;function r(n,t,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){const o=r+i>>>1;e(n[o],t)<0?r=o+1:i=o}return r}return 1===n.length&&(t=(t,e)=>n(t)-e,e=function(n){return(t,e)=>En(n(t),e)}(n)),{left:r,center:function(n,e,i,o){null==i&&(i=0),null==o&&(o=n.length);const a=r(n,e,i,o-1);return a>i&&t(n[a-1],e)>-t(n[a],e)?a-1:a},right:function(n,t,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){const o=r+i>>>1;e(n[o],t)>0?i=o:r=o+1}return r}}};var In=function(n){return null===n?NaN:+n};const Yn=An(En),qn=Yn.right;Yn.left,An(In).center;var zn=qn,Vn=e(54);function Ln(n,t,e,r,i){var o=n*n,a=o*n;return((1-3*n+3*o-a)*t+(4-6*o+3*a)*e+(1+3*n+3*o-3*a)*r+a*i)/6}var Bn=n=>()=>n;function Pn(n,t){return function(e){return n+e*t}}function Hn(n,t){var e=t-n;return e?Pn(n,e>180||e<-180?e-360*Math.round(e/360):e):Bn(isNaN(n)?t:n)}function Wn(n){return 1==(n=+n)?Xn:function(t,e){return e-t?function(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}(t,e,n):Bn(isNaN(t)?e:t)}}function Xn(n,t){var e=t-n;return e?Pn(n,e):Bn(isNaN(n)?t:n)}var Rn=function n(t){var e=Wn(t);function r(n,t){var r=e((n=Object(Vn.f)(n)).r,(t=Object(Vn.f)(t)).r),i=e(n.g,t.g),o=e(n.b,t.b),a=Xn(n.opacity,t.opacity);return function(t){return n.r=r(t),n.g=i(t),n.b=o(t),n.opacity=a(t),n+""}}return r.gamma=n,r}(1);function $n(n){return function(t){var e,r,i=t.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=Object(Vn.f)(t[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=n(o),a=n(a),u=n(u),r.opacity=1,function(n){return r.r=o(n),r.g=a(n),r.b=u(n),r+""}}}$n((function(n){var t=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),i=n[r],o=n[r+1],a=r>0?n[r-1]:2*i-o,u=r<t-1?n[r+2]:2*o-i;return Ln((e-r/t)*t,a,i,o,u)}})),$n((function(n){var t=n.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*t),i=n[(r+t-1)%t],o=n[r%t],a=n[(r+1)%t],u=n[(r+2)%t];return Ln((e-r/t)*t,i,o,a,u)}}));var _n=function(n,t){t||(t=[]);var e,r=n?Math.min(t.length,n.length):0,i=t.slice();return function(o){for(e=0;e<r;++e)i[e]=n[e]*(1-o)+t[e]*o;return i}};function Gn(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Jn(n,t){var e,r=t?t.length:0,i=n?Math.min(r,n.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=rt(n[e],t[e]);for(;e<r;++e)a[e]=t[e];return function(n){for(e=0;e<i;++e)a[e]=o[e](n);return a}}var Kn=function(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}},Qn=function(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}},Zn=function(n,t){var e,r={},i={};for(e in null!==n&&"object"==typeof n||(n={}),null!==t&&"object"==typeof t||(t={}),t)e in n?r[e]=rt(n[e],t[e]):i[e]=t[e];return function(n){for(e in r)i[e]=r[e](n);return i}},nt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tt=new RegExp(nt.source,"g");var et=function(n,t){var e,r,i,o=nt.lastIndex=tt.lastIndex=0,a=-1,u=[],c=[];for(n+="",t+="";(e=nt.exec(n))&&(r=tt.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:Qn(e,r)})),o=tt.lastIndex;return o<t.length&&(i=t.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(n){return function(t){return n(t)+""}}(c[0].x):function(n){return function(){return n}}(t):(t=c.length,function(n){for(var e,r=0;r<t;++r)u[(e=c[r]).i]=e.x(n);return u.join("")})},rt=function(n,t){var e,r=typeof t;return null==t||"boolean"===r?Bn(t):("number"===r?Qn:"string"===r?(e=Object(Vn.a)(t))?(t=e,Rn):et:t instanceof Vn.a?Rn:t instanceof Date?Kn:Gn(t)?_n:Array.isArray(t)?Jn:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Zn:Qn)(n,t)},it=function(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}};function ot(n){return+n}var at=[0,1];function ut(n){return n}function ct(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:(e=isNaN(t)?NaN:.5,function(){return e});var e}function st(n,t,e){var r=n[0],i=n[1],o=t[0],a=t[1];return i<r?(r=ct(i,r),o=e(a,o)):(r=ct(r,i),o=e(o,a)),function(n){return o(r(n))}}function lt(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=ct(n[a],n[a+1]),o[a]=e(t[a],t[a+1]);return function(t){var e=zn(n,t,1,r)-1;return o[e](i[e](t))}}function ft(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function ht(){var n,t,e,r,i,o,a=at,u=at,c=rt,s=ut;function l(){var n,t,e,c=Math.min(a.length,u.length);return s!==ut&&(n=a[0],t=a[c-1],n>t&&(e=n,n=t,t=e),s=function(e){return Math.max(n,Math.min(t,e))}),r=c>2?lt:st,i=o=null,f}function f(t){return isNaN(t=+t)?e:(i||(i=r(a.map(n),u,c)))(n(s(t)))}return f.invert=function(e){return s(t((o||(o=r(u,a.map(n),Qn)))(e)))},f.domain=function(n){return arguments.length?(a=Array.from(n,ot),l()):a.slice()},f.range=function(n){return arguments.length?(u=Array.from(n),l()):u.slice()},f.rangeRound=function(n){return u=Array.from(n),c=it,l()},f.clamp=function(n){return arguments.length?(s=!!n||ut,l()):s!==ut},f.interpolate=function(n){return arguments.length?(c=n,l()):c},f.unknown=function(n){return arguments.length?(e=n,f):e},function(e,r){return n=e,t=r,l()}}function dt(){return ht()(ut,ut)}function gt(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n)}return this}var pt=e(72);function mt(n){var t=n.domain;return n.ticks=function(n){var e=t();return Sn(e[0],e[e.length-1],null==n?10:n)},n.tickFormat=function(n,e){var r=t();return function(n,t,e,r){var i,o=jn(n,t,e);switch((r=Object(pt.d)(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(n),Math.abs(t));return null!=r.precision||isNaN(i=Object(pt.f)(o,a))||(r.precision=i),Object(pt.c)(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Object(pt.g)(o,Math.max(Math.abs(n),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Object(pt.e)(o))||(r.precision=i-2*("%"===r.type))}return Object(pt.a)(r)}(r[0],r[r.length-1],null==n?10:n,e)},n.nice=function(e){null==e&&(e=10);var r,i,o=t(),a=0,u=o.length-1,c=o[a],s=o[u],l=10;for(s<c&&(i=c,c=s,s=i,i=a,a=u,u=i);l-- >0;){if((i=Un(c,s,e))===r)return o[a]=c,o[u]=s,t(o);if(i>0)c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i}r=i}return n},n}function yt(){var n=dt();return n.copy=function(){return ft(n,yt())},gt.apply(n,arguments),mt(n)}function vt(n,t){var e,r=0,i=(n=n.slice()).length-1,o=n[r],a=n[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),n[r]=t.floor(o),n[i]=t.ceil(a),n}function wt(n){return Math.log(n)}function bt(n){return Math.exp(n)}function Mt(n){return-Math.log(-n)}function xt(n){return-Math.exp(-n)}function Tt(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Dt(n){return function(t){return-n(-t)}}function Ct(n){var t,e,r=n(wt,bt),i=r.domain,o=10;function a(){return t=function(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}(o),e=function(n){return 10===n?Tt:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}(o),i()[0]<0?(t=Dt(t),e=Dt(e),n(Mt,xt)):n(wt,bt),r}return r.base=function(n){return arguments.length?(o=+n,a()):o},r.domain=function(n){return arguments.length?(i(n),a()):i()},r.ticks=function(n){var r,a=i(),u=a[0],c=a[a.length-1];(r=c<u)&&(h=u,u=c,c=h);var s,l,f,h=t(u),d=t(c),g=null==n?10:+n,p=[];if(!(o%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(l=1,s=e(h);l<o;++l)if(!((f=s*l)<u)){if(f>c)break;p.push(f)}}else for(;h<=d;++h)for(l=o-1,s=e(h);l>=1;--l)if(!((f=s*l)<u)){if(f>c)break;p.push(f)}2*p.length<g&&(p=Sn(u,c,g))}else p=Sn(h,d,Math.min(d-h,g)).map(e);return r?p.reverse():p},r.tickFormat=function(n,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=Object(pt.a)(i)),n===1/0)return i;null==n&&(n=10);var a=Math.max(1,o*n/r.ticks().length);return function(n){var r=n/e(Math.round(t(n)));return r*o<o-.5&&(r*=o),r<=a?i(n):""}},r.nice=function(){return i(vt(i(),{floor:function(n){return e(Math.floor(t(n)))},ceil:function(n){return e(Math.ceil(t(n)))}}))},r}function Ft(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function Ot(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Nt(n){return n<0?-n*n:n*n}function kt(n){var t=n(ut,ut),e=1;function r(){return 1===e?n(ut,ut):.5===e?n(Ot,Nt):n(Ft(e),Ft(1/e))}return t.exponent=function(n){return arguments.length?(e=+n,r()):e},mt(t)}function St(){var n=kt(ht());return n.copy=function(){return ft(n,St()).exponent(n.exponent())},gt.apply(n,arguments),n}var Ut=new Date,jt=new Date;function Et(n,t,e,r){function i(t){return n(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return n(t=new Date(+t)),t},i.ceil=function(e){return n(e=new Date(e-1)),t(e,1),n(e),e},i.round=function(n){var t=i(n),e=i.ceil(n);return n-t<e-n?t:e},i.offset=function(n,e){return t(n=new Date(+n),null==e?1:Math.floor(e)),n},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),t(e,o),n(e)}while(a<e&&e<r);return u},i.filter=function(e){return Et((function(t){if(t>=t)for(;n(t),!e(t);)t.setTime(t-1)}),(function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;t(n,-1),!e(n););else for(;--r>=0;)for(;t(n,1),!e(n););}))},e&&(i.count=function(t,r){return Ut.setTime(+t),jt.setTime(+r),n(Ut),n(jt),Math.floor(e(Ut,jt))},i.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?i.filter(r?function(t){return r(t)%n==0}:function(t){return i.count(0,t)%n==0}):i:null}),i}var At=Et((function(n){n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,t){n.setFullYear(n.getFullYear()+t)}),(function(n,t){return t.getFullYear()-n.getFullYear()}),(function(n){return n.getFullYear()}));At.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Et((function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e*n)})):null};var It=At,Yt=(At.range,Et((function(n){n.setDate(1),n.setHours(0,0,0,0)}),(function(n,t){n.setMonth(n.getMonth()+t)}),(function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())}),(function(n){return n.getMonth()}))),qt=Yt;Yt.range;function zt(n){return Et((function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)}),(function(n,t){n.setDate(n.getDate()+7*t)}),(function(n,t){return(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/6048e5}))}var Vt=zt(0),Lt=zt(1),Bt=zt(2),Pt=zt(3),Ht=zt(4),Wt=zt(5),Xt=zt(6),Rt=(Vt.range,Lt.range,Bt.range,Pt.range,Ht.range,Wt.range,Xt.range,Et(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5,n=>n.getDate()-1)),$t=Rt,_t=(Rt.range,Et((function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds()-6e4*n.getMinutes())}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getHours()}))),Gt=_t,Jt=(_t.range,Et((function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds())}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getMinutes()}))),Kt=Jt,Qt=(Jt.range,Et((function(n){n.setTime(n-n.getMilliseconds())}),(function(n,t){n.setTime(+n+1e3*t)}),(function(n,t){return(t-n)/1e3}),(function(n){return n.getUTCSeconds()}))),Zt=Qt,ne=(Qt.range,Et((function(){}),(function(n,t){n.setTime(+n+t)}),(function(n,t){return t-n})));ne.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?Et((function(t){t.setTime(Math.floor(t/n)*n)}),(function(t,e){t.setTime(+t+e*n)}),(function(t,e){return(e-t)/n})):ne:null};var te=ne,ee=(ne.range,e(816));function re(n){return new Date(n)}function ie(n){return n instanceof Date?+n:+new Date(+n)}function oe(n,t,e,r,i,o,a,u,c){var s=dt(),l=s.invert,f=s.domain,h=c(".%L"),d=c(":%S"),g=c("%I:%M"),p=c("%I %p"),m=c("%a %d"),y=c("%b %d"),v=c("%B"),w=c("%Y"),b=[[a,1,1e3],[a,5,5e3],[a,15,15e3],[a,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[e,1,6048e5],[t,1,2592e6],[t,3,7776e6],[n,1,31536e6]];function M(u){return(a(u)<u?h:o(u)<u?d:i(u)<u?g:r(u)<u?p:t(u)<u?e(u)<u?m:y:n(u)<u?v:w)(u)}function x(t,e,r){if(null==t&&(t=10),"number"==typeof t){var i,o=Math.abs(r-e)/t,a=An((function(n){return n[2]})).right(b,o);return a===b.length?(i=jn(e/31536e6,r/31536e6,t),t=n):a?(i=(a=b[o/b[a-1][2]<b[a][2]/o?a-1:a])[1],t=a[0]):(i=Math.max(jn(e,r,t),1),t=u),t.every(i)}return t}return s.invert=function(n){return new Date(l(n))},s.domain=function(n){return arguments.length?f(Array.from(n,ie)):f().map(re)},s.ticks=function(n){var t,e=f(),r=e[0],i=e[e.length-1],o=i<r;return o&&(t=r,r=i,i=t),t=(t=x(n,r,i))?t.range(r,i+1):[],o?t.reverse():t},s.tickFormat=function(n,t){return null==t?M:c(t)},s.nice=function(n){var t=f();return(n=x(n,t[0],t[t.length-1]))?f(vt(t,n)):s},s.copy=function(){return ft(s,oe(n,t,e,r,i,o,a,u,c))},s}var ae=Et((function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)}),(function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()}),(function(n){return n.getUTCFullYear()}));ae.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Et((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)})):null};var ue=ae,ce=(ae.range,Et((function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCMonth(n.getUTCMonth()+t)}),(function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())}),(function(n){return n.getUTCMonth()}))),se=ce;ce.range;function le(n){return Et((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+7*t)}),(function(n,t){return(t-n)/6048e5}))}var fe=le(0),he=le(1),de=le(2),ge=le(3),pe=le(4),me=le(5),ye=le(6),ve=(fe.range,he.range,de.range,ge.range,pe.range,me.range,ye.range,Et((function(n){n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+t)}),(function(n,t){return(t-n)/864e5}),(function(n){return n.getUTCDate()-1}))),we=ve,be=(ve.range,Et((function(n){n.setUTCMinutes(0,0,0)}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getUTCHours()}))),Me=be,xe=(be.range,Et((function(n){n.setUTCSeconds(0,0)}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getUTCMinutes()}))),Te=xe;xe.range;function De(n,t,e=In){if(r=n.length){if((t=+t)<=0||r<2)return+e(n[0],0,n);if(t>=1)return+e(n[r-1],r-1,n);var r,i=(r-1)*t,o=Math.floor(i),a=+e(n[o],o,n);return a+(+e(n[o+1],o+1,n)-a)*(i-o)}}const Ce=Symbol("implicit");function Fe(){var n=new Map,t=[],e=[],r=Ce;function i(i){var o=i+"",a=n.get(o);if(!a){if(r!==Ce)return r;n.set(o,a=t.push(i))}return e[(a-1)%e.length]}return i.domain=function(e){if(!arguments.length)return t.slice();t=[],n=new Map;for(const r of e){const e=r+"";n.has(e)||n.set(e,t.push(r))}return i},i.range=function(n){return arguments.length?(e=Array.from(n),i):e.slice()},i.unknown=function(n){return arguments.length?(r=n,i):r},i.copy=function(){return Fe(t,e).unknown(r)},gt.apply(i,arguments),i}var Oe=function(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((t-n)/e)),o=new Array(i);++r<i;)o[r]=n+r*e;return o};function Ne(){var n,t,e=Fe().unknown(void 0),r=e.domain,i=e.range,o=0,a=1,u=!1,c=0,s=0,l=.5;function f(){var e=r().length,f=a<o,h=f?a:o,d=f?o:a;n=(d-h)/Math.max(1,e-c+2*s),u&&(n=Math.floor(n)),h+=(d-h-n*(e-c))*l,t=n*(1-c),u&&(h=Math.round(h),t=Math.round(t));var g=Oe(e).map((function(t){return h+n*t}));return i(f?g.reverse():g)}return delete e.unknown,e.domain=function(n){return arguments.length?(r(n),f()):r()},e.range=function(n){return arguments.length?([o,a]=n,o=+o,a=+a,f()):[o,a]},e.rangeRound=function(n){return[o,a]=n,o=+o,a=+a,u=!0,f()},e.bandwidth=function(){return t},e.step=function(){return n},e.round=function(n){return arguments.length?(u=!!n,f()):u},e.padding=function(n){return arguments.length?(c=Math.min(1,s=+n),f()):c},e.paddingInner=function(n){return arguments.length?(c=Math.min(1,n),f()):c},e.paddingOuter=function(n){return arguments.length?(s=+n,f()):s},e.align=function(n){return arguments.length?(l=Math.max(0,Math.min(1,n)),f()):l},e.copy=function(){return Ne(r(),[o,a]).round(u).paddingInner(c).paddingOuter(s).align(l)},gt.apply(f(),arguments)}function ke(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return ke(t())},n}function Se(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function Ue(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function je(n){var t=1,e=n(Se(t),Ue(t));return e.constant=function(e){return arguments.length?n(Se(t=+e),Ue(t)):t},mt(e)}function Ee(n){switch(n){case m:return yt();case y:return function n(){var t=Ct(ht()).domain([1,10]);return t.copy=function(){return ft(t,n()).base(t.base())},gt.apply(t,arguments),t}();case v:return St();case w:return function(){return St.apply(null,arguments).exponent(.5)}();case M:return function(){return gt.apply(oe(It,qt,Vt,$t,Gt,Kt,Zt,te,ee.a).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}();case x:return function(){return gt.apply(oe(ue,se,fe,we,Me,Te,Zt,te,ee.b).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}();case T:return function n(){var t,e=[],r=[],i=[];function o(){var n=0,t=Math.max(1,r.length);for(i=new Array(t-1);++n<t;)i[n-1]=De(e,n/t);return a}function a(n){return isNaN(n=+n)?t:r[zn(i,n)]}return a.invertExtent=function(n){var t=r.indexOf(n);return t<0?[NaN,NaN]:[t>0?i[t-1]:e[0],t<i.length?i[t]:e[e.length-1]]},a.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let t of n)null==t||isNaN(t=+t)||e.push(t);return e.sort(En),o()},a.range=function(n){return arguments.length?(r=Array.from(n),o()):r.slice()},a.unknown=function(n){return arguments.length?(t=n,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return n().domain(e).range(r).unknown(t)},gt.apply(a,arguments)}();case D:return function n(){var t,e=0,r=1,i=1,o=[.5],a=[0,1];function u(n){return n<=n?a[zn(o,n,0,i)]:t}function c(){var n=-1;for(o=new Array(i);++n<i;)o[n]=((n+1)*r-(n-i)*e)/(i+1);return u}return u.domain=function(n){return arguments.length?([e,r]=n,e=+e,r=+r,c()):[e,r]},u.range=function(n){return arguments.length?(i=(a=Array.from(n)).length-1,c()):a.slice()},u.invertExtent=function(n){var t=a.indexOf(n);return t<0?[NaN,NaN]:t<1?[e,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},u.unknown=function(n){return arguments.length?(t=n,u):u},u.thresholds=function(){return o.slice()},u.copy=function(){return n().domain([e,r]).range(a).unknown(t)},gt.apply(mt(u),arguments)}();case C:return function n(){var t,e=[.5],r=[0,1],i=1;function o(n){return n<=n?r[zn(e,n,0,i)]:t}return o.domain=function(n){return arguments.length?(e=Array.from(n),i=Math.min(e.length,r.length-1),o):e.slice()},o.range=function(n){return arguments.length?(r=Array.from(n),i=Math.min(e.length,r.length-1),o):r.slice()},o.invertExtent=function(n){var t=r.indexOf(n);return[e[t-1],e[t]]},o.unknown=function(n){return arguments.length?(t=n,o):t},o.copy=function(){return n().domain(e).range(r).unknown(t)},gt.apply(o,arguments)}();case O:return Fe();case N:return function(){return ke(Ne.apply(null,arguments).paddingInner(1))}();case k:return Ne();case b:return function n(){var t=je(ht());return t.copy=function(){return ft(t,n()).constant(t.constant())},gt.apply(t,arguments)}();case F:throw new Error('"type = '+n+'" is not supported yet.');default:return yt()}}const Ae={day:$t,hour:Gt,minute:Kt,month:qt,second:Zt,week:Vt,year:It},Ie={day:we,hour:Me,minute:Te,month:se,second:Zt,week:fe,year:ue};function Ye(n,t){if("nice"in n&&void 0!==n.nice&&"nice"in t){const{nice:e}=n;if("boolean"==typeof e)e&&t.nice();else if("number"==typeof e)t.nice(e);else{const r=t,{type:i}=n;if("string"==typeof e)r.nice(i===x?Ie[e]:Ae[e]);else{const{interval:n,step:t}=e,o=(i===x?Ie[n]:Ae[n]).every(t);null!==o&&r.nice(o)}}}}function qe(n,t){return n&&un.has(t)}function ze(n,t){if("zero"in n&&!0===n.zero&&qe(t,n.type)){const n=t.domain(),[e,r]=n,i=r<e,[o,a]=i?[r,e]:[e,r],u=[Math.min(0,o),Math.max(0,a)];t.domain(i?u.reverse():u)}}function Ve(n){return function(t,e){var r=n((t=Object(Vn.c)(t)).h,(e=Object(Vn.c)(e)).h),i=Xn(t.c,e.c),o=Xn(t.l,e.l),a=Xn(t.opacity,e.opacity);return function(n){return t.h=r(n),t.c=i(n),t.l=o(n),t.opacity=a(n),t+""}}}function Le(n){return function(t,e){var r=n((t=Object(Vn.d)(t)).h,(e=Object(Vn.d)(e)).h),i=Xn(t.s,e.s),o=Xn(t.l,e.l),a=Xn(t.opacity,e.opacity);return function(n){return t.h=r(n),t.s=i(n),t.l=o(n),t.opacity=a(n),t+""}}}function Be(n){return function t(e){function r(t,r){var i=n((t=Object(Vn.b)(t)).h,(r=Object(Vn.b)(r)).h),o=Xn(t.s,r.s),a=Xn(t.l,r.l),u=Xn(t.opacity,r.opacity);return function(n){return t.h=i(n),t.s=o(n),t.l=a(Math.pow(n,e)),t.opacity=u(n),t+""}}return e=+e,r.gamma=t,r}(1)}const Pe={lab:function(n,t){var e=Xn((n=Object(Vn.e)(n)).l,(t=Object(Vn.e)(t)).l),r=Xn(n.a,t.a),i=Xn(n.b,t.b),o=Xn(n.opacity,t.opacity);return function(t){return n.l=e(t),n.a=r(t),n.b=i(t),n.opacity=o(t),n+""}},hcl:Ve(Hn),"hcl-long":Ve(Xn),hsl:Le(Hn),"hsl-long":Le(Xn),cubehelix:Be(Hn),"cubehelix-long":Be(Xn),rgb:Rn};function He(n,t){"interpolate"in n&&void 0!==n.interpolate&&"interpolate"in t&&t.interpolate(function(n){switch(n){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return Pe[n]}const{type:t,gamma:e}=n,r=Pe[t];return void 0===e?r:r.gamma(e)}(n.interpolate))}function We(n,t){return ln.has(t)?n.filter(n=>"boolean"!=typeof n).map(n=>"string"==typeof n||"number"==typeof n?new Date(n):n):n.map(n=>"string"==typeof n||"boolean"==typeof n?Number(n):n)}function Xe(n){return n.map(n=>""+n)}function Re(n,t){if(n.length>0&&n.every(g))return n;if(2===n.length&&2===t.length&&n.filter(g).length>0){const[e,r]=n,[i,o]=t;let a=i;g(e)&&(a=e.valueOf()>i.valueOf()?e:i);let u=o;return g(r)&&(u=r.valueOf()<o.valueOf()?r:o),[a,u]}return t}function $e(n){return n.filter(n=>null!=n)}function _e(n){return n.map(n=>n instanceof Date||!H(n)?n:P(n))}function Ge(n,t,e){const{reverse:r,type:i}=n,o=function(n){return n?n=>n.concat().reverse():n=>n}(r);if(qe(t,i)&&xn(n)||function(n,t){return n&&sn.has(t)}(t,i)&&function(n){return sn.has(n.type)}(n))n.domain?2!==(a=n.domain).length||null!=a[0]&&null!=a[1]?t.domain(o(_e(n.domain))):e&&t.domain(o(Re(We(_e(n.domain),i),We($e(e),i)))):e&&t.domain(o(We($e(e),i)));else if(function(n,t){return n&&cn.has(t)}(t,i)&&function(n){return cn.has(n.type)}(n))if(n.domain){const r=Xe(_e(n.domain));t.domain(o(e?function(n,t=[]){if(0===n.length)return t;const e=new Set(n);return n.concat(t.filter(n=>!e.has(n)))}(r,Xe(e)):r))}else e&&t.domain(o(Xe(e)));var a}var Je=e(927);function Ke(n){return"[object String]"!==Object.prototype.toString.call(n)}function Qe(n,t){const{range:e,domain:r}=n;if(void 0===e){if("scheme"in n&&void 0!==n.scheme){const{scheme:e}=n;let i,o,a;xn(n)&&r&&(o=r.length),Ke(e)?(i=e.name,e.count&&(o=e.count),a=e.extent):i=e;const u=X.a.resolveColorScheme({name:i,type:"sequential"});if(void 0!==u&&"sequential"===u.type){const n=Object(Je.a)(u);t.range(n.getColors(o,a))}}}else t.range(e)}function Ze(n,t){return Ge(t,n),Qe(t,n),function(n,t){"align"in n&&void 0!==n.align&&"align"in t&&t.align(n.align)}(t,n),function(n,t){"base"in n&&void 0!==n.base&&"base"in t&&t.base(n.base)}(t,n),function(n,t){"clamp"in n&&!0===n.clamp&&"clamp"in t&&t.clamp(n.clamp)}(t,n),function(n,t){"exponent"in n&&void 0!==n.exponent&&"exponent"in t&&t.exponent(n.exponent)}(t,n),He(t,n),Ye(t,n),function(n,t){"padding"in n&&void 0!==n.padding&&"padding"in t&&t.padding(n.padding),"paddingInner"in n&&void 0!==n.paddingInner&&"paddingInner"in t&&t.paddingInner(n.paddingInner),"paddingOuter"in n&&void 0!==n.paddingOuter&&"paddingOuter"in t&&t.paddingOuter(n.paddingOuter)}(t,n),function(n,t){if("round"in n&&!0===n.round){const e=t;"round"in e?e.round(n.round):e.interpolate(it)}}(t,n),ze(t,n),n}var nr=function(n){const{range:t}=n;if(n.type===O&&void 0===t){const t="scheme"in n?n.scheme:void 0,e=X.a.getCategoricalColorScaleResolver();let r;r=void 0===t?e({}):Ke(t)?e(t):e({name:t});const i=r;return Ge(n,i),i}return Ze(Ee(n.type),n)};function tr(n){return n}function er(n){return"value"in n}function rr(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class ir{constructor({name:n,channelType:t,definition:e}){var r;if(rr(this,"name",void 0),rr(this,"channelType",void 0),rr(this,"originalDefinition",void 0),rr(this,"definition",void 0),rr(this,"scale",void 0),rr(this,"axis",void 0),rr(this,"getValue",void 0),rr(this,"encodeFunc",void 0),rr(this,"formatValue",void 0),rr(this,"encodeValue",(n,t)=>void 0!==t&&null==n?t:this.encodeFunc(n)),rr(this,"encodeDatum",(n,t)=>void 0===t?this.encodeValue(this.getValueFromDatum(n)):this.encodeValue(this.getValueFromDatum(n),t)),rr(this,"formatDatum",n=>this.formatValue(this.getValueFromDatum(n))),rr(this,"getValueFromDatum",(n,t)=>{const e=this.getValue(n);return void 0!==t&&null==e?t:e}),rr(this,"getDomainFromDataset",n=>{if(l(this.definition)){const{value:n}=this.definition;return[n]}const{type:t}=this.definition;if("nominal"===t||"ordinal"===t)return Array.from(new Set(n.map(n=>this.getValueFromDatum(n))));if("quantitative"===t){if(this.definition.scale&&"quantile"===this.definition.scale.type)return n.map(n=>this.getValueFromDatum(n));const t=p(n,n=>this.getValueFromDatum(n));return void 0===t[0]?[0,1]:t}if("temporal"===t){const t=p(n,n=>this.getValueFromDatum(n));return void 0===t[0]?[0,1]:t}return[]}),this.name=n,this.channelType=t,this.originalDefinition=e,this.definition=Fn(this.channelType,e),this.getValue=l(r=this.definition)?()=>r.value:void 0!==r.field?n=>J()(n,r.field):()=>{},this.formatValue=f(this.definition)?R(this.definition):W,this.definition.scale){const n=nr(this.definition.scale);this.encodeFunc=t=>n(t),this.scale=n}else{const{definition:n}=this;this.encodeFunc=er(n)?()=>n.value:tr}this.definition.axis&&(this.axis=new _(this))}getDomain(){return this.scale&&"domain"in this.scale?this.scale.domain():[]}setDomain(n){if(!1!==this.definition.scale&&this.scale&&!this.hasCategoricalColorScale()&&"domain"in this.scale){const t=this.definition.scale;Ge(t,this.scale,n),Qe(t,this.scale),ze(t,this.scale),Ye(t,this.scale)}return this}setDomainFromDataset(n){return this.scale&&"domain"in this.scale?this.setDomain(this.getDomainFromDataset(n)):this}getTitle(){return this.definition.title}isGroupBy(){if(h(this.definition)){const{type:n}=this.definition;return"Category"===this.channelType||"Text"===this.channelType||"Color"===this.channelType&&("nominal"===n||"ordinal"===n)||j(this.channelType)&&("nominal"===n||"ordinal"===n)}return!1}isX(){return S(this.channelType)}isXOrY(){return j(this.channelType)}isY(){return U(this.channelType)}hasCategoricalColorScale(){const n=this.definition.scale;return this.scale&&n&&n.type===O&&void 0===n.range}hasLegend(){return!1!==this.definition.legend}hasValueDefinition(){return er(this.definition)}hasFieldDefinition(){return"field"in this.definition}}function or(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class ar{constructor({channelTypes:n,encoding:t}){or(this,"encoding",void 0),or(this,"channelTypes",void 0),or(this,"channels",void 0),or(this,"legends",void 0),this.channelTypes=n,this.encoding=t;const e=this.getChannelNames(),r={};e.forEach(e=>{const i=t[e];if(Array.isArray(i)){const t=i;r[e]=t.map((t,r)=>new ir({channelType:n[e],definition:t,name:e+"["+r+"]"}))}else{const t=i;r[e]=new ir({channelType:n[e],definition:t,name:e})}}),this.channels=r,this.legends={},e.map(n=>this.channels[n]).forEach(n=>{if(d(n)&&n.hasLegend()&&h(n.definition)){const{field:t}=n.definition,e=n;this.legends[t]?this.legends[t].push(e):this.legends[t]=[e]}})}getChannelNames(){return Object.keys(this.channelTypes)}getChannelEncoders(){return this.getChannelNames().flatMap(n=>this.channels[n])}getGroupBys(){const n=this.getChannelEncoders().filter(n=>n.isGroupBy()).map(n=>n.definition.field);return Array.from(new Set(n))}createLegendItemsFactory(n){const t=this.getChannelEncoders().filter(n=>d(n)&&l(n.definition)).flat().concat(this.legends[n]);return n=>n.map(n=>({input:n,output:t.reduce((t,e)=>{const r=t;return r[e.name]=e.encodeValue(n),r},{})}))}getLegendInformation(n=[]){return Object.keys(this.legends).map(t=>{const e=this.legends[t],r=e[0],i=r.definition,o=this.createLegendItemsFactory(t);return"nominal"===i.type?{channelEncoders:e,createLegendItems:o,field:t,items:o(r.getDomainFromDataset(n)),type:i.type}:{channelEncoders:e,createLegendItems:o,field:t,type:i.type}})}setDomainFromDataset(n){return this.getChannelEncoders().forEach(t=>{t.setDomainFromDataset(n)}),this}hasLegend(){return Object.keys(this.legends).length>0}}var ur=e(1425),cr=e(814),sr=e(1);const lr={flat:()=>0,random:()=>30*Math.floor(6*Object(ur.b)()-3),square:()=>90*Math.floor(2*Object(ur.b)())};class fr extends a.a.PureComponent{constructor(n){super(n),this.isComponentMounted=!1,this.wordCloudEncoderFactory=function(n){const{channelTypes:t}=n,e="defaultEncoding"in n?t=>function(n,t){return{...n,...t}}(n.defaultEncoding,t):n.completeEncoding,r=(n={})=>new ar({channelTypes:t,encoding:e(n)});return{channelTypes:t,create:r,createSelector:()=>Object(s.a)(n=>n,r),DEFAULT_ENCODING:e({})}}({channelTypes:{color:"Color",fontFamily:"Category",fontSize:"Numeric",fontWeight:"Category",text:"Text"},defaultEncoding:{color:{value:"black"},fontFamily:{value:this.props.theme.typography.families.sansSerif},fontSize:{value:20},fontWeight:{value:"bold"},text:{value:""}}}),this.createEncoder=this.wordCloudEncoderFactory.createSelector(),this.state={words:[],scaleFactor:1},this.setWords=this.setWords.bind(this)}componentDidMount(){this.isComponentMounted=!0,this.update()}componentDidUpdate(n){const{data:t,encoding:e,width:r,height:i,rotation:o}=this.props;n.data===t&&n.encoding===e&&n.width===r&&n.height===i&&n.rotation===o||this.update()}componentWillUnmount(){this.isComponentMounted=!1}setWords(n){this.isComponentMounted&&this.setState({words:n})}update(){const{data:n,encoding:t}=this.props,e=this.createEncoder(t);e.setDomainFromDataset(n);const r=[...n].sort((n,t)=>e.channels.fontSize.encodeDatum(t,0)-e.channels.fontSize.encodeDatum(n,0)),i=Math.max(.1*r.length,10),o=r.slice(0,i);this.generateCloud(e,1,n=>o.every(t=>n.find(({text:n})=>e.channels.text.getValueFromDatum(t)===n)))}generateCloud(n,t,e){const{data:r,width:i,height:o,rotation:a}=this.props;c()().size([i*t,o*t]).words(r.map(n=>({...n}))).padding(5).rotate(lr[a]||lr.flat).text(t=>n.channels.text.getValueFromDatum(t)).font(t=>n.channels.fontFamily.encodeDatum(t,this.props.theme.typography.families.sansSerif)).fontWeight(t=>n.channels.fontWeight.encodeDatum(t,"normal")).fontSize(t=>n.channels.fontSize.encodeDatum(t,0)).on("end",r=>{e(r)||t>3?this.isComponentMounted&&this.setState({words:r,scaleFactor:t}):this.generateCloud(n,t+.5,e)}).start()}render(){const{scaleFactor:n}=this.state,{width:t,height:e,encoding:r}=this.props,{words:i}=this.state,o=this.createEncoder(r);o.channels.color.setDomainFromDataset(i);const a=t*n,u=e*n;return Object(sr.d)("svg",{width:t,height:e,viewBox:`-${a/2} -${u/2} ${a} ${u}`},Object(sr.d)("g",null,i.map(n=>Object(sr.d)("text",{key:n.text,fontSize:`${n.size}px`,fontWeight:n.weight,fontFamily:n.font,fill:o.channels.color.encodeDatum(n,""),textAnchor:"middle",transform:`translate(${n.x}, ${n.y}) rotate(${n.rotate})`},n.text))))}}fr.propTypes={rotation:i.a.any,data:i.a.array.isRequired,height:i.a.number.isRequired,width:i.a.number.isRequired},fr.defaultProps={encoding:{},rotation:"flat"};t.default=Object(cr.e)(fr)}}]);