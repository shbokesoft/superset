(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{4411:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PivotData=e.flatKey=e.sortAs=e.getSort=e.numberFormat=e.naturalSort=e.locales=e.derivers=e.aggregators=e.aggregatorTemplates=void 0;var a,n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=r(5),i=(a=l)&&a.__esModule?a:{default:a};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var c,f=function(t){var e=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},t);return function(t){if(isNaN(t)||!isFinite(t))return"";var r=function(t,e,r){for(var a=String(t).split("."),n=a[0],o=a.length>1?r+a[1]:"",l=/(\d+)(\d{3})/;l.test(n);)n=n.replace(l,"$1"+e+"$2");return n+o}((e.scaler*t).toFixed(e.digitsAfterDecimal),e.thousandsSep,e.decimalSep);return""+e.prefix+r+e.suffix}},p=/(\d+)|(\D+)/g,h=/\d/,d=/^0/,v=function(t,e){if(null!==e&&null===t)return-1;if(null!==t&&null===e)return 1;if("number"==typeof t&&isNaN(t))return-1;if("number"==typeof e&&isNaN(e))return 1;var r=Number(t),a=Number(e);if(r<a)return-1;if(r>a)return 1;if("number"==typeof t&&"number"!=typeof e)return-1;if("number"==typeof e&&"number"!=typeof t)return 1;if("number"==typeof t&&"number"==typeof e)return 0;if(isNaN(a)&&!isNaN(r))return-1;if(isNaN(r)&&!isNaN(a))return 1;var n=String(t),o=String(e);if(n===o)return 0;if(!h.test(n)||!h.test(o))return n>o?1:-1;for(n=n.match(p),o=o.match(p);n.length&&o.length;){var l=n.shift(),i=o.shift();if(l!==i)return h.test(l)&&h.test(i)?l.replace(d,".0")-i.replace(d,".0"):l>i?1:-1}return n.length-o.length},g=function(t,e){if(t)if("function"==typeof t){var r=t(e);if("function"==typeof r)return r}else if(e in t)return t[e];return v},b=f(),y=f({digitsAfterDecimal:0}),m=f({digitsAfterDecimal:1,scaler:100,suffix:"%"}),w={count:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return function(){return function(){return{count:0,push:function(){this.count++},value:function(){return this.count},format:t}}}},uniques:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return function(r){var a=o(r,1)[0];return function(){return{uniq:[],push:function(t){Array.from(this.uniq).includes(t[a])||this.uniq.push(t[a])},value:function(){return t(this.uniq)},format:e,numInputs:void 0!==a?0:1}}}},sum:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return function(e){var r=o(e,1)[0];return function(){return{sum:0,push:function(t){isNaN(parseFloat(t[r]))||(this.sum+=parseFloat(t[r]))},value:function(){return this.sum},format:t,numInputs:void 0!==r?0:1}}}},extremes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return function(r){var a=o(r,1)[0];return function(r){return{val:null,sorter:g(void 0!==r?r.sorters:null,a),push:function(e){var r=e[a];["min","max"].includes(t)&&(r=parseFloat(r),isNaN(r)||(this.val=Math[t](r,null!==this.val?this.val:r))),"first"===t&&this.sorter(r,null!==this.val?this.val:r)<=0&&(this.val=r),"last"===t&&this.sorter(r,null!==this.val?this.val:r)>=0&&(this.val=r)},value:function(){return this.val},format:function(t){return isNaN(t)?t:e(t)},numInputs:void 0!==a?0:1}}}},quantile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return function(r){var a=o(r,1)[0];return function(){return{vals:[],push:function(t){var e=parseFloat(t[a]);isNaN(e)||this.vals.push(e)},value:function(){if(0===this.vals.length)return null;this.vals.sort((function(t,e){return t-e}));var e=(this.vals.length-1)*t;return(this.vals[Math.floor(e)]+this.vals[Math.ceil(e)])/2},format:e,numInputs:void 0!==a?0:1}}}},runningStat:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mean",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return function(a){var n=o(a,1)[0];return function(){return{n:0,m:0,s:0,push:function(t){var e=parseFloat(t[n]);if(!isNaN(e)){this.n+=1,1===this.n&&(this.m=e);var r=this.m+(e-this.m)/this.n;this.s=this.s+(e-this.m)*(e-r),this.m=r}},value:function(){if("mean"===t)return 0===this.n?NaN:this.m;if(this.n<=e)return 0;switch(t){case"var":return this.s/(this.n-e);case"stdev":return Math.sqrt(this.s/(this.n-e));default:throw new Error("unknown mode for runningStat")}},format:r,numInputs:void 0!==n?0:1}}}},sumOverSum:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return function(e){var r=o(e,2),a=r[0],n=r[1];return function(){return{sumNum:0,sumDenom:0,push:function(t){isNaN(parseFloat(t[a]))||(this.sumNum+=parseFloat(t[a])),isNaN(parseFloat(t[n]))||(this.sumDenom+=parseFloat(t[n]))},value:function(){return this.sumNum/this.sumDenom},format:t,numInputs:void 0!==a&&void 0!==n?0:2}}}},fractionOf:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"total",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return function(){for(var a=arguments.length,n=Array(a),o=0;o<a;o++)n[o]=arguments[o];return function(a,o,l){return{selector:{total:[[],[]],row:[o,[]],col:[[],l]}[e],inner:t.apply(void 0,u(Array.from(n||[])))(a,o,l),push:function(t){this.inner.push(t)},format:r,value:function(){return this.inner.value()/a.getAggregator.apply(a,u(Array.from(this.selector||[]))).inner.value()},numInputs:t.apply(void 0,u(Array.from(n||[])))().numInputs}}}},countUnique:function(t){return w.uniques((function(t){return t.length}),t)},listUnique:function(t){return w.uniques((function(e){return e.join(t)}),(function(t){return t}))},max:function(t){return w.extremes("max",t)},min:function(t){return w.extremes("min",t)},first:function(t){return w.extremes("first",t)},last:function(t){return w.extremes("last",t)},median:function(t){return w.quantile(.5,t)},average:function(t){return w.runningStat("mean",1,t)},var:function(t,e){return w.runningStat("var",t,e)},stdev:function(t,e){return w.runningStat("stdev",t,e)}},O={Count:(c=w).count(y),"Count Unique Values":c.countUnique(y),"List Unique Values":c.listUnique(", "),Sum:c.sum(b),"Integer Sum":c.sum(y),Average:c.average(b),Median:c.median(b),"Sample Variance":c.var(1,b),"Sample Standard Deviation":c.stdev(1,b),Minimum:c.min(b),Maximum:c.max(b),First:c.first(b),Last:c.last(b),"Sum over Sum":c.sumOverSum(b),"Sum as Fraction of Total":c.fractionOf(c.sum(),"total",m),"Sum as Fraction of Rows":c.fractionOf(c.sum(),"row",m),"Sum as Fraction of Columns":c.fractionOf(c.sum(),"col",m),"Count as Fraction of Total":c.fractionOf(c.count(),"total",m),"Count as Fraction of Rows":c.fractionOf(c.count(),"row",m),"Count as Fraction of Columns":c.fractionOf(c.count(),"col",m)},S={en:{aggregators:O,localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter values",apply:"Apply",cancel:"Cancel",totals:"Totals",vs:"vs",by:"by"}}},k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],C=function(t){return("0"+t).substr(-2,2)},A={bin:function(t,e){return function(r){return r[t]-r[t]%e}},dateFormat:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T,o=r?"UTC":"";return function(r){var l=new Date(Date.parse(r[t]));return isNaN(l)?"":e.replace(/%(.)/g,(function(t,e){switch(e){case"y":return l["get"+o+"FullYear"]();case"m":return C(l["get"+o+"Month"]()+1);case"n":return a[l["get"+o+"Month"]()];case"d":return C(l["get"+o+"Date"]());case"w":return n[l["get"+o+"Day"]()];case"x":return l["get"+o+"Day"]();case"H":return C(l["get"+o+"Hours"]());case"M":return C(l["get"+o+"Minutes"]());case"S":return C(l["get"+o+"Seconds"]());default:return"%"+e}}))}}},j=function(t){return t.join(String.fromCharCode(0))},M=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this.props=Object.assign({},t.defaultProps,r),i.default.checkPropTypes(t.propTypes,this.props,"prop","PivotData"),this.aggregator=this.props.aggregators[this.props.aggregatorName](this.props.vals),this.tree={},this.rowKeys=[],this.colKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator(this,[],[]),this.subtotals=a,this.sorted=!1,t.forEachRecord(this.props.data,this.props.derivedAttributes,(function(t){e.filter(t)&&e.processRecord(t)}))}return n(t,[{key:"filter",value:function(t){for(var e in this.props.valueFilter)if(t[e]in this.props.valueFilter[e])return!1;return!0}},{key:"forEachMatchingRecord",value:function(e,r){var a=this;return t.forEachRecord(this.props.data,this.props.derivedAttributes,(function(t){if(a.filter(t)){for(var n in e){if(e[n]!==(n in t?t[n]:"null"))return}r(t)}}))}},{key:"arrSort",value:function(t,e){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.map((function(t){return g(r.props.sorters,t)}));return function(t,r){for(var o=Math.min(t.length,r.length),l=0;l<o;l++){var i=n[l],s=a?i(r[l],t[l]):i(t[l],r[l]);if(0!==s)return s}return e?t.length-r.length:r.length-t.length}}},{key:"sortKeys",value:function(){var t=this;if(!this.sorted){this.sorted=!0;var e=function(e,r){return t.getAggregator(e,r).value()};switch(this.props.rowOrder){case"key_z_to_a":this.rowKeys.sort(this.arrSort(this.props.rows,this.subtotals.rowPartialOnTop,!0));break;case"value_a_to_z":this.rowKeys.sort((function(t,r){return v(e(t,[]),e(r,[]))}));break;case"value_z_to_a":this.rowKeys.sort((function(t,r){return-v(e(t,[]),e(r,[]))}));break;default:this.rowKeys.sort(this.arrSort(this.props.rows,this.subtotals.rowPartialOnTop))}switch(this.props.colOrder){case"key_z_to_a":this.colKeys.sort(this.arrSort(this.props.cols,this.subtotals.colPartialOnTop,!0));break;case"value_a_to_z":this.colKeys.sort((function(t,r){return v(e([],t),e([],r))}));break;case"value_z_to_a":this.colKeys.sort((function(t,r){return-v(e([],t),e([],r))}));break;default:this.colKeys.sort(this.arrSort(this.props.cols,this.subtotals.colPartialOnTop))}}}},{key:"getColKeys",value:function(){return this.sortKeys(),this.colKeys}},{key:"getRowKeys",value:function(){return this.sortKeys(),this.rowKeys}},{key:"processRecord",value:function(t){var e=[],r=[],a=!0,n=!1,o=void 0;try{for(var l,i=this.props.cols[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;e.push(s in t?t[s]:"null")}}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}var u=!0,c=!1,f=void 0;try{for(var p,h=this.props.rows[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var d=p.value;r.push(d in t?t[d]:"null")}}catch(t){c=!0,f=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw f}}this.allTotal.push(t);for(var v=this.subtotals.rowEnabled?1:Math.max(1,r.length),g=this.subtotals.colEnabled?1:Math.max(1,e.length),b=void 0,y=void 0,m=v;m<=r.length;m++){b=m<r.length;var w=r.slice(0,m),O=j(w);this.rowTotals[O]||(this.rowKeys.push(w),this.rowTotals[O]=this.aggregator(this,w,[])),this.rowTotals[O].push(t),this.rowTotals[O].isSubtotal=b}for(var S=g;S<=e.length;S++){y=S<e.length;var k=e.slice(0,S),T=j(k);this.colTotals[T]||(this.colKeys.push(k),this.colTotals[T]=this.aggregator(this,[],k)),this.colTotals[T].push(t),this.colTotals[T].isSubtotal=y}for(var C=v;C<=r.length;C++){b=C<r.length;var A=r.slice(0,C),M=j(A);this.tree[M]||(this.tree[M]={});for(var _=g;_<=e.length;_++){y=_<e.length;var x=e.slice(0,_),N=j(x);this.tree[M][N]||(this.tree[M][N]=this.aggregator(this,A,x)),this.tree[M][N].push(t),this.tree[M][N].isRowSubtotal=b,this.tree[M][N].isColSubtotal=y,this.tree[M][N].isSubtotal=b||y}}}},{key:"getAggregator",value:function(t,e){var r=j(t),a=j(e);return(0===t.length&&0===e.length?this.allTotal:0===t.length?this.colTotals[a]:0===e.length?this.rowTotals[r]:this.tree[r][a])||{value:function(){return null},format:function(){return""}}}}]),t}();M.forEachRecord=function(t,e,r){var a=void 0,n=void 0;if(a=0===Object.getOwnPropertyNames(e).length?r:function(t){for(var a in e){var n=e[a](t);null!==n&&(t[a]=n)}return r(t)},"function"==typeof t)return t(a);if(Array.isArray(t))return Array.isArray(t[0])?function(){var e=[],r=!0,o=!1,l=void 0;try{for(var i,s=Object.keys(t||{})[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value,c=t[u];if(u>0){n={};var f=!0,p=!1,h=void 0;try{for(var d,v=Object.keys(t[0]||{})[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var g=d.value,b=t[0][g];n[b]=c[g]}}catch(t){p=!0,h=t}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}e.push(a(n))}}}catch(t){o=!0,l=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw l}}return e}():function(){var e=[],r=!0,o=!1,l=void 0;try{for(var i,s=Array.from(t)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)n=i.value,e.push(a(n))}catch(t){o=!0,l=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw l}}return e}();throw new Error("unknown input format")},M.defaultProps={aggregators:O,cols:[],rows:[],vals:[],aggregatorName:"Count",sorters:{},valueFilter:{},rowOrder:"key_a_to_z",colOrder:"key_a_to_z",derivedAttributes:{}},M.propTypes={data:i.default.oneOfType([i.default.array,i.default.object,i.default.func]).isRequired,aggregatorName:i.default.string,cols:i.default.arrayOf(i.default.string),rows:i.default.arrayOf(i.default.string),vals:i.default.arrayOf(i.default.string),valueFilter:i.default.objectOf(i.default.objectOf(i.default.bool)),sorters:i.default.oneOfType([i.default.func,i.default.objectOf(i.default.func)]),derivedAttributes:i.default.objectOf(i.default.func),rowOrder:i.default.oneOf(["key_a_to_z","key_z_to_a","value_a_to_z","value_z_to_a"]),colOrder:i.default.oneOf(["key_a_to_z","key_z_to_a","value_a_to_z","value_z_to_a"])},e.aggregatorTemplates=w,e.aggregators=O,e.derivers=A,e.locales=S,e.naturalSort=v,e.numberFormat=f,e.getSort=g,e.sortAs=function(t){var e={},r={};for(var a in t){var n=t[a];e[n]=a,"string"==typeof n&&(r[n.toLowerCase()]=a)}return function(t,a){return t in e&&a in e?e[t]-e[a]:t in e?-1:a in e?1:t in r&&a in r?r[t]-r[a]:t in r?-1:a in r?1:v(t,a)}},e.flatKey=j,e.PivotData=M},4627:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=s(r(0)),o=s(r(5)),l=r(4411),i=s(r(4628));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var f=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"render",value:function(){var t=this.props.renderers[this.props.rendererName in this.props.renderers?this.props.rendererName:Object.keys(this.props.renderers)[0]];return n.default.createElement(t,this.props)}}]),e}(n.default.PureComponent);f.propTypes=Object.assign({},l.PivotData.propTypes,{rendererName:o.default.string,renderers:o.default.objectOf(o.default.func)}),f.defaultProps=Object.assign({},l.PivotData.defaultProps,{rendererName:"Table",renderers:i.default}),e.default=f,t.exports=e.default},4628:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=s(r(0)),l=s(r(5)),i=r(4411);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t){var e=Math.min.apply(Math,t),r=Math.max.apply(Math,t);return function(t){var a=255-Math.round(255*(t-e)/(r-e));return{backgroundColor:"rgb(255,"+a+","+a+")"}}}function v(t){var e=Math.min.apply(Math,t),r=Math.max.apply(Math,t),a=e<0?r-e:Math.max(r,0),n=function(t){return Math.min(100/1.4,100/1.4*(t/a))};return function(t,r){var a="gray",l=0;return e<0&&(l=n(-e)),t<0&&(l+=n(t),a="darkred"),o.default.createElement("div",{style:{position:"relative",height:"100%"}},o.default.createElement("div",{style:{position:"absolute",bottom:l+"%",left:0,right:0,height:n(Math.abs(t))+"%",backgroundColor:a}}),o.default.createElement("div",{style:{position:"relative",padding:"0 5px"}},r))}}function g(t,e,r,a,n){var l=n[a]||a;return t?o.default.createElement("span",{className:"toggle-wrapper"},o.default.createElement("span",{className:"toggle",onClick:r},e),o.default.createElement("span",{className:"toggle-val"},l)):l}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(e){function r(t){f(this,r);var e=p(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return e.state={collapsedRows:{},collapsedCols:{}},e.clickHeaderHandler=e.clickHeaderHandler.bind(e),e.clickHandler=e.clickHandler.bind(e),e}return h(r,e),n(r,[{key:"getBasePivotSettings",value:function(){var e=this.props,a=e.cols,n=e.rows,o=Object.assign({rowTotals:!0,colTotals:!0},e.tableOptions),l=o.rowTotals||0===a.length,s=o.colTotals||0===n.length,u=e.namesMapping||{},c=Object.assign({arrowCollapsed:"▲",arrowExpanded:"▼"},e.subtotalOptions),f=Object.assign({displayOnTop:!1,enabled:l,hideOnExpand:!1},c.colSubtotalDisplay),p=Object.assign({displayOnTop:!1,enabled:s,hideOnExpand:!1},c.rowSubtotalDisplay),h=new i.PivotData(e,t.subtotals?{rowEnabled:p.enabled,colEnabled:f.enabled,rowPartialOnTop:p.displayOnTop,colPartialOnTop:f.displayOnTop}:{}),d=h.getRowKeys(),v=h.getColKeys(),g={},b={},y={},m=null;if(o.clickCallback){var w=!0,O=!1,S=void 0;try{for(var k,T=d[Symbol.iterator]();!(w=(k=T.next()).done);w=!0){var C=k.value,A=(0,i.flatKey)(C);A in g||(g[A]={});var j=!0,M=!1,_=void 0;try{for(var x,N=v[Symbol.iterator]();!(j=(x=N.next()).done);j=!0){var H=x.value;g[A][(0,i.flatKey)(H)]=this.clickHandler(h,C,H)}}catch(t){M=!0,_=t}finally{try{!j&&N.return&&N.return()}finally{if(M)throw _}}}}catch(t){O=!0,S=t}finally{try{!w&&T.return&&T.return()}finally{if(O)throw S}}if(l){var K=!0,E=!1,P=void 0;try{for(var R,D=d[Symbol.iterator]();!(K=(R=D.next()).done);K=!0){var F=R.value;b[(0,i.flatKey)(F)]=this.clickHandler(h,F,[])}}catch(t){E=!0,P=t}finally{try{!K&&D.return&&D.return()}finally{if(E)throw P}}}if(s){var q=!0,L=!1,B=void 0;try{for(var z,I=v[Symbol.iterator]();!(q=(z=I.next()).done);q=!0){var U=z.value;y[(0,i.flatKey)(U)]=this.clickHandler(h,[],U)}}catch(t){L=!0,B=t}finally{try{!q&&I.return&&I.return()}finally{if(L)throw B}}}l&&s&&(m=this.clickHandler(h,[],[]))}return Object.assign({pivotData:h,colAttrs:a,rowAttrs:n,colKeys:v,rowKeys:d,rowTotals:l,colTotals:s,arrowCollapsed:c.arrowCollapsed,arrowExpanded:c.arrowExpanded,colSubtotalDisplay:f,rowSubtotalDisplay:p,cellCallbacks:g,rowTotalCallbacks:b,colTotalCallbacks:y,grandTotalCallback:m,namesMapping:u},r.heatmapMappers(h,e.tableColorScaleGenerator,s,l),r.barchartMapper(h,e.barScaleGenerator,s,l))}},{key:"clickHandler",value:function(t,e,r){for(var a=this,n=this.props.cols,o=this.props.rows,l=t.getAggregator(e,r).value(),i={},s=Math.min(n.length,r.length),u=0;u<s;u++){var c=n[u];null!==r[u]&&(i[c]=r[u])}for(var f=Math.min(o.length,e.length),p=0;p<f;p++){var h=o[p];null!==e[p]&&(i[h]=e[p])}return function(e){return a.props.tableOptions.clickCallback(e,l,i,t)}}},{key:"clickHeaderHandler",value:function(t,e,r,a,n){for(var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i={},s=0;s<=a;s++){var u=r[s];i[u]=e[s]}return function(r){return n(r,e[a],i,t,o,l)}}},{key:"collapseAttr",value:function(t,e,r){var a=this;return function(n){n.stopPropagation();var o=e+1,l=r.filter((function(t){return t.length===o})).map(i.flatKey),s={};l.forEach((function(t){s[t]=!0})),t?a.setState((function(t){return{collapsedRows:Object.assign({},t.collapsedRows,s)}})):a.setState((function(t){return{collapsedCols:Object.assign({},t.collapsedCols,s)}}))}}},{key:"expandAttr",value:function(t,e,r){var a=this;return function(n){n.stopPropagation();var o={};r.forEach((function(t){for(var r=0;r<=e;r++)o[(0,i.flatKey)(t.slice(0,r+1))]=!1})),t?a.setState((function(t){return{collapsedRows:Object.assign({},t.collapsedRows,o)}})):a.setState((function(t){return{collapsedCols:Object.assign({},t.collapsedCols,o)}}))}}},{key:"toggleRowKey",value:function(t){var e=this;return function(r){r.stopPropagation(),e.setState((function(e){return{collapsedRows:Object.assign({},e.collapsedRows,c({},t,!e.collapsedRows[t]))}}))}}},{key:"toggleColKey",value:function(t){var e=this;return function(r){r.stopPropagation(),e.setState((function(e){return{collapsedCols:Object.assign({},e.collapsedCols,c({},t,!e.collapsedCols[t]))}}))}}},{key:"calcAttrSpans",value:function(t,e){for(var r=[],a=Array(e).map((function(){return 0})),n=Array(e).map((function(){return null})),o=0;o<t.length;o++){for(var l=t[o],i=[],s=0,u=Math.min(n.length,l.length);s<u&&n[s]===l[s];)i.push(-1),r[a[s]][s]++,s++;for(;s<l.length;)a[s]=o,i.push(1),s++;r.push(i),n=l}return r}},{key:"renderColHeaderRow",value:function(e,r,a){var n=a.rowAttrs,l=a.colAttrs,s=a.colKeys,u=a.visibleColKeys,c=a.colAttrSpans,f=a.rowTotals,p=a.arrowExpanded,h=a.arrowCollapsed,d=a.colSubtotalDisplay,v=a.maxColVisible,b=a.pivotData,y=a.namesMapping,m=this.props.tableOptions,w=m.highlightHeaderCellsOnHover,O=m.omittedHighlightHeaderGroups,S=void 0===O?[]:O,k=m.highlightedHeaderCells,T=0===r&&0!==n.length?o.default.createElement("th",{key:"padding",colSpan:n.length,rowSpan:l.length}):null,C=t.subtotals&&d.enabled&&r!==l.length-1,A=null,j=null;C&&(A=r+1<v?this.collapseAttr(!1,r,s):this.expandAttr(!1,r,s),j=(r+1<v?p:h)+" ");for(var M=o.default.createElement("th",{key:"label",className:"pvtAxisLabel"},g(C,j,A,e,y)),_=[],x=0!==n.length?1:0,N=0;N<u.length;){var H=u[N],K=r<H.length?c[N][r]:1,E="pvtColLabel";if(K>1&&(E+=" label-centered"),r<H.length){w&&!S.includes(l[r])&&(E+=" hoverable"),k&&Array.isArray(k[l[r]])&&k[l[r]].includes(H[r])&&(E+=" active");var P=1+(r===l.length-1?x:0),R=(0,i.flatKey)(H.slice(0,r+1)),D=C?this.toggleColKey(R):null;_.push(o.default.createElement("th",{className:E,key:"colKey-"+R,colSpan:K,rowSpan:P,onClick:this.clickHeaderHandler(b,H,this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback)},g(C,(this.state.collapsedCols[R]?h:p)+" ",D,H[r],y)))}else if(r===H.length){var F=l.length-H.length+x;_.push(o.default.createElement("th",{className:E+" pvtSubtotalLabel",key:"colKeyBuffer-"+(0,i.flatKey)(H),colSpan:K,rowSpan:F,onClick:this.clickHeaderHandler(b,H,this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback,!0)},"Subtotal"))}N+=K}var q=0===r&&f?o.default.createElement("th",{key:"total",className:"pvtTotalLabel",rowSpan:l.length+Math.min(n.length,1),onClick:this.clickHeaderHandler(b,[],this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback,!1,!0)},"Totals"):null,L=[T,M].concat(_,[q]);return o.default.createElement("tr",{key:"colAttr-"+r},L)}},{key:"renderRowHeaderRow",value:function(e){var r=this,a=e.rowAttrs,n=e.colAttrs,l=e.rowKeys,i=e.arrowCollapsed,s=e.arrowExpanded,u=e.rowSubtotalDisplay,c=e.maxRowVisible,f=e.pivotData,p=e.namesMapping;return o.default.createElement("tr",{key:"rowHdr"},a.map((function(e,n){var f=t.subtotals&&u.enabled&&n!==a.length-1,h=null,d=null;return f&&(h=n+1<c?r.collapseAttr(!0,n,l):r.expandAttr(!0,n,l),d=(n+1<c?s:i)+" "),o.default.createElement("th",{className:"pvtAxisLabel",key:"rowAttr-"+n},g(f,d,h,e,p))})),o.default.createElement("th",{className:"pvtTotalLabel",key:"padding",onClick:this.clickHeaderHandler(f,[],this.props.rows,0,this.props.tableOptions.clickRowHeaderCallback,!1,!0)},0===n.length?"Totals":null))}},{key:"renderTableRow",value:function(e,r,a){var n=this,l=a.rowAttrs,s=a.colAttrs,c=a.rowAttrSpans,f=a.visibleColKeys,p=a.pivotData,h=a.rowTotals,d=a.rowSubtotalDisplay,v=a.valueCellColors,b=a.cellStyle,y=a.valueCellBar,m=a.arrowExpanded,w=a.arrowCollapsed,O=a.cellCallbacks,S=a.rowTotalCallbacks,k=a.namesMapping,T=this.props.tableOptions,C=T.highlightHeaderCellsOnHover,A=T.omittedHighlightHeaderGroups,j=void 0===A?[]:A,M=T.highlightedHeaderCells,_=(0,i.flatKey)(e),x=0!==s.length?1:0,N=e.map((function(a,s){var u="pvtRowLabel";C&&!j.includes(l[s])&&(u+=" hoverable"),M&&Array.isArray(M[l[s]])&&M[l[s]].includes(a)&&(u+=" active");var f=c[r][s];if(f>0){var h=(0,i.flatKey)(e.slice(0,s+1)),v=1+(s===l.length-1?x:0),b=t.subtotals&&d.enabled&&s!==l.length-1,y=b?n.toggleRowKey(h):null;return o.default.createElement("th",{key:"rowKeyLabel-"+s,className:u,rowSpan:f,colSpan:v,onClick:n.clickHeaderHandler(p,e,n.props.rows,s,n.props.tableOptions.clickRowHeaderCallback)},g(b,(n.state.collapsedRows[h]?w:m)+" ",y,a,k))}return null})),H=e.length<l.length?o.default.createElement("th",{className:"pvtRowLabel pvtSubtotalLabel",key:"rowKeyBuffer",colSpan:l.length-e.length+x,rowSpan:1,onClick:this.clickHeaderHandler(p,e,this.props.rows,e.length,this.props.tableOptions.clickRowHeaderCallback,!0)},"Subtotal"):null,K=O[_]||{},E=f.map((function(t){var r=(0,i.flatKey)(t),a=p.getAggregator(e,t),n=a.value(),l=Object.assign({},a.isSubtotal?{fontWeight:"bold"}:v(e,t,n),b);return o.default.createElement("td",{className:"pvtVal",key:"pvtVal-"+r,onClick:K[r],style:l},a.isSubtotal?a.format(n):y(e,t,n,a.format(n)))})),P=null;if(h){var R=p.getAggregator(e,[]),D=R.value();P=o.default.createElement("td",{key:"total",className:"pvtTotal",onClick:S[_],style:b},R.format(D))}var F=[].concat(u(N),[H],u(E),[P]);return o.default.createElement("tr",{key:"keyRow-"+_},F)}},{key:"renderTotalsRow",value:function(t){var e=t.rowAttrs,r=t.colAttrs,a=t.visibleColKeys,n=t.rowTotals,l=t.pivotData,s=t.cellStyle,c=t.colTotalCallbacks,f=t.grandTotalCallback,p=o.default.createElement("th",{key:"label",className:"pvtTotalLabel pvtRowTotalLabel",colSpan:e.length+Math.min(r.length,1),onClick:this.clickHeaderHandler(l,[],this.props.rows,0,this.props.tableOptions.clickRowHeaderCallback,!1,!0)},"Totals"),h=Object.assign({},s,{padding:"5px"}),d=a.map((function(t){var e=(0,i.flatKey)(t),r=l.getAggregator([],t),a=r.value();return o.default.createElement("td",{className:"pvtTotal pvtRowTotal",key:"total-"+e,onClick:c[e],style:h},r.format(a))})),v=null;if(n){var g=l.getAggregator([],[]),b=g.value();v=o.default.createElement("td",{key:"total",className:"pvtGrandTotal pvtRowTotal",onClick:f},g.format(b))}var y=[p].concat(u(d),[v]);return o.default.createElement("tr",{key:"total"},y)}},{key:"visibleKeys",value:function(t,e,r,a){return t.filter((function(t){return!t.some((function(r,a){return e[(0,i.flatKey)(t.slice(0,a))]}))&&(t.length===r||(0,i.flatKey)(t)in e||!a.hideOnExpand)}))}},{key:"render",value:function(){var e=this;this.cachedProps!==this.props&&(this.cachedProps=this.props,this.cachedBasePivotSettings=this.getBasePivotSettings());var r=this.cachedBasePivotSettings,a=r.colAttrs,n=r.rowAttrs,l=r.rowKeys,i=r.colKeys,s=r.colTotals,c=r.rowSubtotalDisplay,f=r.colSubtotalDisplay,p=t.subtotals?this.visibleKeys(l,this.state.collapsedRows,n.length,c):l,h=t.subtotals?this.visibleKeys(i,this.state.collapsedCols,a.length,f):i,d=Object.assign({visibleRowKeys:p,maxRowVisible:Math.max.apply(Math,u(p.map((function(t){return t.length})))),visibleColKeys:h,maxColVisible:Math.max.apply(Math,u(h.map((function(t){return t.length})))),rowAttrSpans:this.calcAttrSpans(p,n.length),colAttrSpans:this.calcAttrSpans(h,a.length)},this.cachedBasePivotSettings);return o.default.createElement("table",{className:"pvtTable"},o.default.createElement("thead",null,a.map((function(t,r){return e.renderColHeaderRow(t,r,d)})),0!==n.length&&this.renderRowHeaderRow(d)),o.default.createElement("tbody",null,p.map((function(t,r){return e.renderTableRow(t,r,d)})),s&&this.renderTotalsRow(d)))}}],[{key:"heatmapMappers",value:function(e,r,n,o){var l=function(){return{}},s=function(){return{}},u=function(){return{}};if(t.heatmapMode){if(n){var c=Object.values(e.colTotals).map((function(t){return t.value()}));u=r(c)}if(o){var f=Object.values(e.rowTotals).map((function(t){return t.value()}));s=r(f)}if("full"===t.heatmapMode){var p=[];Object.values(e.tree).map((function(t){return Object.values(t).map((function(t){return!t.isSubtotal&&p.push(t.value())}))}));var h=r(p);l=function(t,e,r){return h(r)}}else if("row"===t.heatmapMode){var d={};Object.entries(e.tree).map((function(t){var e=a(t,2),n=e[0],o=e[1],l=Object.values(o).map((function(t){return!t.isSubtotal&&t.value()}));d[n]=r(l)})),l=function(t,e,r){return d[(0,i.flatKey)(t)](r)}}else if("col"===t.heatmapMode){var v={},g={};for(var b in Object.values(e.tree).map((function(t){return Object.entries(t).map((function(t){var e=a(t,2),r=e[0],n=e[1];r in g||(g[r]=[]),n.isSubtotal||g[r].push(n.value())}))})),g)v[b]=r(g[b]);l=function(t,e,r){return v[(0,i.flatKey)(e)](r)}}}return{valueCellColors:l,rowTotalColors:s,colTotalColors:u}}},{key:"barchartMapper",value:function(e,r,n,o){var l={},s=function(t,e,r,a){return a},u=function(t,e){return e},c=function(t,e){return e};if(t.barchartMode){if(l={textAlign:"center",padding:0,paddingTop:"5px",height:"60px"},n){var f=Object.values(e.colTotals).filter((function(t){return!t.isSubtotal})).map((function(t){return t.value()}));c=r(f)}if(o){var p=Object.values(e.rowTotals).filter((function(t){return!t.isSubtotal})).map((function(t){return t.value()}));u=r(p)}if("full"===t.barchartMode){var h=[];Object.values(e.tree).map((function(t){return Object.values(t).map((function(t){return!t.isSubtotal&&h.push(t.value())}))}));var d=r(h);s=function(t,e,r,a){return d(r,a)}}else if("row"===t.barchartMode){var v={};Object.entries(e.tree).map((function(t){var e=a(t,2),n=e[0],o=e[1],l=Object.values(o).map((function(t){return!t.isSubtotal&&t.value()}));v[n]=r(l)})),s=function(t,e,r,a){return v[(0,i.flatKey)(t)](r,a)}}else if("col"===t.barchartMode){var g={},b={};for(var y in Object.values(e.tree).map((function(t){return Object.entries(t).map((function(t){var e=a(t,2),r=e[0],n=e[1];r in b||(b[r]=[]),n.isSubtotal||b[r].push(n.value())}))})),b)g[y]=r(b[y]);s=function(t,e,r,a){return g[(0,i.flatKey)(e)](r,a)}}}return{cellStyle:l,valueCellBar:s,rowTotalBar:u,colTotalBar:c}}}]),r}(o.default.Component);return e.defaultProps=i.PivotData.defaultProps,e.propTypes=i.PivotData.propTypes,e.defaultProps.tableColorScaleGenerator=d,e.defaultProps.barScaleGenerator=v,e.defaultProps.tableOptions={},e.propTypes.tableColorScaleGenerator=l.default.func,e.propTypes.tableOptions=l.default.object,e}var y=function(t){function e(){return f(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return h(e,t),n(e,[{key:"render",value:function(){var t=new i.PivotData(this.props),e=t.getRowKeys(),r=t.getColKeys();0===e.length&&e.push([]),0===r.length&&r.push([]);var a=t.props.rows.map((function(t){return t}));1===r.length&&0===r[0].length?a.push(this.props.aggregatorName):r.map((function(t){return a.push(t.join("-"))}));var n=e.map((function(e){var a=e.map((function(t){return t}));return r.map((function(r){var n=t.getAggregator(e,r).value();a.push(n||"")})),a}));return n.unshift(a),o.default.createElement("textarea",{value:n.map((function(t){return t.join("\t")})).join("\n"),style:{width:window.innerWidth/2,height:window.innerHeight/2},readOnly:!0})}}]),e}(o.default.PureComponent);y.defaultProps=i.PivotData.defaultProps,y.propTypes=i.PivotData.propTypes,e.default={Table:b(),"Table Heatmap":b({heatmapMode:"full"}),"Table Col Heatmap":b({heatmapMode:"col"}),"Table Row Heatmap":b({heatmapMode:"row"}),"Table Barchart":b({barchartMode:"full"}),"Table Col Barchart":b({barchartMode:"col"}),"Table Row Barchart":b({barchartMode:"row"}),"Table With Subtotal":b({subtotals:!0}),"Table With Subtotal Heatmap":b({heatmapMode:"full",subtotals:!0}),"Table With Subtotal Col Heatmap":b({heatmapMode:"col",subtotals:!0}),"Table With Subtotal Row Heatmap":b({heatmapMode:"row",subtotals:!0}),"Table With Subtotal Barchart":b({barchartMode:"full",subtotals:!0}),"Table With Subtotal Col Barchart":b({barchartMode:"col",subtotals:!0}),"Table With Subtotal Row Barchart":b({barchartMode:"row",subtotals:!0}),"Exportable TSV":y},t.exports=e.default},4629:function(t,e,r){},4734:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return f}));var a=r(0),n=r(65),o=r(437),l=r(4627),i=r.n(l),s=r(4411),u=(r(4629),r(1));const c=n.g.div`
  padding: ${({theme:t})=>4*t.gridUnit}px;
  height: ${({height:t})=>t}px;
  width: ${({width:t})=>t}px;
  overflow-y: scroll;
  }
`;function f(t){const{data:e,height:r,width:n,groupbyRows:l,groupbyColumns:f,metrics:p,tableRenderer:h,colOrder:d,rowOrder:v,aggregateFunction:g,transposePivot:b,rowSubtotalPosition:y,colSubtotalPosition:m,colTotals:w,rowTotals:O,valueFormat:S,emitFilter:k,setDataMask:T,selectedFilters:C,verboseMap:A}=t,j=Object(o.c)(S),M={Count:(_=s.aggregatorTemplates).count(j),"Count Unique Values":_.countUnique(j),"List Unique Values":_.listUnique(", "),Sum:_.sum(j),Average:_.average(j),Median:_.median(j),"Sample Variance":_.var(1,j),"Sample Standard Deviation":_.stdev(1,j),Minimum:_.min(j),Maximum:_.max(j),First:_.first(j),Last:_.last(j),"Sum as Fraction of Total":_.fractionOf(_.sum(),"total",j),"Sum as Fraction of Rows":_.fractionOf(_.sum(),"row",j),"Sum as Fraction of Columns":_.fractionOf(_.sum(),"col",j),"Count as Fraction of Total":_.fractionOf(_.count(),"total",j),"Count as Fraction of Rows":_.fractionOf(_.count(),"row",j),"Count as Fraction of Columns":_.fractionOf(_.count(),"col",j)};var _;const x=p.map(t=>"string"==typeof t?t:t.label),N=e.reduce((t,e)=>[...t,...x.map(t=>({...e,metric:t,value:e[t]}))],[]),[H,K]=b?[f,["metric",...l]]:[l,["metric",...f]],E=Object(a.useCallback)(t=>{const e=Object.keys(t);T({extraFormData:{filters:0===e.length?void 0:e.map(e=>{const r=null==t?void 0:t[e];return null==r?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:r}})},filterState:{value:t&&Object.keys(t).length?Object.values(t):null,selectedFilters:t&&Object.keys(t).length?t:null}})},[T]),P=Object(a.useCallback)((t,e)=>{var r;return!!C&&(null==(r=C[t])?void 0:r.includes(e))},[C]),R=Object(a.useCallback)((t,e,r,a,n,o)=>{if(n||o||!k)return;const l={...r};delete l.metric;const i=Object.entries(l);if(0===i.length)return;const[s,u]=i[i.length-1],c={...C||{}};C&&P(s,u)?c[s]=C[s].filter(t=>t!==u):c[s]=[...(null==C?void 0:C[s])||[],u],Array.isArray(c[s])&&0===c[s].length&&delete c[s],E(c)},[k,C,E]);return Object(u.d)(c,{height:r,width:n},Object(u.d)(i.a,{data:N,rows:H,cols:K,aggregators:M,aggregatorName:g,vals:["value"],rendererName:h,colOrder:d,rowOrder:v,sorters:{metric:Object(s.sortAs)(x)},tableOptions:{clickRowHeaderCallback:R,clickColumnHeaderCallback:R,colTotals:w,rowTotals:O,highlightHeaderCellsOnHover:k,highlightedHeaderCells:C,omittedHighlightHeaderGroups:["metric"]},subtotalOptions:{colSubtotalDisplay:{displayOnTop:m},rowSubtotalDisplay:{displayOnTop:y}},namesMapping:A}))}}}]);